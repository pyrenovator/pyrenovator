<html><h3>Pattern ID :19424
</h3><img src='63412711.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        ]

    def test_ner(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["tagging-elmo-crf-tagger"].archive_file<a id="change">
        )</a>

        sentence = Michael Jordan is a professor at Berkeley.

        result = predictor.predict_json({"sentence": sentence})</code></pre><h3>After Change</h3><pre><code class='java'>
        ]

    def test_ner(self):
        predictor = <a id="change">load_predictor("tagging-elmo-crf-tagger"</a><a id="change">)</a>

        sentence = Michael Jordan is a professor at Berkeley.

        result = predictor.predict_json({"sentence": sentence})</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 8</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL299' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412711</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_ner(1)</div><div id='n_method'> N Method Name: test_ner(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 307</div><div id='m_end'> M End Line: 309</div><div id='n_start'> N Start Line: 299</div><div id='n_end'> N End Line: 299</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ]

    def test_textual_entailment(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["pair-classification-decomposable-attention-elmo"].archive_file<a id="change">
        )</a>

        result = predictor.predict_json(
            {
                "premise": "An interplanetary spacecraft is in orbit around a gas giant&quots icy moon.",</code></pre><h3>After Change</h3><pre><code class='java'>
        ]

    def test_textual_entailment(self):
        predictor = <a id="change">load_predictor("pair-classification-decomposable-attention-elmo"</a><a id="change">)</a>

        result = predictor.predict_json(
            {
                "premise": "An interplanetary spacecraft is in orbit around a gas giant&quots icy moon.",</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL206' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412710</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_textual_entailment(1)</div><div id='n_method'> N Method Name: test_textual_entailment(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 207</div><div id='m_end'> M End Line: 209</div><div id='n_start'> N Start Line: 201</div><div id='n_end'> N End Line: 201</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert result["label_probs"][2] &gt; 0.6  &#47&#47 neutral

    def test_coreference_resolution(self):
        predictor = <a id="change">Predictor.from_path(</a>self.pretrained_models["coref-spanbert"].archive_file<a id="change">)</a>

        document = "We &quotre not going to skimp on quality , but we are very focused to make next year . The only problem is that some of the fabrics are wearing out - since I was a newbie I skimped on some of the fabric and the poor quality ones are developing holes ."

        result = predictor.predict_json({"document": document})</code></pre><h3>After Change</h3><pre><code class='java'>
        assert result["label_probs"][2] &gt; 0.6  &#47&#47 neutral

    def test_coreference_resolution(self):
        predictor = <a id="change">load_predictor("coref-spanbert"</a><a id="change">)</a>

        document = "We &quotre not going to skimp on quality , but we are very focused to make next year . The only problem is that some of the fabrics are wearing out - since I was a newbie I skimped on some of the fabric and the poor quality ones are developing holes ."

        result = predictor.predict_json({"document": document})</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL238' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412709</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_coreference_resolution(1)</div><div id='n_method'> N Method Name: test_coreference_resolution(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 239</div><div id='m_end'> M End Line: 239</div><div id='n_start'> N Start Line: 231</div><div id='n_end'> N End Line: 231</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.pretrained_models = pretrained.get_pretrained_models()

    def test_machine_comprehension(self):
        predictor = <a id="change">Predictor.from_path(</a>self.pretrained_models["rc-bidaf"].archive_file<a id="change">)</a>

        passage = The Matrix is a 1999 science fiction action film written and directed by The Wachowskis, starring Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss, Hugo Weaving, and Joe Pantoliano. It depicts a dystopian future in which reality as perceived by most humans is actually a simulated reality called "the Matrix", created by sentient machines to subdue the human population, while their bodies&quot heat and electrical activity are used as an energy source. Computer programmer Neo" learns this truth and is drawn into a rebellion against the machines, which involves other people who have been freed from the "dream world". 
        question = "Who stars in The Matrix?"
</code></pre><h3>After Change</h3><pre><code class='java'>
@pytest.mark.pretrained_model_test
class TestAllenNlpPretrained(AllenNlpTestCase):
    def test_machine_comprehension(self):
        predictor = <a id="change">load_predictor("rc-bidaf"</a><a id="change">)</a>

        passage = The Matrix is a 1999 science fiction action film written and directed by The Wachowskis, starring Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss, Hugo Weaving, and Joe Pantoliano. It depicts a dystopian future in which reality as perceived by most humans is actually a simulated reality called "the Matrix", created by sentient machines to subdue the human population, while their bodies&quot heat and electrical activity are used as an energy source. Computer programmer Neo" learns this truth and is drawn into a rebellion against the machines, which involves other people who have been freed from the "dream world". 
        question = "Who stars in The Matrix?"
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412708</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_machine_comprehension(1)</div><div id='n_method'> N Method Name: test_machine_comprehension(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 14</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        reason="this model changed before and after 2.1 and 2.2",
    )
    def test_constituency_parsing(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["structured-prediction-constituency-parser"].archive_file<a id="change">
        )</a>

        sentence = Pierre Vinken died aged 81; immortalised aged 61.

        result = predictor.predict_json({"sentence": sentence})</code></pre><h3>After Change</h3><pre><code class='java'>
        reason="this model changed before and after 2.1 and 2.2",
    )
    def test_constituency_parsing(self):
        predictor = <a id="change">load_predictor("structured-prediction-constituency-parser"</a><a id="change">)</a>

        sentence = Pierre Vinken died aged 81; immortalised aged 61.

        result = predictor.predict_json({"sentence": sentence})</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL331' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412707</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_constituency_parsing(1)</div><div id='n_method'> N Method Name: test_constituency_parsing(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 332</div><div id='m_end'> M End Line: 334</div><div id='n_start'> N Start Line: 322</div><div id='n_end'> N End Line: 322</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert result["predicted_heads"] == [2, 0, 2, 2, 4, 2]

    def test_openie(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["structured-prediction-srl"].archive_file<a id="change">
        )</a>
        result = predictor.predict_json(
            {"sentence": "I&quotm against picketing, but I don&quott know how to show it."}
        )
        assert "verbs" in result</code></pre><h3>After Change</h3><pre><code class='java'>
        assert result["predicted_heads"] == [2, 0, 2, 2, 4, 2]

    def test_openie(self):
        predictor = <a id="change">load_predictor("structured-prediction-srl"</a><a id="change">)</a>
        result = predictor.predict_json(
            {"sentence": "I&quotm against picketing, but I don&quott know how to show it."}
        )
        assert "verbs" in result</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL380' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412706</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_openie(1)</div><div id='n_method'> N Method Name: test_openie(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 381</div><div id='m_end'> M End Line: 383</div><div id='n_start'> N Start Line: 367</div><div id='n_end'> N End Line: 367</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )

    def test_dependency_parsing(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["structured-prediction-biaffine-parser"].archive_file<a id="change">
        )</a>
        sentence = He ate spaghetti with chopsticks.
        result = predictor.predict_json({"sentence": sentence})
        &#47&#47 Note that this tree is incorrect. We are checking here that the decoded
        &#47&#47 tree is _actually a tree_ - in greedy decoding versions of the dependency</code></pre><h3>After Change</h3><pre><code class='java'>
        )

    def test_dependency_parsing(self):
        predictor = <a id="change">load_predictor("structured-prediction-biaffine-parser"</a><a id="change">)</a>
        sentence = He ate spaghetti with chopsticks.
        result = predictor.predict_json({"sentence": sentence})
        &#47&#47 Note that this tree is incorrect. We are checking here that the decoded
        &#47&#47 tree is _actually a tree_ - in greedy decoding versions of the dependency</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL357' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412705</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_dependency_parsing(1)</div><div id='n_method'> N Method Name: test_dependency_parsing(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 358</div><div id='m_end'> M End Line: 360</div><div id='n_start'> N Start Line: 346</div><div id='n_end'> N End Line: 346</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert correct == result["best_span_str"]

    def test_semantic_role_labeling(self):
        predictor = <a id="change">Predictor.from_path(
            </a>self.pretrained_models["structured-prediction-srl-bert"].archive_file<a id="change">
        )</a>

        sentence = "If you liked the music we were playing last night, you will absolutely love what we&quotre playing tomorrow!"

        result = predictor.predict_json({"sentence": sentence})</code></pre><h3>After Change</h3><pre><code class='java'>
        assert correct == result["best_span_str"]

    def test_semantic_role_labeling(self):
        predictor = <a id="change">load_predictor("structured-prediction-srl-bert"</a><a id="change">)</a>

        sentence = "If you liked the music we were playing last night, you will absolutely love what we&quotre playing tomorrow!"

        result = predictor.predict_json({"sentence": sentence})</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allennlp-models/commit/e7b8247f2709a5fb6fdec18aee744d829e9808e5#diff-07548240c6cb19056b1ed87e664359e325c21cbc02a48f32e1f6cb2cdf42d9cbL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63412704</div><div id='project'> Project Name: allenai/allennlp-models</div><div id='commit'> Commit Name: e7b8247f2709a5fb6fdec18aee744d829e9808e5</div><div id='time'> Time: 2020-07-30</div><div id='author'> Author: epwalsh10@gmail.com</div><div id='file'> File Name: tests/pretrained_test.py</div><div id='m_class'> M Class Name: TestAllenNlpPretrained</div><div id='n_method'> N Class Name: TestAllenNlpPretrained</div><div id='m_method'> M Method Name: test_semantic_role_labeling(1)</div><div id='n_method'> N Method Name: test_semantic_role_labeling(1)</div><div id='m_parent_class'> M Parent Class: AllenNlpTestCase</div><div id='n_parent_class'> N Parent Class: AllenNlpTestCase</div><div id='m_file'> M File Name: tests/pretrained_test.py</div><div id='n_file'> N File Name: tests/pretrained_test.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 28</div><BR>