<html><h3>Pattern ID :17220
</h3><img src='57361578.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    users = to_numpy(log, "user_idx")
    items = to_numpy(log, "item_idx")
    relevance = to_numpy(log, "relevance")
    <a id="change">return </a>csr_matrix((relevance, (items<a id="change">, users</a>)))


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:</code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 0],
           [0, 2]], dtype=int64)
    
    df = <a id="change">log.select(</a>"user_idx", "item_idx", "relevance"<a id="change">)</a>.toPandas()
    return csr_matrix((df.relevance, (df.item_idx, df.user_idx)))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/d64dec49c52992118860248b7aba033c903c12b9#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL277' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57361578</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: d64dec49c52992118860248b7aba033c903c12b9</div><div id='time'> Time: 2020-04-30</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        frames_to_sample.append(sample_frame_numbers)

    <a id="change">return </a>ids_to_sample<a id="change">, frames_to_sample</a>


def _insert_docs(docs, src_docs, src_inds, dataset, src_dataset):
    if src_docs:</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            sample_view = src_dataset

        sample_view = <a id="change">sample_view.select(</a>ids_to_sample<a id="change">, ordered=True)</a>
    else:
        sample_view = None

    return sample_view, frames_to_sample</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/6f394fe9dff89a8689eb3f5d6612f477b385c104#diff-c25238eee8016d2c8e7b613e52a415119fa2722bf473dbfbedc903a3b17c1cdaL674' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57361577</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 6f394fe9dff89a8689eb3f5d6612f477b385c104</div><div id='time'> Time: 2022-10-07</div><div id='author'> Author: brimoor@umich.edu</div><div id='file'> File Name: fiftyone/core/video.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _init_frames(11)</div><div id='n_method'> N Method Name: _init_frames(11)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fiftyone/core/video.py</div><div id='n_file'> N File Name: fiftyone/core/video.py</div><div id='m_start'> M Start Line: 860</div><div id='m_end'> M End Line: 869</div><div id='n_start'> N Start Line: 707</div><div id='n_end'> N End Line: 877</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    users = to_numpy(log, "user_idx")
    items = to_numpy(log, "item_idx")
    relevance = to_numpy(log, "relevance")
    <a id="change">return </a>csr_matrix((relevance<a id="change">, (items, users)</a>))


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:</code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 0],
           [0, 2]], dtype=int64)
    
    df = <a id="change">log.select(</a>"user_idx", "item_idx", "relevance"<a id="change">)</a>.toPandas()
    return csr_matrix((df.relevance, (df.item_idx, df.user_idx)))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/11d2dcf0cc56cfcbaee2c35e801681acf6757d9a#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL263' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57361582</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 11d2dcf0cc56cfcbaee2c35e801681acf6757d9a</div><div id='time'> Time: 2020-05-07</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        frames_to_sample.append(sample_frame_numbers)

    <a id="change">return </a>ids_to_sample<a id="change">, frames_to_sample</a>


def _insert_docs(docs, src_docs, src_inds, dataset, src_dataset):
    if src_docs:</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            sample_view = src_dataset

        sample_view = <a id="change">sample_view.select(</a>ids_to_sample<a id="change">, ordered=True)</a>
    else:
        sample_view = None

    return sample_view, frames_to_sample</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/d92fc9460afa9e662ac28d3fd4ada817dfd9e996#diff-c25238eee8016d2c8e7b613e52a415119fa2722bf473dbfbedc903a3b17c1cdaL671' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57361586</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: d92fc9460afa9e662ac28d3fd4ada817dfd9e996</div><div id='time'> Time: 2022-10-07</div><div id='author'> Author: brimoor@umich.edu</div><div id='file'> File Name: fiftyone/core/video.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _init_frames(11)</div><div id='n_method'> N Method Name: _init_frames(11)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fiftyone/core/video.py</div><div id='n_file'> N File Name: fiftyone/core/video.py</div><div id='m_start'> M Start Line: 857</div><div id='m_end'> M End Line: 866</div><div id='n_start'> N Start Line: 704</div><div id='n_end'> N End Line: 874</div><BR>