<html><h3>Pattern ID :4790
</h3><img src='16934370.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    loc = torch.rand((1, 43008, 4))
    conf = torch.rand((1, 43008, 2))
    landms<a id="change"> = </a><a id="change">torch.rand(</a>(1, 43008, 10)<a id="change">)</a>

    with torch.no_grad():
        boxes, _, _ = torch_model(loc, conf, landms)
</code></pre><h3>After Change</h3><pre><code class='java'>

    with torch.no_grad():
        res = torch_model(img)
    <a id="change">print(</a>res[0].shape<a id="change">)</a>

    if args.build_onnx:
        print("build onnx...", args.onnx_path)
        torch.onnx.export(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lihaoxiang1989/tensorrt-cv/commit/defa136eb68db8c102bf6fd06339776e0a40d83e#diff-54c71df309d378a4684cddbd182859418cd3c37a41a1db8093755bc41567b88eL269' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16934370</div><div id='project'> Project Name: lihaoxiang1989/tensorrt-cv</div><div id='commit'> Commit Name: defa136eb68db8c102bf6fd06339776e0a40d83e</div><div id='time'> Time: 2021-06-27</div><div id='author'> Author: hxl.colin@gmail.com</div><div id='file'> File Name: Retinaface/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: Retinaface/main.py</div><div id='n_file'> N File Name: Retinaface/main.py</div><div id='m_start'> M Start Line: 275</div><div id='m_end'> M End Line: 302</div><div id='n_start'> N Start Line: 269</div><div id='n_end'> N End Line: 307</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    torch.backends.cudnn.deterministic = True

    data<a id="change"> = </a><a id="change">torch.rand(</a>2, 3, 224, 224<a id="change">)</a>

    for model_cls in MODEL_LIST:
        if model_cls in RANDOMIZED_MODELS:
            &#47&#47 remove the impact of randomicity</code></pre><h3>After Change</h3><pre><code class='java'>
                    fx_val,
                    non_fx_val), f&quot{model.__class__.__name__} has inconsistent outputs, {fx_val} vs {non_fx_val}&quot
        except Exception as e:
            <a id="change">print(</a>name, e<a id="change">)</a>


if __name__ == &quot__main__&quot:
    test_torchvision_models()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hpcaitech/colossalai/commit/a674c6334846aa4af71703961d68907e8d0611b2#diff-5a6663c4257c6858e673f03749560f077ee49f9bc1c0b9b54830f6b978727452L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16934353</div><div id='project'> Project Name: hpcaitech/colossalai</div><div id='commit'> Commit Name: a674c6334846aa4af71703961d68907e8d0611b2</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: somerlee.9@gmail.com</div><div id='file'> File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_torchvision_models(0)</div><div id='n_method'> N Method Name: test_torchvision_models(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='n_file'> N File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                * contractor(nodes1, output_edge_order=[edge1[j], edge2[j]]).tensor
            )
            pu = rho[0, 0]
            r<a id="change"> = </a><a id="change">np.random.rand()</a>
            if r &lt; pu:
                sample += "0"
                p = p * pu
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
                * contractor(nodes1, output_edge_order=[edge1[j], edge2[j]]).tensor
            )
            pu = rho[0, 0]
            <a id="change">print(</a>pu.dtype<a id="change">)</a>
            r = backend.random_uniform([])
            r = backend.real(backend.cast(r, dtypestr))
            if r &lt; backend.real(pu):
                sample += "0"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencent-quantum-lab/tensorcircuit/commit/d3d4e135f4b850997a7f544d28f3f3351e51f78e#diff-f72cc322e6ca3869461d9a13b82c064d4997d21afff95c5834f1fa653d3ad957L241' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16934372</div><div id='project'> Project Name: tencent-quantum-lab/tensorcircuit</div><div id='commit'> Commit Name: d3d4e135f4b850997a7f544d28f3f3351e51f78e</div><div id='time'> Time: 2020-04-20</div><div id='author'> Author: kcanamgal@foxmail.com</div><div id='file'> File Name: tensorcircuit/circuit.py</div><div id='m_class'> M Class Name: Circuit</div><div id='n_method'> N Class Name: Circuit</div><div id='m_method'> M Method Name: measure(1)</div><div id='n_method'> N Method Name: measure(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tensorcircuit/circuit.py</div><div id='n_file'> N File Name: tensorcircuit/circuit.py</div><div id='m_start'> M Start Line: 272</div><div id='m_end'> M End Line: 274</div><div id='n_start'> N Start Line: 272</div><div id='n_end'> N End Line: 276</div><BR>