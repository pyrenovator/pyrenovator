<html><h3>Pattern ID :27970
</h3><img src='82895168.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def finetune(args):
    &#47&#47 Preliminaries
    <a id="change">torch.manual_seed(</a>args.seed<a id="change">)</a>

    &#47&#47 Initialize Tokenizer
    tokenizer = AutoTokenizer.from_pretrained(args.pretrained, model_max_length=args.msl, do_lower_case=args.lowercase)
    add_token = {&quotadditional_special_tokens&quot: args.add_token}</code></pre><h3>After Change</h3><pre><code class='java'>
        print("  Number of complete trials: ", len(complete_trials))

        print("Best trial:")
        trial<a id="change"> = </a>study.best_trial
        print("  Validation Accuracy : {:.4f}".format(trial.value))
        print("  Params: ")
        <a id="change">for </a>key, value in trial.params.items()<a id="change">:
            </a>print("    {}: {}".format(key, value))
    
    &#47&#47 Run standard finetuning without hyperparameter search
    else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jcblaisecruz02/filipino-text-benchmarks/commit/15609e90770528e9ab579af62caf962d30560f76#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82895168</div><div id='project'> Project Name: jcblaisecruz02/filipino-text-benchmarks</div><div id='commit'> Commit Name: 15609e90770528e9ab579af62caf962d30560f76</div><div id='time'> Time: 2020-06-06</div><div id='author'> Author: jan_christian_cruz@dlsu.edu.ph</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: finetune(1)</div><div id='n_method'> N Method Name: finetune(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 166</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_lsymeig_with_M(dtype, device):
    &#47&#47 generate the matrix
    na = 10
    <a id="change">torch.manual_seed(</a>123<a id="change">)</a>
    A1 = (torch.rand((1,na,na))*0.1).to(dtype).to(device).requires_grad_(True)
    diag = (torch.arange(na, dtype=dtype)+1.0).to(device).unsqueeze(0).requires_grad_(True)
    Acls = get_diagonally_dominant_class(na)
    params = (A1, diag)</code></pre><h3>After Change</h3><pre><code class='java'>
        eye = torch.eye(UMU.shape[-1]).to(UMU.dtype).to(UMU.device)
        assert torch.allclose(UMU, eye, atol=1e-4, rtol=1e-6)

    all_options<a id="change"> = </a>[
        {
            "method": "exacteig",
        },
        {
            "method": "davidson",
            "nguess": 10,
            "min_eps": 1e-9
        }
    ]
    <a id="change">for </a>options in all_options<a id="change">:
        </a>runtest(options)

@device_dtype_float_test()
def test_solve(dtype, device):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xitorch/xitorch/commit/6b67fab466f1d4383bdef5baf54ac968608b9561#diff-88740584f9ff3673e6429fc384fdd5c3abcdc39f317bfcd955c6e0774f19d158L46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82895170</div><div id='project'> Project Name: xitorch/xitorch</div><div id='commit'> Commit Name: 6b67fab466f1d4383bdef5baf54ac968608b9561</div><div id='time'> Time: 2020-02-10</div><div id='author'> Author: firman.kasim@gmail.com</div><div id='file'> File Name: lintorch/tests/test_fcns.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_lsymeig_with_M(2)</div><div id='n_method'> N Method Name: test_lsymeig_with_M(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lintorch/tests/test_fcns.py</div><div id='n_file'> N File Name: lintorch/tests/test_fcns.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 81</div><div id='n_end'> N End Line: 93</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_lsymeig(dtype, device):
    &#47&#47 generate the matrix
    na = 10
    <a id="change">torch.manual_seed(</a>123<a id="change">)</a>
    A1 = (torch.rand((1,na,na))*0.1).to(dtype).to(device).requires_grad_(True)
    diag = (torch.arange(na, dtype=dtype)+1.0).to(device).unsqueeze(0).requires_grad_(True)
    Acls = get_diagonally_dominant_class(na)
    params = (A1, diag)</code></pre><h3>After Change</h3><pre><code class='java'>
        eye = torch.eye(UTU.shape[-1]).unsqueeze(0).to(UTU.dtype).to(UTU.device)
        assert torch.allclose(UTU, eye, atol=1e-5, rtol=1e-5)

    all_options<a id="change"> = </a>[{
        "method": "davidson",
        "min_eps": 1e-9,
        },
        {
        "method": "exacteig",
        }]
    <a id="change">for </a>options in all_options<a id="change">:
        </a>runtest(options)

@device_dtype_float_test()
def test_lsymeig_with_M(dtype, device):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xitorch/xitorch/commit/99c518845fb5b0593d741dd0c4fbefef4719486a#diff-88740584f9ff3673e6429fc384fdd5c3abcdc39f317bfcd955c6e0774f19d158L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82895171</div><div id='project'> Project Name: xitorch/xitorch</div><div id='commit'> Commit Name: 99c518845fb5b0593d741dd0c4fbefef4719486a</div><div id='time'> Time: 2020-02-10</div><div id='author'> Author: firman.kasim@gmail.com</div><div id='file'> File Name: lintorch/tests/test_fcns.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_lsymeig(2)</div><div id='n_method'> N Method Name: test_lsymeig(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lintorch/tests/test_fcns.py</div><div id='n_file'> N File Name: lintorch/tests/test_fcns.py</div><div id='m_start'> M Start Line: 8</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 44</div><BR>