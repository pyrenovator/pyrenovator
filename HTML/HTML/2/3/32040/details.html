<html><h3>Pattern ID :32040
</h3><img src='93954657.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Whether any streams are connected to this object or corresponding
        frame-level objects.
        
        return <a id="change">bool(</a>self._sample_level_streams<a id="change">)</a>

    def filter_stream(self, stream_info):
        Filters this object to contain only frame labels specified in the
        given stream info</code></pre><h3>After Change</h3><pre><code class='java'>
        Whether any streams are connected to this object or corresponding
        frame-level objects.
        
        return <a id="change">not bool(self._sample_level_streams)</a>

    def filter_stream(self, stream_info):
        Filters this object to contain only frame labels specified in the
        given stream info</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/379baca859f891599bbf1505a730b84d710ec28f#diff-ebd0a4b351c8b6c0c60eab6071f0d5a4e28287c40f0e3612d9236c9228c1f40aL1674' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93954657</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 379baca859f891599bbf1505a730b84d710ec28f</div><div id='time'> Time: 2022-06-01</div><div id='author'> Author: ehofesmann@gmail.com</div><div id='file'> File Name: fiftyone/utils/openlabel.py</div><div id='m_class'> M Class Name: OpenLABELObject</div><div id='n_method'> N Class Name: OpenLABELObject</div><div id='m_method'> M Method Name: is_streamless(1)</div><div id='n_method'> N Method Name: is_streamless(1)</div><div id='m_parent_class'> M Parent Class: AttributeParser</div><div id='n_parent_class'> N Parent Class: AttributeParser</div><div id='m_file'> M File Name: fiftyone/utils/openlabel.py</div><div id='n_file'> N File Name: fiftyone/utils/openlabel.py</div><div id='m_start'> M Start Line: 1674</div><div id='m_end'> M End Line: 1674</div><div id='n_start'> N Start Line: 1674</div><div id='n_end'> N End Line: 1674</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    run_type = jnp.promote_types(ctx.model.computation_dtype, jnp.float32)
    if weight is None:
        if init_mean is None:
            init_mean = float(<a id="change">bool(</a>ctx.training.checkpoint_load_path<a id="change">)</a>)
        weight = get_param(ctx, "scale", [feature_dim], std=0, mean=init_mean, dtype=run_type,
                           lr_scale=ctx.optimizer.norm_scale)
</code></pre><h3>After Change</h3><pre><code class='java'>
        if init_mean is None:
            &#47&#47 init to 0 if checkpoint so, new layers get learned slowly (-&gt; rezero but input)
            &#47&#47 1 otherwise to make sure model can learn
            init_mean = float(<a id="change">not bool(ctx.training.checkpoint_load_path)</a>)
        weight = get_param(ctx, "scale", [feature_dim], std=0, mean=init_mean, dtype=run_type,
                           lr_scale=ctx.optimizer.norm_scale)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/homebrewnlp/olmax/commit/65e3f8c89555c0297104a851c71a84fb52f39906#diff-6159e4e86b1b15ffd250a78dbdf29a41b004b4963154e49f8b96609b8ea977ceL40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93954656</div><div id='project'> Project Name: homebrewnlp/olmax</div><div id='commit'> Commit Name: 65e3f8c89555c0297104a851c71a84fb52f39906</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: 39779310+ClashLuke@users.noreply.github.com</div><div id='file'> File Name: src/model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: scale_norm_act(7)</div><div id='n_method'> N Method Name: scale_norm_act(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/model.py</div><div id='n_file'> N File Name: src/model.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if not isinstance(data_struct, dict) and not isinstance(data_struct, types):
        return function(data_struct)

    disable_tqdm = <a id="change">bool(</a>logger.getEffectiveLevel() &gt; logging.INFO<a id="change">)</a>
    iterable = list(data_struct.values()) if isinstance(data_struct, dict) else data_struct

    if num_proc is None:
        num_proc = 1</code></pre><h3>After Change</h3><pre><code class='java'>
    if not isinstance(data_struct, dict) and not isinstance(data_struct, types):
        return function(data_struct)

    disable_tqdm = <a id="change">bool(</a>logger.getEffectiveLevel() &gt; logging.INFO<a id="change">)</a> or not utils.is_progress_bar_enabled()
    iterable = list(data_struct.values()) if isinstance(data_struct, dict) else data_struct

    if num_proc is None:
        num_proc = 1
    if num_proc &lt;= 1 or len(iterable) &lt;= num_proc:
        mapped = [
            _single_map_nested((function, obj, types, None, True))
            for obj in utils.tqdm(iterable, disable=disable_tqdm)
        ]
    else:
        split_kwds = []  &#47&#47 We organize the splits ourselve (contiguous splits)
        for index in range(num_proc):
            div = len(iterable) // num_proc
            mod = len(iterable) % num_proc
            start = div * index + min(index, mod)
            end = start + div + (1 if index &lt; mod else 0)
            split_kwds.append((function, iterable[start:end], types, index, disable_tqdm))
        assert len(iterable) == sum(len(i[1]) for i in split_kwds), (
            f"Error dividing inputs iterable among processes. "
            f"Total number of objects {len(iterable)}, "
            f"length: {sum(len(i[1]) for i in split_kwds)}"
        )
        logger.info(
            "Spawning {} processes for {} objects in slices of {}".format(
                num_proc, len(iterable), [len(i[1]) for i in split_kwds]
            )
        )
        initargs, initializer = None, None
        if <a id="change">not disable_tqdm</a>:
            initargs, initializer = (RLock(),), tqdm.set_lock
        with Pool(num_proc, initargs=initargs, initializer=initializer) as pool:
            mapped = pool.map(_single_map_nested, split_kwds)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/d25a0bf94d9f9a9aa6cabdf5b450b9c327d19729#diff-6ac0c7d88053b65510dae3138551542d741c7ae4f3d8f1853c86a7639c51c864L170' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93954658</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: d25a0bf94d9f9a9aa6cabdf5b450b9c327d19729</div><div id='time'> Time: 2021-07-26</div><div id='author'> Author: mariosasko777@gmail.com</div><div id='file'> File Name: src/datasets/utils/py_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: map_nested(8)</div><div id='n_method'> N Method Name: map_nested(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/utils/py_utils.py</div><div id='n_file'> N File Name: src/datasets/utils/py_utils.py</div><div id='m_start'> M Start Line: 198</div><div id='m_end'> M End Line: 227</div><div id='n_start'> N Start Line: 198</div><div id='n_end'> N End Line: 227</div><BR>