<html><h3>Pattern ID :25802
</h3><img src='78055463.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            column_counts: pd.Series = column_data.value_counts(dropna=False)
            &#47&#47 Filter out values not in the nulls list
            keys_to_drop = [key for key in column_counts.keys() if string_baseform(key) not in null_string_list]
            null_counts<a id="change"> = </a><a id="change">column_counts.drop(labels=keys_to_drop)</a>
            if null_counts.size &lt; 2:
                continue
            &#47&#47 Save the column info
            for key, count in null_counts.iteritems():</code></pre><h3>After Change</h3><pre><code class='java'>
            for null_value, count in null_counts.items():
                percent = count / len(column_data)
                display_array.append([column_name, null_value, count, format_percent(percent)])
                result_dict[column_name][null_value] = <a id="change">{</a>&quotcount&quot: count, &quotpercent&quot: percent<a id="change">}</a>

        &#47&#47 Create dataframe to display table
        if display_array:
            df_graph = pd.DataFrame(display_array, columns=[&quotColumn Name&quot, &quotValue&quot, &quotCount&quot, &quotPercent of data&quot])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/1d39905057831b3c7c8f52b8a507d7f210a87003#diff-e531edd0afe6341cc13e9bb4aaa47cdb06f72f14c922d1d68ab19b352351bbcaL97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78055463</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 1d39905057831b3c7c8f52b8a507d7f210a87003</div><div id='time'> Time: 2021-11-15</div><div id='author'> Author: matanper@gmail.com</div><div id='file'> File Name: mlchecks/checks/integrity/mixed_nulls.py</div><div id='m_class'> M Class Name: MixedNulls</div><div id='n_method'> N Class Name: MixedNulls</div><div id='m_method'> M Method Name: _mixed_nulls(3)</div><div id='n_method'> N Method Name: _mixed_nulls(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetBaseCheck</div><div id='n_parent_class'> N Parent Class: SingleDatasetBaseCheck</div><div id='m_file'> M File Name: mlchecks/checks/integrity/mixed_nulls.py</div><div id='n_file'> N File Name: mlchecks/checks/integrity/mixed_nulls.py</div><div id='m_start'> M Start Line: 97</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 103</div><div id='n_end'> N End Line: 134</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    embeddings = embeddings.reset_index(drop=True)
    fit_sample = embeddings.sample(n=min(len(embeddings) ,fit_sample_size), random_state=17)
    fit_sample = fit_sample.drop([&quotfilepath&quot, &quotZ&quot, &quotY&quot, &quotX&quot], axis=1, errors=&quotignore&quot)
    all_data<a id="change"> = </a><a id="change">embeddings.drop(</a>[&quotfilepath&quot, &quotZ&quot, &quotY&quot, &quotX&quot]<a id="change"> ,axis=1, errors=&quotignore&quot)</a>
    reducer = cuml.UMAP(
        n_neighbors=200,
        n_components=2,
        n_epochs=None,  &#47&#47 means automatic selection</code></pre><h3>After Change</h3><pre><code class='java'>
        embedding = reducer.fit(fit_sample)
        fit_sample[&quotumap_0&quot] = embedding.embedding_[:, 0]
        fit_sample[&quotumap_1&quot] = embedding.embedding_[:, 1]
        umap_labels = fit_sample[<a id="change">[</a>&quotumap_0&quot, &quotumap_1&quot<a id="change"></a>]].copy()
        all_data = fit_sample

    else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mpi-dortmund/tomotwin-cryoet/commit/338a176324507bf6b822967203644c3dca26bcb3#diff-66adce371c377c9ceb38fadc31bf6f5a3aa04fa703d014af4aae0bb962c73c16L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78055472</div><div id='project'> Project Name: mpi-dortmund/tomotwin-cryoet</div><div id='commit'> Commit Name: 338a176324507bf6b822967203644c3dca26bcb3</div><div id='time'> Time: 2023-02-10</div><div id='author'> Author: gavin.rice@mpi-dortmund.mpg.de</div><div id='file'> File Name: tomotwin/modules/tools/prepare_clustering_data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calculate_umap(4)</div><div id='n_method'> N Method Name: calculate_umap(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tomotwin/modules/tools/prepare_clustering_data.py</div><div id='n_file'> N File Name: tomotwin/modules/tools/prepare_clustering_data.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def merge_features(embedding, other_features, full_targets):
    df = pd.merge(embedding, other_features, left_index=True, right_index=True)
    df = pd.merge(df, full_targets, left_index=True, right_index=True)
    df<a id="change"> = </a><a id="change">df.drop(</a>[&quotindex&quot]<a id="change">, axis=1)</a>
    data_arr = df[df.columns[:-len(trait_labels)]].values
    targets_arr = df[df.columns[-len(trait_labels):]].values
    return data_arr, targets_arr
</code></pre><h3>After Change</h3><pre><code class='java'>

def merge_features(embedding, other_features, full_targets):
    orders = pd.read_csv(&quot../author_id_order.csv&quot).set_index([&quotorder&quot])
    df = pd.merge(embedding, orders, left_index=True, right_index=True).set_index(<a id="change">[</a>&quotuser&quot<a id="change"></a>])
    df = pd.merge(df, other_features, left_index=True, right_index=True)
    &#47&#47 df = pd.merge(df, full_targets, left_index=True, right_index=True)
    &#47&#47 df = df.drop([&quotindex&quot], axis=1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yashsmehta/personality-prediction/commit/fcfaa9f0f47372c0174e2a273944f261520a2d94#diff-566a1fb7b367f40ec62cdbe7ca26eae946918b595a72cfa46c496d9817dcc6d6L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78055470</div><div id='project'> Project Name: yashsmehta/personality-prediction</div><div id='commit'> Commit Name: fcfaa9f0f47372c0174e2a273944f261520a2d94</div><div id='time'> Time: 2020-09-24</div><div id='author'> Author: saminfatehir@gmail.com</div><div id='file'> File Name: finetune_models/MLP_combined_features.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: merge_features(3)</div><div id='n_method'> N Method Name: merge_features(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: finetune_models/MLP_combined_features.py</div><div id='n_file'> N File Name: finetune_models/MLP_combined_features.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


    else:
        f<a id="change"> = </a><a id="change">f.drop(columns=[image_label_col])</a>
        f.columns.name = &quotfeatures&quot
        images = list(f.index)
        features = list(f.columns)
</code></pre><h3>After Change</h3><pre><code class='java'>


    f = (feature_table[:num_images]).copy()
    f = f[<a id="change">[</a>image_path_col<a id="change"></a>]+feature_names[:num_features]]
    f[image_path_col] = f[image_path_col].astype(str)
    i = f[image_path_col].tolist()
    i = [os.path.basename(str(x)) for x in i]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/radtorch/radtorch/commit/2f6a1919b357f1074b1230ab6e987e08f7c67ba1#diff-ea0c5d78e98f3b87371717beabaf20a4c1a834cd943d71bad1e08f7fc9e04250L375' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78055469</div><div id='project'> Project Name: radtorch/radtorch</div><div id='commit'> Commit Name: 2f6a1919b357f1074b1230ab6e987e08f7c67ba1</div><div id='time'> Time: 2020-03-12</div><div id='author'> Author: elbanan@users.noreply.github.com</div><div id='file'> File Name: radtorch/visutils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: plot_features(7)</div><div id='n_method'> N Method Name: plot_features(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: radtorch/visutils.py</div><div id='n_file'> N File Name: radtorch/visutils.py</div><div id='m_start'> M Start Line: 392</div><div id='m_end'> M End Line: 440</div><div id='n_start'> N Start Line: 385</div><div id='n_end'> N End Line: 386</div><BR>