<html><h3>Pattern ID :19072
</h3><img src='62182725.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    spk_style_embedding_of_gold = spk_style_embedding_function(batch_of_spectrograms=batch[2].to(device),
                                                                               batch_of_spectrogram_lengths=batch[3].to(device)).detach()

                    emo_style_embedding_of_gold<a id="change"> = </a><a id="change">emo_style_embedding_function(batch_of_spectrograms=batch[2].to(device),
                                                                               batch_of_spectrogram_lengths=batch[3].to(device)).detach()</a>

                    train_loss, output_spectrograms = net(text_tensors=batch[0].to(device),
                                                          text_lengths=batch[1].to(device),
                                                          gold_speech=batch[2].to(device),</code></pre><h3>After Change</h3><pre><code class='java'>
        print("Time elapsed:       {} Minutes".format(round((time.time() - start_time) / 60)))
        print("Steps:              {}".format(step_counter))
        net.train()
        <a id="change">style_embedding_function.train()</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/e96354fb23b7b7044302a5d76f415d5585feb304#diff-b8085078dc768b2f7e93d9bc99d3eeaabf3b6734a8f951665829ac81840bed0bL120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 62182725</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: e96354fb23b7b7044302a5d76f415d5585feb304</div><div id='time'> Time: 2022-09-09</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: TrainingInterfaces/Text_to_Spectrogram/FastSpeech2/fastspeech2_train_loop.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_loop(15)</div><div id='n_method'> N Method Name: train_loop(16)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingInterfaces/Text_to_Spectrogram/FastSpeech2/fastspeech2_train_loop.py</div><div id='n_file'> N File Name: TrainingInterfaces/Text_to_Spectrogram/FastSpeech2/fastspeech2_train_loop.py</div><div id='m_start'> M Start Line: 120</div><div id='m_end'> M End Line: 298</div><div id='n_start'> N Start Line: 145</div><div id='n_end'> N End Line: 272</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                self.bn.momentum,
                self.bn.affine,
                self.bn.track_running_stats)
            bn.weight<a id="change"> = </a>Parameter(<a id="change">self.bn.weight.detach()</a>)
            if self.bn.affine:
                bn.bias = Parameter(self.bn.bias.detach())
            modules.append(bn)</code></pre><h3>After Change</h3><pre><code class='java'>
            conv_relu.train(self.training)
            return conv_relu
        else:
            <a id="change">conv.train(</a>self.training<a id="change">)</a>
            return conv

class ConvBn1d(_ConvBnNd, nn.Conv1d):
    r</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/f5c7e5406b3896fd14b604e889d1ecfac702fc89#diff-16ca33a32ba0a6f70d5b51c627c27ed77703eb0517c1d9f7d880ed2ee272440aL219' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 62182726</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: f5c7e5406b3896fd14b604e889d1ecfac702fc89</div><div id='time'> Time: 2022-03-03</div><div id='author'> Author: jerryzh@fb.com</div><div id='file'> File Name: torch/nn/intrinsic/qat/modules/conv_fused.py</div><div id='m_class'> M Class Name: _ConvBnNd</div><div id='n_method'> N Class Name: _ConvBnNd</div><div id='m_method'> M Method Name: to_float(1)</div><div id='n_method'> N Method Name: to_float(1)</div><div id='m_parent_class'> M Parent Class: nn.modules.conv._ConvNd,nni._FusedModule</div><div id='n_parent_class'> N Parent Class: nn.modules.conv._ConvNd,nni._FusedModule</div><div id='m_file'> M File Name: torch/nn/intrinsic/qat/modules/conv_fused.py</div><div id='n_file'> N File Name: torch/nn/intrinsic/qat/modules/conv_fused.py</div><div id='m_start'> M Start Line: 220</div><div id='m_end'> M End Line: 255</div><div id='n_start'> N Start Line: 221</div><div id='n_end'> N End Line: 259</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                loss.backward()
                optimizer.step()

                loss_sum<a id="change"> += </a><a id="change">loss.detach()</a>.item()

            print("Client[{}] Traning. Epoch {}/{}, Loss {:.4f}, Time {:.2f}s".
                  format(id, epoch + 1, epochs, loss_sum,</code></pre><h3>After Change</h3><pre><code class='java'>
        epochs = 5
        criterion = torch.nn.CrossEntropyLoss()
        optimizer = torch.optim.SGD(self._model.parameters(), lr=0.1)
        <a id="change">self._model.train()</a>

        for _ in range(epochs):

            for data, target in data_loader:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/16befdf9173a4b4f4430f456b5353765c6d4d3e3#diff-e01aa4d5e3a24cb22ed367c39c0994beb14dac9396433f905576a6531ad38c42L102' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 62182721</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 16befdf9173a4b4f4430f456b5353765c6d4d3e3</div><div id='time'> Time: 2021-08-08</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab/core/client/serial_trainer.py</div><div id='m_class'> M Class Name: SerialTrainer</div><div id='n_method'> N Class Name: SerialTrainer</div><div id='m_method'> M Method Name: _train_alone(4)</div><div id='n_method'> N Method Name: _train_alone(8)</div><div id='m_parent_class'> M Parent Class: ClientTrainer</div><div id='n_parent_class'> N Parent Class: ClientTrainer</div><div id='m_file'> M File Name: fedlab/core/client/serial_trainer.py</div><div id='n_file'> N File Name: fedlab/core/client/serial_trainer.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 119</div><BR>