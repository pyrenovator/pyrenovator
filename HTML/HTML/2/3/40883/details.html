<html><h3>Pattern ID :40883
</h3><img src='115279503.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.doc_model = SentenceTransformer(model_path[1])
    
    def start_multi_process_pool(self, target_devices: List[str] = None) -&gt; Dict[str, object]:
        <a id="change">return </a>self.doc_model.start_multi_process_pool(target_devices=target_devices)

    def stop_multi_process_pool(self, pool: Dict[str, object]):
        output_queue = pool[&quotoutput&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
        logger.info("Start multi-process pool on devices: {}".format(&quot, &quot.join(map(str, target_devices))))

        ctx = mp.get_context(&quotspawn&quot)
        input_queue<a id="change"> = </a><a id="change">ctx.Queue()</a>
        output_queue = ctx.Queue()
        processes = []

        for process_id, device_name in enumerate(target_devices):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ukplab/beir/commit/d858a38384efabf6ef5992cfe454745d884c1055#diff-d40a036e97d6861d35db98a125c891e5877649cd49c45e40eb591ce9dd188e77L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115279503</div><div id='project'> Project Name: ukplab/beir</div><div id='commit'> Commit Name: d858a38384efabf6ef5992cfe454745d884c1055</div><div id='time'> Time: 2022-06-15</div><div id='author'> Author: nouamane98@gmail.com</div><div id='file'> File Name: beir/retrieval/models/sentence_bert.py</div><div id='m_class'> M Class Name: SentenceBERT</div><div id='n_method'> N Class Name: SentenceBERT</div><div id='m_method'> M Method Name: start_multi_process_pool(2)</div><div id='n_method'> N Method Name: start_multi_process_pool(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: beir/retrieval/models/sentence_bert.py</div><div id='n_file'> N File Name: beir/retrieval/models/sentence_bert.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 38</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    finally:
        if stat.count &gt; 0:
            return (stat.average, stat.max)
        <a id="change">return </a>(0, 0)

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre><h3>After Change</h3><pre><code class='java'>
                    self.queue_put_stoppable(self.q_dist, ditance_error)

    q = queue.Queue()
    q_dist<a id="change"> = </a><a id="change">queue.Queue()</a>

    threads = [Worker(f, q, q_dist) for f in predictors]

    for k in threads:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/2d903de1af7d2b239a1b5ccee77d05befee8db86#diff-9e75b6ab37db31b4f864bf6757547c800f820c0a4722148fa78e6ff735dc4be3L48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115279495</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 2d903de1af7d2b239a1b5ccee77d05befee8db86</div><div id='time'> Time: 2017-11-01</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_with_funcs(4)</div><div id='n_method'> N Method Name: eval_with_funcs(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='n_file'> N File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 124</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    finally:
        if stat.count &gt; 0:
            return (stat.average, stat.max)
        <a id="change">return </a>(0, 0)

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre><h3>After Change</h3><pre><code class='java'>
                    self.queue_put_stoppable(self.q_dist, ditance_error)

    q = queue.Queue()
    q_dist = <a id="change">queue.Queue()</a>

    threads = [Worker(f, q, q_dist) for f in predictors]

    for k in threads:
        k.start()
        time.sleep(0.1)  &#47&#47 avoid simulator bugs
    stat = StatCounter()
    dist_stat = StatCounter()

    for _ in tqdm(range(nr_eval), **get_tqdm_kwargs()):
        r = q.get()
        stat.feed(r)
        dist<a id="change"> = </a>q_dist.get()
        dist_stat.feed(dist)

    logger.info("Waiting for all the workers to finish the last run...")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/249c649721c645c497311bacc239a3d6a448851e#diff-f837bfb74f16363c790f9607a284c91e63c956876ec5199b90a6d9c590ab672aL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115279506</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 249c649721c645c497311bacc239a3d6a448851e</div><div id='time'> Time: 2018-01-09</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_with_funcs(4)</div><div id='n_method'> N Method Name: eval_with_funcs(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='n_file'> N File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 124</div><BR>