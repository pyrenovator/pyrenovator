<html><h3>Pattern ID :8708
</h3><img src='32368365.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        while True:
            with utils.stash_objects(object_ids):
                mask_v = ri.get_camera_image()[2] == <a id="change">utils.virtual_objects[-1]</a>
            with utils.stash_objects(utils.virtual_objects):
                rgb, depth, segm = ri.get_camera_image()
                mask = segm == object_id
</code></pre><h3>After Change</h3><pre><code class='java'>
        j_camera = j

        while True:
            obj_to_world = <a id="change">pybullet_planning.get_pose(</a>object_id<a id="change">)</a>

            class_id = utils.get_class_id(object_id)
            pcd_file = mercury.datasets.ycb.get_pcd_file(class_id=class_id)
            pcd = np.loadtxt(pcd_file)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wkentaro/safepicking/commit/8b3cd5be7c9aeded49c647a2268002d2a51a3418#diff-06c4dc34597e1b630fc20ef3471bff79012d26bd57dfefbdb8ed4eed42583c5aL20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32368365</div><div id='project'> Project Name: wkentaro/safepicking</div><div id='commit'> Commit Name: 8b3cd5be7c9aeded49c647a2268002d2a51a3418</div><div id='time'> Time: 2021-04-17</div><div id='author'> Author: www.kentaro.wada@gmail.com</div><div id='file'> File Name: examples/baseline/correct.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/baseline/correct.py</div><div id='n_file'> N File Name: examples/baseline/correct.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 198</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 223</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )

        grasp_flags, _, object_poses = self.object_state
        obj_to_world = <a id="change">object_poses[grasp_flags == 1][0]</a>
        obj_to_world = obj_to_world[:3], obj_to_world[3:]
        ee_to_world = self.ri.get_pose("tipLink")
        obj_to_ee = pp.multiply(pp.invert(ee_to_world), obj_to_world)
</code></pre><h3>After Change</h3><pre><code class='java'>
        )

        grasp_flags, _, object_poses = self.object_state
        obj_to_world = <a id="change">pp.get_pose(</a>target_object_id<a id="change">)</a>
        ee_to_world = self.ri.get_pose("tipLink")
        obj_to_ee = pp.multiply(pp.invert(ee_to_world), obj_to_world)

        self.ri.attachments = [</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wkentaro/safepicking/commit/d476753f6d4c9ddcbbb2b88714afccc22fe2ae36#diff-f985cd057b0aefd481c603155943b423e7e50ed4fcacef6f880739c67bdbf25eL192' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32368367</div><div id='project'> Project Name: wkentaro/safepicking</div><div id='commit'> Commit Name: d476753f6d4c9ddcbbb2b88714afccc22fe2ae36</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: www.kentaro.wada@gmail.com</div><div id='file'> File Name: examples/target_pick/env.py</div><div id='m_class'> M Class Name: PickFromPileEnv</div><div id='n_method'> N Class Name: PickFromPileEnv</div><div id='m_method'> M Method Name: reset(3)</div><div id='n_method'> N Method Name: reset(3)</div><div id='m_parent_class'> M Parent Class: Env</div><div id='n_parent_class'> N Parent Class: Env</div><div id='m_file'> M File Name: examples/target_pick/env.py</div><div id='n_file'> N File Name: examples/target_pick/env.py</div><div id='m_start'> M Start Line: 193</div><div id='m_end'> M End Line: 367</div><div id='n_start'> N Start Line: 193</div><div id='n_end'> N End Line: 366</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            parent_to_world[0], parent_to_world[1]
        )
        self_to_parent = pybullet.multiplyTransforms(
            <a id="change">world_to_parent[0]</a>,
            world_to_parent[1],
            self_to_world[0],
            self_to_world[1],</code></pre><h3>After Change</h3><pre><code class='java'>
    if parent is None:
        obj_to_parent = obj_to_world
    else:
        parent_to_world = <a id="change">pybullet_planning.get_pose(</a>parent<a id="change">)</a>
        world_to_parent = pybullet_planning.invert(parent_to_world)
        obj_to_parent = pybullet_planning.multiply(
            world_to_parent, obj_to_world
        )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wkentaro/reorientbot/commit/f750698b9c0be7dffb1f48d75ade4558cd96a80e#diff-89f81ae1bdad350b8a91bfb5c962b8f8a7a73a163a74530432ddb16f013653a0L120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32368366</div><div id='project'> Project Name: wkentaro/reorientbot</div><div id='commit'> Commit Name: f750698b9c0be7dffb1f48d75ade4558cd96a80e</div><div id='time'> Time: 2021-10-26</div><div id='author'> Author: www.kentaro.wada@gmail.com</div><div id='file'> File Name: mercury/_pybullet/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_pose(2)</div><div id='n_method'> N Method Name: get_pose(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mercury/_pybullet/utils.py</div><div id='n_file'> N File Name: mercury/_pybullet/utils.py</div><div id='m_start'> M Start Line: 120</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 120</div><div id='n_end'> N End Line: 130</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ee_to_world = mercury.pybullet.get_pose(ri.robot, ri.ee)
    pybullet_planning.draw_pose(ee_to_world)
    p.resetBasePositionAndOrientation(
        cube, <a id="change">ee_to_world[0]</a> + np.array([0, 0, -0.015 - 0.05]), (0, 0, 0, 1)
    )
    cube_to_world = mercury.pybullet.get_pose(cube)
    pybullet_planning.draw_pose(cube_to_world)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 -------------------------------------------------------------------------

    cube = pp.create_box(0.03, 0.05, 0.1, mass=0.1, color=(0, 1, 0, 1))
    ee_to_world = <a id="change">ri.get_pose(</a>"tipLink"<a id="change">)</a>
    pp.draw_pose(ee_to_world)
    obj_to_ee = ([0, 0, 0.05], [0, 0, 0, 1])
    obj_to_world = pp.multiply(ee_to_world, obj_to_ee)
    p.resetBasePositionAndOrientation(cube, *obj_to_world)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wkentaro/safepicking/commit/d294f0a1b2469bd179de6d78efe38ad72e0193c5#diff-ba6cdb16cc9bf410725fe652d7337056a845767e739cb6a115b449d7d2c4ced2L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32368376</div><div id='project'> Project Name: wkentaro/safepicking</div><div id='commit'> Commit Name: d294f0a1b2469bd179de6d78efe38ad72e0193c5</div><div id='time'> Time: 2021-09-22</div><div id='author'> Author: www.kentaro.wada@gmail.com</div><div id='file'> File Name: examples/checks/check_attached_object_ik.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/checks/check_attached_object_ik.py</div><div id='n_file'> N File Name: examples/checks/check_attached_object_ik.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 82</div><BR>