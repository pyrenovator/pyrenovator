<html><h3>Pattern ID :13878
</h3><img src='46152896.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                rem_grads = self.grads_per_elem[remainSet]
                gains = self.eval_taylor_modular(rem_grads)
                &#47&#47 Update the greedy set and remaining set
                bestId = remainSet[<a id="change">torch.argmax(gains).item()</a>]
                greedySet.append(bestId)
                remainSet.remove(bestId)
                self.numSelected += 1</code></pre><h3>After Change</h3><pre><code class='java'>
                gains = self.eval_taylor_modular(rem_grads)
                &#47&#47 Update the greedy set and remaining set
                &#47&#47_, maxid = torch.max(gains, dim=0)
                _, indices = torch.sort(<a id="change">gains.view(-1</a><a id="change">)</a>, descending=True)
                bestId = [remainSet[indices[0].item()]]
                greedySet.append(bestId[0])
                remainSet.remove(bestId[0])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/decile-team/cords/commit/0152bcb825e6725f65a8ed9be1610dded59ebf7a#diff-09148310a6741797a9f96e092258950544a98dd3d55939053405c65d0057919bL195' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46152896</div><div id='project'> Project Name: decile-team/cords</div><div id='commit'> Commit Name: 0152bcb825e6725f65a8ed9be1610dded59ebf7a</div><div id='time'> Time: 2021-01-06</div><div id='author'> Author: krishnateja.killamsetty@utdallas.edu</div><div id='file'> File Name: cords/selectionstrategies/supervisedlearning/glisterstrategy.py</div><div id='m_class'> M Class Name: GLISTERStrategy</div><div id='n_method'> N Class Name: GLISTERStrategy</div><div id='m_method'> M Method Name: select(3)</div><div id='n_method'> N Method Name: select(3)</div><div id='m_parent_class'> M Parent Class: DataSelectionStrategy</div><div id='n_parent_class'> N Parent Class: DataSelectionStrategy</div><div id='m_file'> M File Name: cords/selectionstrategies/supervisedlearning/glisterstrategy.py</div><div id='n_file'> N File Name: cords/selectionstrategies/supervisedlearning/glisterstrategy.py</div><div id='m_start'> M Start Line: 198</div><div id='m_end'> M End Line: 271</div><div id='n_start'> N Start Line: 195</div><div id='n_end'> N End Line: 269</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                else:
                    outputs = model(inputs, labels=labels, position_ids=position_ids, token_type_ids=segment_ids)
            lm_loss = outputs[0]
            eval_loss += <a id="change">lm_loss.mean().item()</a>
        nb_eval_steps += 1

    eval_loss = eval_loss / nb_eval_steps
    perplexity = torch.exp(torch.tensor(eval_loss))</code></pre><h3>After Change</h3><pre><code class='java'>
            
            &#47&#47 Same behavior as modeling_bart.py, besides ignoring pad_token_id
            ce_loss_fct = torch.nn.CrossEntropyLoss(ignore_index=args.mlm_ignore_index)
            loss = ce_loss_fct(lm_logits.view(-1, lm_logits.shape[-1]), <a id="change">labels.view(-1</a><a id="change">)</a>)
            eval_loss += loss.mean().item()
            
        nb_eval_steps += 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/b84a6548a69fd9f62652eed1c74fd4b1fdb8b65b#diff-90e760d3065758cd3fed35d36be801cfed8d2418d888df295dbecdc933432ad7L293' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46152898</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: b84a6548a69fd9f62652eed1c74fd4b1fdb8b65b</div><div id='time'> Time: 2020-11-15</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: evaluate(5)</div><div id='n_method'> N Method Name: evaluate(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='n_file'> N File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_start'> M Start Line: 318</div><div id='m_end'> M End Line: 344</div><div id='n_start'> N Start Line: 330</div><div id='n_end'> N End Line: 369</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    print(input.size(), output.size())
    
    loss = criterion(output, target)
    print(<a id="change">loss.item()</a>)

def _test_chimeranet():
    pass</code></pre><h3>After Change</h3><pre><code class='java'>
    output = model(input)
    print(input.size(), output.size(), target.size())

    output = <a id="change">output.view(</a>batch_size, <a id="change">-1</a>, embed_dim<a id="change">)</a>
    target = target.view(batch_size, n_sources, -1).permute(0, 2, 1)

    loss = criterion(output, target, batch_mean=False)
    print(loss)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/8860d8d92de4ba4390fa89247619810b0c821fe6#diff-d1c09fe10b1e303a3d82949fb66741379e3d16c53e98abc42c4a31d44484ec72L189' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46152899</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 8860d8d92de4ba4390fa89247619810b0c821fe6</div><div id='time'> Time: 2021-11-22</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: src/models/deep_clustering.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _test_deep_embedding(0)</div><div id='n_method'> N Method Name: _test_deep_embedding(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/models/deep_clustering.py</div><div id='n_file'> N File Name: src/models/deep_clustering.py</div><div id='m_start'> M Start Line: 202</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 202</div><div id='n_end'> N End Line: 232</div><BR>