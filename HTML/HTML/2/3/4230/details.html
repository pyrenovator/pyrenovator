<html><h3>Pattern ID :4230
</h3><img src='15493516.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    
    if norm_feature:
        node_feat<a id="change"> = </a><a id="change">th.nn.functional.normalize(</a>node_feat<a id="change">, p=2.0, dim=-1)</a>
        
        degs = graph.out_degrees().float().clamp(min=1)
        norm = th.pow(degs, -0.5)
        shp = norm.shape + (1,) * (node_feat.dim() - 1)</code></pre><h3>After Change</h3><pre><code class='java'>
    print(&quot&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 Feature info: &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&quot)
    print(&quotNode\&quots feature shape:{}&quot.format(node_feat.shape))
    print(&quotWalk\&quots feature shape:{}&quot.format(walk_feat.shape))
    <a id="change">print(</a>&quotEdge\&quots feature shape:{}&quot.format(edge_feat.shape)<a id="change">)</a>
    
    graph_data = (graph, labels, tr_label_idx, val_label_idx, test_label_idx, features)
    return graph_data
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/langgege-cqu/maxp_dgl/commit/5f428bb0d6bfb9dad16f32ca3d65785469b69c00#diff-92c9897b4d19041ed9f91c038758158776764ac7247e3546223d85e551a3241cL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15493516</div><div id='project'> Project Name: langgege-cqu/maxp_dgl</div><div id='commit'> Commit Name: 5f428bb0d6bfb9dad16f32ca3d65785469b69c00</div><div id='time'> Time: 2021-12-11</div><div id='author'> Author: 8747734+bugczw@user.noreply.gitee.com</div><div id='file'> File Name: maxp_model_czw/unimp/util.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_dgl_graph(1)</div><div id='n_method'> N Method Name: load_dgl_graph(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: maxp_model_czw/unimp/util.py</div><div id='n_file'> N File Name: maxp_model_czw/unimp/util.py</div><div id='m_start'> M Start Line: 8</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 L-P normalization of the vectors
        pos_h_embs = torch.nn.functional.normalize(pos_h_embs, p=self.l_p_norm, dim=1).view(-1, self.embedding_dim)
        pos_t_embs = torch.nn.functional.normalize(pos_t_embs, p=self.l_p_norm, dim=1).view(-1, self.embedding_dim)
        neg_h_embs<a id="change"> = </a><a id="change">torch.nn.functional.normalize(</a>neg_h_embs<a id="change">, p=self.l_p_norm, dim=1)</a>.view(-1, self.embedding_dim)
        neg_t_embs = torch.nn.functional.normalize(neg_t_embs, p=self.l_p_norm, dim=1).view(-1, self.embedding_dim)

        pos_score = self.compute_score(h_embs=pos_h_embs, r_embs=pos_r_embs, t_embs=pos_t_embs)</code></pre><h3>After Change</h3><pre><code class='java'>
        neg_scores = self.compute_score(h_embs=neg_h_embs, r_embs=neg_r_embs, t_embs=neg_t_embs)

        print(&quotPos exmpls: &quot, (pos_exmpls))
        <a id="change">print(</a>&quotNeg exmpls: &quot, (neg_exmpls<a id="change">))</a>

        loss = self.compute_loss(pos_scores=pos_scores, neg_scores=neg_scores)

        return loss</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/1d5f68485d677e8da1b117a722dc35782e1c08d2#diff-f66bf5287cb883550b0b8b05239e0735a7a0bf43b6eaebb6c52502f157b2d416L109' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15493512</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 1d5f68485d677e8da1b117a722dc35782e1c08d2</div><div id='time'> Time: 2018-09-04</div><div id='author'> Author: ali-mehdi@live.de</div><div id='file'> File Name: src/kg_embeddings_model/trans_e.py</div><div id='m_class'> M Class Name: TransE</div><div id='n_method'> N Class Name: TransE</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/kg_embeddings_model/trans_e.py</div><div id='n_file'> N File Name: src/kg_embeddings_model/trans_e.py</div><div id='m_start'> M Start Line: 117</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 132</div><div id='n_end'> N End Line: 163</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            wavs = self.augmentation(wavs, wav_lens, init_params)

        feats = self.compute_features(wavs, init_params)
        feats<a id="change"> = </a><a id="change">self.normalize(</a>feats, wav_lens<a id="change">)</a>
        out = self.model(feats, init_params)
        out = self.output(out, init_params)
        pout = self.log_softmax(out)
</code></pre><h3>After Change</h3><pre><code class='java'>
        ids, wavs, wav_lens = x
        wavs, wav_lens = wavs.to(device), wav_lens.to(device)
        print("The device is: ", device)
        <a id="change">print(</a>wavs.device<a id="change">)</a>

        &#47&#47 Adding environmental corruption if specified (i.e., noise+rev)
        if hasattr(self, "env_corrupt") and stage == sb.Stage.TRAIN:
            wavs_noise = self.env_corrupt(wavs, wav_lens, init_params)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/68d8792898257644b394b33a9cabe8cf0015da0c#diff-2ee084344967a526c2ad2831a4820a7c58dbf3aaba30042ae50c0500eddd7a08L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15493508</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 68d8792898257644b394b33a9cabe8cf0015da0c</div><div id='time'> Time: 2020-08-20</div><div id='author'> Author: plantinga.peter@protonmail.com</div><div id='file'> File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='m_class'> M Class Name: ASR_Brain</div><div id='n_method'> N Class Name: ASR_Brain</div><div id='m_method'> M Method Name: compute_forward(5)</div><div id='n_method'> N Method Name: compute_forward(5)</div><div id='m_parent_class'> M Parent Class: sb.Brain</div><div id='n_parent_class'> N Parent Class: sb.Brain</div><div id='m_file'> M File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='n_file'> N File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 17</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                                      labels.to(self.device)
            current_batch_size = self._get_current_batch_size(labels)
            if self.normalize:
                node_features<a id="change"> = </a><a id="change">self.preprocessor.normalize(</a>node_features, self.device<a id="change">)</a>
                labels = self.preprocessor.normalize(labels, self.device)
            self.optimizer.zero_grad()
            outputs = self.model.forward(node_features, adjacency_matrix, batch_size=current_batch_size)
            loss = self.loss_function(outputs, labels)</code></pre><h3>After Change</h3><pre><code class='java'>
    def do_train(self, training_data: DataLoader, epoch: int) -&gt; float:
        training_loss = 0.0
        pool = Pool()
        <a id="change">print(</a>pool.map(self._do_train_batch, training_data)<a id="change">)</a>
        training_loss += sum(pool.map(self._do_train_batch, training_data))
        pool.close()
        self.get_logger().info(&quot[Iteration %d] training loss: %.6f&quot % (epoch, training_loss))
        return training_loss</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kovanostra/message-passing-neural-network/commit/a4119ee58bf8ea696c2ff9394a1096a14ee09613#diff-04fb1474e9f76a43f37a2dcc8d807258e292007a57510605c188c9288d9d1511L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15493509</div><div id='project'> Project Name: kovanostra/message-passing-neural-network</div><div id='commit'> Commit Name: a4119ee58bf8ea696c2ff9394a1096a14ee09613</div><div id='time'> Time: 2020-07-15</div><div id='author'> Author: kovanostra@gmail.com</div><div id='file'> File Name: message_passing_nn/model/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: do_train(3)</div><div id='n_method'> N Method Name: do_train(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: message_passing_nn/model/trainer.py</div><div id='n_file'> N File Name: message_passing_nn/model/trainer.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 45</div><div id='n_end'> N End Line: 49</div><BR>