<html><h3>Pattern ID :15749
</h3><img src='53198617.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
		hour = datetime.datetime.now().hour
		minute = datetime.datetime.now().minute
		second = datetime.datetime.now().second
		folder_save<a id="change"> = </a><a id="change">os.path.join(</a>output_dir, env_to_control, str(year) + &quot_m&quot + str(month) + &quot_d&quot + str(day)<a id="change">)</a>
		if not os.path.exists(folder_save):
			os.makedirs(folder_save)
		fig.savefig(os.path.join(folder_save, &quothistory&quot + &quot_h&quot + str(hour) + &quot_m&quot + str(minute)
											  + &quot_s&quot + str(second) + &quot.png&quot))</code></pre><h3>After Change</h3><pre><code class='java'>
			axes[1][0].fill_between(indexes, 0, 2 * predictions_std_over_time_show[:, state_idx],
				label=&quotp_2std&quot + str(state_idx),
				color=plt.get_cmap(&quottab20&quot).colors[2 * state_idx + 1], alpha=0.6)
		axes[1][1].plot(<a id="change">list(</a>indexes_control * num_repeat_actions<a id="change">)</a>,
			np.array([element for element in prediction_info_over_time[&quotcost&quot]]), label=&quotcost&quot, color=&quotk&quot)
		axes[1][1].plot(list(indexes_control * num_repeat_actions), mean_cost_traj, label=&quotcost trajectory&quot, color=&quotorange&quot)
		axes[1][1].fill_between(list(indexes_control * num_repeat_actions), mean_cost_traj - 2 * mean_cost_traj_std,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/simonrennotte/data-efficient-reinforcement-learning-with-probabilistic-model-predictive-control/commit/9015f11e4b8d1ea824115b9b69570848bb92e174#diff-c0e4bce4f6408b3ecb563961dcdf508ba588d95780bd412d8abeec14d6739decL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53198617</div><div id='project'> Project Name: simonrennotte/data-efficient-reinforcement-learning-with-probabilistic-model-predictive-control</div><div id='commit'> Commit Name: 9015f11e4b8d1ea824115b9b69570848bb92e174</div><div id='time'> Time: 2020-12-18</div><div id='author'> Author: simon.rennotte@hotmail.com</div><div id='file'> File Name: control_objects/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: save_plot_history_process(6)</div><div id='n_method'> N Method Name: save_plot_history_process(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: control_objects/utils.py</div><div id='n_file'> N File Name: control_objects/utils.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            for i in range(0, len(all_examples), batch_size)
        ]
        &#47&#47 The new key is the concatenation of the keys of each example in the batch
        expected_keys_per_batch<a id="change"> = </a>[
            [<a id="change">"_".join(</a>key<a id="change"> for key, _ in all_examples[i : i + batch_size])</a>] * len(examples)
            for i, examples in zip(range(0, len(all_examples), batch_size), expected_examples_per_batch)
        ]
        &#47&#47 Combine keys and examples</code></pre><h3>After Change</h3><pre><code class='java'>
            all_transformed_examples.extend(_batch_to_examples(transformed_batch))
        expected = _examples_to_batch(all_examples)
        expected.update(_examples_to_batch(all_transformed_examples))
        expected = <a id="change">list(</a>_batch_to_examples(expected)<a id="change">)</a>
    assert next(iter(ex_iterable))[1] == expected[0]
    assert list(x for _, x in ex_iterable) == expected

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/4b9334007e069ad71630ba36283d3abafba42174#diff-17766e93a3448f2734ed819adaf8c1d84dacece94f0f8c19687002c62071700dL186' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53198623</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 4b9334007e069ad71630ba36283d3abafba42174</div><div id='time'> Time: 2022-03-07</div><div id='author'> Author: 42851186+lhoestq@users.noreply.github.com</div><div id='file'> File Name: tests/test_iterable_dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_mapped_examples_iterable(4)</div><div id='n_method'> N Method Name: test_mapped_examples_iterable(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_iterable_dataset.py</div><div id='n_file'> N File Name: tests/test_iterable_dataset.py</div><div id='m_start'> M Start Line: 189</div><div id='m_end'> M End Line: 208</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 197</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            filename = (&quotQAPtrain_{}_{}_{}.np&quot.format(self.generative_model,
                        self.noise, self.edge_density))
        path<a id="change"> = </a><a id="change">os.path.join(</a>self.path_dataset, filename<a id="change">)</a>
        if os.path.exists(path):
            print(&quotReading training dataset at {}&quot.format(path))
            with open(path, &quotrb&quot) as f:
                self.data_train = np.load(f, allow_pickle=True)</code></pre><h3>After Change</h3><pre><code class='java'>
            print(&quotReading dataset at {}&quot.format(path))
            with open(path, &quotrb&quot) as f:
                data = np.load(f, allow_pickle=True)
                self.data = <a id="change">list(</a>data<a id="change">)</a>
            saving  = False
        if len(self.data) == 0 or len(self.data) != self.num_examples:
            print(&quotCreating dataset.&quot)
            self.data = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mlelarge/graph_neural_net/commit/5adb23122ceb14ce6e09e6009e2d084dc74f5402#diff-845718abb813d7715646b2d63513ac597d626177ca2332ddb4baeb3588fa7f9cL103' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53198614</div><div id='project'> Project Name: mlelarge/graph_neural_net</div><div id='commit'> Commit Name: 5adb23122ceb14ce6e09e6009e2d084dc74f5402</div><div id='time'> Time: 2020-02-10</div><div id='author'> Author: marc.lelarge@gmail.com</div><div id='file'> File Name: loaders/data_generator.py</div><div id='m_class'> M Class Name: Generator</div><div id='n_method'> N Class Name: Generator</div><div id='m_method'> M Method Name: load_dataset(2)</div><div id='n_method'> N Method Name: load_dataset(1)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: loaders/data_generator.py</div><div id='n_file'> N File Name: loaders/data_generator.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 117</div><BR>