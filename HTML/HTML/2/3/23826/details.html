<html><h3>Pattern ID :23826
</h3><img src='74321103.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                ngram_dict = self._generate_ngrams(generate_sentence, ngram)
                ngram_all.update(ngram_dict)
            result[&quotunique-{}&quot.format(ngram)
                   ] = sum(filter(lambda x: x == 1, ngram_all.values())) / sum(<a id="change">ngram_all.values()</a>)
        return result
</code></pre><h3>After Change</h3><pre><code class='java'>
            ngrams = []
            for i in range(self.unique_max_ngrams):
                ngrams.append(gen[i:])
                ngram<a id="change"> = </a>Counter(<a id="change">zip(</a>*<a id="change">ngrams)</a>)
                ngrams_all[i].update(ngram)

        for i in range(self.unique_max_ngrams):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/77528d404f00a41f10850cdfc9676d40c1362f46#diff-8c0bd345958b2f26dd4d93a0cc1998f12517268b3c9b4dc5b9f20f7ec07e5b10L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321103</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: 77528d404f00a41f10850cdfc9676d40c1362f46</div><div id='time'> Time: 2022-07-13</div><div id='author'> Author: 1020139164@qq.com</div><div id='file'> File Name: textbox/evaluator/unique_evaluator.py</div><div id='m_class'> M Class Name: UniqueEvaluator</div><div id='n_method'> N Class Name: UniqueEvaluator</div><div id='m_method'> M Method Name: _calc_metrics_info(3)</div><div id='n_method'> N Method Name: _calc_metrics_info(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: textbox/evaluator/unique_evaluator.py</div><div id='n_file'> N File Name: textbox/evaluator/unique_evaluator.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        all_image_ids = self.img_paths.loc[:, &quotid&quot].tolist()
        for img_id in all_image_ids:
            if img_id not in <a id="change">index2imgid.values()</a>:
                index2imgid[n_queries + n_relevant] = img_id
                n_relevant += 1
</code></pre><h3>After Change</h3><pre><code class='java'>
        
        query_arr = self.matches.loc[:, &quotquery&quot].tolist()
        index2imgid = dict(enumerate(query_arr))
        imgid2index<a id="change"> = </a>dict(<a id="change">zip(</a>query_arr, range(len(query_arr))<a id="change">)</a>)
        n_queries = len(index2imgid)

        relevant_arr, relevance_scores = [], []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eora-ai/torchok/commit/807f66bf1c3c1a81bdeb790e7f8b6e6210235137#diff-ed557ce1fbbfd94b71255e044f388de61545fa89b6b640a0f7743b50e4c4f673L195' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321114</div><div id='project'> Project Name: eora-ai/torchok</div><div id='commit'> Commit Name: 807f66bf1c3c1a81bdeb790e7f8b6e6210235137</div><div id='time'> Time: 2022-11-15</div><div id='author'> Author: sitcebelly@optic.xyz</div><div id='file'> File Name: torchok/data/datasets/representation/validation.py</div><div id='m_class'> M Class Name: RetrievalDataset</div><div id='n_method'> N Class Name: RetrievalDataset</div><div id='m_method'> M Method Name: _parse_match_csv(1)</div><div id='n_method'> N Method Name: _parse_match_csv(1)</div><div id='m_parent_class'> M Parent Class: ImageDataset</div><div id='n_parent_class'> N Parent Class: ImageDataset</div><div id='m_file'> M File Name: torchok/data/datasets/representation/validation.py</div><div id='n_file'> N File Name: torchok/data/datasets/representation/validation.py</div><div id='m_start'> M Start Line: 197</div><div id='m_end'> M End Line: 250</div><div id='n_start'> N Start Line: 200</div><div id='n_end'> N End Line: 256</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    print(f"  The density maps to be visually compared are being saved to "
          f"{os.path.relpath(abs_path, os.getcwd())}")
    for dm1, (k2, dm2) in zip(<a id="change">my_dmaps_dict.values()</a>, xhp_dmaps_dict.items()):
        skimage.io.imsave(
            pjn(abs_path, f"{k2}_my.png"),
            (dm1 / np.max(dm1) * 255).astype(np.uint8))</code></pre><h3>After Change</h3><pre><code class='java'>
    xhp_dmaps_dict_keys = sorted(list(xhp_dmaps_dict.keys()))
    a = (len(my_dmaps_dict_keys) == len(xhp_dmaps_dict_keys))
    assert a, "image and ground truth file basenames are not consistent"
    a<a id="change"> = </a>all([k1 == &quotGT_&quot + k2
             for k1, k2 in <a id="change">zip(</a>my_dmaps_dict_keys, xhp_dmaps_dict_keys<a id="change">)</a>])
    assert a, "image and ground truth file basenames are not consistent"

    abs_path = tempfile.mkdtemp(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmburd/s-dcnet/commit/8f8d444aed755176ec870c1d36c4923b0a22c0eb#diff-10d0bf34bed9dce9a195bf4b5f1474157a051e63a27a5c08131db3eff3769ce0L271' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321111</div><div id='project'> Project Name: dmburd/s-dcnet</div><div id='commit'> Commit Name: 8f8d444aed755176ec870c1d36c4923b0a22c0eb</div><div id='time'> Time: 2020-05-24</div><div id='author'> Author: dmitry.burdeiny@gmail.com</div><div id='file'> File Name: gen_density_maps.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compare_to_xhp_dmaps(3)</div><div id='n_method'> N Method Name: compare_to_xhp_dmaps(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: gen_density_maps.py</div><div id='n_file'> N File Name: gen_density_maps.py</div><div id='m_start'> M Start Line: 290</div><div id='m_end'> M End Line: 309</div><div id='n_start'> N Start Line: 324</div><div id='n_end'> N End Line: 374</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            evals_result=evals_result,
            **kwargs
        )
        evals_result["train"] = list(<a id="change">evals_result["train"].values()</a>)[0]
        evals_result["valid"] = list(evals_result["valid"].values())[0]

    def predict(self, dataset: DatasetH, segment: Union[Text, slice] = "test"):</code></pre><h3>After Change</h3><pre><code class='java'>
        **kwargs
    ):
        ds_l = self._prepare_data(dataset, reweighter)
        ds<a id="change">, names = </a>list(<a id="change">zip(</a>*<a id="change">ds_l)</a>)
        self.model = lgb.train(
            self.params,
            ds[0],  &#47&#47 training dataset</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/cf35562e8458bc10fc0760e6c30c560c4eb10734#diff-2787a50d8268040e8512018e56b802adb4678e5dfd2a9581654b0f41e314717eL44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321108</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: cf35562e8458bc10fc0760e6c30c560c4eb10734</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: you-n-g@users.noreply.github.com</div><div id='file'> File Name: qlib/contrib/model/gbdt.py</div><div id='m_class'> M Class Name: LGBModel</div><div id='n_method'> N Class Name: LGBModel</div><div id='m_method'> M Method Name: fit(7)</div><div id='n_method'> N Method Name: fit(6)</div><div id='m_parent_class'> M Parent Class: LightGBMFInt,ModelFT</div><div id='n_parent_class'> N Parent Class: LightGBMFInt,ModelFT</div><div id='m_file'> M File Name: qlib/contrib/model/gbdt.py</div><div id='n_file'> N File Name: qlib/contrib/model/gbdt.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 63</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.compare_parameters={k:v for k,v in self.__dict__.items() if type(v)==list}
        self.non_compare_parameters={k:v for k, v in self.__dict__.items() if k not in self.compare_parameters and k !=&quotcompare_parameters&quot}
        self.compare_parameters_names= list(self.compare_parameters.keys())
        self.scenarios_list=list(itertools.product(*list(<a id="change">self.compare_parameters.values()</a>)))
        self.num_scenarios=len(self.scenarios_list)
        self.scenarios_df=pd.DataFrame(self.scenarios_list, columns =self.compare_parameters_names)
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.compare_parameters_names= list(self.compare_parameters.keys())
        &#47&#47 self.scenarios_list=list(itertools.product(*list(self.compare_parameters.values())))
        self.scenarios_list=[]
        keys<a id="change">, values = </a><a id="change">zip(</a>*<a id="change">self.compare_parameters_names.items())</a> &#47&#47http://stephantul.github.io/python/2019/07/20/product-dict/
        for bundle in itertools.product(*values):
            d = dict(zip(keys, bundle))
            d.update(self.non_compare_parameters)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/radtorch/radtorch/commit/04d1db58114871a52115ca48ee44022644f00b60#diff-45deee7ecb70911ba7325d114248d2b204a34b6cbe4ee11394fbec1ba5337e03L82' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321106</div><div id='project'> Project Name: radtorch/radtorch</div><div id='commit'> Commit Name: 04d1db58114871a52115ca48ee44022644f00b60</div><div id='time'> Time: 2020-04-14</div><div id='author'> Author: elbanan@users.noreply.github.com</div><div id='file'> File Name: radtorch/pipeline.py</div><div id='m_class'> M Class Name: Compare_Image_Classifiers</div><div id='n_method'> N Class Name: Compare_Image_Classifiers</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: radtorch/pipeline.py</div><div id='n_file'> N File Name: radtorch/pipeline.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 92</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                filters=filters,
                extended_stages=extended_stages,
            )
            extended_ids = <a id="change">extended_view.values(</a>"id"<a id="change">)</a>
            selected_ids = set(curr_sample_ids) & set(extended_ids)
        else:
            &#47&#47 No filter is applied, everything can be selected
            selected_ids = None</code></pre><h3>After Change</h3><pre><code class='java'>

        point_ids = curr_label_ids if selection_mode == "patches" else curr_sample_ids

        zipped<a id="change"> = </a><a id="change">zip(</a>point_ids, curr_points, label_values<a id="change">)</a>
        traces = {}
        for (id, points, label) in zipped:
            add_to_trace(traces, selected_ids, id, points, label, style)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/259c70baa5c4b967ebd6c49a0964b9ac3447f4b4#diff-aab8748df73b2e467658c89e50376cf5c4c2b9d2d4b70373079986ade38d4fbeL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74321088</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 259c70baa5c4b967ebd6c49a0964b9ac3447f4b4</div><div id='time'> Time: 2023-01-18</div><div id='author'> Author: ritchie@voxel51.com</div><div id='file'> File Name: fiftyone/server/routes/embeddings.py</div><div id='m_class'> M Class Name: Embeddings</div><div id='n_method'> N Class Name: Embeddings</div><div id='m_method'> M Method Name: post(3)</div><div id='n_method'> N Method Name: post(3)</div><div id='m_parent_class'> M Parent Class: HTTPEndpoint</div><div id='n_parent_class'> N Parent Class: HTTPEndpoint</div><div id='m_file'> M File Name: fiftyone/server/routes/embeddings.py</div><div id='n_file'> N File Name: fiftyone/server/routes/embeddings.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 99</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 78</div><BR>