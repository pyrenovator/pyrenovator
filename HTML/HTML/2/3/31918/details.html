<html><h3>Pattern ID :31918
</h3><img src='93359840.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        test_batch_sampler = paddle.io.BatchSampler(dataset=test_ds,
                                                    batch_size=args.batch_size,
                                                    shuffle=False)
        test_data_loader<a id="change"> = </a><a id="change">paddle.io.DataLoader(
            dataset=test_ds, batch_sampler=test_batch_sampler, return_list=True)</a>

        metric = SpanEvaluator()
        precision, recall, f1 = evaluate(model, metric, test_data_loader)
        logger.info("-----------------------------")</code></pre><h3>After Change</h3><pre><code class='java'>
                                                  trans_fn=trans_fn)

            metric = SpanEvaluator()
            precision<a id="change">, recall, f1</a> = evaluate(model, metric, test_data_loader)
            logger.info("-----------------------------")
            logger.info("Class Name: Xçš„%s" % key)
            logger.info("Evaluation Precision: %.5f | Recall: %.5f | F1: %.5f" %</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/87613d4c2517594921dcabbfe0afd549fa05869e#diff-61f65db004425401b451c31e41bc9d7265947311bd2ac2601c36852d4cb9c74cL56' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359840</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 87613d4c2517594921dcabbfe0afd549fa05869e</div><div id='time'> Time: 2022-09-14</div><div id='author'> Author: 40840292+linjieccc@users.noreply.github.com</div><div id='file'> File Name: model_zoo/uie/evaluate.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: do_eval(0)</div><div id='n_method'> N Method Name: do_eval(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_zoo/uie/evaluate.py</div><div id='n_file'> N File Name: model_zoo/uie/evaluate.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 115</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	&#47&#47 todo: add a test for the training loop

def test_dataset(create_dataset):	
	dataloader<a id="change"> = </a><a id="change">torch.utils.data.DataLoader(</a>create_dataset<a id="change">)</a>
	assert(next(iter(dataloader)) is not None)
	images, labels = next(iter(dataloader))
	assert(labels.shape == (1,34))
	assert(labels.dtype == torch.float)</code></pre><h3>After Change</h3><pre><code class='java'>

    val_dataloader = data_module.val_dataloader()
    assert (next(iter(val_dataloader)) is not None)
    images<a id="change">, labels</a> = next(iter(val_dataloader))
    assert (labels.shape == (2, 34))
    assert (labels.dtype == torch.float)
    assert (images.shape[0] == 2 and images.shape[1] == 3)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/danbider/lightning-pose/commit/e8f16a03af204c509dbf85bce9681c52f18903df#diff-45b50823372ff106c39da79b181b4fca7e1f6de6ce57a93d9401393901de3d60L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359841</div><div id='project'> Project Name: danbider/lightning-pose</div><div id='commit'> Commit Name: e8f16a03af204c509dbf85bce9681c52f18903df</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: danbider@gmail.com</div><div id='file'> File Name: tests/test_regression_tracker.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_dataset(2)</div><div id='n_method'> N Method Name: test_dataset(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_regression_tracker.py</div><div id='n_file'> N File Name: tests/test_regression_tracker.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	&#47&#47 todo: add a test for the training loop

def test_dataset(create_dataset):	
	dataloader<a id="change"> = </a><a id="change">torch.utils.data.DataLoader(</a>create_dataset<a id="change">)</a>
	assert(next(iter(dataloader)) is not None)
	images, labels = next(iter(dataloader))
	assert(labels.shape == (1,34))
	assert(labels.dtype == torch.float)</code></pre><h3>After Change</h3><pre><code class='java'>

    val_dataloader = data_module.val_dataloader()
    assert (next(iter(val_dataloader)) is not None)
    images<a id="change">, labels</a> = next(iter(val_dataloader))
    assert (labels.shape == (2, 34))
    assert (labels.dtype == torch.float)
    assert (images.shape[0] == 2 and images.shape[1] == 3)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/danbider/lightning-pose/commit/5a21cf27ff581153a02b846d6e5114cc3fb8f885#diff-45b50823372ff106c39da79b181b4fca7e1f6de6ce57a93d9401393901de3d60L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359842</div><div id='project'> Project Name: danbider/lightning-pose</div><div id='commit'> Commit Name: 5a21cf27ff581153a02b846d6e5114cc3fb8f885</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: danbider@gmail.com</div><div id='file'> File Name: tests/test_regression_tracker.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_dataset(2)</div><div id='n_method'> N Method Name: test_dataset(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_regression_tracker.py</div><div id='n_file'> N File Name: tests/test_regression_tracker.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    trainset_1_inp = ImageDataset(root=&quot./images_LR/input/Training1/&quot, transform=transform)
    trainset_2_inp = ImageDataset(root=&quot./images_LR/input/Training2/&quot, transform=transform)

    train_loader_1<a id="change"> = </a><a id="change">torch.utils.data.DataLoader(
        </a>ConcatDataset(
            trainset_1_gt,
            trainset_1_inp
        )<a id="change">,
        batch_size=BATCH_SIZE * GPUS_NUM,  &#47&#47 Enlarge batch_size by a factor of len(device_ids)
        shuffle=True,
    )</a>

    train_loader_2 = torch.utils.data.DataLoader(
        ConcatDataset(
            trainset_2_gt,</code></pre><h3>After Change</h3><pre><code class='java'>
    )
    print("Finished loading dataset")

    return  train_loader_cross<a id="change">, test_loader</a>



</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mrrobot2211/pytorch-deep-photo-enhancer/commit/76112b5310dedd4d99c9338e6166615bccade671#diff-46010490c8b541bb65572c0067021f07d7e0e8e57052576784ebe1a7bd791631L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359845</div><div id='project'> Project Name: mrrobot2211/pytorch-deep-photo-enhancer</div><div id='commit'> Commit Name: 76112b5310dedd4d99c9338e6166615bccade671</div><div id='time'> Time: 2020-05-06</div><div id='author'> Author: felipebihaiek@gmail.com</div><div id='file'> File Name: libs/compute.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: data_loader_mask(0)</div><div id='n_method'> N Method Name: data_loader_mask(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: libs/compute.py</div><div id='n_file'> N File Name: libs/compute.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 133</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 116</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                                  sampler=sampler,
                                                  worker_init_fn=worker_init_fn)
    elif split == &quotval&quot:
        data_loader<a id="change"> = </a><a id="change">torch.utils.data.DataLoader(</a>data<a id="change">,
                                                  batch_size = int(cfg.TRAIN.BATCH_SIZE / cfg.NUM_GPUS),
                                                  shuffle=shuffle,
                                                  num_workers=cfg.TRAIN.NUM_DATA_WORKERS,
                                                  pin_memory=True,
                                                  sampler=sampler,
                                                  worker_init_fn=worker_init_fn
                                                  &#47&#47 collate_fn=collate_fn)
                                                  )</a>
    else: &#47&#47test split
        data_loader = torch.utils.data.DataLoader(data,
                                                  batch_size = int(cfg.TRAIN.BATCH_SIZE / cfg.NUM_GPUS),
                                                  shuffle=False,</code></pre><h3>After Change</h3><pre><code class='java'>
                                                  worker_init_fn=worker_init_fn
                                                  &#47&#47 collate_fn=collate_fn)
                                                  )
    return data_loader, (data<a id="change">, sampler</a>)


</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rvl-lab-utoronto/video_similarity_search/commit/dc4cedda6887dcaa36263307711104e84e099bd5#diff-8ece4d39bc250177fa066bea4d84d5818455d2a944b861d96a78f0d92b63b3cfL171' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359846</div><div id='project'> Project Name: rvl-lab-utoronto/video_similarity_search</div><div id='commit'> Commit Name: dc4cedda6887dcaa36263307711104e84e099bd5</div><div id='time'> Time: 2020-09-15</div><div id='author'> Author: sherrychen127@gmail.com</div><div id='file'> File Name: datasets/data_loader.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: build_data_loader(7)</div><div id='n_method'> N Method Name: build_data_loader(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: datasets/data_loader.py</div><div id='n_file'> N File Name: datasets/data_loader.py</div><div id='m_start'> M Start Line: 195</div><div id='m_end'> M End Line: 245</div><div id='n_start'> N Start Line: 196</div><div id='n_end'> N End Line: 239</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    testset = dataset(
        root="save/data", train=False, download=False, transform=transform_test,
    )
    testloader<a id="change"> = </a><a id="change">data.DataLoader(
        </a>testset<a id="change">, batch_size=batch_size, shuffle=False, num_workers=n_workers,
    )</a>

    return trainloader, testloader

</code></pre><h3>After Change</h3><pre><code class='java'>
        root="save/data", train=False, download=False, transform=transform_test,
    )

    return trainset<a id="change">, testset</a>


def get_dataloader(
    trainset: VisionDataset, testset: VisionDataset, batch_size: int, n_workers: int,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/j-marple-dev/model_compression/commit/49fd51c06795b3b7f737f62f7e6df8f9158c8555#diff-51246e53255db77c9edad496f074aa1bdbf8dbdc11f89a02040115c9ab4fa7f0L33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93359847</div><div id='project'> Project Name: j-marple-dev/model_compression</div><div id='commit'> Commit Name: 49fd51c06795b3b7f737f62f7e6df8f9158c8555</div><div id='time'> Time: 2020-06-30</div><div id='author'> Author: 44793742+HSShin0@users.noreply.github.com</div><div id='file'> File Name: src/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_dataset(3)</div><div id='n_method'> N Method Name: get_dataset(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils.py</div><div id='n_file'> N File Name: src/utils.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 86</div><BR>