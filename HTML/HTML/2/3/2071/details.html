<html><h3>Pattern ID :2071
</h3><img src='9045486.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        res = inverse.get(instance_type)
        if res is None:
            return res
        <a id="change">return {</a>res[0]: res[1]<a id="change">}</a>

    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        &#47&#47 r.accelerators is cleared but .instance_type encodes the info.</code></pre><h3>After Change</h3><pre><code class='java'>
        self,
        instance_type: str,
    ) -&gt; Optional[Dict[str, int]]:
        return <a id="change">aws_catalog.get_accelerators_from_instance_type(</a>instance_type<a id="change">)</a>

    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        &#47&#47 r.accelerators is cleared but .instance_type encodes the info.</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/skypilot-org/skypilot/commit/016ca1bcbf235566ad70bc494a5f050b3a51ef7e#diff-b24fbbf5479e97876aefbf9d6fc1cb2af2be7a88d8e69a0009197ced904a6d09L114' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9045486</div><div id='project'> Project Name: skypilot-org/skypilot</div><div id='commit'> Commit Name: 016ca1bcbf235566ad70bc494a5f050b3a51ef7e</div><div id='time'> Time: 2021-11-19</div><div id='author'> Author: lsf@berkeley.edu</div><div id='file'> File Name: prototype/sky/clouds/aws.py</div><div id='m_class'> M Class Name: AWS</div><div id='n_method'> N Class Name: AWS</div><div id='m_method'> M Method Name: get_accelerators_from_instance_type(2)</div><div id='n_method'> N Method Name: get_accelerators_from_instance_type(2)</div><div id='m_parent_class'> M Parent Class: clouds.Cloud</div><div id='n_parent_class'> N Parent Class: clouds.Cloud</div><div id='m_file'> M File Name: prototype/sky/clouds/aws.py</div><div id='n_file'> N File Name: prototype/sky/clouds/aws.py</div><div id='m_start'> M Start Line: 146</div><div id='m_end'> M End Line: 150</div><div id='n_start'> N Start Line: 114</div><div id='n_end'> N End Line: 114</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return isinstance(other, AWS)

    def make_deploy_resources_variables(self, task):
        <a id="change">return {</a>&quotinstance_type&quot: task.best_resources.instance_type<a id="change">}</a>

    @classmethod
    def get_default_instance_type(cls):
        return &quotm4.2xlarge&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        &#47&#47 r.accelerators is cleared but .instance_type encodes the info.
        acc_dict = <a id="change">self.get_accelerators_from_instance_type(</a>r.instance_type<a id="change">)</a>
        if acc_dict is not None:
            custom_resources = json.dumps(acc_dict, separators=(&quot,&quot, &quot:&quot))
        else:
            custom_resources = None</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/skypilot-org/skypilot/commit/23a54a2e2c52c623fa321ed85f45e04500f6ed0c#diff-b24fbbf5479e97876aefbf9d6fc1cb2af2be7a88d8e69a0009197ced904a6d09L41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9045487</div><div id='project'> Project Name: skypilot-org/skypilot</div><div id='commit'> Commit Name: 23a54a2e2c52c623fa321ed85f45e04500f6ed0c</div><div id='time'> Time: 2021-11-10</div><div id='author'> Author: concretevitamin@users.noreply.github.com</div><div id='file'> File Name: prototype/sky/clouds/aws.py</div><div id='m_class'> M Class Name: AWS</div><div id='n_method'> N Class Name: AWS</div><div id='m_method'> M Method Name: make_deploy_resources_variables(2)</div><div id='n_method'> N Method Name: make_deploy_resources_variables(2)</div><div id='m_parent_class'> M Parent Class: clouds.Cloud</div><div id='n_parent_class'> N Parent Class: clouds.Cloud</div><div id='m_file'> M File Name: prototype/sky/clouds/aws.py</div><div id='n_file'> N File Name: prototype/sky/clouds/aws.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 80</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        res = inverse.get(instance_type)
        if res is None:
            return res
        <a id="change">return {</a>res[0]: res[1]<a id="change">}</a>

    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        assert not r.use_spot, \</code></pre><h3>After Change</h3><pre><code class='java'>
            self,
            instance_type: str,
    ) -&gt; Optional[Dict[str, int]]:
        return <a id="change">azure_catalog.get_accelerators_from_instance_type(</a>instance_type<a id="change">)</a>

    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        assert not r.use_spot, \</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/skypilot-org/skypilot/commit/a901c0a5229a2307c33b7467fb2139e2c406bd74#diff-0b1a94b99464ae4f4aeb91e994ca53c4f9c0fa2b24065b904b03632b9ad8aacfL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9045488</div><div id='project'> Project Name: skypilot-org/skypilot</div><div id='commit'> Commit Name: a901c0a5229a2307c33b7467fb2139e2c406bd74</div><div id='time'> Time: 2021-12-16</div><div id='author'> Author: lsf@berkeley.edu</div><div id='file'> File Name: prototype/sky/clouds/azure.py</div><div id='m_class'> M Class Name: Azure</div><div id='n_method'> N Class Name: Azure</div><div id='m_method'> M Method Name: get_accelerators_from_instance_type(2)</div><div id='n_method'> N Method Name: get_accelerators_from_instance_type(2)</div><div id='m_parent_class'> M Parent Class: clouds.Cloud</div><div id='n_parent_class'> N Parent Class: clouds.Cloud</div><div id='m_file'> M File Name: prototype/sky/clouds/azure.py</div><div id='n_file'> N File Name: prototype/sky/clouds/azure.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 83</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return isinstance(other, Azure)

    def make_deploy_resources_variables(self, task):
        <a id="change">return {</a>&quotinstance_type&quot: task.best_resources.instance_type<a id="change">}</a>

    @classmethod
    def get_default_instance_type(cls):
        return &quotStandard_D2_v4&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    def make_deploy_resources_variables(self, task):
        r = task.best_resources
        &#47&#47 r.accelerators is cleared but .instance_type encodes the info.
        acc_dict = <a id="change">self.get_accelerators_from_instance_type(</a>r.instance_type<a id="change">)</a>
        if acc_dict is not None:
            custom_resources = json.dumps(acc_dict, separators=(&quot,&quot, &quot:&quot))
        else:
            custom_resources = None</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/skypilot-org/skypilot/commit/23a54a2e2c52c623fa321ed85f45e04500f6ed0c#diff-0b1a94b99464ae4f4aeb91e994ca53c4f9c0fa2b24065b904b03632b9ad8aacfL57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9045489</div><div id='project'> Project Name: skypilot-org/skypilot</div><div id='commit'> Commit Name: 23a54a2e2c52c623fa321ed85f45e04500f6ed0c</div><div id='time'> Time: 2021-11-10</div><div id='author'> Author: concretevitamin@users.noreply.github.com</div><div id='file'> File Name: prototype/sky/clouds/azure.py</div><div id='m_class'> M Class Name: Azure</div><div id='n_method'> N Class Name: Azure</div><div id='m_method'> M Method Name: make_deploy_resources_variables(2)</div><div id='n_method'> N Method Name: make_deploy_resources_variables(2)</div><div id='m_parent_class'> M Parent Class: clouds.Cloud</div><div id='n_parent_class'> N Parent Class: clouds.Cloud</div><div id='m_file'> M File Name: prototype/sky/clouds/azure.py</div><div id='n_file'> N File Name: prototype/sky/clouds/azure.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 88</div><BR>