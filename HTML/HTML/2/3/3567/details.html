<html><h3>Pattern ID :3567
</h3><img src='13614699.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        series = series[~pd.isna(series)]
        arma_model = auto_arima(series, start_p=0, d=0, start_q=0, D=0, stationary=True)
        arma_models[col] = arma_model
    <a id="change">return </a>arma_models


def arma_fill(data, arma_models):</code></pre><h3>After Change</h3><pre><code class='java'>

def estimate_arma(series):
    Estimate ARMA parameters on a series
    series = <a id="change">pd.Series(</a>series<a id="change">)</a>
    series = series[~pd.isna(series)]
    arma_model = auto_arima(series, start_p=0, d=0, start_q=0, D=0, stationary=True)
    <a id="change">return </a>arma_model


def ragged_fill_series(series, function=np.mean, est_series=None):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dhopp1/nowcast_lstm/commit/56f87fb5625decd9a902293bef9f2e2635f9f5c5#diff-c6b0999e6dda2877af951ad7878d8033da0137a454db175fe962254a367a8e99L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13614699</div><div id='project'> Project Name: dhopp1/nowcast_lstm</div><div id='commit'> Commit Name: 56f87fb5625decd9a902293bef9f2e2635f9f5c5</div><div id='time'> Time: 2020-12-15</div><div id='author'> Author: daniel.hopp1@gmail.com</div><div id='file'> File Name: nowcast_lstm/data_setup.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: estimate_arma(1)</div><div id='n_method'> N Method Name: estimate_arma(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nowcast_lstm/data_setup.py</div><div id='n_file'> N File Name: nowcast_lstm/data_setup.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        coef = coef / coef.sum()
        return pd.Series(coef, index=dataset.features)
    else:
        <a id="change">return</a>


@lru_cache(maxsize=32)
def _calc_importance(</code></pre><h3>After Change</h3><pre><code class='java'>
    if hasattr(model, &quotcoef_&quot):  &#47&#47 Linear models
        coef = np.abs(model.coef_.flatten())
        coef = coef / coef.sum()
        <a id="change">return </a><a id="change">pd.Series(</a>coef<a id="change">, index=features)</a>


@lru_cache(maxsize=32)
def _calc_importance(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/e9b5036a65b1d948a9aa9da872ec6868c59b41ba#diff-4a230bb5ef2dc3146f87b98b7803711c0d5f159d30f18aced4a6f61d8fcf0841L107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13614698</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: e9b5036a65b1d948a9aa9da872ec6868c59b41ba</div><div id='time'> Time: 2021-12-29</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: deepchecks/utils/features.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _built_in_importance(2)</div><div id='n_method'> N Method Name: _built_in_importance(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/utils/features.py</div><div id='n_file'> N File Name: deepchecks/utils/features.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 117</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 182</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
           If date column exists, returns a pandas Series of the index column.
        
        if self._use_default_index is True:
            <a id="change">return </a>pd.Series(self.data.index)
        elif self._index_name is not None:
            return self.data[self._index_name]
        else:  &#47&#47 No meaningful index to use: Index column not configured, and use_column is False</code></pre><h3>After Change</h3><pre><code class='java'>
                return pd.Series(self.data.index.get_level_values(0), name=self.data.index.name,
                                 index=self.data.index)
            elif isinstance(self._index_name, (str, int)):
                <a id="change">return </a><a id="change">pd.Series(</a>self.data.index.get_level_values(self._index_name)<a id="change">, name=self.data.index.name,
                                 index=self.data.index)</a>
        elif self._index_name is not None:
            return self.data[self._index_name]
        else:  &#47&#47 No meaningful index to use: Index column not configured, and _set_index_from_dataframe_index is False
            return</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/d12202e3d188f82b46a348d879d8275b892718a1#diff-8529995c733b72dbd46b2c651e094d7c3028600d1368575275957d4818300b60L423' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13614697</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: d12202e3d188f82b46a348d879d8275b892718a1</div><div id='time'> Time: 2021-12-23</div><div id='author'> Author: noamzbr@gmail.com</div><div id='file'> File Name: deepchecks/base/dataset.py</div><div id='m_class'> M Class Name: Dataset</div><div id='n_method'> N Class Name: Dataset</div><div id='m_method'> M Method Name: index_col(1)</div><div id='n_method'> N Method Name: index_col(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/base/dataset.py</div><div id='n_file'> N File Name: deepchecks/base/dataset.py</div><div id='m_start'> M Start Line: 430</div><div id='m_end'> M End Line: 430</div><div id='n_start'> N Start Line: 456</div><div id='n_end'> N End Line: 462</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def reduce_output(self, check_result: CheckResult) -&gt; Dict[str, float]:
        Return label drift score per label property.
        <a id="change">return </a>{name: label_property[&quotDrift score&quot] for name, label_property in check_result.value.items()}

    def add_condition_drift_score_less_than(self, max_allowed_categorical_score: float = 0.15,
                                            max_allowed_numeric_score: float = 0.075,</code></pre><h3>After Change</h3><pre><code class='java'>
        Return label drift score per label property.
        value_per_property = {name: label_property[&quotDrift score&quot] for name, label_property in
                              check_result.value.items()}
        <a id="change">return </a>self.property_reduce(self.aggregation_method, <a id="change">pd.Series(</a>value_per_property<a id="change">)</a>, &quotDrift Score&quot)

    def add_condition_drift_score_less_than(self, max_allowed_categorical_score: float = 0.15,
                                            max_allowed_numeric_score: float = 0.075,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/0f96dcc7ceafdb87c80e0f325d570993874e1ff3#diff-7141751802c353dd8f556079bda9572a9dc3b7b57ce3d9f35eddf7fbb4188fb6L249' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13614696</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 0f96dcc7ceafdb87c80e0f325d570993874e1ff3</div><div id='time'> Time: 2022-08-30</div><div id='author'> Author: 67195469+Nadav-Barak@users.noreply.github.com</div><div id='file'> File Name: deepchecks/vision/checks/train_test_validation/train_test_label_drift.py</div><div id='m_class'> M Class Name: TrainTestLabelDrift</div><div id='n_method'> N Class Name: TrainTestLabelDrift</div><div id='m_method'> M Method Name: reduce_output(2)</div><div id='n_method'> N Method Name: reduce_output(2)</div><div id='m_parent_class'> M Parent Class: ReducePropertyMixin,TrainTestCheck</div><div id='n_parent_class'> N Parent Class: TrainTestCheck,ReduceMixin</div><div id='m_file'> M File Name: deepchecks/vision/checks/train_test_validation/train_test_label_drift.py</div><div id='n_file'> N File Name: deepchecks/vision/checks/train_test_validation/train_test_label_drift.py</div><div id='m_start'> M Start Line: 251</div><div id='m_end'> M End Line: 251</div><div id='n_start'> N Start Line: 257</div><div id='n_end'> N End Line: 259</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                preds = self.dnn_model(x_test).detach().cpu().numpy()
            else:
                preds = self.dnn_model(x_test).detach().numpy()
        <a id="change">return </a>preds

    def score(self, x_test, y_test, w_test=None):
        &#47&#47 Remove rows from x, y and w, which contain Nan in any columns in y_test.</code></pre><h3>After Change</h3><pre><code class='java'>
                preds = self.dnn_model(x_test).detach().cpu().numpy()
            else:
                preds = self.dnn_model(x_test).detach().numpy()
        <a id="change">return </a><a id="change">pd.Series(</a>np.squeeze(preds)<a id="change">, index=x_test_pd.index)</a>

    def score(self, x_test, y_test, w_test=None):
        &#47&#47 Remove rows from x, y and w, which contain Nan in any columns in y_test.
        df_test = dataset.prepare("test", col_set=["feature", "label"])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/853410c16eb79708371b87a4af37de18840e03f2#diff-262692c578e458decfd85fcba44547340ec8f0f95ae83157e691e4f10f496179L267' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13614695</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 853410c16eb79708371b87a4af37de18840e03f2</div><div id='time'> Time: 2020-11-09</div><div id='author'> Author: dw1920@nyu.edu</div><div id='file'> File Name: qlib/contrib/model/pytorch_nn.py</div><div id='m_class'> M Class Name: DNNModelPytorch</div><div id='n_method'> N Class Name: DNNModelPytorch</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: Model</div><div id='n_parent_class'> N Parent Class: Model</div><div id='m_file'> M File Name: qlib/contrib/model/pytorch_nn.py</div><div id='n_file'> N File Name: qlib/contrib/model/pytorch_nn.py</div><div id='m_start'> M Start Line: 270</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 279</div><div id='n_end'> N End Line: 290</div><BR>