<html><h3>Pattern ID :14849
</h3><img src='49374481.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def forward(self, *input_tensors):
        assert self.finished
        &#47&#47 TODO
        <a id="change">pass</a>
</code></pre><h3>After Change</h3><pre><code class='java'>

    def forward(self, *input_tensors):
        assert self.finished
        weight_tensors = <a id="change">tuple(</a>field<a id="change">.to_torch(device=self.device) for field in self.weight_fields.values())</a>
        return self.tin_func.apply(self.tin_configs, *(input_tensors + weight_tensors))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ifsheldon/stannum/commit/6b2e1ccc378978b4ed8fe0d0eb7432b5d361af3b#diff-cd9cd164ec2efb3f4448e51f8e2ac9eb66f961f3d7ac588a40be5633c83b7c44L124' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 49374481</div><div id='project'> Project Name: ifsheldon/stannum</div><div id='commit'> Commit Name: 6b2e1ccc378978b4ed8fe0d0eb7432b5d361af3b</div><div id='time'> Time: 2021-07-09</div><div id='author'> Author: feng.liang@kaust.edu.sa</div><div id='file'> File Name: tin.py</div><div id='m_class'> M Class Name: Tin</div><div id='n_method'> N Class Name: Tin</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: tin.py</div><div id='n_file'> N File Name: tin.py</div><div id='m_start'> M Start Line: 124</div><div id='m_end'> M End Line: 124</div><div id='n_start'> N Start Line: 150</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        reg_max = region_max_value[cl - 1]  &#47&#47 np.max(weights)
        if len(weights) == 0:
            <a id="change">pass</a>

        &#47&#47 weights = np.exp(2 * weights) - np.exp(-2)
        &#47&#47 weights = softmax(weights)
        try:</code></pre><h3>After Change</h3><pre><code class='java'>
    maxima_coords = []
    for cl in classes:
       &#47&#47 coords =
        coords = <a id="change">tuple(</a>[c.astype(np.int16) <a id="change">for</a> c in np.where(regions == cl)]<a id="change">)</a>
        if len(coords[0]) == 0:
            pass

        weights = image[coords]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mpi-dortmund/tomotwin-cryoet/commit/8cb744b2c04760d76a4522cf9a9d5b1672ebdaa4#diff-b594b11fe39a06d3e9fee1eac161f8458c4af7c06d39a68f6839bc830f71d0d9L434' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 49374480</div><div id='project'> Project Name: mpi-dortmund/tomotwin-cryoet</div><div id='commit'> Commit Name: 8cb744b2c04760d76a4522cf9a9d5b1672ebdaa4</div><div id='time'> Time: 2022-07-12</div><div id='author'> Author: thorsten.wagner@mpi-dortmund.mpg.de</div><div id='file'> File Name: tomotwin/modules/common/findmax/findmax.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_avg_pos(4)</div><div id='n_method'> N Method Name: get_avg_pos(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tomotwin/modules/common/findmax/findmax.py</div><div id='n_file'> N File Name: tomotwin/modules/common/findmax/findmax.py</div><div id='m_start'> M Start Line: 434</div><div id='m_end'> M End Line: 449</div><div id='n_start'> N Start Line: 432</div><div id='n_end'> N End Line: 449</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    try:
                        result = result.pin_memory()
                    except:
                        <a id="change">pass</a>
                    result = result.numpy()

                memory_buffers[op_id] = result
</code></pre><h3>After Change</h3><pre><code class='java'>
                                                            batch_size,
                                                            batches_ahead)
            elif isinstance(memory_allocation, Sequence):
                allocated_buffer = <a id="change">tuple(
                    </a>self<a id="change">.allocate_query(q, batch_size, batches_ahead) for q in memory_allocation
                )</a>

            memory_buffers[op_id] = allocated_buffer

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/libffcv/ffcv/commit/1e28d9884436db64131ee02d545d2c5374f19dc9#diff-e775b66b9cf24bfa0524d7edbf465b5ca12846f195123573855b4d62e63670e3L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 49374483</div><div id='project'> Project Name: libffcv/ffcv</div><div id='commit'> Commit Name: 1e28d9884436db64131ee02d545d2c5374f19dc9</div><div id='time'> Time: 2021-11-13</div><div id='author'> Author: leclerc@mit.edu</div><div id='file'> File Name: ffcv/pipeline/pipeline.py</div><div id='m_class'> M Class Name: Pipeline</div><div id='n_method'> N Class Name: Pipeline</div><div id='m_method'> M Method Name: allocate_memory(3)</div><div id='n_method'> N Method Name: allocate_memory(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ffcv/pipeline/pipeline.py</div><div id='n_file'> N File Name: ffcv/pipeline/pipeline.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 100</div><div id='n_end'> N End Line: 112</div><BR>