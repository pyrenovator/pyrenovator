<html><h3>Pattern ID :13498
</h3><img src='45479029.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 https://github.com/scikit-learn/scikit-learn/blob/844b4be24d20fc42cc13b957374c718956a0db39/sklearn/metrics/_scorer.py&#47&#47L421
    if isinstance(scorer, str):
        return get_scorer(scorer)
    elif <a id="change">callable(</a>scorer<a id="change">)</a>:
        &#47&#47 Check that scorer runs for given model and data
        assert isinstance(scorer(model, dataset.data[dataset.features].head(2), dataset.label_col.head(2)),
                          Number)</code></pre><h3>After Change</h3><pre><code class='java'>
                                              f&quotbut got: {kind}&quot)
    else:
        if not isinstance(result, Number):
            <a id="change">raise </a>errors.DeepchecksValueError(f&quotExpected scorer {scorer_name} to return number &quot
                                              f&quotbut got: {type(result).__name__}&quot)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/ceba2ede21ffee18180dd683b9ac4dbe441c380e#diff-01d187d84397efda54abbf91671bf241d110259c86334554fcc4371824125cf9L174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45479029</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: ceba2ede21ffee18180dd683b9ac4dbe441c380e</div><div id='time'> Time: 2021-12-21</div><div id='author'> Author: matanper@gmail.com</div><div id='file'> File Name: deepchecks/utils/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: validate_scorer(5)</div><div id='n_method'> N Method Name: validate_scorer(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/utils/metrics.py</div><div id='n_file'> N File Name: deepchecks/utils/metrics.py</div><div id='m_start'> M Start Line: 174</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 236</div><div id='n_end'> N End Line: 258</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                properties[image_property].extend(
                    getattr(image_formatters, image_property)(images)
                )
            elif <a id="change">callable(</a>image_property<a id="change">)</a>:
                properties[image_property.__name__].extend(image_property(images))  &#47&#47 pylint: disable=not-callable
            else:
                raise DeepchecksValueError(</code></pre><h3>After Change</h3><pre><code class='java'>
            def scoring_func(predictions, labels):
                return per_sample_mean_iou(predictions, labels)
        else:
            <a id="change">raise </a>DeepchecksValueError(f&quotUnsupported task type {dataset.task_type}&quot)

        if isinstance(predictions, torch.Tensor):
            predictions = predictions.cpu().detach().numpy()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/aebd6ccd8dfe6d09f76c6c96f9dbefb92c941e1d#diff-6712fa217dde5929aef77fed3fca713a6da1d70e2e2bc61805ab90df1e6ea028L99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45479025</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: aebd6ccd8dfe6d09f76c6c96f9dbefb92c941e1d</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: deepchecks/vision/checks/performance/model_error_analysis.py</div><div id='m_class'> M Class Name: ModelErrorAnalysis</div><div id='n_method'> N Class Name: ModelErrorAnalysis</div><div id='m_method'> M Method Name: update(4)</div><div id='n_method'> N Method Name: update(4)</div><div id='m_parent_class'> M Parent Class: TrainTestCheck</div><div id='n_parent_class'> N Parent Class: TrainTestCheck</div><div id='m_file'> M File Name: deepchecks/vision/checks/performance/model_error_analysis.py</div><div id='n_file'> N File Name: deepchecks/vision/checks/performance/model_error_analysis.py</div><div id='m_start'> M Start Line: 115</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 108</div><div id='n_end'> N End Line: 122</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        elif self.method == &quotdensity&quot:
            loss = 1./(torch.exp(torch.mean(vals**2))+1)

        elif <a id="change">callable(</a>self.method<a id="change">)</a>:
            loss = nn.MSELoss()
            target = torch.tensor(self.method(pos.detach().numpy()))
            return loss(vals,target)</code></pre><h3>After Change</h3><pre><code class='java'>
            loss = self.wf.energy(pos)

        else:
            <a id="change">raise </a>ValueError(&quotmethod must be variance, energy&quot)

        return loss
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/3f224d17a7a179f040a17490a73723d1388f2e09#diff-a138ce7af3af3bca4e4236ad7e66bb15f2fc0e4d1876736d3d76681e569b38f7L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45479023</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 3f224d17a7a179f040a17490a73723d1388f2e09</div><div id='time'> Time: 2019-08-16</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: deepqmc/solver/torch_utils.py</div><div id='m_class'> M Class Name: Loss</div><div id='n_method'> N Class Name: Loss</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: deepqmc/solver/torch_utils.py</div><div id='n_file'> N File Name: deepqmc/solver/torch_utils.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 34</div><BR>