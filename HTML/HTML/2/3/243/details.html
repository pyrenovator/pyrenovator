<html><h3>Pattern ID :243
</h3><img src='1917407.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def run_pretrain(self, plm):
        &#47&#47 model = AutoModelForSequenceClassification.from_pretrained(plm)
        <a id="change">pass</a>



</code></pre><h3>After Change</h3><pre><code class='java'>
        s20rel_processor = S20relMopProcessor(plm="microsoft/BiomedNLP-PubMedBERT-base-uncased-abstract-fulltext",
                                              max_token_len=128)
        metric = BaseQuestionAnsweringMetric()
        loss<a id="change"> = </a><a id="change">nn.CrossEntropyLoss()</a>

        for group_idx in range(self.n_partition):
            if group_idx != 0 and non_sequential:
                model, optimizer = self._init_model(plm)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/cognlp/cogktr/commit/266e3e902f4f62b445c6712170c4a7e554010c1c#diff-fdacf5b487f3d1dc9a0803518e5fd01e2759eaa1e6dbc771e68532e585a0c1d8L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1917407</div><div id='project'> Project Name: cognlp/cogktr</div><div id='commit'> Commit Name: 266e3e902f4f62b445c6712170c4a7e554010c1c</div><div id='time'> Time: 2022-07-16</div><div id='author'> Author: zhouyuyang17@163.com</div><div id='file'> File Name: cogktr/enhancers/medical_enhancer.py</div><div id='m_class'> M Class Name: MedicalEnhancer</div><div id='n_method'> N Class Name: MedicalEnhancer</div><div id='m_method'> M Method Name: run_pretrain(3)</div><div id='n_method'> N Method Name: run_pretrain(2)</div><div id='m_parent_class'> M Parent Class: BaseEnhancer</div><div id='n_parent_class'> N Parent Class: BaseEnhancer</div><div id='m_file'> M File Name: cogktr/enhancers/medical_enhancer.py</div><div id='n_file'> N File Name: cogktr/enhancers/medical_enhancer.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            else:
                self.ce_loss = nn.CrossEntropyLoss()  &#47&#47 .cuda()
        elif &quotarcface&quot in self.loss_type:
            <a id="change">pass</a>
        elif &quotcircle&quot in self.loss_type:
            self.fc_layer = Circle(num_classes, reduce_dim)
            if &quotlabelsmooth&quot in self.loss_type:
                self.ce_loss = CrossEntropyLabelSmooth(num_classes)</code></pre><h3>After Change</h3><pre><code class='java'>
            if &quotlabelsmooth&quot in self.loss_type:
                self.ce_loss = CrossEntropyLabelSmooth(num_classes)
            else:
                self.ce_loss<a id="change"> = </a><a id="change">nn.CrossEntropyLoss()</a>  &#47&#47 .cuda()
        elif &quotcircle&quot in self.loss_type:
            self.fc_layer = Circle(num_classes, reduce_dim)
            if &quotlabelsmooth&quot in self.loss_type:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencentyouturesearch/personreid-cacenet/commit/3136fed596ba1c20b63ec2e1706cff4dbd5ff96f#diff-0bb3c15e92cf390ebe34d0347c1f8b228f6048214f97b56c95ca086dba70a523L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1917409</div><div id='project'> Project Name: tencentyouturesearch/personreid-cacenet</div><div id='commit'> Commit Name: 3136fed596ba1c20b63ec2e1706cff4dbd5ff96f</div><div id='time'> Time: 2020-11-18</div><div id='author'> Author: fufuyu@tencent.com</div><div id='file'> File Name: models/baseline.py</div><div id='m_class'> M Class Name: Baseline</div><div id='n_method'> N Class Name: Baseline</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(9)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/baseline.py</div><div id='n_file'> N File Name: models/baseline.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 63</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 return self.model, target_model, self.backdoor_model

    def attack(self):
        <a id="change">pass</a>


if __name__ == "__main__":
    save_path = &quot/Users/wilsonzhang/Documents/PROJECTS/Research/ALPS-Lab/Temp/trojannet.pth&quot</code></pre><h3>After Change</h3><pre><code class='java'>
            local_optimizer = torch.optim.SGD(params=self.trojannet_model.parameters(), lr=self.learning_rate)
        else:
            local_optimizer = optimizer
        criterion<a id="change"> = </a><a id="change">torch.nn.CrossEntropyLoss()</a>

        self.trojannet_model._train(epoch=self.epochs, optimizer=local_optimizer, lr_scheduler=lr_scheduler,
                          loader_train=train_loader, loader_valid=valid_loader, criterion=criterion)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/687e84d2caa461b8befb5d54976e534ae823bf25#diff-333c074237cc8a91c1430feec1d81f8257bfd1c4b7f2185e9a5046dcbba55c25L138' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1917410</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 687e84d2caa461b8befb5d54976e534ae823bf25</div><div id='time'> Time: 2020-08-09</div><div id='author'> Author: zxz147@psu.edu</div><div id='file'> File Name: trojanzoo/attack/backdoor/trojannet.py</div><div id='m_class'> M Class Name: Trojan_Net</div><div id='n_method'> N Class Name: Trojan_Net</div><div id='m_method'> M Method Name: attack(4)</div><div id='n_method'> N Method Name: attack(1)</div><div id='m_parent_class'> M Parent Class: Attack</div><div id='n_parent_class'> N Parent Class: Attack</div><div id='m_file'> M File Name: trojanzoo/attack/backdoor/trojannet.py</div><div id='n_file'> N File Name: trojanzoo/attack/backdoor/trojannet.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 133</div><div id='n_end'> N End Line: 155</div><BR>