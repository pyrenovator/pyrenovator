<html><h3>Pattern ID :16908
</h3><img src='56966612.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    agreed = 0

    for i in <a id="change">tqdm(</a>range(1, points)<a id="change">)</a>:
        &#47&#47 Case: Torchvision Dataset
        x<a id="change">, y = </a>test[i]

        substitute_result = int(query(substitute_model, x, substitute_size))
        victim_result = int(query(victim_model, x, victim_size))</code></pre><h3>After Change</h3><pre><code class='java'>

    print(test_data.size())

    x_data<a id="change">, y_data</a> = process_data(test_data, None)

    &#47&#47 for x in x_data:
        &#47&#47substitute_result = int(query(substitute_model, x, substitute_shape))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/trailofbits/privacyraven/commit/5ebe314e32ff094514f3305181e9e89fa920acc2#diff-5a9abe6f1faed17e1dd47c25c8ddd5e55fc030b41e312b4216484c3e79823f4bL7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56966612</div><div id='project'> Project Name: trailofbits/privacyraven</div><div id='commit'> Commit Name: 5ebe314e32ff094514f3305181e9e89fa920acc2</div><div id='time'> Time: 2020-11-30</div><div id='author'> Author: suhashussain1@gmail.com</div><div id='file'> File Name: src/privacyraven/utils/evaluate.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: label_agreement(5)</div><div id='n_method'> N Method Name: label_agreement(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/privacyraven/utils/evaluate.py</div><div id='n_file'> N File Name: src/privacyraven/utils/evaluate.py</div><div id='m_start'> M Start Line: 7</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 7</div><div id='n_end'> N End Line: 21</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def plot_confusion_matrix(model, test_loader, save_title, device, normalize="all"):
    y_true = y_pred = []
    model.eval()
    for (inputs, labels) in <a id="change">tqdm(</a>test_loader<a id="change">, leave=False)</a>:
        intputs = inputs.to(device)
        outputs<a id="change"> = </a>model(inputs)
        outputs = outputs &gt; 0
        y_true.append(labels)
        y_pred.append(outputs)</code></pre><h3>After Change</h3><pre><code class='java'>


def plot_confusion_matrix(model, test_loader, save_title, device, normalize="all"):
    y_true<a id="change">, y_pred</a> = predict(model, test_loader, device)
    conf_mat = confusion_matrix(y_true, y_pred, normalize=normalize)
    axis_labels = ("Benign", "Malware")
    df = pd.DataFrame(conf_mat, index=axis_labels, columns=axis_labels)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jaketae/deep-malware-detection/commit/e7c0f884cee6907e93c7c379e5c8519fcc2d4432#diff-09d0cbaf891d623ac245ccf84485a687b554217349ca55557c60b33234b969aeL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56966625</div><div id='project'> Project Name: jaketae/deep-malware-detection</div><div id='commit'> Commit Name: e7c0f884cee6907e93c7c379e5c8519fcc2d4432</div><div id='time'> Time: 2020-11-21</div><div id='author'> Author: jaesungtae@gmail.com</div><div id='file'> File Name: utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: plot_confusion_matrix(5)</div><div id='n_method'> N Method Name: plot_confusion_matrix(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils.py</div><div id='n_file'> N File Name: utils.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 36</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    detector = get_haarcascade()
    eye_detector = get_eye_cascade()

    for start_frame_index in <a id="change">tqdm(</a>range(0, num_frames, sliding_window_stride)<a id="change">)</a>:
        end_frame_index = start_frame_index + clip_size
        if end_frame_index &gt; 3000:
            break
        &#47&#47 print(f"start_idx: {start_frame_index} | end_idx: {end_frame_index}")
        spatio_temporal_map = np.zeros((clip_size, 25, 3))

        frames_in_clip<a id="change"> = </a>frames[start_frame_index:end_frame_index]

        for idx, frame in enumerate(frames_in_clip):
            &quot&quot&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 stacked_maps is the all the st maps for a given video (=num_maps) stacked.
    stacked_maps = np.zeros((num_maps, config.CLIP_SIZE, 25, 3))
    &#47&#47 processed_maps will contain all the data after processing each frame, but not yet converted into maps
    processed_maps = np.zeros((num_frames<a id="change">, 25, 3</a>))
    processed_frames = np.zeros((num_frames, output_shape[0], output_shape[1], 3))
    map_index = 0
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/anweshcr7/rhythmnet/commit/465030f9efb5f86a94572239a5147c1c667f24fd#diff-55dd7d7c7fdd1fb3cf2eac99541e95c970b1b25cfd70e23e3920666326aa33bfL190' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56966638</div><div id='project'> Project Name: anweshcr7/rhythmnet</div><div id='commit'> Commit Name: 465030f9efb5f86a94572239a5147c1c667f24fd</div><div id='time'> Time: 2021-02-23</div><div id='author'> Author: anwesh.marwade@beyondsports.nl</div><div id='file'> File Name: src/utils/data_parser.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: preprocess_video_to_st_maps(3)</div><div id='n_method'> N Method Name: preprocess_video_to_st_maps(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils/data_parser.py</div><div id='n_file'> N File Name: src/utils/data_parser.py</div><div id='m_start'> M Start Line: 193</div><div id='m_end'> M End Line: 284</div><div id='n_start'> N Start Line: 201</div><div id='n_end'> N End Line: 309</div><BR>