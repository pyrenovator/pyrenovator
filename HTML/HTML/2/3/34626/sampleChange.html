<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                &#47&#47 when user wants to pre-allocate cache or check that server *can* allocate that cache

                            metadata = InferenceMetadata(prefix_length, tuple(backend_cache_handles))
                            <a id="change">assert </a>isinstance(
                                hidden_states, torch.Tensor
                            ), f"hidden states must be tensor, got {type(hidden_states)}"
                            assert (</code></pre><h3>After Change</h3><pre><code class='java'>
                            for uid, handles in zip(requested_uids, cache_handles)
                        )

                        <a id="change">if </a>hidden_states.numel() == 0:
                            <a id="change">pass</a>  &#47&#47 user passed a tensor with 0 tokens. This is a special case that occurs, e.g.
                            &#47&#47 when user wants to pre-allocate cache or check that server *can* allocate that cache
                        else:
                            assert hidden_states.ndim == 3, f"hidden states must be a single 3d tensor"</code></pre>