<html><h3>Pattern ID :6819
</h3><img src='23196227.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
		self.num_class 	= num_class
		self.p 		= params

		self.tokenizer 	= <a id="change">BertTokenizer.from_pretrained(</a>params.bert_model<a id="change">)</a>
		self.cls_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[CLS]&quot))
		self.sep_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[SEP]&quot))

	def __len__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
		self.cls_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[CLS]&quot))
		self.sep_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[SEP]&quot))
		self.men_start  = self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[MENTION]&quot))
		self.men_end<a id="change"> 	= </a><a id="change">self.tokenizer.convert_tokens_to_ids(</a>self.tokenizer.tokenize(&quot[/MENTION]&quot)<a id="change">)</a>

	def __len__(self):
		return len(self.dataset)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/svjan5/medtype/commit/982c7e977da2c4dea0263c22ce8f8185e016839f#diff-b20a232bfa237962d6a647587b0de4552058fdeb7df910d4076e729afa31e8dfL7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23196227</div><div id='project'> Project Name: svjan5/medtype</div><div id='commit'> Commit Name: 982c7e977da2c4dea0263c22ce8f8185e016839f</div><div id='time'> Time: 2021-03-19</div><div id='author'> Author: shikharvashishth@gmail.com</div><div id='file'> File Name: medtype-trainer/dataloader.py</div><div id='m_class'> M Class Name: MedTypeDataset</div><div id='n_method'> N Class Name: MedTypeDataset</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: medtype-trainer/dataloader.py</div><div id='n_file'> N File Name: medtype-trainer/dataloader.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 7</div><div id='n_end'> N End Line: 16</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
		self.num_class 	= num_class
		self.p 		= params

		self.tokenizer 	= <a id="change">BertTokenizer.from_pretrained(</a>params.bert_model<a id="change">)</a>
		self.cls_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[CLS]&quot))
		self.sep_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[SEP]&quot))

	def __len__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
		self.cls_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[CLS]&quot))
		self.sep_tok 	= self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[SEP]&quot))
		self.men_start  = self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(&quot[MENTION]&quot))
		self.men_end<a id="change"> 	= </a><a id="change">self.tokenizer.convert_tokens_to_ids(</a>self.tokenizer.tokenize(&quot[/MENTION]&quot)<a id="change">)</a>

	def __len__(self):
		return len(self.dataset)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/svjan5/medtype/commit/160813be93a76d6c1b00fdb9c8a86726c73e1803#diff-5caabdac897a484bcce9a9e2e7daf54ef2260fe156320820c03b70afa0b9a526L4' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23196231</div><div id='project'> Project Name: svjan5/medtype</div><div id='commit'> Commit Name: 160813be93a76d6c1b00fdb9c8a86726c73e1803</div><div id='time'> Time: 2021-03-19</div><div id='author'> Author: shikharvashishth@gmail.com</div><div id='file'> File Name: medtype-as-service/server/medtype_serving/server/medtype/dataloader.py</div><div id='m_class'> M Class Name: BertDataset</div><div id='n_method'> N Class Name: BertDataset</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: medtype-as-service/server/medtype_serving/server/medtype/dataloader.py</div><div id='n_file'> N File Name: medtype-as-service/server/medtype_serving/server/medtype/dataloader.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 9</div><div id='n_start'> N Start Line: 4</div><div id='n_end'> N End Line: 13</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.embedding.eval()
        else:
            self.embedding = nn.Embedding(vocab_size, 768).to(device)
        self.tokenizer = <a id="change">AutoTokenizer.from_pretrained(</a>bert_type<a id="change">)</a>

        &#47&#47 out MLP
        self.out_drop = nn.Dropout(p=out_drop).to(device)
        self.out_linear = nn.Linear(encoder_dim, vocab_size).to(device)</code></pre><h3>After Change</h3><pre><code class='java'>
            depths = [2, 2, 6, 2]
        tokenizer = AutoTokenizer.from_pretrained(tokenizer_type)
        self.vocab_size = tokenizer.vocab_size
        self.pad_id<a id="change"> = </a><a id="change">tokenizer.convert_tokens_to_ids(</a>"[PAD]"<a id="change">)</a>
        del tokenizer
        self.device = device
        self.bert = bert
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kamino666/video-captioning-transformer/commit/8d6f9ff2e965ba00bd44e7d9dd808ccf01251eee#diff-fada037ad086638e65c7ae77e3d223963e9afaa26326aab0ea718f4013176e43L739' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23196230</div><div id='project'> Project Name: kamino666/video-captioning-transformer</div><div id='commit'> Commit Name: 8d6f9ff2e965ba00bd44e7d9dd808ccf01251eee</div><div id='time'> Time: 2021-09-25</div><div id='author'> Author: 516015417@qq.com</div><div id='file'> File Name: model.py</div><div id='m_class'> M Class Name: VideoCaptionSwinTransformer</div><div id='n_method'> N Class Name: VideoCaptionSwinTransformer</div><div id='m_method'> M Method Name: __init__(27)</div><div id='n_method'> N Method Name: __init__(29)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: model.py</div><div id='n_file'> N File Name: model.py</div><div id='m_start'> M Start Line: 744</div><div id='m_end'> M End Line: 780</div><div id='n_start'> N Start Line: 733</div><div id='n_end'> N End Line: 772</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
class TestTriggerTemplatizer(TestCase):
    def test_bert(self):
        template = &quot[T] [T] {arbitrary} [T] {fields} [P]&quot
        tokenizer = <a id="change">AutoTokenizer.from_pretrained(</a>&quotbert-base-cased&quot<a id="change">)</a>
        utils.add_task_specific_tokens(tokenizer)
        templatizer = utils.TriggerTemplatizer(
            template,
            tokenizer,</code></pre><h3>After Change</h3><pre><code class='java'>
        model_inputs, label = templatizer(self.default_instance)

        &#47&#47 Label should be mapped to its token id
        expected_label<a id="change"> = </a>torch.tensor([<a id="change">self.default_tokenizer.convert_tokens_to_ids(</a>[self.default_instance[&quotlabel&quot]]<a id="change">)</a>])
        assert torch.equal(expected_label, label)

        &#47&#47 For BERT ouput is expected to have the following keys</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ucinlp/autoprompt/commit/829537c47b14e9e5e01a894df6d6c4606b922c41#diff-33c13e0b177bacd2f02e29bcb8aea5b49e7ce34901fd8f41fefb65defba1bd33L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23196232</div><div id='project'> Project Name: ucinlp/autoprompt</div><div id='commit'> Commit Name: 829537c47b14e9e5e01a894df6d6c4606b922c41</div><div id='time'> Time: 2020-05-26</div><div id='author'> Author: rloganiv@gmail.com</div><div id='file'> File Name: tests/test_utils.py</div><div id='m_class'> M Class Name: TestTriggerTemplatizer</div><div id='n_method'> N Class Name: TestTriggerTemplatizer</div><div id='m_method'> M Method Name: test_bert(1)</div><div id='n_method'> N Method Name: test_bert(1)</div><div id='m_parent_class'> M Parent Class: TestCase</div><div id='n_parent_class'> N Parent Class: TestCase</div><div id='m_file'> M File Name: tests/test_utils.py</div><div id='n_file'> N File Name: tests/test_utils.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 78</div><BR>