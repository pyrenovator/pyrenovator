<html><h3>Pattern ID :23675
</h3><img src='73900527.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Define jittor & pytorch array
        &#47&#47 ***************************************************************
        arr = np.random.randn(16,10,224,224)
        jittor_arr = <a id="change">jt.array(</a>arr<a id="change">)</a>
        pytorch_arr = torch.Tensor(arr)
        &#47&#47 ***************************************************************
        &#47&#47 Test InstanceNorm2d Layer
        &#47&#47 ***************************************************************
        pytorch_result = tnn.InstanceNorm2d(10)(pytorch_arr)
        jittor_result = jnn.InstanceNorm2d(10)(jittor_arr)
        assert check_equal(pytorch_result.numpy(), jittor_result.numpy()), f"{pytorch_result.mean()} || {jittor_result.mean()}"

        &#47&#47 ***************************************************************
        &#47&#47 Define jittor & pytorch array
        &#47&#47 ***************************************************************
        arr = np.random.randn(16,1000)
        jittor_arr = jt.array(arr)
        pytorch_arr = torch.Tensor(arr)
        &#47&#47 ***************************************************************
        &#47&#47 Test InstanceNorm2d Layer
        &#47&#47 ***************************************************************
        pytorch_result = tnn.BatchNorm1d(1000)(pytorch_arr)
        jittor_result<a id="change"> = </a>jnn.BatchNorm1d(1000)(jittor_arr)
        assert check_equal(pytorch_result.detach().numpy(), jittor_result.numpy()), f"{pytorch_result.mean()} || {jittor_result.mean()}"

if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
            def forward(self, x):
                return self.layer(x)
        model = Model()
        <a id="change">model.eval()</a>
        check_equal(arr, jnn.BatchNorm1d(1000, is_train=False), model, 1e-3)

if __name__ == "__main__":
    unittest.main()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/4ff60ee04c156de617222c9e708de08260765a42#diff-13866c4155679bfbc5ba516f0e10f611f654bde421adf9a96331199e80ea9c9aL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73900527</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 4ff60ee04c156de617222c9e708de08260765a42</div><div id='time'> Time: 2020-04-29</div><div id='author'> Author: 576825820@qq.com</div><div id='file'> File Name: python/jittor/test/test_batchnorm.py</div><div id='m_class'> M Class Name: TestBatchNorm</div><div id='n_method'> N Class Name: TestBatchNorm</div><div id='m_method'> M Method Name: test_batchnorm(1)</div><div id='n_method'> N Method Name: test_batchnorm(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: python/jittor/test/test_batchnorm.py</div><div id='n_file'> N File Name: python/jittor/test/test_batchnorm.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47     ]
        &#47&#47 )
        &#47&#47 num_partitions = 1*np.array([1, 1, 1, 1, 1, 1])
        num_partitions<a id="change"> = </a>1*<a id="change">np.array(</a>[4,4]<a id="change">)</a>
        &#47&#47 num_partitions = 1*np.array([1, 1, 1, 1])
        
        back_analyzer = analyzers.ClosedLoopBackwardAnalyzer(controller, dyn)
        back_analyzer.partitioner = partitioner_hyperparams</code></pre><h3>After Change</h3><pre><code class='java'>
        )
    elif args.system is "Quadrotor_8D":
        controller = th.load(dir_path+"/models/Quadrotor_8D/intermediate_policy_0.pt")
        <a id="change">controller.eval()</a>
    else:
        raise NotImplementedError

    &#47&#47 Set up analyzer (+ parititoner + propagator)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mit-acl/nn_robustness_analysis/commit/2851bced8fd743dcf813b46950d4aa9fe09066c2#diff-bbb15fa24dbe191ee71d47c0a37adba93a0cc2c3035d2301df801c9e28cc0337L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73900525</div><div id='project'> Project Name: mit-acl/nn_robustness_analysis</div><div id='commit'> Commit Name: 2851bced8fd743dcf813b46950d4aa9fe09066c2</div><div id='time'> Time: 2022-05-10</div><div id='author'> Author: nrober1122@gmail.com</div><div id='file'> File Name: nn_closed_loop/example.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nn_closed_loop/example.py</div><div id='n_file'> N File Name: nn_closed_loop/example.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 532</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 306</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Assume that the person is centerered in the image
        height = img_for_crop.shape[0]
        width = img_for_crop.shape[1]
        center<a id="change"> = </a><a id="change">np.array(</a>[width // 2, height // 2]<a id="change">)</a>

    scale = max(height, width) / 180

    if hps_type == &quothybrik&quot:</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 detection for bbox
    detector = detection.maskrcnn_resnet50_fpn(pretrained=True)
    <a id="change">detector.eval()</a>
    predictions = detector(
        [torch.from_numpy(img_for_crop).permute(2, 0, 1) / 255.])[0]
    human_ids = torch.logical_and(
        predictions["labels"] == 1,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yuliangxiu/icon/commit/2117636e701293c457554812067b272fcf3f8252#diff-47fac0c4f0072fc394bfbbb063b11a379cc14499565395b91fcf17a47b9746a0L90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73900537</div><div id='project'> Project Name: yuliangxiu/icon</div><div id='commit'> Commit Name: 2117636e701293c457554812067b272fcf3f8252</div><div id='time'> Time: 2022-10-10</div><div id='author'> Author: yuliang.xiu@tuebingen.mpg.de</div><div id='file'> File Name: lib/pymaf/utils/imutils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: process_image(5)</div><div id='n_method'> N Method Name: process_image(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lib/pymaf/utils/imutils.py</div><div id='n_file'> N File Name: lib/pymaf/utils/imutils.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 128</div><BR>