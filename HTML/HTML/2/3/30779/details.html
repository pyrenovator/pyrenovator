<html><h3>Pattern ID :30779
</h3><img src='90704424.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Compute heatmaps as preprocessing step
        label_heatmaps = []
        for idx, y in enumerate(tqdm(self.labels)):
            x = <a id="change">Image.open(</a>os.path.join(root_directory, self.image_names[idx])<a id="change">)</a>.convert(
                "RGB" &#47&#47didn&quott do this for DLC
            )  &#47&#47 Rick&quots images have 1 color channel; change to 3.
            if transform:
                x, y = transform(images = np.expand_dims(x, axis = 0), keypoints = np.expand_dims(y, axis = 0)) &#47&#47check transform and normalization
            x = x.squeeze(0)
            y = y.squeeze(0)
            x = self.torch_transform(x)
            y_heatmap<a id="change"> = </a>draw_keypoints(y, x.shape[-2], x.shape[-1], self.output_shape, sigma = 5)
            label_heatmaps.append(y_heatmap)
        self.label_heatmaps = torch.from_numpy(np.asarray(label_heatmaps)).float()
        self.label_heatmaps = self.label_heatmaps.permute(0, 3, 1, 2)</code></pre><h3>After Change</h3><pre><code class='java'>
        print(self.fully_labeled_idxs)
        self.image_names = [self.image_names[idx] for idx in self.fully_labeled_idxs]
        self.labels = [self.labels[idx] for idx in self.fully_labeled_idxs]
        print(len(self.image_names), <a id="change">len(</a>self.labels<a id="change">)</a>)
        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47

        self.downsample_factor = 2 &#47&#47could change to 0, 2, 3, or 4</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/danbider/lightning-pose/commit/545a2f0293f923aca78924357ba161baf71f2982#diff-0779795c0a8a233449cfa9c0bd55d45453213457b10fa40da3e5a32966494943L80' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90704424</div><div id='project'> Project Name: danbider/lightning-pose</div><div id='commit'> Commit Name: 545a2f0293f923aca78924357ba161baf71f2982</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: ubuntu@ip-172-31-72-121.ec2.internal</div><div id='file'> File Name: pose_est_nets/datasets/datasets.py</div><div id='m_class'> M Class Name: DLCHeatmapDataset</div><div id='n_method'> N Class Name: DLCHeatmapDataset</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: pose_est_nets/datasets/datasets.py</div><div id='n_file'> N File Name: pose_est_nets/datasets/datasets.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 114</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Write the XML file
    logger.info("Writing the XML file to disk")
    with <a id="change">output_xml_path.open(</a>"w"<a id="change">)</a> as fh_xml:
        n_bytes<a id="change"> = </a>fh_xml.write(xml_content)
    logger.info("Wrote %d bytes to %s", n_bytes, output_xml_path.resolve().as_uri())

    logger.info("PDF conversion done")</code></pre><h3>After Change</h3><pre><code class='java'>

    path_map = _prepare_output_paths(input_paths, output_dir, force)

    if <a id="change">len(</a>path_map<a id="change">)</a> == 0:
        logger.warning("No files to process, stopping")
        return 0
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/7dae95ebd57973adba75efbce55342e295b223bd#diff-0c5672607dda9074162d3f7dd21fb7a0b9bdf0004d223f8e9e44d122c19882f8L87' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90704412</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 7dae95ebd57973adba75efbce55342e295b223bd</div><div id='time'> Time: 2021-12-17</div><div id='author'> Author: Stannislav@users.noreply.github.com</div><div id='file'> File Name: src/bluesearch/entrypoint/database/convert_pdf.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(0)</div><div id='n_method'> N Method Name: run(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bluesearch/entrypoint/database/convert_pdf.py</div><div id='n_file'> N File Name: src/bluesearch/entrypoint/database/convert_pdf.py</div><div id='m_start'> M Start Line: 131</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 158</div><div id='n_end'> N End Line: 221</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    outfile = f&quot{audio_super}{dir}/{dir}.wav&quot
    data= []
    for infile in audioFiles:
        w<a id="change"> = </a><a id="change">wave.open(</a>infile, &quotrb&quot<a id="change">)</a>
        data.append( [w.getparams(), w.readframes(w.getnframes())] )
        w.close()
    output = wave.open(outfile, &quotwb&quot)
    output.setparams(data[0][0])</code></pre><h3>After Change</h3><pre><code class='java'>
  if len(audio_files) == 1:
    os.rename(audio_files[0], str(os.path.dirname(audio_files[0]))+ &quot/&quot + str(os.path.basename(os.path.dirname(audio_files[0]))) + audio_files[0][-4:])
    
  if <a id="change">len(</a>audio_files<a id="change">)</a> == 0:
    print(&quotMissing audio in your audio folder.&quot)
    sys.exit()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/johngettings/lihq/commit/5c02df6c1bfeb357a3c7a3c073a349eb534a983f#diff-1500446ac71873acb52abfc30bf317cfba356a29f0eab48f2446d3c4c5dc529eL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90704420</div><div id='project'> Project Name: johngettings/lihq</div><div id='commit'> Commit Name: 5c02df6c1bfeb357a3c7a3c073a349eb534a983f</div><div id='time'> Time: 2022-05-24</div><div id='author'> Author: johngettingsai@gmail.com</div><div id='file'> File Name: procedures/av_scripts.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: combine_audiofiles(2)</div><div id='n_method'> N Method Name: combine_audiofiles(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: procedures/av_scripts.py</div><div id='n_file'> N File Name: procedures/av_scripts.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 47</div><BR>