<html><h3>Pattern ID :8380
</h3><img src='29273198.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
      a = nn.Softmax()(outs)
    for ii in range(len(outs)):
      total += 1
      if <a id="change">outs[ii].tolist().index(</a>max(outs[ii])<a id="change">)</a> == y_batch[ii]:
        correct += 1
      pts.append([a[ii][1], y_batch[ii]])
  print((float(correct)/total))</code></pre><h3>After Change</h3><pre><code class='java'>
      pred.append(torch.sigmoid(outs).round())
    true.append(j[-1])
  if pred:
    pred<a id="change"> = </a>torch.cat(pred, 0).cpu().numpy()
  true = torch.cat(true, 0).cpu().numpy()
  if auprc:
    print(AUPRC(pts))
  if task == "classification":
    print("acc: "+str(accuracy_score(true, pred)))
    return accuracy_score(true, pred)
  elif task == "multilabel":
    print(" f1_micro: "+str(f1_score(true, pred, average="micro"))+\
        " f1_macro: "+str(f1_score(true, pred, average="macro")))
    <a id="change">return </a>f1_score(true, pred, average="micro"), f1_score(true, pred, average="macro")
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pliang279/multibench/commit/e8df377596458671f3a074b2f5d41a118b3fe6ae#diff-328705d89964545233518bba0c6d09aacc4a473df36c6e5b9b3f14e0d2c24af5L85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29273198</div><div id='project'> Project Name: pliang279/multibench</div><div id='commit'> Commit Name: e8df377596458671f3a074b2f5d41a118b3fe6ae</div><div id='time'> Time: 2021-06-06</div><div id='author'> Author: ztwu_nil@zju.edu.cn</div><div id='file'> File Name: training_structures/MFM.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_MFM(4)</div><div id='n_method'> N Method Name: test_MFM(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: training_structures/MFM.py</div><div id='n_file'> N File Name: training_structures/MFM.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 144</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            weight (torch.tensor): Weight corresponding to the given regressor
        

        reg_index = <a id="change">self.regressor_names.index(</a>name<a id="change">)</a>
        weight = self.regressor_params[reg_index]
        return weight

    def _piecewise_linear_trend(self, t):</code></pre><h3>After Change</h3><pre><code class='java'>

        regressor_dims = self.regressors_dims[name]
        mode = regressor_dims["mode"]
        index<a id="change"> = </a>regressor_dims["regressor_index"]

        if mode == "additive":
            regressor_params = self.regressor_params["additive"]
        if mode == "multiplicative":
            regressor_params = self.regressor_params["multiplicative"]

        <a id="change">return </a>regressor_params[index].weight

    def _piecewise_linear_trend(self, t):
        Piecewise linear trend, computed segmentwise or with deltas.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/71ff07c9baa8002f2611b7f6d3f8f94825e59b1b#diff-0de8813491ea3b065d703741fb108bf10c1d8d71d7ea683d07204576625d16b8L226' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29273199</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 71ff07c9baa8002f2611b7f6d3f8f94825e59b1b</div><div id='time'> Time: 2020-09-14</div><div id='author'> Author: hansika.hewamalage@monash.edu</div><div id='file'> File Name: neuralprophet/time_net.py</div><div id='m_class'> M Class Name: TimeNet</div><div id='n_method'> N Class Name: TimeNet</div><div id='m_method'> M Method Name: get_reg_weights(2)</div><div id='n_method'> N Method Name: get_reg_weights(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: neuralprophet/time_net.py</div><div id='n_file'> N File Name: neuralprophet/time_net.py</div><div id='m_start'> M Start Line: 237</div><div id='m_end'> M End Line: 239</div><div id='n_start'> N Start Line: 246</div><div id='n_end'> N End Line: 255</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
      a = nn.Softmax()(outs)
    for ii in range(len(outs)):
      total += 1
      if <a id="change">outs[ii].tolist().index(</a>max(outs[ii])<a id="change">)</a> == y_batch[ii]:
        correct += 1
      pts.append([a[ii][1], y_batch[ii]])
  print((float(correct)/total))</code></pre><h3>After Change</h3><pre><code class='java'>
    true.append(j[-1])
  if pred:
    pred = torch.cat(pred, 0).cpu().numpy()
  true<a id="change"> = </a>torch.cat(true, 0).cpu().numpy()
  if auprc:
    print(AUPRC(pts))
  if task == "classification":
    print("acc: "+str(accuracy_score(true, pred)))
    return accuracy_score(true, pred)
  elif task == "multilabel":
    print(" f1_micro: "+str(f1_score(true, pred, average="micro"))+\
        " f1_macro: "+str(f1_score(true, pred, average="macro")))
    <a id="change">return </a>f1_score(true, pred, average="micro"), f1_score(true, pred, average="macro")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pliang279/multibench/commit/08e57215227c5575c74f7942e287340eb5e50eb7#diff-328705d89964545233518bba0c6d09aacc4a473df36c6e5b9b3f14e0d2c24af5L84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29273194</div><div id='project'> Project Name: pliang279/multibench</div><div id='commit'> Commit Name: 08e57215227c5575c74f7942e287340eb5e50eb7</div><div id='time'> Time: 2021-06-06</div><div id='author'> Author: ztwu_nil@zju.edu.cn</div><div id='file'> File Name: training_structures/MFM.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_MFM(4)</div><div id='n_method'> N Method Name: test_MFM(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: training_structures/MFM.py</div><div id='n_file'> N File Name: training_structures/MFM.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 144</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    arguments = defaultdict(list)
    if tokenizer.eos_token in output:
        end_idx = <a id="change">output.index(</a>tokenizer.eos_token<a id="change">)</a>
    else:
        print("Warning! No eos token in", output)
        end_idx = None 
    output = output[:end_idx]</code></pre><h3>After Change</h3><pre><code class='java'>
            if value.strip() != "":
                arguments[role].append(value.strip())
    for key in arguments:
        arguments[key]<a id="change"> = </a>list(set(arguments[key]))
    <a id="change">return </a>dict(arguments)


def get_final_preds_labels(preds, labels):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thu-keg/omnievent/commit/c1feff5620101803917abf082308243655afc744#diff-4fb089b8a3b8873d607fd791c37807620cbc6a4189a142fb1888a52c21156e26L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29273191</div><div id='project'> Project Name: thu-keg/omnievent</div><div id='commit'> Commit Name: c1feff5620101803917abf082308243655afc744</div><div id='time'> Time: 2022-07-06</div><div id='author'> Author: penghao20170136@163.com</div><div id='file'> File Name: src/OpenEE/input_engineering/seq2seq_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: decode_arguments(3)</div><div id='n_method'> N Method Name: decode_arguments(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/OpenEE/input_engineering/seq2seq_utils.py</div><div id='n_file'> N File Name: src/OpenEE/input_engineering/seq2seq_utils.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 64</div><BR>