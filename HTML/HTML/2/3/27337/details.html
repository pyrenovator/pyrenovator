<html><h3>Pattern ID :27337
</h3><img src='81250318.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return alignments, viterbi_scores

    def _get_flat_start_batch(self):
        lens_abs = <a id="change">torch.round(</a>self.emission_pred.shape[1]<a id="change"> * </a>self.lens<a id="change">)</a>.long()
        phn_lens_abs = torch.round(self.phns.shape[1] * self.phn_lens).long()
        phns = self.phns.long()
</code></pre><h3>After Change</h3><pre><code class='java'>
    def _get_flat_start_batch(self, lens_abs, phns, phn_lens_abs):
        phns = phns.long()

        batch_size = <a id="change">len(</a>lens_abs<a id="change">)</a>
        fb_max_length = torch.max(lens_abs)

        flat_start_batch = torch.zeros(batch_size, fb_max_length).long()
        for i in range(batch_size):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/5dee9a491e12c79f65642448db31771edfefdea2#diff-5998bf9afa99b8b276f0e74798ed1f028f51712bbe36e0601d8362e6909aeb9cL239' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81250318</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 5dee9a491e12c79f65642448db31771edfefdea2</div><div id='time'> Time: 2020-06-04</div><div id='author'> Author: rastorge@server.mila.quebec</div><div id='file'> File Name: speechbrain/alignment/aligner.py</div><div id='m_class'> M Class Name: ViterbiAligner</div><div id='n_method'> N Class Name: ViterbiAligner</div><div id='m_method'> M Method Name: _get_flat_start_batch(4)</div><div id='n_method'> N Method Name: _get_flat_start_batch(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/alignment/aligner.py</div><div id='n_file'> N File Name: speechbrain/alignment/aligner.py</div><div id='m_start'> M Start Line: 250</div><div id='m_end'> M End Line: 270</div><div id='n_start'> N Start Line: 239</div><div id='n_end'> N End Line: 257</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return flat_start_batch  &#47&#47 , flat_start_lens

    def _get_viterbi_batch(self):
        lens_abs = <a id="change">torch.round(</a>self.emission_pred.shape[1]<a id="change"> * </a>self.lens<a id="change">)</a>.long()

        batch_size = len(self.emission_pred)
        fb_max_length = torch.max(lens_abs)</code></pre><h3>After Change</h3><pre><code class='java'>
        return flat_start_batch

    def _get_viterbi_batch(self, ids, lens_abs, phns, phn_lens_abs):
        batch_size = <a id="change">len(</a>lens_abs<a id="change">)</a>
        fb_max_length = torch.max(lens_abs)

        viterbi_batch = torch.zeros(batch_size, fb_max_length).long()
        for i in range(batch_size):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/5dee9a491e12c79f65642448db31771edfefdea2#diff-5998bf9afa99b8b276f0e74798ed1f028f51712bbe36e0601d8362e6909aeb9cL278' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81250317</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 5dee9a491e12c79f65642448db31771edfefdea2</div><div id='time'> Time: 2020-06-04</div><div id='author'> Author: rastorge@server.mila.quebec</div><div id='file'> File Name: speechbrain/alignment/aligner.py</div><div id='m_class'> M Class Name: ViterbiAligner</div><div id='n_method'> N Class Name: ViterbiAligner</div><div id='m_method'> M Method Name: _get_viterbi_batch(5)</div><div id='n_method'> N Method Name: _get_viterbi_batch(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/alignment/aligner.py</div><div id='n_file'> N File Name: speechbrain/alignment/aligner.py</div><div id='m_start'> M Start Line: 278</div><div id='m_end'> M End Line: 286</div><div id='n_start'> N Start Line: 265</div><div id='n_end'> N End Line: 271</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        delta = (encoding_max - encoding_min) / (2 ** tensor_quantizer.bitwidth - 1)
        offset = torch.round(-encoding_min / delta)
        tensor = torch.clamp(tensor, encoding_min.item(), encoding_max.item())
        tensor = <a id="change">torch.round(</a>tensor<a id="change"> / </a>delta<a id="change">)</a> + offset
        tensor = (tensor - offset) * delta

        return tensor</code></pre><h3>After Change</h3><pre><code class='java'>

        delta = (encoding_max - encoding_min) / (2 ** tensor_quantizer.bitwidth - 1)
        offset = torch.round(-encoding_min / delta)
        if <a id="change">len(</a>encoding_min<a id="change">)</a> &gt; 1:
            tensor = QuantizeDequantizeFunc._per_channel_quantize_dequantize(tensor, encoding_min, encoding_max, delta, offset, tensor_quantizer._ch_axis)
        else:
            tensor = QuantizeDequantizeFunc._per_tensor_quantize_dequantize(tensor, encoding_min, encoding_max, delta, offset)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/60b7bc92fca86b09f65f6e08bddea6363c95fb1b#diff-53af21caaa602b295954c0afcf0271342e22c2c3e5f1386f293cd465e08e53d2L546' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81250314</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 60b7bc92fca86b09f65f6e08bddea6363c95fb1b</div><div id='time'> Time: 2022-04-04</div><div id='author'> Author: quic_mangal@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='m_class'> M Class Name: QuantizeDequantizeFunc</div><div id='n_method'> N Class Name: QuantizeDequantizeFunc</div><div id='m_method'> M Method Name: forward(5)</div><div id='n_method'> N Method Name: forward(5)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='m_start'> M Start Line: 552</div><div id='m_end'> M End Line: 556</div><div id='n_start'> N Start Line: 577</div><div id='n_end'> N End Line: 583</div><BR>