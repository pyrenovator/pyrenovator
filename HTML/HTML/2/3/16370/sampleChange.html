<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    )

    if out is not None:
        out<a id="change"> = </a><a id="change">out.view(</a>num_embeddings * embedding_dim<a id="change">)</a>

    options = torch.tensor([1, -1], dtype=dtype, device=device)
    hv = torch.index_select(options, 0, selection, out=out)
    hv.requires_grad = requires_grad</code></pre><h3>After Change</h3><pre><code class='java'>
        ),
        dtype=torch.bool,
    ).bernoulli_(1.0 - sparsity, generator=generator)
    result = <a id="change">torch.where(</a>select, -1, +1<a id="change">)</a>.to(dtype=dtype, device=device)
    result.requires_grad = requires_grad
    return result
</code></pre>