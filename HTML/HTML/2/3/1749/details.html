<html><h3>Pattern ID :1749
</h3><img src='8164044.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    else:
                        yoff = -pun_tbr.top() - fm.ascent() - pun_tbr.height() / 2 - cfmt.br.width() / 2
                    if char in PUNSET_NONBRACKET:
                        yoff = -cfmt.tbr.width() - pun_br.height() + <a id="change">cfmt.br.width()</a>
                        &#47&#47 line.draw(painter, QPointF(hight_comp,  yoff - pun_tbr.height()), o)
                    line.draw(painter, QPointF(hight_comp,  yoff), o)
                    painter.setTransform(inv_transform, True)
                elif char in PUNSET_PAUSEORSTOP:</code></pre><h3>After Change</h3><pre><code class='java'>
                    if char.isalpha():
                        yoff = -cfmt.tbr.top() - fm.ascent() - cfmt.tbr.width()
                        hight_comp = 0
                    elif <a id="change"></a>char in PUNSET_NONBRACKET:
                        yoff =  -non_bracket_br[1] - non_bracket_br[3]
                        if self.punc_align_center:
                            yoff = yoff - cfmt.tbr.width() / 2 + non_bracket_br[3] / 3
                        else:
                            yoff<a id="change"> = </a>yoff - cfmt.tbr.width() + non_bracket_br[3]
                    else:
                        yoff = -pun_tbr.top() - fm.ascent() - pun_tbr.height() / 2 - cfmt.br.width() / 2
                    </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/4a49735da4dd45753a39aeb5b450778d346b1eae#diff-aa30432cc2fa48fb565134b7016dce79dfcd72b25d12617536123aa7380a8965L175' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8164044</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: 4a49735da4dd45753a39aeb5b450778d346b1eae</div><div id='time'> Time: 2022-08-28</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: QAbstractTextDocumentLayout</div><div id='n_parent_class'> N Parent Class: QAbstractTextDocumentLayout</div><div id='m_file'> M File Name: ballontranslator/ui/textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/textlayout.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 197</div><div id='n_end'> N End Line: 244</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        xoff += cfmt.br.width() - pun_tbr.width()
                    line.draw(painter, QPointF(xoff, yoff), o)
                else:
                    yoff = line.naturalTextWidth() - <a id="change">cfmt.br.width()</a>
                    line.draw(painter, QPointF(-yoff, -cfmt.tbr.top() - fm.ascent() + yoff), o)
                        
            block = block.next()
        </code></pre><h3>After Change</h3><pre><code class='java'>
                    yoff += self.draw_shifted
                    &#47&#47 xoff -= self.draw_shifted
                    if num_lspaces &gt; 0:
                        <a id="change">if </a>natral_shifted == 0:
                            natral_shifted<a id="change"> = </a>num_lspaces * cfmt.space_width
                        else:
                            natral_shifted -= self.draw_shifted
                        xoff -= natral_shifted</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/eab989632c95aef750234d6d12c634e58acccd8b#diff-2280c33c620559afa2066016e28328873ed99c20b268e5a461f2eb9fdc1fb67cL198' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8164046</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: eab989632c95aef750234d6d12c634e58acccd8b</div><div id='time'> Time: 2022-08-29</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: SceneTextLayout</div><div id='n_parent_class'> N Parent Class: SceneTextLayout</div><div id='m_file'> M File Name: ballontranslator/ui/scene_textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_start'> M Start Line: 221</div><div id='m_end'> M End Line: 288</div><div id='n_start'> N Start Line: 276</div><div id='n_end'> N End Line: 352</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                cfmt = CharFontFormat(fcmt)
                if cfmt.size &gt; self._max_font_size:
                    self._max_font_size = cfmt.size
                if ideal_width &lt; <a id="change">cfmt.br.width()</a>:
                    ideal_width = cfmt.br.width()
                charfmt_lst.append(cfmt)
                text_len = fragment.length()</code></pre><h3>After Change</h3><pre><code class='java'>

                if self.need_ideal_height:
                    h_ = cfmt.punc_rect(&quotfg&quot)[0].height()
                    <a id="change">if </a>ideal_height &lt; h_:
                        ideal_height<a id="change"> = </a>h_

                text_len = fragment.length()
                for _ in range(text_len):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/d0b47afc065a72c97d7faa688aed5ec93542e9ac#diff-2280c33c620559afa2066016e28328873ed99c20b268e5a461f2eb9fdc1fb67cL188' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8164043</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: d0b47afc065a72c97d7faa688aed5ec93542e9ac</div><div id='time'> Time: 2022-09-07</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_class'> M Class Name: SceneTextLayout</div><div id='n_method'> N Class Name: SceneTextLayout</div><div id='m_method'> M Method Name: documentChanged(4)</div><div id='n_method'> N Method Name: documentChanged(4)</div><div id='m_parent_class'> M Parent Class: QAbstractTextDocumentLayout</div><div id='n_parent_class'> N Parent Class: QAbstractTextDocumentLayout</div><div id='m_file'> M File Name: ballontranslator/ui/scene_textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_start'> M Start Line: 204</div><div id='m_end'> M End Line: 209</div><div id='n_start'> N Start Line: 198</div><div id='n_end'> N End Line: 232</div><BR>