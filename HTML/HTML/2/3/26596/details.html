<html><h3>Pattern ID :26596
</h3><img src='79649423.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.layers.append(layer)

        &#47&#47 Collect shape information for next layer init
        dummy_input = <a id="change">torch.zeros(</a>self.input_shape<a id="change">)</a>
        dummy_output<a id="change"> = </a>layer(dummy_input)
        if isinstance(dummy_output, tuple):
            dummy_output = dummy_output[0]
        self.input_shape = dummy_output.shape</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Compute layer_name
        if layer_name is None:
            layer_name = <a id="change">str(</a>len(self._modules)<a id="change">)</a>
        elif layer_name in self._modules:
            index = 0
            while f"{layer_name}_{index}" in self._modules:
                index += 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/2525d5683d49e369453b8e137a12ca4956ce37bb#diff-fe619f33723b92bb5bb63f91b88d67fd1684b5fe5d877d67c7b4450c92b9e595L74' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79649423</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 2525d5683d49e369453b8e137a12ca4956ce37bb</div><div id='time'> Time: 2020-10-21</div><div id='author'> Author: plantinga.peter@protonmail.com</div><div id='file'> File Name: speechbrain/nnet/containers.py</div><div id='m_class'> M Class Name: Sequential</div><div id='n_method'> N Class Name: Sequential</div><div id='m_method'> M Method Name: append(2)</div><div id='n_method'> N Method Name: append(2)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/nnet/containers.py</div><div id='n_file'> N File Name: speechbrain/nnet/containers.py</div><div id='m_start'> M Start Line: 74</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 104</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                b = np.zeros((len(indices), output.dim))
                b[np.arange(len(indices)), indices] = 1
            elif variable_dim_index == 2:
                b<a id="change"> = </a><a id="change">np.zeros(</a>(indices.shape[0], indices.shape[1], output.dim)<a id="change">)</a>
                &#47&#47 From https://stackoverflow.com/questions/36960320/convert-a-2d-matrix-to-a-3d-one-hot-matrix-numpy
                def all_idx(idx, axis):
                    grid = np.ogrid[tuple(map(slice, idx.shape))]
                    grid.insert(axis, idx)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47       comparison instead.
        if "OneHotEncodedOutput" in str(
            output.__class__
        ) or "BinaryEncodedOutput" in <a id="change">str(</a>output.__class__<a id="change">)</a>:

            if variable_dim_index == 1:
                original_column = original_data[:, index]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gretelai/gretel-synthetics/commit/cf7dd31ca60b565bb50fdf0b30092e2c9ebb25bf#diff-d3a8f221673d80e72a8bdfb7b36b7ea09482e9ec10db970329d1a5c71aa08362L203' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79649422</div><div id='project'> Project Name: gretelai/gretel-synthetics</div><div id='commit'> Commit Name: cf7dd31ca60b565bb50fdf0b30092e2c9ebb25bf</div><div id='time'> Time: 2022-11-21</div><div id='author'> Author: kendrick@gretel.ai</div><div id='file'> File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: transform(4)</div><div id='n_method'> N Method Name: transform(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='n_file'> N File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='m_start'> M Start Line: 244</div><div id='m_end'> M End Line: 293</div><div id='n_start'> N Start Line: 588</div><div id='n_end'> N End Line: 623</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            preprocessed_sentence = model.preprocess(sentence_text)
            embedding = model.embed(preprocessed_sentence)
        except IndexError:
            embedding<a id="change"> = </a><a id="change">np.zeros(</a>(model.dim,)<a id="change">)</a>
            num_errors += 1
        all_ids.append(sentence_id)
        all_embeddings.append(embedding)
        if i_sentence % 1000 == 0:</code></pre><h3>After Change</h3><pre><code class='java'>
        1D array of sentence_ids that we managed to embed. Note that the order corresponds
        exactly to the rows in `final_embeddings`.
    
    indices_str = ", ".join([<a id="change">str(</a>x<a id="change">)</a> for x in indices])

    query = f"SELECT sentence_id, text FROM sentences WHERE sentence_id IN ({indices_str})"
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/cc7283c8f8440aeec4d04d6b259ab898c78a3cc1#diff-6a370a606e89902d9cea7c7edf876b91c643d1c115291d5912b04e3bd88cf446L266' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79649420</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: cc7283c8f8440aeec4d04d6b259ab898c78a3cc1</div><div id='time'> Time: 2020-07-29</div><div id='author'> Author: jankrepl@yahoo.com</div><div id='file'> File Name: src/bbsearch/embedding_models.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_database_embeddings(3)</div><div id='n_method'> N Method Name: compute_database_embeddings(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bbsearch/embedding_models.py</div><div id='n_file'> N File Name: src/bbsearch/embedding_models.py</div><div id='m_start'> M Start Line: 283</div><div id='m_end'> M End Line: 317</div><div id='n_start'> N Start Line: 266</div><div id='n_end'> N End Line: 321</div><BR>