<html><h3>Pattern ID :35893
</h3><img src='101943558.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    params[key] = data

        if method == "get":
            <a id="change">return </a>requests.get(url, params=params).json()

        return requests.post(url, json=params).json()
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Parse data based on content-type
        mimetype = response.headers["Content-Type"].split(";")[0]
        if mimetype.lower().endswith("xml"):
            data<a id="change"> = </a><a id="change">xmltodict.parse(</a>response.text<a id="change">)</a>
        else:
            data = response.json()

        &#47&#47 Extract content from response, if necessary</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/e323a96b2741bc3513a5c64108603188413f8e0e#diff-e962932ddc6a77930cd6b2f17e32dd58f9838d0dfc535b3a75570896007c264bL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101943558</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: e323a96b2741bc3513a5c64108603188413f8e0e</div><div id='time'> Time: 2021-11-02</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: src/python/txtai/workflow/task/service.py</div><div id='m_class'> M Class Name: ServiceTask</div><div id='n_method'> N Class Name: ServiceTask</div><div id='m_method'> M Method Name: request(2)</div><div id='n_method'> N Method Name: request(5)</div><div id='m_parent_class'> M Parent Class: Task</div><div id='n_parent_class'> N Parent Class: Task</div><div id='m_file'> M File Name: src/python/txtai/workflow/task/service.py</div><div id='n_file'> N File Name: src/python/txtai/workflow/task/service.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 83</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    stream = os.popen(
        f"git log $(git describe --always --tags --abbrev=0 {TAG}^^)..{TAG}^ --oneline"
    )
    <a id="change">return </a>"&#47&#47&#47&#47 Commits\n\n" + stream.read()


def main():</code></pre><h3>After Change</h3><pre><code class='java'>


def get_commit_history() -&gt; str:
    new_version<a id="change"> = </a><a id="change">packaging.version.parse(</a>TAG<a id="change">)</a>

    &#47&#47 Get all tags sorted by version, latest first.
    all_tags = os.popen("git tag -l --sort=-version:refname &quotv*&quot").read().split("\n")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/tango/commit/20138ce2703300df9d0b923688bb9c7efd2de52f#diff-a48d3ad4b76d29211660dccd798dc7ffc5035912eb7178f4728a89bc9c74b875L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101943562</div><div id='project'> Project Name: allenai/tango</div><div id='commit'> Commit Name: 20138ce2703300df9d0b923688bb9c7efd2de52f</div><div id='time'> Time: 2021-12-15</div><div id='author'> Author: petew@allenai.org</div><div id='file'> File Name: scripts/release_notes.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_commit_history(0)</div><div id='n_method'> N Method Name: get_commit_history(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/release_notes.py</div><div id='n_file'> N File Name: scripts/release_notes.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &quot&quot&quotParse a version string and extract the major, minor, and patch versions.&quot&quot&quot
    import re
    matched = re.search(&quot^(\d+)\.(\d+)\.(\d+)&quot, version_str)
    <a id="change">return </a>int(matched.group(1)), int(matched.group(2)), int(matched.group(3))


&#47&#47 Export version information</code></pre><h3>After Change</h3><pre><code class='java'>

def _parse_version(version_str):
    &quot&quot&quotParse a version string and extract the major, minor, and patch versions.&quot&quot&quot
    ver<a id="change"> = </a><a id="change">packaging.version.parse(</a>version_str<a id="change">)</a>
    return ver.major, ver.minor, ver.micro


&#47&#47 Export version information</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/deepspeed/commit/cfa63f5dad2b0c45a23ee9e34d47206ee29a356a#diff-e4defb5252639e56cd3af8822625671eb75ffc4215dd637ea0d75a06c490c35bL26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101943566</div><div id='project'> Project Name: microsoft/deepspeed</div><div id='commit'> Commit Name: cfa63f5dad2b0c45a23ee9e34d47206ee29a356a</div><div id='time'> Time: 2021-05-19</div><div id='author'> Author: jerasley@microsoft.com</div><div id='file'> File Name: deepspeed/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _parse_version(1)</div><div id='n_method'> N Method Name: _parse_version(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepspeed/__init__.py</div><div id='n_file'> N File Name: deepspeed/__init__.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 30</div><BR>