<html><h3>Pattern ID :22682
</h3><img src='72030905.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Build necessary components
    train_loader = get_loader(config[&quotdata&quot], &quottrain&quot)

    if <a id="change">config[&quotdata&quot]</a>[&quotoverfit&quot]:
        val_loader = get_loader(config[&quotdata&quot], &quottrain&quot)
    else:
        val_loader = get_loader(config[&quotdata&quot], &quotval&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
    write_json(config, path_to_run / &quotconfig.json&quot)

    &#47&#47 Build trainer and start training
    trainer<a id="change"> = </a><a id="change">Trainer(
        </a>train_loader, val_loader, model, criterion, optim, scheduler, device, config, 
        path_to_run, epoch, metric_start_val<a id="change">
    )</a>
    trainer.run()
        

if __name__ == "__main__":</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bwittmann/transoar/commit/943b60f71cbfae5fcb65729b42c3b9464b433db2#diff-0e048206896ef3808bf29e00f4ca534eb723fe51e27a47b583a92e913c33bbcfL17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72030905</div><div id='project'> Project Name: bwittmann/transoar</div><div id='commit'> Commit Name: 943b60f71cbfae5fcb65729b42c3b9464b433db2</div><div id='time'> Time: 2021-11-29</div><div id='author'> Author: bastian.wittmann@tum.de</div><div id='file'> File Name: scripts/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(2)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/train.py</div><div id='n_file'> N File Name: scripts/train.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        targets = []
        for item in bboxes:
            target = {
                &quotboxes&quot: <a id="change">item[0]</a>.to(dtype=torch.float, device=device),
                &quotlabels&quot: torch.tensor(item[1]).to(device=device)
            }
            targets.append(target)</code></pre><h3>After Change</h3><pre><code class='java'>
    scheduler = torch.optim.lr_scheduler.StepLR(optim, config[&quottraining&quot][&quotlr_drop&quot])

    &#47&#47 Build trainer and start training
    trainer<a id="change"> = </a><a id="change">Trainer(
        </a>train_loader, val_loader, model, criterion, optim, scheduler, device, config<a id="change">
    )</a>
    trainer.run()
        

if __name__ == "__main__":</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bwittmann/transoar/commit/fbe1515fe14ebf81c18bcf86c27bd7cb4ac79e7e#diff-0e048206896ef3808bf29e00f4ca534eb723fe51e27a47b583a92e913c33bbcfL13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72030911</div><div id='project'> Project Name: bwittmann/transoar</div><div id='commit'> Commit Name: fbe1515fe14ebf81c18bcf86c27bd7cb4ac79e7e</div><div id='time'> Time: 2021-11-22</div><div id='author'> Author: bastian.wittmann@tum.de</div><div id='file'> File Name: scripts/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/train.py</div><div id='n_file'> N File Name: scripts/train.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    gpu_ids = [0]
):
    gpu_ids = cast_list(gpu_ids)
    <a id="change">os.environ["CUDA_VISIBLE_DEVICES"]</a> = &quot,&quot.join(map(str, gpu_ids))

    from stylegan2_pytorch import Trainer, NanException
</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    if generate:
        model<a id="change"> = </a><a id="change">Trainer(**model_args)</a>
        model.load(load_from)
        samples_name = timestamped_filename()
        model.evaluate(samples_name, num_image_tiles)
        print(f&quotsample images generated at {results_dir}/{name}/{samples_name}&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/stylegan2-pytorch/commit/d0bab1360d59ed7a5930c4ba82f8781753ee0ccb#diff-dac30a56d2934224b18a3e924f7150cab3a316b8183e4b3cd130294635e3cb22L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72030908</div><div id='project'> Project Name: lucidrains/stylegan2-pytorch</div><div id='commit'> Commit Name: d0bab1360d59ed7a5930c4ba82f8781753ee0ccb</div><div id='time'> Time: 2020-09-23</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: stylegan2_pytorch/cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_from_folder(32)</div><div id='n_method'> N Method Name: train_from_folder(32)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: stylegan2_pytorch/cli.py</div><div id='n_file'> N File Name: stylegan2_pytorch/cli.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 149</div><BR>