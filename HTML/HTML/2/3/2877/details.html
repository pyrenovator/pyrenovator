<html><h3>Pattern ID :2877
</h3><img src='11318508.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    env = build_dummy_structured_environment()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=False, action_logging=True, reward_logging=False)
    _<a id="change"> = </a><a id="change">env.reset()</a>
    _ = env.step(env.action_space.sample())[0]

    &#47&#47 test application of wrapper
    for ii in range(2):</code></pre><h3>After Change</h3><pre><code class='java'>
    env = build_dummy_maze_env()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=False, action_logging=True, reward_logging=False)
    <a id="change">env.reset()</a>

    &#47&#47 test application of wrapper
    for ii in range(2):
        env.step(env.action_space.sample())</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 9</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/enlite-ai/maze/commit/a060988130b3d3dc0434b27df5aae99108aac623#diff-c000c2cd48a92c6d29da2c128719ae2f835b059184c1f337b6a66c63503866d9L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318508</div><div id='project'> Project Name: enlite-ai/maze</div><div id='commit'> Commit Name: a060988130b3d3dc0434b27df5aae99108aac623</div><div id='time'> Time: 2021-03-25</div><div id='author'> Author: office@enlite.ai</div><div id='file'> File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_action_monitoring(0)</div><div id='n_method'> N Method Name: test_action_monitoring(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='n_file'> N File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 92</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    env = build_dummy_structured_environment()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=False, action_logging=False, reward_logging=True)
    _<a id="change"> = </a><a id="change">env.reset()</a>
    _ = env.step(env.action_space.sample())[0]

    &#47&#47 test application of wrapper
    for ii in range(2):</code></pre><h3>After Change</h3><pre><code class='java'>
    env = build_dummy_maze_env()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=False, action_logging=False, reward_logging=True)
    <a id="change">env.reset()</a>
    env.step(env.action_space.sample())

    &#47&#47 test application of wrapper
    for ii in range(2):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/enlite-ai/maze/commit/a060988130b3d3dc0434b27df5aae99108aac623#diff-c000c2cd48a92c6d29da2c128719ae2f835b059184c1f337b6a66c63503866d9L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318492</div><div id='project'> Project Name: enlite-ai/maze</div><div id='commit'> Commit Name: a060988130b3d3dc0434b27df5aae99108aac623</div><div id='time'> Time: 2021-03-25</div><div id='author'> Author: office@enlite.ai</div><div id='file'> File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_reward_monitoring(0)</div><div id='n_method'> N Method Name: test_reward_monitoring(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='n_file'> N File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, q=QNetwork(model, optimizer))

        state<a id="change"> = </a><a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(state, None)
            state, reward = env.step(action)
</code></pre><h3>After Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, q=QNetwork(model, optimizer))

        <a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(env.state, env.reward)
            state, reward = env.step(action)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/syuntoku14/pytorch-rl-il/commit/653e163ffd1d7c393b197d3f34ba91993db44845#diff-aa241caf970c35522f032377a7e154263c0d2d93fca631edffeecd828428225eL15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318520</div><div id='project'> Project Name: syuntoku14/pytorch-rl-il</div><div id='commit'> Commit Name: 653e163ffd1d7c393b197d3f34ba91993db44845</div><div id='time'> Time: 2020-03-07</div><div id='author'> Author: syuntoku14@gmail.com</div><div id='file'> File Name: rlil/agents/tests/greedy_test.py</div><div id='m_class'> M Class Name: TestGreedy</div><div id='n_method'> N Class Name: TestGreedy</div><div id='m_method'> M Method Name: test_q_discrete(1)</div><div id='n_method'> N Method Name: test_q_discrete(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: rlil/agents/tests/greedy_test.py</div><div id='n_file'> N File Name: rlil/agents/tests/greedy_test.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, policy=GaussianPolicy(model, optimizer, env.action_space))

        state<a id="change"> = </a><a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(state, None)
            state, reward = env.step(action)</code></pre><h3>After Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, policy=GaussianPolicy(model, optimizer, env.action_space))

        <a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(env.state, env.reward)
            state, reward = env.step(action)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/syuntoku14/pytorch-rl-il/commit/653e163ffd1d7c393b197d3f34ba91993db44845#diff-aa241caf970c35522f032377a7e154263c0d2d93fca631edffeecd828428225eL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318516</div><div id='project'> Project Name: syuntoku14/pytorch-rl-il</div><div id='commit'> Commit Name: 653e163ffd1d7c393b197d3f34ba91993db44845</div><div id='time'> Time: 2020-03-07</div><div id='author'> Author: syuntoku14@gmail.com</div><div id='file'> File Name: rlil/agents/tests/greedy_test.py</div><div id='m_class'> M Class Name: TestGreedy</div><div id='n_method'> N Class Name: TestGreedy</div><div id='m_method'> M Method Name: test_policy_continuous(1)</div><div id='n_method'> N Method Name: test_policy_continuous(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: rlil/agents/tests/greedy_test.py</div><div id='n_file'> N File Name: rlil/agents/tests/greedy_test.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    model.learn(total_timesteps=150)

    obs<a id="change"> = </a><a id="change">env.reset()</a>

    observations = {key: [] for key in obs.keys()}
    for _ in range(10):
        obs = env.step(env.action_space.sample())[0]</code></pre><h3>After Change</h3><pre><code class='java'>

    model.learn(total_timesteps=150)

    <a id="change">env.reset()</a>
    action = np.array([env.action_space.sample() for _ in range(n_envs)])
    observations = env.step(action)[0]

    &#47&#47 Get dictionary of current parameters</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/c5adad82b2c1733bd8add7e2eeb49a895b635856#diff-161a1a7d8e6a4fa5684e0a3a1fb02b6d8e17de626da8df7389fdc64af9f9ffb1L108' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318501</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: c5adad82b2c1733bd8add7e2eeb49a895b635856</div><div id='time'> Time: 2023-03-20</div><div id='author'> Author: 45557362+qgallouedec@users.noreply.github.com</div><div id='file'> File Name: tests/test_her.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_save_load(3)</div><div id='n_method'> N Method Name: test_save_load(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_her.py</div><div id='n_file'> N File Name: tests/test_her.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 153</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super(DummyVecEnv, self).__init__(len(make_env), env.observation_space, env.action_space)

    def reset(self):
        observations<a id="change"> = </a>np.asarray([<a id="change">env.reset()</a> for env in self.envs])
        return observations

    def step(self, actions):</code></pre><h3>After Change</h3><pre><code class='java'>
        super(DummyVecEnv, self).__init__(len(make_env), env.observation_space, env.action_space)

    def reset(self):
        return merge_map(np.asarray, tuple(<a id="change">env.reset()</a> for env in self.envs))

    def step(self, actions):
        results = (reset_after_done(env, action) for env, action in zip(self.envs, actions))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jjccero/pbrl/commit/7d372d4b72769adbe0829f596da31acaeddfa9bb#diff-8a4e140ff96a4553a3c2caf90cb2394f9f426060c454932256546e2358c7f63eL12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318517</div><div id='project'> Project Name: jjccero/pbrl</div><div id='commit'> Commit Name: 7d372d4b72769adbe0829f596da31acaeddfa9bb</div><div id='time'> Time: 2022-07-08</div><div id='author'> Author: 1127986703@qq.com</div><div id='file'> File Name: pbrl/env/dummy.py</div><div id='m_class'> M Class Name: DummyVecEnv</div><div id='n_method'> N Class Name: DummyVecEnv</div><div id='m_method'> M Method Name: reset(1)</div><div id='n_method'> N Method Name: reset(1)</div><div id='m_parent_class'> M Parent Class: VectorEnv</div><div id='n_parent_class'> N Parent Class: VectorEnv</div><div id='m_file'> M File Name: pbrl/env/dummy.py</div><div id='n_file'> N File Name: pbrl/env/dummy.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 14</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 13</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    env = build_dummy_maze_env()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=True, action_logging=False, reward_logging=False)
    obs<a id="change"> = </a><a id="change">env.reset()</a>

    &#47&#47 test application of wrapper
    for ii in range(3):
        &#47&#47 Observation will get reported in the next step (when the agent is actually acting on it)</code></pre><h3>After Change</h3><pre><code class='java'>
    env = build_dummy_maze_env()

    env = MazeEnvMonitoringWrapper.wrap(env, observation_logging=True, action_logging=False, reward_logging=False)
    <a id="change">env.reset()</a>

    &#47&#47 test application of wrapper
    for ii in range(3):
        &#47&#47 Observation will get reported in the next step (when the agent is actually acting on it)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/enlite-ai/maze/commit/f3551a12c271e51aa31aa44f9f7992c5add91bc4#diff-c000c2cd48a92c6d29da2c128719ae2f835b059184c1f337b6a66c63503866d9L33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318518</div><div id='project'> Project Name: enlite-ai/maze</div><div id='commit'> Commit Name: f3551a12c271e51aa31aa44f9f7992c5add91bc4</div><div id='time'> Time: 2021-04-01</div><div id='author'> Author: office@enlite.ai</div><div id='file'> File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_observation_monitoring(0)</div><div id='n_method'> N Method Name: test_observation_monitoring(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='n_file'> N File Name: maze/test/core/wrappers/test_monitoring_wrapper.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
              close_gripper: bool = False):
        &#47&#47 first clear map so robot cannot crash into objects when resetting, then respawn the scene
        self.map.clear()
        robot_obs<a id="change"> = </a><a id="change">self._robot.reset(initial_base_pose=self.map.draw_initial_base_pose(
            ee_planner.gripper_goal_wrist if ee_planner is not None else None),
            initial_joint_distribution=initial_joint_distribution,
            success_thres_dist=success_thres_dist,
            success_thres_rot=success_thres_rot,
            close_gripper=close_gripper)</a>

        self.map.map_reset()
        &#47&#47 sometimes desirable to call set_ee_planner manually after the map has reset to first deduct goals from the map
        if ee_planner is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
              close_gripper: bool = False):
        &#47&#47 first clear map so robot cannot crash into objects when resetting, then respawn the scene
        self.map.clear()
        <a id="change">self._robot.reset(initial_base_pose=self.map.draw_initial_base_pose(
            ee_planner.gripper_goal_wrist if ee_planner is not None else None),
            initial_joint_distribution=initial_joint_distribution,
            success_thres_dist=success_thres_dist,
            success_thres_rot=success_thres_rot,
            close_gripper=close_gripper)</a>

        self.map.map_reset()
        &#47&#47 sometimes desirable to call set_ee_planner manually after the map has reset to first deduct goals from the map
        if ee_planner is not None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendr-eu/opendr/commit/0f4799e751b0eed5dfc5ff29dc19ca3396d160b0#diff-0ae78817878662ad52d2c40b729a6a2f90b6f4b14ef0a8bbf0d74a33c2734d55L105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318512</div><div id='project'> Project Name: opendr-eu/opendr</div><div id='commit'> Commit Name: 0f4799e751b0eed5dfc5ff29dc19ca3396d160b0</div><div id='time'> Time: 2021-07-26</div><div id='author'> Author: daniel.honerkamp@gmail.com</div><div id='file'> File Name: src/opendr/control/mobile_manipulation/mobileRL/envs/mobile_manipulation_env.py</div><div id='m_class'> M Class Name: MobileManipulationEnv</div><div id='n_method'> N Class Name: MobileManipulationEnv</div><div id='m_method'> M Method Name: reset(6)</div><div id='n_method'> N Method Name: reset(6)</div><div id='m_parent_class'> M Parent Class: Env</div><div id='n_parent_class'> N Parent Class: Env</div><div id='m_file'> M File Name: src/opendr/control/mobile_manipulation/mobileRL/envs/mobile_manipulation_env.py</div><div id='n_file'> N File Name: src/opendr/control/mobile_manipulation/mobileRL/envs/mobile_manipulation_env.py</div><div id='m_start'> M Start Line: 113</div><div id='m_end'> M End Line: 118</div><div id='n_start'> N Start Line: 113</div><div id='n_end'> N End Line: 118</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, policy=SoftmaxPolicy(model, optimizer))

        state<a id="change"> = </a><a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(state, None)
            state, reward = env.step(action)
</code></pre><h3>After Change</h3><pre><code class='java'>
        optimizer = Adam(model.parameters())
        agent = GreedyAgent(env.action_space, policy=SoftmaxPolicy(model, optimizer))

        <a id="change">env.reset()</a>
        while not env._state.done:
            action = agent.act(env.state, env.reward)
            state, reward = env.step(action)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/syuntoku14/pytorch-rl-il/commit/653e163ffd1d7c393b197d3f34ba91993db44845#diff-aa241caf970c35522f032377a7e154263c0d2d93fca631edffeecd828428225eL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11318515</div><div id='project'> Project Name: syuntoku14/pytorch-rl-il</div><div id='commit'> Commit Name: 653e163ffd1d7c393b197d3f34ba91993db44845</div><div id='time'> Time: 2020-03-07</div><div id='author'> Author: syuntoku14@gmail.com</div><div id='file'> File Name: rlil/agents/tests/greedy_test.py</div><div id='m_class'> M Class Name: TestGreedy</div><div id='n_method'> N Class Name: TestGreedy</div><div id='m_method'> M Method Name: test_policy_discrete(1)</div><div id='n_method'> N Method Name: test_policy_discrete(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: rlil/agents/tests/greedy_test.py</div><div id='n_file'> N File Name: rlil/agents/tests/greedy_test.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 38</div><BR>