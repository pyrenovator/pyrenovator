<html><h3>Pattern ID :1112
</h3><img src='5592292.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            output.append(speaker_embedding)
        
        if return_all_spk_embedding:
            random_idx<a id="change"> = </a><a id="change">torch.multinomial(torch.ones(len(self.all_spk_idx)), 100, replacement=False).long()</a> &#47&#47 100 for experimentally to avoid OOM error
            all_speaker_embedding = self.embed_sources(self.all_spk_idx[random_idx]) &#47&#47 (n_training_sources, latent_dim)
            output.append(all_speaker_embedding)
</code></pre><h3>After Change</h3><pre><code class='java'>
            all_spk_embedding = self.embed_sources(self.all_spk_idx) &#47&#47 (n_training_sources, latent_dim)
            output.append(all_spk_embedding)
        
        if <a id="change">len(</a>output<a id="change">)</a> == 1:
            return output[0]

        return tuple(output)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/bceeacb692d2f21773f3f8ad7921d5ff890a1403#diff-28649dc6ec1ef23f8ecb9167c7d59372d842872ac5c5379763c2fd9abbadab43L101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5592292</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: bceeacb692d2f21773f3f8ad7921d5ff890a1403</div><div id='time'> Time: 2021-11-05</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: src/models/wavesplit.py</div><div id='m_class'> M Class Name: WaveSplit</div><div id='n_method'> N Class Name: WaveSplit</div><div id='m_method'> M Method Name: forward(9)</div><div id='n_method'> N Method Name: forward(9)</div><div id='m_parent_class'> M Parent Class: WaveSplitBase</div><div id='n_parent_class'> N Parent Class: WaveSplitBase</div><div id='m_file'> M File Name: src/models/wavesplit.py</div><div id='n_file'> N File Name: src/models/wavesplit.py</div><div id='m_start'> M Start Line: 101</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 185</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        number_to_gen = self.eval_generate_num
        num_batch = number_to_gen // self.batch_size + 1 if number_to_gen != self.batch_size else 1
        samples = <a id="change">torch.zeros(num_batch * self.batch_size, self.max_length).long()</a>  &#47&#47 larger than num_samples
        fake_sentences = torch.zeros((self.batch_size, self.max_length))
        idx2token = eval_data.idx2token

        for b in range(num_batch):
            leak_sample = self.leakgan_generate(fake_sentences, dis)

            assert leak_sample.shape == (self.batch_size, self.max_length)
            samples[b * self.batch_size:(b + 1) * self.batch_size, :] = leak_sample

        samples<a id="change"> = </a>samples[:number_to_gen, :]
        samples = samples.tolist()
        texts = []
        for sen in samples:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        fake_sentences = torch.zeros((self.batch_size, self.max_length))
        idx2token = eval_data.idx2token
        batch_size = <a id="change">len(</a>batch_data[&quottarget_text&quot]<a id="change">)</a>

        samples = self.leakgan_generate(fake_sentences, dis)
        samples = samples[:batch_size]
        samples = samples.tolist()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/fc4878d02e6b0c539d71f89d99fd0af9fe088760#diff-62933681a01584827327c04ae3e95ed02184dc2f518f346a504c8176cd63bcf9L330' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5592294</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: fc4878d02e6b0c539d71f89d99fd0af9fe088760</div><div id='time'> Time: 2021-04-06</div><div id='author'> Author: 1020139164@qq.com</div><div id='file'> File Name: textbox/module/Generator/LeakGANGenerator.py</div><div id='m_class'> M Class Name: LeakGANGenerator</div><div id='n_method'> N Class Name: LeakGANGenerator</div><div id='m_method'> M Method Name: generate(4)</div><div id='n_method'> N Method Name: generate(3)</div><div id='m_parent_class'> M Parent Class: UnconditionalGenerator</div><div id='n_parent_class'> N Parent Class: UnconditionalGenerator</div><div id='m_file'> M File Name: textbox/module/Generator/LeakGANGenerator.py</div><div id='n_file'> N File Name: textbox/module/Generator/LeakGANGenerator.py</div><div id='m_start'> M Start Line: 333</div><div id='m_end'> M End Line: 345</div><div id='n_start'> N Start Line: 329</div><div id='n_end'> N End Line: 337</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        out = [(point_features, xyz)] + out

        xyz = xyz.unsqueeze(0).contiguous()
        indices = <a id="change">furthest_point_sample(xyz, cfg.n_keypoints).squeeze(0).long()</a>
        keypoints<a id="change"> = </a>points[indices]
        keypoints_xyz, keypoints_features = torch.split(keypoints, [3, 1], dim=-1)
        voxel_features_i, voxel_coords_i = out[2]
</code></pre><h3>After Change</h3><pre><code class='java'>
        xyz, point_features = torch.split(points, [3, 1], dim=-1)
        keypoints_xyz, keypoints_features = self.sample_keypoints(xyz, point_features)
        out = [(point_features, xyz)] + out
        for i in range(<a id="change">len(</a>self.cfg.strides<a id="change">)</a>):
            voxel_features_i, voxel_coords_i = out[i]
            voxel_coords_i = voxel_coords_i.unsqueeze(0).contiguous()
            voxel_features_i = voxel_features_i.unsqueeze(0).permute(0, 2, 1).contiguous()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jhultman/vision3d/commit/b58d5a394a6cc04a99daeaa04b0ef90f050f8582#diff-acdbb7a8541d282e4e6bd0147d753b4b222401d39382c8be5223bd3ab78db7fcL109' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5592289</div><div id='project'> Project Name: jhultman/vision3d</div><div id='commit'> Commit Name: b58d5a394a6cc04a99daeaa04b0ef90f050f8582</div><div id='time'> Time: 2020-01-17</div><div id='author'> Author: 27909223+jhultman@users.noreply.github.com</div><div id='file'> File Name: pvrcnn/main.py</div><div id='m_class'> M Class Name: PV_RCNN</div><div id='n_method'> N Class Name: PV_RCNN</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: pvrcnn/main.py</div><div id='n_file'> N File Name: pvrcnn/main.py</div><div id='m_start'> M Start Line: 120</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _get_flat_start_batch(self):
        lens_abs = torch.round(self.emission_pred.shape[1] * self.lens).long()
        phn_lens_abs = torch.round(self.phns.shape[1] * self.phn_lens).long()
        phns<a id="change"> = </a><a id="change">self.phns.long()</a>

        batch_size = len(self.emission_pred)
        fb_max_length = torch.max(lens_abs)
</code></pre><h3>After Change</h3><pre><code class='java'>
    def _get_flat_start_batch(self, lens_abs, phns, phn_lens_abs):
        phns = phns.long()

        batch_size = <a id="change">len(</a>lens_abs<a id="change">)</a>
        fb_max_length = torch.max(lens_abs)

        flat_start_batch = torch.zeros(batch_size, fb_max_length).long()
        for i in range(batch_size):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/5dee9a491e12c79f65642448db31771edfefdea2#diff-5998bf9afa99b8b276f0e74798ed1f028f51712bbe36e0601d8362e6909aeb9cL250' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5592288</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 5dee9a491e12c79f65642448db31771edfefdea2</div><div id='time'> Time: 2020-06-04</div><div id='author'> Author: rastorge@server.mila.quebec</div><div id='file'> File Name: speechbrain/alignment/aligner.py</div><div id='m_class'> M Class Name: ViterbiAligner</div><div id='n_method'> N Class Name: ViterbiAligner</div><div id='m_method'> M Method Name: _get_flat_start_batch(4)</div><div id='n_method'> N Method Name: _get_flat_start_batch(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/alignment/aligner.py</div><div id='n_file'> N File Name: speechbrain/alignment/aligner.py</div><div id='m_start'> M Start Line: 250</div><div id='m_end'> M End Line: 270</div><div id='n_start'> N Start Line: 239</div><div id='n_end'> N End Line: 257</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
			preds_ = torch.transpose(preds, 1, 2)
			&#47&#47print(preds.size())

			y = <a id="change">y.long()</a>
			loss<a id="change"> = </a>self.Loss(preds_, torch.squeeze(y))
			return preds, loss
		return preds
</code></pre><h3>After Change</h3><pre><code class='java'>
				loss+=self.Loss(preds, y[:,i].squeeze().long())
		preds_ = torch.stack(preds_, dim = 1)
		if y is not None:
			loss/=<a id="change">len(</a>xs<a id="change">)</a>
			return preds_, loss
		return preds_

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dido1998/recurrent-independent-mechanisms/commit/d87a800096eaa36730cbabac535eea24973f3799#diff-e5165d0379320c04b38a0f79666ae179299255ae3019498345e3dd6fc2ef1521L253' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5592285</div><div id='project'> Project Name: dido1998/recurrent-independent-mechanisms</div><div id='commit'> Commit Name: d87a800096eaa36730cbabac535eea24973f3799</div><div id='time'> Time: 2020-02-11</div><div id='author'> Author: adidolkar123@gmail.com</div><div id='file'> File Name: networks.py</div><div id='m_class'> M Class Name: CopyingModel</div><div id='n_method'> N Class Name: CopyingModel</div><div id='m_method'> M Method Name: forward(5)</div><div id='n_method'> N Method Name: forward(5)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: networks.py</div><div id='n_file'> N File Name: networks.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 276</div><div id='n_start'> N Start Line: 291</div><div id='n_end'> N End Line: 313</div><BR>