<html><h3>Pattern ID :34155
</h3><img src='97594000.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def transform(pc, R, t):
    return <a id="change">np.dot(</a>pc, R.T<a id="change">)</a> + t


def batch_transform(batch_pc, batch_R, batch_t):</code></pre><h3>After Change</h3><pre><code class='java'>


def transform(pc, R, t=None):
    pc = <a id="change">np.dot(</a>pc, R.T<a id="change">)</a>
    if t is not None:
        pc = pc<a id="change"> + </a>t
    return pc

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/zhulf0804/pcreg.pytorch/commit/5c4f707f2a7f9baeba222a299c310a3374181e3f#diff-0b44665a54477350d7002cd0f967953da10215cb34d046d6c09937d6cc561deaL66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594000</div><div id='project'> Project Name: zhulf0804/pcreg.pytorch</div><div id='commit'> Commit Name: 5c4f707f2a7f9baeba222a299c310a3374181e3f</div><div id='time'> Time: 2020-11-27</div><div id='author'> Author: zhulf0804@gmail.com</div><div id='file'> File Name: utils/process.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: transform(3)</div><div id='n_method'> N Method Name: transform(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/process.py</div><div id='n_file'> N File Name: utils/process.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 66</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        A_proc, R_proc = lpcoeff(processed_speech_framed[ii, :], P)

        numerators[ii] = A_proc.dot(toeplitz(R_clean).dot(A_proc.T))
        denominators[ii] = A_clean.dot(<a id="change">toeplitz(R_clean).dot(</a>A_clean.T<a id="change">)</a>)

    frac = numerators / denominators
    frac[frac &lt;= 0] = 1000</code></pre><h3>After Change</h3><pre><code class='java'>
        A_proc, R_proc = lpcoeff(processed_speech_framed[ii, :], P)

        numerators[ii] = A_proc.dot(toeplitz(R_clean).dot(A_proc.T))
        denominators[ii] = A_clean.dot(<a id="change">toeplitz(R_clean).dot(</a>A_clean.T<a id="change">)</a>)<a id="change"> + </a>eps

    frac = numerators / denominators
    frac[frac &lt;= 0] = 1000</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rikorose/deepfilternet/commit/fa36528bb4683d4dd2250351cf4ff01bb46fee03#diff-cbe6f62b31bc8094eebc62a916c6c3a52c3f7451e89ef796a7a3fac2d15ec3a1L241' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594020</div><div id='project'> Project Name: rikorose/deepfilternet</div><div id='commit'> Commit Name: fa36528bb4683d4dd2250351cf4ff01bb46fee03</div><div id='time'> Time: 2022-04-12</div><div id='author'> Author: h.schroeter@pm.me</div><div id='file'> File Name: DeepFilterNet/df/sepm.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: llr(5)</div><div id='n_method'> N Method Name: llr(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: DeepFilterNet/df/sepm.py</div><div id='n_file'> N File Name: DeepFilterNet/df/sepm.py</div><div id='m_start'> M Start Line: 259</div><div id='m_end'> M End Line: 266</div><div id='n_start'> N Start Line: 242</div><div id='n_end'> N End Line: 269</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    :param y_mat: np.ndarray with ndim=2
    :return: np.ndarray  with ndim=2
    
    return 1 - <a id="change">np.dot(</a>x_mat, y_mat.T<a id="change">)</a> / np.outer(
        np.linalg.norm(x_mat, axis=1), np.linalg.norm(y_mat, axis=1)
    )
</code></pre><h3>After Change</h3><pre><code class='java'>
    :return: np.ndarray  with ndim=2
    
    return 1 - np.clip(
        (<a id="change">np.dot(</a>x_mat, y_mat.T<a id="change">) + </a>eps)
        / (
            np.outer(np.linalg.norm(x_mat, axis=1), np.linalg.norm(y_mat, axis=1)) + eps
        ),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/4c4f69b150bc1f7103f31aea8ceade1f36081a7e#diff-f2814f899e2dac8eecd67e57a9d6d08018cbcc356665c0a7b7d48780c666a197L70' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594007</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 4c4f69b150bc1f7103f31aea8ceade1f36081a7e</div><div id='time'> Time: 2021-08-16</div><div id='author'> Author: artex.xh@gmail.com</div><div id='file'> File Name: jina/math/distance.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: cosine(3)</div><div id='n_method'> N Method Name: cosine(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: jina/math/distance.py</div><div id='n_file'> N File Name: jina/math/distance.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        R = np.r_[R1, R2]

        D1 = np.c_[np.dot(self.K1, self.K1) + self.reg * I, Z]
        D2 = np.c_[Z, <a id="change">np.dot(</a>self.K2, self.K2<a id="change">)</a> + self.reg * I]
        D = 0.5 * np.r_[D1, D2]
        &#47&#47 http://www.squobble.com/academic/kcca_wiener/node4.html
        return R, D</code></pre><h3>After Change</h3><pre><code class='java'>
        R = np.r_[R1, R2]

        D1 = np.c_[(1-self.c)*np.dot(self.K1, self.K1) + self.c * I, Z]
        D2 = np.c_[Z, (<a id="change">1-self.c)*np.dot(self.K2, self.K2) + </a>self.c * I]
        D = 0.5 * np.r_[D1, D2]
        return R, D
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/4ec7c98b7e869f80e9bd9cbe3253f0a6d0b12dda#diff-f6c91d6f4db4d0c4a9395520d52c50d065a2c3bfbc27d1202cb0e556a2f824d0L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594006</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: 4ec7c98b7e869f80e9bd9cbe3253f0a6d0b12dda</div><div id='time'> Time: 2020-10-22</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/KCCA.py</div><div id='m_class'> M Class Name: KCCA</div><div id='n_method'> N Class Name: KCCA</div><div id='m_method'> M Method Name: hardoon_method(1)</div><div id='n_method'> N Method Name: hardoon_method(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cca_zoo/KCCA.py</div><div id='n_file'> N File Name: cca_zoo/KCCA.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    x = x.reshape(shape=(-1, self.num_heads * self.head_size))

    &#47&#47 run multi head attention (bs, T, num_heads, head_size)
    query, key, value = [<a id="change">x.dot(</a>y<a id="change">)</a> \
      .reshape(shape=(bs, -1, self.num_heads, self.head_size)) \
      for y in [self.query_dense, self.key_dense, self.value_dense]]
</code></pre><h3>After Change</h3><pre><code class='java'>
    x = inputs + attention.reshape(shape=(-1, self.num_heads * self.head_size)).dot(self.final)
    print(x.shape)
    &#47&#47 layernorm
    x = x<a id="change"> + </a><a id="change">x.dot(</a>self.ff1<a id="change">)</a>.relu().dot(self.ff2)
    print(x.shape)
    &#47&#47 layernorm
    return x.reshape(shape=(bs, -1, self.num_heads * self.head_size))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/a361ef6861ead653fd014b395119e306d06cc7ba#diff-43760dfb5c3bab72da19051bc8473cc4a86b5b12ccc0e699c256eb599eb3c42bL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594024</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: a361ef6861ead653fd014b395119e306d06cc7ba</div><div id='time'> Time: 2020-12-27</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: examples/transformer.py</div><div id='m_class'> M Class Name: TransformerBlock</div><div id='n_method'> N Class Name: TransformerBlock</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/transformer.py</div><div id='n_file'> N File Name: examples/transformer.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            nddss = []
            ndcss = []
            nf = ds_orig.nfeatures
            ds_orig_Rref = <a id="change">np.dot(</a>ds_orig.samples, Rs[ref_ds]<a id="change">)</a>
            zscore(ds_orig_Rref, chunks_attr=None)
            for ds_back in dss_clean_back:
                ndcs = np.diag(np.corrcoef(ds_back.samples.T[:nf, ],
                                           ds_orig_Rref.T)[nf:, :nf], k=0)</code></pre><h3>After Change</h3><pre><code class='java'>
            nddss = []
            ndcss = []
            nf = ds_orig.nfeatures
            ds_orig_Rref = <a id="change">np.dot(</a>ds_orig.samples, Rs[ref_ds]<a id="change">) * </a>np.sign(dss_rotated_clean[ref_ds].a.random_scale)
            zscore(ds_orig_Rref, chunks_attr=None)
            for ds_back in dss_clean_back:
                ndcs = np.diag(np.corrcoef(ds_back.samples.T[:nf, ],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/5d9fa57fe8ed36a394291ca482eecaa0a958acb4#diff-85d4738466be8019b3165ec46442c79e454289666ae1b44d2a7b5127c94c418dL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97594012</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 5d9fa57fe8ed36a394291ca482eecaa0a958acb4</div><div id='time'> Time: 2016-03-10</div><div id='author'> Author: swaroopgj@gmail.com</div><div id='file'> File Name: mvpa2/tests/test_searchlight_hyperalignment.py</div><div id='m_class'> M Class Name: SearchlightHyperalignmentTests</div><div id='n_method'> N Class Name: SearchlightHyperalignmentTests</div><div id='m_method'> M Method Name: test_hyperalignment_measure(1)</div><div id='n_method'> N Method Name: test_hyperalignment_measure(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: mvpa2/tests/test_searchlight_hyperalignment.py</div><div id='n_file'> N File Name: mvpa2/tests/test_searchlight_hyperalignment.py</div><div id='m_start'> M Start Line: 104</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 104</div><BR>