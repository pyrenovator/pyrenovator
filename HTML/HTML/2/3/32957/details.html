<html><h3>Pattern ID :32957
</h3><img src='95441232.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                        f"A task (_id: {_id}) is not being trained by this Trainer. Ignore this message if it is being trained by others."
                    )
                    is_prn = True
                <a id="change">time.sleep(10</a><a id="change">)</a>

        for rec in recs:
            rec.set_tags(**{self.STATUS_KEY: self.STATUS_END})
        return recs</code></pre><h3>After Change</h3><pre><code class='java'>
            **kwargs,
        )

        <a id="change">TaskManager(task_pool=task_pool).wait(query=query)</a>

        for rec in recs:
            rec.set_tags(**{self.STATUS_KEY: self.STATUS_END})
        return recs</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/ca0363ded804ad97d21d2d151ef823df9336a7c5#diff-f95982deac2c310fee025cc499f4ceeb6a16abdecd552a2fd7164120abca0ac9L474' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95441232</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: ca0363ded804ad97d21d2d151ef823df9336a7c5</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: lzh222333@163.com</div><div id='file'> File Name: qlib/model/trainer.py</div><div id='m_class'> M Class Name: DelayTrainerRM</div><div id='n_method'> N Class Name: DelayTrainerRM</div><div id='m_method'> M Method Name: end_train(4)</div><div id='n_method'> N Method Name: end_train(4)</div><div id='m_parent_class'> M Parent Class: TrainerRM</div><div id='n_parent_class'> N Parent Class: TrainerRM</div><div id='m_file'> M File Name: qlib/model/trainer.py</div><div id='n_file'> N File Name: qlib/model/trainer.py</div><div id='m_start'> M Start Line: 478</div><div id='m_end'> M End Line: 504</div><div id='n_start'> N Start Line: 474</div><div id='n_end'> N End Line: 488</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    )
            elif connection is None:
                &#47&#47 give control back to async event loop so connection resetting can be completed; then retry
                await <a id="change">asyncio.sleep(0</a><a id="change">)</a>
                return await self._get_next_connection(num_retries=num_retries - 1)
        except IndexError:
            &#47&#47 This can happen as a race condition while _removing_ connections
            self._rr_counter = 0</code></pre><h3>After Change</h3><pre><code class='java'>
                )
                try:
                    await asyncio.wait_for(
                        <a id="change">self._destroyed_event.wait()</a>,
                        timeout=GRACE_PERIOD_DESTROY_CONNECTION,
                    )
                finally:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/6ba1d165a2aad8e863006be69c813b5cac3d8a21#diff-938a3eacfdee110358adf036fce321fa64d4f252c67bbc67ba35cac0d9e24473L144' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95441233</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 6ba1d165a2aad8e863006be69c813b5cac3d8a21</div><div id='time'> Time: 2022-07-19</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/networking.py</div><div id='m_class'> M Class Name: ReplicaList</div><div id='n_method'> N Class Name: ReplicaList</div><div id='m_method'> M Method Name: _get_next_connection(2)</div><div id='n_method'> N Method Name: _get_next_connection(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: jina/serve/networking.py</div><div id='n_file'> N File Name: jina/serve/networking.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 166</div><div id='n_start'> N Start Line: 174</div><div id='n_end'> N End Line: 184</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        f"A task (_id: {_id}) is not being trained by this Trainer. Ignore this message if it is being trained by others."
                    )
                    is_prn = True
                <a id="change">time.sleep(10</a><a id="change">)</a>

        recs = []
        for _id in _id_list:
            rec = tm.re_query(_id)["res"]</code></pre><h3>After Change</h3><pre><code class='java'>
            **kwargs,
        )

        <a id="change">tm.wait(query=query)</a>

        recs = []
        for _id in _id_list:
            rec = tm.re_query(_id)["res"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/ca0363ded804ad97d21d2d151ef823df9336a7c5#diff-f95982deac2c310fee025cc499f4ceeb6a16abdecd552a2fd7164120abca0ac9L300' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95441234</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: ca0363ded804ad97d21d2d151ef823df9336a7c5</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: lzh222333@163.com</div><div id='file'> File Name: qlib/model/trainer.py</div><div id='m_class'> M Class Name: TrainerRM</div><div id='n_method'> N Class Name: TrainerRM</div><div id='m_method'> M Method Name: train(6)</div><div id='n_method'> N Method Name: train(6)</div><div id='m_parent_class'> M Parent Class: Trainer</div><div id='n_parent_class'> N Parent Class: Trainer</div><div id='m_file'> M File Name: qlib/model/trainer.py</div><div id='n_file'> N File Name: qlib/model/trainer.py</div><div id='m_start'> M Start Line: 337</div><div id='m_end'> M End Line: 360</div><div id='n_start'> N Start Line: 340</div><div id='n_end'> N End Line: 359</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    i.wait()

        &#47&#47 Last one waits
        <a id="change">time.sleep(3</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>

        for sent_request_objects in self.async_fwd_objects.values():
            for i in sent_request_objects:
                <a id="change">i.wait()</a>

        self.async_bwd_objects.clear()
        self.async_fwd_objects.clear()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/saareliad/ftpipe/commit/55224ec831718fea95aaf8e91b7137e31f3ae44a#diff-7c434877ab06e18f4d24d46965cb7290469b19353b833dab57b4df223a55ee53L191' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95441235</div><div id='project'> Project Name: saareliad/ftpipe</div><div id='commit'> Commit Name: 55224ec831718fea95aaf8e91b7137e31f3ae44a</div><div id='time'> Time: 2019-12-01</div><div id='author'> Author: saareliad@campus.technion.ac.il</div><div id='file'> File Name: communication/msnag_runtime.py</div><div id='m_class'> M Class Name: SinglePartitionRuntime</div><div id='n_method'> N Class Name: SinglePartitionRuntime</div><div id='m_method'> M Method Name: run_until_flush(2)</div><div id='n_method'> N Method Name: run_until_flush(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: communication/msnag_runtime.py</div><div id='n_file'> N File Name: communication/msnag_runtime.py</div><div id='m_start'> M Start Line: 198</div><div id='m_end'> M End Line: 230</div><div id='n_start'> N Start Line: 223</div><div id='n_end'> N End Line: 269</div><BR>