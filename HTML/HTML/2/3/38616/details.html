<html><h3>Pattern ID :38616
</h3><img src='110426710.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                       use_sentence_type=False,
                                       use_word_boundaries=False,
                                       use_explicit_eos=False)
        self.phone2mel = <a id="change">Transformer(idim=131, odim=80, spk_embed_dim=None)</a>
        self.mel2wav = MelGANGenerator()

    def __call__(self, text):
        phones = self.text2phone.string_to_tensor(text).squeeze(0).long()</code></pre><h3>After Change</h3><pre><code class='java'>
                                       use_sentence_type=False,
                                       use_word_boundaries=False,
                                       use_explicit_eos=False)
        self.phone2mel = <a id="change">Transformer(idim=131, odim=80, spk_embed_dim=None)</a>.to(torch.device(device))
        self.mel2wav = MelGANGenerator().to(torch.device(device))
        <a id="change">self.phone2mel.eval()</a>
        self.mel2wav.eval()
        self.to(torch.device(device))

    def forward(self, text):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/2d25ca1658f38a35d3c8bff5819dae14763ceb68#diff-4e21a124748095aa39999118e5d8d58975ffd545ccefc0d55013b9adbe66aeaeL308' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110426710</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: 2d25ca1658f38a35d3c8bff5819dae14763ceb68</div><div id='time'> Time: 2021-03-18</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: InferenceInterfaces/EnglishSingleSpeakerTransformerTTSInference.py</div><div id='m_class'> M Class Name: EnglishSingleSpeakerTransformerTTSInference</div><div id='n_method'> N Class Name: EnglishSingleSpeakerTransformerTTSInference</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: InferenceInterfaces/EnglishSingleSpeakerTransformerTTSInference.py</div><div id='n_file'> N File Name: InferenceInterfaces/EnglishSingleSpeakerTransformerTTSInference.py</div><div id='m_start'> M Start Line: 308</div><div id='m_end'> M End Line: 315</div><div id='n_start'> N Start Line: 308</div><div id='n_end'> N End Line: 320</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def test_transformer_output_shape():
    model = <a id="change">Transformer(layers=2, pad_idx=0, words=80, seq_len=100, heads=2,
                        dims=16, rate=4, bidirectional=False)</a>

    x, past = model(torch.randint(80, (10,)))
    assert x.shape == (10, 80)
    for p in past:</code></pre><h3>After Change</h3><pre><code class='java'>


def test_transformer_output_shape():
    model = <a id="change">Transformer(layers=2, pad_idx=0, words=80, seq_len=100, heads=2,
                        dims=16, rate=4, bidirectional=False).eval()</a>

    x, past = model(torch.randint(80, (10,)))
    assert x.shape == (10, 80)
    for p in past:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/affjljoo3581/gpt2/commit/cf7388417386beaf3c104f2e3c48ba86630f3681#diff-a2664e2833debb4ad54d32238a3a8315a9e47ed62e7c95d58b01311b4ac39d63L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110426711</div><div id='project'> Project Name: affjljoo3581/gpt2</div><div id='commit'> Commit Name: cf7388417386beaf3c104f2e3c48ba86630f3681</div><div id='time'> Time: 2020-09-11</div><div id='author'> Author: affjljoo3581@gmail.com</div><div id='file'> File Name: tests/modeling/test_transformer.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_transformer_output_shape(0)</div><div id='n_method'> N Method Name: test_transformer_output_shape(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/modeling/test_transformer.py</div><div id='n_file'> N File Name: tests/modeling/test_transformer.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 36</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def test_transformer_generating_sequence():
    model = <a id="change">Transformer(layers=2, pad_idx=0, words=80, seq_len=100, heads=2,
                        dims=16, rate=4, bidirectional=False)</a>

    past = None
    for _ in range(10):
        x, past = model(torch.randint(80, (1,)), past=past)</code></pre><h3>After Change</h3><pre><code class='java'>


def test_transformer_generating_sequence():
    model = <a id="change">Transformer(layers=2, pad_idx=0, words=80, seq_len=100, heads=2,
                        dims=16, rate=4, bidirectional=False).eval()</a>

    past = None
    for _ in range(10):
        x, past = model(torch.randint(80, (1,)), past=past)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/affjljoo3581/gpt2/commit/cf7388417386beaf3c104f2e3c48ba86630f3681#diff-a2664e2833debb4ad54d32238a3a8315a9e47ed62e7c95d58b01311b4ac39d63L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110426712</div><div id='project'> Project Name: affjljoo3581/gpt2</div><div id='commit'> Commit Name: cf7388417386beaf3c104f2e3c48ba86630f3681</div><div id='time'> Time: 2020-09-11</div><div id='author'> Author: affjljoo3581@gmail.com</div><div id='file'> File Name: tests/modeling/test_transformer.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_transformer_generating_sequence(0)</div><div id='n_method'> N Method Name: test_transformer_generating_sequence(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/modeling/test_transformer.py</div><div id='n_file'> N File Name: tests/modeling/test_transformer.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 61</div><BR>