<html><h3>Pattern ID :22262
</h3><img src='70233839.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    display_data.append([feature, len(new_category_values), new_categories_ratio,
                                        list(sorted_new_categories.keys())[:self.max_new_categories_to_show]])
            else:
                new_categories[feature]<a id="change"> = </a><a id="change">{}</a>

        &#47&#47 Display
        if display_data:
            display = pd.DataFrame(data=display_data,</code></pre><h3>After Change</h3><pre><code class='java'>
            display[&quotNumber of new categories&quot] = display[&quotNumber of new categories&quot].apply(format_number)
            display[&quotNew categories examples&quot] = display[&quotNew categories in column&quot]. \
                apply(lambda x: x[:self.max_new_categories_to_show])
            <a id="change">display.drop(</a>&quotNew categories in column&quot<a id="change">, axis=1, inplace=True)</a>
            display = display.iloc[:self.max_features_to_show, :]
        else:
            display = None
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/0f96dcc7ceafdb87c80e0f325d570993874e1ff3#diff-e053fa8aecccab48e1808c642a3880dc01bf8de35e621f569c08b9150d91c2acL75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70233839</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 0f96dcc7ceafdb87c80e0f325d570993874e1ff3</div><div id='time'> Time: 2022-08-30</div><div id='author'> Author: 67195469+Nadav-Barak@users.noreply.github.com</div><div id='file'> File Name: deepchecks/tabular/checks/train_test_validation/category_mismatch_train_test.py</div><div id='m_class'> M Class Name: CategoryMismatchTrainTest</div><div id='n_method'> N Class Name: CategoryMismatchTrainTest</div><div id='m_method'> M Method Name: run_logic(2)</div><div id='n_method'> N Method Name: run_logic(2)</div><div id='m_parent_class'> M Parent Class: ReduceFeatureMixin,TrainTestCheck</div><div id='n_parent_class'> N Parent Class: TrainTestCheck,ReduceMixin</div><div id='m_file'> M File Name: deepchecks/tabular/checks/train_test_validation/category_mismatch_train_test.py</div><div id='n_file'> N File Name: deepchecks/tabular/checks/train_test_validation/category_mismatch_train_test.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        meta_data.append(group.values[:, :2]) &#47&#47 save unique_id and ds
        ts_data.append(group.values[:, 2:]) &#47&#47 avoid unique_id and ds

    s_data<a id="change"> = </a><a id="change">[]</a>
    for idx, group in S:
        s_data.append(group.iloc[:, 1:].values) &#47&#47 avoid unique_id
        assert len(s_data[-1])==1, &quotCheck repetitions of unique_ids&quot
</code></pre><h3>After Change</h3><pre><code class='java'>

    if S[&quotunique_id&quot].value_counts().max() &gt; 1:
        raise ValueError(&quotFound duplicated unique_ids in S_df&quot)
    s_data = <a id="change">S.drop(columns=&quotunique_id&quot)</a>.values

    del S, Y, X, M, G
    gc.collect()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/239b39524453056071018ee1e3d10b1799e60c4c#diff-b6f244e4e9c53c9e9686b904e2becb0d34c3e810c6d9610bc9fca985aae7aa23L225' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70233834</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: 239b39524453056071018ee1e3d10b1799e60c4c</div><div id='time'> Time: 2021-06-03</div><div id='author'> Author: jmorales@grupoabraxas.com</div><div id='file'> File Name: nixtla/data/tsdataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _df_to_lists(5)</div><div id='n_method'> N Method Name: _df_to_lists(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nixtla/data/tsdataset.py</div><div id='n_file'> N File Name: nixtla/data/tsdataset.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 308</div><div id='n_start'> N Start Line: 285</div><div id='n_end'> N End Line: 306</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    df_metadata = row.explode("path", ignore_index=True)
    df_metadata["filename"] = data_names

    label_map<a id="change"> = </a><a id="change">{</a>0: &quotnucleoplasm&quot, 1: "nuclear membrane", 2: "nucleoli",
                 3: "nucleoli", 4: "nuclear speckles", 5: "nuclear bodies",
                 6: "er", 7: "golgi",
                 8: "intermediate filaments", 9: "actin", 10: "microtubules",
                 11: "mitotic spindle", 12: "centrosome", 13: "cell membrane", 14: "mitochondria",
                 15: "aggresome", 16: "cell body", 17: "vesicles", 18: None<a id="change">}</a>

    df_labels = pd.read_csv(f"{data_dir}{dir_name}/train.csv")

    def get_multi_label(x):</code></pre><h3>After Change</h3><pre><code class='java'>

    row.cell_component = &quotnucleus|actin&quot
    row.channels = "f_nucleus|f_actin|f_mitosis"
    <a id="change">row.drop(columns=["phenotype"], inplace=True)</a>

    row.at[row.index[0], "path"] = data_paths
    df_metadata = row.explode("path", ignore_index=True)
    df_metadata["filename"] = data_names</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stan-hua/cytoimagenet/commit/6b4bbf9a005743f2722633889ccc24e2eedd620e#diff-e875c715dad53b6b2511681a9b32c1649c04fc6ce068daf284876baf942376ceL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70233818</div><div id='project'> Project Name: stan-hua/cytoimagenet</div><div id='commit'> Commit Name: 6b4bbf9a005743f2722633889ccc24e2eedd620e</div><div id='time'> Time: 2021-06-30</div><div id='author'> Author: stanley.hua@mail.utoronto.ca</div><div id='file'> File Name: scripts/clean_metadata.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: create_metadata(1)</div><div id='n_method'> N Method Name: create_metadata(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/clean_metadata.py</div><div id='n_file'> N File Name: scripts/clean_metadata.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 68</div><BR>