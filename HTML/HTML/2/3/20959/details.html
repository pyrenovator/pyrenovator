<html><h3>Pattern ID :20959
</h3><img src='67540148.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    new_z_matrix = np.zeros(rule_matches_z.shape)
    for index, sample in enumerate(rule_matches_z):
        neighbors<a id="change"> = </a><a id="change">indices[index].astype(</a>int<a id="change">)</a>
        neighborhood_z = rule_matches_z[neighbors, :]

        activated_lfs = neighborhood_z.sum(axis=0)  &#47&#47 Add all lf activations
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 check out the amount of new matches
    logger.info(f"Match increase: {new_z_matrix.sum() / rule_matches_z.sum() * 100 - 100:.2f}%")
    
    if <a id="change">isinstance(</a>new_z_matrix, ss.lil_matrix<a id="change">)</a>:
        return new_z_matrix.tocsr()
    else:
        return new_z_matrix</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/knodle/knodle/commit/5218b53c52c6e69dc1c6576766b7c540822a4298#diff-a1512f04d24917bc097e65581d4540bdcd5bd60ceb8b78d2b03b56376b717192L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67540148</div><div id='project'> Project Name: knodle/knodle</div><div id='commit'> Commit Name: 5218b53c52c6e69dc1c6576766b7c540822a4298</div><div id='time'> Time: 2021-03-10</div><div id='author'> Author: 19635192+marina-sp@users.noreply.github.com</div><div id='file'> File Name: knodle/trainer/utils/denoise.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: activate_neighbors(2)</div><div id='n_method'> N Method Name: activate_neighbors(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: knodle/trainer/utils/denoise.py</div><div id='n_file'> N File Name: knodle/trainer/utils/denoise.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    vals = gdf[name].copy(deep=False)
    if value is None:
        value = cudf.DataFrame({name: [None]})
        value[name]<a id="change"> = </a><a id="change">value[name].astype(</a>vals.dtype<a id="change">)</a>
        value.index.name = "labels"
        value.reset_index(drop=False, inplace=True)

    if freq_threshold &gt; 0:</code></pre><h3>After Change</h3><pre><code class='java'>
def _encode(name, storage_name, path, gdf, cat_cache, na_sentinel=-1, freq_threshold=0):
    value = None
    selection_l = name if isinstance(name, list) else [name]
    selection_r = name if <a id="change">isinstance(</a>name, list<a id="change">)</a> else [storage_name]
    if path:
        if cat_cache is not None:
            cat_cache = (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nvidia/nvtabular/commit/6750183d3eb56bc6ec3e7e4ea579102c27f2e7b8#diff-38ad65fee4bef798cbe103ce6763c1b029400d6c823182e24e316ca1b55a5c8cL299' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67540146</div><div id='project'> Project Name: nvidia/nvtabular</div><div id='commit'> Commit Name: 6750183d3eb56bc6ec3e7e4ea579102c27f2e7b8</div><div id='time'> Time: 2020-08-17</div><div id='author'> Author: rzamora217@gmail.com</div><div id='file'> File Name: nvtabular/categorify.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _encode(7)</div><div id='n_method'> N Method Name: _encode(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nvtabular/categorify.py</div><div id='n_file'> N File Name: nvtabular/categorify.py</div><div id='m_start'> M Start Line: 300</div><div id='m_end'> M End Line: 329</div><div id='n_start'> N Start Line: 380</div><div id='n_end'> N End Line: 419</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        np.random.shuffle(dataset)
        length = len(dataset)
        prop = [1.0 / self.client_num for _ in range(self.client_num)]
        prop<a id="change"> = </a><a id="change">(np.cumsum(prop) * length).astype(</a>int<a id="change">)</a>[:-1]
        data_list = np.split(dataset, prop)
        data_list = [x.tolist() for x in data_list]
        return data_list</code></pre><h3>After Change</h3><pre><code class='java'>
        index = [x for x in range(length)]
        np.random.shuffle(index)
        idx_slice = np.split_array(dataset, self.client_num)
        if <a id="change">isinstance(</a>dataset, Dataset<a id="change">)</a>:
            data_list = [Subset(dataset, idxs) for idxs in idx_slice]
        else:
            data_list = [[dataset[idx] for idx in idxs] for idxs in idx_slice]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/federatedscope/commit/a8049e064eba8c6110681bd35d20d0e50c3f5110#diff-da0d16d1cd0fad47eac862259384b4b08e04b48981a8b6eead6fad8fe3b73d81L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67540144</div><div id='project'> Project Name: alibaba/federatedscope</div><div id='commit'> Commit Name: a8049e064eba8c6110681bd35d20d0e50c3f5110</div><div id='time'> Time: 2022-12-06</div><div id='author'> Author: 18007356109@163.com</div><div id='file'> File Name: federatedscope/core/splitters/generic/iid_splitter.py</div><div id='m_class'> M Class Name: IIDSplitter</div><div id='n_method'> N Class Name: IIDSplitter</div><div id='m_method'> M Method Name: __call__(3)</div><div id='n_method'> N Method Name: __call__(3)</div><div id='m_parent_class'> M Parent Class: BaseSplitter</div><div id='n_parent_class'> N Parent Class: BaseSplitter</div><div id='m_file'> M File Name: federatedscope/core/splitters/generic/iid_splitter.py</div><div id='n_file'> N File Name: federatedscope/core/splitters/generic/iid_splitter.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 23</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 27</div><BR>