<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 sync and inform
        self.wait_for_everyone()
        <a id="change">self.print(f"Loaded model"</a><a id="change">)</a>

        return loaded_obj

    &#47&#47 model functionality</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 unwrap the model when loading from checkpoint
        self.accelerator.unwrap_model(self.diffusion_prior).load_state_dict(loaded_obj[&quotmodel&quot], strict = strict)
        self.step.copy_(torch.ones_like(self.step, device=self.device) * <a id="change">loaded_obj[&quotstep&quot].to(</a>self.device<a id="change">)</a>)
        self.optimizer.load_state_dict(loaded_obj[&quotoptimizer&quot])

        &#47&#47 set warmupstep</code></pre>