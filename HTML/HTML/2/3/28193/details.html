<html><h3>Pattern ID :28193
</h3><img src='83245334.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    fncs_list = [_arguments_dataset, _arguments_dnn, _arguments_evaluation]
    workflow_list = [create_dataset, optimize_dnn, evaluate_captions]

    the_args = <a id="change">list(</a><a id="change">chain.from_iterable(</a>[
        i[0]() for i in zip(fncs_list, workflow_list) if i[1]]<a id="change">))</a>

    the_args.extend(_arguments_default())

    arg_parser = ArgumentParser()</code></pre><h3>After Change</h3><pre><code class='java'>
          &quothelp&quot: &quotDirectory that holds the settings file (default: `settings`).&quot}],
        &#47&#47 ---------------------------------
        [[&quot--file-ext&quot, &quot-e&quot],
         <a id="change">{</a>&quottype&quot: str, &quotdefault&quot: &quotyaml&quot,
          &quothelp&quot: &quotExtension of the settings file (default: `yaml`).&quot<a id="change">}</a>],
        &#47&#47 ---------------------------------
        [[&quot--verbose&quot, &quot-v&quot],
         {&quotdefault&quot: False, &quotaction&quot: &quotstore_true&quot,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/audio-captioning/dcase-2020-baseline/commit/79c80305a532221a0814c174eff43a0b08880ade#diff-50224bdf46132454d48ec81477dcbd9b90f0f413ae0509ff8f29dc15fdec60c9L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83245334</div><div id='project'> Project Name: audio-captioning/dcase-2020-baseline</div><div id='commit'> Commit Name: 79c80305a532221a0814c174eff43a0b08880ade</div><div id='time'> Time: 2020-02-26</div><div id='author'> Author: kostas.drosos@icloud.com</div><div id='file'> File Name: tools/argument_parsing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_argument_parser(0)</div><div id='n_method'> N Method Name: get_argument_parser(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tools/argument_parsing.py</div><div id='n_file'> N File Name: tools/argument_parsing.py</div><div id='m_start'> M Start Line: 96</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 34</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            emb = embedding_dict[embedding_name](X[:, lookup_idx[0]:lookup_idx[1]].long())
            group_embedding_dict[fc.group_name].append(emb)
    if to_list:
        return <a id="change">list(</a><a id="change">chain.from_iterable(</a>group_embedding_dict.values()<a id="change">))</a>
    return group_embedding_dict


def varlen_embedding_lookup(X, embedding_dict, feature_index, varlen_sparse_feature_columns):</code></pre><h3>After Change</h3><pre><code class='java'>
        return_feat_list_flat = return_feat_list

    &#47&#47 对满足筛选条件的过embedding
    embedding_vec_dict = <a id="change">{}</a>
    for fc in sparse_feature_columns:
        feature_name = fc.name
        if feature_name in return_feat_list_flat:
            lookup_idx = np.array(feature_index[feature_name])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/rec4torch/commit/17a7e83039863c750d6142e4a8f40412c5b8ab1a#diff-814aa7f3cca5d8707dd6877dfe5b1b02fb08e903477edd878fd2a52b05a0f9a9L164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83245330</div><div id='project'> Project Name: tongjilibo/rec4torch</div><div id='commit'> Commit Name: 17a7e83039863c750d6142e4a8f40412c5b8ab1a</div><div id='time'> Time: 2022-10-02</div><div id='author'> Author: tongjilibo@163.com</div><div id='file'> File Name: rec4torch/inputs.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: embedding_lookup(5)</div><div id='n_method'> N Method Name: embedding_lookup(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rec4torch/inputs.py</div><div id='n_file'> N File Name: rec4torch/inputs.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 179</div><div id='n_start'> N Start Line: 171</div><div id='n_end'> N End Line: 196</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        embeddings = flash.Trainer(**trainer_kwargs).predict(
            model, datamodule=datamodule
        )
        embeddings = <a id="change">list(</a><a id="change">itertools.chain.from_iterable(</a>embeddings<a id="change">))</a>

        if embeddings_field is not None:
            samples.set_values(embeddings_field, embeddings)
            return</code></pre><h3>After Change</h3><pre><code class='java'>
    embeddings = flash.Trainer(**trainer_kwargs).predict(
        model, datamodule=datamodule
    )
    embeddings = np.stack(sum(embeddings, <a id="change">[]</a>))

    if embeddings_field is not None:
        samples.set_values(embeddings_field, embeddings)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/40eac2db31371c61bffbe4a1114f386a864b9d73#diff-d9524cb62d5281557a9647f79dc8fbf43c41caabe546f9772fb075e0fddfa080L95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83245328</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 40eac2db31371c61bffbe4a1114f386a864b9d73</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: ehofesmann@gmail.com</div><div id='file'> File Name: fiftyone/utils/flash.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_flash_embeddings(5)</div><div id='n_method'> N Method Name: compute_flash_embeddings(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fiftyone/utils/flash.py</div><div id='n_file'> N File Name: fiftyone/utils/flash.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 163</div><div id='n_start'> N Start Line: 138</div><div id='n_end'> N End Line: 154</div><BR>