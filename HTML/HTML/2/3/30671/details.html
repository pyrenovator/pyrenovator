<html><h3>Pattern ID :30671
</h3><img src='90493757.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred = <a id="change">pred.loc[:, ["user_id", "item_id"]].sort_values("user_id"</a><a id="change">)</a>.reset_index(drop=True)
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/af83229f4f08642d7822f0d7395dd27ccba9aaf2#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90493757</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: af83229f4f08642d7822f0d7395dd27ccba9aaf2</div><div id='time'> Time: 2020-10-13</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred = <a id="change">pred.loc[:, ["user_id", "item_id"]].sort_values("user_id"</a><a id="change">)</a>.reset_index(drop=True)
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/9405dd1ebbc8691fd238984b6d1862fcc0f86c3e#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90493758</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 9405dd1ebbc8691fd238984b6d1862fcc0f86c3e</div><div id='time'> Time: 2020-09-15</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                 (_df[&quotRegion&quot] == region)]
    if len(result) == 0:
        return None
    <a id="change">assert </a>len(set(result[&quotInstanceType&quot])) == 1, (result, acc_name, acc_count,
                                                   region)
    return result.iloc[0][&quotInstanceType&quot]
</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 1x T4, which we pick the cheapest. For other cases, throw
            &#47&#47 exceptions to manually investigate.
            assert t.startswith(&quotg4dn&quot), result
    <a id="change">result.sort_values(&quotPrice&quot</a><a id="change">, ascending=True, inplace=True)</a>
    return result.iloc[0][&quotInstanceType&quot]


def list_accelerators(gpus_only: bool) -&gt; Dict[str, List[int]]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/skypilot-org/skypilot/commit/007be38f3df3e5877ad537820c83fb693dd2246e#diff-06fc40224bd64c78f54687bd98f3b8fb678222fa00bfb3af997577f51e4e83ffL52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90493759</div><div id='project'> Project Name: skypilot-org/skypilot</div><div id='commit'> Commit Name: 007be38f3df3e5877ad537820c83fb693dd2246e</div><div id='time'> Time: 2021-11-29</div><div id='author'> Author: lsf@berkeley.edu</div><div id='file'> File Name: prototype/sky/clouds/service_catalog/aws_catalog.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_instance_type_for_accelerator(3)</div><div id='n_method'> N Method Name: get_instance_type_for_accelerator(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: prototype/sky/clouds/service_catalog/aws_catalog.py</div><div id='n_file'> N File Name: prototype/sky/clouds/service_catalog/aws_catalog.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 64</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 68</div><BR>