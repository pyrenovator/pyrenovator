<html><h3>Pattern ID :10664
</h3><img src='36884851.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    dataset = MNIST(root=&quot./data&quot, download=True)
    DATA_SPLIT = [50000, 10000]
    train_data, test_data = random_split(dataset.data.float().unsqueeze(dim=1), DATA_SPLIT)
    train_label<a id="change">, test_label</a> = random_split(dataset.targets, DATA_SPLIT)
    train_loader = DataLoader(dataset=MNISTDataset(train_data, train_label),
                              batch_size=100,
                              num_workers=4)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Load data
    TRAIN_SIZE, TEST_SIZE = 50000, 10000
    dataset = MNIST(root=&quot./data&quot, download=True)
    random_indices<a id="change"> = </a><a id="change">torch.randperm(</a>60000<a id="change">)</a>
    BATCH_SIZE = 100
    train_loader = DataLoader(
        dataset=TensorDataset(
            dataset.data.index_select(dim=0, index=random_indices[:TRAIN_SIZE]),</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/riroaki/capsnet/commit/408b1e77f4e40589def9c313c0b11beaa88f2108#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36884851</div><div id='project'> Project Name: riroaki/capsnet</div><div id='commit'> Commit Name: 408b1e77f4e40589def9c313c0b11beaa88f2108</div><div id='time'> Time: 2020-03-08</div><div id='author'> Author: aki@akideMacBook-Pro.local</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def main(args):
    pyro.set_rng_seed(args.seed)

    x<a id="change">, y</a> = get_tf_data()
    print("xy", x.shape, y.shape)

</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Choose an initial batch.
    complete_size = len(complete_experiment["response"])
    complete_ids<a id="change"> = </a><a id="change">torch.randperm(</a>complete_size<a id="change">)</a>[: args.sequences_per_batch]
    experiment = {k: v[complete_ids] for k, v in complete_experiment.items()}

    &#47&#47 Perform first active learning step.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pyro-ppl/pyroed/commit/30d37de98d72df2a585989fab05eb08b2b071381#diff-e295ae9662512d4db3318e3eb1dd36cc5aca6b2776a8315175a8eb524490d8a5L79' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36884848</div><div id='project'> Project Name: pyro-ppl/pyroed</div><div id='commit'> Commit Name: 30d37de98d72df2a585989fab05eb08b2b071381</div><div id='time'> Time: 2021-10-18</div><div id='author'> Author: fritz.obermeyer@gmail.com</div><div id='file'> File Name: tf8.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tf8.py</div><div id='n_file'> N File Name: tf8.py</div><div id='m_start'> M Start Line: 82</div><div id='m_end'> M End Line: 83</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        evalIndex = indexList[int(n_data*0.6):int(n_data*0.8)]
        testIndex = indexList[int(n_data*0.6):int(n_data*0.8)]

        return trainIndex<a id="change">, evalIndex, testIndex</a>
    
    def get_train_data(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
    def get_idx(self, validation=True):
        ratingsGraph = self.g_1
        n_edges = ratingsGraph.num_edges()
        random_int = <a id="change">th.randperm(</a>n_edges<a id="change">)</a>
        train_idx<a id="change"> = </a>random_int[:int(n_edges*0.6)]
        val_idx = random_int[int(n_edges*0.6):int(n_edges*0.8)]
        test_idx = random_int[int(n_edges*0.6):int(n_edges*0.8)]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bupt-gamma/openhgnn/commit/c659d9bfe018a9cc070bb0fdfd1a41b59760c47f#diff-7dad9e8fd9628012de83015b402ba90d823e8a9c5dfd164cc7df94e686dd73a0L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36884849</div><div id='project'> Project Name: bupt-gamma/openhgnn</div><div id='commit'> Commit Name: c659d9bfe018a9cc070bb0fdfd1a41b59760c47f</div><div id='time'> Time: 2021-09-07</div><div id='author'> Author: 34649403+Theheavens@users.noreply.github.com</div><div id='file'> File Name: openhgnn/dataset/RecommendationDataset.py</div><div id='m_class'> M Class Name: KGCN_Recommendation</div><div id='n_method'> N Class Name: KGCN_Recommendation</div><div id='m_method'> M Method Name: get_idx(2)</div><div id='n_method'> N Method Name: get_idx(2)</div><div id='m_parent_class'> M Parent Class: RecommendationDataset</div><div id='n_parent_class'> N Parent Class: RecommendationDataset</div><div id='m_file'> M File Name: openhgnn/dataset/RecommendationDataset.py</div><div id='n_file'> N File Name: openhgnn/dataset/RecommendationDataset.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 38</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                neighbors_khop.append(k_neighbor)
            return self.features[self.mask][index].unsqueeze(-2), self.labels[self.mask][index], neighbors_khop
        else:
            return self.features[self.mask][index].unsqueeze(-2)<a id="change">, self.labels[self.mask][index], neighbor</a>

    def get_neighbor(self, ids):
        return self.features[self.dst[self.src==ids]].unsqueeze(-2)
    </code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47&#47&#47 TODO temporally set the size of level 2 to 50
            graph_selection = 50
            if ids.shape[0]&gt;graph_selection:
                indices<a id="change"> = </a><a id="change">torch.randperm(</a>ids.shape[0]<a id="change">)</a>[:graph_selection]
                ids = ids[indices]
                neighbor = neighbor[indices]
            ids_khop = ids &#47&#47&#47&#47 temp ids for next level</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wang-chen/lgl/commit/ca4ab26e48d1fff88ed365ef54abe8d0b2529fad#diff-ea12c5c592394dd49a5845a669bea1daa0e81458cd10169755783426f13e72d4L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36884852</div><div id='project'> Project Name: wang-chen/lgl</div><div id='commit'> Commit Name: ca4ab26e48d1fff88ed365ef54abe8d0b2529fad</div><div id='time'> Time: 2021-01-25</div><div id='author'> Author: yuhengq@andrew.cmu.edu</div><div id='file'> File Name: datasets/continuum.py</div><div id='m_class'> M Class Name: Continuum</div><div id='n_method'> N Class Name: Continuum</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: VisionDataset</div><div id='n_parent_class'> N Parent Class: VisionDataset</div><div id='m_file'> M File Name: datasets/continuum.py</div><div id='n_file'> N File Name: datasets/continuum.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 91</div><BR>