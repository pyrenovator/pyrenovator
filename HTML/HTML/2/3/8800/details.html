<html><h3>Pattern ID :8800
</h3><img src='32472057.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def num_available_cores(verbose: int = 0) -&gt; int:
    if "LSB_DJOB_NUMPROC" in os.environ:
        ans<a id="change"> = </a><a id="change">int(</a>os.environ["LSB_DJOB_NUMPROC"]<a id="change">)</a>
        if verbose &gt; 0:
            print(f"LSB_DJOB_NUMPROC is found - extracting availables cores num from it. Available cores = {ans}")
        return ans
</code></pre><h3>After Change</h3><pre><code class='java'>
                print(f"num_available_cores:: spotted affinity which restricts available cores. Returning {ans} cores")
            return ans
        except Exception:
            <a id="change">pass</a>

    ans = os.cpu_count()
    if verbose:
        print(f"num_available_cores:: Returning {ans} cores")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/biomedsciai/fuse-med-ml/commit/df3a7d8ac0c13f49d8b8322ef338f5f592785ca3#diff-32a62da7c661c6e71f4ac7881a45c49659a964850ba94caabf615f1684f90312L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32472057</div><div id='project'> Project Name: biomedsciai/fuse-med-ml</div><div id='commit'> Commit Name: df3a7d8ac0c13f49d8b8322ef338f5f592785ca3</div><div id='time'> Time: 2023-04-03</div><div id='author'> Author: yoelshoshan@gmail.com</div><div id='file'> File Name: fuse/utils/multiprocessing/helpers.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: num_available_cores(1)</div><div id='n_method'> N Method Name: num_available_cores(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fuse/utils/multiprocessing/helpers.py</div><div id='n_file'> N File Name: fuse/utils/multiprocessing/helpers.py</div><div id='m_start'> M Start Line: 8</div><div id='m_end'> M End Line: 14</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 20</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            img = np.array(img).astype(np.uint8)
        else:
            img = img.astype(np.uint8)
        box = [<a id="change">int(</a>point<a id="change">)</a> for point in box]
        if copy:
            img = img.copy()
        img<a id="change"> = </a>cv2.rectangle(img, (box[0], box[1]), (box[2], box[3]), color=color, thickness=thickness,
                            lineType=lineType,
                            shift=shift)
        return img</code></pre><h3>After Change</h3><pre><code class='java'>
                in_format=BoxFormat.XYXY,
                in_source=BoxSource.Numpy):
        if box is not None and len(box) == 0:
            <a id="change">pass</a>
        elif type(box[0]) in [tuple, list, np.ndarray]:
            for b in box:
                img = Box._put_box(img, b, copy, color, thickness, lineType, shift, in_format, in_source)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pooya-mohammadi/deep_utils/commit/8b15f681b386972f4420864506b4b3b37c8f3bc4#diff-3ceb9fa0303b3f44b715ed4c9b696a70081baf0d12eb4c7fc08d14514519f85aL106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32472056</div><div id='project'> Project Name: pooya-mohammadi/deep_utils</div><div id='commit'> Commit Name: 8b15f681b386972f4420864506b4b3b37c8f3bc4</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: practical.ai.programming@gmail.com</div><div id='file'> File Name: deep_utils/utils/box_utils/boxes.py</div><div id='m_class'> M Class Name: Box</div><div id='n_method'> N Class Name: Box</div><div id='m_method'> M Method Name: put_box(9)</div><div id='n_method'> N Method Name: put_box(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deep_utils/utils/box_utils/boxes.py</div><div id='n_file'> N File Name: deep_utils/utils/box_utils/boxes.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 137</div><div id='n_end'> N End Line: 145</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ) -&gt; Dict:
        if self.beta &gt; 1 / 2 or self.beta &lt; 0:
            raise ValueError("the bound of beta is [0, 1/2)")
        client_grad_list<a id="change"> = </a>trimmed_mean(
            raw_client_grad_list, <a id="change">int(</a>self.beta * len(raw_client_grad_list)<a id="change">)</a>
        )
        return base_aggregation_func(self.config, client_grad_list)
</code></pre><h3>After Change</h3><pre><code class='java'>
        base_aggregation_func: Callable = None,
        extra_auxiliary_info: Any = None,
    ) -&gt; Dict:
        <a id="change">pass</a>

    def defend_before_aggregation(
        self,
        raw_client_grad_list: List[Tuple[float, Dict]],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/ac9ef32d8575239a584e8c74971b3b04e1d51529#diff-4fd6c8be244ec5cd813d78f92b0c660361af44fe648c275ec3b5fb6266b1ad5aL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32472053</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: ac9ef32d8575239a584e8c74971b3b04e1d51529</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/security/defense/coordinate_wise_trimmed_mean_defense.py</div><div id='m_class'> M Class Name: CoordinateWiseTrimmedMeanDefense</div><div id='n_method'> N Class Name: CoordinateWiseTrimmedMeanDefense</div><div id='m_method'> M Method Name: run(4)</div><div id='n_method'> N Method Name: run(4)</div><div id='m_parent_class'> M Parent Class: BaseDefenseMethod</div><div id='n_parent_class'> N Parent Class: BaseDefenseMethod</div><div id='m_file'> M File Name: python/fedml/core/security/defense/coordinate_wise_trimmed_mean_defense.py</div><div id='n_file'> N File Name: python/fedml/core/security/defense/coordinate_wise_trimmed_mean_defense.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 29</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 23</div><BR>