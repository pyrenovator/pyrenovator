<html><h3>Pattern ID :38966
</h3><img src='111107663.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return loss

    def predict(self, interaction):
        score<a id="change"> = </a><a id="change">self.forward(</a>interaction<a id="change">)</a>
        return score

    def full_sort_predict(self, interaction):
        user = interaction[self.USER_ID]</code></pre><h3>After Change</h3><pre><code class='java'>
        return loss

    def predict(self, interaction):
        <a id="change">pass</a>

    def full_sort_predict(self, interaction):
        user = interaction[self.USER_ID]
        item_seq = interaction[self.ITEM_SEQ]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/1714ed39db89b102bc46fc23155f92de0d8996bd#diff-c75358951368795c804e85cfd3403059cb14b273d8ac070e32d25a487f0ec31cL107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111107663</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 1714ed39db89b102bc46fc23155f92de0d8996bd</div><div id='time'> Time: 2020-10-15</div><div id='author'> Author: hui.wang@ruc.edu.cn</div><div id='file'> File Name: recbox/model/sequential_recommender/fpmc.py</div><div id='m_class'> M Class Name: FPMC</div><div id='n_method'> N Class Name: FPMC</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: SequentialRecommender</div><div id='n_parent_class'> N Parent Class: SequentialRecommender</div><div id='m_file'> M File Name: recbox/model/sequential_recommender/fpmc.py</div><div id='n_file'> N File Name: recbox/model/sequential_recommender/fpmc.py</div><div id='m_start'> M Start Line: 147</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def predict(self, interaction):
        history_seq = interaction[&quothistory_seq&quot]    &#47&#47 (batch, seq_len)
        item = interaction[self.ITEM_ID]            &#47&#47 (batch, 1 + neg_sample_num)
        seq_emb<a id="change">, item_emb = </a><a id="change">self.forward(</a>history_seq, item<a id="change">)</a>
        scores = torch.matmul(seq_emb, item_emb.transpose(1, 2))     &#47&#47 (batch, seq_len, 1 + neg_sample_num)
        scores = scores[:, -1, :]   &#47&#47 (batch, 1 + neg_sample_num)
        return scores</code></pre><h3>After Change</h3><pre><code class='java'>
        return loss

    def predict(self, interaction):
        <a id="change">pass</a>

    def full_sort_predict(self, interaction):
        pred = self.forward(interaction)
        scores = torch.matmul(pred, self.get_item_lookup_table())</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/839cdbd0699daa051ef673413a664f6f696cee5c#diff-725fd15cda9a727c0ac934547988ebd0f03bfe5c08d768919285a044ef94082bL74' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111107660</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 839cdbd0699daa051ef673413a664f6f696cee5c</div><div id='time'> Time: 2020-08-19</div><div id='author'> Author: houyupeng@ruc.edu.cn</div><div id='file'> File Name: model/sequential_recommender/gru4rec.py</div><div id='m_class'> M Class Name: GRU4Rec</div><div id='n_method'> N Class Name: GRU4Rec</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: SequentialRecommender</div><div id='n_parent_class'> N Parent Class: SequentialRecommender</div><div id='m_file'> M File Name: model/sequential_recommender/gru4rec.py</div><div id='n_file'> N File Name: model/sequential_recommender/gru4rec.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 80</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        batch_size, N, _ = tar_candidate.size()
        &#47&#47 get the prob, dx and dy
        tar_pred_prob<a id="change">, dx, dy, top_m_indices = </a><a id="change">self.forward(</a>feat_in, tar_candidate<a id="change">)</a>

        &#47&#47 select the top M candidate
        index_offset = torch.arange(0, batch_size).view(batch_size, -1).repeat(1, self.M).view(-1)
        top_m_indices = top_m_indices.view(-1) + index_offset * N</code></pre><h3>After Change</h3><pre><code class='java'>
        :param tar_candidate: tar_candidate: the target position candidate (x, y), [batch_size, N, 2]
        :return:
        
        <a id="change">pass</a>


if __name__ == "__main__":
    batch_size = 4</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/henry1iu/tnt-trajectory-predition/commit/5ede0b555e8fa59b52898db84b5e0d7b0758fca0#diff-62f1e94c741c7f9de60de56afd69a4d711a920fcbe44cef948ec2491a6158b3eL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111107666</div><div id='project'> Project Name: henry1iu/tnt-trajectory-predition</div><div id='commit'> Commit Name: 5ede0b555e8fa59b52898db84b5e0d7b0758fca0</div><div id='time'> Time: 2021-04-26</div><div id='author'> Author: liu.jb.henry@gmail.com</div><div id='file'> File Name: core/model/layers/target_prediction.py</div><div id='m_class'> M Class Name: TargetPred</div><div id='n_method'> N Class Name: TargetPred</div><div id='m_method'> M Method Name: inference(3)</div><div id='n_method'> N Method Name: inference(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: core/model/layers/target_prediction.py</div><div id='n_file'> N File Name: core/model/layers/target_prediction.py</div><div id='m_start'> M Start Line: 124</div><div id='m_end'> M End Line: 136</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 117</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                "gt_labels":
            }
        
        out<a id="change"> = </a><a id="change">self.MMDET_model.forward(</a>x<a id="change">)</a>

    def predict_step(self, batch):
        &#47&#47 TODO: implement based on `simple_test`
        pass</code></pre><h3>After Change</h3><pre><code class='java'>
            }
        
        &#47&#47 out = self.MMDET_model.forward(x)
        <a id="change">pass</a>

    def _predict_step(self, batch):
        &#47&#47 TODO: implement based on `simple_test`
        pass</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/krenerd/awesome-modular-pytorch-lightning/commit/58984258490d27c490431cb78ba8191be3dcfbc9#diff-8cb53c229c9ccb52f3a317837760d7eb73285d7c9e416ae829611a1978bdf969L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111107664</div><div id='project'> Project Name: krenerd/awesome-modular-pytorch-lightning</div><div id='commit'> Commit Name: 58984258490d27c490431cb78ba8191be3dcfbc9</div><div id='time'> Time: 2022-07-25</div><div id='author'> Author: 48239275+krenerd@users.noreply.github.com</div><div id='file'> File Name: lightning/vision/mmdetection.py</div><div id='m_class'> M Class Name: MMDetectionTrainer</div><div id='n_method'> N Class Name: MMDetectionTrainer</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: _BaseLightningTrainer</div><div id='n_parent_class'> N Parent Class: _BaseLightningTrainer</div><div id='m_file'> M File Name: lightning/vision/mmdetection.py</div><div id='n_file'> N File Name: lightning/vision/mmdetection.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 49</div><BR>