<html><h3>Pattern ID :8879
</h3><img src='32594513.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.frames_size = frames_size

        &#47&#47 video buffer
        self.video_buffer<a id="change"> = </a><a id="change">{}</a>

        &#47&#47 load video frames into memory and resize
        &#47&#47 self.video2frames = {}
        &#47&#47 for video_path in tqdm(self.video_paths, desc="loading videos"):</code></pre><h3>After Change</h3><pre><code class='java'>
                frames_size (int): the size of frame
                mode (str): captions will not be loaded if mode is test
            
        <a id="change">random.seed(</a>random_seed<a id="change">)</a>
        self.seed = random_seed
        self.video_paths = [i for i in plb.Path(video_dir).glob("*.mp4")]
        self.video_ids = [i.stem for i in self.video_paths]
        self.frames_num = frames_num</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kamino666/video-captioning-transformer/commit/22bb2cb5e650b1857dd2790720a952496c9f0f23#diff-44e6592c534d82d44cb8cae35c7d49bdfafd5bd072fb481b6265e075e8c7be88L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32594513</div><div id='project'> Project Name: kamino666/video-captioning-transformer</div><div id='commit'> Commit Name: 22bb2cb5e650b1857dd2790720a952496c9f0f23</div><div id='time'> Time: 2021-09-15</div><div id='author'> Author: 516015417@qq.com</div><div id='file'> File Name: dataloader.py</div><div id='m_class'> M Class Name: MSR_VTT_VideoDataset</div><div id='n_method'> N Class Name: MSR_VTT_VideoDataset</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: dataloader.py</div><div id='n_file'> N File Name: dataloader.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        warnings.filterwarnings("ignore")
        for max_depth in [2, 3, 8, 10, 12, None]:
            model = HistGradientBoostingClassifier(max_iter=10, max_depth=max_depth)
            X<a id="change"> = </a>[[0, 1], [1, 1], <a id="change">[</a>2, 0<a id="change"></a>]]
            X = np.array(X, dtype=np.float32)
            y = np.array([100, -10, 50]) + labels_shift
</code></pre><h3>After Change</h3><pre><code class='java'>
        warnings.filterwarnings("ignore")
        for max_depth in [2, 3, 8, 10, 12, None]:
            model = HistGradientBoostingClassifier(max_iter=10, max_depth=max_depth)
            <a id="change">np.random.seed(</a>0<a id="change">)</a>
            X = np.random.rand(100, 200)
            X = np.array(X, dtype=np.float32)
            y = np.random.randint(num_classes, size=100) + labels_shift</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/hummingbird/commit/06ad9caac17ca8daa92a82e0c2bc32500bad5c3f#diff-c4cf2a2bb461f56d1776395cba0cd877e0161111cc2d4df973027499f4d91a7dL16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32594512</div><div id='project'> Project Name: microsoft/hummingbird</div><div id='commit'> Commit Name: 06ad9caac17ca8daa92a82e0c2bc32500bad5c3f</div><div id='time'> Time: 2020-06-12</div><div id='author'> Author: 1703543+ksaur@users.noreply.github.com</div><div id='file'> File Name: tests/test_sklearn_histgbdt_converters.py</div><div id='m_class'> M Class Name: TestSklearnHistGradientBoostingClassifier</div><div id='n_method'> N Class Name: TestSklearnHistGradientBoostingClassifier</div><div id='m_method'> M Method Name: _run_GB_trees_classifier_converter(4)</div><div id='n_method'> N Method Name: _run_GB_trees_classifier_converter(4)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_sklearn_histgbdt_converters.py</div><div id='n_file'> N File Name: tests/test_sklearn_histgbdt_converters.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    node_set = set(range(data.x.shape[0]))
    new_edges = []
    sample_indices<a id="change"> = </a><a id="change">[]</a>
    for i in range(0, n):

        sampled_idx = np.random.choice(list(node_set), size=m, replace=False)
</code></pre><h3>After Change</h3><pre><code class='java'>
    check_parameter(m*n, low=1, high=data.num_nodes, param_name=&quotm*n&quot)

    if random_state:
        <a id="change">np.random.seed(</a>random_state<a id="change">)</a>

    new_edges = []

    outlier_idx = np.random.choice(data.num_nodes, size=m * n, replace=False)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pygod-team/pygod/commit/9dd44a7c9d6536a511637a44caa85e48c1ba8e66#diff-24591345cf5d6927c6593d4560eaacb1aa882677c08019dfce2d84d82ec69f44L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32594499</div><div id='project'> Project Name: pygod-team/pygod</div><div id='commit'> Commit Name: 9dd44a7c9d6536a511637a44caa85e48c1ba8e66</div><div id='time'> Time: 2022-04-14</div><div id='author'> Author: ytongdou@gmail.com</div><div id='file'> File Name: pygod/utils/outlier_generator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: gen_structure_outliers(4)</div><div id='n_method'> N Method Name: gen_structure_outliers(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pygod/utils/outlier_generator.py</div><div id='n_file'> N File Name: pygod/utils/outlier_generator.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @staticmethod
    def _get_data_loader_copy(data_loader: DataLoader):
        props = <a id="change">{
            </a>&quotnum_workers&quot: data_loader.num_workers,
            &quotcollate_fn&quot: data_loader.collate_fn,
            &quotpin_memory&quot: data_loader.pin_memory,
            &quottimeout&quot: data_loader.timeout,
            &quotworker_init_fn&quot: data_loader.worker_init_fn,
            &quotprefetch_factor&quot: data_loader.prefetch_factor,
            &quotpersistent_workers&quot: data_loader.persistent_workers,
            &quotgenerator&quot: torch.Generator()<a id="change">
        }</a>
        &#47&#47 Add batch sampler if exists, else sampler
        if data_loader.batch_sampler is not None:
            &#47&#47 Can&quott deepcopy since generator is not pickle-able,
            &#47&#47 so copying shallowly and then copies also sampler inside
            batch_sampler = copy(data_loader.batch_sampler)
            batch_sampler.sampler = copy(batch_sampler.sampler)
            &#47&#47 Replace generator instance so the copied dataset will not affect the original
            batch_sampler.sampler.generator<a id="change"> = </a>props[&quotgenerator&quot]
            props[&quotbatch_sampler&quot] = batch_sampler
        else:
            sampler = copy(data_loader.sampler)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Shuffle indices if need
        if shuffle:
            if random_state is not None:
                <a id="change">random.seed(</a>random_state<a id="change">)</a>
            indices = random.sample(indices, len(indices))
        &#47&#47 Create new sampler and batch sampler
        sampler = IndicesSequentialSampler(indices)
        new_batch_sampler = BatchSampler(sampler, batch_sampler.batch_size, batch_sampler.drop_last)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/4e19795beca446b3db8c4c822e1791880b498087#diff-72f9e1ff84229a8883b809e7bb772752602b9dbc22c665a8066c333df55f4aa7L337' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32594503</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 4e19795beca446b3db8c4c822e1791880b498087</div><div id='time'> Time: 2022-03-13</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: deepchecks/vision/vision_data.py</div><div id='m_class'> M Class Name: VisionData</div><div id='n_method'> N Class Name: VisionData</div><div id='m_method'> M Method Name: _get_data_loader_copy(4)</div><div id='n_method'> N Method Name: _get_data_loader_copy(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/vision/vision_data.py</div><div id='n_file'> N File Name: deepchecks/vision/vision_data.py</div><div id='m_start'> M Start Line: 337</div><div id='m_end'> M End Line: 362</div><div id='n_start'> N Start Line: 356</div><div id='n_end'> N End Line: 395</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
    def get_first_10_imgs(self):
        fh = open(self.__label_path)
        image_paths = <a id="change">[]</a>
        for line in fh.readlines():
            line = line.rstrip().split()
            if len(image_paths) &lt; 100:
                if len(line) &gt; 1:
                    image_paths.append(os.path.join("/data",line[0]))
            else:
                break
        print(image_paths)
        self.__file_list<a id="change"> =  </a>image_paths
        

if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
    def get_first_10_imgs(self):
        fh = open(self.__label_path)
        image_paths = {}
        <a id="change">random.seed(</a>1<a id="change">)</a>
        lines = random.choices(fh.readlines(),k=10)

        for line in lines:
            line = line.rstrip().split()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jingtianyilong/yolov4-pytorch/commit/47671101d0e0abe291ba461ec21f9a755a3fa8da#diff-4bae857ce6398a4645b227fbd4ff1b9e49ae54239baded3628dc802b0ae1f9ccL61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32594506</div><div id='project'> Project Name: jingtianyilong/yolov4-pytorch</div><div id='commit'> Commit Name: 47671101d0e0abe291ba461ec21f9a755a3fa8da</div><div id='time'> Time: 2021-01-25</div><div id='author'> Author: zijie.guo@daimler.com</div><div id='file'> File Name: visualize_demo.py</div><div id='m_class'> M Class Name: Detection</div><div id='n_method'> N Class Name: Detection</div><div id='m_method'> M Method Name: get_first_10_imgs(1)</div><div id='n_method'> N Method Name: get_first_10_imgs(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: visualize_demo.py</div><div id='n_file'> N File Name: visualize_demo.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 91</div><BR>