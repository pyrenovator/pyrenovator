<html><h3>Pattern ID :33089
</h3><img src='95690180.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 transform to positive energy domain + smallest float 32 ofsett to ensure no -inf in logcosh
            &#47&#47 prevents overflow and underflow error
            softplus = torch.nn.Softplus(beta = 0.05, threshold=20)
            <a id="change">return </a>softplus(x)+np.nextafter(np.float32(0), <a id="change">np.float32(</a>1<a id="change">)</a>)


</code></pre><h3>After Change</h3><pre><code class='java'>
        def _forward(self, x):
            &#47&#47 Transform to positive energy domain to ensure no `-inf` in `log10`
            &#47&#47 transform, thereby preventing overflow and underflow error.
            <a id="change">return </a>torch.nn.functional.softplus(x, beta=0.05) + eps_like(x)


</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/icecube/graphnet/commit/a99e1b457c2ccb6b2696303573b20870e50875a7#diff-353542a6cadb19789336df5fe64560b5523abfc7a9267084b3d3613d529c75f4L103' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95690180</div><div id='project'> Project Name: icecube/graphnet</div><div id='commit'> Commit Name: a99e1b457c2ccb6b2696303573b20870e50875a7</div><div id='time'> Time: 2022-11-13</div><div id='author'> Author: 111734311+Aske-Rosted@users.noreply.github.com</div><div id='file'> File Name: src/graphnet/models/task/reconstruction.py</div><div id='m_class'> M Class Name: EnergyReconstructionWithoutPowerTransform</div><div id='n_method'> N Class Name: EnergyReconstructionWithoutPowerTransform</div><div id='m_method'> M Method Name: _forward(2)</div><div id='n_method'> N Method Name: _forward(2)</div><div id='m_parent_class'> M Parent Class: Task</div><div id='n_parent_class'> N Parent Class: Task</div><div id='m_file'> M File Name: src/graphnet/models/task/reconstruction.py</div><div id='n_file'> N File Name: src/graphnet/models/task/reconstruction.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 103</div><div id='n_end'> N End Line: 103</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 print(f"DEBUG WARNING!!!: new_act:{new_act}")
        new_obs = (self.data[2][idx_now], imgs[1:], new_act) if self.act_in_obs else (self.data[2][idx_now], imgs[1:])
        &#47&#47 print(f"DEBUG: new_obs:{new_obs}")
        done = <a id="change">np.float32(</a>self.data[4][idx_now]<a id="change">)</a>
        <a id="change">return </a>last_obs, new_act, rew, new_obs, done

    def load_imgs(self, item):
        res = []</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 done = np.float32(self.data[4][idx_now])
        done = self.data[4][idx_now]
        info = self.data[6][idx_now]
        <a id="change">return </a>last_obs, new_act, rew, new_obs, done, info

    def load_imgs(self, item):
        res = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/trackmania-rl/tmrl/commit/8da3e086b27e06c9c88111ff34f5274e8f598cae#diff-8bc1d941609f9c3e761149970c1fa5d3000625fa7f95cb1ad2d5c72d383903f1L65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95690178</div><div id='project'> Project Name: trackmania-rl/tmrl</div><div id='commit'> Commit Name: 8da3e086b27e06c9c88111ff34f5274e8f598cae</div><div id='time'> Time: 2020-10-29</div><div id='author'> Author: yann.bouteiller@hotmail.fr</div><div id='file'> File Name: agents-rt/agents/custom/custom_memories.py</div><div id='m_class'> M Class Name: MemoryTMNFLidar</div><div id='n_method'> N Class Name: MemoryTMNFLidar</div><div id='m_method'> M Method Name: get_transition(2)</div><div id='n_method'> N Method Name: get_transition(2)</div><div id='m_parent_class'> M Parent Class: MemoryTMNF</div><div id='n_parent_class'> N Parent Class: MemoryTMNF</div><div id='m_file'> M File Name: agents-rt/agents/custom/custom_memories.py</div><div id='n_file'> N File Name: agents-rt/agents/custom/custom_memories.py</div><div id='m_start'> M Start Line: 81</div><div id='m_end'> M End Line: 90</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 95</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    kp_img = np.apply_along_axis(_make_keypoint, 1, kp_img)
    kp_map = np.apply_along_axis(_make_keypoint, 1, kp_map)

    src_corners = <a id="change">np.float32(</a>[[0, 0], [0, h - 1], [w - 1, h - 1], [w - 1, 0]]<a id="change">)</a>.reshape(-1, 1, 2)
    dst_corners = cv2.perspectiveTransform(src_corners, h_mat)
    map_with_fov = cv2.polylines(map_arr, [np.int32(dst_corners)], True, 255, 3, cv2.LINE_AA)
    draw_params = dict(matchColor=(0, 255, 0), singlePointColor=None, matchesMask=None, flags=2)
    out = cv2.drawMatches(img_arr, kp_img, map_with_fov, kp_map, matches, None, **draw_params)
    cv2.imshow(&quotMatches and FoV&quot, out)
    cv2.waitKey(1)

    <a id="change">return </a>dst_corners


def setup_sys_path():</code></pre><h3>After Change</h3><pre><code class='java'>
    cv2.imshow(figure_name, out)
    cv2.waitKey(1)

    <a id="change">return </a>out


def get_fov(img_arr, h_mat):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hmakelin/gisnav/commit/1d36e0563dcee0969ef55f6f6c4e8175e5acfa72#diff-ed2d848d4c939e8139b5f64803732c50c8aca3c2d58f9ad11b84cf31377f68bcL97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95690179</div><div id='project'> Project Name: hmakelin/gisnav</div><div id='commit'> Commit Name: 1d36e0563dcee0969ef55f6f6c4e8175e5acfa72</div><div id='time'> Time: 2021-11-05</div><div id='author'> Author: hmakelin@protonmail.com</div><div id='file'> File Name: wms_map_matching/util.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: visualize_homography(6)</div><div id='n_method'> N Method Name: visualize_homography(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: wms_map_matching/util.py</div><div id='n_file'> N File Name: wms_map_matching/util.py</div><div id='m_start'> M Start Line: 97</div><div id='m_end'> M End Line: 121</div><div id='n_start'> N Start Line: 97</div><div id='n_end'> N End Line: 114</div><BR>