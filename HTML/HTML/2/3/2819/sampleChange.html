<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
      tfds.as_numpy(trains_ds.cache().repeat().shuffle(
          10 * batch_size, seed=0).batch(batch_size)))
  val_ds = iter(
      tfds.as_numpy(<a id="change">vals_ds.cache().repeat()</a>.batch(
          config.train.eval_batch_size)))

  training.train_loop(config.train, FLAGS.workdir, train_ds, val_ds)</code></pre><h3>After Change</h3><pre><code class='java'>
      writers=(getpass.getuser(),))
  table = (f&quot/datatable/xid/{experiment.id}/predictions&quot if experiment.id &gt; 0
           else config.datatable)
  <a id="change">with datatables</a><a id="change">.Writer(
      table,
      keys=[(&quotindex&quot, int), (&quotid&quot, str)],
      fixed_key_values=[
          config.index,
      ],
      options=datatables.WriterOptions(acls=acls)) as writer:

    </a>trains_ds, vals_ds, train_ds_iterator, val_ds_iterator = (
        create_datasets_iterators(config.num_splits, config.dataset_seed,
                                  config.index, batch_size,
                                  config.train.eval_batch_size))</code></pre>