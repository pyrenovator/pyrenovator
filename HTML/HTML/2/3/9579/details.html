<html><h3>Pattern ID :9579
</h3><img src='34222873.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if pos_mask.sum()&gt;0:
                positives.append(np.random.choice(np.where(pos_mask)[0]))
            else:
                positives.append(<a id="change">np.random.choice(</a>np.where(pos)[0]<a id="change">)</a>)

            if neg_mask.sum()&gt;0:
                negatives.append(np.random.choice(np.where(neg_mask)[0]))</code></pre><h3>After Change</h3><pre><code class='java'>

            anchors.append(i)
            pos[i] = False
            p<a id="change">      = </a><a id="change">np.random.choice(</a>np.where(pos)[0]<a id="change">)</a>
            positives.append(p)

            &#47&#47Find negatives that violate tripet constraint semi-negatives
            neg_mask = np.logical_and(neg,d&gt;d[p])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/confusezius/cvpr2020_pads/commit/52c23a79f27646a8b9d146d17f0bca2b0c77beaf#diff-d857e20eeda9fb83f657b66ce7803981392c78a43e2379e592ad209cf612656eL81' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222873</div><div id='project'> Project Name: confusezius/cvpr2020_pads</div><div id='commit'> Commit Name: 52c23a79f27646a8b9d146d17f0bca2b0c77beaf</div><div id='time'> Time: 2020-03-27</div><div id='author'> Author: karsten.rh1@gmail.com</div><div id='file'> File Name: losses.py</div><div id='m_class'> M Class Name: Sampler</div><div id='n_method'> N Class Name: Sampler</div><div id='m_method'> M Method Name: semihardsampling(4)</div><div id='n_method'> N Method Name: semihardsampling(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: losses.py</div><div id='n_file'> N File Name: losses.py</div><div id='m_start'> M Start Line: 81</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 93</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        transition_probabilities = self.P[action, x]

        &#47&#47 Next state
        y = <a id="change">np.random.choice(</a>self.num_states<a id="change">, p=transition_probabilities)</a>
        next_state = self.states[y]

        &#47&#47 Reward
        if self.R.shape == (self.num_states, self.num_actions):</code></pre><h3>After Change</h3><pre><code class='java'>

    def transition(self, state, action):
        x = self.state_index(state)
        y = <a id="change">np.random.choice(</a>self.num_states<a id="change">, p=self.P[action, x])</a>
        next_state = self.states[y]
        reward<a id="change"> = </a>self.reward(x, action, y)
        return next_state, reward

    def reward(self, state, action, next_state):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jmribeiro/yaaf/commit/df374b3ec41d5cf6411911a4f2d9b7b149759736#diff-e1288aa5d00cdf810e7b3e7ea52700a8b2ecbf810b6c741049d43bacf6e81e81L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222895</div><div id='project'> Project Name: jmribeiro/yaaf</div><div id='commit'> Commit Name: df374b3ec41d5cf6411911a4f2d9b7b149759736</div><div id='time'> Time: 2020-07-23</div><div id='author'> Author: jmribeiro77209@gmail.com</div><div id='file'> File Name: yaaf/environments/markov/MarkovDecisionProcess.py</div><div id='m_class'> M Class Name: MarkovDecisionProcess</div><div id='n_method'> N Class Name: MarkovDecisionProcess</div><div id='m_method'> M Method Name: transition(3)</div><div id='n_method'> N Method Name: transition(3)</div><div id='m_parent_class'> M Parent Class: Env</div><div id='n_parent_class'> N Parent Class: Env</div><div id='m_file'> M File Name: yaaf/environments/markov/MarkovDecisionProcess.py</div><div id='n_file'> N File Name: yaaf/environments/markov/MarkovDecisionProcess.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 87</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                   row[&quotMemory&quot],
                   row[&quotGpu&quot]]
    
    order_attrs = order_attrs + random.sample(add_ins, <a id="change">random.choice(</a>[1, 2, 3, 4]<a id="change">)</a>)
    
    &#47&#47 Shuffle the data because in real data, it does not really matter what order the attributes are in
    random.shuffle(order_attrs)</code></pre><h3>After Change</h3><pre><code class='java'>
    
    &#47&#47 Special tags at the end of the amount of inches of the laptop and the RAM to simulate real data
    inch_attr = str(row[&quotInches&quot]) + random.choice([&quot inch&quot, &quot"&quot])
    ram_attr = row[&quotRam&quot] + <a id="change">random.choice(</a>[&quot ram&quot, &quot memory&quot]<a id="change">)</a>
    
    cpu_attr = row[&quotCpu&quot]
    if random.choice([0, 1]):
        cpu_attr = cpu_attr.split(&quot &quot)
        if random.choice([0, 1]):
            if &quotIntel&quot in cpu_attr:
                cpu_attr.remove(&quotIntel&quot)
        if random.choice([0, 1]):
            if &quotCore&quot in cpu_attr:
                cpu_attr.remove(&quotCore&quot)
        if random.choice([0, 1]):
            if &quotAMD&quot in cpu_attr:
                cpu_attr.remove(&quotAMD&quot)
    
        cpu_attr = &quot &quot.join(cpu_attr)

    &#47&#47 Create a list for all the product attributes
    order_attrs = [ row[&quotCompany&quot],
                    row[&quotProduct&quot].split(&quot(&quot)[0],
                  ]
    
    more_type_attrs = [ row[&quotTypeName&quot],
                        inch_attr
                      ]
    
    spec_attrs = [ &#47&#47 row[&quotScreenResolution&quot],
                   cpu_attr,
                   ram_attr,
                   row[&quotMemory&quot]
                 ]
    
    &#47&#47 Shuffle only the spec attributes
    random.shuffle(more_type_attrs)
    random.shuffle(spec_attrs)
    
    order_attrs<a id="change"> = </a>order_attrs + more_type_attrs + spec_attrs
    
    return &quot &quot.join(order_attrs)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mascerade/supervised-product-matching/commit/dc7d6eff5b0faf069d5eb04f746eb91ce001d61a#diff-e69e90530bc843c9fa0be1762de9b33b8cba6f7e452734b4c3331797f25a4ca0L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222883</div><div id='project'> Project Name: mascerade/supervised-product-matching</div><div id='commit'> Commit Name: dc7d6eff5b0faf069d5eb04f746eb91ce001d61a</div><div id='time'> Time: 2020-11-15</div><div id='author'> Author: ultimi450@gmail.com</div><div id='file'> File Name: src/data_creation/laptop_data_creation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: concatenate_row(1)</div><div id='n_method'> N Method Name: concatenate_row(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/data_creation/laptop_data_creation.py</div><div id='n_file'> N File Name: src/data_creation/laptop_data_creation.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 86</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            logger.info("successfully loading {} captions".format(len(captions)))

    def __getitem__(self, index):
        caption = <a id="change">random.choice(</a>self.video2caption[self.video_ids[index]]<a id="change">)</a>
        &#47&#47 video_path = self.video_paths[index]
        &#47&#47 frames = load_single_video(video_path, self.frames_num, self.frames_size, tensor=True)  &#47&#47 Tensor(T H W C)
        frames = torch.tensor(self.video2data[self.video_ids[index]])
        return frames, caption</code></pre><h3>After Change</h3><pre><code class='java'>

    def __getitem__(self, index):
        video_id = self.video_ids[index]
        caption<a id="change"> = </a><a id="change">random.choice(</a>self.video2caption[video_id]<a id="change">)</a>
        frames = torch.tensor(self.video2data[video_id])
        return frames, caption

    def __len__(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kamino666/video-captioning-transformer/commit/dfdafe75a1e66732e03d596778892971e8dd1d8c#diff-44e6592c534d82d44cb8cae35c7d49bdfafd5bd072fb481b6265e075e8c7be88L71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222896</div><div id='project'> Project Name: kamino666/video-captioning-transformer</div><div id='commit'> Commit Name: dfdafe75a1e66732e03d596778892971e8dd1d8c</div><div id='time'> Time: 2021-09-18</div><div id='author'> Author: 516015417@qq.com</div><div id='file'> File Name: dataloader.py</div><div id='m_class'> M Class Name: MSR_VTT_VideoDataset</div><div id='n_method'> N Class Name: MSR_VTT_VideoDataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: dataloader.py</div><div id='n_file'> N File Name: dataloader.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 82</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                   ram_attr
                  ]
    
    order_attrs = order_attrs + random.sample(add_ins, <a id="change">random.choice(</a>[1, 2, 3, 4]<a id="change">)</a>)
    
    &#47&#47 Shuffle the data because in real data, it does not really matter what order the attributes are in
    random.shuffle(order_attrs)</code></pre><h3>After Change</h3><pre><code class='java'>
def concatenate_spec_data(row):
    &#47&#47 Special tags at the end of the amount of inches of the laptop and the RAM to simulate real data
    inch_attr = str(row[&quotinches&quot]) + random.choice([&quot inch&quot, &quot"&quot])
    ram_attr = row[&quotram&quot] + <a id="change">random.choice(</a>[&quot ram&quot, &quot memory&quot]<a id="change">)</a>

    &#47&#47 This modifies the CPU attribute to sometimes have different types of elements to add some difference
    &#47&#47 Ex: Intel Core i7 7700k vs Core i7 7700k 4 Core 4.2 GHz CPU (Something like that)
    cpu_attr = row[&quotcpu&quot]
    cores = SpecAttributes.cpu[cpu_attr][0]
    ghz = SpecAttributes.cpu[cpu_attr][1]
    
    if random.random() &gt; 0.5:
        cpu_attr = cpu_attr.split(&quot &quot)
        if random.choice([0, 1]):
            if &quotIntel&quot in cpu_attr:
                cpu_attr.remove(&quotIntel&quot)
        if random.choice([0, 1]):
            if &quotCore&quot in cpu_attr:
                cpu_attr.remove(&quotCore&quot)
        if random.choice([0, 1]):
            if &quotAMD&quot in cpu_attr:
                cpu_attr.remove(&quotAMD&quot)
    
        cpu_attr = &quot &quot.join(cpu_attr)
    
    &#47&#47 Random chance of putting the cores in the CPU attribute
    if random.random() &gt; 0.7:
        cpu_attr = &quot{} {} {}&quot.format(cpu_attr, cores, &quotCore&quot)
    
    &#47&#47 Random chance of putting the GHz in the CPU attribute
    if random.random() &gt; 0.7:
        cpu_attr = &quot{} {}&quot.format(cpu_attr, ghz)
    
    if random.random() &gt; 0.55:
        cpu_attr = &quot{} {}&quot.format(cpu_attr, &quotCPU&quot)
    
    &#47&#47 Create a list for all the product attributes
    order_attrs = [row[&quotcompany&quot],
                   row[&quotproduct&quot],
                   inch_attr,
                  ]
    
    spec_attrs<a id="change"> = </a>[row[&quothard_drive&quot],
                  &#47&#47 row[&quotscreen&quot],
                   cpu_attr,
                   ram_attr</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mascerade/supervised-product-matching/commit/dc7d6eff5b0faf069d5eb04f746eb91ce001d61a#diff-d5f4d23293659be26dbded6e22d49c263f32cc72a7979ee49391d5a79d28f3fcL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222881</div><div id='project'> Project Name: mascerade/supervised-product-matching</div><div id='commit'> Commit Name: dc7d6eff5b0faf069d5eb04f746eb91ce001d61a</div><div id='time'> Time: 2020-11-15</div><div id='author'> Author: ultimi450@gmail.com</div><div id='file'> File Name: src/data_creation/spec_creation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: concatenate_spec_data(1)</div><div id='n_method'> N Method Name: concatenate_spec_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/data_creation/spec_creation.py</div><div id='n_file'> N File Name: src/data_creation/spec_creation.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                  else:
                    del object_dict["obj_list"][idx]
            for x in range(random.randint(object_dict["num_range"][0], object_dict["num_range"][1])):
                    env_objects.append(self._place_object(<a id="change">random.choice(</a>object_dict["obj_list"]<a id="change">)</a>))
        else:  &#47&#47 solves task_objects
            for o in [&quotinit&quot,&quotgoal&quot]:
                d = object_dict[o]</code></pre><h3>After Change</h3><pre><code class='java'>
                    del object_dict["obj_list"][idx]
            if "num_range" in object_dict.keys():
                for x in range(random.randint(object_dict["num_range"][0], object_dict["num_range"][1])):
                        env_o<a id="change"> = </a>self._place_object(<a id="change">random.choice(</a>object_dict["obj_list"]<a id="change">)</a>)
                        self.highlight_active_object(env_o, "other")
                        env_objects.append(env_o)
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/incognite-lab/mygym/commit/0b5190c9f1259311279f75d7ffaa806fd0ec9bfb#diff-a34ec7b77733c5232fe1af5a8f79418fb746a4d88ae222298b42525124842952L380' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34222887</div><div id='project'> Project Name: incognite-lab/mygym</div><div id='commit'> Commit Name: 0b5190c9f1259311279f75d7ffaa806fd0ec9bfb</div><div id='time'> Time: 2022-06-28</div><div id='author'> Author: g.sejnova@gmail.com</div><div id='file'> File Name: myGym/envs/gym_env.py</div><div id='m_class'> M Class Name: GymEnv</div><div id='n_method'> N Class Name: GymEnv</div><div id='m_method'> M Method Name: _randomly_place_objects(2)</div><div id='n_method'> N Method Name: _randomly_place_objects(2)</div><div id='m_parent_class'> M Parent Class: CameraEnv</div><div id='n_parent_class'> N Parent Class: CameraEnv</div><div id='m_file'> M File Name: myGym/envs/gym_env.py</div><div id='n_file'> N File Name: myGym/envs/gym_env.py</div><div id='m_start'> M Start Line: 392</div><div id='m_end'> M End Line: 407</div><div id='n_start'> N Start Line: 413</div><div id='n_end'> N End Line: 439</div><BR>