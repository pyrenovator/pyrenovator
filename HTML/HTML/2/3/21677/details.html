<html><h3>Pattern ID :21677
</h3><img src='69187327.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        if logger is None:
            self.logger = nncore.get_logger()
            <a id="change">self.logger.setLevel(</a>log_level<a id="change">)</a>
        else:
            self.logger = logger

        self.flush_states()</code></pre><h3>After Change</h3><pre><code class='java'>
        self.work_dir = work_dir
        self.logger = nncore.get_logger()

        self._hooks<a id="change"> = </a><a id="change">[]</a>
        self._stage = 0
        self._epoch = 0
        self._iter = 0
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/388797bb64137636c57252b73efa8715ad9e4068#diff-f301e71f1b206fb014cc7b05cf40d35bbf2feac02ca56ff77c6fbc81583978acL13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69187327</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: 388797bb64137636c57252b73efa8715ad9e4068</div><div id='time'> Time: 2020-03-12</div><div id='author'> Author: goolhanrry@gmail.com</div><div id='file'> File Name: nncore/engine/engine.py</div><div id='m_class'> M Class Name: Engine</div><div id='n_method'> N Class Name: Engine</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: nncore/engine/engine.py</div><div id='n_file'> N File Name: nncore/engine/engine.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 23</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, model_filename="config/emnist_model.pt", num_classes=47, use_cuda=False, debug=False):

        if(debug):
            <a id="change">logging.getLogger().setLevel(</a>logging.DEBUG<a id="change">)</a>
        else:
            logging.getLogger().setLevel(logging.INFO)

        self._debug = debug</code></pre><h3>After Change</h3><pre><code class='java'>

        self.chars = list(&quot1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot)

        self.img_trans<a id="change"> = </a>transforms.Compose(<a id="change">[
            </a>transforms.ToPILImage()
            ,transforms.Resize((self.img_height, self.img_width))
            ,transforms.Grayscale(num_output_channels=3)
            ,transforms.ToTensor()
            ,lambda x: x &lt; threshold &#47&#47 thresholding (for &quot&lt;&quot operator input image should have white background)
            ,lambda x: x.float()<a id="change"></a> 
        ])

        self.device = torch.device(&quotcuda&quot if torch.cuda.is_available() and use_cuda else &quotcpu&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/andreybicalho/vrpdr/commit/daf497818875e24e9502e761bea83e6cbed1f909#diff-5f59b3986ec03836911b6150d16d3d7082319a5f1b6c69d3a1698850b3b37750L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69187326</div><div id='project'> Project Name: andreybicalho/vrpdr</div><div id='commit'> Commit Name: daf497818875e24e9502e761bea83e6cbed1f909</div><div id='time'> Time: 2020-06-17</div><div id='author'> Author: andreybicalho@gmail.com</div><div id='file'> File Name: src/ocr.py</div><div id='m_class'> M Class Name: OCR</div><div id='n_method'> N Class Name: OCR</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/ocr.py</div><div id='n_file'> N File Name: src/ocr.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 39</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.time_buf = {}
        self.formatter = logging.Formatter(&quot%(asctime)s %(filename)s %(funcName)s [line:%(lineno)d] %(levelname)s %(message)s&quot)
        self.head = logging.StreamHandler()
        <a id="change">self.head.setLevel(</a>logging.INFO<a id="change">)</a>
        self.head.setFormatter(self.formatter)
        self.addHandler(self.head)

    def check_if_log(self, round, eval_interval=-1):</code></pre><h3>After Change</h3><pre><code class='java'>
        self.time_costs = []
        self.time_buf = {}
        self.formatter = logging.Formatter(&quot%(asctime)s %(filename)s %(funcName)s [line:%(lineno)d] %(levelname)s %(message)s&quot)
        self.handler_list<a id="change"> = </a><a id="change">[]</a>
        if not self.meta[&quotno_log_console&quot]:
            self.streamhandler = logging.StreamHandler()
            self.streamhandler.setFormatter(self.formatter)
            self.streamhandler.setLevel(self._LEVEL[self.meta[&quotlog_level&quot].upper()])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/45505e44ba6f50c9df0453fd543b7dfe0891d0e9#diff-60400dd25faee473490afcbde8c7c080f1de6c03ee9bdb889c82e95a7f87fadaL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69187333</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 45505e44ba6f50c9df0453fd543b7dfe0891d0e9</div><div id='time'> Time: 2022-07-29</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/logger/basic_logger.py</div><div id='m_class'> M Class Name: Logger</div><div id='n_method'> N Class Name: Logger</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: logging.Logger</div><div id='n_parent_class'> N Parent Class: logging.Logger</div><div id='m_file'> M File Name: utils/logger/basic_logger.py</div><div id='n_file'> N File Name: utils/logger/basic_logger.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 Set up logging for training
            os.makedirs(args.save_dir, exist_ok=True)
            fh = logging.FileHandler(os.path.join(args.save_dir, args.log_name))
            <a id="change">fh.setLevel(</a>logging.DEBUG<a id="change">)</a>

            &#47&#47 Cross validate
            TRAIN_LOGGER.addHandler(fh)
            mean_score, std_score = cross_validate(args, TRAIN_LOGGER)</code></pre><h3>After Change</h3><pre><code class='java'>
        modify_train_args(dataset_args)

        &#47&#47 Run grid search
        results = <a id="change">[]</a>
        for _ in range(args.num_runs_per_dataset):
            &#47&#47 Set up args for hyperparameter choices
            gs_args = deepcopy(dataset_args)

            hyperparams = sample_hyperparams(GRID)
            for key, value in hyperparams.items():
                setattr(gs_args, key, value)

            &#47&#47 Cross validate
            mean_score, std_score = cross_validate(gs_args, TRAIN_LOGGER)

            &#47&#47 Record results
            temp_model = build_model(gs_args)
            num_params = param_count(temp_model)
            logger.info(hyperparams)
            logger.info(&quotnum params: {:,}&quot.format(num_params))
            logger.info(&quot{} +/- {} {}&quot.format(mean_score, std_score, metric))

            results.append({
                &quotmean_score&quot: mean_score,
                &quotstd_score&quot: std_score,
                &quothyperparams&quot: hyperparams,
                &quotnum_params&quot: num_params
            })

        &#47&#47 Report best result
        results.sort(key=lambda result: (1 if dataset_args.minimize_score else -1) * result[&quotmean_score&quot])
        best_result<a id="change"> = </a>results[0]
        logger.info(&quotbest&quot)
        logger.info(best_result[&quothyperparams&quot])
        logger.info(&quotnum params: {:,}&quot.format(best_result[&quotnum_params&quot]))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aamini/chemprop/commit/b221474e6942b2df892595d4043b55e6bec27262#diff-c624d8a3b784c9e86f446211415fc04b8facf066bf4510e9b4039374b05a330dL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69187330</div><div id='project'> Project Name: aamini/chemprop</div><div id='commit'> Commit Name: b221474e6942b2df892595d4043b55e6bec27262</div><div id='time'> Time: 2018-12-20</div><div id='author'> Author: swansonk.14@gmail.com</div><div id='file'> File Name: grid_search.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: grid_search(1)</div><div id='n_method'> N Method Name: grid_search(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: grid_search.py</div><div id='n_file'> N File Name: grid_search.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    set_root_verbosity()

    &#47&#47 Mute apache_beam
    <a id="change">logging.getLogger("apache_beam").setLevel(</a>logging.WARNING<a id="change">)</a>
    logging.getLogger("rdbms_metadata_access_object").setLevel(logging.WARNING)

    &#47&#47 set absl logging
    absl_logging.set_verbosity(ABSL_LOGGING_VERBOSITY)</code></pre><h3>After Change</h3><pre><code class='java'>
    set_root_verbosity()

    &#47&#47 Mute apache_beam
    muted_logger_names<a id="change"> = </a><a id="change">[
        </a>"apache_beam",
        "rdbms_metadata_access_object",
        "apache_beam.io.gcp.bigquery"<a id="change"></a>,
    ]
    for logger_name in muted_logger_names:
        logging.getLogger(logger_name).setLevel(logging.WARNING)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/8e2c221bd6ce6b3ab8df70d11ac1ca78bbb6ed26#diff-69185ea947cc085d37a5fc56f179553c543a6cdab97fc252336e34f7f0c583d2L153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69187329</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 8e2c221bd6ce6b3ab8df70d11ac1ca78bbb6ed26</div><div id='time'> Time: 2021-11-25</div><div id='author'> Author: strickvl@users.noreply.github.com</div><div id='file'> File Name: src/zenml/logger.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: init_logging(0)</div><div id='n_method'> N Method Name: init_logging(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/logger.py</div><div id='n_file'> N File Name: src/zenml/logger.py</div><div id='m_start'> M Start Line: 160</div><div id='m_end'> M End Line: 161</div><div id='n_start'> N Start Line: 160</div><div id='n_end'> N End Line: 170</div><BR>