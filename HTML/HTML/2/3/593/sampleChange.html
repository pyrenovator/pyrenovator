<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        scaler.scale(loss).backward()
        &#47&#47 Gradient clipping
        scaler.unscale_(optimizer)
        <a id="change">torch.nn.utils.clip_grad_norm_(model.parameters()</a>, 1.0<a id="change">)</a>
        &#47&#47 Update generator weight
        scaler.step(optimizer)
        scaler.update()
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 measure accuracy and record loss
        psnr = 10. * torch.log10(1. / torch.mean((sr - hr) ** 2))
        <a id="change">losses.update(</a>loss.item(), lr.size(0)<a id="change">)</a>
        psnres.update(psnr.item(), lr.size(0))

        &#47&#47 measure elapsed time
        batch_time.update(time.time() - end)</code></pre>