<html><h3>Pattern ID :6947
</h3><img src='23280002.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47model(input)
        model(input.detach())
        <a id="change">model(</a>fliplr(input.detach())<a id="change">)</a>

    del input

    for bn_module in momenta.keys():</code></pre><h3>After Change</h3><pre><code class='java'>
    for input in loader:
        if isinstance(input, (list, tuple)):
            input = input[0]
            xyz = input[:,:,<a id="change">0</a>:<a id="change">3</a>].contiguous()
            rgb = input[:,:,3:].contiguous()
        if device is not None:
            input = input.to(device)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/layumi/person-reid-3d/commit/1a3d7816f8e8ef784c4fca45d6be9450e9653d36#diff-cb5a2ee9e4b695ac7cd0051e0bf1044b1a4161e3cf6a63a3d6f4e2825c47cd63L158' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23280002</div><div id='project'> Project Name: layumi/person-reid-3d</div><div id='commit'> Commit Name: 1a3d7816f8e8ef784c4fca45d6be9450e9653d36</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: zdzheng12@gmail.com</div><div id='file'> File Name: swa_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: update_bn(3)</div><div id='n_method'> N Method Name: update_bn(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: swa_utils.py</div><div id='n_file'> N File Name: swa_utils.py</div><div id='m_start'> M Start Line: 221</div><div id='m_end'> M End Line: 231</div><div id='n_start'> N Start Line: 158</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    sens = create_input(shape + [2]).cpu()
    mask = create_input([shape[0]] + [1] + shape[2:] + [1]).round().int().cpu()

    out = <a id="change">model(</a>img, kspace, mask, sens<a id="change">)</a>[0][-1]

    assert list(out.shape) == [shape[0]] + [2] + shape[2:]
</code></pre><h3>After Change</h3><pre><code class='java'>
    }
    if input_image_is_None:
        if image_init == "input_image":
            inputs["initial_image"] = create_input([shape[0]] + shape[<a id="change">2:</a>] + [2]).cpu()
        elif image_init == "input_kspace":
            inputs["initial_kspace"] = create_input(shape + [2]).cpu()
    if image_init is None and input_image_is_None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/directgroup/direct/commit/78cdd530b3c93e31c11d8963880e6329f0989243#diff-e502aca6281005adbd714021f09bed4b0bccb8079915fce0f3804dfdb6d3d87fL61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23280000</div><div id='project'> Project Name: directgroup/direct</div><div id='commit'> Commit Name: 78cdd530b3c93e31c11d8963880e6329f0989243</div><div id='time'> Time: 2021-12-27</div><div id='author'> Author: georgeyiasemis@hotmail.com</div><div id='file'> File Name: tests/tests_nn/test_rim.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_rim(11)</div><div id='n_method'> N Method Name: test_rim(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/tests_nn/test_rim.py</div><div id='n_file'> N File Name: tests/tests_nn/test_rim.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if args.mlm:
                outputs = model(inputs, masked_lm_labels=labels, position_ids=position_ids, token_type_ids=segment_ids)
            else:
                outputs = <a id="change">model(</a>inputs<a id="change">, labels=labels, position_ids=position_ids, token_type_ids=segment_ids)</a>
            loss = outputs[0]  &#47&#47 model outputs are always tuple in transformers (see doc)

            if args.n_gpu &gt; 1:
                loss = loss.mean()  &#47&#47 mean() to average on multi-gpu parallel training</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47 remove this once they add it
                decoder_input_ids = labels[:, :-1].contiguous()
                decoder_input_ids[decoder_input_ids == args.mlm_ignore_index] = tokenizer.pad_token_id
                lm_labels = labels[:, <a id="change">1</a>:].clone()
                model_inputs[&quotdecoder_input_ids&quot] = decoder_input_ids
                model_inputs[&quotlm_labels&quot] = lm_labels
            </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/a93dfc909991b9e688e31ca66a42706915d63b67#diff-90e760d3065758cd3fed35d36be801cfed8d2418d888df295dbecdc933432ad7L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23279995</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: a93dfc909991b9e688e31ca66a42706915d63b67</div><div id='time'> Time: 2020-05-04</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(4)</div><div id='n_method'> N Method Name: train(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='n_file'> N File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_start'> M Start Line: 170</div><div id='m_end'> M End Line: 185</div><div id='n_start'> N Start Line: 173</div><div id='n_end'> N End Line: 200</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 append to next input_ids
        next_input_ids = paddle.concat([input_ids, next_tokens], axis=-1)

        output_from_no_past = <a id="change">model(</a>next_input_ids<a id="change">)</a>
        output_from_past = model(next_tokens, use_cache=True, cache=past)[0]

        &#47&#47 select random slice
        random_slice_idx = ids_tensor((1,), output_from_past.shape[-1]).item()</code></pre><h3>After Change</h3><pre><code class='java'>

        self.parent.assertTrue(len(outputs) == len(outputs_use_cache_conf))

        output, past = outputs[<a id="change">:2</a>]

        &#47&#47 create hypothetical next token and extent to next_input_ids
        next_tokens = ids_tensor((self.batch_size, 1), config["vocab_size"], dtype="int64")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/db3bde142ca2da76bfc701cd4ecc17140c248060#diff-587ce97ea371bcb9aa115ae9d48a2c9ffbf7d3bda55f68549cda07362b5e5a68L180' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23279997</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: db3bde142ca2da76bfc701cd4ecc17140c248060</div><div id='time'> Time: 2022-12-06</div><div id='author'> Author: 40912707+Yam0214@users.noreply.github.com</div><div id='file'> File Name: tests/transformers/gpt/test_modeling.py</div><div id='m_class'> M Class Name: GPTModelTester</div><div id='n_method'> N Class Name: GPTModelTester</div><div id='m_method'> M Method Name: create_and_check_gpt_model_past(4)</div><div id='n_method'> N Method Name: create_and_check_gpt_model_past(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/transformers/gpt/test_modeling.py</div><div id='n_file'> N File Name: tests/transformers/gpt/test_modeling.py</div><div id='m_start'> M Start Line: 185</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 186</div><div id='n_end'> N End Line: 203</div><BR>