<html><h3>Pattern ID :920
</h3><img src='4420450.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    A = confusion_matrix(labels, outputs)

    if np.sum(A) &gt; 0:
        accuracy = np.sum(<a id="change">np.diag(</a>A<a id="change">)</a>) / np.sum(A)
    else:
        accuracy = float("nan")
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    m = _metrics_from_confusion_matrix(labels, outputs, num_classes)

    <a id="change">return </a>m["macro_acc"]<a id="change">, m["acc"]</a>


def QRS_score(
    rpeaks_truths: Sequence[Union[np.ndarray, Sequence[int]]],</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/285eb710e3d419b5e4e5173b8f02faefb83c252a#diff-2053e80098864765dd827f2ac6b68c092b4bd0d29cc647beec4f37f37ad05157L302' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4420450</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: 285eb710e3d419b5e4e5173b8f02faefb83c252a</div><div id='time'> Time: 2022-03-30</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: torch_ecg/utils/utils_metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: accuracy(3)</div><div id='n_method'> N Method Name: accuracy(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_ecg/utils/utils_metrics.py</div><div id='n_file'> N File Name: torch_ecg/utils/utils_metrics.py</div><div id='m_start'> M Start Line: 302</div><div id='m_end'> M End Line: 310</div><div id='n_start'> N Start Line: 506</div><div id='n_end'> N End Line: 508</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 todo: is clamp really necessary?
            log_std = self.std_clamp(log_std)
            std = log_std.exp()
            m = MultivariateNormal(mean.reshape(-1), <a id="change">torch.diag(</a>std.reshape(-1)<a id="change">)</a>)
            action = m.sample()
            action = action.reshape(mean.shape)
</code></pre><h3>After Change</h3><pre><code class='java'>
            action_bound_compensation = action_bound_compensation.sum(dim=-1, keepdim=True)
            log_prob.sub_(action_bound_compensation)

        <a id="change">return </a>action<a id="change">, log_prob</a>


if __name__ == &quot__main__&quot:
    use_cuda = torch.cuda.is_available()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tmdt-buw/karolos/commit/e8ce439013ace3e3e9647de55ed22ddf38f35396#diff-29037086e0dfbb6a2262a556dce65661316ec86ddf4f52bf9de230586208ab9dL95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4420449</div><div id='project'> Project Name: tmdt-buw/karolos</div><div id='commit'> Commit Name: e8ce439013ace3e3e9647de55ed22ddf38f35396</div><div id='time'> Time: 2020-04-23</div><div id='author'> Author: scheiderer@uni-wuppertal.de</div><div id='file'> File Name: agents/nnfactory/sac.py</div><div id='m_class'> M Class Name: Policy</div><div id='n_method'> N Class Name: Policy</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: agents/nnfactory/sac.py</div><div id='n_file'> N File Name: agents/nnfactory/sac.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 123</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                @ self.R_12.T
                @ np.diag(1 / self.Bs[0])
                @ self.R_12
                @ <a id="change">np.diag(</a>1 / np.sqrt(self.Bs[1])<a id="change">)</a>
        )
        return M, None

    def _multi_view_evp(self, Us, Ss):</code></pre><h3>After Change</h3><pre><code class='java'>
    def _two_view_evp(self, views):
        R = [pca.transform(view) for pca, view in zip(self.principal_components, views)]
        C = R[1].T @ R[0] @ R[0].T @ R[1]
        <a id="change">return </a>C<a id="change">, None</a>

    def _multi_view_evp(self, views):
        R = [pca.transform(view) for pca, view in zip(self.principal_components, views)]
        D = block_diag(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/a1ba93b137f04fbe46e9c284d5c1e8c4df56ba94#diff-68fd6ebf197c2577dd507e1904a176ead6ff6e01bbbe2434e1c8210672ef5e1cL137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4420448</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: a1ba93b137f04fbe46e9c284d5c1e8c4df56ba94</div><div id='time'> Time: 2022-10-10</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/models/_rcca.py</div><div id='m_class'> M Class Name: rCCA</div><div id='n_method'> N Class Name: rCCA</div><div id='m_method'> M Method Name: _two_view_evp(2)</div><div id='n_method'> N Method Name: _two_view_evp(3)</div><div id='m_parent_class'> M Parent Class: _BaseCCA</div><div id='n_parent_class'> N Parent Class: _BaseCCA</div><div id='m_file'> M File Name: cca_zoo/models/_rcca.py</div><div id='n_file'> N File Name: cca_zoo/models/_rcca.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 147</div><div id='n_start'> N Start Line: 136</div><div id='n_end'> N End Line: 138</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        p, h = self.forward(state, hidden)
        action_mean = self.actor(p)

        cov_mat = <a id="change">torch.diag(</a>self.action_var<a id="change">)</a>.to(device)

        dist = MultivariateNormal(action_mean, cov_mat)
        action = dist.sample()</code></pre><h3>After Change</h3><pre><code class='java'>
        p, h = self.forward(state, hidden)
        action = self.actor(p)

        <a id="change">return </a>action<a id="change">, h</a>

    def evaluate(self, state, action, hidden):
        p, h = self.forward(state, hidden)
        action_mean = self.actor(p)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/antoinetheb/rnn-rl/commit/98950acf2dc010916e579839c4240f4411b8f542#diff-65ed63b1d5a2453dd7a01909599a53c8b34e5e4aeb47da236467cebb1223a1abL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4420455</div><div id='project'> Project Name: antoinetheb/rnn-rl</div><div id='commit'> Commit Name: 98950acf2dc010916e579839c4240f4411b8f542</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: antoine.theberge@usherbrooke.ca</div><div id='file'> File Name: algos/PPO.py</div><div id='m_class'> M Class Name: ActorCritic</div><div id='n_method'> N Class Name: ActorCritic</div><div id='m_method'> M Method Name: act(3)</div><div id='n_method'> N Method Name: act(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: algos/PPO.py</div><div id='n_file'> N File Name: algos/PPO.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 50</div><BR>