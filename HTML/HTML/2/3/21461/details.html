<html><h3>Pattern ID :21461
</h3><img src='68789881.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for item in bboxes:
            target = {
                &quotboxes&quot: item[0].to(dtype=torch.float, device=device),
                &quotlabels&quot: <a id="change">torch.tensor(</a>item[1]<a id="change">)</a>.to(device=device)
            }
            targets.append(target)
</code></pre><h3>After Change</h3><pre><code class='java'>
    param_dicts = [
        {"params": [p for n, p in model.named_parameters() if "backbone" not in n and p.requires_grad]},
        {
            "params": [p for n, p in model.named_parameters() if <a id="change">"backbone" in n and p.requires_grad</a>],
            "lr": float(config[&quottraining&quot][&quotlr_backbone&quot])
        },
    ]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bwittmann/transoar/commit/fbe1515fe14ebf81c18bcf86c27bd7cb4ac79e7e#diff-0e048206896ef3808bf29e00f4ca534eb723fe51e27a47b583a92e913c33bbcfL15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68789881</div><div id='project'> Project Name: bwittmann/transoar</div><div id='commit'> Commit Name: fbe1515fe14ebf81c18bcf86c27bd7cb4ac79e7e</div><div id='time'> Time: 2021-11-22</div><div id='author'> Author: bastian.wittmann@tum.de</div><div id='file'> File Name: scripts/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/train.py</div><div id='n_file'> N File Name: scripts/train.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.epsilon = kwargs.get("epsilon", 1e-5)
        self.leapfrog_steps = kwargs.get("leapfrog_steps", 20)
        self.mass = kwargs.get("mass", None)
        self.temperature = <a id="change">torch.tensor(</a>kwargs.get("temperature", 1.0)<a id="change">, dtype = AP_config.ap_dtype, device = AP_config.ap_device)</a>
        self.temper = torch.tensor(kwargs.get("temper", 1.0), dtype = AP_config.ap_dtype, device = AP_config.ap_device)
        self.progress_bar = kwargs.get("progress_bar", True)
        self.min_accept = kwargs.get("min_accept", 0.1)
        self.max_accept = kwargs.get("max_accept", 0.9)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.hmc_kwargs = kwargs.get("hmc_kwargs", {})
        self.mcmc_kwargs = kwargs.get("mcmc_kwargs", {})
        
        if <a id="change">"mass_matrix" not in self.hmc_kwargs and "mass_matrix" in kwargs</a>:
            self.hmc_kwargs["mass_matrix"] = kwargs.get("mass_matrix")

    def fit(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/ebffd21d2f055a020db6dbee7bab33bdf31725b3#diff-b5f9f8764caf9a2aa07da1a7736c9635bb478dbd322a784682d508f52940916fL37' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68789883</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: ebffd21d2f055a020db6dbee7bab33bdf31725b3</div><div id='time'> Time: 2023-04-29</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/fit/hmc.py</div><div id='m_class'> M Class Name: HMC</div><div id='n_method'> N Class Name: HMC</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: BaseOptimizer</div><div id='n_parent_class'> N Parent Class: BaseOptimizer</div><div id='m_file'> M File Name: autoprof/fit/hmc.py</div><div id='n_file'> N File Name: autoprof/fit/hmc.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 71</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.profR.pop()
        self.profR.pop()
        self.profR.append(torch.sqrt(torch.sum((self.window.shape/2)**2)))
        self.profR = <a id="change">torch.tensor(</a>self.profR<a id="change">, dtype = self.dtype, device = self.device)</a>

@torch.no_grad()
def nonparametric_initialize(self, target = None):
    if target is None:</code></pre><h3>After Change</h3><pre><code class='java'>
def nonparametric_set_window(self, window):
    super(self.__class__, self).set_window(window)
    
    if <a id="change">self["I(R)"].prof is None and "I(R)" not in self.equality_constraints</a>:
        new_prof = [0,2*self.target.pixelscale]
        while new_prof[-1] &lt; torch.min(self.window.shape/2):
            new_prof.append(new_prof[-1] + torch.max(2*self.target.pixelscale,new_prof[-1]*0.2))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/4855900cabbb8ed35d16289700911e24292f3161#diff-7105c03ee4fbd953bdf03f5f7e47b585df37890e130ab4e9b3977201607bd2dfL181' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68789877</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: 4855900cabbb8ed35d16289700911e24292f3161</div><div id='time'> Time: 2022-12-17</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/models/_shared_methods.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: nonparametric_set_window(2)</div><div id='n_method'> N Method Name: nonparametric_set_window(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: autoprof/models/_shared_methods.py</div><div id='n_file'> N File Name: autoprof/models/_shared_methods.py</div><div id='m_start'> M Start Line: 184</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 191</div><BR>