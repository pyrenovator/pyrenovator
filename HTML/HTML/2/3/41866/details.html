<html><h3>Pattern ID :41866
</h3><img src='117367246.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.checkpoint_saver.start()

        for process in self.conn_handlers:
            <a id="change">if </a>not process.is_alive():
                <a id="change">process.start()</a>
            process.ready.result()

        try:
            self.runtime.run()</code></pre><h3>After Change</h3><pre><code class='java'>
                    timeout = random.random() * 2 * self.mean_balance_check_period
                    &#47&#47 TODO: Follow ModuleContainer status (to restart/stop if it crashes)
                    if self.stop.wait(timeout):
                        <a id="change">return</a>

                    if self._should_choose_other_blocks():
                        logger.info("Swarm is imbalanced, server will load other blocks")
                        break  &#47&#47 Stop serving this set of modules</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bigscience-workshop/distributed-bloom/commit/149f433763e2eb332b16de91cf47809579706001#diff-e0bb43e77afdc23f85aefba41e3d8fda1554c6402c8e08536508ed6246d8068fL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117367246</div><div id='project'> Project Name: bigscience-workshop/distributed-bloom</div><div id='commit'> Commit Name: 149f433763e2eb332b16de91cf47809579706001</div><div id='time'> Time: 2022-10-12</div><div id='author'> Author: hxrussia@gmail.com</div><div id='file'> File Name: src/server/server.py</div><div id='m_class'> M Class Name: Server</div><div id='n_method'> N Class Name: Server</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: threading.Thread</div><div id='n_parent_class'> N Parent Class: threading.Thread</div><div id='m_file'> M File Name: src/server/server.py</div><div id='n_file'> N File Name: src/server/server.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 99</div><div id='n_start'> N Start Line: 148</div><div id='n_end'> N End Line: 190</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            critic_g_server.manage_model(critic_m,
                                         t.optim.Adam(critic_m.parameters(),
                                                      lr=1e-3))
        <a id="change">if </a>rank in (0, 1):
            <a id="change">actor_g_server.start()</a>
            critic_g_server.start()

        a3c = A3C(actor, critic,
                  nn.MSELoss(reduction=&quotsum&quot),</code></pre><h3>After Change</h3><pre><code class='java'>
                  (actor_g_server, critic_g_server),
                  replay_device=c.device,
                  replay_size=c.replay_size)
        <a id="change">return </a>a3c

    &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
    &#47&#47 Test for A3C acting</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/iffix/machin/commit/a0808cd7c6aec893be667f2ef3ff9b5ceac29f02#diff-9f45b16b928306a16ab5855f4e09006aa567b1caa3b9209e044188236dbed46dL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117367244</div><div id='project'> Project Name: iffix/machin</div><div id='commit'> Commit Name: a0808cd7c6aec893be667f2ef3ff9b5ceac29f02</div><div id='time'> Time: 2020-07-19</div><div id='author'> Author: hanhanmumuqq@163.com</div><div id='file'> File Name: test/frame/algorithms/test_a3c.py</div><div id='m_class'> M Class Name: TestA3C</div><div id='n_method'> N Class Name: TestA3C</div><div id='m_method'> M Method Name: a3c(0)</div><div id='n_method'> N Method Name: a3c(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: test/frame/algorithms/test_a3c.py</div><div id='n_file'> N File Name: test/frame/algorithms/test_a3c.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 79</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if self.active_recorder:
                return self.active_recorder
            else:
                <a id="change">if </a>create:
                    <a id="change">self.start()</a>
                    logger.warning(
                        f"Recorder {self.active_recorder.id} is running under the experiment with name {self.name}..."
                    )</code></pre><h3>After Change</h3><pre><code class='java'>
            if self.active_recorder:
                return self.active_recorder
            else:
                <a id="change">return </a>self._get_recorder_by_name(create=create)
        else:
            if recorder_id is not None:
                return self._get_recorder_by_id(recorder_id, create=create)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/64ed43b791ca7b22877e9e480cbeb8c5eb25c728#diff-f58669cf1211c432859293e0c65b1a6ca13769eb98e3ce9cb656c7a76bbe536fL210' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117367241</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 64ed43b791ca7b22877e9e480cbeb8c5eb25c728</div><div id='time'> Time: 2020-11-17</div><div id='author'> Author: dw1920@nyu.edu</div><div id='file'> File Name: qlib/workflow/exp.py</div><div id='m_class'> M Class Name: MLflowExperiment</div><div id='n_method'> N Class Name: MLflowExperiment</div><div id='m_method'> M Method Name: get_recorder(4)</div><div id='n_method'> N Method Name: get_recorder(4)</div><div id='m_parent_class'> M Parent Class: Experiment</div><div id='n_parent_class'> N Parent Class: Experiment</div><div id='m_file'> M File Name: qlib/workflow/exp.py</div><div id='n_file'> N File Name: qlib/workflow/exp.py</div><div id='m_start'> M Start Line: 216</div><div id='m_end'> M End Line: 256</div><div id='n_start'> N Start Line: 286</div><div id='n_end'> N End Line: 293</div><BR>