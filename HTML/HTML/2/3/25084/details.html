<html><h3>Pattern ID :25084
</h3><img src='76874437.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Act
    result = check.conditions_decision(check.run(pd.DataFrame(data=tested_data), pd.DataFrame(data=base_data)))
    &#47&#47 Assert
    assert_that(result, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=False,
                               name=&quotNot more than 10.00% new variants in test data for all columns&quot,
                               details=&quotFound columns with variants over ratio: {\&quotcol1\&quot: \&quot25.00%\&quot}&quot)
    )</a>)


def test_condition_percent_new_variants_pass():</code></pre><h3>After Change</h3><pre><code class='java'>
    result, *_ = check.conditions_decision(check.run(base_df, test_df,))

    &#47&#47 Assert
    assert_that(result, <a id="change">equal_condition_result(
        is_pass=False,
        name=&quotNot more than 10.00% new variants in test data for all columns&quot,
        details=&quotFound columns with variants over ratio: {\&quotcol1\&quot: \&quot25.00%\&quot}&quot
    )</a>)


def test_condition_percent_new_variants_pass():</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/3fb2ea8d26cfe854be31616cb78f356b555918a5#diff-08b6ac94cf024c41ff570c1aa532b9f1512d0c5a541088df65519e97e6ba2ab8L134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874437</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 3fb2ea8d26cfe854be31616cb78f356b555918a5</div><div id='time'> Time: 2021-12-13</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_condition_percent_new_variants_fail(0)</div><div id='n_method'> N Method Name: test_condition_percent_new_variants_fail(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='n_file'> N File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 139</div><div id='n_end'> N End Line: 147</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    result = ImagePropertyDrift().add_condition_drift_score_less_than().run(coco_visiondata_train, coco_visiondata_test)

    assert_that(result, is_correct_image_property_drift_result())
    assert_that(result.conditions_results, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=True,
                               details=&quotFound property Brightness with largest Earth Mover\&quots Distance score 0.07&quot,
                               name=&quotEarth Mover\&quots Distance &lt; 0.1 for image properties drift&quot))</a>
                )


def test_image_property_drift_fail_condition(coco_visiondata_train, coco_visiondata_test):</code></pre><h3>After Change</h3><pre><code class='java'>

    condition_result, *_ = result.conditions_results

    assert_that(condition_result, <a id="change">equal_condition_result(
        is_pass=True,
        details=&quotPassed for 7 properties out of 7 properties.\nFound property "Brightness" has the highest numerical &quot
                &quotdrift score: 0.07&quot,
        name=&quotdrift score &lt; 0.2 for image properties drift&quot)</a>)

def test_image_property_drift_fail_condition(coco_visiondata_train, coco_visiondata_test):
    result = (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/8daa46674e046e2abd7c63d61dbcb1eaa4f05609#diff-ff3740a66353dc617cb25061aa978d00a6c9f8770b5af879b2bcc91cb57d76faL93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874436</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 8daa46674e046e2abd7c63d61dbcb1eaa4f05609</div><div id='time'> Time: 2023-02-15</div><div id='author'> Author: 92314933+nirhutnik@users.noreply.github.com</div><div id='file'> File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_image_property_drift_condition(2)</div><div id='n_method'> N Method Name: test_image_property_drift_condition(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='n_file'> N File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_start'> M Start Line: 94</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 72</div><div id='n_end'> N End Line: 82</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    )

    assert_that(result, is_correct_image_property_drift_result())
    assert_that(result.conditions_results, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=False,
                               details=&quotEarth Mover\&quots Distance is above the threshold for the next properties:\n&quot
                                       &quotAspect Ratio=0.07;\nBrightness=0.07;\nMean Green Relative Intensity=0.06&quot,
                               name=&quotEarth Mover\&quots Distance &lt; 0.06 for image properties drift&quot))</a>
                )


def is_correct_image_property_drift_result(with_display: bool = True):</code></pre><h3>After Change</h3><pre><code class='java'>

    condition_result, *_ = result.conditions_results

    assert_that(condition_result, <a id="change">equal_condition_result(
        is_pass=False,
        details="Failed for 3 out of 7 properties.\nFound 3 numeric properties with Earth Mover&quots Distance above "
                "threshold: {&quotAspect Ratio&quot: &quot0.07&quot, &quotBrightness&quot: &quot0.07&quot, &quotMean Green Relative Intensity&quot: &quot0.06&quot}",
        name=&quotdrift score &lt; 0.06 for image properties drift&quot)</a>)


def is_correct_image_property_drift_result(with_display: bool = True):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/8daa46674e046e2abd7c63d61dbcb1eaa4f05609#diff-ff3740a66353dc617cb25061aa978d00a6c9f8770b5af879b2bcc91cb57d76faL104' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874433</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 8daa46674e046e2abd7c63d61dbcb1eaa4f05609</div><div id='time'> Time: 2023-02-15</div><div id='author'> Author: 92314933+nirhutnik@users.noreply.github.com</div><div id='file'> File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_image_property_drift_fail_condition(2)</div><div id='n_method'> N Method Name: test_image_property_drift_fail_condition(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='n_file'> N File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_start'> M Start Line: 105</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 99</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Act
    result = check.conditions_decision(check.run(pd.DataFrame(data=data), pd.DataFrame(data=compared_data)))
    &#47&#47 Assert
    assert_that(result, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=False,
                               name=&quotNo new variants allowed in test data for all columns&quot,
                               details=&quotFound columns with variants over ratio: {\&quotcol1\&quot: \&quot14.29%\&quot}&quot)
    )</a>)


def test_condition_no_new_variants_pass():</code></pre><h3>After Change</h3><pre><code class='java'>
    data_df, compared_data_df = pd.DataFrame(data=data), pd.DataFrame(data=compared_data)
    result, *_ = check.conditions_decision(check.run(compared_data_df, data_df))
    &#47&#47 Assert
    assert_that(result, <a id="change">equal_condition_result(
        is_pass=False,
        name=&quotNo new variants allowed in test data for all columns&quot,
        details=&quotFound columns with variants over ratio: {\&quotcol1\&quot: \&quot14.29%\&quot}&quot
    )</a>)


def test_condition_no_new_variants_pass():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/3fb2ea8d26cfe854be31616cb78f356b555918a5#diff-08b6ac94cf024c41ff570c1aa532b9f1512d0c5a541088df65519e97e6ba2ab8L99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874432</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 3fb2ea8d26cfe854be31616cb78f356b555918a5</div><div id='time'> Time: 2021-12-13</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_condition_no_new_variants_fail(0)</div><div id='n_method'> N Method Name: test_condition_no_new_variants_fail(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='n_file'> N File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_start'> M Start Line: 105</div><div id='m_end'> M End Line: 111</div><div id='n_start'> N Start Line: 105</div><div id='n_end'> N End Line: 112</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Act
    result = check.conditions_decision(check.run(pd.DataFrame(data=tested_data), pd.DataFrame(data=base_data)))
    &#47&#47 Assert
    assert_that(result, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=True,
                               name=&quotNo new variants allowed in test data for all columns&quot)
    )</a>)


def test_condition_percent_new_variants_fail():</code></pre><h3>After Change</h3><pre><code class='java'>
    result, *_ = check.conditions_decision(check.run(base_df, test_df))

    &#47&#47 Assert
    assert_that(result, <a id="change">equal_condition_result(
        is_pass=True,
        name=&quotNo new variants allowed in test data for all columns&quot
    )</a>)


def test_condition_percent_new_variants_fail():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/3fb2ea8d26cfe854be31616cb78f356b555918a5#diff-08b6ac94cf024c41ff570c1aa532b9f1512d0c5a541088df65519e97e6ba2ab8L114' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874435</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 3fb2ea8d26cfe854be31616cb78f356b555918a5</div><div id='time'> Time: 2021-12-13</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_condition_no_new_variants_pass(0)</div><div id='n_method'> N Method Name: test_condition_no_new_variants_pass(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='n_file'> N File Name: tests/checks/integrity/string_mismatch_comparison_test.py</div><div id='m_start'> M Start Line: 120</div><div id='m_end'> M End Line: 125</div><div id='n_start'> N Start Line: 122</div><div id='n_end'> N End Line: 129</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    result = check.conditions_decision(check.run(train_ds, val_ds))

    &#47&#47 Assert
    assert_that(result, <a id="change">has_items(
        </a><a id="change">equal_condition_result(is_pass=False,
                               name=&quotChange in ratio of dominant value in data not more than 25.00%&quot,
                               details=&quotFound columns with high change in dominant value: [\&quotsepal width (cm)\&quot]&quot)
    )</a>)


def test_condition_ratio_of_change_not_more_than_passed(iris_split_dataset_and_model):</code></pre><h3>After Change</h3><pre><code class='java'>
    result, *_ = check.conditions_decision(check.run(train_dataset=val_ds, test_dataset=train_ds))

    &#47&#47 Assert
    assert_that(result, <a id="change">equal_condition_result(
            is_pass=False,
            name=&quotChange in ratio of dominant value in data not more than 25.00%&quot,
            details=&quotFound columns with high change in dominant value: [\&quotsepal width (cm)\&quot]&quot
    )</a>)


def test_condition_ratio_of_change_not_more_than_passed(iris_split_dataset_and_model):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/3fb2ea8d26cfe854be31616cb78f356b555918a5#diff-40cf86ec414fd5338b359f50abc632b43aad7a872cd757a2612eec2a8ec7624aL161' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76874434</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 3fb2ea8d26cfe854be31616cb78f356b555918a5</div><div id='time'> Time: 2021-12-13</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: tests/checks/integrity/dominant_frequency_change_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_condition_ratio_of_change_not_more_than_not_passed(1)</div><div id='n_method'> N Method Name: test_condition_ratio_of_change_not_more_than_not_passed(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/checks/integrity/dominant_frequency_change_test.py</div><div id='n_file'> N File Name: tests/checks/integrity/dominant_frequency_change_test.py</div><div id='m_start'> M Start Line: 168</div><div id='m_end'> M End Line: 175</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 175</div><BR>