<html><h3>Pattern ID :21259
</h3><img src='68072856.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.order(11)
def test_loader_detection_shuffle():
    loader = agdata.AgMLDataLoader(&quotapple_detection_usa&quot)
    contents = <a id="change">list(</a><a id="change">loader._coco_annotation_map.keys())</a>
    loader.shuffle()
    assert contents != list(loader._coco_annotation_map.keys())

@pytest.mark.order(12)</code></pre><h3>After Change</h3><pre><code class='java'>
@pytest.mark.order(11)
def test_loader_detection_shuffle():
    loader = agdata.AgMLDataLoader(&quotapple_detection_usa&quot)
    contents = <a id="change">loader._manager._accessors.copy()</a>
    loader.shuffle()
    assert np.any(contents != loader._manager._accessors)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/project-agml/agml/commit/54f46d60d438e589367a4393ef1a220f1f487623#diff-0c416b6306f75a448f3b1bc7ed75705b9386438df2c40cd4cc1c8df90e15fa7eL59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68072856</div><div id='project'> Project Name: project-agml/agml</div><div id='commit'> Commit Name: 54f46d60d438e589367a4393ef1a220f1f487623</div><div id='time'> Time: 2021-11-23</div><div id='author'> Author: joshi.amoghn@gmail.com</div><div id='file'> File Name: tests/data/test_dataloader_general.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_loader_detection_shuffle(0)</div><div id='n_method'> N Method Name: test_loader_detection_shuffle(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataloader_general.py</div><div id='n_file'> N File Name: tests/data/test_dataloader_general.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 60</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        observations = convert_to_torch(observations, device=self._device, cast=None, in_place=False)

        sub_step_keys = <a id="change">list(</a><a id="change">observations.keys())</a>

        &#47&#47 predict values for first state
        key_0 = sub_step_keys[0]
        values = {key_0: self.networks[key_0](observations[key_0])["value"][..., 0]}</code></pre><h3>After Change</h3><pre><code class='java'>
        for substep_record in record.substep_records[1:]:
            &#47&#47 compute value 2 as delta of value 1
            prev_values = detached_values[-1]
            obs = <a id="change">substep_record.observation.copy()</a>
            obs[&quotprev_value&quot] = prev_values.unsqueeze(-1)

            value_delta = self.networks[substep_record.substep_key](obs)["value"][..., 0]
            next_values = detached_values[-1] + value_delta</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/enlite-ai/maze/commit/2b585e55aa7306a15bd6fd81304ea63ef8d9a9ff#diff-6971c28221bff56c0fb44136ed9e8d1a9b3ef11ded05b8240191e6f59dea69ceL255' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68072854</div><div id='project'> Project Name: enlite-ai/maze</div><div id='commit'> Commit Name: 2b585e55aa7306a15bd6fd81304ea63ef8d9a9ff</div><div id='time'> Time: 2021-04-29</div><div id='author'> Author: office@enlite.ai</div><div id='file'> File Name: maze/core/agent/torch_state_critic.py</div><div id='m_class'> M Class Name: TorchDeltaStateCritic</div><div id='n_method'> N Class Name: TorchDeltaStateCritic</div><div id='m_method'> M Method Name: predict_values(2)</div><div id='n_method'> N Method Name: predict_values(2)</div><div id='m_parent_class'> M Parent Class: TorchStateCritic</div><div id='n_parent_class'> N Parent Class: TorchStateCritic</div><div id='m_file'> M File Name: maze/core/agent/torch_state_critic.py</div><div id='n_file'> N File Name: maze/core/agent/torch_state_critic.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 276</div><div id='n_start'> N Start Line: 255</div><div id='n_end'> N End Line: 273</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.order(11)
def test_loader_detection_shuffle():
    loader = agdata.AgMLDataLoader(&quotapple_detection_usa&quot)
    contents = <a id="change">list(</a><a id="change">loader._coco_annotation_map.keys())</a>
    loader.shuffle()
    assert contents != list(loader._coco_annotation_map.keys())

@pytest.mark.order(12)</code></pre><h3>After Change</h3><pre><code class='java'>
@pytest.mark.order(11)
def test_loader_detection_shuffle():
    loader = agdata.AgMLDataLoader(&quotapple_detection_usa&quot)
    contents = <a id="change">loader._manager._accessors.copy()</a>
    loader.shuffle()
    assert np.any(contents != loader._manager._accessors)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/project-agml/agml/commit/edb58c65871fd465145d4b3a4015b23ffc8fbae2#diff-0c416b6306f75a448f3b1bc7ed75705b9386438df2c40cd4cc1c8df90e15fa7eL101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 68072855</div><div id='project'> Project Name: project-agml/agml</div><div id='commit'> Commit Name: edb58c65871fd465145d4b3a4015b23ffc8fbae2</div><div id='time'> Time: 2022-01-20</div><div id='author'> Author: joshi.amoghn@gmail.com</div><div id='file'> File Name: tests/data/test_dataloader_general.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_loader_detection_shuffle(0)</div><div id='n_method'> N Method Name: test_loader_detection_shuffle(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataloader_general.py</div><div id='n_file'> N File Name: tests/data/test_dataloader_general.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 60</div><BR>