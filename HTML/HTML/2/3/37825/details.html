<html><h3>Pattern ID :37825
</h3><img src='108548537.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        vec = torch.zeros(x.size(0), 3, x.size(1), device=x.device)

        for attn in self.attention_layers:
            dx, dvec = <a id="change">attn(</a>x, vec, edge_index, edge_weight, edge_attr, edge_vec<a id="change">)</a>
            x = x + dx
            vec = vec + dvec
        x = self.out_norm(x)
</code></pre><h3>After Change</h3><pre><code class='java'>
            x = self.neighbor_embedding(z, x, edge_index, edge_weight, edge_attr)

        for attn in self.attention_layers:
            x = x<a id="change"> + </a><a id="change">attn(</a>x, edge_index, edge_weight, edge_attr<a id="change">)</a>
        x = self.out_norm(x)

        return x, z, pos, batch
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/bd6d4b9640f3d2fafec28736c88fe1f2d0e0dda7#diff-41fd77dbca1e928d027707bbb314eea394ba89b00249c2051b698902aeceea50L106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108548537</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: bd6d4b9640f3d2fafec28736c88fe1f2d0e0dda7</div><div id='time'> Time: 2021-07-14</div><div id='author'> Author: p.thoelke@gmx.de</div><div id='file'> File Name: torchmdnet/models/torchmd_t.py</div><div id='m_class'> M Class Name: TorchMD_T</div><div id='n_method'> N Class Name: TorchMD_T</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: torchmdnet/models/torchmd_t.py</div><div id='n_file'> N File Name: torchmdnet/models/torchmd_t.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 124</div><div id='n_start'> N Start Line: 106</div><div id='n_end'> N End Line: 115</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            ]))
    def forward(self, x):
        for attn, ff in self.layers:
            x = <a id="change">attn(</a>x<a id="change">)</a>
            x = ff(x)
        return x

class ViT(nn.Module):</code></pre><h3>After Change</h3><pre><code class='java'>
            ]))
    def forward(self, x, **kwargs):
        for attn, ff in self.layers:
            x = <a id="change">attn(</a>x<a id="change">, **kwargs) + </a>x
            x = ff(x) + x
        return x
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/vit-pytorch/commit/3067155cea0c360f8a411404b8b27a6da9885f81#diff-597064871eb788c3c68b53fa983984ace3a6fbb451ba40e4c078c9fe4c3d4431L75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108548538</div><div id='project'> Project Name: lucidrains/vit-pytorch</div><div id='commit'> Commit Name: 3067155cea0c360f8a411404b8b27a6da9885f81</div><div id='time'> Time: 2021-03-29</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: vit_pytorch/vit.py</div><div id='m_class'> M Class Name: Transformer</div><div id='n_method'> N Class Name: Transformer</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: vit_pytorch/vit.py</div><div id='n_file'> N File Name: vit_pytorch/vit.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 77</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            x = self.neighbor_embedding(z, x, edge_index, edge_weight, edge_attr)

        for attn in self.attention_layers:
            x = x<a id="change"> + </a><a id="change">attn(</a>x, edge_index, edge_weight, edge_attr<a id="change">)</a>
        x = self.out_norm(x)

        return x, z, pos, batch
</code></pre><h3>After Change</h3><pre><code class='java'>
        vec = torch.zeros(x.size(0), 3, x.size(1), device=x.device)

        for attn in self.attention_layers:
            dx, dvec = <a id="change">attn(</a>x, vec, edge_index, edge_weight, edge_attr, edge_vec<a id="change">)</a>
            x = x + dx
            vec = vec + dvec
        x = self.out_norm(x)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/2e48070fab3e2b692e7e9e240654a12d84d84764#diff-41fd77dbca1e928d027707bbb314eea394ba89b00249c2051b698902aeceea50L106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108548541</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: 2e48070fab3e2b692e7e9e240654a12d84d84764</div><div id='time'> Time: 2021-07-06</div><div id='author'> Author: p.thoelke@gmx.de</div><div id='file'> File Name: torchmdnet/models/torchmd_t.py</div><div id='m_class'> M Class Name: TorchMD_T</div><div id='n_method'> N Class Name: TorchMD_T</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: torchmdnet/models/torchmd_t.py</div><div id='n_file'> N File Name: torchmdnet/models/torchmd_t.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 109</div><div id='n_end'> N End Line: 124</div><BR>