<html><h3>Pattern ID :5774
</h3><img src='20339863.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    end = time.time()
    elapsed_time = end - start

    <a id="change">print(f"Received response of {len(outputs)} output tensors:"</a><a id="change">)</a>
    print(f"Round-trip time took {elapsed_time * 1000.0:.4f} milliseconds")

    for i, out in enumerate(outputs):
        print(f"    output &#47&#47{i}: shape {out.shape}")</code></pre><h3>After Change</h3><pre><code class='java'>
    _LOGGER.info(f"Sending {len(inputs)} input tensors to {engine.url}/run")

    start = time.time()
    outputs = <a id="change">engine.run(</a>inputs<a id="change">)</a>
    end = time.time()
    elapsed_time = end - start

    _LOGGER.info(f"Round-trip time took {elapsed_time * 1000.0:.4f} milliseconds")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/3b58e70a3fade9a80357433900ec17d2ba510c21#diff-cb0ee67abfdc8f0837636abac2cee0c791b1f95b5cd9c0c21c4825d3ffe27c42L91' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339863</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: 3b58e70a3fade9a80357433900ec17d2ba510c21</div><div id='time'> Time: 2021-04-28</div><div id='author'> Author: bfineran@users.noreply.github.com</div><div id='file'> File Name: examples/flask/client.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/flask/client.py</div><div id='n_file'> N File Name: examples/flask/client.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 114</div><div id='n_start'> N Start Line: 146</div><div id='n_end'> N End Line: 163</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                _check_cuobjdump_output(expected[1], is_ptx=True)
        finally:
            if IS_WINDOWS:
                <a id="change">print("Not wiping extensions build folder because Windows"</a><a id="change">)</a>
            else:
                shutil.rmtree(temp_dir)

            if old_envvar is None:</code></pre><h3>After Change</h3><pre><code class='java'>
            if IS_WINDOWS:
                &#47&#47 rmtree returns permission error: [WinError 5] Access is denied
                &#47&#47 on Windows, this is a word-around
                <a id="change">subprocess.run(</a>["rm", "-rf", temp_dir]<a id="change">, stdout=subprocess.PIPE)</a>
            else:
                shutil.rmtree(temp_dir)

            if old_envvar is None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/54eedf6fa6a5104dbdf92f868b0236c43c90dd21#diff-5ee802fb38a81bf55153346d7086ace60471c1876c5183cc81ea05e74e9b1438L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339874</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 54eedf6fa6a5104dbdf92f868b0236c43c90dd21</div><div id='time'> Time: 2023-02-01</div><div id='author'> Author: huydhn@gmail.com</div><div id='file'> File Name: test/test_cpp_extensions_jit.py</div><div id='m_class'> M Class Name: TestCppExtensionJIT</div><div id='n_method'> N Class Name: TestCppExtensionJIT</div><div id='m_method'> M Method Name: _run_jit_cuda_archflags(3)</div><div id='n_method'> N Method Name: _run_jit_cuda_archflags(3)</div><div id='m_parent_class'> M Parent Class: common.TestCase</div><div id='n_parent_class'> N Parent Class: common.TestCase</div><div id='m_file'> M File Name: test/test_cpp_extensions_jit.py</div><div id='n_file'> N File Name: test/test_cpp_extensions_jit.py</div><div id='m_start'> M Start Line: 148</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 148</div><div id='n_end'> N End Line: 189</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def remove_build_path():
    if sys.platform == "win32":
        <a id="change">print("Not wiping extensions build folder because Windows"</a><a id="change">)</a>
        return
    default_build_root = torch.utils.cpp_extension.get_default_build_root()
    if os.path.exists(default_build_root):
        shutil.rmtree(default_build_root)</code></pre><h3>After Change</h3><pre><code class='java'>
        if IS_WINDOWS:
            &#47&#47 rmtree returns permission error: [WinError 5] Access is denied
            &#47&#47 on Windows, this is a word-around
            <a id="change">subprocess.run(</a>["rm", "-rf", default_build_root]<a id="change">, stdout=subprocess.PIPE)</a>
        else:
            shutil.rmtree(default_build_root)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/54eedf6fa6a5104dbdf92f868b0236c43c90dd21#diff-5ee802fb38a81bf55153346d7086ace60471c1876c5183cc81ea05e74e9b1438L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339875</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 54eedf6fa6a5104dbdf92f868b0236c43c90dd21</div><div id='time'> Time: 2023-02-01</div><div id='author'> Author: huydhn@gmail.com</div><div id='file'> File Name: test/test_cpp_extensions_jit.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: remove_build_path(0)</div><div id='n_method'> N Method Name: remove_build_path(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_cpp_extensions_jit.py</div><div id='n_file'> N File Name: test/test_cpp_extensions_jit.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_robustify_global_model():
    for alpha in [0, 0.5, 1]:
        model_list = create_fake_model_list(20)
        <a id="change">print(
            f"alpha = {alpha}, aggregation = {SLSGDDefense(trim_param_b=3, alpha=alpha, option_type=2).run(model_list, base_aggregation_func=AggregationFunction.FedAVG, global_model=model_list[0][1])} "</a><a id="change">
        )</a>


if __name__ == "__main__":
    test_defense_option2()</code></pre><h3>After Change</h3><pre><code class='java'>
def test_robustify_global_model():
    for alpha in [0, 0.5, 1]:
        model_list = create_fake_model_list(20)
        aggregated_results = <a id="change">SLSGDDefense(
            trim_param_b=3, alpha=alpha, option_type=2
        ).run(
            </a>model_list<a id="change">,
            base_aggregation_func=AggregationFunction.FedAVG,
            extra_auxiliary_info=model_list[0][1],
        )</a>
        print(f"alpha = {alpha}, aggregation = {aggregated_results} ")


if __name__ == "__main__":</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/b2a8e2947d4ee9f51331000f057ce03a746fac72#diff-b095ee2222ae2ba392845171a40a4a8d950f4bea44ae86fe99e9b34b640c9015L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339872</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: b2a8e2947d4ee9f51331000f057ce03a746fac72</div><div id='time'> Time: 2022-07-18</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/core/security/test/defense/test_slsgd_defense.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_robustify_global_model(0)</div><div id='n_method'> N Method Name: test_robustify_global_model(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/security/test/defense/test_slsgd_defense.py</div><div id='n_file'> N File Name: python/fedml/core/security/test/defense/test_slsgd_defense.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 43</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.public_ip = get(&quothttp://api.ipify.org&quot).text
        self.local_ip = socket.gethostbyname(socket.gethostname())

        <a id="change">print(f"REDIS: local IP: {self.local_ip}"</a><a id="change">)</a>
        print(f"REDIS: public IP: {self.public_ip}")
        &#47&#47 self.__wait_for_connections()

    def __trainer_handshake(self, sock):</code></pre><h3>After Change</h3><pre><code class='java'>
        print(f"INFO REDIS: public IP: {self.public_ip}")

        Thread(target=self.__trainer_thread, args=(), kwargs={}, daemon=True).run()
        <a id="change">Thread(target=self.__rollout_workers_thread, args=(), kwargs={}, daemon=True).run()</a>

    def __trainer_thread(self, ):
        
        This waits for a TrainerInterface to connect</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/trackmania-rl/tmrl/commit/9a47b1f5cce898ffc7e40f58d009bad8753d6b4b#diff-a82fb3922d78006534236cc440d1d304ea96bebfbf13c67825b16a1550a76e8aL144' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339873</div><div id='project'> Project Name: trackmania-rl/tmrl</div><div id='commit'> Commit Name: 9a47b1f5cce898ffc7e40f58d009bad8753d6b4b</div><div id='time'> Time: 2020-09-19</div><div id='author'> Author: yann.bouteiller@hotmail.fr</div><div id='file'> File Name: agents/agents/tm.py</div><div id='m_class'> M Class Name: RedisServer</div><div id='n_method'> N Class Name: RedisServer</div><div id='m_method'> M Method Name: __init__(1)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: agents/agents/tm.py</div><div id='n_file'> N File Name: agents/agents/tm.py</div><div id='m_start'> M Start Line: 144</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 249</div><div id='n_end'> N End Line: 260</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        &#47&#47 TODO:
        &#47&#47 Avoid looping through dataset twice
        <a id="change">print("Fitting..."</a><a id="change">)</a>
        for chunk in dataset.chunk_dataset(
            select_fields=self.vector_fields, filters=filters, chunksize=chunksize
        ):
            vectors = self.get_field_across_documents(</code></pre><h3>After Change</h3><pre><code class='java'>
            select_fields=self.vector_fields,
            show_progress_bar=True,
        )
        <a id="change">pup.run()</a>

        return
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/relevanceai/relevanceai/commit/f51b2915298b5dbfdbf5c72d6557293fcd138894#diff-71a8d91ad12dca31d84b98b428a67f1ad7f7cb702d82b6c6f2b4bdb00bfd92a1L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20339866</div><div id='project'> Project Name: relevanceai/relevanceai</div><div id='commit'> Commit Name: f51b2915298b5dbfdbf5c72d6557293fcd138894</div><div id='time'> Time: 2022-08-28</div><div id='author'> Author: joseph.twin@relevance.ai</div><div id='file'> File Name: relevanceai/operations_new/cluster/batch/ops.py</div><div id='m_class'> M Class Name: BatchClusterOps</div><div id='n_method'> N Class Name: BatchClusterOps</div><div id='m_method'> M Method Name: run(4)</div><div id='n_method'> N Method Name: run(4)</div><div id='m_parent_class'> M Parent Class: ClusterOps,BatchClusterTransform</div><div id='n_parent_class'> N Parent Class: ClusterOps,BatchClusterTransform</div><div id='m_file'> M File Name: relevanceai/operations_new/cluster/batch/ops.py</div><div id='n_file'> N File Name: relevanceai/operations_new/cluster/batch/ops.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 91</div><BR>