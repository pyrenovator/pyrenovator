<html><h3>Pattern ID :34176
</h3><img src='97597221.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            iterable = range(0, n_rows, batch_size)

            if verbose:
                iterable<a id="change"> = </a><a id="change">tqdm.tqdm(</a>iterable<a id="change">)</a>

            for i in iterable:
                row = dset[i : i + batch_size]
                is_unpop = np.isnan(row).any(axis=1)  &#47&#47 (batch_size,)</code></pre><h3>After Change</h3><pre><code class='java'>
                is_unpop = np.isnan(row).any(axis=1)  &#47&#47 (batch_size,)
                unpop_rows.extend(list(np.where(is_unpop)[0] + i))

            <a id="change">print(</a>"\rFinding unpopulated rows: 100% done"<a id="change">, end="")</a>

        return np.array(unpop_rows)

    @staticmethod</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/197099cfa2636b52afd0a77557d6f45ef5c53b36#diff-4b150e405b68036f0aeb504c616bf01a24cfcf87b52f78ac1fe6fd27dcb6df5dL301' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97597221</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 197099cfa2636b52afd0a77557d6f45ef5c53b36</div><div id='time'> Time: 2021-04-15</div><div id='author'> Author: francesco.casalegno@gmail.com</div><div id='file'> File Name: src/bluesearch/utils.py</div><div id='m_class'> M Class Name: H5</div><div id='n_method'> N Class Name: H5</div><div id='m_method'> M Method Name: find_unpopulated_rows(4)</div><div id='n_method'> N Method Name: find_unpopulated_rows(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bluesearch/utils.py</div><div id='n_file'> N File Name: src/bluesearch/utils.py</div><div id='m_start'> M Start Line: 302</div><div id='m_end'> M End Line: 310</div><div id='n_start'> N Start Line: 301</div><div id='n_end'> N End Line: 314</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            iterable = range(0, n_indices, batch_size)

            if verbose:
                iterable<a id="change"> = </a><a id="change">tqdm.tqdm(</a>iterable<a id="change">)</a>

            for i in iterable:
                subarray = dset[sorted_indices[i : i + batch_size]]  &#47&#47 (batch_size, dim)
                final_res_l.append(subarray)</code></pre><h3>After Change</h3><pre><code class='java'>
                final_res_l.append(subarray)

            final_res = np.concatenate(final_res_l, axis=0)
            <a id="change">print(</a>"\rLoading H5: 100% done"<a id="change">, end="")</a>
            return final_res[unargsort]

    @staticmethod
    def write(h5_path, dataset_name, data, indices):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/197099cfa2636b52afd0a77557d6f45ef5c53b36#diff-4b150e405b68036f0aeb504c616bf01a24cfcf87b52f78ac1fe6fd27dcb6df5dL367' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97597225</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 197099cfa2636b52afd0a77557d6f45ef5c53b36</div><div id='time'> Time: 2021-04-15</div><div id='author'> Author: francesco.casalegno@gmail.com</div><div id='file'> File Name: src/bluesearch/utils.py</div><div id='m_class'> M Class Name: H5</div><div id='n_method'> N Class Name: H5</div><div id='m_method'> M Method Name: load(5)</div><div id='n_method'> N Method Name: load(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bluesearch/utils.py</div><div id='n_file'> N File Name: src/bluesearch/utils.py</div><div id='m_start'> M Start Line: 406</div><div id='m_end'> M End Line: 412</div><div id='n_start'> N Start Line: 406</div><div id='n_end'> N End Line: 415</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if debug: &#47&#47 only convert one tarball when debugging
                break

        progress_state["bar"]<a id="change"> = </a><a id="change">tqdm.tqdm(desc="Process tfrecords",
            total=total_records, initial=progress_state[&quotcur&quot])</a>
        pool.close()
        pool.join()
        progress_state["bar"].close()
</code></pre><h3>After Change</h3><pre><code class='java'>
    pool = NumberPool(processes=nworkers, offset=1)
    temp_dir = tempfile.mkdtemp()
    total_records = 0
    <a id="change">print(</a>"Extracting tfrecords from tarballs to %s..." % temp_dir<a id="change">)</a>

    try:
        for tar_name in tqdm(os.listdir(input_path), desc="Extract tfrecords", position=0, unit="tars", leave=False):
            if os.path.splitext(tar_name)[1] != ".tar":</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cmpute/d3d/commit/7ade078b290087fb174bbe56a8adf65eaf433f22#diff-357db998920693013467b6c06668ac640527369e2aa65e44356e99b75d084389L258' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97597228</div><div id='project'> Project Name: cmpute/d3d</div><div id='commit'> Commit Name: 7ade078b290087fb174bbe56a8adf65eaf433f22</div><div id='time'> Time: 2020-05-08</div><div id='author'> Author: cmpute@qq.com</div><div id='file'> File Name: d3d/dataset/waymo/converter.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: convert_dataset_inpath(4)</div><div id='n_method'> N Method Name: convert_dataset_inpath(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: d3d/dataset/waymo/converter.py</div><div id='n_file'> N File Name: d3d/dataset/waymo/converter.py</div><div id='m_start'> M Start Line: 260</div><div id='m_end'> M End Line: 301</div><div id='n_start'> N Start Line: 268</div><div id='n_end'> N End Line: 286</div><BR>