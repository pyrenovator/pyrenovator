<html><h3>Pattern ID :29769
</h3><img src='88117601.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if norm_feature:
        node_feat = th.nn.functional.normalize(node_feat, p=2.0, dim=-1)
        
        degs = <a id="change">graph.out_degrees().float()</a>.clamp(min=1)
        norm = th.pow(degs, -0.5)
        shp = norm.shape + (1,) * (node_feat.dim() - 1)
        norm = th.reshape(norm, shp)</code></pre><h3>After Change</h3><pre><code class='java'>
    print(&quot&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 Feature info: &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&quot)
    print(&quotNode\&quots feature shape:{}&quot.format(node_feat.shape))
    print(&quotWalk\&quots feature shape:{}&quot.format(walk_feat.shape))
    print(<a id="change">&quotEdge\&quots feature shape:{}&quot.format(</a>edge_feat.shape<a id="change">)</a>)
    
    graph_data = (graph, labels, tr_label_idx, val_label_idx, test_label_idx, features)
    return graph_data</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/langgege-cqu/maxp_dgl/commit/5f428bb0d6bfb9dad16f32ca3d65785469b69c00#diff-92c9897b4d19041ed9f91c038758158776764ac7247e3546223d85e551a3241cL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88117601</div><div id='project'> Project Name: langgege-cqu/maxp_dgl</div><div id='commit'> Commit Name: 5f428bb0d6bfb9dad16f32ca3d65785469b69c00</div><div id='time'> Time: 2021-12-11</div><div id='author'> Author: 8747734+bugczw@user.noreply.gitee.com</div><div id='file'> File Name: maxp_model_czw/unimp/util.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_dgl_graph(1)</div><div id='n_method'> N Method Name: load_dgl_graph(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: maxp_model_czw/unimp/util.py</div><div id='n_file'> N File Name: maxp_model_czw/unimp/util.py</div><div id='m_start'> M Start Line: 8</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            y_seg = data[3]

            x_def, flow, disp_field = model((x, y))
            def_out = reg_model_nn(<a id="change">x_seg.cuda().float()</a>, flow.cuda())
            tar = y.detach().cpu().numpy()[0, 0, :, :, :]
            jac_det = utils.jacobian_determinant_vxm(flow.detach().cpu().numpy()[0, :, :, :, :])
            line = utils.dice_val_substruct(def_out.long(), y_seg.long(), stdy_idx)</code></pre><h3>After Change</h3><pre><code class='java'>
    model_idx = -1
    img_size = (160, 192, 224)
    weights = [1, 0.02]
    model_folder = <a id="change">&quotVxmDiff_mse_{}_diffusion_{}/&quot.format(</a>weights[0], weights[1]<a id="change">)</a>
    model_dir = &quotexperiments/&quot + model_folder
    dict = utils.process_label()
    if not os.path.exists(&quotQuantitative_Results/&quot):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/junyuchen245/transmorph_transformer_for_medical_image_registration/commit/e5a98a7d24a8aa3b00f0f029844e6afc41b5c58a#diff-c245adf19ff4a020f2af766daeaf4fb0887f5e42e254a900480000379efebbdbL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88117602</div><div id='project'> Project Name: junyuchen245/transmorph_transformer_for_medical_image_registration</div><div id='commit'> Commit Name: e5a98a7d24a8aa3b00f0f029844e6afc41b5c58a</div><div id='time'> Time: 2022-09-07</div><div id='author'> Author: jchen245@jhmi.edu</div><div id='file'> File Name: IXI/Baseline_registration_methods/VoxelMorph-diff/infer.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: IXI/Baseline_registration_methods/VoxelMorph-diff/infer.py</div><div id='n_file'> N File Name: IXI/Baseline_registration_methods/VoxelMorph-diff/infer.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Load data
    dataset = MNIST(root=&quot./data&quot, download=True)
    DATA_SPLIT = [50000, 10000]
    train_data, test_data = random_split(<a id="change">dataset.data.float()</a>.unsqueeze(dim=1), DATA_SPLIT)
    train_label, test_label = random_split(dataset.targets, DATA_SPLIT)
    train_loader = DataLoader(dataset=MNISTDataset(train_data, train_label),
                              batch_size=100,</code></pre><h3>After Change</h3><pre><code class='java'>
    eval_bar.close()

    &#47&#47 Save model
    torch.save(model.state_dict(), <a id="change">&quot./model/capsnet_ep{}_acc{}.pt&quot.format(</a>EPOCHES, correct / total<a id="change">)</a>)


if __name__ == &quot__main__&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/riroaki/capsnet/commit/408b1e77f4e40589def9c313c0b11beaa88f2108#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88117604</div><div id='project'> Project Name: riroaki/capsnet</div><div id='commit'> Commit Name: 408b1e77f4e40589def9c313c0b11beaa88f2108</div><div id='time'> Time: 2020-03-08</div><div id='author'> Author: aki@akideMacBook-Pro.local</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if data_selected == &quotag&quot:
                    loss = criterion(output, labels)
                else:
                    loss = criterion(output, <a id="change">labels.float()</a>)
                optimizer.zero_grad()
                loss.backward()
                clip_grad_norm_(model.parameters(), max_norm=1)</code></pre><h3>After Change</h3><pre><code class='java'>
            print(&quotfinish training, avg loss: {}/{}, begin to evaluate&quot.format(avg_loss, last_train_avg_loss))
            poison_success_rate_dev = evaluaion(dev_loader_poison)
            clean_acc = evaluaion(test_loader_clean)
            print(<a id="change">&quotpoison success rate in dev: {}. clean acc: {}&quot
                  .format(</a>poison_success_rate_dev, clean_acc<a id="change">)</a>)
            if poison_success_rate_dev &gt; best_dev_scuess_rate_poison:
                best_dev_scuess_rate_poison = poison_success_rate_dev
            if avg_loss &gt; last_train_avg_loss:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thunlp/hiddenkiller/commit/9a7b32039f64ade7ff805db0334c232d147b245d#diff-4d1f76a263b960b20f8bddb2fea7d7d157c96def80cca6e14e4783db514fab0cL102' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88117605</div><div id='project'> Project Name: thunlp/hiddenkiller</div><div id='commit'> Commit Name: 9a7b32039f64ade7ff805db0334c232d147b245d</div><div id='time'> Time: 2021-09-24</div><div id='author'> Author: yangyichen6666@gmail.com</div><div id='file'> File Name: experiments/run_poison_lstm.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(0)</div><div id='n_method'> N Method Name: train(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: experiments/run_poison_lstm.py</div><div id='n_file'> N File Name: experiments/run_poison_lstm.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 108</div><div id='n_end'> N End Line: 141</div><BR>