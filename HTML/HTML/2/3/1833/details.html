<html><h3>Pattern ID :1833
</h3><img src='8342207.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        device = prediction.device
        target_new: Tensor = one_hot(target_integer, nb_classes).to(device)

        loss<a id="change"> = </a><a id="change">nn.CrossEntropyLoss(reduction="none")</a>
        return loss(prediction.float(), target_new.float())


class BinaryCrossEntropyLoss(LossFunction):</code></pre><h3>After Change</h3><pre><code class='java'>
            )
            
        else:
            <a id="change">assert </a>False, "Shouldn&quott reach here."

        target_one_hot: Tensor = (
            one_hot(target_integer, nb_classes)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/icecube/graphnet/commit/d939b70153ae1db8a15e40663988ec53235d92fd#diff-a42f8fe767ff8c2b3134063639c0129cd38051eee009c856014a885ec5d3baaeL136' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8342207</div><div id='project'> Project Name: icecube/graphnet</div><div id='commit'> Commit Name: d939b70153ae1db8a15e40663988ec53235d92fd</div><div id='time'> Time: 2022-12-03</div><div id='author'> Author: 33733987+MortenHolmRep@users.noreply.github.com</div><div id='file'> File Name: src/graphnet/training/loss_functions.py</div><div id='m_class'> M Class Name: CrossEntropyLoss</div><div id='n_method'> N Class Name: CrossEntropyLoss</div><div id='m_method'> M Method Name: _forward(3)</div><div id='n_method'> N Method Name: _forward(3)</div><div id='m_parent_class'> M Parent Class: LossFunction</div><div id='n_parent_class'> N Parent Class: LossFunction</div><div id='m_file'> M File Name: src/graphnet/training/loss_functions.py</div><div id='n_file'> N File Name: src/graphnet/training/loss_functions.py</div><div id='m_start'> M Start Line: 136</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 187</div><div id='n_end'> N End Line: 194</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    dataloader_val = get_dataloader(config, dataset_val, &quottest&quot, False)

    &#47&#47 3. Define criterion
    criterion<a id="change"> = </a><a id="change">nn.CrossEntropyLoss()</a>

    &#47&#47 4. Define lr_scheduler
    gen_scheduler = None
    dis_scheduler = None</code></pre><h3>After Change</h3><pre><code class='java'>

    if config.MODEL.RESUME:
        assert os.path.isfile(config.MODEL.RESUME + &quot.pdparams&quot) is True
        <a id="change">assert </a>os.path.isfile(config.MODEL.RESUME + &quot.pdopt&quot) is True
        &#47&#47 load model weights
        model_state = paddle.load(config.MODEL.RESUME + &quot.pdparams&quot)
        gen_net.set_dict(model_state["gen_state_dict"])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/30234ce05046d4e4e74dc12cfdc5f4ad609e4de1#diff-36a54ae50c9f2496a501ba835db77621911064b479d977c9967c5af5afbd6fbeL205' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8342205</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 30234ce05046d4e4e74dc12cfdc5f4ad609e4de1</div><div id='time'> Time: 2021-08-18</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: gan/transGAN/main_single_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: gan/transGAN/main_single_gpu.py</div><div id='n_file'> N File Name: gan/transGAN/main_single_gpu.py</div><div id='m_start'> M Start Line: 225</div><div id='m_end'> M End Line: 361</div><div id='n_start'> N Start Line: 243</div><div id='n_end'> N End Line: 403</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.dropout = nn.Dropout(config[&quotdropout_prob&quot])

        self.loss_type = config[&quotloss_type&quot]
        self.ce_loss<a id="change"> = </a><a id="change">nn.CrossEntropyLoss(reduction=&quotnone&quot)</a> &#47&#47 we only need compute the loss at the masked position
        self.mask_item_length = int(self.mask_ratio * self.max_item_list_length)
        self.initializer_range = config[&quotinitializer_range&quot]
        self.apply(self._init_weights)</code></pre><h3>After Change</h3><pre><code class='java'>

        self.loss_type = config[&quotloss_type&quot]
        try:
            <a id="change">assert </a>self.loss_type in [&quotBPR&quot, &quotCE&quot]
        except:
            raise AssertionError("Make sure &quotloss_type&quot in [&quotBPR&quot, &quotCE&quot]!")
        &#47&#47 we only need compute the loss at the masked position</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/50813513da4c5d1c81678862ec4a5f3b64ddf571#diff-0d774f613b2afe27340a63dbecd6b0840e54b266f785bb3d6eb0052232cf9e9aL37' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8342208</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 50813513da4c5d1c81678862ec4a5f3b64ddf571</div><div id='time'> Time: 2020-10-14</div><div id='author'> Author: hui.wang@ruc.edu.cn</div><div id='file'> File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='m_class'> M Class Name: BERT4Rec</div><div id='n_method'> N Class Name: BERT4Rec</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: SequentialRecommender</div><div id='n_parent_class'> N Parent Class: SequentialRecommender</div><div id='m_file'> M File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='n_file'> N File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='m_start'> M Start Line: 59</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 66</div><BR>