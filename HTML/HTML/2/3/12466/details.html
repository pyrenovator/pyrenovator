<html><h3>Pattern ID :12466
</h3><img src='42388487.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Returns:
            The run name.
        
        return <a id="change">cast(</a>str, self.entrypoint_args[RUN_NAME_OPTION]<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        Returns:
            The run name.
        
        run_id<a id="change"> = </a><a id="change">cast(</a>str, self.entrypoint_args[RUN_ID_OPTION]<a id="change">)</a>
        return f"{pipeline_name}-{run_id}"
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/36e3dd3bca490b50572f94af098b212118330470#diff-735be7d3f227af190237abf0c117c0c26ba8d09f5caf955e403e078b09442710L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388487</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 36e3dd3bca490b50572f94af098b212118330470</div><div id='time'> Time: 2022-06-14</div><div id='author'> Author: schustmi@users.noreply.github.com</div><div id='file'> File Name: src/zenml/integrations/github/orchestrators/github_actions_entrypoint_configuration.py</div><div id='m_class'> M Class Name: GitHubActionsEntrypointConfiguration</div><div id='n_method'> N Class Name: GitHubActionsEntrypointConfiguration</div><div id='m_method'> M Method Name: get_run_name(2)</div><div id='n_method'> N Method Name: get_run_name(2)</div><div id='m_parent_class'> M Parent Class: StepEntrypointConfiguration</div><div id='n_parent_class'> N Parent Class: StepEntrypointConfiguration</div><div id='m_file'> M File Name: src/zenml/integrations/github/orchestrators/github_actions_entrypoint_configuration.py</div><div id='n_file'> N File Name: src/zenml/integrations/github/orchestrators/github_actions_entrypoint_configuration.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 66</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return [self._gen_linter_message(desc, arg_def.lineno)]
        linter_errors = []
        if type_name == "Dict":
            sub_type_tuple = <a id="change">cast(</a>ast.Tuple, complex_type_def.slice.value<a id="change">)</a>
            for el in sub_type_tuple.elts:
                if not isinstance(el, ast.Name):
                    desc = "Dict can only have primitive types"
                    linter_errors.append(self._gen_linter_message(desc, arg_def.lineno))</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            sub_type = complex_type_def.slice
        if type_name == "Dict":
            sub_type_tuple<a id="change"> = </a><a id="change">cast(</a>ast.Tuple, sub_type<a id="change">)</a>
            for el in sub_type_tuple.elts:
                if not isinstance(el, ast.Name):
                    desc = "Dict can only have primitive types"
                    linter_errors.append(self._gen_linter_message(desc, arg_def.lineno))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/torchx/commit/113c2870ac233d66780276019bc097b0ce6a6463#diff-bb67825afc275628a375ec5c10c259963748e84e36defaa9c5cbe15a0365548fL127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388468</div><div id='project'> Project Name: pytorch/torchx</div><div id='commit'> Commit Name: 113c2870ac233d66780276019bc097b0ce6a6463</div><div id='time'> Time: 2021-06-07</div><div id='author'> Author: aivanou@fb.com</div><div id='file'> File Name: torchx/specs/file_linter.py</div><div id='m_class'> M Class Name: TorchxFunctionArgsValidator</div><div id='n_method'> N Class Name: TorchxFunctionArgsValidator</div><div id='m_method'> M Method Name: _validate_arg_def(3)</div><div id='n_method'> N Method Name: _validate_arg_def(3)</div><div id='m_parent_class'> M Parent Class: TorchxFunctionValidator</div><div id='n_parent_class'> N Parent Class: TorchxFunctionValidator</div><div id='m_file'> M File Name: torchx/specs/file_linter.py</div><div id='n_file'> N File Name: torchx/specs/file_linter.py</div><div id='m_start'> M Start Line: 143</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 139</div><div id='n_end'> N End Line: 171</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
  def __call__(self, *args, **kwargs) -&gt; Any:
    if Device.DEFAULT not in ["GPU", "CLANG", "METAL", "CUDA"]: return self.fxn(*args, **kwargs)  &#47&#47 only jit on the GPU codegen
    &#47&#47 NOTE: this cast is needed since although we know realize will create a ".realized" DeviceBuffer, the type checker doesn&quott
    input_rawbuffers: Dict[Union[int, str], RawBuffer] = {cast(Union[int, str], k):<a id="change">cast(</a>CompiledBuffer, v.realize().lazydata.realized<a id="change">)</a>.raw() for k,v in itertools.chain(enumerate(args), kwargs.items()) if isinstance(v, Tensor)}
    assert len(input_rawbuffers) != 0, "no inputs to JIT"
    if self.cnt &gt;= 2:
      for (j,i),idx in self.input_replace.items(): self.jit_cache[j][1][i] = input_rawbuffers[idx]</code></pre><h3>After Change</h3><pre><code class='java'>
  def __call__(self, *args, **kwargs) -&gt; Any:
    if Device.DEFAULT not in ["GPU", "CLANG", "METAL", "CUDA"]: return self.fxn(*args, **kwargs)  &#47&#47 only jit on the GPU codegen
    &#47&#47 NOTE: this cast is needed since although we know realize will create a ".realized" DeviceBuffer, the type checker doesn&quott
    input_buffers: Dict[Union[int, str], CompiledBuffer] = {cast(Union[int, str], k):<a id="change">cast(</a>CompiledBuffer, v.realize().lazydata.realized<a id="change">)</a> for k,v in itertools.chain(enumerate(args), kwargs.items()) if isinstance(v, Tensor)}
    &#47&#47 TODO: check the shapetrackers on the CompiledBuffers are what we jitted
    input_rawbuffers<a id="change">: Dict[Union[int, str], RawBuffer] = </a>{k:v.raw() for k,v in input_buffers.items()}
    assert len(input_rawbuffers) != 0, "no inputs to JIT"
    if self.cnt &gt;= 2:
      for (j,i),idx in self.input_replace.items(): self.jit_cache[j][1][i] = input_rawbuffers[idx]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/fe0e8a306f053e9498428641ada3b6df64052367#diff-833a88bbe826647342579a556cf0c48822d5dd33295631f31f4a4658ce99c766L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388467</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: fe0e8a306f053e9498428641ada3b6df64052367</div><div id='time'> Time: 2023-03-12</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: tinygrad/jit.py</div><div id='m_class'> M Class Name: TinyJit</div><div id='n_method'> N Class Name: TinyJit</div><div id='m_method'> M Method Name: __call__(1)</div><div id='n_method'> N Method Name: __call__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tinygrad/jit.py</div><div id='n_file'> N File Name: tinygrad/jit.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Find a service created by a previous run of this step
    step_env = cast(StepEnvironment, Environment()[STEP_ENVIRONMENT_NAME])
    try:
        service = <a id="change">cast(
            </a>SeldonDeploymentService,
            &#47&#47 TODO [HIGH]: catch errors that are raised because a previous step used
            &#47&#47   an integration that is no longer available
            load_last_service_from_step(
                pipeline_name=step_env.pipeline_name,
                step_name=config.step_name or step_env.step_name,
                step_context=context,
            )<a id="change">,
        )</a>
    except KeyError:
        &#47&#47 pipeline or step name not found (e.g. never ran before)
        service = None
    except ValidationError:</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    try:
        service<a id="change"> = </a><a id="change">cast(
            </a>SeldonDeploymentService,
            &#47&#47 TODO [HIGH]: catch errors that are raised because a previous step used
            &#47&#47   an integration that is no longer available
            load_last_service_from_step(
                pipeline_name=step_env.pipeline_name,
                step_name=step_name,
                step_context=context,
            )<a id="change">,
        )</a>
    except KeyError as e:
        &#47&#47 pipeline or step name not found (e.g. never ran before)
        logger.error(f"No service found: {str(e)}.")
        service = None</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/4c559c1a147f2c03ea6accd96f4ac996f443302a#diff-9a0003867cdbf87ca29012ac95b9e60331020f9713b37bd1d9137e6f7e2742afL178' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388478</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 4c559c1a147f2c03ea6accd96f4ac996f443302a</div><div id='time'> Time: 2022-04-06</div><div id='author'> Author: stefan@zenml.io</div><div id='file'> File Name: examples/seldon_deployment/pipeline.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: seldon_model_deployer(4)</div><div id='n_method'> N Method Name: seldon_model_deployer(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/seldon_deployment/pipeline.py</div><div id='n_file'> N File Name: examples/seldon_deployment/pipeline.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 281</div><div id='n_start'> N Start Line: 208</div><div id='n_end'> N End Line: 311</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def _write_item(self, item, index):
        image_info = OrderedDict([
            ("id", str(<a id="change">cast(</a>item.attributes.get(&quotframe&quot), int, index<a id="change">)</a>)),
        ])
        filename = item.id + CvatPath.IMAGE_EXT
        image_info["name"] = filename</code></pre><h3>After Change</h3><pre><code class='java'>

    def _write_item(self, item, index):
        if not self._context._reindex:
            index = <a id="change">cast(</a>item.attributes.get(&quotframe&quot), int, index<a id="change">)</a>
        image_info<a id="change"> = </a>OrderedDict([ ("id", str(index)), ])
        filename = item.id + CvatPath.IMAGE_EXT
        image_info["name"] = filename
        if item.has_image:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/f6254df2ad848e02e340d7820c764731fcc7ecae#diff-c37bc71ab06b89607235a6b513650436e3a73f4ee0debbf11200e5540c56fa78L160' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388492</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: f6254df2ad848e02e340d7820c764731fcc7ecae</div><div id='time'> Time: 2020-09-16</div><div id='author'> Author: maxim.zhiltsov@intel.com</div><div id='file'> File Name: datumaro/plugins/cvat_format/converter.py</div><div id='m_class'> M Class Name: _SubsetWriter</div><div id='n_method'> N Class Name: _SubsetWriter</div><div id='m_method'> M Method Name: _write_item(3)</div><div id='n_method'> N Method Name: _write_item(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: datumaro/plugins/cvat_format/converter.py</div><div id='n_file'> N File Name: datumaro/plugins/cvat_format/converter.py</div><div id='m_start'> M Start Line: 161</div><div id='m_end'> M End Line: 163</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 163</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    emb_layer = cast(types.Gradients, output_spec[grad_layer]).grad_for

    &#47&#47 Get the class that the gradients were computed for.
    grad_class_key = <a id="change">cast(</a>types.Gradients,
                          output_spec[grad_layer]<a id="change">)</a>.grad_target_field_key

    &#47&#47 Get outputs using model.predict().
    dataset_outputs = list(</code></pre><h3>After Change</h3><pre><code class='java'>
      raise ValueError(f&quotConfigured grad_layer, {grad_layer}, must be a &quot
                       &quotGradients field&quot)

    field_spec = <a id="change">cast(</a>types.Gradients, field_spec<a id="change">)</a>
    emb_layer = field_spec.grad_for
    &#47&#47 Get the class that the gradients were computed for.
    grad_class_key<a id="change"> = </a>field_spec.grad_target_field_key

    &#47&#47 Get outputs using model.predict().
    dataset_outputs = list(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/ecd3a6623f2a0d45ae26c74d0d72fb68b7bcb9aa#diff-61367098c3897ea3dcabcb9e0141504af12ceb50462d318b1cb75992ccc2162aL91' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42388490</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: ecd3a6623f2a0d45ae26c74d0d72fb68b7bcb9aa</div><div id='time'> Time: 2022-11-03</div><div id='author'> Author: ryanmullins@google.com</div><div id='file'> File Name: lit_nlp/components/tcav.py</div><div id='m_class'> M Class Name: TCAV</div><div id='n_method'> N Class Name: TCAV</div><div id='m_method'> M Method Name: run_with_metadata(6)</div><div id='n_method'> N Method Name: run_with_metadata(6)</div><div id='m_parent_class'> M Parent Class: lit_components.Interpreter</div><div id='n_parent_class'> N Parent Class: lit_components.Interpreter</div><div id='m_file'> M File Name: lit_nlp/components/tcav.py</div><div id='n_file'> N File Name: lit_nlp/components/tcav.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 145</div><div id='n_start'> N Start Line: 127</div><div id='n_end'> N End Line: 163</div><BR>