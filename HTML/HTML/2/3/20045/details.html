<html><h3>Pattern ID :20045
</h3><img src='65713688.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        print(df["y"].min())
        print(df["y"].mean())
        print(df["y"].max())
        df["y"] = <a id="change">df["y"]</a>.add(2 * df["y"].max()).div(3 * df["y"].max())
        m = NeuralProphet(
            n_changepoints=0,
            &#47&#47 trend_reg=1,</code></pre><h3>After Change</h3><pre><code class='java'>
        q = df["y"].quantile(0.9)
        &#47&#47 w = max - min
        w = q - min
        shift<a id="change"> = </a>min - 0.125 * w
        scale = 1.25 * w

        df["y"] = <a id="change">df["y"].sub(shift).div(</a>scale<a id="change">)</a>

        m = NeuralProphet(
            n_changepoints=0,
            &#47&#47 trend_reg=1,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/31384e7e32de4aa38ac319528ebacac026bb0746#diff-98bfe78f0e8d895dd454b5eef6f6485a80526776ad3b6525a14117029bd1eacbL348' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65713688</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 31384e7e32de4aa38ac319528ebacac026bb0746</div><div id='time'> Time: 2020-11-05</div><div id='author'> Author: ourownstory@users.noreply.github.com</div><div id='file'> File Name: tests/test_integration.py</div><div id='m_class'> M Class Name: IntegrationTests</div><div id='n_method'> N Class Name: IntegrationTests</div><div id='m_method'> M Method Name: test_air_data(1)</div><div id='n_method'> N Method Name: test_air_data(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_integration.py</div><div id='n_file'> N File Name: tests/test_integration.py</div><div id='m_start'> M Start Line: 348</div><div id='m_end'> M End Line: 367</div><div id='n_start'> N Start Line: 348</div><div id='n_end'> N End Line: 357</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        bright_regions = img.sum(1) &gt; brightness_threshold * img.shape[1]
        for ch in range(img.shape[1]):
            gnch = generated_noise[:, ch]
            gnch[bright_regions] = <a id="change">gnch[bright_regions]</a> * -1
            generated_noise[:, ch] = gnch

        anom = (anom.int() + generated_noise).clamp(0, 255).byte()</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 invert noise if difference of malformed and original is less than threshold and inverted difference is higher
        diff = ((anom.int() + generated_noise).clamp(0, 255) - anom.int())
        diff = diff.reshape(anom.size(0), -1).sum(1).float().div(np.prod(anom.shape)).abs()
        diffi<a id="change"> = </a>((anom.int() - generated_noise).clamp(0, 255) - anom.int())
        diffi = <a id="change">diffi.reshape(anom.size(0), -1).sum(1).float().div(</a>np.prod(anom.shape)<a id="change">)</a>.abs()
        inv = [i for i, (d, di) in enumerate(zip(diff, diffi)) if d &lt; invert_threshold and di &gt; d]
        generated_noise[inv] = -generated_noise[inv]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liznerski/fcdd/commit/d110aa8b141dc13f47156da913a6b4f9d64ddc74#diff-fb7d9650a48b1de740043527c5d5e928e02fb69b57694006eafa311d213e906cL133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65713673</div><div id='project'> Project Name: liznerski/fcdd</div><div id='commit'> Commit Name: d110aa8b141dc13f47156da913a6b4f9d64ddc74</div><div id='time'> Time: 2020-10-12</div><div id='author'> Author: p_liznersk13@cs.uni-kl.de</div><div id='file'> File Name: python/fcdd/datasets/online_superviser.py</div><div id='m_class'> M Class Name: OnlineSuperviser</div><div id='n_method'> N Class Name: OnlineSuperviser</div><div id='m_method'> M Method Name: __malformed_normal(8)</div><div id='n_method'> N Method Name: __malformed_normal(8)</div><div id='m_parent_class'> M Parent Class: ImgGTTargetTransform</div><div id='n_parent_class'> N Parent Class: ImgGTTargetTransform</div><div id='m_file'> M File Name: python/fcdd/datasets/online_superviser.py</div><div id='n_file'> N File Name: python/fcdd/datasets/online_superviser.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 146</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if &quoty&quot in df:
        df[&quoty_scaled&quot] = np.empty_like(df[&quoty&quot])
        not_na = df[&quoty&quot].notna()
        <a id="change">df.loc[not_na, &quoty_scaled&quot]</a> = (df.loc[not_na,&quoty&quot].values - data_params.y_shift) / data_params.y_scale
    return df

</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 not_na = df[&quoty&quot].notna()
            &#47&#47 df.loc[not_na, &quoty_scaled&quot] = (df.loc[not_na, &quoty&quot].values - data_params[&quoty&quot].shift) / data_params[&quoty&quot].scale
        else:
            df[name]<a id="change"> = </a>df[name].sub(data_params[name].shift)
            df[name] = <a id="change">df[name].div(</a>data_params[name].scale<a id="change">)</a>
    return df


def check_dataframe(df):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/36d4ccf3da490fdc7f501683e8aae4d29f1c4ea4#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65713695</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 36d4ccf3da490fdc7f501683e8aae4d29f1c4ea4</div><div id='time'> Time: 2020-06-19</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: normalize(2)</div><div id='n_method'> N Method Name: normalize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 104</div><div id='m_end'> M End Line: 109</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 85</div><BR>