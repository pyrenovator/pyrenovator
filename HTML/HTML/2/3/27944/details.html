<html><h3>Pattern ID :27944
</h3><img src='82869760.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        )
    except Exception:
        debug_output = ec2_connection.run(f"cat {logfile}")
        <a id="change">LOGGER.error(f"Caught exception while trying to run test via fabric. Output: {debug_output.stdout}"</a><a id="change">)</a>
        raise

    &#47&#47 LOGGER.info(test_output.stdout)  &#47&#47 Uncomment this line for a complete log dump
</code></pre><h3>After Change</h3><pre><code class='java'>
    container_name="smdebug",
    test_script=SMDEBUG_SCRIPT,
):
    large_shm_instance_types = ("p2.8xlarge"<a id="change">, "m4.16xlarge"</a>)
    shm_setting = " --shm-size=1g " if ec2_instance_type in large_shm_instance_types else " "
    framework = get_framework_from_image_uri(image_uri)
    container_test_local_dir = os.path.join("$HOME", "container_tests")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/916b474e76458ce7cb59dd869b144488106ac918#diff-2615da03033e01158ddc42ec4b3dd8cb3971e84d676125258996bbea5c20483dL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82869760</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 916b474e76458ce7cb59dd869b144488106ac918</div><div id='time'> Time: 2020-10-06</div><div id='author'> Author: 33526713+arjkesh@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/ec2/test_smdebug.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_smdebug_test(7)</div><div id='n_method'> N Method Name: run_smdebug_test(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/ec2/test_smdebug.py</div><div id='n_file'> N File Name: test/dlc_tests/ec2/test_smdebug.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                )

            except Exception as e: &#47&#47 pylint: disable=broad-except
                <a id="change">logger.error(
                    &quotError when running the suite, with the following error message:\n %s&quot</a>,
                    str(e)<a id="change">,
                    exc_info=True
                )</a>

            finally:
                progress_bar.value = progress_bar.value + 1
</code></pre><h3>After Change</h3><pre><code class='java'>
                else:
                    raise TypeError(f&quotDon\&quott know how to handle type {check.__class__.__name__} in suite.&quot)
            except Exception as exp:
                results.append((name<a id="change">, exp</a>))
            progress_bar.value = progress_bar.value + 1

        progress_bar.close()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/1d39905057831b3c7c8f52b8a507d7f210a87003#diff-7bda2846031bc61a66dcc0fafda47e5ccfdec1dafd25bd2b8f97c5a5bd85b456L46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82869763</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 1d39905057831b3c7c8f52b8a507d7f210a87003</div><div id='time'> Time: 2021-11-15</div><div id='author'> Author: matanper@gmail.com</div><div id='file'> File Name: mlchecks/base/suite.py</div><div id='m_class'> M Class Name: CheckSuite</div><div id='n_method'> N Class Name: CheckSuite</div><div id='m_method'> M Method Name: run(5)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: BaseCheck</div><div id='n_parent_class'> N Parent Class: BaseCheck</div><div id='m_file'> M File Name: mlchecks/base/suite.py</div><div id='n_file'> N File Name: mlchecks/base/suite.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 155</div><div id='n_end'> N End Line: 197</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    &#47&#47 check for valid types
    if not isinstance(input_op_names, (str, List)):
        <a id="change">logger.error(&quotstart op names must be passed as a string or a List of strings&quot</a><a id="change">)</a>
    &#47&#47 if passed start op name is only a string - create a list for connected graph
    if isinstance(input_op_names, str):
        input_op_names = [input_op_names]
    &#47&#47 if passed output op name is only a string - create a list for connected graph</code></pre><h3>After Change</h3><pre><code class='java'>
    assert sim.connected_graph is not None

    connected_graph = sim.connected_graph
    bn_conv_linear_pairs<a id="change">, _</a> = _find_all_batch_norms_to_fold(connected_graph, starting_op_names, output_op_names)
    _fold_given_auto_selected_batch_norms_scale(sim, bn_conv_linear_pairs)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/a46cd2aec955ef8814978c5c7b306e85692730cb#diff-20ad217060f226e6b244e1893b396fbd745234790405f01bca9c70f6f20b2c14L415' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82869764</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: a46cd2aec955ef8814978c5c7b306e85692730cb</div><div id='time'> Time: 2023-04-12</div><div id='author'> Author: quic_hitameht@quicinc.com</div><div id='file'> File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/batch_norm_fold.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fold_all_batch_norms_to_scale(3)</div><div id='n_method'> N Method Name: fold_all_batch_norms_to_scale(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/batch_norm_fold.py</div><div id='n_file'> N File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/batch_norm_fold.py</div><div id='m_start'> M Start Line: 428</div><div id='m_end'> M End Line: 439</div><div id='n_start'> N Start Line: 379</div><div id='n_end'> N End Line: 383</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            else:
                current_setting = tensor_quantizer.use_symmetric_encodings
            if current_setting != quantizer_setting:
                <a id="change">logger.error(&quotConflicting tensor quantizer settings for symmetric encodings&quot</a><a id="change">)</a>
                raise AssertionError(&quotConflicting tensor quantizer settings for symmetric encodings&quot)
        else:
            if setting_name in [ConfigDictKeys.IS_INPUT_QUANTIZED, ConfigDictKeys.IS_OUTPUT_QUANTIZED]:
                tensor_quantizer.enabled = quantizer_setting</code></pre><h3>After Change</h3><pre><code class='java'>
            elif setting_name == ConfigDictKeys.IS_SYMMETRIC:
                tensor_quantizer.use_symmetric_encodings = quantizer_setting
            elif setting_name == ConfigDictKeys.ENCODING_CONSTRAINTS:
                tensor_quantizer.encoding_min_max_fixed_vals = (quantizer_setting[ConfigDictKeys.MIN]<a id="change">,
                                                                quantizer_setting[ConfigDictKeys.MAX]</a>)
            if tensor_quantizer not in modified_tensor_quantizers:
                modified_tensor_quantizers[tensor_quantizer] = {setting_type}
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/23f8abbb32da75a3ba3b8ea5a1a118337f831424#diff-1bd15c8bfaa307f9af8fe1f6224cd49f00a7231a001807b033b3b8cf6d2140f9L699' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82869757</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 23f8abbb32da75a3ba3b8ea5a1a118337f831424</div><div id='time'> Time: 2023-04-10</div><div id='author'> Author: quic_klhsieh@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _modify_tensor_quantizers(4)</div><div id='n_method'> N Method Name: _modify_tensor_quantizers(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='m_start'> M Start Line: 700</div><div id='m_end'> M End Line: 733</div><div id='n_start'> N Start Line: 703</div><div id='n_end'> N End Line: 743</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if len(src_spans_ind) % 2 != 0:
        if do_log(log_counter):
            tokenizer._decode_use_source_tokenizer = True
            <a id="change">logging.error(f&quotCorrupted span in src string: [{tokenizer.convert_tokens_to_string(src_tokens)}]&quot</a><a id="change">)</a>
            tokenizer._decode_use_source_tokenizer = False
        log_counter += 1
        &#47&#47 this almost never happens but if it does it is usually because quotation is missing from the end of src_tokens
        &#47&#47 we temporary fix this by adding &quot"&quot to the end of src_tokens</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 switch tgt begin and end indices
        if s1 &gt; s2:
            s1, s2 = s2<a id="change">, s1</a>

        src2tgt_mapping[(beg, end)] = (s1, s2)

    quoted_pattern_maybe_space = re.compile(r&quot\"\s?([^"]*?)\s?\"&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/d1831a08fbcbbf17e0c02896e9f2a93ff2f032bb#diff-de5478b32694942df912b12112660fcc9c7f9d51959d2102be2269d954af92adL172' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82869758</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: d1831a08fbcbbf17e0c02896e9f2a93ff2f032bb</div><div id='time'> Time: 2021-06-27</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/model_utils/translation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: force_replace_quoted_params(4)</div><div id='n_method'> N Method Name: force_replace_quoted_params(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/model_utils/translation.py</div><div id='n_file'> N File Name: genienlp/model_utils/translation.py</div><div id='m_start'> M Start Line: 183</div><div id='m_end'> M End Line: 249</div><div id='n_start'> N Start Line: 185</div><div id='n_end'> N End Line: 241</div><BR>