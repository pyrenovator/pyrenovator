<html><h3>Pattern ID :39872
</h3><img src='113390611.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            &#47&#47 Compute y_dist
            if boxes.ndim == 3:
                y_dist<a id="change"> = </a><a id="change">abs(</a>boxes[idx][([2, 1], [1, 1])].mean() - y_center_sum / len(words)<a id="change">)</a>
            else:
                y_dist = abs(boxes[idx][[1, 3]].mean() - y_center_sum / len(words))
            &#47&#47 If y-center of the box is close enough to mean y-center of the line, same line
            if y_dist &lt; y_med / 2:</code></pre><h3>After Change</h3><pre><code class='java'>
        

        &#47&#47 Sort boxes, and straighten the boxes if they are rotated
        idxs<a id="change">, boxes</a> = self._sort_boxes(boxes)

        &#47&#47 Compute median for boxes heights
        y_med = np.median(boxes[:, 3] - boxes[:, 1])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mindee/doctr/commit/1dc33749c4dda6645031f57e549c2408e7ba4365#diff-a7a219493709069488879983ad4d7369d4a0737a0c1a1c2c6b3dfd7977f855d8L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113390611</div><div id='project'> Project Name: mindee/doctr</div><div id='commit'> Commit Name: 1dc33749c4dda6645031f57e549c2408e7ba4365</div><div id='time'> Time: 2021-12-29</div><div id='author'> Author: charles@mindee.co</div><div id='file'> File Name: doctr/models/builder.py</div><div id='m_class'> M Class Name: DocumentBuilder</div><div id='n_method'> N Class Name: DocumentBuilder</div><div id='m_method'> M Method Name: _resolve_lines(2)</div><div id='n_method'> N Method Name: _resolve_lines(2)</div><div id='m_parent_class'> M Parent Class: NestedObject</div><div id='n_parent_class'> N Parent Class: NestedObject</div><div id='m_file'> M File Name: doctr/models/builder.py</div><div id='n_file'> N File Name: doctr/models/builder.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Concatenate two noise batches of potentially different lengths

        &#47&#47 pad shorter batch to correct length
        pad = (0, <a id="change">abs(</a>len(noise_batch) - len(added_noise)<a id="change">)</a>)
        if len(noise_batch) &gt; len(added_noise):
            added_noise = torch.nn.functional.pad(added_noise, pad)
            added_lens<a id="change"> *= </a>len(added_noise) / len(noise_batch)
        else:
            noise_batch = torch.nn.functional.pad(noise_batch, pad)
            noise_lens *= len(noise_batch) / len(added_noise)</code></pre><h3>After Change</h3><pre><code class='java'>
            noise_batch = torch.nn.functional.pad(noise_batch, pad)
            noise_lens = noise_lens * noise_tensor_len / added_tensor_len

        noise_batch = torch.cat((noise_batch<a id="change">, added_noise</a>))
        noise_lens = torch.cat((noise_lens, added_lens))

        return noise_batch, noise_lens</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/be90d151c2c58a71bd9650cfdda902e5c6e5b76a#diff-ef8b6f991a9b7ae57f5a46dd563bace5d8980a13b59fd9e5db2dc9b1034afab3L214' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113390614</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: be90d151c2c58a71bd9650cfdda902e5c6e5b76a</div><div id='time'> Time: 2020-06-08</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: speechbrain/processing/speech_augmentation.py</div><div id='m_class'> M Class Name: AddNoise</div><div id='n_method'> N Class Name: AddNoise</div><div id='m_method'> M Method Name: _concat_batch(4)</div><div id='n_method'> N Method Name: _concat_batch(5)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/processing/speech_augmentation.py</div><div id='n_file'> N File Name: speechbrain/processing/speech_augmentation.py</div><div id='m_start'> M Start Line: 214</div><div id='m_end'> M End Line: 227</div><div id='n_start'> N Start Line: 219</div><div id='n_end'> N End Line: 230</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 calculate the total number of holiday parameters
    if user_specified_holiday_config is not None:
        n_holiday_parameters<a id="change"> += </a>sum([(<a id="change">abs(</a>i[0]<a id="change">)</a> + i[1] + 1) for i in list(user_specified_holiday_config.values())])
        train_holiday_names = list(user_specified_holiday_config.keys())
    if country is not None:
        n_holiday_parameters += n_country_holiday_params</code></pre><h3>After Change</h3><pre><code class='java'>
        train_holiday_names = list(user_specified_holiday_config.keys())
    if country is not None:
        train_holiday_names += list(country_holidays_set)
    return country_holidays_set<a id="change">, train_holiday_names</a>


def set_auto_seasonalities(dates, season_config, verbose=False):
    Set seasonalities that were left on auto or set by user.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/a68b8bd45473558a523388d060af2e0a73eedca6#diff-ca3a1d11f95939745e1fb0e851bf1796346c08cabbbf7afc37088bcdefd57f32L186' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113390636</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: a68b8bd45473558a523388d060af2e0a73eedca6</div><div id='time'> Time: 2020-07-06</div><div id='author'> Author: hansika.hewamalage@monash.edu</div><div id='file'> File Name: neuralprophet/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: set_holiday_configs(3)</div><div id='n_method'> N Method Name: set_holiday_configs(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/utils.py</div><div id='n_file'> N File Name: neuralprophet/utils.py</div><div id='m_start'> M Start Line: 188</div><div id='m_end'> M End Line: 220</div><div id='n_start'> N Start Line: 219</div><div id='n_end'> N End Line: 241</div><BR>