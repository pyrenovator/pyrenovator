<html><h3>Pattern ID :13058
</h3><img src='44038250.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        q_model = convert_fx(q_model)

        q_model.load_state_dict(state_dict)
        device = <a id="change">Device(</a><a id="change">DeviceType(</a>metadata.device<a id="change">))</a>

        return cls(
            model=model,
            model_quant=q_model,</code></pre><h3>After Change</h3><pre><code class='java'>
        q_model = convert_fx(q_model)

        q_model.load_state_dict(state_dict)
        device = <a id="change">Device.from_str(</a>metadata.device<a id="change">)</a>

        return cls(
            model=model,
            model_quant=q_model,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nebuly-ai/nebullvm/commit/052777e202c7b5a2737ba57d61200827771e0d4c#diff-98eafc0a782b3b798a9005578dec4c4f5166f7c7785f87ede28fa36cc724c537L140' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44038250</div><div id='project'> Project Name: nebuly-ai/nebullvm</div><div id='commit'> Commit Name: 052777e202c7b5a2737ba57d61200827771e0d4c</div><div id='time'> Time: 2023-02-14</div><div id='author'> Author: v.sofi@nebuly.ai</div><div id='file'> File Name: nebullvm/operations/inference_learners/neural_compressor.py</div><div id='m_class'> M Class Name: NeuralCompressorInferenceLearner</div><div id='n_method'> N Class Name: NeuralCompressorInferenceLearner</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: ABC,BaseInferenceLearner</div><div id='n_parent_class'> N Parent Class: ABC,BaseInferenceLearner</div><div id='m_file'> M File Name: nebullvm/operations/inference_learners/neural_compressor.py</div><div id='n_file'> N File Name: nebullvm/operations/inference_learners/neural_compressor.py</div><div id='m_start'> M Start Line: 141</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 140</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            input_tfms = MultiStageTransformation.from_dict(
                metadata.input_tfms
            )
        device = <a id="change">Device(</a><a id="change">DeviceType(</a>metadata.device<a id="change">))</a>
        return cls(
            input_tfms=input_tfms,
            network_parameters=ModelParams(**metadata.network_parameters),
            onnx_path=onnx_path,</code></pre><h3>After Change</h3><pre><code class='java'>
            input_tfms = MultiStageTransformation.from_dict(
                metadata.input_tfms
            )
        device = <a id="change">Device.from_str(</a>metadata.device<a id="change">)</a>
        return cls(
            input_tfms=input_tfms,
            network_parameters=ModelParams(**metadata.network_parameters),
            onnx_path=onnx_path,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nebuly-ai/nebullvm/commit/052777e202c7b5a2737ba57d61200827771e0d4c#diff-c390c27c7269aada2e02bebfb1baf841ae894ae9b009a3d7a8e5d03dc46c75cfL95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44038249</div><div id='project'> Project Name: nebuly-ai/nebullvm</div><div id='commit'> Commit Name: 052777e202c7b5a2737ba57d61200827771e0d4c</div><div id='time'> Time: 2023-02-14</div><div id='author'> Author: v.sofi@nebuly.ai</div><div id='file'> File Name: nebullvm/operations/inference_learners/deepsparse.py</div><div id='m_class'> M Class Name: DeepSparseInferenceLearner</div><div id='n_method'> N Class Name: DeepSparseInferenceLearner</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: ABC,BaseInferenceLearner</div><div id='n_parent_class'> N Parent Class: ABC,BaseInferenceLearner</div><div id='m_file'> M File Name: nebullvm/operations/inference_learners/deepsparse.py</div><div id='n_file'> N File Name: nebullvm/operations/inference_learners/deepsparse.py</div><div id='m_start'> M Start Line: 119</div><div id='m_end'> M End Line: 119</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 118</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        path = Path(path)
        model = torch.jit.load(path / cls.MODEL_NAME)
        metadata = LearnerMetadata.read(path)
        device = <a id="change">Device(</a><a id="change">DeviceType(</a>metadata.device<a id="change">))</a>
        return cls(
            torch_model=model,
            network_parameters=ModelParams(**metadata.network_parameters),
            input_tfms=MultiStageTransformation.from_dict(metadata.input_tfms)</code></pre><h3>After Change</h3><pre><code class='java'>
        path = Path(path)
        model = torch.jit.load(path / cls.MODEL_NAME)
        metadata = LearnerMetadata.read(path)
        device = <a id="change">Device.from_str(</a>metadata.device<a id="change">)</a>
        return cls(
            torch_model=model,
            network_parameters=ModelParams(**metadata.network_parameters),
            input_tfms=MultiStageTransformation.from_dict(metadata.input_tfms)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nebuly-ai/nebullvm/commit/052777e202c7b5a2737ba57d61200827771e0d4c#diff-0c2caa0ee1c1927c421e8bdf08ed027fe20480bcf900c80cec16a3bec95a873bL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44038248</div><div id='project'> Project Name: nebuly-ai/nebullvm</div><div id='commit'> Commit Name: 052777e202c7b5a2737ba57d61200827771e0d4c</div><div id='time'> Time: 2023-02-14</div><div id='author'> Author: v.sofi@nebuly.ai</div><div id='file'> File Name: nebullvm/operations/inference_learners/pytorch.py</div><div id='m_class'> M Class Name: PytorchBackendInferenceLearner</div><div id='n_method'> N Class Name: PytorchBackendInferenceLearner</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: PytorchBaseInferenceLearner</div><div id='n_parent_class'> N Parent Class: PytorchBaseInferenceLearner</div><div id='m_file'> M File Name: nebullvm/operations/inference_learners/pytorch.py</div><div id='n_file'> N File Name: nebullvm/operations/inference_learners/pytorch.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 77</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            metadata["input_tfms"] = MultiStageTransformation.from_dict(
                input_tfms
            )
        device = <a id="change">Device(</a><a id="change">DeviceType(</a>metadata["device"]<a id="change">))</a>
        self = cls.from_runtime_module(
            network_parameters=network_parameters,
            lib=lib,
            target_device=target_device,</code></pre><h3>After Change</h3><pre><code class='java'>
            metadata["input_tfms"] = MultiStageTransformation.from_dict(
                input_tfms
            )
        device = <a id="change">Device.from_str(</a>metadata["device"]<a id="change">)</a>
        self = cls.from_runtime_module(
            network_parameters=network_parameters,
            lib=lib,
            target_device=target_device,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nebuly-ai/nebullvm/commit/052777e202c7b5a2737ba57d61200827771e0d4c#diff-177187cf4723fae92fbbbe4a10d29e3c2885f5f28ac7dfdd26cb33bf257132eaL147' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44038247</div><div id='project'> Project Name: nebuly-ai/nebullvm</div><div id='commit'> Commit Name: 052777e202c7b5a2737ba57d61200827771e0d4c</div><div id='time'> Time: 2023-02-14</div><div id='author'> Author: v.sofi@nebuly.ai</div><div id='file'> File Name: nebullvm/operations/inference_learners/tvm.py</div><div id='m_class'> M Class Name: ApacheTVMInferenceLearner</div><div id='n_method'> N Class Name: ApacheTVMInferenceLearner</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: ABC,BaseInferenceLearner</div><div id='n_parent_class'> N Parent Class: ABC,BaseInferenceLearner</div><div id='m_file'> M File Name: nebullvm/operations/inference_learners/tvm.py</div><div id='n_file'> N File Name: nebullvm/operations/inference_learners/tvm.py</div><div id='m_start'> M Start Line: 160</div><div id='m_end'> M End Line: 170</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 169</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        onnx_path = path / ONNX_FILENAMES["model_name"]
        metadata = LearnerMetadata.read(path)
        input_tfms = metadata.input_tfms
        device = <a id="change">Device(</a><a id="change">DeviceType(</a>metadata.device<a id="change">))</a>
        quantization_type = (
            QuantizationType(metadata.quantization_type)
            if hasattr(metadata, "quantization_type")
            else None</code></pre><h3>After Change</h3><pre><code class='java'>
        onnx_path = path / ONNX_FILENAMES["model_name"]
        metadata = LearnerMetadata.read(path)
        input_tfms = metadata.input_tfms
        device = <a id="change">Device.from_str(</a>metadata.device<a id="change">)</a>
        quantization_type = (
            QuantizationType(metadata.quantization_type)
            if hasattr(metadata, "quantization_type")
            else None</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nebuly-ai/nebullvm/commit/052777e202c7b5a2737ba57d61200827771e0d4c#diff-76ed42237dcbbf6d5adf6675e27c62433583030cbb0fa2f7a1bb202175857922L225' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44038246</div><div id='project'> Project Name: nebuly-ai/nebullvm</div><div id='commit'> Commit Name: 052777e202c7b5a2737ba57d61200827771e0d4c</div><div id='time'> Time: 2023-02-14</div><div id='author'> Author: v.sofi@nebuly.ai</div><div id='file'> File Name: nebullvm/operations/inference_learners/onnx.py</div><div id='m_class'> M Class Name: ONNXInferenceLearner</div><div id='n_method'> N Class Name: ONNXInferenceLearner</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: ABC,BaseInferenceLearner</div><div id='n_parent_class'> N Parent Class: ABC,BaseInferenceLearner</div><div id='m_file'> M File Name: nebullvm/operations/inference_learners/onnx.py</div><div id='n_file'> N File Name: nebullvm/operations/inference_learners/onnx.py</div><div id='m_start'> M Start Line: 246</div><div id='m_end'> M End Line: 246</div><div id='n_start'> N Start Line: 246</div><div id='n_end'> N End Line: 246</div><BR>