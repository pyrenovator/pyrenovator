<html><h3>Pattern ID :36333
</h3><img src='102932226.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        try:
            img = self.loader(os.path.join(self.root, filename))
        except:
            <a id="change">return </a>torch.zeros((3, 32, 32))

        if self.transform is not None:
            img = self.transform(img)</code></pre><h3>After Change</h3><pre><code class='java'>

    def __getitem__(self):
        cur_n_views = random.randint(self.max_views) + 1
        filenames = <a id="change">random.choice(</a>self.im_list[self.cur_idx], cur_n_views<a id="change">, replace=False)</a>
        imgs = torch.zeros(cur_n_views, 3, 128, 128)        
        try:
            for view in range(cur_n_views):
                imgs[view,:,:,:] = self.loader(os.path.join(self.root, self.cat_model_list[self.cur_idx][0], self.cat_model_list[self.cur_idx][1], filenames[view]))
                if self.transform is not None:
                    imgs[view,:,:,:]<a id="change"> = </a>self.transform(imgs[view,:,:,:])
        except:
            return imgs
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/alex-golts/pytorch-3d-r2n2/commit/26734669a8887661262dc3f913074922dc7445e8#diff-11bb3b632c84e01e0bf1b576e72c513fd062811e900ebcb5f22df0eac7d3b0d9L75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102932226</div><div id='project'> Project Name: alex-golts/pytorch-3d-r2n2</div><div id='commit'> Commit Name: 26734669a8887661262dc3f913074922dc7445e8</div><div id='time'> Time: 2018-05-22</div><div id='author'> Author: alexgbiz@gmail.com</div><div id='file'> File Name: dataset.py</div><div id='m_class'> M Class Name: Dataset</div><div id='n_method'> N Class Name: Dataset</div><div id='m_method'> M Method Name: __getitem__(1)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: data.Dataset</div><div id='n_parent_class'> N Parent Class: data.Dataset</div><div id='m_file'> M File Name: dataset.py</div><div id='n_file'> N File Name: dataset.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 90</div><div id='n_end'> N End Line: 101</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        :return: list of headers
        &quot&quot&quot
        if order==&quotBOMR&quot:
            <a id="change">return </a>[&quotbackground&quot, &quotobjectives&quot, &quotmethods&quot, &quotresults&quot]
        elif order==&quotOBMR&quot:
            return [&quotobjectives&quot,&quotbackground&quot,&quotmethods&quot,&quotresults&quot]
        elif order==&quotMOBR&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
            print(&quotnot well written.., returned the default BOMR&quot)
            result= [&quotbackground&quot, &quotobjectives&quot, &quotmethods&quot, &quotresults&quot]

        condition<a id="change">=</a><a id="change">random.choice(</a>[0,1]<a id="change">)</a>
        if condition:
            result = [&quotother&quot] + result
        else:
            result += [&quotother&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yassinekdi/naimai/commit/85e94faaa8106b08dbad5fbf5c752b9ea4ea7991#diff-88fa21b9ff48e2b7c4ba6f236e7fa1999b73f1c8a507ba0b709837d0b8a1b6f9L108' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102932210</div><div id='project'> Project Name: yassinekdi/naimai</div><div id='commit'> Commit Name: 85e94faaa8106b08dbad5fbf5c752b9ea4ea7991</div><div id='time'> Time: 2022-03-17</div><div id='author'> Author: keptsa@yahoo.fr</div><div id='file'> File Name: data_constructors/omr_classif_data.py</div><div id='m_class'> M Class Name: OMRData</div><div id='n_method'> N Class Name: OMRData</div><div id='m_method'> M Method Name: get_headers_order(2)</div><div id='n_method'> N Method Name: get_headers_order(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data_constructors/omr_classif_data.py</div><div id='n_file'> N File Name: data_constructors/omr_classif_data.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 125</div><div id='n_start'> N Start Line: 150</div><div id='n_end'> N End Line: 164</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        print(&quotnot implemented&quot)
        Dataset=None

    <a id="change">return </a>Dataset.get_dataset()

&#47&#47 def plot_pose_estimation_summary():
&#47&#47</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47skip the dataset
        for group in ucf_dataset:
            ucf_dataset[group]<a id="change"> = </a><a id="change">np.random.choice(</a>ucf_dataset[group], 1<a id="change">)</a>

        &#47&#47handling sampling here

        return ucf_dataset</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rvl-lab-utoronto/video_similarity_search/commit/c8ed3a4e41908cabd1d9e2257efc7d2e60cc9755#diff-9028f7f98353c95113f2af96df143ef12e365568a1fca66cf7d83ecfa623be62L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102932214</div><div id='project'> Project Name: rvl-lab-utoronto/video_similarity_search</div><div id='commit'> Commit Name: c8ed3a4e41908cabd1d9e2257efc7d2e60cc9755</div><div id='time'> Time: 2020-08-05</div><div id='author'> Author: sherrychen127@gmail.com</div><div id='file'> File Name: pose_estimation/extract_pose_estimation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_vid_dataset(6)</div><div id='n_method'> N Method Name: get_vid_dataset(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pose_estimation/extract_pose_estimation.py</div><div id='n_file'> N File Name: pose_estimation/extract_pose_estimation.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 147</div><div id='n_start'> N Start Line: 179</div><div id='n_end'> N End Line: 199</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.max_samples = self.n_samples if max_samples is None else max_samples

    def __iter__(self):
        <a id="change">return </a>iter(torch.randperm(self.n_samples)[: self.max_samples])

    def __len__(self):
        return self.max_samples</code></pre><h3>After Change</h3><pre><code class='java'>
            yield from torch.randperm(self.n_obs)[: self.n_samples]
        else:
            for _ in range(self.n_batch):
                batch<a id="change"> = </a><a id="change">np.random.choice(</a>self.batch_list<a id="change">)</a>
                yield from self.choice(torch.where(self.batches == batch)[0])

    def __len__(self):
        return self.n_samples</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mics-lab/scyan/commit/21be5d938a79ffbeb98f141f0d3bbebe273591d8#diff-5f9b8fd6e4c6194661d02e95aa710ebfb60e8a003800186b491047773ef55313L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102932213</div><div id='project'> Project Name: mics-lab/scyan</div><div id='commit'> Commit Name: 21be5d938a79ffbeb98f141f0d3bbebe273591d8</div><div id='time'> Time: 2023-01-04</div><div id='author'> Author: quentin.blampey@student.ecp.fr</div><div id='file'> File Name: scyan/data/tensors.py</div><div id='m_class'> M Class Name: RandomSampler</div><div id='n_method'> N Class Name: RandomSampler</div><div id='m_method'> M Method Name: __iter__(1)</div><div id='n_method'> N Method Name: __iter__(1)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Sampler</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Sampler</div><div id='m_file'> M File Name: scyan/data/tensors.py</div><div id='n_file'> N File Name: scyan/data/tensors.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        sp_clip = self._load_clip(s_positive, self.positive_temporal_transform)
        dp_clip = self._load_clip(d_positive, self.positive_temporal_transform)

        <a id="change">return </a>(a_clip, sp_clip, dp_clip), (a_target, sp_target, dp_target)

    def _load_clip(self, data, temporal_transform):
        path = data[&quotvideo&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
        anchor=self.data[index]
        a_target = anchor[self.target_type]

        p_type<a id="change"> = </a><a id="change">np.random.choice(</a>self.positive_types<a id="change">, p=[self.positive_sampling_p, 1-self.positive_sampling_p])</a>
        if p_type == &quotsame_inst&quot:
            positive = anchor.copy()

        else: &#47&#47sample positive from a different cluster</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rvl-lab-utoronto/video_similarity_search/commit/f902d74aed0fdc79b6f3b6710e1b82db83561384#diff-ebd2c239ced1d39d20a991c8727dd82f31806aea817abad4e7cc12832ff8aabbL68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102932218</div><div id='project'> Project Name: rvl-lab-utoronto/video_similarity_search</div><div id='commit'> Commit Name: f902d74aed0fdc79b6f3b6710e1b82db83561384</div><div id='time'> Time: 2020-09-04</div><div id='author'> Author: sherrychen127@gmail.com</div><div id='file'> File Name: datasets/triplets_dataset.py</div><div id='m_class'> M Class Name: TripletsData</div><div id='n_method'> N Class Name: TripletsData</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: data.Dataset</div><div id='n_parent_class'> N Parent Class: data.Dataset</div><div id='m_file'> M File Name: datasets/triplets_dataset.py</div><div id='n_file'> N File Name: datasets/triplets_dataset.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 105</div><BR>