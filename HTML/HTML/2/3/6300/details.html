<html><h3>Pattern ID :6300
</h3><img src='21834601.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        output_dir.mkdir()

    &#47&#47 STEP 1 : load the NLP object
    logger.info(<a id="change">"STEP 1: loading model from {}".format(</a>nlp_dir<a id="change">)</a>)
    nlp, kb = read_nlp_kb(nlp_dir, kb_path)

    &#47&#47 check that there is a NER component in the pipeline</code></pre><h3>After Change</h3><pre><code class='java'>
    logger.info("STEP 2: Reading training dataset from {}".format(training_path))

    if labels_discard:
        labels_discard = [<a id="change">x.strip()</a> for x in labels_discard.split(",")]
        logger.info("Discarding {} NER types: {}".format(len(labels_discard), labels_discard))

    train_data = wikipedia_processor.read_training(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/2d249a9502bfc5d3d2111165672d964b1eebe35e#diff-e97a161899a8bec63531b8e48434959e6e0752546443b4d1a2218ca1b32d1170L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21834601</div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 2d249a9502bfc5d3d2111165672d964b1eebe35e</div><div id='time'> Time: 2019-10-14</div><div id='author'> Author: svlandeg@users.noreply.github.com</div><div id='file'> File Name: bin/wiki_entity_linking/wikidata_train_entity_linker.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(10)</div><div id='n_method'> N Method Name: main(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: bin/wiki_entity_linking/wikidata_train_entity_linker.py</div><div id='n_file'> N File Name: bin/wiki_entity_linking/wikidata_train_entity_linker.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 145</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                &#47&#47 overwrite model path variable to be the final target folder
                &#47&#47 instead of one of the many local ones from the fan out with 
                &#47&#47 training model!
                model_path = <a id="change">&quotfinal_{}&quot.format(</a>model_folder<a id="change">)</a>
                s3_obj = s3_metaflow_client.get(model_file)
                print("Model retrieved from: {}".format(s3_obj.path))
                with tarfile.open(s3_obj.path) as my_tar:
                    my_tar.extractall(model_path)</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47 which is a combination of our target "local" folder hosting the untarred files
                &#47&#47 and the original folder name, which follows a naming convention including the hyper
                &#47&#47 settings.
                model_path = <a id="change">model_path.split(&quot/&quot)[-1].replace(&quot.tar.gz&quot, &quot&quot).strip()</a>
                print("Model local path: {}".format(model_path))
                import glob
                print(glob.glob("{}/*".format(model_path)))
            </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jacopotagliabue/recs-at-resonable-scale/commit/c898f9485673ec343a21067e5324a9e30c2cc53e#diff-9b8fa700f21964aef76747038004e0ed38e07299e7c0adc81db033595dde7677L353' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21834600</div><div id='project'> Project Name: jacopotagliabue/recs-at-resonable-scale</div><div id='commit'> Commit Name: c898f9485673ec343a21067e5324a9e30c2cc53e</div><div id='time'> Time: 2022-11-07</div><div id='author'> Author: tagliabue.jacopo@gmail.com</div><div id='file'> File Name: src/my_merlin_flow.py</div><div id='m_class'> M Class Name: merlinFlow</div><div id='n_method'> N Class Name: merlinFlow</div><div id='m_method'> M Method Name: load_merlin_model(3)</div><div id='n_method'> N Method Name: load_merlin_model(4)</div><div id='m_parent_class'> M Parent Class: FlowSpec</div><div id='n_parent_class'> N Parent Class: FlowSpec</div><div id='m_file'> M File Name: src/my_merlin_flow.py</div><div id='n_file'> N File Name: src/my_merlin_flow.py</div><div id='m_start'> M Start Line: 356</div><div id='m_end'> M End Line: 377</div><div id='n_start'> N Start Line: 375</div><div id='n_end'> N End Line: 397</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    out_str = out_str + this_symbol_sequence + &quot &quot

                if idx != len(fp_label_dict[uttname]):
                    logging.warning(<a id="change">&quot{} length mismatch, length: {} &quot.format(
                        </a>idx, len(fp_label_dict[uttname])<a id="change">)</a>)

                if not error_flag:
                    f_out.write(out_str.strip() + &quot\n&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
        fp_label_dict = {}
        i = 0
        while i &lt; len(prosody_lines):
            if len(<a id="change">prosody_lines[i].strip()</a>.split(&quot\t&quot)) == 2:
                idx = prosody_lines[i].strip().split(&quot\t&quot)[0]
                i += 1
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/modelscope/modelscope/commit/453ff1dae37a87cd2ca93f5639e7941396375e10#diff-bec4233b91eefcdd736970600ba47683007b64b533e394b9f1921d47b832f669L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21834597</div><div id='project'> Project Name: modelscope/modelscope</div><div id='commit'> Commit Name: 453ff1dae37a87cd2ca93f5639e7941396375e10</div><div id='time'> Time: 2023-01-09</div><div id='author'> Author: jiaqi.sjq@alibaba-inc.com</div><div id='file'> File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='m_class'> M Class Name: FpProcessor</div><div id='n_method'> N Class Name: FpProcessor</div><div id='m_method'> M Method Name: addfp(4)</div><div id='n_method'> N Method Name: addfp(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='n_file'> N File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 83</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                continue
            character = match.meta_info.decode()
            dialog = match.chunks[0].text
            print(<a id="change">&quot&gt; {:&gt;2d}({:.2f}). {} said, "{}"&quot.format(</a>idx, score, character.upper(), dialog<a id="change">)</a>)


def config(num_docs, mode=&quotindex&quot):</code></pre><h3>After Change</h3><pre><code class='java'>
            if score &lt; 0.0:
                continue
            character = match.meta_info.decode()
            dialog = <a id="change">match.text.strip()</a>
            print(f&quot&gt; {idx:&gt;2d}({score:.2f}). {character.upper()} said, "{dialog}"&quot)


def index(num_docs):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/569d2bcc8e8118f25c1ee9eb0e9b251419dfddc1#diff-1d6e1c0ee54806b545835bac18968941a5a4f6716de505dadbbad10eb6092b18L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21834598</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: 569d2bcc8e8118f25c1ee9eb0e9b251419dfddc1</div><div id='time'> Time: 2020-09-14</div><div id='author'> Author: maximilian.werk@jina.ai</div><div id='file'> File Name: southpark-search/app.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: print_topk(2)</div><div id='n_method'> N Method Name: print_topk(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: southpark-search/app.py</div><div id='n_file'> N File Name: southpark-search/app.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 29</div><BR>