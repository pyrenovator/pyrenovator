<html><h3>Pattern ID :39275
</h3><img src='111506321.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        else:
            search_results = self.search(question)
            answers = []
            for result in <a id="change">search_results.results[:3]</a>:
                c_string = result.document.content
                answer = qa(question, c_string, prev_qa=prev_qa)
                answers.append(answer)</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            search_results = self.search(question)
            answers = []
            <a id="change">if </a><a id="change">issubclass(</a>self._store._doc_class, ChunkedDocument<a id="change">)</a>:
                for chunk in search_results.top_chunks[:num_answers]:
                    answer = qa(question, chunk["chunk"], prev_qa=prev_qa)
                    answers.append((answer, chunk["search_result"]))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/328d29867029b82b3c08f755e457c9fc5cb853a9#diff-c048ea9314b245ee2597d816e9e910c2cf3e1661cfe66c3e291199863b1cf9e1L87' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111506321</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: 328d29867029b82b3c08f755e457c9fc5cb853a9</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/core.py</div><div id='m_class'> M Class Name: Kiri</div><div id='n_method'> N Class Name: Kiri</div><div id='m_method'> M Method Name: qa(5)</div><div id='n_method'> N Method Name: qa(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/core.py</div><div id='n_file'> N File Name: kiri/core.py</div><div id='m_start'> M Start Line: 106</div><div id='m_end'> M End Line: 112</div><div id='n_start'> N Start Line: 87</div><div id='n_end'> N End Line: 118</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            task = rec.load_object("task")
            &#47&#47 Special treatment of historical dependencies
            if task["dataset"]["class"] == "TSDatasetH":
                hist_ref = <a id="change">task["dataset"]["kwargs"]</a>["step_len"]
            PredUpdater(rec, to_date=to_date, hist_ref=hist_ref).update()

        self.logger.info(f"Finished updating {len(online_models)} online model predictions of {self.exp_name}.")</code></pre><h3>After Change</h3><pre><code class='java'>
            task = rec.load_object("task")
            &#47&#47 Special treatment of historical dependencies
            cls, kwargs = get_cls_kwargs(task["dataset"], default_module="qlib.data.dataset")
            <a id="change">if </a><a id="change">issubclass(</a>cls, TSDatasetH<a id="change">)</a>:
                hist_ref = kwargs.get("step_len", TSDatasetH.DEFAULT_STEP_LEN)
            PredUpdater(rec, to_date=to_date, hist_ref=hist_ref).update()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/d0f54343c7eed7427103c689595a0c151c62006d#diff-1bcdc3694cc35789421c7d4f50dd8c02a09655c869ba42141d3157d7ff0834e9L152' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111506320</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: d0f54343c7eed7427103c689595a0c151c62006d</div><div id='time'> Time: 2021-06-20</div><div id='author'> Author: afe.young@gmail.com</div><div id='file'> File Name: qlib/workflow/online/utils.py</div><div id='m_class'> M Class Name: OnlineToolR</div><div id='n_method'> N Class Name: OnlineToolR</div><div id='m_method'> M Method Name: update_online_pred(2)</div><div id='n_method'> N Method Name: update_online_pred(2)</div><div id='m_parent_class'> M Parent Class: OnlineTool</div><div id='n_parent_class'> N Parent Class: OnlineTool</div><div id='m_file'> M File Name: qlib/workflow/online/utils.py</div><div id='n_file'> N File Name: qlib/workflow/online/utils.py</div><div id='m_start'> M Start Line: 162</div><div id='m_end'> M End Line: 166</div><div id='n_start'> N Start Line: 164</div><div id='n_end'> N End Line: 169</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                )

        for name, parameter in exec_properties.items():
            <a id="change">function_args[name]</a> = parameter

        returns = self._FUNCTION(**function_args)
        if return_artifact is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
        for arg in args:
            arg_type = spec.annotations.get(arg, None)
            if isinstance(arg_type, Input):
                <a id="change">if </a>not <a id="change">issubclass(</a>arg_type.type, BaseArtifact<a id="change">)</a>:
                    inputs_to_take_care_of.append(arg)
            elif isinstance(arg_type, Output):
                pass</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/1bedf476dccfee4b8bd3d27b90aad192e90b810e#diff-35d414758e8b047715253b40ecea2974475f328c13f27da5a27304070fdacad9L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111506316</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 1bedf476dccfee4b8bd3d27b90aad192e90b810e</div><div id='time'> Time: 2021-10-01</div><div id='author'> Author: bariscandurak@hotmail.com</div><div id='file'> File Name: src/zenml/steps/utils.py</div><div id='m_class'> M Class Name: _FunctionExecutor</div><div id='n_method'> N Class Name: _FunctionExecutor</div><div id='m_method'> M Method Name: Do(4)</div><div id='n_method'> N Method Name: Do(4)</div><div id='m_parent_class'> M Parent Class: BaseExecutor</div><div id='n_parent_class'> N Parent Class: BaseExecutor</div><div id='m_file'> M File Name: src/zenml/steps/utils.py</div><div id='n_file'> N File Name: src/zenml/steps/utils.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 104</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            for i, default in enumerate(process_defaults):
                &#47&#47 TODO: [HIGH] fix the implementation
                process_args.reverse()
                arg = <a id="change">process_args[i]</a>
                arg_type = process_spec.annotations.get(arg, None)
                if not isinstance(arg_type, Param):
                    raise StepInterfaceError(
                        f"A default value in the signature of a step can only "</code></pre><h3>After Change</h3><pre><code class='java'>
        for arg in process_args:
            arg_type = process_spec.annotations.get(arg, None)
            if isinstance(arg_type, Input):
                <a id="change">if </a><a id="change">issubclass(</a>arg_type, BaseArtifact<a id="change">)</a>:
                    cls.INPUT_SPEC.update({arg: arg_type.type})
                else:
                    cls.INPUT_SPEC.update({arg: JSONArtifact})</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/cfaf64a733041271d1b3710307c0ea561f190f70#diff-ea6a3cc50bec27c1d3046731637ee6c19ffafad48025a8b84a4352e268861151L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111506313</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: cfaf64a733041271d1b3710307c0ea561f190f70</div><div id='time'> Time: 2021-09-30</div><div id='author'> Author: bariscandurak@hotmail.com</div><div id='file'> File Name: src/zenml/steps/base_step.py</div><div id='m_class'> M Class Name: BaseStepMeta</div><div id='n_method'> N Class Name: BaseStepMeta</div><div id='m_method'> M Method Name: __new__(4)</div><div id='n_method'> N Method Name: __new__(4)</div><div id='m_parent_class'> M Parent Class: type</div><div id='n_parent_class'> N Parent Class: type</div><div id='m_file'> M File Name: src/zenml/steps/base_step.py</div><div id='n_file'> N File Name: src/zenml/steps/base_step.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 61</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
  @staticmethod
  def from_json(d: JsonDict):
    Used by serialize.py.
    cls = <a id="change">globals()[d.pop("__name__")]</a>  &#47&#47 class by name from this module
    return cls(**d)

Spec = dict[str, LitType]</code></pre><h3>After Change</h3><pre><code class='java'>

    base_cls = globals().get("LitType")
    cls = globals().get(type_name)  &#47&#47 class by name from this module
    <a id="change">if </a>cls is None or not <a id="change">issubclass(</a>cls, base_cls<a id="change">)</a>:
      raise NameError(f"{type_name} is not a valid LitType.")

    return cls(**d)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/98b23d7d59bab87720e38b74552e7eee9cd06c5a#diff-5428ba6ebafe463da538cde8ec011702f09f45502957cf3d84e28055aa2e060dL128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111506314</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: 98b23d7d59bab87720e38b74552e7eee9cd06c5a</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: ryanmullins@google.com</div><div id='file'> File Name: lit_nlp/api/types.py</div><div id='m_class'> M Class Name: LitType</div><div id='n_method'> N Class Name: LitType</div><div id='m_method'> M Method Name: from_json(1)</div><div id='n_method'> N Method Name: from_json(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lit_nlp/api/types.py</div><div id='n_file'> N File Name: lit_nlp/api/types.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 142</div><div id='n_end'> N End Line: 156</div><BR>