<html><h3>Pattern ID :12106
</h3><img src='40829263.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.e2e_cpu
@pytest.mark.skipif(roles_not_implemented(), reason="ee is required for this test")
def test_rbac_permission_assignment() -&gt; None:
    test_user_creds<a id="change"> = </a><a id="change">create_test_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>

    &#47&#47 User has no permissions.
    with logged_in_user(test_user_creds):
        assert "no permissions" in det_cmd(["rbac", "my-permissions"], check=True).stdout.decode()</code></pre><h3>After Change</h3><pre><code class='java'>
@pytest.mark.e2e_cpu
@pytest.mark.skipif(roles_not_implemented(), reason="ee is required for this test")
def test_rbac_permission_assignment() -&gt; None:
    <a id="change">log_in_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
    test_user_creds = create_test_user()

    &#47&#47 User has no permissions.
    with logged_in_user(test_user_creds):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b279bb5b0e81336ff0be03a3307133fe52a1450b#diff-0c78b8f37101db5605d6d948ed5ecd010b68fb91e1410127c17f1d30ef080d41L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40829263</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b279bb5b0e81336ff0be03a3307133fe52a1450b</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: nikita.rajaneesh@hpe.com</div><div id='file'> File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_rbac_permission_assignment(0)</div><div id='n_method'> N Method Name: test_rbac_permission_assignment(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='n_file'> N File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert json_out["pagination"]["offset"] == 1

        &#47&#47 Setup group / user to test with.
        test_user_creds<a id="change"> = </a><a id="change">create_test_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
        group_name = get_random_string()
        det_cmd(
            ["user-group", "create", group_name, "--add-user", test_user_creds.username], check=True
        )</code></pre><h3>After Change</h3><pre><code class='java'>
        assert json_out["pagination"]["offset"] == 1

        &#47&#47 Setup group / user to test with.
        <a id="change">log_in_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
        test_user_creds = create_test_user()
        group_name = get_random_string()
        det_cmd(
            ["user-group", "create", group_name, "--add-user", test_user_creds.username], check=True</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b279bb5b0e81336ff0be03a3307133fe52a1450b#diff-0c78b8f37101db5605d6d948ed5ecd010b68fb91e1410127c17f1d30ef080d41L297' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40829262</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b279bb5b0e81336ff0be03a3307133fe52a1450b</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: nikita.rajaneesh@hpe.com</div><div id='file'> File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_rbac_list_roles(0)</div><div id='n_method'> N Method Name: test_rbac_list_roles(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='n_file'> N File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_start'> M Start Line: 331</div><div id='m_end'> M End Line: 331</div><div id='n_start'> N Start Line: 339</div><div id='n_end'> N End Line: 340</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )

        &#47&#47 Role is assigned to our group and user.
        test_user_creds<a id="change"> = </a><a id="change">create_test_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
        group_name = get_random_string()

        det_cmd(["user-group", "create", group_name], check=True)
        det_cmd(["rbac", "assign-role", "Viewer", "--group-name-to-assign", group_name], check=True)</code></pre><h3>After Change</h3><pre><code class='java'>
        )

        &#47&#47 Role is assigned to our group and user.
        <a id="change">log_in_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
        test_user_creds = create_test_user()
        group_name = get_random_string()

        det_cmd(["user-group", "create", group_name], check=True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b279bb5b0e81336ff0be03a3307133fe52a1450b#diff-0c78b8f37101db5605d6d948ed5ecd010b68fb91e1410127c17f1d30ef080d41L421' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40829261</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b279bb5b0e81336ff0be03a3307133fe52a1450b</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: nikita.rajaneesh@hpe.com</div><div id='file'> File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_rbac_describe_role(0)</div><div id='n_method'> N Method Name: test_rbac_describe_role(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='n_file'> N File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_start'> M Start Line: 429</div><div id='m_end'> M End Line: 429</div><div id='n_start'> N Start Line: 438</div><div id='n_end'> N End Line: 439</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        "not find a workspace",
    )

    test_user_creds<a id="change"> = </a><a id="change">create_test_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
    group_name = get_random_string()
    with logged_in_user(ADMIN_CREDENTIALS):
        det_cmd(["user-group", "create", group_name], check=True)
        det_cmd(["rbac", "assign-role", "Viewer", "--group-name-to-assign", group_name], check=True)</code></pre><h3>After Change</h3><pre><code class='java'>
        "not find a workspace",
    )

    <a id="change">log_in_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
    test_user_creds = create_test_user()
    group_name = get_random_string()
    with logged_in_user(ADMIN_CREDENTIALS):
        det_cmd(["user-group", "create", group_name], check=True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b279bb5b0e81336ff0be03a3307133fe52a1450b#diff-0c78b8f37101db5605d6d948ed5ecd010b68fb91e1410127c17f1d30ef080d41L158' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40829265</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b279bb5b0e81336ff0be03a3307133fe52a1450b</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: nikita.rajaneesh@hpe.com</div><div id='file'> File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_rbac_permission_assignment_errors(0)</div><div id='n_method'> N Method Name: test_rbac_permission_assignment_errors(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='n_file'> N File Name: e2e_tests/tests/cluster/test_rbac.py</div><div id='m_start'> M Start Line: 243</div><div id='m_end'> M End Line: 243</div><div id='n_start'> N Start Line: 250</div><div id='n_end'> N End Line: 251</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def strict_task_test(start_command: List[str], start_message: str, assert_access_func: Any) -&gt; None:
    user_a<a id="change"> = </a><a id="change">create_test_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
    user_b = create_test_user(ADMIN_CREDENTIALS)

    with logged_in_user(user_a):
        with cmd.interactive_command(*start_command) as task:</code></pre><h3>After Change</h3><pre><code class='java'>


def strict_task_test(start_command: List[str], start_message: str, assert_access_func: Any) -&gt; None:
    <a id="change">log_in_user(</a>ADMIN_CREDENTIALS<a id="change">)</a>
    user_a = create_test_user()
    user_b = create_test_user()

    with logged_in_user(user_a):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b279bb5b0e81336ff0be03a3307133fe52a1450b#diff-b2ff9d40415fd3ba6e401111725be45a069d1e5dddde7dd10ab4f18e0d68e88fL210' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40829264</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b279bb5b0e81336ff0be03a3307133fe52a1450b</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: nikita.rajaneesh@hpe.com</div><div id='file'> File Name: e2e_tests/tests/command/test_strict_ntsc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: strict_task_test(3)</div><div id='n_method'> N Method Name: strict_task_test(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e2e_tests/tests/command/test_strict_ntsc.py</div><div id='n_file'> N File Name: e2e_tests/tests/command/test_strict_ntsc.py</div><div id='m_start'> M Start Line: 211</div><div id='m_end'> M End Line: 212</div><div id='n_start'> N Start Line: 216</div><div id='n_end'> N End Line: 218</div><BR>