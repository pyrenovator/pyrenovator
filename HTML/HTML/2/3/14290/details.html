<html><h3>Pattern ID :14290
</h3><img src='47363254.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                self.costs.append(self._compute_error)

            if cost == "mse":
                self.costs.append(<a id="change">nn.MSELoss()</a>)

            if cost == "l1":
                self.costs.append(nn.L1Loss())</code></pre><h3>After Change</h3><pre><code class='java'>
            self.cost = self._compute_error

        if cost_type == "mse":
            self.cost<a id="change"> = </a><a id="change">nn.MSELoss(reduction=&quotnone&quot)</a>

        if cost_type == "l1":
           self.cost = nn.L1Loss(reduction=&quotnone&quot)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/b002e025c22fbe7334b5aa3e475aa21a5cffdc01#diff-dacadc87130a104a9b34b5d369c53e34f52662470ff3e0d91783d3ede95fee82L57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47363254</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: b002e025c22fbe7334b5aa3e475aa21a5cffdc01</div><div id='time'> Time: 2020-05-12</div><div id='author'> Author: mirco.ravabelli@gmail.com</div><div id='file'> File Name: speechbrain/nnet/losses.py</div><div id='m_class'> M Class Name: ComputeCost</div><div id='n_method'> N Class Name: ComputeCost</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: speechbrain/nnet/losses.py</div><div id='n_file'> N File Name: speechbrain/nnet/losses.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Tuple of tensors

        
        return (<a id="change">nn.MSELoss(**kwargs)</a>(inputs, targets),)

    def _adaptive_record_metrics(self, key: str, metrics: float):
        if key in self.losses:</code></pre><h3>After Change</h3><pre><code class='java'>
        if zero_grad:
            self.optimizer.zero_grad()

        loss<a id="change"> = </a><a id="change">nn.MSELoss(**kwargs)</a>(inputs, targets)

        if backward:
            loss.backward()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/royerlab/cytoself/commit/fdc5c3f9d381e9a5d2ec581c1006e403ff86b365#diff-523a645fa31e54102ea3d8c4549d9c4caee9ee4e75e32ac26e816f9dccd684fdL78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47363253</div><div id='project'> Project Name: royerlab/cytoself</div><div id='commit'> Commit Name: fdc5c3f9d381e9a5d2ec581c1006e403ff86b365</div><div id='time'> Time: 2022-08-18</div><div id='author'> Author: liamiiliil@gmail.com</div><div id='file'> File Name: cytoself/trainer/basetrainer.py</div><div id='m_class'> M Class Name: BaseTrainer</div><div id='n_method'> N Class Name: BaseTrainer</div><div id='m_method'> M Method Name: calc_loss_one_batch(6)</div><div id='n_method'> N Method Name: calc_loss_one_batch(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cytoself/trainer/basetrainer.py</div><div id='n_file'> N File Name: cytoself/trainer/basetrainer.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 115</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    global fft

    for i in range(predictions.shape[0]):
        fft = <a id="change">torch.nn.MSELoss(</a>torch.fft.fft(predictions[i]), torch.fft.fft(targets[i])<a id="change">)</a>
    return fft


def Neg_Pearson_Loss(predictions, targets):</code></pre><h3>After Change</h3><pre><code class='java'>
    rst = 0

    for i in range(predictions.shape[0]):
        rst<a id="change"> += </a><a id="change">torch.nn.MSELoss(</a>torch.fft.fft(predictions[i]), torch.fft.fft(targets[i])<a id="change">)</a>

    rst /= predictions.shape[0]
    return rst
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tvs-ai/pytorch_rppgs/commit/2708e40e35c17bccd951e34114413713b244fdc1#diff-77dbf6230586bc00b8c79343ec4f723e97634d5b4f1c21aafc386d6255b7f2aaL20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47363256</div><div id='project'> Project Name: tvs-ai/pytorch_rppgs</div><div id='commit'> Commit Name: 2708e40e35c17bccd951e34114413713b244fdc1</div><div id='time'> Time: 2022-09-19</div><div id='author'> Author: forownsake@gmail.com</div><div id='file'> File Name: nets/loss/loss.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fft_Loss(2)</div><div id='n_method'> N Method Name: fft_Loss(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nets/loss/loss.py</div><div id='n_file'> N File Name: nets/loss/loss.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 26</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 46</div><BR>