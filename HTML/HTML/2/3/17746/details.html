<html><h3>Pattern ID :17746
</h3><img src='58429927.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                        result = result.pin_memory()
                    except:
                        pass
                    result = <a id="change">result.numpy()</a>

                memory_buffers[op_id] = result

        return memory_buffers</code></pre><h3>After Change</h3><pre><code class='java'>
                                                            batches_ahead)
            elif isinstance(memory_allocation, Sequence):
                allocated_buffer = tuple(
                    <a id="change">self</a>.allocate_query(q, batch_size, batches_ahead) <a id="change">for</a> q in memory_allocation
                )

            memory_buffers[op_id] = allocated_buffer</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/libffcv/ffcv/commit/1e28d9884436db64131ee02d545d2c5374f19dc9#diff-e775b66b9cf24bfa0524d7edbf465b5ca12846f195123573855b4d62e63670e3L70' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58429927</div><div id='project'> Project Name: libffcv/ffcv</div><div id='commit'> Commit Name: 1e28d9884436db64131ee02d545d2c5374f19dc9</div><div id='time'> Time: 2021-11-13</div><div id='author'> Author: leclerc@mit.edu</div><div id='file'> File Name: ffcv/pipeline/pipeline.py</div><div id='m_class'> M Class Name: Pipeline</div><div id='n_method'> N Class Name: Pipeline</div><div id='m_method'> M Method Name: allocate_memory(3)</div><div id='n_method'> N Method Name: allocate_memory(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ffcv/pipeline/pipeline.py</div><div id='n_file'> N File Name: ffcv/pipeline/pipeline.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 100</div><div id='n_end'> N End Line: 112</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
  def run(self, inputs: Any, **kwargs: Any) -&gt; Tuple[Any, ...]:
    real_inputs = {k:v for k,v in zip(self.input_names, inputs)}
    ret = self.fxn(real_inputs, debug=True)
    ret = <a id="change">next(iter(ret.values())).numpy()</a>
    return (ret,)

class TinygradBackend(Backend):
  @classmethod</code></pre><h3>After Change</h3><pre><code class='java'>
  def run(self, inputs: Any, **kwargs: Any) -&gt; Tuple[Any, ...]:
    real_inputs = {k:v for k,v in zip(self.input_names, inputs)}
    ret = self.fxn(real_inputs, debug=True)
    return tuple(<a id="change">x</a>.numpy() <a id="change">for</a> x in ret.values())

class TinygradBackend(Backend):
  @classmethod</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/5b10dfcab85a598a378437ccef1bc5e8eb24614c#diff-20e74c7cae7182eb8b2ce7edee1c3332995d58a0bfe7e547e0ea37a598248601L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58429926</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: 5b10dfcab85a598a378437ccef1bc5e8eb24614c</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: test/external_test_onnx_backend.py</div><div id='m_class'> M Class Name: TinygradModel</div><div id='n_method'> N Class Name: TinygradModel</div><div id='m_method'> M Method Name: run(2)</div><div id='n_method'> N Method Name: run(2)</div><div id='m_parent_class'> M Parent Class: BackendRep</div><div id='n_parent_class'> N Parent Class: BackendRep</div><div id='m_file'> M File Name: test/external_test_onnx_backend.py</div><div id='n_file'> N File Name: test/external_test_onnx_backend.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 20</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            for step, batch in enumerate(progress_bar(self.test_data_loader, parent=pbar, leave=(pbar is not None))):
                hidden_rep, _, num_rows, y_pred, targets = self.model(batch, device)
                current_index = index_dict
                preds_dict[&quoty_true&quot][current_index: current_index + num_rows, :] = <a id="change">targets.cpu().numpy()</a>
                preds_dict[&quoty_pred&quot][current_index: current_index + num_rows, :] = y_pred.cpu().numpy()
                index_dict += num_rows

        y_true, y_pred = preds_dict[&quoty_true&quot], preds_dict[&quoty_pred&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
            )
        str_stats.append(format_time(time.time() - start_time))
        headers = [&quotF1-Macro&quot, &quotF1-Micro&quot, &quotJS&quot, &quotTime&quot]
        print(&quot &quot.join(<a id="change">&quot{}: {}&quot</a>.format(*k) <a id="change">for</a> k in zip(headers, str_stats)))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hasanhuz/spanemo/commit/5199616e8305c59de62808c37c1b005c3d532a53#diff-70554729b46822d7c0eda448f5474689356bde611a921fa4f3624b44a88b3d33L183' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58429925</div><div id='project'> Project Name: hasanhuz/spanemo</div><div id='commit'> Commit Name: 5199616e8305c59de62808c37c1b005c3d532a53</div><div id='time'> Time: 2021-02-01</div><div id='author'> Author: halhuzali@gmail.com</div><div id='file'> File Name: scripts/learner.py</div><div id='m_class'> M Class Name: EvaluateOnTest</div><div id='n_method'> N Class Name: EvaluateOnTest</div><div id='m_method'> M Method Name: predict(3)</div><div id='n_method'> N Method Name: predict(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: scripts/learner.py</div><div id='n_file'> N File Name: scripts/learner.py</div><div id='m_start'> M Start Line: 201</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 206</div><div id='n_end'> N End Line: 222</div><BR>