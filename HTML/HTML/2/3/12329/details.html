<html><h3>Pattern ID :12329
</h3><img src='41984770.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                PackageProcessor.send_package(pack, dst=client_idx)
            self.has_new_update = False

            <a id="change">while </a>not self.has_new_update<a id="change">:
                </a>pass

    def listen_clients(self):
        Listen messages from clients</code></pre><h3>After Change</h3><pre><code class='java'>
        self.shutdown_clients()

    def activate_clients(self):
        <a id="change">raise NotImplementedError()</a>

    def listen_clients(self):
        Listen messages from clients
        current_update_time = torch.zeros(1)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/e1ff0b7ab42ed7ae57b456032e5618eef6fa2a99#diff-846e3803606bd9e9a353f0a104d34ee2313532f2995f68e6fb0ead96e958f3ddL184' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41984770</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: e1ff0b7ab42ed7ae57b456032e5618eef6fa2a99</div><div id='time'> Time: 2021-06-22</div><div id='author'> Author: yang_7296@163.com</div><div id='file'> File Name: fedlab_core/server/topology.py</div><div id='m_class'> M Class Name: ServerAsynchronousTopology</div><div id='n_method'> N Class Name: ServerAsynchronousTopology</div><div id='m_method'> M Method Name: activate_clients(1)</div><div id='n_method'> N Method Name: activate_clients(1)</div><div id='m_parent_class'> M Parent Class: ServerBasicTopology</div><div id='n_parent_class'> N Parent Class: ServerBasicTopology</div><div id='m_file'> M File Name: fedlab_core/server/topology.py</div><div id='n_file'> N File Name: fedlab_core/server/topology.py</div><div id='m_start'> M Start Line: 190</div><div id='m_end'> M End Line: 214</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 184</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def listen_clients(self):
        listen messages from clients
        self._server_handler.start_round()  &#47&#47 flip the update_flag
        <a id="change">while (</a>True<a id="change">):
            </a>recv_message(self.buff)
            sender = int(self.buff[0].item())
            message_code = MessageCode(self.buff[1].item())
            parameter = self.buff[2:]</code></pre><h3>After Change</h3><pre><code class='java'>

    def listen_clients(self):
        listen messages from clients
        <a id="change">raise NotImplementedError()</a>


class PipeTop(Process):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/c39a3a4c8aeab733771bf5f6b661771d70925583#diff-846e3803606bd9e9a353f0a104d34ee2313532f2995f68e6fb0ead96e958f3ddL80' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41984771</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: c39a3a4c8aeab733771bf5f6b661771d70925583</div><div id='time'> Time: 2021-04-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/topology.py</div><div id='m_class'> M Class Name: EndTop</div><div id='n_method'> N Class Name: EndTop</div><div id='m_method'> M Method Name: listen_clients(1)</div><div id='n_method'> N Method Name: listen_clients(1)</div><div id='m_parent_class'> M Parent Class: Process</div><div id='n_parent_class'> N Parent Class: Process</div><div id='m_file'> M File Name: fedlab_core/server/topology.py</div><div id='n_file'> N File Name: fedlab_core/server/topology.py</div><div id='m_start'> M Start Line: 82</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 36</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        listen messages from clients
        self._handler.train()  &#47&#47 turn train_flag to True
        &#47&#47 server_handler will turn off train_flag
        <a id="change">while </a>self._handler.train_flag<a id="change">:
            </a>package = self.msg_processor.recv_package()
            sender, message_code, s_parameters = self.msg_processor.unpack(payload=package)

            self._handler.on_receive(sender, message_code, s_parameters)</code></pre><h3>After Change</h3><pre><code class='java'>

    def listen_clients(self):
        Listen messages from clients
        <a id="change">raise NotImplementedError()</a>


class ServerSyncTop(ServerBasicTop):
    Synchronous communication class</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/be893458f37409271ddda71a3d4dc5ed74695641#diff-846e3803606bd9e9a353f0a104d34ee2313532f2995f68e6fb0ead96e958f3ddL107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41984772</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: be893458f37409271ddda71a3d4dc5ed74695641</div><div id='time'> Time: 2021-04-12</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/topology.py</div><div id='m_class'> M Class Name: ServerBasicTop</div><div id='n_method'> N Class Name: ServerBasicTop</div><div id='m_method'> M Method Name: listen_clients(1)</div><div id='n_method'> N Method Name: listen_clients(1)</div><div id='m_parent_class'> M Parent Class: Process</div><div id='n_parent_class'> N Parent Class: EndTop</div><div id='m_file'> M File Name: fedlab_core/server/topology.py</div><div id='n_file'> N File Name: fedlab_core/server/topology.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 117</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 40</div><BR>