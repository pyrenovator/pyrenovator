<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    tester = testers.BaseTester(batch_size=batch_size, dataloader_num_workers=4)
    train_embeddings, train_labels = tester.get_all_embeddings(train_set, model)
    test_embeddings, test_labels = tester.get_all_embeddings(val_set, model)
    train_labels, test_labels = <a id="change">train_labels.squeeze(</a>1<a id="change">)</a>, test_labels.squeeze(1)

    accuracy_calculator = AccuracyCalculator(include=("precision_at_1",), k=1)
    accuracies = accuracy_calculator.get_accuracy(</code></pre><h3>After Change</h3><pre><code class='java'>
    mode: 指定评估类型
    
    &#47&#47 assert mode in ["eval", "test"]
    if "positive_pairs" in <a id="change">dataset[mode].keys()</a>:
        &#47&#47 [类型,是否为同类,图片1,图片2] 样本对格式
        pass
    else:</code></pre>