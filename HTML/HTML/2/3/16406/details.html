<html><h3>Pattern ID :16406
</h3><img src='55204334.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                       partial_fields={}, sort=sort, start=offset, size=limit)
        except elasticsearch.exceptions.ConnectionError:
            logging.debug(" ***&gt; ~FRNo search server available.")
            <a id="change">return </a>[]

        logging.info(" ---&gt; ~FG~SNSearch ~FCstories~FG for: ~SB%s~SN (across %s feed%s)" % 
                     (query, len(feed_ids), &quots&quot if len(feed_ids) != 1 else &quot&quot))</code></pre><h3>After Change</h3><pre><code class='java'>
        string_q = elasticsearch_dsl.Q(&quotquery_string&quot, query=query)
        feed_q = elasticsearch_dsl.Q(&quotterms&quot, feed_id=feed_ids[:2000])
        search_q = string_q & feed_q
        s = <a id="change">s.sort(</a>sort<a id="change">)</a>[offset:offset+limit]
        s.query(search_q)
        results<a id="change"> = </a>s.execute()

        &#47&#47 string_q = pyes.query.QueryStringQuery(query, default_operator="AND")
        &#47&#47 feed_q   = pyes.query.TermsQuery(&quotfeed_id&quot, feed_ids[:2000])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/fb322a6573c5c5fc33d6cab163a24faa69117538#diff-aabed929f6b36c2d7c211f338b5107bf82a67e6006fbcbd14474f99aac581abcL291' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55204334</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: fb322a6573c5c5fc33d6cab163a24faa69117538</div><div id='time'> Time: 2021-03-19</div><div id='author'> Author: samuel@ofbrooklyn.com</div><div id='file'> File Name: apps/search/models.py</div><div id='m_class'> M Class Name: SearchStory</div><div id='n_method'> N Class Name: SearchStory</div><div id='m_method'> M Method Name: query(7)</div><div id='n_method'> N Method Name: query(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: apps/search/models.py</div><div id='n_file'> N File Name: apps/search/models.py</div><div id='m_start'> M Start Line: 291</div><div id='m_end'> M End Line: 307</div><div id='n_start'> N Start Line: 293</div><div id='n_end'> N End Line: 318</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                tensor * ctx.scale, torch.log(w), regularization
            )
            ctx.factor = torch.exp(ctx.projection.compute())
            <a id="change">return </a>ctx.factor

    @staticmethod
    def backward(ctx, grad_output):</code></pre><h3>After Change</h3><pre><code class='java'>
        ctx.regularization = regularization
        w = _arange_like(tensor, reverse=True) + 1
        theta = tensor * ctx.scale
        s<a id="change">, permutation = </a><a id="change">torch.sort(</a>theta<a id="change">, descending=True)</a>
        inv_permutation = _inv_permutation(permutation)
        if ctx.regularization == "l2":
            dual_sol = isotonic_l2_cpu(s - w)
            ret = (s - dual_sol)[inv_permutation]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/teddykoker/torchsort/commit/c8ac1de21639cf057aeff4f1aea1639b839276ed#diff-6cfcf9d2a83ff3ad8d3e7dbd9b0ab5e6184109cd09839661ed2bc52cbaf2f5c0L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55204339</div><div id='project'> Project Name: teddykoker/torchsort</div><div id='commit'> Commit Name: c8ac1de21639cf057aeff4f1aea1639b839276ed</div><div id='time'> Time: 2021-03-21</div><div id='author'> Author: teddy.koker@gmail.com</div><div id='file'> File Name: torchsort/ops.py</div><div id='m_class'> M Class Name: SoftRank</div><div id='n_method'> N Class Name: SoftRank</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: torchsort/ops.py</div><div id='n_file'> N File Name: torchsort/ops.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    del S, Y, X, M, G
    gc.collect()

    <a id="change">return </a>ts_data, s_data, meta_data, t_cols, s_cols

&#47&#47 Cell
@patch</code></pre><h3>After Change</h3><pre><code class='java'>
    assert np.array_equal(M.ds.values, Y.ds.values), f&quotMismatch in M, Y ds&quot

    &#47&#47 Dates
    ds<a id="change"> = </a><a id="change">np.sort(</a>Y[&quotds&quot].unique()<a id="change">)</a>

    &#47&#47 Create bigger grouped by dataframe G to parse
    M = M[[&quotavailable_mask&quot, &quotsample_mask&quot]]
    X.drop(labels=[&quotunique_id&quot, &quotds&quot], axis=1, inplace=True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/d043b81de884c358278d100600a26454b7e94d4c#diff-74907492a221e419d5c4fb8be1cc10560f805b11a802c170fb486901bac1eeedL148' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55204337</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: d043b81de884c358278d100600a26454b7e94d4c</div><div id='time'> Time: 2022-06-09</div><div id='author'> Author: kin.gtz.olivares@gmail.com</div><div id='file'> File Name: neuralforecast/data/tsdataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _df_to_lists(5)</div><div id='n_method'> N Method Name: _df_to_lists(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralforecast/data/tsdataset.py</div><div id='n_file'> N File Name: neuralforecast/data/tsdataset.py</div><div id='m_start'> M Start Line: 213</div><div id='m_end'> M End Line: 234</div><div id='n_start'> N Start Line: 198</div><div id='n_end'> N End Line: 239</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Load everything
        self.load_calib_poses()

        <a id="change">return</a>

    def __len__(self):
        
        Return the length of data here</code></pre><h3>After Change</h3><pre><code class='java'>
            
            elif self.sensor == &quotcamera&quot:
                sensor_path = join(self.path, &quotsequences&quot, seq, &quotimage_2&quot)
                frames<a id="change"> = </a><a id="change">np.sort(</a>[f[:-4] for f in listdir(sensor_path) if f.endswith(&quot.png&quot)]<a id="change">)</a>
            
            self.frames.append(frames)

        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/utiasasrl/hero_radar_odometry/commit/73a52f7cc6a3fc5963e0b6bb1304e257f097384d#diff-bab160ce378d2a3565047a8f9fa3b0ce759e240145dc550cd117ed541dcd6ac8L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55204343</div><div id='project'> Project Name: utiasasrl/hero_radar_odometry</div><div id='commit'> Commit Name: 73a52f7cc6a3fc5963e0b6bb1304e257f097384d</div><div id='time'> Time: 2020-08-13</div><div id='author'> Author: mona.gridseth@robotics.utias.utoronto.ca</div><div id='file'> File Name: datasets/kitti.py</div><div id='m_class'> M Class Name: KittiDataset</div><div id='n_method'> N Class Name: KittiDataset</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: datasets/kitti.py</div><div id='n_file'> N File Name: datasets/kitti.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 115</div><BR>