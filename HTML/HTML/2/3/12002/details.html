<html><h3>Pattern ID :12002
</h3><img src='40556954.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        transformers.modeling_utils.logger.setLevel(logging.ERROR)

        generate_corpus = [self._preprocess(generate_sentence) for generate_sentence in generate_corpus]
        reference_corpus = [<a id="change">self._preprocess(</a>reference_sentence<a id="change">)</a> for reference_sentence in reference_corpus]

        result = {}
        if self.model == None:
            P, R, F1 = score(generate_corpus, reference_corpus, lang=self.lang, verbose=False)
        else:
            if self.num_layers == None:
                raise ValueError("num_layer should be an integer")
            P<a id="change">, R, F1 = </a>score(
                generate_corpus, reference_corpus, model_type=self.model, num_layers=self.num_layers, verbose=False
            )
        result[&quotbert-score&quot] = F1.tolist()</code></pre><h3>After Change</h3><pre><code class='java'>
        results = {}
        _, _, f_score = score(generate_corpus, reference_corpus, lang=self.lang, batch_size=self.batch_size, device=self.device)
        results[&quotBERTScore&quot] = f_score.mean().item() * 100
        <a id="change">return </a>results
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/77528d404f00a41f10850cdfc9676d40c1362f46#diff-5fd8b4335c9485e3030d85d5385698c4f7657620e6a2b047b392e0f3aa778a8bL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40556954</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: 77528d404f00a41f10850cdfc9676d40c1362f46</div><div id='time'> Time: 2022-07-13</div><div id='author'> Author: 1020139164@qq.com</div><div id='file'> File Name: textbox/evaluator/bertscore_evaluator.py</div><div id='m_class'> M Class Name: BertScoreEvaluator</div><div id='n_method'> N Class Name: BertScoreEvaluator</div><div id='m_method'> M Method Name: _calc_metrics_info(3)</div><div id='n_method'> N Method Name: _calc_metrics_info(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: textbox/evaluator/bertscore_evaluator.py</div><div id='n_file'> N File Name: textbox/evaluator/bertscore_evaluator.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 26</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        from .nlp.utils import load_model
        from .nlp.huggingface.trainer import TrainerForAuto

        X_test<a id="change">, _ = </a><a id="change">self._preprocess(X=X_test, **self._kwargs)</a>
        test_dataset = Dataset.from_pandas(X_test)

        best_model = load_model(</code></pre><h3>After Change</h3><pre><code class='java'>
            )
            return decoded_preds
        elif self._task == MULTICHOICECLASSIFICATION:
            <a id="change">return </a>np.argmax(predictions.predictions, axis=1)

    def config2params(self, config: dict) -&gt; dict:
        params = config.copy()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/flaml/commit/9c00e4272a7d448131aaead72342f52c6a900388#diff-bcb081d24bf68e74b77ef08dd168d58ea7b1dc90855e686f58586ee83a1f4cadL688' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40556952</div><div id='project'> Project Name: microsoft/flaml</div><div id='commit'> Commit Name: 9c00e4272a7d448131aaead72342f52c6a900388</div><div id='time'> Time: 2022-01-02</div><div id='author'> Author: 91398474+oberonbot@users.noreply.github.com</div><div id='file'> File Name: flaml/model.py</div><div id='m_class'> M Class Name: TransformersEstimator</div><div id='n_method'> N Class Name: TransformersEstimator</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: BaseEstimator</div><div id='n_parent_class'> N Parent Class: BaseEstimator</div><div id='m_file'> M File Name: flaml/model.py</div><div id='n_file'> N File Name: flaml/model.py</div><div id='m_start'> M Start Line: 693</div><div id='m_end'> M End Line: 707</div><div id='n_start'> N Start Line: 714</div><div id='n_end'> N End Line: 739</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return " ".join(input_sentence)

    def _calc_metrics_info(self, generate_corpus, reference_corpus):
        generate_corpus<a id="change"> = </a>[<a id="change">self._preprocess(</a>generate_sentence<a id="change">)</a> for generate_sentence in generate_corpus]
        reference_corpus = [self._preprocess(reference_sentence) for reference_sentence in reference_corpus]
        reference_corpus = [[reference_sentence] for reference_sentence in reference_corpus]
</code></pre><h3>After Change</h3><pre><code class='java'>
            for gen, refs in zip(generate_corpus, reference_corpus):
                score = meteor_score(refs, gen)
                results[&quotMETEOR&quot].append(score * 100)
        <a id="change">return </a>results
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/77528d404f00a41f10850cdfc9676d40c1362f46#diff-8a7d045576b664dfeac8ea334cb4bea212505dba77b36b318e1d5159cfd2a67fL20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40556958</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: 77528d404f00a41f10850cdfc9676d40c1362f46</div><div id='time'> Time: 2022-07-13</div><div id='author'> Author: 1020139164@qq.com</div><div id='file'> File Name: textbox/evaluator/meteor_evaluator.py</div><div id='m_class'> M Class Name: MeteorEvaluator</div><div id='n_method'> N Class Name: MeteorEvaluator</div><div id='m_method'> M Method Name: _calc_metrics_info(3)</div><div id='n_method'> N Method Name: _calc_metrics_info(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: textbox/evaluator/meteor_evaluator.py</div><div id='n_file'> N File Name: textbox/evaluator/meteor_evaluator.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 37</div><BR>