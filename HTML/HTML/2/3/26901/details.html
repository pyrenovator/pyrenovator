<html><h3>Pattern ID :26901
</h3><img src='80247915.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    users = to_numpy(log, "user_idx")
    items = to_numpy(log, "item_idx")
    relevance = <a id="change">to_numpy(</a>log, "relevance"<a id="change">)</a>
    <a id="change">return </a>csr_matrix((relevance, (items, users)))


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:</code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 2]], dtype=int64)
    
    df = log.select("user_idx", "item_idx", "relevance").toPandas()
    <a id="change">return </a>csr_matrix((df.relevance, (df.item_idx, df.user_idx)))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/d64dec49c52992118860248b7aba033c903c12b9#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL277' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80247915</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: d64dec49c52992118860248b7aba033c903c12b9</div><div id='time'> Time: 2020-04-30</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
           [0, 0],
           [0, 2]], dtype=int64)
    
    users = <a id="change">to_numpy(</a>log, "user_idx"<a id="change">)</a>
    items = to_numpy(log, "item_idx")
    relevance = to_numpy(log, "relevance")
    <a id="change">return </a>csr_matrix((relevance, (items, users)))


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:</code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 2]], dtype=int64)
    
    df = log.select("user_idx", "item_idx", "relevance").toPandas()
    <a id="change">return </a>csr_matrix((df.relevance, (df.item_idx, df.user_idx)))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/11d2dcf0cc56cfcbaee2c35e801681acf6757d9a#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL263' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80247916</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 11d2dcf0cc56cfcbaee2c35e801681acf6757d9a</div><div id='time'> Time: 2020-05-07</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    elif isinstance(x, np.ndarray):
        a = x
    elif isinstance(x, tuple):
        <a id="change">return </a>tuple(<a id="change">to_numpy(</a>xx<a id="change">)</a> for xx in x)
    else:
        a = np.array(x)
    return a</code></pre><h3>After Change</h3><pre><code class='java'>


def to_numpy(x):
    <a id="change">return </a>map_r(x, lambda x: x.detach().numpy() if x is not None else None)


def to_gpu(data):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dena/handyrl/commit/1c3139f219a248815de9b4ee7cd5c02200caf9b2#diff-fada037ad086638e65c7ae77e3d223963e9afaa26326aab0ea718f4013176e43L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80247917</div><div id='project'> Project Name: dena/handyrl</div><div id='commit'> Commit Name: 1c3139f219a248815de9b4ee7cd5c02200caf9b2</div><div id='time'> Time: 2020-06-25</div><div id='author'> Author: a.a.b.a.b.c.a.b.c.d.abcd1234@gmail.com</div><div id='file'> File Name: model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_numpy(1)</div><div id='n_method'> N Method Name: to_numpy(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model.py</div><div id='n_file'> N File Name: model.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 39</div><BR>