<html><h3>Pattern ID :20274
</h3><img src='65966319.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def _parse_version(version_str):
    &quot&quot&quotParse a version string and extract the major, minor, and patch versions.&quot&quot&quot
    import re
    matched<a id="change"> = </a><a id="change">re.search(</a>&quot^(\d+)\.(\d+)\.(\d+)&quot, version_str<a id="change">)</a>
    return int(matched.group(1)), int(matched.group(2)), int(matched.group(3))


&#47&#47 Export version information</code></pre><h3>After Change</h3><pre><code class='java'>
def _parse_version(version_str):
    &quot&quot&quotParse a version string and extract the major, minor, and patch versions.&quot&quot&quot
    ver = packaging.version.parse(version_str)
    return ver.major<a id="change">, ver.minor, ver.micro</a>


&#47&#47 Export version information
__version__ = version</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/deepspeed/commit/cfa63f5dad2b0c45a23ee9e34d47206ee29a356a#diff-e4defb5252639e56cd3af8822625671eb75ffc4215dd637ea0d75a06c490c35bL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65966319</div><div id='project'> Project Name: microsoft/deepspeed</div><div id='commit'> Commit Name: cfa63f5dad2b0c45a23ee9e34d47206ee29a356a</div><div id='time'> Time: 2021-05-19</div><div id='author'> Author: jerasley@microsoft.com</div><div id='file'> File Name: deepspeed/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _parse_version(1)</div><div id='n_method'> N Method Name: _parse_version(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepspeed/__init__.py</div><div id='n_file'> N File Name: deepspeed/__init__.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &quot&quot&quot
    default_top = 50
    encoded_query = self.encoder.encode([query])
    top_n_results = <a id="change">self.field_index.search(</a>encoded_query, default_top<a id="change">)</a>
    ids<a id="change"> = </a>top_n_results[1].tolist()[0]
    similar_papers = self.sql_manager.get_by_multiple_ids(ids)
    similar_papers_fnames = [similar_papers[elt][&quotfname&quot] for elt in similar_papers if similar_papers[elt][&quotmessages&quot]]
    return (similar_papers, similar_papers_fnames)</code></pre><h3>After Change</h3><pre><code class='java'>
    elif query_type == 3:  &#47&#47 semantics
      selected_papers, selected_papers_fnames = self.get_papers_with_semantics(query)

    return selected_papers<a id="change">, selected_papers_fnames</a>

  def get_query_type(self, query):
    &quot&quot&quot
    determine the query type : AND op (0), OR op (1), exact match (2),semantic (3)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yassinekdi/naimai/commit/3d8d6db3c5e2790f11c16692a5201d6b321414fc#diff-c01386214ef6a08e0be2939fb9562648a4f852f505f348a809ea604b1d5595d2L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65966316</div><div id='project'> Project Name: yassinekdi/naimai</div><div id='commit'> Commit Name: 3d8d6db3c5e2790f11c16692a5201d6b321414fc</div><div id='time'> Time: 2022-08-03</div><div id='author'> Author: keptsa@yahoo.fr</div><div id='file'> File Name: pipelines/querier.py</div><div id='m_class'> M Class Name: Querier</div><div id='n_method'> N Class Name: Querier</div><div id='m_method'> M Method Name: get_all_similar_papers(3)</div><div id='n_method'> N Method Name: get_all_similar_papers(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pipelines/querier.py</div><div id='n_file'> N File Name: pipelines/querier.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 perform the training
    clus.train(x, index)
    _<a id="change">, I = </a><a id="change">index.search(</a>x, 1<a id="change">)</a>
    losses = faiss.vector_to_array(clus.obj)
    if verbose:
        print("k-means loss evolution: {0}".format(losses))
</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 perform the training
    clus.train(x)
    dists<a id="change">, I</a> = clus.index.search(x, 1)
    losses = faiss.vector_to_array(clus.obj)
    if verbose:
        print("k-means loss evolution: {0}".format(losses))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/biasvariancelabs/aitlas/commit/ea7b15575cce3767edf907a803ddb173b6331fd0#diff-6dd49bf8ef006b8427647314334ecb869c8ad22568ba10f03828733e0b60c07dL126' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65966311</div><div id='project'> Project Name: biasvariancelabs/aitlas</div><div id='commit'> Commit Name: ea7b15575cce3767edf907a803ddb173b6331fd0</div><div id='time'> Time: 2021-03-02</div><div id='author'> Author: ivan.kitanovski@gmail.com</div><div id='file'> File Name: aitlas/clustering/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_kmeans(3)</div><div id='n_method'> N Method Name: run_kmeans(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: aitlas/clustering/utils.py</div><div id='n_file'> N File Name: aitlas/clustering/utils.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 148</div><div id='n_end'> N End Line: 153</div><BR>