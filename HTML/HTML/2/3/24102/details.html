<html><h3>Pattern ID :24102
</h3><img src='74816017.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
			break
		if loss.detach().cpu().item() &gt; loss_schedule[curr_stage]:
			curr_stage += 1
			if curr_stage &lt; <a id="change">len(</a>lr_schedule<a id="change">)</a>:
				curr_lr = lr_schedule[curr_stage]
				for g in optimizer.param_groups:
					g[&quotlr&quot] = curr_lr</code></pre><h3>After Change</h3><pre><code class='java'>


def train(network):
	loss_schedule = <a id="change">np.linspace(</a>0.9, <a id="change">0.99</a><a id="change">, num=3)</a>
	curr_stage = 0
	curr_lr = 1e-3
	lr_history = []
	history = []</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neurotorch/neurotorch/commit/1448822fbe5f5b55b9f4434da75c983e31f11bf8#diff-13d67778ac9082a79067547056c347fc83d10d588fe48a27d4fc563dfb2d0299L119' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74816017</div><div id='project'> Project Name: neurotorch/neurotorch</div><div id='commit'> Commit Name: 1448822fbe5f5b55b9f4434da75c983e31f11bf8</div><div id='time'> Time: 2022-08-06</div><div id='author'> Author: 50332514+JeremieGince@users.noreply.github.com</div><div id='file'> File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='n_file'> N File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='m_start'> M Start Line: 119</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 146</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.eps = eps
        self.n_anchors = n_anchors
        self.strides = strides
        self.grids = [torch.zeros(1)] * <a id="change">len(</a>in_channels<a id="change">)</a>

        &#47&#47 Define criteria
        self.l1_loss = nn.L1Loss(reduction="none")
        self.bcewithlog_loss = nn.BCEWithLogitsLoss(reduction="none")</code></pre><h3>After Change</h3><pre><code class='java'>

        self.use_dfl = use_dfl
        self.reg_max = reg_max
        self.proj = nn.Parameter(<a id="change">torch.linspace(0</a>, self.reg_max, self.reg_max + 1<a id="change">)</a>, requires_grad=False)
        self.iou_type = iou_type
        self.varifocal_loss = VarifocalLoss().cuda()
        self.bbox_loss = BboxLoss(self.num_classes, self.reg_max, self.use_dfl, self.iou_type).cuda()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/meituan/yolov6/commit/49a80b1fdd025c9a326d0e4fea9825581dec00f4#diff-f5ab5072fa9b7f47c99fbeadd712a2a08c8133ef366a86c68b25399b1120fb7dL19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74816019</div><div id='project'> Project Name: meituan/yolov6</div><div id='commit'> Commit Name: 49a80b1fdd025c9a326d0e4fea9825581dec00f4</div><div id='time'> Time: 2022-08-31</div><div id='author'> Author: lichuyi@meituan.com</div><div id='file'> File Name: yolov6/models/loss.py</div><div id='m_class'> M Class Name: ComputeLoss</div><div id='n_method'> N Class Name: ComputeLoss</div><div id='m_method'> M Method Name: __init__(11)</div><div id='n_method'> N Method Name: __init__(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: yolov6/models/loss.py</div><div id='n_file'> N File Name: yolov6/models/loss.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.eps = eps
        self.n_anchors = n_anchors
        self.strides = strides
        self.grids = [torch.zeros(1)] * <a id="change">len(</a>in_channels<a id="change">)</a>

        &#47&#47 Define criteria
        self.l1_loss = nn.L1Loss(reduction="none")
        self.bcewithlog_loss = nn.BCEWithLogitsLoss(reduction="none")</code></pre><h3>After Change</h3><pre><code class='java'>

        self.use_dfl = use_dfl
        self.reg_max = reg_max
        self.proj = nn.Parameter(<a id="change">torch.linspace(0</a>, self.reg_max, self.reg_max + 1<a id="change">)</a>, requires_grad=False)
        self.iou_type = iou_type
        self.varifocal_loss = VarifocalLoss().cuda()
        self.bbox_loss = BboxLoss(self.num_classes, self.reg_max, self.use_dfl, self.iou_type).cuda()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/augmentedstartups/as-one/commit/6f2f010dcaf35105030dcf5c371d3d2f97c25d90#diff-e3ac51eacfe16a9d2e965639b8fda41782741393dd8a9d768edfc37722dd5e00L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74816018</div><div id='project'> Project Name: augmentedstartups/as-one</div><div id='commit'> Commit Name: 6f2f010dcaf35105030dcf5c371d3d2f97c25d90</div><div id='time'> Time: 2022-09-16</div><div id='author'> Author: ajmair.kashif@axcelerate.ai</div><div id='file'> File Name: asone/detectors/yolov6/yolov6/models/loss.py</div><div id='m_class'> M Class Name: ComputeLoss</div><div id='n_method'> N Class Name: ComputeLoss</div><div id='m_method'> M Method Name: __init__(11)</div><div id='n_method'> N Method Name: __init__(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: asone/detectors/yolov6/yolov6/models/loss.py</div><div id='n_file'> N File Name: asone/detectors/yolov6/yolov6/models/loss.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
class WeightSentencizer(Sentencizer):
    def craft(self, raw_bytes: bytes, doc_id: int, *args, ** kwargs) -&gt; List[Dict]:
        results = super().craft(raw_bytes, doc_id)
        if <a id="change">len(</a>results<a id="change">)</a> &gt; 1:
            results[0][&quotweight&quot] = 0.5
            avg = 0.5 / (len(results) -1)
</code></pre><h3>After Change</h3><pre><code class='java'>
class WeightSentencizer(Sentencizer):
    def craft(self, raw_bytes: bytes, doc_id: int, *args, ** kwargs) -&gt; List[Dict]:
        results = super().craft(raw_bytes, doc_id)
        weights = <a id="change">np.linspace(</a>1, <a id="change">0</a>, len(results)<a id="change">)</a>
        for result, weight in zip(results, weights):
            result[&quotweight&quot] = weight

        return results</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/ce67d135189ee40a3c9ed02096723df07cadee93#diff-6f2631605b64493e7b651e0094fd6225c2f235def82c341d3fa88abc73cc7f14L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74816015</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: ce67d135189ee40a3c9ed02096723df07cadee93</div><div id='time'> Time: 2020-04-13</div><div id='author'> Author: xiong.ma@jina.ai</div><div id='file'> File Name: news-search/images/extractor/extractor.py</div><div id='m_class'> M Class Name: WeightSentencizer</div><div id='n_method'> N Class Name: WeightSentencizer</div><div id='m_method'> M Method Name: craft(3)</div><div id='n_method'> N Method Name: craft(3)</div><div id='m_parent_class'> M Parent Class: Sentencizer</div><div id='n_parent_class'> N Parent Class: Sentencizer</div><div id='m_file'> M File Name: news-search/images/extractor/extractor.py</div><div id='n_file'> N File Name: news-search/images/extractor/extractor.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 15</div><BR>