<html><h3>Pattern ID :4391
</h3><img src='16173158.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 DeepSORT: https://github.com/ZQPei/deep_sort_pytorch/blob/master/deep_sort/sort/tracker.py

    def __init__(self, model: nn.Module, device="cpu", nms_kernel=3, num_detections=100, detection_threshold=0.1, matching_threshold=0.2, matching_cost=None, smoothing_factor=0.9):
        <a id="change">model.eval()</a>
        self.model = model

        &#47&#47 hparams
        self.device = device</code></pre><h3>After Change</h3><pre><code class='java'>
            warnings.warn("A model was not provided. Only `.update()` will work")
        
        &#47&#47 hparams
        self.device = (model.device if isinstance(model, LightningModule) else "cpu")<a id="change"> if device is None</a><a id="change"> else </a>device
        self.nms_kernel = nms_kernel
        self.num_detections = num_detections
        self.detection_threshold = detection_threshold</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/gau-nernst/centernet-lightning/commit/249b4ebe9c085563d2f8a19837e18d886562a1e4#diff-ca721a49e525ff45a8163e5a1376189506310ff21254b78dc40ed9047eb5a2fdL51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16173158</div><div id='project'> Project Name: gau-nernst/centernet-lightning</div><div id='commit'> Commit Name: 249b4ebe9c085563d2f8a19837e18d886562a1e4</div><div id='time'> Time: 2021-08-01</div><div id='author'> Author: gau.nernst@yahoo.com.sg</div><div id='file'> File Name: src/models/tracker.py</div><div id='m_class'> M Class Name: Tracker</div><div id='n_method'> N Class Name: Tracker</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/models/tracker.py</div><div id='n_file'> N File Name: src/models/tracker.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 63</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                apply_accumulate_stat(gen_copy, standing_step, prior, batch_size, z_dim, num_classes, device)
                gen_copy.apply(set_deterministic_op_train)
            else:
                <a id="change">gen_copy.eval()</a>
                gen_copy.apply(set_bn_train)
                gen_copy.apply(set_deterministic_op_train)
            return gen_copy
        else:</code></pre><h3>After Change</h3><pre><code class='java'>


def change_generator_mode(gen, gen_copy, standing_statistics, standing_step, prior, batch_size, z_dim, num_classes, device, training):
    gen_tmp = gen<a id="change"> if gen_copy is None</a><a id="change"> else </a>gen_copy

    if training:
        gen.train()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/postech-cvlab/pytorch-studiogan/commit/5939d6acea4f16cf08fda6cd712a849ae1b4976a#diff-393800f4a49ca59ffd88962f21f1018eab5f06b262714c1794ab1ab97dd67628L264' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16173156</div><div id='project'> Project Name: postech-cvlab/pytorch-studiogan</div><div id='commit'> Commit Name: 5939d6acea4f16cf08fda6cd712a849ae1b4976a</div><div id='time'> Time: 2020-11-12</div><div id='author'> Author: first287@naver.com</div><div id='file'> File Name: src/utils/misc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: change_generator_mode(10)</div><div id='n_method'> N Method Name: change_generator_mode(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils/misc.py</div><div id='n_file'> N File Name: src/utils/misc.py</div><div id='m_start'> M Start Line: 267</div><div id='m_end'> M End Line: 289</div><div id='n_start'> N Start Line: 246</div><div id='n_end'> N End Line: 260</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def result(self):

        return <a id="change">self.recall.eval()</a>

    def reset(self):

        self.recall.clear()</code></pre><h3>After Change</h3><pre><code class='java'>
    def result(self):

        recall = self.tp + self.fn
        return float(self.tp) / recall<a id="change"> if recall != 0</a><a id="change"> else </a>.0

    def reset(self):
        self.tp = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tensorlayer/tensorlayerx/commit/130cada37a04f7cdb63d9c6eae9b6f6773ef9586#diff-a291f53e63ddc35835480d6412a7a7cb2d2135293594fd38753d2be42fb2f56aL120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16173154</div><div id='project'> Project Name: tensorlayer/tensorlayerx</div><div id='commit'> Commit Name: 130cada37a04f7cdb63d9c6eae9b6f6773ef9586</div><div id='time'> Time: 2022-03-21</div><div id='author'> Author: jiaronghan@outlook.com</div><div id='file'> File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='m_class'> M Class Name: Recall</div><div id='n_method'> N Class Name: Recall</div><div id='m_method'> M Method Name: result(1)</div><div id='n_method'> N Method Name: result(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='n_file'> N File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='m_start'> M Start Line: 122</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 160</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if standing_statistics:
            apply_accumulate_stat(gen, standing_step, prior, batch_size, z_dim, num_classes, device)
        else:
            <a id="change">gen.eval()</a>
        gen.apply(set_deterministic_op_train)
        if gen_copy is not None:
            if standing_statistics:
                apply_accumulate_stat(gen_copy, standing_step, prior, batch_size, z_dim, num_classes, device)</code></pre><h3>After Change</h3><pre><code class='java'>


def change_generator_mode(gen, gen_copy, standing_statistics, standing_step, prior, batch_size, z_dim, num_classes, device, training):
    gen_tmp = gen<a id="change"> if gen_copy is None</a><a id="change"> else </a>gen_copy

    if training:
        gen_tmp.train()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/postech-cvlab/pytorch-studiogan/commit/41e99a9dd9a581a3f53ec305a3e023406fab79ff#diff-393800f4a49ca59ffd88962f21f1018eab5f06b262714c1794ab1ab97dd67628L245' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16173153</div><div id='project'> Project Name: postech-cvlab/pytorch-studiogan</div><div id='commit'> Commit Name: 41e99a9dd9a581a3f53ec305a3e023406fab79ff</div><div id='time'> Time: 2020-11-10</div><div id='author'> Author: first287@naver.com</div><div id='file'> File Name: src/utils/misc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: change_generator_mode(10)</div><div id='n_method'> N Method Name: change_generator_mode(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils/misc.py</div><div id='n_file'> N File Name: src/utils/misc.py</div><div id='m_start'> M Start Line: 246</div><div id='m_end'> M End Line: 269</div><div id='n_start'> N Start Line: 244</div><div id='n_end'> N End Line: 257</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def result(self):

        return <a id="change">self.precision.eval()</a>

    def reset(self):

        self.precision.clear()</code></pre><h3>After Change</h3><pre><code class='java'>
    def result(self):

        ap = self.tp + self.fp
        return float(self.tp) / ap<a id="change"> if ap != 0</a><a id="change"> else </a>.0

    def reset(self):
        self.tp = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tensorlayer/tensorlayerx/commit/130cada37a04f7cdb63d9c6eae9b6f6773ef9586#diff-a291f53e63ddc35835480d6412a7a7cb2d2135293594fd38753d2be42fb2f56aL101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16173161</div><div id='project'> Project Name: tensorlayer/tensorlayerx</div><div id='commit'> Commit Name: 130cada37a04f7cdb63d9c6eae9b6f6773ef9586</div><div id='time'> Time: 2022-03-21</div><div id='author'> Author: jiaronghan@outlook.com</div><div id='file'> File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='m_class'> M Class Name: Precision</div><div id='n_method'> N Class Name: Precision</div><div id='m_method'> M Method Name: result(1)</div><div id='n_method'> N Method Name: result(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='n_file'> N File Name: tensorlayerx/metrics/mindspore_metric.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 122</div><BR>