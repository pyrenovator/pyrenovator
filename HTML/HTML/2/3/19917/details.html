<html><h3>Pattern ID :19917
</h3><img src='64770180.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            epoch_loss = 0.0
            self.logger.info("Train epoch = %d", epoch)
            self.logger.info("Start time = %s", time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(<a id="change">time.time()</a>)))
            self.model.train()
            if self.use_tqdm:
                progress = enumerate(tqdm(self.train_dataloader, desc="Iteration", leave=False), 1)</code></pre><h3>After Change</h3><pre><code class='java'>
                    for key, value in evaluate_result.items():
                        self.writer.add_scalar(tag=key, scalar_value=value, global_step=global_step)

            <a id="change">logger.info("Epoch loss = %f"</a>, epoch_loss<a id="change">)</a>
        logger.info("End training")
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/cognlp/cogktr/commit/9502ba52191937c9b8de5667a263f04192d50a01#diff-17d2e7bc3910d2bfaa97aaab120178b809da26b1c20e8d47de440306acc548a3L161' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64770180</div><div id='project'> Project Name: cognlp/cogktr</div><div id='commit'> Commit Name: 9502ba52191937c9b8de5667a263f04192d50a01</div><div id='time'> Time: 2022-05-30</div><div id='author'> Author: 1208314139@qq.com</div><div id='file'> File Name: cogktr/core/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cogktr/core/trainer.py</div><div id='n_file'> N File Name: cogktr/core/trainer.py</div><div id='m_start'> M Start Line: 183</div><div id='m_end'> M End Line: 315</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 289</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if self._estimator_index is not None:
                    self._active_estimators.remove(estimator)
                    self._estimator_index -= 1
                self._state.time_from_start = <a id="change">time.time()</a> - self._start_time_flag
                if self._state.time_budget &gt; self._state.time_from_start:
                    search_state.search_alg.searcher._is_ls_ever_converged = True
            if (</code></pre><h3>After Change</h3><pre><code class='java'>
                        ratio = search_state.data_size / search_state.sample_size
                        min_budget *= ratio
                        max_budget *= ratio
                    <a id="change">logger.info(
                        f"Estimated sufficient time budget={max_budget:.0f}s."
                        f" Estimated necessary time budget={min_budget:.0f}s."</a><a id="change">
                    )</a>
                if result["wall_clock_time"] is not None:
                    self._state.time_from_start = result["wall_clock_time"]
                &#47&#47 logger.info(f"{self._search_states[estimator].sample_size}, {data_size}")
                if search_state.sample_size == self._state.data_size:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/flaml/commit/16a97bec76ba101d62b1eb05484b20cc7c271e1c#diff-47aff7bcc3e528c362ea162261b640e1e276e2bce981dfafc6cce49d3d81e324L1704' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64770181</div><div id='project'> Project Name: microsoft/flaml</div><div id='commit'> Commit Name: 16a97bec76ba101d62b1eb05484b20cc7c271e1c</div><div id='time'> Time: 2021-09-23</div><div id='author'> Author: wang.chi@microsoft.com</div><div id='file'> File Name: flaml/automl.py</div><div id='m_class'> M Class Name: AutoML</div><div id='n_method'> N Class Name: AutoML</div><div id='m_method'> M Method Name: _search_sequential(1)</div><div id='n_method'> N Method Name: _search_sequential(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: flaml/automl.py</div><div id='n_file'> N File Name: flaml/automl.py</div><div id='m_start'> M Start Line: 1953</div><div id='m_end'> M End Line: 1964</div><div id='n_start'> N Start Line: 1747</div><div id='n_end'> N End Line: 1971</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

                loss_.update(loss.detach().item())

            end_time = <a id="change">time.time()</a>

            self._LOGGER.info(
                "Epoch {}/{}, Loss: {:.4f}, Time cost: {:.2f}s".format(
                    epoch + 1, epochs, loss_.sum, end_time - start_time</code></pre><h3>After Change</h3><pre><code class='java'>
                self.optimizer.zero_grad()
                loss.backward()
                self.optimizer.step()
        <a id="change">self._LOGGER.info("Local train procedure is finished"</a><a id="change">)</a>

class SerialTrainer(ClientTrainer):
    Train multiple clients in a single process.
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/1341b0c739d0c5f87684c84e4d5e454ec5357428#diff-e90248c7fae71aad75f36a9feb1abeb9e07058efafa1863c9f0d5e2ff8c62526L98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64770182</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 1341b0c739d0c5f87684c84e4d5e454ec5357428</div><div id='time'> Time: 2021-08-16</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab/core/client/trainer.py</div><div id='m_class'> M Class Name: ClientSGDTrainer</div><div id='n_method'> N Class Name: ClientSGDTrainer</div><div id='m_method'> M Method Name: train(3)</div><div id='n_method'> N Method Name: train(3)</div><div id='m_parent_class'> M Parent Class: ClientTrainer</div><div id='n_parent_class'> N Parent Class: ClientTrainer</div><div id='m_file'> M File Name: fedlab/core/client/trainer.py</div><div id='n_file'> N File Name: fedlab/core/client/trainer.py</div><div id='m_start'> M Start Line: 112</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 112</div><div id='n_end'> N End Line: 125</div><BR>