<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
      assert not math.isnan(val)
      const = Token(f"({val}f)", Types.FLOAT)

    can_merge = (not self.bufs[buf_index].st.needs_valid() and len(self.bufs[buf_index].st.views) == 1) or "Image" in <a id="change">str(</a>type(self.bufs[buf_index]._buf)<a id="change">)</a>
    should_upcast = not CLANG and const is None and can_merge and self.buftokens[buf_index].can_float4()

    tokens = []
    for o in self.buftokens[buf_index].offsets():</code></pre><h3>After Change</h3><pre><code class='java'>
          can_merge = True
          for j in range(1,4):
            idxy_test, valid_test = self.sts[buf_index].expr_idxs(o+j)
            can_merge = can_merge and valid.render() == <a id="change">valid_test.render()</a>
            can_merge<a id="change"> = </a>can_merge and (idxy+j).render() == idxy_test.render()
        if const is not None:
          ldr = const
        elif isinstance(self.bufs[buf_index]._buf, CLImage):</code></pre>