<html><h3>Pattern ID :8822
</h3><img src='32493256.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        target_v_value = (new_min_curr_state_q_value - new_curr_state_log_pi).detach()
        v_loss = F.mse_loss(curr_state_v_value, target_v_value)
        v_loss_value = v_loss.detach().cpu().numpy()
        <a id="change">self.v_optimizer.zero_grad()</a>
        v_loss.backward()
        self.v_optimizer.step()
        
        &#47&#47compute q loss</code></pre><h3>After Change</h3><pre><code class='java'>
            alpha_loss = torch.tensor(0.).to(util.device)
            alpha_value = self.alpha.detach().cpu().numpy()
        self.tot_update_count += 1
        <a id="change">return </a>q1_loss_value<a id="change">, q2_loss_value, policy_loss_value, alpha_loss_value, alpha_value</a>

    def try_update_target_network(self):
        if self.tot_update_count % self.update_target_network_interval == 0:
            util.soft_update_network(self.q1_network, self.target_q1_network, self.target_smoothing_tau)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/x35f/unstable_baselines/commit/0fc82ae6328814fe2dad0c8e0ae1b172d3e5f981#diff-5db644cd5bd54e3d73a4e86c3b2e245fd8f43751389307d15efbb99043bc1b0fL75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32493256</div><div id='project'> Project Name: x35f/unstable_baselines</div><div id='commit'> Commit Name: 0fc82ae6328814fe2dad0c8e0ae1b172d3e5f981</div><div id='time'> Time: 2021-03-12</div><div id='author'> Author: ym8411012@126.com</div><div id='file'> File Name: sac/models.py</div><div id='m_class'> M Class Name: SACAgent</div><div id='n_method'> N Class Name: SACAgent</div><div id='m_method'> M Method Name: update(2)</div><div id='n_method'> N Method Name: update(2)</div><div id='m_parent_class'> M Parent Class: BaseAgent,torch.nn.Module</div><div id='n_parent_class'> N Parent Class: BaseAgent,torch.nn.Module</div><div id='m_file'> M File Name: sac/models.py</div><div id='n_file'> N File Name: sac/models.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 129</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 129</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.model.eval()
        else:
            self.model.train()
            <a id="change">self.optimizer.zero_grad()</a>

        loss = None
        sample_size = 0
        logging_output = {</code></pre><h3>After Change</h3><pre><code class='java'>
                else:
                    raise e

        <a id="change">return </a>loss<a id="change">, sample_size, logging_output, oom</a>

    def _backward(self, loss):
        oom = 0
        if loss is not None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/2d27ae084ab1a376344d3fe803e35b8d5cbd81b6#diff-1d9c528283eebce84124f45bd2f04e9c1b50dc4d3f63e867776eb89dc55dd95fL124' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32493255</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: 2d27ae084ab1a376344d3fe803e35b8d5cbd81b6</div><div id='time'> Time: 2018-06-15</div><div id='author'> Author: edunov@apache.org</div><div id='file'> File Name: fairseq/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: _forward(3)</div><div id='n_method'> N Method Name: _forward(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fairseq/trainer.py</div><div id='n_file'> N File Name: fairseq/trainer.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 165</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 184</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                loss = loss.sum(dim=0)
                valid_loss += loss.item()
                
                <a id="change">self.optimizer.zero_grad()</a>
                
                if idx &lt; 5:
                    for _mixture_resampled, _estimated_sources in zip(mixture_resampled, estimated_sources):
                        print(_mixture_resampled.size(), _estimated_sources.size())</code></pre><h3>After Change</h3><pre><code class='java'>
        valid_similarity_loss /= n_valid
        valid_dissimilarity_loss /= n_valid
        
        <a id="change">return </a>valid_loss<a id="change">, valid_main_loss, valid_reconstruction_loss, valid_similarity_loss, valid_dissimilarity_loss</a></code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/5abf28af1871d3f13e68fb3a3fd9aa859488461f#diff-25176983d92b56aecbfd6b65dc7f3865f5be21e18b4d65613535fabec6e9550fL234' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32493254</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 5abf28af1871d3f13e68fb3a3fd9aa859488461f</div><div id='time'> Time: 2021-08-13</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/musdb18/meta-tasnet/src/adhoc_driver.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: run_one_epoch_eval(2)</div><div id='n_method'> N Method Name: run_one_epoch_eval(2)</div><div id='m_parent_class'> M Parent Class: TrainerBase</div><div id='n_parent_class'> N Parent Class: TrainerBase</div><div id='m_file'> M File Name: egs/musdb18/meta-tasnet/src/adhoc_driver.py</div><div id='n_file'> N File Name: egs/musdb18/meta-tasnet/src/adhoc_driver.py</div><div id='m_start'> M Start Line: 240</div><div id='m_end'> M End Line: 315</div><div id='n_start'> N Start Line: 240</div><div id='n_end'> N End Line: 328</div><BR>