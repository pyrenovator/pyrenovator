<html><h3>Pattern ID :17076
</h3><img src='57219823.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 The upload returns meta-data about the model that was uploaded
    &#47&#47 In this example, we just print it out to the terminal
    print(f"✅  Finished uploading the {ml_framework} model!")
    <a id="change">print(</a><a id="change">json.dumps(</a>meta_data<a id="change">, indent=4))</a>


if __name__ == "__main__":
    main()</code></pre><h3>After Change</h3><pre><code class='java'>
    model_id = meta_data["model"]["model_id"]
    model_type = meta_data["model"]["model_type"]["library"]

    <a id="change">print(</a>f"✅  Finished uploading the {ml_framework} model! (detected: {model_type})"<a id="change">)</a>

    &#47&#47 Demo how we can load the model back
    example.load_and_test(modelstore, model_domain, model_id)
    print(f"✅  Finished loading the {ml_framework} model!")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/operatorai/modelstore/commit/bfb64ac9115536fc6f7ab6d2ceb25ce6ced28e7f#diff-41f9fd04a27d4feea52e016f2e4af29e30c796ebcb37492a6887cf4f19eec892L71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57219823</div><div id='project'> Project Name: operatorai/modelstore</div><div id='commit'> Commit Name: bfb64ac9115536fc6f7ab6d2ceb25ce6ced28e7f</div><div id='time'> Time: 2022-04-14</div><div id='author'> Author: neal.lathia@gmail.com</div><div id='file'> File Name: examples/examples-by-ml-library/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/examples-by-ml-library/main.py</div><div id='n_file'> N File Name: examples/examples-by-ml-library/main.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 80</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 88</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def upload(self, messages):
        if os.environ.get(&quotSCRIBE_INTERN&quot):
            return self._upload_intern(messages)
        logs = <a id="change">json.dumps(
            </a>[
                {
                    "category": self.category,
                    "message": json.dumps(message),
                    "line_escape": False,
                }
                for message in messages
            ]<a id="change">
        )</a>
        res = send_to_scribe(logs)
        <a id="change">print(</a>res<a id="change">)</a>


class PytorchBenchmarkUploader(ScribeUploader):
    def __init__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
                ),
            },
        )
        <a id="change">print(</a>r.text<a id="change">)</a>
        r.raise_for_status()

class PytorchBenchmarkUploader(ScribeUploader):
    def __init__(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/3624d758648c3df0fb86eb71fdde648dba8cbe5e#diff-0efe168d4a680ae77ed6a865ec91a486ccb2480e6274956dbf17456c78cb5138L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57219825</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 3624d758648c3df0fb86eb71fdde648dba8cbe5e</div><div id='time'> Time: 2021-07-16</div><div id='author'> Author: jw3468@fb.com</div><div id='file'> File Name: benchmarks/upload_scribe.py</div><div id='m_class'> M Class Name: ScribeUploader</div><div id='n_method'> N Class Name: ScribeUploader</div><div id='m_method'> M Method Name: upload(2)</div><div id='n_method'> N Method Name: upload(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: benchmarks/upload_scribe.py</div><div id='n_file'> N File Name: benchmarks/upload_scribe.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def upload(self, messages):
        if os.environ.get(&quotSCRIBE_INTERN&quot):
            return self._upload_intern(messages)
        logs = <a id="change">json.dumps(
            </a>[
                {
                    "category": self.category,
                    "message": json.dumps(message),
                    "line_escape": False,
                }
                for message in messages
            ]<a id="change">
        )</a>
        res = send_to_scribe(logs)
        <a id="change">print(</a>res<a id="change">)</a>


class PytorchBenchmarkUploader(ScribeUploader):
    def __init__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
                ),
            },
        )
        <a id="change">print(</a>r.text<a id="change">)</a>
        r.raise_for_status()

class PytorchBenchmarkUploader(ScribeUploader):
    def __init__(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/ac5a40e068b0a1ce3c873ef1f681564376dbae52#diff-0efe168d4a680ae77ed6a865ec91a486ccb2480e6274956dbf17456c78cb5138L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57219824</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: ac5a40e068b0a1ce3c873ef1f681564376dbae52</div><div id='time'> Time: 2021-07-19</div><div id='author'> Author: zhouzhuojie@gmail.com</div><div id='file'> File Name: benchmarks/upload_scribe.py</div><div id='m_class'> M Class Name: ScribeUploader</div><div id='n_method'> N Class Name: ScribeUploader</div><div id='m_method'> M Method Name: upload(2)</div><div id='n_method'> N Method Name: upload(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: benchmarks/upload_scribe.py</div><div id='n_file'> N File Name: benchmarks/upload_scribe.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 68</div><BR>