<html><h3>Pattern ID :28296
</h3><img src='83590218.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        try: 
            [c,c_grad]      = c_fn(x0)
        except Exception as e:
            <a id="change">print(</a>e<a id="change">)</a>
            print("PyGRANSO userSuppliedFunctionsError : failed to evaluate [c,c_grad] = {}eq_fn(x0).".format(type_str))

        assertFnOutputs(n,c,c_grad,type_str+"equality constraints") 
        c_grad_norms        = torch.sqrt(torch.sum(torch.square(c_grad),0)) </code></pre><h3>After Change</h3><pre><code class='java'>
            [c,c_grad]      = c_fn(x0)
        except Exception as e:
            print("PyGRANSO userSuppliedFunctionsError : failed to evaluate [c,c_grad] = {}eq_fn(x0).".format(type_str))
            <a id="change">print(</a><a id="change">traceback.format_exc())</a>
            sys.exit()

        assertFnOutputs(n,c,c_grad,type_str+"equality constraints") 
        c_grad_norms        = torch.sqrt(torch.sum(torch.square(c_grad),0)) </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/b9caac11a8c87513e5d1109c0fb2574c816cb298#diff-a09be081461e988c9f1ae817bb3ed48cc5b60bae638d70f81ae880b4bc7224c4L156' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83590218</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: b9caac11a8c87513e5d1109c0fb2574c816cb298</div><div id='time'> Time: 2021-11-12</div><div id='author'> Author: liang664@umn.edu</div><div id='file'> File Name: private/makePenaltyFunction.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: setupConstraint(6)</div><div id='n_method'> N Method Name: setupConstraint(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private/makePenaltyFunction.py</div><div id='n_file'> N File Name: private/makePenaltyFunction.py</div><div id='m_start'> M Start Line: 156</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 616</div><div id='n_end'> N End Line: 617</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                try:
                    [p,mu_new,*_] = steering_fn(self.penaltyfn_at_x,apply_H_steer)
                except Exception as e:
                    <a id="change">print(</a>e<a id="change">)</a>
                    print("PyGRANSO:steeringQuadprogFailure")
                
                penalty_parameter_changed = (mu_new != self.mu)
                if penalty_parameter_changed: </code></pre><h3>After Change</h3><pre><code class='java'>
                    [p,mu_new,*_] = steering_fn(self.penaltyfn_at_x,apply_H_steer)
                except Exception as e:
                    print("PyGRANSO:steeringQuadprogFailure")
                    <a id="change">print(</a><a id="change">traceback.format_exc())</a>
                    sys.exit()
                
                penalty_parameter_changed = (mu_new != self.mu)
                if penalty_parameter_changed: </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/b9caac11a8c87513e5d1109c0fb2574c816cb298#diff-a5476b7bf07dbdb8502b2c0e511374e93670aba88e736c49b3fb61fa825365d6L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83590217</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: b9caac11a8c87513e5d1109c0fb2574c816cb298</div><div id='time'> Time: 2021-11-12</div><div id='author'> Author: liang664@umn.edu</div><div id='file'> File Name: private/bfgssqp.py</div><div id='m_class'> M Class Name: AlgBFGSSQP</div><div id='n_method'> N Class Name: AlgBFGSSQP</div><div id='m_method'> M Method Name: bfgssqp(7)</div><div id='n_method'> N Method Name: bfgssqp(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private/bfgssqp.py</div><div id='n_file'> N File Name: private/bfgssqp.py</div><div id='m_start'> M Start Line: 224</div><div id='m_end'> M End Line: 224</div><div id='n_start'> N Start Line: 226</div><div id='n_end'> N End Line: 227</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.eval_ineq_fn(x_in) 
            self.eval_eq_fn(x_in)
        except Exception as e:
            <a id="change">print(</a>e<a id="change">)</a>   
            print("PyGRANSO userSuppliedFunctionsError: failed to evaluate objective/constraint functions at x.")

        self.x                   = x_in</code></pre><h3>After Change</h3><pre><code class='java'>
            self.eval_eq_fn(x_in)
        except Exception as e:
            print("PyGRANSO userSuppliedFunctionsError: failed to evaluate objective/constraint functions at x.")
            <a id="change">print(</a><a id="change">traceback.format_exc())</a>
            sys.exit()

        self.x                   = x_in
        self.feasible_to_tol     = self.is_feasible_to_tol_fn(self.tvi,self.tve);  </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/b9caac11a8c87513e5d1109c0fb2574c816cb298#diff-a09be081461e988c9f1ae817bb3ed48cc5b60bae638d70f81ae880b4bc7224c4L238' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83590216</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: b9caac11a8c87513e5d1109c0fb2574c816cb298</div><div id='time'> Time: 2021-11-12</div><div id='author'> Author: liang664@umn.edu</div><div id='file'> File Name: private/makePenaltyFunction.py</div><div id='m_class'> M Class Name: PanaltyFuctions</div><div id='n_method'> N Class Name: PanaltyFuctions</div><div id='m_method'> M Method Name: evaluateAtX(2)</div><div id='n_method'> N Method Name: evaluateAtX(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private/makePenaltyFunction.py</div><div id='n_file'> N File Name: private/makePenaltyFunction.py</div><div id='m_start'> M Start Line: 249</div><div id='m_end'> M End Line: 249</div><div id='n_start'> N Start Line: 188</div><div id='n_end'> N End Line: 189</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            traj = traj.to(DEVICE).float()

            if last_traj is not None:
                <a id="change">print(</a>"traj == last_traj ?", torch.equal(traj, last_traj)<a id="change">)</a> if debug else None

            &#47&#47 with torch.autograd.detect_anomaly():
            loss, loss_list = Loss.get_sl_loss(traj, agent.model)</code></pre><h3>After Change</h3><pre><code class='java'>

            &#47&#47last_traj = traj.clone().detach()
            except Exception as e:               
                <a id="change">print(</a><a id="change">traceback.format_exc())</a>

            i += 1
            batch_iter += 1
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liuruoze/mini-alphastar/commit/3e81c640c0514d4ccd0ac6e2fc5d8c5de353c12d#diff-e8f35b1dcfe4d081837f205e85c20de3fbf66b7e0a942b4b2ffdb2f7fb8cac22L93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83590215</div><div id='project'> Project Name: liuruoze/mini-alphastar</div><div id='commit'> Commit Name: 3e81c640c0514d4ccd0ac6e2fc5d8c5de353c12d</div><div id='time'> Time: 2021-11-06</div><div id='author'> Author: liuruoze@163.com</div><div id='file'> File Name: alphastarmini/core/sl/sl_train_by_pickle.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_for_val(3)</div><div id='n_method'> N Method Name: train_for_val(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: alphastarmini/core/sl/sl_train_by_pickle.py</div><div id='n_file'> N File Name: alphastarmini/core/sl/sl_train_by_pickle.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 175</div><div id='n_start'> N Start Line: 142</div><div id='n_end'> N End Line: 180</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.eval_ineq_fn(x_in) 
            self.eval_eq_fn(x_in)
        except Exception as e:
            <a id="change">print(</a>e<a id="change">)</a>   
            print("PyGRANSO userSuppliedFunctionsError: failed to evaluate objective/constraint functions at x for line search.")

        self.x                   = x_in</code></pre><h3>After Change</h3><pre><code class='java'>
            self.eval_eq_fn(x_in)
        except Exception as e:
            print("PyGRANSO userSuppliedFunctionsError: failed to evaluate objective/constraint functions at x for line search.")
            <a id="change">print(</a><a id="change">traceback.format_exc())</a>
            sys.exit()

        self.x                   = x_in
        self.feasible_to_tol     = self.is_feasible_to_tol_fn(self.tvi,self.tve);  </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/b9caac11a8c87513e5d1109c0fb2574c816cb298#diff-a09be081461e988c9f1ae817bb3ed48cc5b60bae638d70f81ae880b4bc7224c4L207' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83590214</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: b9caac11a8c87513e5d1109c0fb2574c816cb298</div><div id='time'> Time: 2021-11-12</div><div id='author'> Author: liang664@umn.edu</div><div id='file'> File Name: private/makePenaltyFunction.py</div><div id='m_class'> M Class Name: PanaltyFuctions</div><div id='n_method'> N Class Name: PanaltyFuctions</div><div id='m_method'> M Method Name: evaluateAtX4linesearch(2)</div><div id='n_method'> N Method Name: evaluateAtX4linesearch(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private/makePenaltyFunction.py</div><div id='n_file'> N File Name: private/makePenaltyFunction.py</div><div id='m_start'> M Start Line: 218</div><div id='m_end'> M End Line: 218</div><div id='n_start'> N Start Line: 156</div><div id='n_end'> N End Line: 157</div><BR>