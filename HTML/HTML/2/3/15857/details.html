<html><h3>Pattern ID :15857
</h3><img src='53616115.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    self.tpb = tpb
    self.sm_size = sm_size

    <a id="change">self._use_torch_in_cupy_malloc()</a>
    self.stream = Stream(torch.cuda.current_stream().cuda_stream)
    with open(get_absolute_path("kernels", "GetIOAKernel.cu"), "r") as f:
      self.kernel = f.read()
    kernel = (self.kernel</code></pre><h3>After Change</h3><pre><code class='java'>
      tpb=256,
      sm_size=48*256*4,
    ):
    <a id="change">super(GetIOACUDA, self).__init__()</a>
    self.tpb = tpb
    self.sm_size = sm_size

    with open(get_absolute_path("kernels", "GetIOAKernel.cu"), "r") as f:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/demoriarty/torchpq/commit/276a1ccd830071a0e3f0b9e45753e48e4836c471#diff-318d59b3a899586adb2e7486b3c6abc3ebb1e635d14a643ddf4354cf649ee6b5L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53616115</div><div id='project'> Project Name: demoriarty/torchpq</div><div id='commit'> Commit Name: 276a1ccd830071a0e3f0b9e45753e48e4836c471</div><div id='time'> Time: 2021-02-10</div><div id='author'> Author: sn591771872@vip.qq.com</div><div id='file'> File Name: torchpq/kernels/GetIOACUDA.py</div><div id='m_class'> M Class Name: GetIOACUDA</div><div id='n_method'> N Class Name: GetIOACUDA</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: CustomKernel</div><div id='n_parent_class'> N Parent Class: CustomKernel</div><div id='m_file'> M File Name: torchpq/kernels/GetIOACUDA.py</div><div id='n_file'> N File Name: torchpq/kernels/GetIOACUDA.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 14</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    self.tpb = tpb
    self.sm_size = sm_size

    <a id="change">self._use_torch_in_cupy_malloc()</a>
    self.stream = Stream(torch.cuda.current_stream().cuda_stream)
    with open(get_absolute_path("kernels", "GetWriteAddressKernel.cu"), "r") as f:
      self.kernel = f.read()
      </code></pre><h3>After Change</h3><pre><code class='java'>
      tpb=256,
      sm_size=48*256*4,
    ):
    <a id="change">super(GetWriteAddressCUDA, self).__init__()</a>
    self.tpb = tpb
    self.sm_size = sm_size

    with open(get_absolute_path("kernels", "GetWriteAddressKernel.cu"), "r") as f:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/demoriarty/torchpq/commit/276a1ccd830071a0e3f0b9e45753e48e4836c471#diff-d0c6efa84c6f4c52fd8bac3c3b0c2f7188acbfcfdffca0ef6e0ab3cb5fa0af7fL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53616118</div><div id='project'> Project Name: demoriarty/torchpq</div><div id='commit'> Commit Name: 276a1ccd830071a0e3f0b9e45753e48e4836c471</div><div id='time'> Time: 2021-02-10</div><div id='author'> Author: sn591771872@vip.qq.com</div><div id='file'> File Name: torchpq/kernels/GetWriteAddressCUDA.py</div><div id='m_class'> M Class Name: GetWriteAddressCUDA</div><div id='n_method'> N Class Name: GetWriteAddressCUDA</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: CustomKernel</div><div id='n_parent_class'> N Parent Class: CustomKernel</div><div id='m_file'> M File Name: torchpq/kernels/GetWriteAddressCUDA.py</div><div id='n_file'> N File Name: torchpq/kernels/GetWriteAddressCUDA.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 14</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    self.tpb = tpb
    self.sm_size = sm_size

    <a id="change">self._use_torch_in_cupy_malloc()</a>
    self.stream = Stream(torch.cuda.current_stream().cuda_stream)
    with open(get_absolute_path("kernels", "GetDivOfAddressKernel.cu"), "r") as f:
      self.kernel = f.read()
    kernel = (self.kernel</code></pre><h3>After Change</h3><pre><code class='java'>
      tpb=256,
      sm_size=48*256*4,
    ):
    <a id="change">super(GetDivOfAddressCUDA, self).__init__()</a>
    self.ta = ta &#47&#47 how many clusters each thread is responsible of
    self.tpb = tpb
    self.sm_size = sm_size
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/demoriarty/torchpq/commit/276a1ccd830071a0e3f0b9e45753e48e4836c471#diff-994155b1668c4190875463cfe6bfba1a975c6c094588223ab27685a8df6fb146L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53616116</div><div id='project'> Project Name: demoriarty/torchpq</div><div id='commit'> Commit Name: 276a1ccd830071a0e3f0b9e45753e48e4836c471</div><div id='time'> Time: 2021-02-10</div><div id='author'> Author: sn591771872@vip.qq.com</div><div id='file'> File Name: torchpq/kernels/GetDivOfAddressCUDA.py</div><div id='m_class'> M Class Name: GetDivOfAddressCUDA</div><div id='n_method'> N Class Name: GetDivOfAddressCUDA</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: CustomKernel</div><div id='n_parent_class'> N Parent Class: CustomKernel</div><div id='m_file'> M File Name: torchpq/kernels/GetDivOfAddressCUDA.py</div><div id='n_file'> N File Name: torchpq/kernels/GetDivOfAddressCUDA.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 15</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    self.tpb = tpb
    self.sm_size = sm_size

    <a id="change">self._use_torch_in_cupy_malloc()</a>
    self.stream = Stream(torch.cuda.current_stream().cuda_stream)

    with open(get_absolute_path("kernels", "GetAddressOfIDKernel.cu"), "r") as f:
      self.kernel = f.read()</code></pre><h3>After Change</h3><pre><code class='java'>
      tpb=256,
      sm_size=48*256*4,
    ):
    <a id="change">super(GetAddressOfIDCUDA, self).__init__()</a>
    self.tpb = tpb
    self.sm_size = sm_size

    with open(get_absolute_path("kernels", "GetAddressOfIDKernel.cu"), "r") as f:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/demoriarty/torchpq/commit/276a1ccd830071a0e3f0b9e45753e48e4836c471#diff-6e0d88502f99f8e3d633af3c720ee2b4c9c45755b60f7414b2956e7bf10d832fL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53616117</div><div id='project'> Project Name: demoriarty/torchpq</div><div id='commit'> Commit Name: 276a1ccd830071a0e3f0b9e45753e48e4836c471</div><div id='time'> Time: 2021-02-10</div><div id='author'> Author: sn591771872@vip.qq.com</div><div id='file'> File Name: torchpq/kernels/GetAddressOfIDCUDA.py</div><div id='m_class'> M Class Name: GetAddressOfIDCUDA</div><div id='n_method'> N Class Name: GetAddressOfIDCUDA</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: CustomKernel</div><div id='n_parent_class'> N Parent Class: CustomKernel</div><div id='m_file'> M File Name: torchpq/kernels/GetAddressOfIDCUDA.py</div><div id='n_file'> N File Name: torchpq/kernels/GetAddressOfIDCUDA.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 14</div><BR>