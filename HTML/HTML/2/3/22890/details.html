<html><h3>Pattern ID :22890
</h3><img src='72782036.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def new_doc_hash(doc: &quotDocument&quot) -&gt; int:
    d = doc
    if doc_field_mask:
        d<a id="change"> = </a><a id="change">Document()</a>
        doc_field_mask.MergeMessage(doc, d)
    return hash(d.SerializeToString())

</code></pre><h3>After Change</h3><pre><code class='java'>


def new_doc_hash(doc: &quotDocument&quot) -&gt; int:
    <a id="change">return </a>id2hash(new_doc_id(doc))


def new_doc_id(doc: &quotDocument&quot) -&gt; str:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/8bdd7774dd43cd42175381e44ba0de327f8c413f#diff-57c926b5a5ed493e3f975af3f847d25fbb84a7ff053710e72a418c6461bf3168L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72782036</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 8bdd7774dd43cd42175381e44ba0de327f8c413f</div><div id='time'> Time: 2020-10-01</div><div id='author'> Author: han.xiao@jina.ai</div><div id='file'> File Name: jina/proto/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: new_doc_hash(1)</div><div id='n_method'> N Method Name: new_doc_hash(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: jina/proto/__init__.py</div><div id='n_file'> N File Name: jina/proto/__init__.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def run_test(flow, endpoint, port_expose):
    with flow:
        resp<a id="change"> = </a>flow.post(
            endpoint,
            [<a id="change">Document()</a> for _ in range(10)],
            return_results=True,
            port_expose=port_expose,
        )</code></pre><h3>After Change</h3><pre><code class='java'>
        ):
            responses.append(resp)

    <a id="change">return </a>responses


@pytest.fixture()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/6e9e7ef32f61cab04c6efc7a9f21659d26b50fdb#diff-e3067955c9efade1423c6e293462d207495c677d07e360b0040731f7f39b7c2dL10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72782035</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 6e9e7ef32f61cab04c6efc7a9f21659d26b50fdb</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: tests/k8s/test_k8s.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_test(4)</div><div id='n_method'> N Method Name: run_test(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/k8s/test_k8s.py</div><div id='n_file'> N File Name: tests/k8s/test_k8s.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 110</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        by_doc_id = sort_then_group(tasks, key_func=lambda x: x["data"]["id"].split("_")[0])
        docs = []
        for doc_id, tasks_iter in by_doc_id:
            doc<a id="change"> = </a><a id="change">Document(idx=doc_id)</a>
            by_section = sort_then_group(
                tasks_iter, key_func=lambda x: tuple(x["data"]["id"].split("_")[1:])
            )
            for (section_name, section_part_id), section_tasks_iter in by_section:</code></pre><h3>After Change</h3><pre><code class='java'>

    def get_docs(self):
        tasks = self.get_all_tasks()
        <a id="change">return </a>self.ls_json_to_doc(tasks)

    @staticmethod
    def _resolve_contigs(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/a0400edd69546deb6f0e2899a30b4e854a9a8d0d#diff-01fce6e72ff30d060715fa8c8a05f6e95a0222669fb503988ae3ddc87e380481L167' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72782033</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: a0400edd69546deb6f0e2899a30b4e854a9a8d0d</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_class'> M Class Name: LabelStudioJsonToKazuDocumentEncoder</div><div id='n_method'> N Class Name: LabelStudioJsonToKazuDocumentEncoder</div><div id='m_method'> M Method Name: get_docs(1)</div><div id='n_method'> N Method Name: get_docs(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/modelling/annotation/label_studio.py</div><div id='n_file'> N File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_start'> M Start Line: 168</div><div id='m_end'> M End Line: 201</div><div id='n_start'> N Start Line: 222</div><div id='n_end'> N End Line: 223</div><BR>