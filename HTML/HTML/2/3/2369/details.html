<html><h3>Pattern ID :2369
</h3><img src='9988585.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        self.scaler = joblib.load(&quotdevolearn/scaler/scaler.gz&quot)

        <a id="change">if </a>self.mode == "cpu":
            self.model.load_state_dict(torch.load("devolearn/models/estimate_lineage_population.pt", map_location= "cpu"))  
        else:
            self.model.load_state_dict(torch.load("devolearn/models/estimate_lineage_population.pt"))  </code></pre><h3>After Change</h3><pre><code class='java'>
            print("model not found, downloading from:", self.model_url)
            if os.path.isdir(self.model_dir) == False:
                os.mkdir(self.model_dir)
            filename<a id="change"> = </a><a id="change">wget.download(</a>self.model_url<a id="change">, out= self.model_dir)</a>
            print(filename)
            self.model.load_state_dict(torch.load(self.model_dir + "/" + self.model_name, map_location= "cpu"))

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/devolearn/devolearn/commit/b5140902f72a37ece1dd38181b67564ed7f2a08a#diff-29840342e6fa619f78f02f8ec7d91e7a6f96166bc5246608a52d3fc5b51d66a0L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9988585</div><div id='project'> Project Name: devolearn/devolearn</div><div id='commit'> Commit Name: b5140902f72a37ece1dd38181b67564ed7f2a08a</div><div id='time'> Time: 2020-08-05</div><div id='author'> Author: mayukhmainak2000@gmail.com</div><div id='file'> File Name: devolearn/lineage_population_model/lineage_population_model.py</div><div id='m_class'> M Class Name: lineage_population_model</div><div id='n_method'> N Class Name: lineage_population_model</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: devolearn/lineage_population_model/lineage_population_model.py</div><div id='n_file'> N File Name: devolearn/lineage_population_model/lineage_population_model.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 path.download()
            &#47&#47 print(path)
            
            <a id="change">if </a>self.initialized:  &#47&#47 use run directory
                wb.restore(self.checkpoint_filename(), run_path=self.cloud_path())
                to_path = self.local_path() 
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
            print(&quotRequesting checkpoint artifacts {}&quot.format(artifact_path))

            artifact = wb.run.use_artifact(artifact_path)
            filepath<a id="change"> = </a><a id="change">artifact.download(</a>str(to_path)<a id="change">)</a>
    
            &#47&#47 https://discuss.pytorch.org/t/how-to-save-and-load-lr-scheduler-stats-in-pytorch/20208
            checkpoint = torch.load(str(Path(filepath) / self.checkpoint_filename()))
            return checkpoint</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maria-korosteleva/garment-pattern-estimation/commit/a68af3a4c1cce6488b703255f04cababe20de9ea#diff-323752fedbe17106a6a6c895884140fe210ddc3dce5ffddbd1e4138c9b302ce5L134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9988586</div><div id='project'> Project Name: maria-korosteleva/garment-pattern-estimation</div><div id='commit'> Commit Name: a68af3a4c1cce6488b703255f04cababe20de9ea</div><div id='time'> Time: 2020-07-08</div><div id='author'> Author: mariako@kaist.ac.kr</div><div id='file'> File Name: nn/experiment.py</div><div id='m_class'> M Class Name: WandbRunWrappper</div><div id='n_method'> N Class Name: WandbRunWrappper</div><div id='m_method'> M Method Name: load_checkpoint_file(3)</div><div id='n_method'> N Method Name: load_checkpoint_file(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: nn/experiment.py</div><div id='n_file'> N File Name: nn/experiment.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 161</div><div id='n_start'> N Start Line: 141</div><div id='n_end'> N End Line: 157</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return None

        output = &quotMarket-1501-v15.09.15.zip&quot
        <a id="change">if </a>not Path(output).exists():
            logger.info(&quotTry to download.&quot)
            url = &quothttps://drive.google.com/uc?id=0B8-rUzbwVRk0c054eEozWG9COHM&quot
            gdown.download(url, output, quiet=False)</code></pre><h3>After Change</h3><pre><code class='java'>

        logger.info(&quotTry to download.&quot)
        url = (&quothttp://188.138.127.15:81/Datasets/Market-1501-v15.09.15.zip&quot)
        filename<a id="change"> = </a><a id="change">wget.download(</a>url<a id="change">)</a>
        logger.info(&quotMarket-1501-v15.09.15.zip is downloaded.&quot)

        with zipfile.ZipFile(filename, &quotr&quot) as zip_ref:
            zip_ref.extractall(Path.cwd())</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/intel/openfl/commit/a77bde8155a2f9aaee4ae2c025adf373a4688dfb#diff-72f399395d6344faf7ab9390cad0730530f29e00f69d3572012fe2b6cec771cfL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9988588</div><div id='project'> Project Name: intel/openfl</div><div id='commit'> Commit Name: a77bde8155a2f9aaee4ae2c025adf373a4688dfb</div><div id='time'> Time: 2021-10-18</div><div id='author'> Author: 87072230+katerina-merkulova@users.noreply.github.com</div><div id='file'> File Name: openfl-tutorials/interactive_api/PyTorch_Market_Re-ID/envoy/market_shard_descriptor.py</div><div id='m_class'> M Class Name: MarketShardDescriptor</div><div id='n_method'> N Class Name: MarketShardDescriptor</div><div id='m_method'> M Method Name: download(0)</div><div id='n_method'> N Method Name: download(0)</div><div id='m_parent_class'> M Parent Class: ShardDescriptor</div><div id='n_parent_class'> N Parent Class: ShardDescriptor</div><div id='m_file'> M File Name: openfl-tutorials/interactive_api/PyTorch_Market_Re-ID/envoy/market_shard_descriptor.py</div><div id='n_file'> N File Name: openfl-tutorials/interactive_api/PyTorch_Market_Re-ID/envoy/market_shard_descriptor.py</div><div id='m_start'> M Start Line: 121</div><div id='m_end'> M End Line: 131</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 129</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        
        self.mode = mode
        <a id="change">if </a>self.mode=="cpu":
            self.ngpu = 0
            self.generator= Generator(self.ngpu, self.ngf, self.nz, self.nc)
            self.generator.load_state_dict(torch.load("devolearn/models/embryo_generator.pt", map_location= "cpu"))</code></pre><h3>After Change</h3><pre><code class='java'>
            print("model not found, downloading from: ", self.model_url)
            if os.path.isdir(self.model_dir) == False:
                os.mkdir(self.model_dir)
            filename<a id="change"> = </a><a id="change">wget.download(</a>self.model_url<a id="change">, out= self.model_dir)</a>
            print(filename)
            self.generator.load_state_dict(torch.load(self.model_dir + "/" + self.model_name, map_location= "cpu"))

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/devolearn/devolearn/commit/b5140902f72a37ece1dd38181b67564ed7f2a08a#diff-a49d16f53b39e73b9d0000edaa6e46facd215457ace881633539339202ec3f5bL65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9988593</div><div id='project'> Project Name: devolearn/devolearn</div><div id='commit'> Commit Name: b5140902f72a37ece1dd38181b67564ed7f2a08a</div><div id='time'> Time: 2020-08-05</div><div id='author'> Author: mayukhmainak2000@gmail.com</div><div id='file'> File Name: devolearn/embryo_generator_model/embryo_generator_model.py</div><div id='m_class'> M Class Name: embryo_generator_model</div><div id='n_method'> N Class Name: embryo_generator_model</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: devolearn/embryo_generator_model/embryo_generator_model.py</div><div id='n_file'> N File Name: devolearn/embryo_generator_model/embryo_generator_model.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 93</div><div id='n_start'> N Start Line: 79</div><div id='n_end'> N End Line: 101</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _split_generators(self, dl_manager):
        Returns SplitGenerators.
        path_to_manual_file = os.path.abspath(os.path.expanduser(dl_manager.manual_dir))
        <a id="change">if </a>not os.path.exists(path_to_manual_file):
            raise FileNotFoundError(
                "{} does not exist. Make sure you insert a manual dir via `datasets.load_dataset(&quotttc4900&quot, data_dir=...)` that includes a file name {}. Manual download instructions: {})".format(
                    path_to_manual_file, _FILENAME, self.manual_download_instructions</code></pre><h3>After Change</h3><pre><code class='java'>
        urls_to_download = {
            "train": _DOWNLOAD_URL + "/" + _FILENAME,
        }
        downloaded_files<a id="change"> = </a><a id="change">dl_manager.download(</a>urls_to_download<a id="change">)</a>
        return [
            datasets.SplitGenerator(name=datasets.Split.TRAIN, gen_kwargs={"filepath": downloaded_files["train"]}),
        ]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/440b14d0dd428ae1b25881aa72ba7bbb8ad9ff84#diff-246992a9a5d6057bb0b14efd88ed5fbdd2249a282f44fd0f560e9e180cef3f03L95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 9988594</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 440b14d0dd428ae1b25881aa72ba7bbb8ad9ff84</div><div id='time'> Time: 2021-07-30</div><div id='author'> Author: komecoglu.yavuz@gmail.com</div><div id='file'> File Name: datasets/ttc4900/ttc4900.py</div><div id='m_class'> M Class Name: TTC4900</div><div id='n_method'> N Class Name: TTC4900</div><div id='m_method'> M Method Name: _split_generators(2)</div><div id='n_method'> N Method Name: _split_generators(2)</div><div id='m_parent_class'> M Parent Class: datasets.GeneratorBasedBuilder</div><div id='n_parent_class'> N Parent Class: datasets.GeneratorBasedBuilder</div><div id='m_file'> M File Name: datasets/ttc4900/ttc4900.py</div><div id='n_file'> N File Name: datasets/ttc4900/ttc4900.py</div><div id='m_start'> M Start Line: 97</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 113</div><BR>