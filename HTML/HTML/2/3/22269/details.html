<html><h3>Pattern ID :22269
</h3><img src='70234742.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    top_k: int,
    num_queries: int,
):
    workspace<a id="change"> = </a><a id="change">Path(</a>__file__<a id="change">)</a>.parent / &quotworkspace&quot
    segmenter_uses_with = {&quotchunk_duration&quot: 2.5} if segmenter == &quottime&quot else {}
    segmenter = {&quottime&quot: TimeSegmenter, &quotvad&quot: &quotjinahub://VADSpeechSegmenter&quot}[
        segmenter</code></pre><h3>After Change</h3><pre><code class='java'>
    data_dir = Path(os.environ["JINA_DATA_FILE"])
    workspace = Path(os.environ["JINA_WORKSPACE"])
    logger.info(f&quotdata directory path: {data_dir}&quot)
    <a id="change">logger.info(</a>f&quotworkspace path: {workspace}&quot<a id="change">)</a>

    segmenter_uses_with = {&quotchunk_duration&quot: 2.5} if segmenter == &quottime&quot else {}
    segmenter = {&quottime&quot: TimeSegmenter, &quotvad&quot: &quotjinahub://VADSpeechSegmenter&quot}[
        segmenter</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/ec0d085fd1a8674932c6db99feff6c4c0d6304e8#diff-1e6634c17716c30434bf7028cf878245614f6876a3ee85407dfbfeb9735fb63dL98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70234742</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: ec0d085fd1a8674932c6db99feff6c4c0d6304e8</div><div id='time'> Time: 2021-08-25</div><div id='author'> Author: winstonwongww2@gmail.com</div><div id='file'> File Name: audio-to-audio-search/app.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: cli(6)</div><div id='n_method'> N Method Name: cli(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: audio-to-audio-search/app.py</div><div id='n_file'> N File Name: audio-to-audio-search/app.py</div><div id='m_start'> M Start Line: 98</div><div id='m_end'> M End Line: 98</div><div id='n_start'> N Start Line: 105</div><div id='n_end'> N End Line: 152</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    random_letters = &quot&quot.join(random.sample(string.ascii_letters, 4))
    experiment_name = f&quotdeepnog_custom_model_{args.database}_{args.tax}_{random_letters}&quot
    &#47&#47 Save model to output dir
    model_file<a id="change"> = </a><a id="change">Path(</a>args.out<a id="change">)</a>/f&quot{experiment_name}_model.pt&quot
    logging.info(f&quotSaving model to {model_file}...&quot)
    torch.save({&quotclasses&quot: results.training_dataset.label_encoder.classes_,
                &quotmodel_state_dict&quot: results.model.state_dict()},</code></pre><h3>After Change</h3><pre><code class='java'>
        raise ValueError(f&quotNumber of epochs must be greater than or equal &quot
                         f&quotone. Got n_epochs = {args.n_epochs} instead.&quot)
    out_dir = Path(args.out)
    <a id="change">logging.info(</a>f&quotOutput directory: {out_dir} (creating, if necessary)&quot<a id="change">)</a>
    out_dir.mkdir(parents=True, exist_ok=True)
    &#47&#47 Add random letters to files to avoid name collisions
    while True:
        random_letters = &quot&quot.join(random.sample(string.ascii_letters, 4))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/946ccb3d4697400e0125a8ae38033cb8bc17960b#diff-86cf8881102340a02991064455bc3d2ec43e28c1fa00c0f4f963ddab395ff5baL352' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70234738</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: 946ccb3d4697400e0125a8ae38033cb8bc17960b</div><div id='time'> Time: 2020-06-15</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/client/client.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _start_training(1)</div><div id='n_method'> N Method Name: _start_training(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/client/client.py</div><div id='n_file'> N File Name: deepnog/client/client.py</div><div id='m_start'> M Start Line: 374</div><div id='m_end'> M End Line: 399</div><div id='n_start'> N Start Line: 333</div><div id='n_end'> N End Line: 383</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 e.g. 2speakers/wav8k/min/tr/mix/019o031a_0.27588_01vo030q_-0.27588.wav
        &#47&#47 id of speaker 1 is 019 utterance id is o031a
        &#47&#47 id of speaker 2 is 01v utterance id is 01vo030q
        s1_id<a id="change"> = </a><a id="change">Path(</a>s1_wav<a id="change">)</a>.stem.split("_")[0][:3]
        if s1_id not in spk_hashtable.keys():
            spk_hashtable[s1_id] = [s1_wav]
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
    for utt in wsj0_utterances:

        spk_id = Path(utt).stem[:3]
        <a id="change">torchaudio.info(</a>utt<a id="change">)</a>
        assert torchaudio.info(utt).sample_rate == 8000

        &#47&#47 e.g. 2speakers/wav8k/min/tr/mix/019o031a_0.27588_01vo030q_-0.27588.wav
        &#47&#47 id of speaker 1 is 019 utterance id is o031a</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/e716f99a82f8dc90125ddfe0aae214209fa8cc2f#diff-701c0c78c50c407c8c552e20d140dd5a69c30adca30a40a3e152adbdaf78502eL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70234737</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: e716f99a82f8dc90125ddfe0aae214209fa8cc2f</div><div id='time'> Time: 2021-01-18</div><div id='author'> Author: cornellsamuele@gmail.com</div><div id='file'> File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: build_spk_hashtable(1)</div><div id='n_method'> N Method Name: build_spk_hashtable(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='n_file'> N File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 21</div><BR>