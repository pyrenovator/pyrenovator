<html><h3>Pattern ID :11347
</h3><img src='38801648.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            all_is_pos = {}
            all_is_neg = {}
            &#47&#47 Create mask background to multiply for discrepancy
            mask_background = <a id="change">np.copy(</a>d["label"]<a id="change">)</a>
            mask_background[mask_background != 0] = 1.0
            mask_background<a id="change"> = </a>1.0 - mask_background
            for key_label in d["label_names"].keys():
                if key_label != "background":
                    &#47&#47 Add POSITIVE and NEGATIVE (background) guidance based on discrepancy</code></pre><h3>After Change</h3><pre><code class='java'>
            for key_label in d["label_names"].keys():
                tmp_gui = guidance[key_label]
                tmp_gui = tmp_gui.tolist() if isinstance(tmp_gui, np.ndarray) else tmp_gui
                tmp_gui = json.loads(tmp_gui)<a id="change"> if </a>isinstance(tmp_gui, str)<a id="change"> else </a>tmp_gui
                self.tmp_guidance[key_label] = tmp_gui

            &#47&#47 Add guidance according to discrepancy</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/project-monai/monailabel/commit/d406dc00dfce358803e7db6d0322beaecba6dd8a#diff-ed3b5072b42bd705c8ea626ad811a82b2a44dc745e40038ead07bd4d32e4f64bL609' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801648</div><div id='project'> Project Name: project-monai/monailabel</div><div id='commit'> Commit Name: d406dc00dfce358803e7db6d0322beaecba6dd8a</div><div id='time'> Time: 2021-11-08</div><div id='author'> Author: diazandr3s@gmail.com</div><div id='file'> File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_class'> M Class Name: PosNegClickProbAddRandomGuidanceCustomd</div><div id='n_method'> N Class Name: PosNegClickProbAddRandomGuidanceCustomd</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: MapTransform,Randomizable</div><div id='n_parent_class'> N Parent Class: MapTransform,Randomizable</div><div id='m_file'> M File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='n_file'> N File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_start'> M Start Line: 630</div><div id='m_end'> M End Line: 657</div><div id='n_start'> N Start Line: 609</div><div id='n_end'> N End Line: 641</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            value.index.name = "labels"
            value.reset_index(drop=False, inplace=True)

    vals = <a id="change">gdf[name].copy(deep=False)</a>
    if value is None:
        value = cudf.DataFrame({name: [None]})
        value[name]<a id="change"> = </a>value[name].astype(vals.dtype)
        value.index.name = "labels"
        value.reset_index(drop=False, inplace=True)
</code></pre><h3>After Change</h3><pre><code class='java'>
    if value is None:
        value = cudf.DataFrame()
        for c in selection_r:
            typ = gdf[selection_l[0]].dtype<a id="change"> if </a>len(selection_l) == 1<a id="change"> else </a>gdf[c].dtype
            value[c] = cudf.Series([None], dtype=typ)
        value.index.name = "labels"
        value.reset_index(drop=False, inplace=True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nvidia/nvtabular/commit/6750183d3eb56bc6ec3e7e4ea579102c27f2e7b8#diff-38ad65fee4bef798cbe103ce6763c1b029400d6c823182e24e316ca1b55a5c8cL299' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801649</div><div id='project'> Project Name: nvidia/nvtabular</div><div id='commit'> Commit Name: 6750183d3eb56bc6ec3e7e4ea579102c27f2e7b8</div><div id='time'> Time: 2020-08-17</div><div id='author'> Author: rzamora217@gmail.com</div><div id='file'> File Name: nvtabular/categorify.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _encode(7)</div><div id='n_method'> N Method Name: _encode(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nvtabular/categorify.py</div><div id='n_file'> N File Name: nvtabular/categorify.py</div><div id='m_start'> M Start Line: 300</div><div id='m_end'> M End Line: 329</div><div id='n_start'> N Start Line: 380</div><div id='n_end'> N End Line: 419</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.mconv = nn.Sequential(*conv)

        res_panes<a id="change"> = </a><a id="change">residual_panes.copy()</a>
        self.dense_residual = residual

        if residual:
            res_list = nn.ModuleList()</code></pre><h3>After Change</h3><pre><code class='java'>

        for _ in range(repeat - 1):
            &#47&#47 Stride last means only the last convolution in block will have stride
            stride_val = [1]<a id="change"> if </a>stride_last<a id="change"> else </a>stride

            conv.extend(
                self._get_conv_bn_layer(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/29ebb3e96f3f222a4f6744c1bc391725325396f5#diff-466f09dc94a8d0261c5affeb35283ea929f8f99c0560176aff78070c963baf18L311' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801637</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: 29ebb3e96f3f222a4f6744c1bc391725325396f5</div><div id='time'> Time: 2021-02-05</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: src/thunder/jasper/blocks.py</div><div id='m_class'> M Class Name: JasperBlock</div><div id='n_method'> N Class Name: JasperBlock</div><div id='m_method'> M Method Name: __init__(22)</div><div id='n_method'> N Method Name: __init__(23)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/thunder/jasper/blocks.py</div><div id='n_file'> N File Name: src/thunder/jasper/blocks.py</div><div id='m_start'> M Start Line: 329</div><div id='m_end'> M End Line: 441</div><div id='n_start'> N Start Line: 355</div><div id='n_end'> N End Line: 425</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if targets.shape[1] &gt; 5:
            mixup = True
            ratios = targets[:, -1].copy()
            ratios_o<a id="change"> = </a><a id="change">targets[:, -1].copy()</a>
        else:
            mixup = False
            ratios = None
            ratios_o = None</code></pre><h3>After Change</h3><pre><code class='java'>
        boxes_o[:, 3] = b_h_o

        &#47&#47 color aug
        image_t = _distort(image)<a id="change"> if </a>self.augment<a id="change"> else </a>image
        &#47&#47 flip
        if self.augment:
            image_t, boxes = _mirror(image_t, boxes)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zhangming8/yolox-pytorch/commit/e162fc0465b1f5d8b3211cdc81fd8eabb6dd55c7#diff-093211981acdf95501cfff9d2f2d063fc4a6ce7f37f321c272e78529c4c4537bL193' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801624</div><div id='project'> Project Name: zhangming8/yolox-pytorch</div><div id='commit'> Commit Name: e162fc0465b1f5d8b3211cdc81fd8eabb6dd55c7</div><div id='time'> Time: 2021-07-26</div><div id='author'> Author: zhangming8@github.com</div><div id='file'> File Name: data/data_augment.py</div><div id='m_class'> M Class Name: TrainTransform</div><div id='n_method'> N Class Name: TrainTransform</div><div id='m_method'> M Method Name: __call__(4)</div><div id='n_method'> N Method Name: __call__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data/data_augment.py</div><div id='n_file'> N File Name: data/data_augment.py</div><div id='m_start'> M Start Line: 196</div><div id='m_end'> M End Line: 257</div><div id='n_start'> N Start Line: 196</div><div id='n_end'> N End Line: 265</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.lr_mult_list.insert(0, 1)

        &#47&#47 calculate T_i accroding to given T_0 list
        T_0_expand<a id="change"> = </a><a id="change">T_0.copy()</a>
        T_0_expand.append(final_epoch)

        self.T_i_list = [T_0_expand[i+1] - T_0_expand[i] - 1 for i in range(len(T_0_expand)-1)]
        self.T_i_list[0] = self.T_i_list[0] - self.warmup_begin &#47&#47 subtract warmup at beginning</code></pre><h3>After Change</h3><pre><code class='java'>

        self.final_epoch = final_epoch
        self.T_0_list = T_0 if T_0 else []
        self.lr_mult_list = lr_mult<a id="change"> if </a>lr_mult<a id="change"> else </a>[]
        self.warmup_begin = warmup_begin
        self.warmup_factor = warmup_factor
        self.eta_min = eta_min</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cnstark/easytorch/commit/4619d4ca01aea7815cbefd9f87692d6232a8abd7#diff-3527c083ad200e2dd50ee40bbdb1dbd1b58446d412eda858f9403ee4e25e0310L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801641</div><div id='project'> Project Name: cnstark/easytorch</div><div id='commit'> Commit Name: 4619d4ca01aea7815cbefd9f87692d6232a8abd7</div><div id='time'> Time: 2021-08-06</div><div id='author'> Author: 33473792+YuhaoZeng@users.noreply.github.com</div><div id='file'> File Name: easytorch/easyoptim/easy_lr_scheduler.py</div><div id='m_class'> M Class Name: MultiCosineAnnealingWarmupLR</div><div id='n_method'> N Class Name: MultiCosineAnnealingWarmupLR</div><div id='m_method'> M Method Name: __init__(10)</div><div id='n_method'> N Method Name: __init__(10)</div><div id='m_parent_class'> M Parent Class: _LRScheduler</div><div id='n_parent_class'> N Parent Class: _LRScheduler</div><div id='m_file'> M File Name: easytorch/easyoptim/easy_lr_scheduler.py</div><div id='n_file'> N File Name: easytorch/easyoptim/easy_lr_scheduler.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 64</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                 **kwargs):
        self.model = build_model(model, **kwargs)

        _data_loaders<a id="change"> = </a><a id="change">data_loaders.copy()</a>
        if &quottrain&quot not in _data_loaders:
            _data_loaders = dict(train=_data_loaders)

        for a, b in ((&quotval&quot, &quottest&quot), (&quottest&quot, &quotval&quot)):</code></pre><h3>After Change</h3><pre><code class='java'>

        for a, b in ((&quotval&quot, &quottest&quot), (&quottest&quot, &quotval&quot)):
            if a not in data_loaders:
                loader = data_loaders[b<a id="change"> if </a>b in data_loaders<a id="change"> else </a>&quottrain&quot]
                if isinstance(loader, dict):
                    data_loaders[a] = loader.copy()
                else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/88384ba2c57ed7a4b589e0761ba7a67ab4073191#diff-f301e71f1b206fb014cc7b05cf40d35bbf2feac02ca56ff77c6fbc81583978acL137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38801628</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: 88384ba2c57ed7a4b589e0761ba7a67ab4073191</div><div id='time'> Time: 2021-11-19</div><div id='author'> Author: yeliudev@outlook.com</div><div id='file'> File Name: nncore/engine/engine.py</div><div id='m_class'> M Class Name: Engine</div><div id='n_method'> N Class Name: Engine</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(9)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: nncore/engine/engine.py</div><div id='n_file'> N File Name: nncore/engine/engine.py</div><div id='m_start'> M Start Line: 149</div><div id='m_end'> M End Line: 160</div><div id='n_start'> N Start Line: 151</div><div id='n_end'> N End Line: 162</div><BR>