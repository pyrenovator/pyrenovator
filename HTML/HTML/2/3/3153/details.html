<html><h3>Pattern ID :3153
</h3><img src='11999734.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            unique_training_values = set(train_column.unique())
            unique_validation_values = set(validation_column.unique())

            new_category_values<a id="change"> = </a><a id="change">unique_validation_values.difference(</a>unique_training_values<a id="change">)</a>

            if new_category_values:
                n_new_cat = len(validation_column[validation_column.isin(new_category_values)])
</code></pre><h3>After Change</h3><pre><code class='java'>
            validation_column = validation_dataset.data[feature]

            &#47&#47 np.nan != np.nan, so we remove these values if they exist in training
            <a id="change">if </a>train_column.isna().any():
                validation_column = validation_column.dropna()

            unique_training_values = train_column.unique()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/6db2c07db44527489a70c2a1b6a7d1d8b4c544fc#diff-2fac2148b707cb89bcf348a6ad5af3f60a5b2d953e3ac373a3fecbb1f4485908L74' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11999734</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 6db2c07db44527489a70c2a1b6a7d1d8b4c544fc</div><div id='time'> Time: 2021-11-14</div><div id='author'> Author: 42312361+benisraeldan@users.noreply.github.com</div><div id='file'> File Name: mlchecks/checks/integrity/new_category.py</div><div id='m_class'> M Class Name: CategoryMismatchTrainValidation</div><div id='n_method'> N Class Name: CategoryMismatchTrainValidation</div><div id='m_method'> M Method Name: _new_category_train_validation(3)</div><div id='n_method'> N Method Name: _new_category_train_validation(3)</div><div id='m_parent_class'> M Parent Class: TrainValidationBaseCheck</div><div id='n_parent_class'> N Parent Class: TrainValidationBaseCheck</div><div id='m_file'> M File Name: mlchecks/checks/integrity/new_category.py</div><div id='n_file'> N File Name: mlchecks/checks/integrity/new_category.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    new_edges.append(
                        torch.tensor([[id1, id2]], dtype=torch.long))

        node_set<a id="change"> = </a><a id="change">node_set.difference(</a>set(sampled_idx)<a id="change">)</a>

    y_outlier = torch.zeros(data.x.shape[0], dtype=torch.long)
    y_outlier[sample_indices] = 1
</code></pre><h3>After Change</h3><pre><code class='java'>
        regular nodes.
    

    <a id="change">if </a>not isinstance(data, torch_geometric.data.Data):
        raise TypeError("data should be torch_geometric.data.Data")

    if isinstance(m, int):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pygod-team/pygod/commit/9dd44a7c9d6536a511637a44caa85e48c1ba8e66#diff-24591345cf5d6927c6593d4560eaacb1aa882677c08019dfce2d84d82ec69f44L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11999731</div><div id='project'> Project Name: pygod-team/pygod</div><div id='commit'> Commit Name: 9dd44a7c9d6536a511637a44caa85e48c1ba8e66</div><div id='time'> Time: 2022-04-14</div><div id='author'> Author: ytongdou@gmail.com</div><div id='file'> File Name: pygod/utils/outlier_generator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: gen_structure_outliers(4)</div><div id='n_method'> N Method Name: gen_structure_outliers(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pygod/utils/outlier_generator.py</div><div id='n_file'> N File Name: pygod/utils/outlier_generator.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        optimizer_kwargs["learning_rate"] = optimizer_kwargs["lr"]
        optimizer_kwargs.pop("lr")

    invalid_optimizer_kwargs<a id="change"> = </a><a id="change">set(optimizer_kwargs.keys()).difference(
        </a>VALID_OPTIMIZER_KEYS<a id="change">
    )</a>

    if invalid_optimizer_kwargs:
        raise ValueError(f"Cannot use {invalid_optimizer_kwargs}")
</code></pre><h3>After Change</h3><pre><code class='java'>
            EmbOptimType.EXACT_SGD,
            optimizer_kwargs,
        )
    elif <a id="change"></a>optimizer_type == torch.optim.Adagrad:
        return (EmbOptimType.EXACT_ADAGRAD, optimizer_kwargs)
    elif optimizer_type == trec_optim.RowWiseAdagrad:
        return (EmbOptimType.EXACT_ROWWISE_ADAGRAD, optimizer_kwargs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/facebookresearch/torchrec/commit/3b4c58d924772fc8c123c7c83b5140a7b1d2b099#diff-cc4a7e8d731e211e1403402d91cf122beaabbc1e556ad3f9208dddae5a8bf6a9L261' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11999730</div><div id='project'> Project Name: facebookresearch/torchrec</div><div id='commit'> Commit Name: 3b4c58d924772fc8c123c7c83b5140a7b1d2b099</div><div id='time'> Time: 2022-06-13</div><div id='author'> Author: yingliufb@fb.com</div><div id='file'> File Name: torchrec/modules/fused_embedding_modules.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: convert_optimizer_type_and_kwargs(2)</div><div id='n_method'> N Method Name: convert_optimizer_type_and_kwargs(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchrec/modules/fused_embedding_modules.py</div><div id='n_file'> N File Name: torchrec/modules/fused_embedding_modules.py</div><div id='m_start'> M Start Line: 264</div><div id='m_end'> M End Line: 281</div><div id='n_start'> N Start Line: 251</div><div id='n_end'> N End Line: 266</div><BR>