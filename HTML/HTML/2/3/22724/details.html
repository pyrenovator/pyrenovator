<html><h3>Pattern ID :22724
</h3><img src='72186841.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    valid_dataloader = DataLoader(valid_dataset, batch_size, False, pin_memory=True)

    &#47&#47 Check whether the training progress of the last abnormal end is restored, for example, the power is cut off in the middle of the training.
    <a id="change">if </a>resume:
        print("Resuming...")
        model.load_state_dict(torch.load(resume_weight, map_location=device))
</code></pre><h3>After Change</h3><pre><code class='java'>
    print("Load train dataset and valid dataset successfully.")

    print("Build SR model...")
    model<a id="change"> = </a><a id="change">build_model()</a>
    print("Build SR model successfully.")

    print("Define all loss functions...")
    criterion = define_loss()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lornatang/srcnn-pytorch/commit/96a17464d7a42c5440db57701b8158cd91baa21f#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72186841</div><div id='project'> Project Name: lornatang/srcnn-pytorch</div><div id='commit'> Commit Name: 96a17464d7a42c5440db57701b8158cd91baa21f</div><div id='time'> Time: 2021-10-27</div><div id='author'> Author: liuchangyu1111@gmail.com</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 99</div><div id='m_end'> M End Line: 127</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 178</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        model_name = &quotbasicvsr_plusplus_ntire_decompress_track3.pth&quot
    model_path = os.path.join(os.path.dirname(__file__), model_name)

    <a id="change">if </a>model &lt; 3:
        config_name = &quotconfig012.py&quot
        scale = 4
    else:</code></pre><h3>After Change</h3><pre><code class='java'>

    scale = 4 if model &lt; 3 else 1

    model<a id="change"> = </a><a id="change">build_model(</a>cfg._cfg_dict<a id="change">)</a>
    mmcv.runner.load_checkpoint(model, model_path, strict=True)
    model.to(device)
    model.eval()
    if fp16:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/holywu/vs-basicvsrpp/commit/8667169fc93ed0476ab23ae9a0cf0188638bffaf#diff-1e7a189dbde23bf3fb3f22d8ccc0d97b81a6e86bc4c0526b4e9aac4210e7927aL16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72186843</div><div id='project'> Project Name: holywu/vs-basicvsrpp</div><div id='commit'> Commit Name: 8667169fc93ed0476ab23ae9a0cf0188638bffaf</div><div id='time'> Time: 2021-10-03</div><div id='author'> Author: holywu@gmail.com</div><div id='file'> File Name: vsbasicvsrpp/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: BasicVSRPP(10)</div><div id='n_method'> N Method Name: BasicVSRPP(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vsbasicvsrpp/__init__.py</div><div id='n_file'> N File Name: vsbasicvsrpp/__init__.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        conv1_t_stride=conv1_t_stride,
                        no_max_pool=no_max_pool,
                        widen_factor=resnet_widen_factor)
    elif <a id="change"></a>arch_name == &quotslowfast&quot:
        cfg = load_config(args)
        model = build_model(cfg)
    </code></pre><h3>After Change</h3><pre><code class='java'>
        slowfast_cfg.DATA.CROP_SIZE = cfg.DATA.SAMPLE_SIZE
        slowfast_cfg.DATA.INPUT_CHANNEL_NUM = [cfg.DATA.INPUT_CHANNEL_NUM, cfg.DATA.INPUT_CHANNEL_NUM]

        model<a id="change"> = </a><a id="change">build_model(</a>slowfast_cfg<a id="change">)</a>
    
    return model
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rvl-lab-utoronto/video_similarity_search/commit/537da91309369c91eb499418b71a03aa86a4fc88#diff-e2ca5a78b46b859d3d73c8ad4fce0aaa0068bb6b9b5eb8fa462f1b5a5f4be335L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72186839</div><div id='project'> Project Name: rvl-lab-utoronto/video_similarity_search</div><div id='commit'> Commit Name: 537da91309369c91eb499418b71a03aa86a4fc88</div><div id='time'> Time: 2020-07-07</div><div id='author'> Author: salar77h@gmail.com</div><div id='file'> File Name: models/model_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: model_selector(1)</div><div id='n_method'> N Method Name: model_selector(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: models/model_utils.py</div><div id='n_file'> N File Name: models/model_utils.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 39</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    val_loader = torch.utils.data.DataLoader(val_dataset, batch_size = args.inference_bs, shuffle = False)

    &#47&#47 check data pipe
    <a id="change">if </a>args.check_data_pipe:
        check_data_pipe([val_loader])

    &#47&#47 model</code></pre><h3>After Change</h3><pre><code class='java'>
    val_loader = torch.utils.data.DataLoader(val_dataset, batch_size = args.inference_bs, shuffle = False)

    &#47&#47 model
    model<a id="change"> = </a><a id="change">build_model(</a>args<a id="change">)</a>
    if args.ft_model:
        model = FTModel(model, args)
    n_params = sum(p.numel() for p in model.parameters() if p.requires_grad)
    print("\nThe model has {} trainable parameters".format(n_params))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ravoxsg/summareranker-acl-22/commit/b27044a16781ec17dd1f95c3a2ff01ee9857bc64#diff-91d18ff68a5ac7a393240cfbcd63b7d4476e5adc2d43a056cd936f13709ff7fbL110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72186848</div><div id='project'> Project Name: ravoxsg/summareranker-acl-22</div><div id='commit'> Commit Name: b27044a16781ec17dd1f95c3a2ff01ee9857bc64</div><div id='time'> Time: 2022-03-28</div><div id='author'> Author: mathieu.ravaut@gmail.com</div><div id='file'> File Name: src/candidate_generation/main_candidate_generation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/candidate_generation/main_candidate_generation.py</div><div id='n_file'> N File Name: src/candidate_generation/main_candidate_generation.py</div><div id='m_start'> M Start Line: 126</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 148</div><BR>