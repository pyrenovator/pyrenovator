<html><h3>Pattern ID :17299
</h3><img src='57496429.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    metrics_dict = evaluate_decisions(points_gdf)

    &#47&#47 print all metrics
    results<a id="change"> = </a>[metrics_dict[metric_enum.value] for metric_enum in MetricsNames]
    results_logs = "  |  ".join(
        f"{metric_enum.value}={value:.3}"
        for metric_enum, value in <a id="change">zip(</a>MetricsNames, results<a id="change">)</a>
    )
    log.info(f"--------&gt; {results_logs}")

    &#47&#47 Optimize subset of metrics specified in config.inspection.metrics</code></pre><h3>After Change</h3><pre><code class='java'>
    results_logs = (
        results_logs
        + "\n"
        + <a id="change">str(</a>metrics_dict[MetricsNames.CONFUSION_MATRIX_NO_NORM.value].round(3)<a id="change">)</a>
        + "\n"
        + str(metrics_dict[MetricsNames.CONFUSION_MATRIX_NORM.value].round(3))
    )
    log.info(f"--------&gt; {results_logs}")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ignf/lidar-deep-segmentation/commit/2202f8f66812e5ce95b6a50a78f17954e9aa8092#diff-3f96fd2c359eac07483b768e2f0cc2520c9da7e180abe1447cd7fca0a9e561caL55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57496429</div><div id='project'> Project Name: ignf/lidar-deep-segmentation</div><div id='commit'> Commit Name: 2202f8f66812e5ce95b6a50a78f17954e9aa8092</div><div id='time'> Time: 2021-11-23</div><div id='author'> Author: charles.gaydon@gmail.com</div><div id='file'> File Name: semantic_val/tune.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: tune(1)</div><div id='n_method'> N Method Name: tune(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: semantic_val/tune.py</div><div id='n_file'> N File Name: semantic_val/tune.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            attr = "NORM"
        matcher = PhraseMatcher(self.nlp.vocab, attr=attr)
        for name, df in dfs.items():
            df<a id="change"> = </a>df[df.apply((lambda x: self.entry_filter(x, lowercase=lowercase)), axis=1)]
            terms = list([syn for syn in df[SYN]])
            iris = list(df[IDX])
            assert len(list(terms)) == len(list(iris))
            for iri, term in <a id="change">zip(</a>iris, terms<a id="change">)</a>:
                if lowercase:
                    term = term.lower()
                variant_terms = list(self.variant_generator(term))</code></pre><h3>After Change</h3><pre><code class='java'>
                                if is_lower:
                                    lower_matcher.add(str(idx), [patterns[i]])
                                else:
                                    orth_matcher.add(<a id="change">str(</a>idx<a id="change">)</a>, [patterns[i]])
                            except KeyError as e:
                                logging.warning(
                                    f"failed to add &quot{syn}&quot. StringStore is {len(self.nlp.vocab.strings)} ",</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/e6b1e7e6235e8562c8164e4a5b1d6b4f946c3fab#diff-ec730aab051edf2ba7b89f163cda2f2499c14d8d87a4b422587f8edcaec3d078L340' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57496415</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: e6b1e7e6235e8562c8164e4a5b1d6b4f946c3fab</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/modelling/ontology_matching/ontology_matcher.py</div><div id='m_class'> M Class Name: OntologyMatcher</div><div id='n_method'> N Class Name: OntologyMatcher</div><div id='m_method'> M Method Name: _create_phrasematcher(2)</div><div id='n_method'> N Method Name: _create_phrasematcher(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/modelling/ontology_matching/ontology_matcher.py</div><div id='n_file'> N File Name: kazu/modelling/ontology_matching/ontology_matcher.py</div><div id='m_start'> M Start Line: 340</div><div id='m_end'> M End Line: 356</div><div id='n_start'> N Start Line: 339</div><div id='n_end'> N End Line: 366</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	df = io.loadmat(os.path.join(path,&quotqm7b.mat&quot))

	targets = ["E_PBE0", "E_max_EINDO", "I_max_ZINDO", "HOMO_ZINDO", "LUMO_ZINDO", "E_1st_ZINDO", "IP_ZINDO", "EA_ZINDO", "HOMO_PBE0", "LUMO_PBE0", "HOMO_GW", "LUMO_GW", "alpha_PBE0", "alpha_SCS"]
	targets_index<a id="change"> = </a>list(range(len(targets)))
	targets2index = dict(<a id="change">zip(</a>targets, targets_index<a id="change">)</a>)	
	y = df[&quotT&quot].T[targets2index[target]]
	
	drugs = df[&quotX&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
	df = pd.DataFrame()
	df[&quotX&quot] = pd.Series([i for i in inx[&quotX&quot]])
	df = pd.concat([df, pd.DataFrame(inx[&quotT&quot], columns = targets)], axis = 1)
	df[&quotID&quot] = [&quotDrug &quot + <a id="change">str(</a>i+1<a id="change">)</a> for i in range(len(df))]
	df.to_pickle(&quot/Users/kexinhuang/Desktop/qm7b.pkl&quot)

def QM8_9():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mims-harvard/tdc/commit/77a6e4386efd75bd5d14443ee59d04cdfb98e3cc#diff-579c6125b5c3fca2c843ab9b6d8fc34263fbfcabbd55e6d404fcbadbcb699b63L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57496423</div><div id='project'> Project Name: mims-harvard/tdc</div><div id='commit'> Commit Name: 77a6e4386efd75bd5d14443ee59d04cdfb98e3cc</div><div id='time'> Time: 2020-11-06</div><div id='author'> Author: kexinhuang@hsph.harvard.edu</div><div id='file'> File Name: data_process/QM_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: QM7_process(3)</div><div id='n_method'> N Method Name: QM7_process(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data_process/QM_utils.py</div><div id='n_file'> N File Name: data_process/QM_utils.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 25</div><BR>