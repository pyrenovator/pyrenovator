<html><h3>Pattern ID :8332
</h3><img src='29214909.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        ipython = IPython.get_ipython()
        dbutils = ipython.user_ns["dbutils"]
        ctx = <a id="change">json.loads(
            </a>dbutils.entry_point.getDbutils().notebook().getContext().toJson()<a id="change">
        )</a>
        ctx_tags = ctx["tags"]
        browser_host_name = ctx_tags["browserHostName"]
        org_id = ctx_tags["orgId"]
        cluster_id = ctx_tags["clusterId"]</code></pre><h3>After Change</h3><pre><code class='java'>
        from google.colab.output import eval_js

        _url = eval_js(f"google.colab.kernel.proxyPort({port})")
    elif <a id="change"></a>_context == _DATABRICKS:
        _url<a id="change"> = </a>_get_databricks_proxy_url(port)
        kwargs["proxy"] = _get_databricks_proxy(port)
        kwargs["context"] = "databricks"
    else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/9ac69f078402b7afb394e10eaecb118b2f668e0d#diff-26383c6f2ffea7e009330e1289c758d40bb5f2fe86329cb056b62ba6eabb5dadL137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29214909</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 9ac69f078402b7afb394e10eaecb118b2f668e0d</div><div id='time'> Time: 2023-01-16</div><div id='author'> Author: ben@voxel51.com</div><div id='file'> File Name: fiftyone/core/context.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_url(2)</div><div id='n_method'> N Method Name: get_url(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fiftyone/core/context.py</div><div id='n_file'> N File Name: fiftyone/core/context.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 153</div><div id='n_end'> N End Line: 164</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _load_config(self, provider_config):
        list_of_node_ips = get_list_of_node_ips(provider_config)
        if os.path.exists(self.state_path):
            state = <a id="change">json.loads(</a>open(self.state_path).read()<a id="change">)</a>
        else:
            state = {}
        logger.info(
            "Loaded cluster state: {}".format(state))</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Filter removed node ips.
        for node_ip in list(nodes):
            <a id="change">if </a>node_ip not in list_of_node_ips:
                node<a id="change"> = </a>nodes[node_ip]
                &#47&#47 remove node only if it is terminated (not in use)
                if node == "terminated":
                    del nodes[node_ip]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/163577fc8aa93f97bfd1f830feb49c28eb70a0db#diff-494c77d54c8d4ae7f21aa96d7093ab9f63cc4f960638c6461239efe123f3c791L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29214918</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: 163577fc8aa93f97bfd1f830feb49c28eb70a0db</div><div id='time'> Time: 2023-05-24</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='m_class'> M Class Name: FileStateStore</div><div id='n_method'> N Class Name: FileStateStore</div><div id='m_method'> M Method Name: _load_config(2)</div><div id='n_method'> N Method Name: _load_config(2)</div><div id='m_parent_class'> M Parent Class: StateStore</div><div id='n_parent_class'> N Parent Class: StateStore</div><div id='m_file'> M File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='n_file'> N File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 142</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Returns:
            Original `StepView` derived from the proto.Execution.
        
        step_name = <a id="change">json.loads(
            </a>execution.custom_properties[
                INTERNAL_EXECUTION_PARAMETER_PREFIX
                + PARAM_PIPELINE_PARAMETER_NAME
            ].string_value<a id="change">
        )</a>

        step_parameters = {
            k: json.loads(v.string_value)
            for k, v in execution.custom_properties.items()</code></pre><h3>After Change</h3><pre><code class='java'>
            INTERNAL_EXECUTION_PARAMETER_PREFIX + PARAM_PIPELINE_PARAMETER_NAME,
            None,
        )
        <a id="change">if </a>step_name_property:
            step_name<a id="change"> = </a>json.loads(step_name_property.string_value)
        else:
            raise KeyError(
                f"Step name missing for execution with ID {execution.id}. "</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/58ad674daad65faf41b7f6e9574cfe54d2f1049a#diff-dc848b343efb8831ea769cb90013e6b9094c72afc65f048428bba06935a250d1L93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29214928</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 58ad674daad65faf41b7f6e9574cfe54d2f1049a</div><div id='time'> Time: 2021-11-30</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/metadata/base_metadata_store.py</div><div id='m_class'> M Class Name: BaseMetadataStore</div><div id='n_method'> N Class Name: BaseMetadataStore</div><div id='m_method'> M Method Name: _get_step_view_from_execution(2)</div><div id='n_method'> N Method Name: _get_step_view_from_execution(2)</div><div id='m_parent_class'> M Parent Class: BaseComponent</div><div id='n_parent_class'> N Parent Class: BaseComponent</div><div id='m_file'> M File Name: src/zenml/metadata/base_metadata_store.py</div><div id='n_file'> N File Name: src/zenml/metadata/base_metadata_store.py</div><div id='m_start'> M Start Line: 104</div><div id='m_end'> M End Line: 109</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 118</div><BR>