<html><h3>Pattern ID :38384
</h3><img src='109698873.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    actual_width  = old_image.shape[1]
    actual_height = old_image.shape[0]

    max_val = <a id="change">max(</a>actual_width, actual_height<a id="change">)</a>

    if max_val &gt;= max_photo_resolution:
        downscale_factor = max_val/max_photo_resolution
        new_width        = round(old_image.shape[1]/downscale_factor)</code></pre><h3>After Change</h3><pre><code class='java'>
        return "temp.png"
    else:
        new_width        = round(old_image.shape[1])
        new_height       = <a id="change">round(</a>old_image.shape[0]<a id="change">)</a>
        resized_image<a id="change">    = </a>cv2.resize(old_image,
                                   (new_width, new_height),
                                   interpolation = cv2.INTER_LINEAR)
        cv2.imwrite("temp.png", resized_image)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/djdefrag/qualityscaler/commit/66b6f13eca96c3a97a48871850754b01b7403ab2#diff-84f2858c19a17bc7224331c82c8eb4a2050df894e2e6f84183ecec96e1e47024L320' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109698873</div><div id='project'> Project Name: djdefrag/qualityscaler</div><div id='commit'> Commit Name: 66b6f13eca96c3a97a48871850754b01b7403ab2</div><div id='time'> Time: 2022-06-02</div><div id='author'> Author: jjluca96@gmail.com</div><div id='file'> File Name: QualityScaler.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: resize_image_to_show(1)</div><div id='n_method'> N Method Name: resize_image_to_show(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: QualityScaler.py</div><div id='n_file'> N File Name: QualityScaler.py</div><div id='m_start'> M Start Line: 328</div><div id='m_end'> M End Line: 346</div><div id='n_start'> N Start Line: 320</div><div id='n_end'> N End Line: 347</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert mode in ("down", "same", "up", "out")
        conv_conf = conv_conf[mode]

        branch_channels = <a id="change">max(</a>max(in_channels, out_channels) // bottleneck_divisor, 1<a id="change">)</a>

        self.activation = instantiate(activation)

        self.bias1a, self.bias1b, self.bias2a, self.bias2b, self.bias3a, self.bias3b, self.bias4 = (</code></pre><h3>After Change</h3><pre><code class='java'>
        assert isclose(max_channels % bottleneck_divisor, 0), (
            f"residual channels: {max_channels} not divisible by bottleneck divisor: {bottleneck_divisor}!"
        )
        branch_channels<a id="change"> = </a>max(<a id="change">round(</a>max_channels / bottleneck_divisor<a id="change">)</a>, 1)

        self.activation = instantiate(activation)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sara-nl/2d-vq-ae-2/commit/ce0eca747fa8b5a1b49e3b22a958a5c6d059ec66#diff-655c2f3f5b535c4d69d8153baf57da837cef5cf6e8d6df6548878d38ede7e7ceL128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109698876</div><div id='project'> Project Name: sara-nl/2d-vq-ae-2</div><div id='commit'> Commit Name: ce0eca747fa8b5a1b49e3b22a958a5c6d059ec66</div><div id='time'> Time: 2021-10-19</div><div id='author'> Author: robertjan.schlimbach@gmail.com</div><div id='file'> File Name: vq_ae/layers/conv_block.py</div><div id='m_class'> M Class Name: PreActFixupResBlock</div><div id='n_method'> N Class Name: PreActFixupResBlock</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: vq_ae/layers/conv_block.py</div><div id='n_file'> N File Name: vq_ae/layers/conv_block.py</div><div id='m_start'> M Start Line: 142</div><div id='m_end'> M End Line: 142</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 147</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            scores_matrix = pad_sequence(scores_list, batch_first=True, padding_value=-np.inf)  &#47&#47 nusers x items

        &#47&#47 get topk
        _, topk_index = torch.topk(scores_matrix, <a id="change">max(</a>self.topk<a id="change">)</a>, dim=-1)  &#47&#47 nusers x k

        return topk_index
</code></pre><h3>After Change</h3><pre><code class='java'>
        for metric, value in zip(self.metrics, result_list):
            for k in self.topk:
                key = &quot{}@{}&quot.format(metric, k)
                metric_dict[key]<a id="change"> = </a><a id="change">round(</a>value[k - 1], 4<a id="change">)</a>
        return metric_dict

    def _check_args(self):
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/df66b6285fec567d1f3ca0d6ee9d9ceb71f792b6#diff-a8acd0f2ac2f4ecd988072df1fbd285b091466958984b6c0d2b75a087c7320a5L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109698882</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: df66b6285fec567d1f3ca0d6ee9d9ceb71f792b6</div><div id='time'> Time: 2020-10-20</div><div id='author'> Author: 1337990880@qq.com</div><div id='file'> File Name: recbole/evaluator/topk_evaluator.py</div><div id='m_class'> M Class Name: TopKEvaluator</div><div id='n_method'> N Class Name: TopKEvaluator</div><div id='m_method'> M Method Name: evaluate(3)</div><div id='n_method'> N Method Name: evaluate(4)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: recbole/evaluator/topk_evaluator.py</div><div id='n_file'> N File Name: recbole/evaluator/topk_evaluator.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 80</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def video_need_tiles(frame, tiles_resolution):
    img_tmp             = image_read(frame)
    image_resolution    = <a id="change">max(</a>img_tmp.shape[1], img_tmp.shape[0]<a id="change">)</a>
    needed_tiles        = image_resolution/tiles_resolution

    if needed_tiles &lt;= 1:
        return False</code></pre><h3>After Change</h3><pre><code class='java'>
        return False, 0
    else:
        if (n_tiles % 2) != 0: n_tiles += 1
        n_tiles<a id="change"> = </a><a id="change">round(</a>sqrt(n_tiles * multiplier_num_tiles)<a id="change">)</a>

        return True, n_tiles

def image_need_tiles(image, tiles_resolution):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/djdefrag/qualityscaler/commit/9c1d7dcd4415b7434c57e7e15feac063a4962b21#diff-84f2858c19a17bc7224331c82c8eb4a2050df894e2e6f84183ecec96e1e47024L240' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109698871</div><div id='project'> Project Name: djdefrag/qualityscaler</div><div id='commit'> Commit Name: 9c1d7dcd4415b7434c57e7e15feac063a4962b21</div><div id='time'> Time: 2023-04-08</div><div id='author'> Author: jjluca96@gmail.com</div><div id='file'> File Name: QualityScaler.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: video_need_tiles(2)</div><div id='n_method'> N Method Name: video_need_tiles(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: QualityScaler.py</div><div id='n_file'> N File Name: QualityScaler.py</div><div id='m_start'> M Start Line: 242</div><div id='m_end'> M End Line: 249</div><div id='n_start'> N Start Line: 230</div><div id='n_end'> N End Line: 242</div><BR>