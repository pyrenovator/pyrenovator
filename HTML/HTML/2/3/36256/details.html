<html><h3>Pattern ID :36256
</h3><img src='102677998.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 TODO: Calculate persistence tuples here. Not quite clear what
        &#47&#47 the output of this function should be.
        <a id="change">return </a>None

    &#47&#47 Helper function for doing the actual calculation of topological
    &#47&#47 features of a graph.</code></pre><h3>After Change</h3><pre><code class='java'>
                    vertices, f_vertices, edges, f_edges
                )

                <a id="change">persistence_diagrams[filt_index, vi:vj]</a> = persistence_diagram

        &#47&#47 Make sure that the tensor is living on the proper device here;
        &#47&#47 all subsequent operations can happen either on the CPU *or* on</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aidos-lab/pytorch-topological/commit/100dc168045d1e240a74f9046ed1dc78062f2926#diff-ea77fe1f485a74396e0b311390be71b7c7fe76e3313250c492b9bb58ca29be14L140' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102677998</div><div id='project'> Project Name: aidos-lab/pytorch-topological</div><div id='commit'> Commit Name: 100dc168045d1e240a74f9046ed1dc78062f2926</div><div id='time'> Time: 2022-12-27</div><div id='author'> Author: bastian@rieck.me</div><div id='file'> File Name: torch_topological/nn/graphs.py</div><div id='m_class'> M Class Name: TOGL</div><div id='n_method'> N Class Name: TOGL</div><div id='m_method'> M Method Name: compute_persistent_homology(8)</div><div id='n_method'> N Method Name: compute_persistent_homology(8)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: torch_topological/nn/graphs.py</div><div id='n_file'> N File Name: torch_topological/nn/graphs.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 141</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    sin, cos = sinu_pos.unbind(dim = -2)
    sin, cos = map(lambda t: repeat(t, &quotb n -&gt; b (n j)&quot, j = 2), (sin, cos))
    qk = (qk * cos) + (rotate_every_two(qk) * sin)
    <a id="change">return </a>qk

&#47&#47 reformer lm
</code></pre><h3>After Change</h3><pre><code class='java'>
    sin, cos = sinu_pos.unbind(dim = -2)
    sin, cos = map(lambda t: repeat(t, &quotn d -&gt; n (d j)&quot, j = 2), (sin, cos))
    seq_len = sin.shape[0]
    qk, qk_pass = <a id="change">qk[:, :seq_len]</a>, qk[:, seq_len:]
    qk = (qk * cos) + (rotate_every_two(qk) * sin)
    return torch.cat((qk, qk_pass), dim = 1)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/reformer-pytorch/commit/9f6ad0674567a521edbb07f8bfce68da43865487#diff-7e740488ff2ce47996cfdd5356981ed3e6ac2bb38739a71b400275ac91d1c3bfL656' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102677999</div><div id='project'> Project Name: lucidrains/reformer-pytorch</div><div id='commit'> Commit Name: 9f6ad0674567a521edbb07f8bfce68da43865487</div><div id='time'> Time: 2021-05-05</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: reformer_pytorch/reformer_pytorch.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: apply_rotary_pos_emb(2)</div><div id='n_method'> N Method Name: apply_rotary_pos_emb(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: reformer_pytorch/reformer_pytorch.py</div><div id='n_file'> N File Name: reformer_pytorch/reformer_pytorch.py</div><div id='m_start'> M Start Line: 660</div><div id='m_end'> M End Line: 661</div><div id='n_start'> N Start Line: 660</div><div id='n_end'> N End Line: 663</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            break

    if matched:
        <a id="change">return </a>_all_gather_cpu(data)
    else:
        return _all_gather_gpu(data)
</code></pre><h3>After Change</h3><pre><code class='java'>

    gathered = []
    for size, tensor in zip(size_list, tensor_list):
        buffer = <a id="change">tensor.cpu().numpy().tobytes()[:size]</a>
        gathered.append(nncore.loads(buffer))

    return gathered
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/c60692996f4316b5befe701efbc18a9ad7cc7ac1#diff-fdf562e6b578fc92f4c74e59141f61b874fc8722e8eb5d843ef38c4c81d99321L47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102678000</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: c60692996f4316b5befe701efbc18a9ad7cc7ac1</div><div id='time'> Time: 2020-03-11</div><div id='author'> Author: goolhanrry@gmail.com</div><div id='file'> File Name: nncore/engine/comm.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: all_gather(2)</div><div id='n_method'> N Method Name: all_gather(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nncore/engine/comm.py</div><div id='n_file'> N File Name: nncore/engine/comm.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 112</div><BR>