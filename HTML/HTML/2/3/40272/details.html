<html><h3>Pattern ID :40272
</h3><img src='114227468.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            prev_rejected = not accepted

        rk_state = (fnew, tnew, ynew, h)
        return rk_state<a id="change">, t1_achieved</a>

class RK23(RKAdaptiveStepSolver):
    error_estimator_order = 2</code></pre><h3>After Change</h3><pre><code class='java'>
            new_factor = self.step_mult * (errnorm + 1e-8) ** self.error_exponent
            &#47&#47 if accepted and not t1_achieved:
            if accepted:
                factor = <a id="change">torch.minimum(</a>torch.full_like(new_factor, self.max_factor), new_factor<a id="change">)</a>
                if prev_rejected:
                    factor<a id="change"> = </a>torch.minimum(torch.ones_like(factor), factor)
                not_t1_achieved = torch.logical_not(t1_achieved)
                h[not_t1_achieved] *= factor[not_t1_achieved]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/xitorch/xitorch/commit/c6f0785664d60d1310778d43f14a3464660ea4d9#diff-1483d3ea142df8ec6c0e99905625e2421b3c2854fb87878e7255748ac68ae5a4L85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114227468</div><div id='project'> Project Name: xitorch/xitorch</div><div id='commit'> Commit Name: c6f0785664d60d1310778d43f14a3464660ea4d9</div><div id='time'> Time: 2021-12-30</div><div id='author'> Author: firman.kasim@gmail.com</div><div id='file'> File Name: xitorch/_impls/integrate/ivp/adaptive_rk.py</div><div id='m_class'> M Class Name: RKAdaptiveStepSolver</div><div id='n_method'> N Class Name: RKAdaptiveStepSolver</div><div id='m_method'> M Method Name: _single_step(3)</div><div id='n_method'> N Method Name: _single_step(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: xitorch/_impls/integrate/ivp/adaptive_rk.py</div><div id='n_file'> N File Name: xitorch/_impls/integrate/ivp/adaptive_rk.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            idxs.append(idx.item())
            dist_new_ctr = torch.cdist(unlabeled_embeddings, unlabeled_embeddings[[idx],:])
            for j in range(m):
                min_dist[j] = min(min_dist[j], dist_new_ctr[j<a id="change">,0</a>])
                
        return idxs
  </code></pre><h3>After Change</h3><pre><code class='java'>
            idx = torch.argmax(min_dist)
            idxs.append(idx.item())
            dist_new_ctr = torch.cdist(unlabeled_embeddings, unlabeled_embeddings[[idx],:])
            min_dist<a id="change"> = </a><a id="change">torch.minimum(</a>min_dist, dist_new_ctr[:,0]<a id="change">)</a>
                
        return idxs
  
    def select(self, budget):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/decile-team/distil/commit/fca600274b0f0558506141932f15aecbf2fecd0b#diff-edfe60235357185e852a9322dfe4b81e7b77373b193bf8b67b33ad5ef95b88a4L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114227469</div><div id='project'> Project Name: decile-team/distil</div><div id='commit'> Commit Name: fca600274b0f0558506141932f15aecbf2fecd0b</div><div id='time'> Time: 2021-08-21</div><div id='author'> Author: nab170130@utdallas.edu</div><div id='file'> File Name: distil/active_learning_strategies/core_set.py</div><div id='m_class'> M Class Name: CoreSet</div><div id='n_method'> N Class Name: CoreSet</div><div id='m_method'> M Method Name: furthest_first(4)</div><div id='n_method'> N Method Name: furthest_first(4)</div><div id='m_parent_class'> M Parent Class: Strategy</div><div id='n_parent_class'> N Parent Class: Strategy</div><div id='m_file'> M File Name: distil/active_learning_strategies/core_set.py</div><div id='n_file'> N File Name: distil/active_learning_strategies/core_set.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            continue

        &#47&#47 create empty new rule column
        reduced_matches_col = np.zeros((full_matches.shape[0]<a id="change"></a>,))

        &#47&#47 the mask has to have *boolean type*, otherwise the matrix is sliced incorrectly
        label_rule_matches = full_matches[:, to_reduce_label_mask].sum(1)</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 take care of multiple matches per row --&gt; reduce them to one
        if isinstance(full_matches, ss.csr_matrix):
            reduced_matches_col<a id="change"> = </a><a id="change">ss.csc_matrix(reduced_matches_col).minimum(</a>1<a id="change">)</a>
        else:
            reduced_matches_col = np.minimum(reduced_matches_col, 1).reshape(-1, 1)

        reduced_matches.append(reduced_matches_col)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/knodle/knodle/commit/3ed4f6f0c14a634e8976ab9d9d7ab1e95aface4d#diff-3669479fa8c5e2732a7b9dff64c6a4ac9f8502aff28bcd9ce1070115d6cf5cccL172' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114227464</div><div id='project'> Project Name: knodle/knodle</div><div id='commit'> Commit Name: 3ed4f6f0c14a634e8976ab9d9d7ab1e95aface4d</div><div id='time'> Time: 2021-05-31</div><div id='author'> Author: 19635192+marina-sp@users.noreply.github.com</div><div id='file'> File Name: knodle/transformation/rule_reduction.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_merged_matrix(3)</div><div id='n_method'> N Method Name: _get_merged_matrix(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: knodle/transformation/rule_reduction.py</div><div id='n_file'> N File Name: knodle/transformation/rule_reduction.py</div><div id='m_start'> M Start Line: 188</div><div id='m_end'> M End Line: 205</div><div id='n_start'> N Start Line: 229</div><div id='n_end'> N End Line: 253</div><BR>