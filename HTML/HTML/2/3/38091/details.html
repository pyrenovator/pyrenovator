<html><h3>Pattern ID :38091
</h3><img src='109188375.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                axs[2].axhline(y=0.5, color=&quotk&quot, linestyle=&quot-&quot, linewidth=0.5)
                axs[2].axis(&quotoff&quot)

            <a id="change">return </a>score, "Earth Mover&quots Distance", plot_numerical

        elif column_type == &quotcategorical&quot:
</code></pre><h3>After Change</h3><pre><code class='java'>
                                                                             is_categorical=True,
                                                                             max_num_categories=self.max_num_categories)

        fig<a id="change"> = </a>make_subplots(rows=2, cols=1, vertical_spacing=0.4, shared_yaxes=False, shared_xaxes=False,
                            row_heights=[0.1, 0.9],
                            subplot_titles=[&quotDrift Score - &quot + scorer_name, plot_title])

        fig.add_traces(score_bar, rows=[1] * len(score_bar), cols=[1] * len(score_bar))
        fig.add_traces(traces, rows=[2] * len(traces), cols=[1] * len(traces))

        shared_layout = go.Layout(
            xaxis=dict(
                showgrid=False,
                gridcolor=&quotblack&quot,
                linecolor=&quotblack&quot,
                range=[0, bar_stop],
                dtick=0.05,
                title=&quotdrift score&quot
            ),
            yaxis=dict(
                showgrid=False,
                showline=False,
                showticklabels=False,
                zeroline=False,
            ),
            xaxis2=xaxis_layout,
            yaxis2=yaxis_layout,
            legend=dict(
                title=&quotDataset&quot,
                yanchor=&quottop&quot,
                y=0.7,
                xanchor=&quotleft&quot,
                x=0.85),
            width=700,
            height=400
        )

        <a id="change">fig.update_layout(</a>shared_layout<a id="change">)</a>

        return score, scorer_name, fig

    def add_condition_drift_score_not_greater_than(self, max_allowed_psi_score: float = 0.2,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/292e9b9c82ee947e2d2f26abd035b358b3a996c2#diff-f00979484e76b0208eaa299d3383f9eadde926ed072f6de2873a66e502172dfcL174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188375</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 292e9b9c82ee947e2d2f26abd035b358b3a996c2</div><div id='time'> Time: 2021-12-26</div><div id='author'> Author: 42312361+benisraeldan@users.noreply.github.com</div><div id='file'> File Name: deepchecks/checks/distribution/train_test_feature_drift.py</div><div id='m_class'> M Class Name: TrainTestFeatureDrift</div><div id='n_method'> N Class Name: TrainTestFeatureDrift</div><div id='m_method'> M Method Name: _calc_drift_per_column(6)</div><div id='n_method'> N Method Name: _calc_drift_per_column(6)</div><div id='m_parent_class'> M Parent Class: TrainTestBaseCheck</div><div id='n_parent_class'> N Parent Class: TrainTestBaseCheck</div><div id='m_file'> M File Name: deepchecks/checks/distribution/train_test_feature_drift.py</div><div id='n_file'> N File Name: deepchecks/checks/distribution/train_test_feature_drift.py</div><div id='m_start'> M Start Line: 185</div><div id='m_end'> M End Line: 232</div><div id='n_start'> N Start Line: 174</div><div id='n_end'> N End Line: 244</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            ax.set_title(f&quot{scorer_name} (count) by features {feat1}/{feat2}&quot)

        value = {&quotscores&quot: scores, &quotcounts&quot: counts, &quotfeature_1&quot: self.feature_1, &quotfeature_2&quot: self.feature_2}
        <a id="change">return </a>CheckResult(value, display=display)
</code></pre><h3>After Change</h3><pre><code class='java'>
                else:
                    scores_text[i][j] = f&quot{score}\n({counts[i, j]})&quot

        fig<a id="change"> = </a>ff.create_annotated_heatmap(scores, annotation_text=scores_text,
                                          x=x, y=y, colorscale=&quotrdylgn&quot, font_colors=[&quotblack&quot, &quotblack&quot])
        <a id="change">fig.update_layout(title=f&quot{scorer_name} (count) by features {self.feature_1}/{self.feature_2}&quot,
                          width=800, height=800)</a>
        fig.update_xaxes(title=self.feature_2)
        fig.update_yaxes(title=self.feature_1, autorange=&quotreversed&quot)
        fig[&quotdata&quot][0][&quotshowscale&quot] = True
        fig[&quotlayout&quot][&quotxaxis&quot][&quotside&quot] = &quotbottom&quot</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/4dc9f1f9dda03eebb492989b3cff3444b93eaa84#diff-3090cc763414ca59049b4ed873fc90e95c9db60efa9fb3dabc80c4a9add7370bL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188378</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 4dc9f1f9dda03eebb492989b3cff3444b93eaa84</div><div id='time'> Time: 2021-12-22</div><div id='author'> Author: jonatan.lib@gmail.com</div><div id='file'> File Name: deepchecks/checks/performance/segment_performance.py</div><div id='m_class'> M Class Name: SegmentPerformance</div><div id='n_method'> N Class Name: SegmentPerformance</div><div id='m_method'> M Method Name: run(3)</div><div id='n_method'> N Method Name: run(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetBaseCheck</div><div id='n_parent_class'> N Parent Class: SingleDatasetBaseCheck</div><div id='m_file'> M File Name: deepchecks/checks/performance/segment_performance.py</div><div id='n_file'> N File Name: deepchecks/checks/performance/segment_performance.py</div><div id='m_start'> M Start Line: 157</div><div id='m_end'> M End Line: 158</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        def display():
            sklearn.metrics.ConfusionMatrixDisplay(confusion_matrix).plot()

        <a id="change">return </a>CheckResult(confusion_matrix, display=display)
</code></pre><h3>After Change</h3><pre><code class='java'>
        confusion_matrix = sklearn.metrics.confusion_matrix(ds_y, y_pred)

        labels = [str(val) for val in np.unique(ds_y)]
        fig<a id="change"> = </a>ff.create_annotated_heatmap(confusion_matrix, x=labels, y=labels, colorscale=&quotViridis&quot)
        <a id="change">fig.update_layout(width=600, height=600)</a>
        fig.update_xaxes(title=&quotPredicted Value&quot)
        fig.update_yaxes(title=&quotTrue value&quot, autorange=&quotreversed&quot)
        fig[&quotdata&quot][0][&quotshowscale&quot] = True
        fig[&quotlayout&quot][&quotxaxis&quot][&quotside&quot] = &quotbottom&quot</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/4dc9f1f9dda03eebb492989b3cff3444b93eaa84#diff-4516609e1abb49485518e9410e16b242ff065f380ec93643272abbb6d60e0594L41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188377</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 4dc9f1f9dda03eebb492989b3cff3444b93eaa84</div><div id='time'> Time: 2021-12-22</div><div id='author'> Author: jonatan.lib@gmail.com</div><div id='file'> File Name: deepchecks/checks/performance/confusion_matrix_report.py</div><div id='m_class'> M Class Name: ConfusionMatrixReport</div><div id='n_method'> N Class Name: ConfusionMatrixReport</div><div id='m_method'> M Method Name: _confusion_matrix_report(3)</div><div id='n_method'> N Method Name: _confusion_matrix_report(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetBaseCheck</div><div id='n_parent_class'> N Parent Class: SingleDatasetBaseCheck</div><div id='m_file'> M File Name: deepchecks/checks/performance/confusion_matrix_report.py</div><div id='n_file'> N File Name: deepchecks/checks/performance/confusion_matrix_report.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 63</div><BR>