<html><h3>Pattern ID :622
</h3><img src='3001062.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def declare_state_and_memory(self, previous_state: State) -&gt; Tuple[State, Optional[AllocationQuery]]:
        assert previous_state.jit_mode
        self.previous_shape = previous_state.shape
        my_state = (<a id="change">replace(</a>previous_state<a id="change">, dtype=self.dtype)</a>, AllocationQuery(shape=previous_state.shape, dtype=self.dtype))

        return my_state</code></pre><h3>After Change</h3><pre><code class='java'>

        else:
            self.mode = &quotgpu&quot
            new_state<a id="change"> = </a><a id="change">replace(</a>previous_state<a id="change">, dtype=self.dtype)</a>

            gpu_type = ch_dtype_from_numpy(self.dtype)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/libffcv/ffcv/commit/600f5e635b32031796979a1bd195015164fe9f43#diff-5852870ecc24fdcaa8a903f9c4cbaef1f4d6ac3090d91abe4352e181699da4cbL65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 3001062</div><div id='project'> Project Name: libffcv/ffcv</div><div id='commit'> Commit Name: 600f5e635b32031796979a1bd195015164fe9f43</div><div id='time'> Time: 2022-01-11</div><div id='author'> Author: leclerc@mit.edu</div><div id='file'> File Name: ffcv/transforms/normalize.py</div><div id='m_class'> M Class Name: NormalizeImage</div><div id='n_method'> N Class Name: NormalizeImage</div><div id='m_method'> M Method Name: declare_state_and_memory(2)</div><div id='n_method'> N Method Name: declare_state_and_memory(2)</div><div id='m_parent_class'> M Parent Class: Operation</div><div id='n_parent_class'> N Parent Class: Operation</div><div id='m_file'> M File Name: ffcv/transforms/normalize.py</div><div id='n_file'> N File Name: ffcv/transforms/normalize.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 103</div><div id='n_end'> N End Line: 129</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                con = astunparse.unparse(a.func).replace(&quotsize&quot, &quotshape&quot)
            return ast.parse(con).body[0].value
    elif isinstance(a, ast.Expr): pass
    elif isinstance(a, ast.Attribute) or isinstance(a, ast.Name): <a id="change">replace(</a>a<a id="change">)</a>
    elif isinstance(a, ast.FunctionDef):
        if a.name == &quotforward&quot: a.name = &quotexecute&quot
    if hasattr(a, &quot__dict__&quot):
        for k in a.__dict__.keys():</code></pre><h3>After Change</h3><pre><code class='java'>
            return ast.parse(con).body[0].value
    elif isinstance(a, ast.Expr): pass
    elif isinstance(a, ast.Attribute) or isinstance(a, ast.Name): 
        ret<a id="change"> = </a><a id="change">replace(</a>a<a id="change">)</a>
        if ret is not None:
            print(ret)
            return ret
    elif isinstance(a, ast.FunctionDef):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/ac052171cee8e944d14421248c6d7adf20eb95ca#diff-2f91a3a87107be27fe6cbf995e9ad6a92d6580e80253cd0fb5bb2def50272e5dL615' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 3001059</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: ac052171cee8e944d14421248c6d7adf20eb95ca</div><div id='time'> Time: 2020-12-10</div><div id='author'> Author: 1905692338@qq.com</div><div id='file'> File Name: python/jittor/utils/pytorch_converter.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: dfs(1)</div><div id='n_method'> N Method Name: dfs(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/jittor/utils/pytorch_converter.py</div><div id='n_file'> N File Name: python/jittor/utils/pytorch_converter.py</div><div id='m_start'> M Start Line: 639</div><div id='m_end'> M End Line: 657</div><div id='n_start'> N Start Line: 666</div><div id='n_end'> N End Line: 699</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        "real": (&quot1x0e&quot, "edge_length"),
        "irreps_out": (edge_radial, "edge_radial"),
    }
    <a id="change">replace(</a>layers, &quotradial_basis&quot, (&quotradial_basis&quot, layer)<a id="change">)</a>

    return config

</code></pre><h3>After Change</h3><pre><code class='java'>
        "real": (&quot1x0e&quot, "edge_length"),
        "irreps_out": (edge_radial, "edge_radial"),
    }
    config.layers<a id="change"> = </a><a id="change">replace(</a>config.layers, &quotradial_basis&quot, (&quotradial_basis&quot, layer)<a id="change">)</a>

    return config

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/20171130/equivariant-nn-zoo/commit/8f78a2467adcfaa2645d6d6478755542b583ea2d#diff-dcd161e1b7786a58f2699eaa67638e19d54b7191d46ecdbb3141b997f23e6d11L110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 3001058</div><div id='project'> Project Name: 20171130/equivariant-nn-zoo</div><div id='commit'> Commit Name: 8f78a2467adcfaa2645d6d6478755542b583ea2d</div><div id='time'> Time: 2022-06-28</div><div id='author'> Author: hangruibi@outlook.com</div><div id='file'> File Name: e3_layers/configs/layer_configs.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: addEdgeEmbedding(2)</div><div id='n_method'> N Method Name: addEdgeEmbedding(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e3_layers/configs/layer_configs.py</div><div id='n_file'> N File Name: e3_layers/configs/layer_configs.py</div><div id='m_start'> M Start Line: 125</div><div id='m_end'> M End Line: 136</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 137</div><BR>