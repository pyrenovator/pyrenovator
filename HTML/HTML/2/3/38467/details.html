<html><h3>Pattern ID :38467
</h3><img src='109925469.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            "--suffix", type=str, default=None, help="Suffix of the restored faces"
        )
        parser.add_argument("--only_center_face", action="store_true")
        <a id="change">parser.add_argument("--aligned"</a><a id="change">, action="store_true")</a>
        parser.add_argument("--paste_back", action="store_false")
        parser.add_argument("--save_root", type=str, default="results")

        self.args = parser.parse_args(</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 background enhancer with RealESRGAN
        model = SRVGGNetCompact(num_in_ch=3, num_out_ch=3, num_feat=64, num_conv=32, upscale=4, act_type=&quotprelu&quot)
        model_path = &quotrealesr-general-x4v3.pth&quot
        half = True<a id="change"> if </a>torch.cuda.is_available()<a id="change"> else </a>False
        upsampler = RealESRGANer(scale=4, model_path=model_path, model=model, tile=0, tile_pad=10, pre_pad=0, half=half)

        &#47&#47 Use GFPGAN for face enhancement</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tencentarc/gfpgan/commit/3e27784b1b4eb008d06c04dbbaf6bdde34c4da84#diff-73c1982d8a085dc10fda2ac7b6f202ae3ff9530ee6a15991c5339051eb10a49aL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109925469</div><div id='project'> Project Name: tencentarc/gfpgan</div><div id='commit'> Commit Name: 3e27784b1b4eb008d06c04dbbaf6bdde34c4da84</div><div id='time'> Time: 2022-08-31</div><div id='author'> Author: wxt1994@126.com</div><div id='file'> File Name: predict.py</div><div id='m_class'> M Class Name: Predictor</div><div id='n_method'> N Class Name: Predictor</div><div id='m_method'> M Method Name: setup(1)</div><div id='n_method'> N Method Name: setup(1)</div><div id='m_parent_class'> M Parent Class: BasePredictor</div><div id='n_parent_class'> N Parent Class: cog.Predictor</div><div id='m_file'> M File Name: predict.py</div><div id='n_file'> N File Name: predict.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        default=3,
        help="Anchor num scales, `scales = [2 ** (ii / num_scales) * anchor_scale for ii in range(num_scales)]`. Force 1 if use_anchor_free_mode",
    )
    <a id="change">anchor_group.add_argument(
        "--anchor_aspect_ratios"</a><a id="change">,
        type=float,
        nargs="+",
        default=[1, 2, 0.5],
        help="Anchor aspect ratios, `num_anchors = len(anchor_aspect_ratios) * anchor_num_scales`. Force [1] if use_anchor_free_mode",
    )</a>
    anchor_group.add_argument("--anchor_pyramid_levels_min", type=int, default=3, help="Anchor pyramid levels min.")
    anchor_group.add_argument("--anchor_pyramid_levels_max", type=int, default=-1, help="Anchor pyramid levels max. -1 for calculated from model output shape")

     Loss arguments </code></pre><h3>After Change</h3><pre><code class='java'>
    elif basic_save_name is None:
        data_name = args.data_name.replace("/", "_")
        model_name = args.det_header.split(".")[-1] + ("" if args.backbone is None else ("_" + args.backbone.split(".")[-1]))
        anchor_mode = "anchor_free"<a id="change"> if </a>args.use_anchor_free_mode<a id="change"> else </a>("yolor_anchor" if args.use_yolor_anchors_mode else "effdet_anchor")
        basic_save_name = "{}_{}_{}_{}_batchsize_{}".format(model_name, args.input_shape, args.optimizer, data_name, args.batch_size)
        basic_save_name += "_randaug_{}_mosaic_{}_RRC_{}".format(args.magnitude, args.mosaic_mix_prob, args.random_crop_mode)
        basic_save_name += "_lr512_{}_wd_{}_{}".format(args.lr_base_512, args.weight_decay, anchor_mode)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/df3cf1ce0ac4b02a9c73496b1a583b9a892c7b0a#diff-b4d8c4b03a78141c0a301a962af9062ffeef32169d1478c61c8b610f7c7996e4L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109925461</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: df3cf1ce0ac4b02a9c73496b1a583b9a892c7b0a</div><div id='time'> Time: 2022-03-25</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: coco_train_script.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: parse_arguments(1)</div><div id='n_method'> N Method Name: parse_arguments(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: coco_train_script.py</div><div id='n_file'> N File Name: coco_train_script.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 159</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    anchor_group = parser.add_argument_group("COCO arguments")
    anchor_group.add_argument("--use_anchor_free_mode", action="store_true", help="[COCO] Use anchor free mode")
    anchor_group.add_argument("--anchor_pyramid_levels_min", type=int, default=3, help="[COCO] Anchor pyramid levels min")
    <a id="change">anchor_group.add_argument(
        "--anchor_pyramid_levels_max"</a><a id="change">, type=int, default=-1, help="[COCO] Anchor pyramid levels max. `-1` means yolox: 5, efficientdet: 7"
    )</a>
    anchor_group.add_argument(
        "--anchor_scale", type=int, default=4, help="Anchor scale, base anchor for a single grid point will multiply with it. Force 1 if use_anchor_free_mode"
    )
</code></pre><h3>After Change</h3><pre><code class='java'>

    args = parser.parse_known_args(argv)[0]

    args.additional_anchor_kwargs = json.loads(args.additional_anchor_kwargs)<a id="change"> if </a>args.additional_anchor_kwargs<a id="change"> else </a>{}
    if args.use_anchor_free_mode:
        args.anchor_scale = 1
    return args</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/395e20dae33afc89bda7ea68badf798e3168aeb9#diff-b0bd747b459982c412a0b0c7a07d40a6ebeb863cec2ecbe542082cbd45a05fcdL6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109925456</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: 395e20dae33afc89bda7ea68badf798e3168aeb9</div><div id='time'> Time: 2022-03-24</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: eval_script.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: parse_arguments(1)</div><div id='n_method'> N Method Name: parse_arguments(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: eval_script.py</div><div id='n_file'> N File Name: eval_script.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 48</div><BR>