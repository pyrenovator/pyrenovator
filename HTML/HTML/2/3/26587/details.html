<html><h3>Pattern ID :26587
</h3><img src='79634508.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            rel_pos = rearrange(grid, &quoti c -&gt; i 1 c&quot) - rearrange(grid, &quotj c -&gt; 1 j c&quot)

            if self.log_dist:
                rel_pos<a id="change"> = </a><a id="change">torch.sign(</a>rel_pos<a id="change">)</a> * torch.log(rel_pos.abs() + 1)

            self.register_buffer(&quotrel_pos&quot, rel_pos, persistent = False)
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 now select the bias for each unique relative position combination

        bias = bias[rel_dist_indices]
        <a id="change">return </a>rearrange(bias, &quoti j h -&gt; h i j&quot)

&#47&#47 helper classes
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lucidrains/make-a-video-pytorch/commit/b6e0a17c5488b923d884272f7e46170352b0f0d5#diff-a7a81e9a1aa252916dd3f29e813ef72db53e9b9a100d00fdf0a022c1823ac77bL105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79634508</div><div id='project'> Project Name: lucidrains/make-a-video-pytorch</div><div id='commit'> Commit Name: b6e0a17c5488b923d884272f7e46170352b0f0d5</div><div id='time'> Time: 2023-03-18</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: make_a_video_pytorch/make_a_video.py</div><div id='m_class'> M Class Name: ContinuousPositionBias</div><div id='n_method'> N Class Name: ContinuousPositionBias</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: make_a_video_pytorch/make_a_video.py</div><div id='n_file'> N File Name: make_a_video_pytorch/make_a_video.py</div><div id='m_start'> M Start Line: 110</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 105</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    segs_p = boxes[:, [project_axis, 3+project_axis]]
    dist_p = seg1d_pdist(points_p, segs_p)

    sign<a id="change"> = </a>torch.min(<a id="change">dist_2d.sign()</a>, dist_p.sign())
    dist = torch.sqrt(dist_2d.square() + dist_p.square())
    return sign * dist
</code></pre><h3>After Change</h3><pre><code class='java'>
        torch.where(dist_2d &gt; 0, torch.min(dist_p, dist_2d), dist_2d),
        torch.where(dist_2d &gt; 0, dist_p, -torch.sqrt(dist_2d.square() + dist_p.square()))
    )
    <a id="change">return </a>dist
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cmpute/d3d/commit/634cbafe5f4e96dde8e6101866224118ce270123#diff-0c16c066068913adff9266e271ed9043ced66d7d7ffb6b5c4fe34f766b7644b8L348' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79634523</div><div id='project'> Project Name: cmpute/d3d</div><div id='commit'> Commit Name: 634cbafe5f4e96dde8e6101866224118ce270123</div><div id='time'> Time: 2021-03-30</div><div id='author'> Author: cmpute@qq.com</div><div id='file'> File Name: d3d/box/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: box3dr_pdist(3)</div><div id='n_method'> N Method Name: box3dr_pdist(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: d3d/box/__init__.py</div><div id='n_file'> N File Name: d3d/box/__init__.py</div><div id='m_start'> M Start Line: 367</div><div id='m_end'> M End Line: 375</div><div id='n_start'> N Start Line: 367</div><div id='n_end'> N End Line: 378</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            
        if ctx.sign_grad :
            grad_P1 = grad_P1.sign()
            grad_P2<a id="change"> = </a><a id="change">grad_P2.sign()</a>            
        
        return grad_input, grad_weight, grad_P1, grad_P2, grad_bias, None, None, None, None, None, None   </code></pre><h3>After Change</h3><pre><code class='java'>
        if bias is None:
            grad_bias = None

        <a id="change">return </a>grad_input, grad_weight, grad_P1, grad_P2, grad_bias, None, None, None, None, None
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/k-h-ismail/dilated-convolution-with-learnable-spacings-pytorch/commit/538559765f01400158faf8ab4157c34faf77ad4d#diff-232ff88174aa3663c58a0cc94e8122d2d9170d207edb0a79f55cdcc66809b485L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79634522</div><div id='project'> Project Name: k-h-ismail/dilated-convolution-with-learnable-spacings-pytorch</div><div id='commit'> Commit Name: 538559765f01400158faf8ab4157c34faf77ad4d</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: khalfaoui.ismail@hotmail.com</div><div id='file'> File Name: DCLS/functions/dcls_functionnal.py</div><div id='m_class'> M Class Name: dcls2d_conv</div><div id='n_method'> N Class Name: dcls2d_conv</div><div id='m_method'> M Method Name: backward(2)</div><div id='n_method'> N Method Name: backward(2)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: DCLS/functions/dcls_functionnal.py</div><div id='n_file'> N File Name: DCLS/functions/dcls_functionnal.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    liad1 = liad1 * (np.abs(liad1) &gt; liad_thresh)

    sgn = <a id="change">np.sign(</a>liad1<a id="change">)</a>
    nz<a id="change"> = </a>np.sum(sgn != 0, axis=-1)
    ssgn = np.sum(sgn, axis=-1)

    with np.errstate(divide="ignore", invalid="ignore"):</code></pre><h3>After Change</h3><pre><code class='java'>

    liad1, _ = utils._liad(z, a, order=1, mode=liad_mode, return_list=False)

    <a id="change">return </a>_get_monotonicity_from_liad(
        liad1=liad1,
        reduce_mode=reduce_mode,
        liad_thresh=liad_thresh,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/karnwatcharasupat/latte/commit/357c6ad5d4c4d6eeeec51b04d7fb59584a1adeab#diff-2a69cccf4d04e0356da6dee73ad43936c5c6496752918079c61952b40156ce31L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79634521</div><div id='project'> Project Name: karnwatcharasupat/latte</div><div id='commit'> Commit Name: 357c6ad5d4c4d6eeeec51b04d7fb59584a1adeab</div><div id='time'> Time: 2021-12-29</div><div id='author'> Author: karn001@e.ntu.edu.sg</div><div id='file'> File Name: src/latte/functional/interpolatability/monotonicity.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: monotonicity(8)</div><div id='n_method'> N Method Name: monotonicity(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/latte/functional/interpolatability/monotonicity.py</div><div id='n_file'> N File Name: src/latte/functional/interpolatability/monotonicity.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Returns:
            torch.Tensor: sign of tensor x
        
        sign_tensor<a id="change"> = </a><a id="change">torch.sign(</a>x<a id="change">)</a>
        sign_tensor[sign_tensor &lt; 0] = 0
        return sign_tensor
</code></pre><h3>After Change</h3><pre><code class='java'>
        Returns:
            torch.Tensor: sign of tensor x
        
        <a id="change">return </a>STE.apply(torch.where(x &gt;= 0, torch.tensor(1., device=x.device), x))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hpi-xnor/bitorch/commit/128dc0abd719591ec31963d0614ff7220cef0576#diff-d852cc0db9b6c5ca5e22558330875d1e9345a35112add6f2a9c680c1a85a278cL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79634516</div><div id='project'> Project Name: hpi-xnor/bitorch</div><div id='commit'> Commit Name: 128dc0abd719591ec31963d0614ff7220cef0576</div><div id='time'> Time: 2021-10-10</div><div id='author'> Author: paul.mattes@student.hpi.de</div><div id='file'> File Name: bitorch/quantizations/steheaviside.py</div><div id='m_class'> M Class Name: SteHeaviside</div><div id='n_method'> N Class Name: SteHeaviside</div><div id='m_method'> M Method Name: quantize(2)</div><div id='n_method'> N Method Name: quantize(2)</div><div id='m_parent_class'> M Parent Class: Quantization</div><div id='n_parent_class'> N Parent Class: Quantization</div><div id='m_file'> M File Name: bitorch/quantizations/steheaviside.py</div><div id='n_file'> N File Name: bitorch/quantizations/steheaviside.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 20</div><BR>