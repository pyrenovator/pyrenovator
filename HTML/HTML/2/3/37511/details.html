<html><h3>Pattern ID :37511
</h3><img src='108054656.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                loss_numpy[&quotloss_Dr1&quot] = loss_Dr1.cpu().detach().numpy().mean()

            loss4 = (loss_Dreal + loss_Dr1).mean() * float(gain)
            <a id="change">if </a>do_Dmain:
                loss4<a id="change"> += </a>loss3
            loss4.backward()  &#47&#47 咩酱：gain即上文提到的这个阶段的训练间隔。
        return loss_numpy
</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 loss_G = loss_Gmain
            &#47&#47 loss_G = loss_G * float(gain)
            &#47&#47 loss_G.backward()  &#47&#47 咩酱：gain即上文提到的这个阶段的训练间隔。
            <a id="change">loss_Gmain.mean().mul(</a>gain<a id="change">)</a>.backward()

        &#47&#47 Gpl: Apply path length regularization.
        if do_Gpl:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/miemie2013/miemiegan/commit/cf43a0a8db722386b89e71d5d33b472774867ea1#diff-c3be3e49b4968a2ee433a8b0d38c7aa9f68d5116602220ff22567e41b765b44bL148' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108054656</div><div id='project'> Project Name: miemie2013/miemiegan</div><div id='commit'> Commit Name: cf43a0a8db722386b89e71d5d33b472774867ea1</div><div id='time'> Time: 2022-02-24</div><div id='author'> Author: 53960695+miemie2013@users.noreply.github.com</div><div id='file'> File Name: mmgan/models/architectures/styleganv2ada_model.py</div><div id='m_class'> M Class Name: StyleGANv2ADAModel</div><div id='n_method'> N Class Name: StyleGANv2ADAModel</div><div id='m_method'> M Method Name: accumulate_gradients(8)</div><div id='n_method'> N Method Name: accumulate_gradients(8)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: mmgan/models/architectures/styleganv2ada_model.py</div><div id='n_file'> N File Name: mmgan/models/architectures/styleganv2ada_model.py</div><div id='m_start'> M Start Line: 148</div><div id='m_end'> M End Line: 236</div><div id='n_start'> N Start Line: 176</div><div id='n_end'> N End Line: 268</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        X: torch.Tensor = seq[0]
        seq: List[torch.Tensor] = seq[1:]
        g = torch.zeros_like(X)
        <a id="change">if </a>self.grad_method == &quotnes&quot:
            for x in seq:
                g<a id="change"> += </a>f(x) * (x - X)
        elif self.grad_method in [&quotsgd&quot, &quothess&quot]:
            for x in seq:
                g += (f(x) - f(X)) * (x - X)</code></pre><h3>After Change</h3><pre><code class='java'>
        seq = seq[1:]
        noise = seq.sub(X)

        g = <a id="change">f(seq, reduction=&quotnone&quot)[:, None, None, None].mul(</a>noise<a id="change">)</a>.sum(dim=0)
        if self.grad_method in [&quotsgd&quot, &quothess&quot]:
            g -= f(X) * noise.sum(dim=0)
        g /= len(seq) * self.sigma * self.sigma</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/bc3d366258b45942115b6b86ae8466dac52ac154#diff-6329d4702b9ac5d31d2825508b3b5a6c26f879bb018bf95db5b52d825768d67bL181' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108054659</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: bc3d366258b45942115b6b86ae8466dac52ac154</div><div id='time'> Time: 2020-06-30</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/optim/pgd.py</div><div id='m_class'> M Class Name: PGD</div><div id='n_method'> N Class Name: PGD</div><div id='m_method'> M Method Name: calc_seq(3)</div><div id='n_method'> N Method Name: calc_seq(3)</div><div id='m_parent_class'> M Parent Class: Optimizer</div><div id='n_parent_class'> N Parent Class: Optimizer</div><div id='m_file'> M File Name: trojanzoo/optim/pgd.py</div><div id='n_file'> N File Name: trojanzoo/optim/pgd.py</div><div id='m_start'> M Start Line: 182</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 182</div><div id='n_end'> N End Line: 189</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super(FixedRevRNN, self).__init__()
        if input_count &lt;= 0:
            raise UserWarning("No input count given")
        <a id="change">if </a>hidden_features % 2:
            raise UserWarning(f"Ignoring uneven hidden feature and proceeding as if equal {hidden_features // 2 * 2}")

        self.return_sequences = return_sequences
        self.delay = delay
        self.input_count = input_count

        hidden_features<a id="change"> = </a>hidden_features // 2
        self.hidden_features = hidden_features

        self.linear_param0 = torch.nn.Parameter(torch.zeros((depth, 3 * hidden_features, hidden_features)))</code></pre><h3>After Change</h3><pre><code class='java'>
        self.linear_param0 = torch.nn.Parameter(torch.zeros((depth, 3 * hidden_features, hidden_features)))
        self.linear_param1 = torch.nn.Parameter(torch.zeros((depth, 3 * hidden_features, hidden_features)))
        self.out_linear = torch.nn.Parameter(torch.randn((1, 2 * hidden_features, out_features)))
        self.embedding = torch.nn.Parameter(<a id="change">torch.randn((input_cases, hidden_features)).mul(</a>0.004<a id="change">)</a>)

        for idx in range(depth):
            for sub_idx in range(3):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/homebrewnlp/homebrewnlp/commit/e6bfdfa67ff9b5477696711d7d570685448ee141#diff-c98bba8dbdd18eb4e9fa8ae11c28e350c08ee816fce50f9fb86d61cbcd345276L87' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108054655</div><div id='project'> Project Name: homebrewnlp/homebrewnlp</div><div id='commit'> Commit Name: e6bfdfa67ff9b5477696711d7d570685448ee141</div><div id='time'> Time: 2021-06-20</div><div id='author'> Author: 39779310+ClashLuke@users.noreply.github.com</div><div id='file'> File Name: module.py</div><div id='m_class'> M Class Name: FixedRevRNN</div><div id='n_method'> N Class Name: FixedRevRNN</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: module.py</div><div id='n_file'> N File Name: module.py</div><div id='m_start'> M Start Line: 101</div><div id='m_end'> M End Line: 127</div><div id='n_start'> N Start Line: 109</div><div id='n_end'> N End Line: 132</div><BR>