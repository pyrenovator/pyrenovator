<html><h3>Pattern ID :19578
</h3><img src='63941631.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    analysis.benchmark_results = [performance_summary]
    summary = analysis.summary()

    <a id="change">summary["MODEL"]</a> = model_path
    _display_summary_as_table(summary)

    if save:</code></pre><h3>After Change</h3><pre><code class='java'>
    by_layers: bool = convert_to_bool(by_layers)

    analysis.benchmark_results = [performance_summary]
    summary = <a id="change">analysis.summary(
        by_types=by_types,
        by_layers=by_layers,
    )</a>
    summary.pretty_print()

    if compare is not None:
        if "," in compare:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/f9c812958895f509c2c6c0194b839cb47c2faed8#diff-e476fb1c5e0f0162e9b4600c452f43c3878b345b117b6ceaa3e0d75bdcf9802bL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63941631</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: f9c812958895f509c2c6c0194b839cb47c2faed8</div><div id='time'> Time: 2023-04-19</div><div id='author'> Author: rahul@neuralmagic.com</div><div id='file'> File Name: src/deepsparse/analyze.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(7)</div><div id='n_method'> N Method Name: main(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/deepsparse/analyze.py</div><div id='n_file'> N File Name: src/deepsparse/analyze.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 122</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        _profiler_options = ProfilerOptions(options_str)

    if _profiler_step_id == _profiler_options["batch_range"][0]:
        paddle.utils.profiler.start_profiler(_profiler_options["state"], <a id="change">_profiler_options["tracer_option"]</a>)
    elif _profiler_step_id == _profiler_options["batch_range"][1]:
        paddle.utils.profiler.stop_profiler(_profiler_options["sorted_key"], _profiler_options["profile_path"])
        if _profiler_options["exit_on_finished"]:</code></pre><h3>After Change</h3><pre><code class='java'>

    if _profiler_step_id == _profiler_options["batch_range"][1]:
        _prof.stop()
        <a id="change">_prof.summary(op_detail=True, thread_sep=False, time_unit="ms")</a>
        _prof = None
        if _profiler_options["exit_on_finished"]:
            sys.exit(0)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/e274c447b22e06fa834c7095bedda937bf0ac7cc#diff-be8bfdac2479bb9c8bce4dc3960111f6ba4511e27ecb38ce5e36cc81fffdb112L79' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63941630</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: e274c447b22e06fa834c7095bedda937bf0ac7cc</div><div id='time'> Time: 2023-06-07</div><div id='author'> Author: 38800877+mmglove@users.noreply.github.com</div><div id='file'> File Name: paddlenlp/utils/profiler.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: add_profiler_step(1)</div><div id='n_method'> N Method Name: add_profiler_step(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: paddlenlp/utils/profiler.py</div><div id='n_file'> N File Name: paddlenlp/utils/profiler.py</div><div id='m_start'> M Start Line: 98</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 124</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                print(layer_index, &quot &quot, number_of_filters)

            model = self.batchnorm_modify(model)
            if <a id="change">env[&quotdevice&quot]</a> is &quotcuda&quot:
                self.model = model.cuda()
            print(&quotAfter fine-tuning, the performance of model:&quot)
            self.attack.validate_func()</code></pre><h3>After Change</h3><pre><code class='java'>
            model = self.batchnorm_modify(model)
            print(&quotAfter fine-tuning, the performance of model:&quot)
            self.attack.validate_func()
            <a id="change">model.summary(depth=5, verbose=True)</a>
        self.model._train(loader_train=self.clean_dataloader, suffix=&quot_fine_pruning&quot, **kwargs)
        self.attack.validate_func()

    def prune_conv_layer(self, model, layer_index: int, channel_list: List[int]):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/2c7f3682ae92a833ce2f3432fa643322eb2bbae5#diff-c3fcaa1c628e6b9b55c23cd420580d65ec905c1e0e441e733d799b6093833046L283' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63941627</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 2c7f3682ae92a833ce2f3432fa643322eb2bbae5</div><div id='time'> Time: 2020-09-06</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/defense/backdoor/fine_pruning.py</div><div id='m_class'> M Class Name: Fine_Pruning</div><div id='n_method'> N Class Name: Fine_Pruning</div><div id='m_method'> M Method Name: detect(1)</div><div id='n_method'> N Method Name: detect(1)</div><div id='m_parent_class'> M Parent Class: Defense_Backdoor</div><div id='n_parent_class'> N Parent Class: Defense_Backdoor</div><div id='m_file'> M File Name: trojanzoo/defense/backdoor/fine_pruning.py</div><div id='n_file'> N File Name: trojanzoo/defense/backdoor/fine_pruning.py</div><div id='m_start'> M Start Line: 286</div><div id='m_end'> M End Line: 328</div><div id='n_start'> N Start Line: 198</div><div id='n_end'> N End Line: 211</div><BR>