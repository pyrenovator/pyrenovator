<html><h3>Pattern ID :10338
</h3><img src='36303857.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def forward(self):
        &#47&#47 fmt:off
        return torch.sum([mod.forward() for mod in self.modulated_modules], dim=0) / \
               torch.sum(<a id="change">[mod.modulation for mod in self.modulated_modules]</a>, dim=0)
        &#47&#47 fmt:on
</code></pre><h3>After Change</h3><pre><code class='java'>
            try:
                weight += mod.modulation[mod.index % len(mod.modulation)]
                if average is None:
                    average = <a id="change">mod.forward()</a>.squeeze()
                else:
                    average += mod.forward().squeeze()
            except Exception as e:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maua-maua-maua/maua/commit/6783d3cf23d04c9690a519d8d0de3f450241328f#diff-9023d949ab106bd07225f00ec7713d7b74cbc52776a6a15ed08bd08243a8ecc2L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36303857</div><div id='project'> Project Name: maua-maua-maua/maua</div><div id='commit'> Commit Name: 6783d3cf23d04c9690a519d8d0de3f450241328f</div><div id='time'> Time: 2022-01-27</div><div id='author'> Author: hans@brouwer.work</div><div id='file'> File Name: maua/audiovisual/patches/primitives/merge.py</div><div id='m_class'> M Class Name: ModulationSum</div><div id='n_method'> N Class Name: ModulationSum</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: maua/audiovisual/patches/primitives/merge.py</div><div id='n_file'> N File Name: maua/audiovisual/patches/primitives/merge.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    with flow:
        resp = flow.post(
            endpoint,
            <a id="change">[Document() for _ in range(10)]</a>,
            return_results=True,
            port_expose=port_expose,
        )</code></pre><h3>After Change</h3><pre><code class='java'>
    config_path = os.environ[&quotKUBECONFIG&quot]
    import portforward

    with <a id="change">portforward.forward(
        </a>namespace, gateway_pod_name, flow.port_expose, flow.port_expose, config_path<a id="change">
    )</a>:
        client_kwargs = dict(
            host=&quotlocalhost&quot,
            port=flow.port_expose,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/6e9e7ef32f61cab04c6efc7a9f21659d26b50fdb#diff-e3067955c9efade1423c6e293462d207495c677d07e360b0040731f7f39b7c2dL10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36303858</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 6e9e7ef32f61cab04c6efc7a9f21659d26b50fdb</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: tests/k8s/test_k8s.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_test(4)</div><div id='n_method'> N Method Name: run_test(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/k8s/test_k8s.py</div><div id='n_file'> N File Name: tests/k8s/test_k8s.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 110</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        "psnr (↑)": np.mean([PSNR(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "mse (↓)": np.mean([MSE(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "mae (↓)": np.mean([MAE(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "lpips (↓)": np.mean(<a id="change">[LPIPS(p, t).item() for p, t in zip(pred_torch, target_torch)]</a>),
        "fvd (↓)": FVD(device=pred.device, num_frames=t, in_channels=c).forward(pred, target).item()
    }
</code></pre><h3>After Change</h3><pre><code class='java'>
        "psnr (↑)": np.mean([PSNR(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "mse (↓)": np.mean([MSE(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "mae (↓)": np.mean([MAE(p, t) for p, t in zip(pred_numpy, target_numpy)]),
        "lpips (↓)": <a id="change">LPIPS(device=pred.device).forward(</a>pred, target<a id="change">)</a>.item(),
        "fvd (↓)": FVD(device=pred.device, num_frames=t, in_channels=c).forward(pred, target).item()
    }
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ais-bonn/vp-suite/commit/215a490b9ebc55a666a39d0d8a94479e623b037e#diff-5cc534219862ac47a670dfcce12c7b66e12e6f8f7d59c1ef85e37903d2bd0c22L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36303861</div><div id='project'> Project Name: ais-bonn/vp-suite</div><div id='commit'> Commit Name: 215a490b9ebc55a666a39d0d8a94479e623b037e</div><div id='time'> Time: 2021-09-21</div><div id='author'> Author: boltres@ais.uni-bonn.de</div><div id='file'> File Name: metrics/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_prediction_metrics(2)</div><div id='n_method'> N Method Name: get_prediction_metrics(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: metrics/main.py</div><div id='n_file'> N File Name: metrics/main.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        The lenght of the list is the number of filtrations.
         
        filtered_v_ = self.filtration(x)
        persistences = <a id="change">[ batch_persistence_routine(filtered_v_[:,f_idx],batch) for f_idx in range(self.num_filtrations) ]</a>

        return persistences

    def compute_coord_fun(self,persistence):</code></pre><h3>After Change</h3><pre><code class='java'>
        Returns the persistence pairs as a list of tensors with shape [X.shape[0],2].
        The lenght of the list is the number of filtrations.
         
        filtered_v_ = torch.cat([<a id="change">filtration_mod.forward(</a>x<a id="change">)</a> for filtration_mod in self.filtration_modules],1)


        persistence0 = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/borgwardtlab/togl/commit/f0fa4ac47f01f60b198030ca2c427ba0012e6167#diff-5c74afe0967fb08193479f4bf1ac7b63c6ccf9f97b77b7f5514b0e823d146a07L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36303860</div><div id='project'> Project Name: borgwardtlab/togl</div><div id='commit'> Commit Name: f0fa4ac47f01f60b198030ca2c427ba0012e6167</div><div id='time'> Time: 2021-01-15</div><div id='author'> Author: edward.debrouwer@gmail.com</div><div id='file'> File Name: topognn/models.py</div><div id='m_class'> M Class Name: TopologyLayer</div><div id='n_method'> N Class Name: TopologyLayer</div><div id='m_method'> M Method Name: compute_persistence(3)</div><div id='n_method'> N Method Name: compute_persistence(3)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: topognn/models.py</div><div id='n_file'> N File Name: topognn/models.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 84</div><BR>