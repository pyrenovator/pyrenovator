<html><h3>Pattern ID :22997
</h3><img src='72974893.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            section_to_spacy_doc[section] = spacy_doc
            section_to_ents_by_char_index[section] = {
                k: set(v)
                for k, v in <a id="change">sort_then_group(
                    </a>filter(lambda x: len(x.spans) == 1, section.entities)<a id="change">,
                    key_func=lambda x: (
                        x.start,
                        x.end,
                    ),
                )</a>
            }
        return long_to_short_candidates, section_to_ents_by_char_index, section_to_spacy_doc
</code></pre><h3>After Change</h3><pre><code class='java'>
            long_to_short_candidates.extend(filter_matches(section, matches_no_brackets, spacy_doc))
            section_to_spacy_doc[section] = spacy_doc
            for ent in section.entities:
                <a id="change">if len(ent.spans) == 1</a>:
                    section_to_ents_by_char_index[section][(ent.start, ent.end)].add(ent)

        return long_to_short_candidates, section_to_ents_by_char_index, section_to_spacy_doc</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/a8708b46d96e0a5f6010356e62e67981b3de0d06#diff-94e6d7dd9cd21cb360499fb8f7a0aff1e05b347371147ce1f0f5c2e91f670800L352' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72974893</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: a8708b46d96e0a5f6010356e62e67981b3de0d06</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/utils/abbreviation_detector.py</div><div id='m_class'> M Class Name: KazuAbbreviationDetector</div><div id='n_method'> N Class Name: KazuAbbreviationDetector</div><div id='m_method'> M Method Name: _find_candidates_and_index_sections(2)</div><div id='n_method'> N Method Name: _find_candidates_and_index_sections(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/utils/abbreviation_detector.py</div><div id='n_file'> N File Name: kazu/utils/abbreviation_detector.py</div><div id='m_start'> M Start Line: 352</div><div id='m_end'> M End Line: 369</div><div id='n_start'> N Start Line: 352</div><div id='n_end'> N End Line: 366</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                    )
                                )

        for source, tup_iter in <a id="change">sort_then_group(</a>things_to_map<a id="change">, key_func=lambda x: x[0])</a>:
            source_choice = dom.createElement("Choice")
            source_choice.setAttribute("value", source)
            taxonomy.appendChild(source_choice)</code></pre><h3>After Change</h3><pre><code class='java'>
                            else:
                                source, label_and_idx = tax[0], tax[1]
                                source_choice = source_to_choice_element.get(source)
                                <a id="change">if source_choice is None</a>:
                                    source_choice = dom.createElement("Choice")
                                    source_choice.setAttribute("value", source)
                                    taxonomy.appendChild(source_choice)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/69c93bd99338bc66d7899f25aee683d259366aee#diff-01fce6e72ff30d060715fa8c8a05f6e95a0222669fb503988ae3ddc87e380481L306' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72974895</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 69c93bd99338bc66d7899f25aee683d259366aee</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_class'> M Class Name: LabelStudioAnnotationView</div><div id='n_method'> N Class Name: LabelStudioAnnotationView</div><div id='m_method'> M Method Name: build_taxonomy(4)</div><div id='n_method'> N Method Name: build_taxonomy(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/modelling/annotation/label_studio.py</div><div id='n_file'> N File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_start'> M Start Line: 313</div><div id='m_end'> M End Line: 346</div><div id='n_start'> N Start Line: 313</div><div id='n_end'> N End Line: 335</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        for is_region, result_iter in sort_then_group(result, key_func=lambda x: "id" in x):
            if is_region:
                for region_id, region_result_data in <a id="change">sort_then_group(
                    </a>result_iter<a id="change">, key_func=lambda x: x["id"]
                )</a>:
                    for result_data in region_result_data:
                        data_type = result_data["type"]
                        span = CharSpan(</code></pre><h3>After Change</h3><pre><code class='java'>
        self.non_contig_regions = set()

        for result_data in result:
            is_region = <a id="change">"id" in result_data</a>
            <a id="change">if </a>is_region:
                region_id = result_data["id"]
                data_type = result_data["type"]
                span = CharSpan(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/befef05f8aff69137bc27545da0e1b9a0dde4525#diff-01fce6e72ff30d060715fa8c8a05f6e95a0222669fb503988ae3ddc87e380481L136' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72974894</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: befef05f8aff69137bc27545da0e1b9a0dde4525</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_class'> M Class Name: LSToKazuConversion</div><div id='n_method'> N Class Name: LSToKazuConversion</div><div id='m_method'> M Method Name: _populate_lookups(2)</div><div id='n_method'> N Method Name: _populate_lookups(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/modelling/annotation/label_studio.py</div><div id='n_file'> N File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_start'> M Start Line: 146</div><div id='m_end'> M End Line: 177</div><div id='n_start'> N Start Line: 146</div><div id='n_end'> N End Line: 174</div><BR>