<html><h3>Pattern ID :28068
</h3><img src='83018274.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.id_to_charspan: Dict[str, CharSpan] = {}
        self.id_to_labels: Dict[str, Set[str]] = defaultdict(set)
        self.non_contig_span_to_labels: Dict[CharSpan, Set[str]] = defaultdict(set)
        self.id_to_contig_mappings<a id="change">: Dict[str, Set[Mapping]] = </a><a id="change">defaultdict(</a>set<a id="change">)</a>
        self.id_to_noncontig_mappings: Dict[str, Set[Mapping]] = defaultdict(set)
        self.non_contig_id_map: Dict[str, Set[str]] = defaultdict(set)

        self.id_is_contig: Dict[str, bool] = {}</code></pre><h3>After Change</h3><pre><code class='java'>
            else:
                for result_data in result_iter:
                    self.non_contig_id_map[result_data["from_id"]].add(result_data["to_id"])
                    <a id="change">self.non_contig_regions.add(</a>result_data["from_id"]<a id="change">)</a>
                    self.non_contig_regions.add(result_data["to_id"])

    def create_section(self) -&gt; Section:
        section = Section(text=self.text, name=self.task_data_id)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/4f44a945cc04e7bdb19ad299030def5f596bd6d5#diff-01fce6e72ff30d060715fa8c8a05f6e95a0222669fb503988ae3ddc87e380481L133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83018274</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 4f44a945cc04e7bdb19ad299030def5f596bd6d5</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_class'> M Class Name: LSToKazuConversion</div><div id='n_method'> N Class Name: LSToKazuConversion</div><div id='m_method'> M Method Name: _populate_lookups(2)</div><div id='n_method'> N Method Name: _populate_lookups(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/modelling/annotation/label_studio.py</div><div id='n_file'> N File Name: kazu/modelling/annotation/label_studio.py</div><div id='m_start'> M Start Line: 236</div><div id='m_end'> M End Line: 272</div><div id='n_start'> N Start Line: 133</div><div id='n_end'> N End Line: 167</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 We use the "__all__" key to specify aggregations
        &#47&#47 that will be performed on all (non-key) columns.
        self.list_aggs = defaultdict(list)
        self.conv_aggs<a id="change"> = </a><a id="change">defaultdict(</a>list<a id="change">)</a>
        if isinstance(aggs, str):
            aggs = {"__all__": [aggs]}
        elif isinstance(aggs, list):
            aggs = {"__all__": aggs}</code></pre><h3>After Change</h3><pre><code class='java'>
            _conv_aggs, _list_aggs = set(), set()
            for _agg in _aggs:
                if _is_list_agg(_agg):
                    <a id="change">_list_aggs.add(</a>"list" if _agg == list else _agg<a id="change">)</a>
                    _conv_aggs.add(list)
                else:
                    _conv_aggs.add(_agg)
            self.conv_aggs[col] = list(_conv_aggs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nvidia/nvtabular/commit/66223fbc425e8e5d3df93dee8363879cccb11413#diff-294fd1ba8d593bffcd7e008bbe28927a75ba431979834b293a3a71d697ed616fL66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83018272</div><div id='project'> Project Name: nvidia/nvtabular</div><div id='commit'> Commit Name: 66223fbc425e8e5d3df93dee8363879cccb11413</div><div id='time'> Time: 2021-04-06</div><div id='author'> Author: rzamora217@gmail.com</div><div id='file'> File Name: nvtabular/ops/groupby.py</div><div id='m_class'> M Class Name: Groupby</div><div id='n_method'> N Class Name: Groupby</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Operator</div><div id='n_parent_class'> N Parent Class: Operator</div><div id='m_file'> M File Name: nvtabular/ops/groupby.py</div><div id='n_file'> N File Name: nvtabular/ops/groupby.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 79</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def disambiguate(
        self, id_sets: Set[EquivalentIdSet], document: Document, parser_name: str
    ) -&gt; Set[EquivalentIdSet]:
        score_to_id_set = <a id="change">defaultdict(</a>set<a id="change">)</a>
        for id_set in id_sets:
            for idx in id_set.ids:
                score = self.metadata_db.get_by_idx(parser_name, idx).get("annotation_score", 0)
                score_to_id_set[score].add(id_set)
        best<a id="change"> = </a>max(score_to_id_set.keys())

        return score_to_id_set[best]
</code></pre><h3>After Change</h3><pre><code class='java'>
                    best_score = score
                    best_equiv_id_sets = {id_set}
                elif score == best_score:
                    <a id="change">best_equiv_id_sets.add(</a>id_set<a id="change">)</a>
        
        return best_equiv_id_sets
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/00f77e236450d45e2925ea5fb47755dbc07a6295#diff-91c409429f6151621c60384fdd45600fec02a4dae7c7039b8e72bdbad2a078e7L226' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83018280</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 00f77e236450d45e2925ea5fb47755dbc07a6295</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: RichJackson@users.noreply.github.com</div><div id='file'> File Name: kazu/steps/linking/post_processing/disambiguation/strategies.py</div><div id='m_class'> M Class Name: AnnotationLevelDisambiguationStrategy</div><div id='n_method'> N Class Name: AnnotationLevelDisambiguationStrategy</div><div id='m_method'> M Method Name: disambiguate(4)</div><div id='n_method'> N Method Name: disambiguate(4)</div><div id='m_parent_class'> M Parent Class: DisambiguationStrategy</div><div id='n_parent_class'> N Parent Class: DisambiguationStrategy</div><div id='m_file'> M File Name: kazu/steps/linking/post_processing/disambiguation/strategies.py</div><div id='n_file'> N File Name: kazu/steps/linking/post_processing/disambiguation/strategies.py</div><div id='m_start'> M Start Line: 229</div><div id='m_end'> M End Line: 236</div><div id='n_start'> N Start Line: 229</div><div id='n_end'> N End Line: 241</div><BR>