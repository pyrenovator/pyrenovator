<html><h3>Pattern ID :34152
</h3><img src='97539472.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    args.n_gpu = torch.cuda.device_count()

    set_seed(args)
    args.model_type = <a id="change">args.model_type.lower()</a>

    if args.n_gpu &gt; 1:
        if args.input_file is None:
            raise ValueError(&quotCannot use multiple GPUs when reading from stdin. You should provide an --input_file&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 bart and mbart share the same config
        &#47&#47 check which model we are actually using
        if args.model_type == &quotbart&quot:
            <a id="change">if </a><a id="change">config.normalize_before and config.add_final_layer_norm and config.scale_embedding</a>:
                args.model_type = &quotmbart&quot
    else:
        raise ValueError(&quotModel should be either GPT2, BART, or MBART&quot)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/f8b83686800672a7a980986cb6fb7d4b63802acb#diff-de31570d158d9fc989a3d6319905880ffc88335e5b475b35a267f19580a38c71L116' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97539472</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: f8b83686800672a7a980986cb6fb7d4b63802acb</div><div id='time'> Time: 2020-05-13</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/paraphrase/run_generation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/paraphrase/run_generation.py</div><div id='n_file'> N File Name: genienlp/paraphrase/run_generation.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 144</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 131</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
class ImageFileWriter:
    def __init__(self, root_directory, output_format="nrrd", filename_format="{key}"):
        self.root_directory = root_directory
        self.output_format = <a id="change">output_format.lower()</a>
        self.filename_format = filename_format
        self.writer = sitk.ImageFileWriter()

    def add(self, key, image):</code></pre><h3>After Change</h3><pre><code class='java'>
        self.root_directory = root_directory
        self.filename_format = filename_format
        self.writer = sitk.ImageFileWriter()
        <a id="change">if </a><a id="change">create_dirs and not os.path.exists(self.root_directory)</a>:
            os.makedirs(self.root_directory)

    def add(self, key, image):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bhklab/med-imagetools/commit/5fb8266c85e41ab0f9211f55567085fc3fd5035d#diff-babc06465a5acbad7ded2a0e57b3dadb9a075bcb3d27d4512d8b23b9fb95949eL10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97539488</div><div id='project'> Project Name: bhklab/med-imagetools</div><div id='commit'> Commit Name: 5fb8266c85e41ab0f9211f55567085fc3fd5035d</div><div id='time'> Time: 2020-02-27</div><div id='author'> Author: mkazmierski.poznan@gmail.com</div><div id='file'> File Name: imgtools/io/writers.py</div><div id='m_class'> M Class Name: ImageFileWriter</div><div id='n_method'> N Class Name: ImageFileWriter</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: imgtools/io/writers.py</div><div id='n_file'> N File Name: imgtools/io/writers.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 17</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for name, module in model.named_children():
            name = prefix + (&quot.&quot if prefix != &quot&quot else &quot&quot) + name
            &#47&#47 Do not recurse in children if we are skipping the module
            if <a id="change">module.__class__.__name__.lower()</a> in self.skip_layers:
                pass
            &#47&#47 Recurse into module if we are not skipping it but it is also not
            &#47&#47 a known module to KFAC</code></pre><h3>After Change</h3><pre><code class='java'>
                        module not in self.hook_layers):
                    self.register_module(module, name)
            &#47&#47 Recurse into module unless we are skipping it
            elif <a id="change">module_name not in self.skip_layers and module is not model</a>:
                self.register_modules(module, prefix=name)

    def register_shared_module(self, main_module, second_module, reverse_hooks=False):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gpauloski/kfac_pytorch/commit/34571cae966adae05f5c8e2b06f704d45255137f#diff-f8bd81130d2873ac040fb10d04553ccc9007feaa46af789f709e2f285e3859d2L273' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97539473</div><div id='project'> Project Name: gpauloski/kfac_pytorch</div><div id='commit'> Commit Name: 34571cae966adae05f5c8e2b06f704d45255137f</div><div id='time'> Time: 2020-09-18</div><div id='author'> Author: gpauloski@yahoo.com</div><div id='file'> File Name: kfac/preconditioner.py</div><div id='m_class'> M Class Name: KFAC</div><div id='n_method'> N Class Name: KFAC</div><div id='m_method'> M Method Name: register_modules(3)</div><div id='n_method'> N Method Name: register_modules(3)</div><div id='m_parent_class'> M Parent Class: optim.Optimizer</div><div id='n_parent_class'> N Parent Class: optim.Optimizer</div><div id='m_file'> M File Name: kfac/preconditioner.py</div><div id='n_file'> N File Name: kfac/preconditioner.py</div><div id='m_start'> M Start Line: 275</div><div id='m_end'> M End Line: 290</div><div id='n_start'> N Start Line: 275</div><div id='n_end'> N End Line: 287</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    fn_modules = [&quottrident.layers.tensorflow_activations&quot]
    try:
        if isinstance(fn_name,str):
            if <a id="change">fn_name.lower()</a>==fn_name:
                 activation_fn = get_function(fn_name, [&quottrident.layers.tensorflow_activations&quot] if fn_name in __all__ else  fn_modules)
                 return activation_fn
            else:</code></pre><h3>After Change</h3><pre><code class='java'>

    if fn_name is None:
        return None
    elif <a id="change">inspect.isclass(fn_name) and inspect._is_type(fn_name)</a>:
        return fn_name()
    elif isinstance(fn_name, Layer):
        return fn_name</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allanyiin/trident/commit/be0b3b73fa0bb531bd579b5341b36492ceb6a56e#diff-80d3ec078663dd63c91530f362e12e3df154d5ba1c8c0a4c8a1b4d51d6ddfe4aL501' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97539483</div><div id='project'> Project Name: allanyiin/trident</div><div id='commit'> Commit Name: be0b3b73fa0bb531bd579b5341b36492ceb6a56e</div><div id='time'> Time: 2020-07-12</div><div id='author'> Author: allan@asiaminer.com.tw</div><div id='file'> File Name: trident/layers/tensorflow_activations.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_activation(1)</div><div id='n_method'> N Method Name: get_activation(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: trident/layers/tensorflow_activations.py</div><div id='n_file'> N File Name: trident/layers/tensorflow_activations.py</div><div id='m_start'> M Start Line: 524</div><div id='m_end'> M End Line: 555</div><div id='n_start'> N Start Line: 568</div><div id='n_end'> N End Line: 590</div><BR>