<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 for k in topk:
        &#47&#47     correct_k = correct[:k].reshape(-1).float().sum(0, keepdim=True)
        &#47&#47     res.append(correct_k.mul_(100.0 / batch_size))
        correct_k = <a id="change">correct[:topk].reshape(</a>-1<a id="change">)</a>.float().sum(0, keepdim=True)
        res<a id="change"> = </a>correct_k.mul_(100.0 / batch_size).item()
        return res

</code></pre><h3>After Change</h3><pre><code class='java'>
    maxk = min(max(topk), output.size()[1])
    batch_size = target.size(0)
    _, pred = output.topk(maxk, 1, True, True)
    pred = <a id="change">pred.t()</a>
    correct = pred.eq(target.reshape(1, -1).expand_as(pred))
    return [
        (correct[: min(k, maxk)].reshape(-1).float().sum(0) * 100.0 / batch_size).item()
        for k in topk</code></pre>