<html><h3>Pattern ID :4820
</h3><img src='17031009.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                commit=False,
            )

            self.preds<a id="change"> = </a><a id="change">[]</a>
            self.targets = []
</code></pre><h3>After Change</h3><pre><code class='java'>
            plt.clf()

            self.preds.clear()
            <a id="change">self.targets.clear()</a>


class LogF1PrecRecHeatmapToWandb(Callback):
    Generate f1, precision, recall heatmap every epoch and send it to wandb.</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 9</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ashleve/lightning-hydra-template/commit/fca999f527f1af5718df190e2c746adfd91816b0#diff-ad20597cf878e462b5273854de77e9a1336babc559597a6b3affa28dfffb1e62L107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031009</div><div id='project'> Project Name: ashleve/lightning-hydra-template</div><div id='commit'> Commit Name: fca999f527f1af5718df190e2c746adfd91816b0</div><div id='time'> Time: 2021-03-22</div><div id='author'> Author: zalewski.ukas@gmail.com</div><div id='file'> File Name: src/callbacks/wandb_callbacks.py</div><div id='m_class'> M Class Name: LogConfusionMatrixToWandb</div><div id='n_method'> N Class Name: LogConfusionMatrixToWandb</div><div id='m_method'> M Method Name: on_validation_epoch_end(3)</div><div id='n_method'> N Method Name: on_validation_epoch_end(3)</div><div id='m_parent_class'> M Parent Class: Callback</div><div id='n_parent_class'> N Parent Class: Callback</div><div id='m_file'> M File Name: src/callbacks/wandb_callbacks.py</div><div id='n_file'> N File Name: src/callbacks/wandb_callbacks.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 136</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if not self.hook_registered:
            self._register_hook()

        self.hidden<a id="change"> = </a><a id="change">{}</a>
        _ = self.net(x)
        hidden = self.hidden[x.device]

        assert hidden is not None, f&quothidden layer {self.layer} never emitted an output&quot</code></pre><h3>After Change</h3><pre><code class='java'>
        self.hidden.clear()
        _ = self.net(x)
        hidden = self.hidden[x.device]
        <a id="change">self.hidden.clear()</a>

        assert hidden is not None, f&quothidden layer {self.layer} never emitted an output&quot
        return hidden
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/byol-pytorch/commit/88a9d9d2e4edb1c1a314bf5fce12ae1db981b7bc#diff-634b8e50f9d844f9fc0d58d0b93adf9747b3dec7684595b6e2a67054b369381cL133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031008</div><div id='project'> Project Name: lucidrains/byol-pytorch</div><div id='commit'> Commit Name: 88a9d9d2e4edb1c1a314bf5fce12ae1db981b7bc</div><div id='time'> Time: 2021-02-13</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: byol_pytorch/byol_pytorch.py</div><div id='m_class'> M Class Name: NetWrapper</div><div id='n_method'> N Class Name: NetWrapper</div><div id='m_method'> M Method Name: get_representation(2)</div><div id='n_method'> N Method Name: get_representation(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: byol_pytorch/byol_pytorch.py</div><div id='n_file'> N File Name: byol_pytorch/byol_pytorch.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _valid_epoch(self, data_loader, model, use_cuda, total_batch, verbose, criterion):
        model.train(False)
        total_loss = []
        total_acc<a id="change"> = </a><a id="change">[]</a>
        cnt = 0
        loc_size = model.loc_size
        for batch in data_loader:
            batch.to_tensor(gpu=use_cuda)</code></pre><h3>After Change</h3><pre><code class='java'>

    def _valid_epoch(self, data_loader, model, use_cuda, total_batch, verbose, criterion):
        model.train(False)
        <a id="change">self.evaluator.clear()</a>
        total_loss = []
        cnt = 0
        for batch in data_loader:
            batch.to_tensor(gpu=use_cuda)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/libcity/bigscity-libcity/commit/51403f094fe439b6470cf8b36665bff72f09fddd#diff-3b0408c84ea1982a6fe3d842dd9eff33a8bba27ca54ad0f448b9f8ae7b2c38e4L132' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17030999</div><div id='project'> Project Name: libcity/bigscity-libcity</div><div id='commit'> Commit Name: 51403f094fe439b6470cf8b36665bff72f09fddd</div><div id='time'> Time: 2020-12-23</div><div id='author'> Author: 33283819+WenMellors@users.noreply.github.com</div><div id='file'> File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='m_class'> M Class Name: TrajLocPredExecutor</div><div id='n_method'> N Class Name: TrajLocPredExecutor</div><div id='m_method'> M Method Name: _valid_epoch(7)</div><div id='n_method'> N Method Name: _valid_epoch(7)</div><div id='m_parent_class'> M Parent Class: AbstractExecutor</div><div id='n_parent_class'> N Parent Class: AbstractExecutor</div><div id='m_file'> M File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='n_file'> N File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='m_start'> M Start Line: 135</div><div id='m_end'> M End Line: 149</div><div id='n_start'> N Start Line: 131</div><div id='n_end'> N End Line: 149</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def clear_trace():
    _FUNC_TRACES<a id="change"> = </a><a id="change">{}</a>  &#47&#47 noqa: F841


def get_trace(average=True, max_history=None):</code></pre><h3>After Change</h3><pre><code class='java'>


def clear_trace() -&gt; None:
    <a id="change">_func_traces.clear()</a>


def get_trace(
    average: bool = True,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gpauloski/kfac_pytorch/commit/bd21ac7cebe30f20c93f4c1bedc748daf5bf28b5#diff-f3d8b9b7a758fdf3d7f76768f689106f62914ad702223f112e63b72b618349b4L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17030997</div><div id='project'> Project Name: gpauloski/kfac_pytorch</div><div id='commit'> Commit Name: bd21ac7cebe30f20c93f4c1bedc748daf5bf28b5</div><div id='time'> Time: 2022-03-17</div><div id='author'> Author: 18683347+gpauloski@users.noreply.github.com</div><div id='file'> File Name: kfac/tracing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: clear_trace(0)</div><div id='n_method'> N Method Name: clear_trace(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kfac/tracing.py</div><div id='n_file'> N File Name: kfac/tracing.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 9</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 16</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    super().__del__()
  def _buffer(self):
    for cbuf in METAL.mtl_buffers_in_flight: cbuf.waitUntilCompleted()
    METAL.mtl_buffers_in_flight<a id="change"> = </a><a id="change">[]</a>
    return self._cl.contents().as_buffer(self._cl.length())

def unwrap(x):
  ret, err = x</code></pre><h3>After Change</h3><pre><code class='java'>
    super().__del__()
  def _buffer(self):
    for cbuf in METAL.mtl_buffers_in_flight: cbuf.waitUntilCompleted()
    <a id="change">METAL.mtl_buffers_in_flight.clear()</a>
    return self._cl.contents().as_buffer(self._cl.length())

def unwrap(x):
  ret, err = x</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/f3ac52aee8299580a332de157711183c388a6a62#diff-a87b76b2087a0e2eb4930ea87f1e4881eb7766a5e6efc6b0e9a35d5b6c2ef011L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031002</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: f3ac52aee8299580a332de157711183c388a6a62</div><div id='time'> Time: 2023-03-11</div><div id='author'> Author: 72895+geohot@users.noreply.github.com</div><div id='file'> File Name: tinygrad/runtime/ops_metal.py</div><div id='m_class'> M Class Name: RawMetalBuffer</div><div id='n_method'> N Class Name: RawMetalBuffer</div><div id='m_method'> M Method Name: _buffer(1)</div><div id='n_method'> N Method Name: _buffer(1)</div><div id='m_parent_class'> M Parent Class: RawBufferMapped</div><div id='n_parent_class'> N Parent Class: RawBufferMapped</div><div id='m_file'> M File Name: tinygrad/runtime/ops_metal.py</div><div id='n_file'> N File Name: tinygrad/runtime/ops_metal.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            torch.cuda.set_rng_state(gpu_rng_state, self.device)

    def clear_state(self):
        self.state<a id="change"> = </a><a id="change">{}</a>


class Partition(nn.Module):
    </code></pre><h3>After Change</h3><pre><code class='java'>
            torch.cuda.set_rng_state(gpu_rng_state, self.device)

    def clear_state(self):
        <a id="change">self.state.clear()</a>


class Partition(nn.Module):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/saareliad/ftpipe/commit/55224ec831718fea95aaf8e91b7137e31f3ae44a#diff-5299c467f1fb21b927ace6cbedce8e9d2c572b08ca25391924a15ffa7a0ccbdfL42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031007</div><div id='project'> Project Name: saareliad/ftpipe</div><div id='commit'> Commit Name: 55224ec831718fea95aaf8e91b7137e31f3ae44a</div><div id='time'> Time: 2019-12-01</div><div id='author'> Author: saareliad@campus.technion.ac.il</div><div id='file'> File Name: communication/partition.py</div><div id='m_class'> M Class Name: PartitionRngStasher</div><div id='n_method'> N Class Name: PartitionRngStasher</div><div id='m_method'> M Method Name: clear_state(1)</div><div id='n_method'> N Method Name: clear_state(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: communication/partition.py</div><div id='n_file'> N File Name: communication/partition.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 43</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            from contextlib import redirect_stdout
            with redirect_stdout(outfile):
                tmp_cfg = copy.deepcopy(self)
                tmp_cfg.cfg_check_funcs<a id="change"> = </a><a id="change">[]</a>
                print(tmp_cfg.dump())

        super(CN, self).freeze()
</code></pre><h3>After Change</h3><pre><code class='java'>
            from contextlib import redirect_stdout
            with redirect_stdout(outfile):
                tmp_cfg = copy.deepcopy(self)
                <a id="change">tmp_cfg.cfg_check_funcs.clear()</a>
                print(tmp_cfg.dump())

        super(CN, self).freeze()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/federatedscope/commit/6de2cc3278a86c7d3acce55ea77ee8dc536397a8#diff-465b38eef92bc5d008224b92c3369c4e6b7d53638c67f4185d7f44a8f27fee9aL85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031005</div><div id='project'> Project Name: alibaba/federatedscope</div><div id='commit'> Commit Name: 6de2cc3278a86c7d3acce55ea77ee8dc536397a8</div><div id='time'> Time: 2022-05-24</div><div id='author'> Author: gaodawei.gdw@alibaba-inc.com</div><div id='file'> File Name: federatedscope/core/configs/config.py</div><div id='m_class'> M Class Name: CN</div><div id='n_method'> N Class Name: CN</div><div id='m_method'> M Method Name: freeze(1)</div><div id='n_method'> N Method Name: freeze(1)</div><div id='m_parent_class'> M Parent Class: CfgNode</div><div id='n_parent_class'> N Parent Class: CfgNode</div><div id='m_file'> M File Name: federatedscope/core/configs/config.py</div><div id='n_file'> N File Name: federatedscope/core/configs/config.py</div><div id='m_start'> M Start Line: 97</div><div id='m_end'> M End Line: 98</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 126</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def _clear_runtime_cache():
    global _runtime_instances
    _runtime_instances<a id="change"> = </a><a id="change">{}</a>


def _get_runtime_home(runtime_type: str):
    load_config_home = _RUNTIME_HOMES.get(runtime_type)</code></pre><h3>After Change</h3><pre><code class='java'>


def _clear_runtime_cache():
    <a id="change">_runtime_instances.clear()</a>


def _get_runtime_home(runtime_type: str):
    load_config_home = _RUNTIME_HOMES.get(runtime_type)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/0147afa808f1d18ff5c1526f77d4d7986f988dce#diff-226adab3084efd174a880ac0a89f7f51182af25036931d05eaba7515cc789f7bL129' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17031004</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: 0147afa808f1d18ff5c1526f77d4d7986f988dce</div><div id='time'> Time: 2022-05-02</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/core/_private/runtime_factory.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _clear_runtime_cache(0)</div><div id='n_method'> N Method Name: _clear_runtime_cache(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/cloudtik/core/_private/runtime_factory.py</div><div id='n_file'> N File Name: python/cloudtik/core/_private/runtime_factory.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 131</div><div id='n_start'> N Start Line: 131</div><div id='n_end'> N End Line: 131</div><BR>