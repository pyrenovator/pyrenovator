<html><h3>Pattern ID :18642
</h3><img src='60850356.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def main():

    device = "cuda:0"<a id="change"> if </a>torch.cuda.is_available()<a id="change"> else </a>"cpu"

    &#47&#47 "facebook/opt-1.3b", "facebook/opt-350m" &#47&#47 "gpt2"
    checkpoint = "facebook/opt-350m" </code></pre><h3>After Change</h3><pre><code class='java'>
    parser.add_argument("--num-shards", default=2100,
                        help="Number of shards to create. WARNING: Don&quott change across runs on the same dataset.",
                        type=int)
    <a id="change">parser.add_argument("--shard-index"</a><a id="change">, default=0,
                        help="Particular shard to process. Must be less than num_shards",
                        type=int)</a>
    parser.add_argument("--batch-size", default=42,
                        help="Batch size for feature extraction.",
                        type=int)
    parser.add_argument("--gpuid", default=0,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/1f0a38e723b2db5c6bc6d461c0e1193ac22306bb#diff-b14430ca4603b5d26889ab14d1b19460688ad86c9c4d0aa195e6e89123d99150L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60850356</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: 1f0a38e723b2db5c6bc6d461c0e1193ac22306bb</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: dedey@microsoft.com</div><div id='file'> File Name: scripts/misc/hf_featurize.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/misc/hf_featurize.py</div><div id='n_file'> N File Name: scripts/misc/hf_featurize.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    parser.add_argument("--hf-token", default="true", type=str,
                        help=f"{argdoc.HF_TOKEN}. Defaults to &quottrue&quot (required by pyannote)")
    args = parser.parse_args()
    args.device = torch.device("cpu")<a id="change"> if </a>args.cpu<a id="change"> else </a>None
    args.hf_token = utils.parse_hf_token_arg(args.hf_token)

    &#47&#47 Download pyannote models (or get from cache)</code></pre><h3>After Change</h3><pre><code class='java'>
    parser.add_argument("--beta", default=10, type=float, help=f"{argdoc.BETA}. Defaults to 10")
    parser.add_argument("--max-speakers", default=20, type=int, help=f"{argdoc.MAX_SPEAKERS}. Defaults to 20")
    parser.add_argument("--batch-size", default=32, type=int, help=f"{argdoc.BATCH_SIZE}. Defaults to 32")
    <a id="change">parser.add_argument("--num-workers"</a><a id="change">, default=0, type=int,
                        help=f"{argdoc.NUM_WORKERS}. Defaults to 0 (no parallelism)")</a>
    parser.add_argument("--cpu", dest="cpu", action="store_true",
                        help=f"{argdoc.CPU}. Defaults to GPU if available, CPU otherwise")
    parser.add_argument("--output", type=Path, help=f"{argdoc.OUTPUT}. Defaults to no writing")
    parser.add_argument("--hf-token", default="true", type=str,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/juanmc2005/streamingspeakerdiarization/commit/e2c301a64f6a8be016f5842806de4c6fd7e70bbc#diff-798c8b11b0e5000f37a374b0ea3ef7b95460d84a7bcfad40ec44c9045df64710L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60850358</div><div id='project'> Project Name: juanmc2005/streamingspeakerdiarization</div><div id='commit'> Commit Name: e2c301a64f6a8be016f5842806de4c6fd7e70bbc</div><div id='time'> Time: 2023-03-10</div><div id='author'> Author: juanmc2005@hotmail.com</div><div id='file'> File Name: src/diart/benchmark.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(0)</div><div id='n_method'> N Method Name: run(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/diart/benchmark.py</div><div id='n_file'> N File Name: src/diart/benchmark.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                             &quot- Entity-span detection: ["O", "B-ENT", "I-ENT", "O", "B-ENT", "O", "B-ENT"]&quot)
    parser.add_argument(&quot--return-ci&quot, action=&quotstore_true&quot, help=&quotreturn confidence interval by bootstrap&quot)
    opt = parser.parse_args()
    level = logging.DEBUG<a id="change"> if </a>opt.debug<a id="change"> else </a>logging.INFO
    logging.basicConfig(format=&quot%(asctime)s %(levelname)-8s %(message)s&quot, level=level, datefmt=&quot%Y-%m-%d %H:%M:%S&quot)
    &#47&#47 train model
    model = TransformersNER(opt.model)</code></pre><h3>After Change</h3><pre><code class='java'>
                             &quot- NER                  : ["O", "B-PER", "I-PER", "O", "B-LOC", "O", "B-ORG"]&quot
                             &quot- Entity-span detection: ["O", "B-ENT", "I-ENT", "O", "B-ENT", "O", "B-ENT"]&quot)
    parser.add_argument(&quot--return-ci&quot, action=&quotstore_true&quot, help=&quotreturn confidence interval by bootstrap&quot)
    <a id="change">parser.add_argument(&quot-b&quot</a>, &quot--batch-size&quot<a id="change">, help=&quotbatch size&quot, default=32, type=int)</a>
    opt = parser.parse_args()

    &#47&#47 train model
    model = TransformersNER(opt.model)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/asahi417/tner/commit/9abb0915720c1f0eb11982a7c424fb5c3e1d98d5#diff-54da2f133ae1090719150eb625b70589dc503fa5d0714e200e6d6ec7cf93d059L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60850359</div><div id='project'> Project Name: asahi417/tner</div><div id='commit'> Commit Name: 9abb0915720c1f0eb11982a7c424fb5c3e1d98d5</div><div id='time'> Time: 2022-08-06</div><div id='author'> Author: asahi1992ushio@gmail.com</div><div id='file'> File Name: tner/tner_cl/evaluate.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tner/tner_cl/evaluate.py</div><div id='n_file'> N File Name: tner/tner_cl/evaluate.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 34</div><BR>