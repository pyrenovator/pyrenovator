<html><h3>Pattern ID :12527
</h3><img src='42499841.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    async def async_teardown(self):
        Shutdown the server.
        <a id="change">await </a><a id="change">self.cancel_warmup_task()</a>
        await self.gateway.streamer.close()
        await self.gateway.shutdown()
        await self.async_cancel()
</code></pre><h3>After Change</h3><pre><code class='java'>

    async def async_teardown(self):
        Shutdown the server.
        <a id="change">self.cancel_warmup_task()</a>
        await self.gateway.streamer.close()
        await self.gateway.shutdown()
        await self.async_cancel()
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/90b5f0317e1cb7b31be2d5f32527a18f8a89fd62#diff-bc9dca47fa1e353ab78b91275e744d96603a5af5e9491d148603f84f25445f9eL128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42499841</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 90b5f0317e1cb7b31be2d5f32527a18f8a89fd62</div><div id='time'> Time: 2023-02-13</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_class'> M Class Name: GatewayRuntime</div><div id='n_method'> N Class Name: GatewayRuntime</div><div id='m_method'> M Method Name: async_teardown(1)</div><div id='n_method'> N Method Name: async_teardown(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime</div><div id='m_file'> M File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 128</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 128</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    async def async_cancel(self):
        Stop the server.
        <a id="change">await </a><a id="change">self.cancel_warmup_task()</a>
        await self.gateway.streamer.close()
        await self.gateway.shutdown()

    async def async_run_forever(self):</code></pre><h3>After Change</h3><pre><code class='java'>

    async def async_cancel(self):
        Stop the server.
        <a id="change">self.cancel_warmup_task()</a>
        await self.gateway.streamer.close()
        await self.gateway.shutdown()

    async def async_run_forever(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/90b5f0317e1cb7b31be2d5f32527a18f8a89fd62#diff-bc9dca47fa1e353ab78b91275e744d96603a5af5e9491d148603f84f25445f9eL133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42499842</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 90b5f0317e1cb7b31be2d5f32527a18f8a89fd62</div><div id='time'> Time: 2023-02-13</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_class'> M Class Name: GatewayRuntime</div><div id='n_method'> N Class Name: GatewayRuntime</div><div id='m_method'> M Method Name: async_cancel(1)</div><div id='n_method'> N Method Name: async_cancel(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime</div><div id='m_file'> M File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_start'> M Start Line: 135</div><div id='m_end'> M End Line: 135</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 135</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    async def async_cancel(self):
        Stop the GRPC server
        self.logger.debug(&quotcancel HeadRuntime&quot)
        <a id="change">await </a><a id="change">self.cancel_warmup_task()</a>
        await self._grpc_server.stop(0)

    async def async_teardown(self):
        Close the connection pool</code></pre><h3>After Change</h3><pre><code class='java'>
    async def async_cancel(self):
        Stop the GRPC server
        self.logger.debug(&quotcancel HeadRuntime&quot)
        <a id="change">self.cancel_warmup_task()</a>
        await self._grpc_server.stop(0)

    async def async_teardown(self):
        Close the connection pool</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/e55ef900eef45fd1bba0fc25c7ad23f3c8c155c3#diff-18383395b80dbe709912b9e6d8d4e3a577e225b0ac65069537edddc384e968deL188' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42499843</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: e55ef900eef45fd1bba0fc25c7ad23f3c8c155c3</div><div id='time'> Time: 2023-02-24</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/runtimes/head/__init__.py</div><div id='m_class'> M Class Name: HeadRuntime</div><div id='n_method'> N Class Name: HeadRuntime</div><div id='m_method'> M Method Name: async_cancel(1)</div><div id='n_method'> N Method Name: async_cancel(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime,ABC</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime,ABC</div><div id='m_file'> M File Name: jina/serve/runtimes/head/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/head/__init__.py</div><div id='m_start'> M Start Line: 191</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 191</div><div id='n_end'> N End Line: 191</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    async def async_teardown(self):
        Close the connection pool
        <a id="change">await </a><a id="change">self.cancel_warmup_task()</a>
        await self._health_servicer.enter_graceful_shutdown()
        await self.async_cancel()
        await self.connection_pool.close()
</code></pre><h3>After Change</h3><pre><code class='java'>

    async def async_teardown(self):
        Close the connection pool
        <a id="change">self.cancel_warmup_task()</a>
        await self._health_servicer.enter_graceful_shutdown()
        await self.async_cancel()
        await self.connection_pool.close()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/e55ef900eef45fd1bba0fc25c7ad23f3c8c155c3#diff-18383395b80dbe709912b9e6d8d4e3a577e225b0ac65069537edddc384e968deL194' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42499844</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: e55ef900eef45fd1bba0fc25c7ad23f3c8c155c3</div><div id='time'> Time: 2023-02-24</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/runtimes/head/__init__.py</div><div id='m_class'> M Class Name: HeadRuntime</div><div id='n_method'> N Class Name: HeadRuntime</div><div id='m_method'> M Method Name: async_teardown(1)</div><div id='n_method'> N Method Name: async_teardown(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime,ABC</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime,ABC</div><div id='m_file'> M File Name: jina/serve/runtimes/head/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/head/__init__.py</div><div id='m_start'> M Start Line: 196</div><div id='m_end'> M End Line: 196</div><div id='n_start'> N Start Line: 196</div><div id='n_end'> N End Line: 196</div><BR>