<html><h3>Pattern ID :28551
</h3><img src='84408693.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        d: Dict = dict(data)
        guidance = d[self.guidance]
        discrepancy = d[self.discrepancy]
        weight_map = d[self.weight_map]<a id="change"> if self.weight_map is not None</a><a id="change"> else </a>None
        &#47&#47 Decide whether to add clicks or not
        self.randomize(data)
        if self._will_interact:</code></pre><h3>After Change</h3><pre><code class='java'>

            &#47&#47 Convert tmp_guidance back to json
            for key_label in d["label_names"].keys():
                d[self.guidance][key_label] = json.dumps(<a id="change">np.asarray(self.tmp_guidance[key_label]).astype(int).tolist()</a>)
            &#47&#47

        return d</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/project-monai/monailabel/commit/d406dc00dfce358803e7db6d0322beaecba6dd8a#diff-ed3b5072b42bd705c8ea626ad811a82b2a44dc745e40038ead07bd4d32e4f64bL609' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408693</div><div id='project'> Project Name: project-monai/monailabel</div><div id='commit'> Commit Name: d406dc00dfce358803e7db6d0322beaecba6dd8a</div><div id='time'> Time: 2021-11-08</div><div id='author'> Author: diazandr3s@gmail.com</div><div id='file'> File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_class'> M Class Name: PosNegClickProbAddRandomGuidanceCustomd</div><div id='n_method'> N Class Name: PosNegClickProbAddRandomGuidanceCustomd</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: MapTransform,Randomizable</div><div id='n_parent_class'> N Parent Class: MapTransform,Randomizable</div><div id='m_file'> M File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='n_file'> N File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_start'> M Start Line: 630</div><div id='m_end'> M End Line: 657</div><div id='n_start'> N Start Line: 609</div><div id='n_end'> N End Line: 641</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        lines = []
        &#47&#47 Sort words horizontally
        words = [words[j] for j in np.argsort(
            [boxes[i, 0, 0]<a id="change"> if len(boxes.shape) == 3</a><a id="change"> else </a>boxes[i, 0] for i in words]
        ).tolist()]
        &#47&#47 Eventually split line horizontally
        if len(words) &lt; 2:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        lines = []
        &#47&#47 Sort words horizontally
        word_idcs = [word_idcs[idx] for idx in <a id="change">boxes[word_idcs, 0].argsort().tolist()</a>]

        &#47&#47 Eventually split line horizontally
        if len(word_idcs) &lt; 2:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mindee/doctr/commit/1dc33749c4dda6645031f57e549c2408e7ba4365#diff-a7a219493709069488879983ad4d7369d4a0737a0c1a1c2c6b3dfd7977f855d8L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408690</div><div id='project'> Project Name: mindee/doctr</div><div id='commit'> Commit Name: 1dc33749c4dda6645031f57e549c2408e7ba4365</div><div id='time'> Time: 2021-12-29</div><div id='author'> Author: charles@mindee.co</div><div id='file'> File Name: doctr/models/builder.py</div><div id='m_class'> M Class Name: DocumentBuilder</div><div id='n_method'> N Class Name: DocumentBuilder</div><div id='m_method'> M Method Name: _resolve_sub_lines(3)</div><div id='n_method'> N Method Name: _resolve_sub_lines(3)</div><div id='m_parent_class'> M Parent Class: NestedObject</div><div id='n_parent_class'> N Parent Class: NestedObject</div><div id='m_file'> M File Name: doctr/models/builder.py</div><div id='n_file'> N File Name: doctr/models/builder.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return {
            "block_type": self._name,
            "block_attr": {
                key: getattr(self, key)<a id="change">
                if key != "points"</a><a id="change">
                else </a>getattr(self, key).reshape(-1).tolist()
                for key in self._features
            },
        }</code></pre><h3>After Change</h3><pre><code class='java'>
            }
        
        data = super().to_dict()
        data["points"] = <a id="change">data["points"].reshape(-1).tolist()</a>
        return data


ALL_BASECOORD_ELEMENTS = [Interval, Rectangle, Quadrilateral]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/layout-parser/layout-parser/commit/63b36bec8e10c65c761d56073eb6518719cd0c3b#diff-4b771a71a647de260e9dcc6d1d5fcad3df3f53862b0a1830ff6b930abd79195fL1290' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408689</div><div id='project'> Project Name: layout-parser/layout-parser</div><div id='commit'> Commit Name: 63b36bec8e10c65c761d56073eb6518719cd0c3b</div><div id='time'> Time: 2021-01-19</div><div id='author'> Author: 22512825+lolipopshock@users.noreply.github.com</div><div id='file'> File Name: src/layoutparser/elements.py</div><div id='m_class'> M Class Name: Quadrilateral</div><div id='n_method'> N Class Name: Quadrilateral</div><div id='m_method'> M Method Name: to_dict(1)</div><div id='n_method'> N Method Name: to_dict(1)</div><div id='m_parent_class'> M Parent Class: BaseCoordElement</div><div id='n_parent_class'> N Parent Class: BaseCoordElement</div><div id='m_file'> M File Name: src/layoutparser/elements.py</div><div id='n_file'> N File Name: src/layoutparser/elements.py</div><div id='m_start'> M Start Line: 1310</div><div id='m_end'> M End Line: 1318</div><div id='n_start'> N Start Line: 1308</div><div id='n_end'> N End Line: 1310</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def run_fi_calculation(model, dataset,  permutation_kwargs=None, force_permutation=False):
    task_type, observed_classes, model_classes = infer_task_type_and_classes(model, dataset)
    model_classes = model_classes<a id="change"> if model_classes is not None</a><a id="change"> else </a>observed_classes
    return _calculate_feature_importance(model=model, dataset=dataset, model_classes=model_classes,
                                         observed_classes=observed_classes, task_type=task_type,
                                         permutation_kwargs=permutation_kwargs, force_permutation=force_permutation)</code></pre><h3>After Change</h3><pre><code class='java'>

def run_fi_calculation(model, dataset, permutation_kwargs=None, force_permutation=False):
    labels = get_all_labels(model, dataset)
    observed_classes = sorted(<a id="change">labels.dropna().unique().tolist()</a>)
    model_classes = infer_classes_from_model(model)
    if dataset and dataset.label_type:
        task_type = dataset.label_type</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/f984ff43f5ae9cb4021de5e4c4e8296a8a13bd99#diff-06c692f241d07e28beac03f2a9230c857ce4ea285f779f0a4c66304b4f7e83dfL30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408699</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: f984ff43f5ae9cb4021de5e4c4e8296a8a13bd99</div><div id='time'> Time: 2023-01-15</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: tests/base/feature_importance_utils_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_fi_calculation(4)</div><div id='n_method'> N Method Name: run_fi_calculation(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/base/feature_importance_utils_test.py</div><div id='n_file'> N File Name: tests/base/feature_importance_utils_test.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                   &quot object.&quot)

    task_type, observed_classes, model_classes = infer_task_type_and_classes(model, dataset)
    model_classes = model_classes<a id="change"> if model_classes is not None</a><a id="change"> else </a>observed_classes
    fi, _ = _calculate_feature_importance(model=model,
                                          dataset=dataset,
                                          model_classes=model_classes,</code></pre><h3>After Change</h3><pre><code class='java'>

    model_classes = infer_classes_from_model(model)
    labels = get_all_labels(model, dataset)
    observed_classes = sorted(<a id="change">labels.dropna().unique().tolist()</a>)

    if dataset.label_type:
        task_type = dataset.label_type</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/f984ff43f5ae9cb4021de5e4c4e8296a8a13bd99#diff-6dcadacdfff9fbb86ff8a154cd9199eb1e91e4fd1bf42aba3dafe2b941643705L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408696</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: f984ff43f5ae9cb4021de5e4c4e8296a8a13bd99</div><div id='time'> Time: 2023-01-15</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: deepchecks/tabular/feature_importance.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calculate_feature_importance(7)</div><div id='n_method'> N Method Name: calculate_feature_importance(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/tabular/feature_importance.py</div><div id='n_file'> N File Name: deepchecks/tabular/feature_importance.py</div><div id='m_start'> M Start Line: 95</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 107</div><BR>