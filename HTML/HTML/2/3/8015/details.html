<html><h3>Pattern ID :8015
</h3><img src='28458514.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                with torch.no_grad():
                    &#47&#47HERE IS WHY B=1, T=1
                    &#47&#47 print(&quotEnv output shape: &quot,env_output[&quotframe&quot].shape)
                    agent_output<a id="change">, agent_state = </a><a id="change">model(</a>env_output, agent_state<a id="change">)</a>

                timings.time("model")

                env_output = env.step(agent_output["action"])</code></pre><h3>After Change</h3><pre><code class='java'>
                with torch.no_grad():
                    &#47&#47HERE IS WHY B=1, T=1
                    &#47&#47 print(&quotEnv output shape: &quot,env_output[&quotframe&quot].shape)
                    <a id="change">print(</a>&quotACTING&quot<a id="change">)</a>
                    agent_output, agent_state, mems = model(env_output, agent_state, mems)

                timings.time("model")
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jerrodparker20/adaptive-transformers-in-rl/commit/96eb1b83219edb2afdc69d403b6b9f77baa8854a#diff-e7806c09783bb947489c86c3d53067e349956e43f586009564c23515b667feb3L150' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28458514</div><div id='project'> Project Name: jerrodparker20/adaptive-transformers-in-rl</div><div id='commit'> Commit Name: 96eb1b83219edb2afdc69d403b6b9f77baa8854a</div><div id='time'> Time: 2020-03-13</div><div id='author'> Author: jerrodparker20@gmail.com</div><div id='file'> File Name: Model/monobeast.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: act(7)</div><div id='n_method'> N Method Name: act(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: Model/monobeast.py</div><div id='n_file'> N File Name: Model/monobeast.py</div><div id='m_start'> M Start Line: 150</div><div id='m_end'> M End Line: 177</div><div id='n_start'> N Start Line: 150</div><div id='n_end'> N End Line: 180</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            model.to(device)
            target_img_tensor.to(device)
            model.eval()
            out = <a id="change">model(</a>target_img_tensor<a id="change">)</a>
            &#47&#47 ps = torch.exp(out)
            ps = out
            prediction_percentages = (ps.cpu().numpy()[0]).tolist()
            pred<a id="change"> = </a>prediction_percentages.index(max(prediction_percentages))
            pred_labels.append(pred)
    show_roc(true_labels, pred_labels, auc=auc, figure_size=figure_size)
</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 ps = torch.exp(out)
            ps = out
            print(ps.shape)
            <a id="change">print (</a>ps<a id="change">)</a>
            &#47&#47 prediction_percentages = (ps.cpu().numpy()[0]).tolist()
            &#47&#47 pred = prediction_percentages.index(max(prediction_percentages))
            &#47&#47 pred_labels.append(pred)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/radtorch/radtorch/commit/74b5ef917af3aebdf033166bf8b81cbc9ceb9b6e#diff-ea0c5d78e98f3b87371717beabaf20a4c1a834cd943d71bad1e08f7fc9e04250L176' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28458498</div><div id='project'> Project Name: radtorch/radtorch</div><div id='commit'> Commit Name: 74b5ef917af3aebdf033166bf8b81cbc9ceb9b6e</div><div id='time'> Time: 2020-03-01</div><div id='author'> Author: elbanan@users.noreply.github.com</div><div id='file'> File Name: radtorch/visutils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: show_nn_roc(5)</div><div id='n_method'> N Method Name: show_nn_roc(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: radtorch/visutils.py</div><div id='n_file'> N File Name: radtorch/visutils.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 216</div><div id='n_start'> N Start Line: 201</div><div id='n_end'> N End Line: 215</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                step_size, tol=1e-3, iterations=None,
                store=None):
        model.eval()
        loss<a id="change"> = </a>-criterion(<a id="change">model(</a>data + self.delta<a id="change">)</a>, target)
        gap = torch.tensor(np.inf)
        ii = 0
        while gap.item() &gt; tol:</code></pre><h3>After Change</h3><pre><code class='java'>
        model.eval()
        ii = 0
        if "FW" in self.optimizer.name:
            <a id="change">print(</a>"FW"<a id="change">)</a>
            step_size = 0.

        gap = torch.tensor(np.inf)
        while gap.item() &gt; tol:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openopt/chop/commit/0352448fafdec6b6b2d408d6d6254e328e90d58a#diff-fa26eba9791d029adac1844664fe190c7085c2193ef5c988b2f3caa270382b59L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28458506</div><div id='project'> Project Name: openopt/chop</div><div id='commit'> Commit Name: 0352448fafdec6b6b2d408d6d6254e328e90d58a</div><div id='time'> Time: 2020-10-07</div><div id='author'> Author: geoffrey_negiar@berkeley.edu</div><div id='file'> File Name: constopt/adversary.py</div><div id='m_class'> M Class Name: Adversary</div><div id='n_method'> N Class Name: Adversary</div><div id='m_method'> M Method Name: perturb(9)</div><div id='n_method'> N Method Name: perturb(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: constopt/adversary.py</div><div id='n_file'> N File Name: constopt/adversary.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 43</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        with torch.no_grad():
            if args.mlm:
                outputs<a id="change"> = </a><a id="change">model(</a>inputs<a id="change">, masked_lm_labels=labels, position_ids=position_ids, token_type_ids=segment_ids)</a>
            else:
                if args.model_type == &quotbart&quot:
                    decoder_input_ids = labels[:, :-1].contiguous()
                    decoder_input_ids[decoder_input_ids == args.mlm_ignore_index] = tokenizer.pad_token_id</code></pre><h3>After Change</h3><pre><code class='java'>
            
            &#47&#47 debugging
            if args.debug:
                <a id="change">print()</a>
                print([tokenizer.decode(t, skip_special_tokens=True) for t in lm_logits.max(-1)[1]])
                
            assert lm_logits.shape[-1] == model.config.vocab_size
            </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/b84a6548a69fd9f62652eed1c74fd4b1fdb8b65b#diff-90e760d3065758cd3fed35d36be801cfed8d2418d888df295dbecdc933432ad7L293' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28458507</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: b84a6548a69fd9f62652eed1c74fd4b1fdb8b65b</div><div id='time'> Time: 2020-11-15</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: evaluate(5)</div><div id='n_method'> N Method Name: evaluate(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='n_file'> N File Name: genienlp/paraphrase/run_lm_finetuning.py</div><div id='m_start'> M Start Line: 318</div><div id='m_end'> M End Line: 344</div><div id='n_start'> N Start Line: 330</div><div id='n_end'> N End Line: 369</div><BR>