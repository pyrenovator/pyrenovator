<html><h3>Pattern ID :16566
</h3><img src='55772675.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        B, C, H, W = gcam.shape
        gcam = gcam.view(B, -1)
        gcam<a id="change"> -= </a><a id="change">gcam.min(dim=1, keepdim=True)</a>[0]
        gcam /= gcam.max(dim=1, keepdim=True)[0]
        gcam = gcam.view(B, C, H, W)
</code></pre><h3>After Change</h3><pre><code class='java'>
            grads = self._find(self.grad_pool, target_layer)
            weights = self._compute_grad_weights(grads)
            gcam_tensor = self.generate_helper(fmaps, weights)
            gcam = <a id="change">[]</a>
            for i in range(self.logits.shape[0]):
                gcam.append(gcam_tensor[i])

        return gcam</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/karol-g/gcam/commit/4d3673129f7f35d0b6ea05944a037268b4da45b2#diff-978485ec7cfb0b80eb5a414e89c1afc3b49e03fb985bcad877ce02e5af9cfe59L209' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55772675</div><div id='project'> Project Name: karol-g/gcam</div><div id='commit'> Commit Name: 4d3673129f7f35d0b6ea05944a037268b4da45b2</div><div id='time'> Time: 2020-01-02</div><div id='author'> Author: KarolGotkowski@gmx.de</div><div id='file'> File Name: evaluation_models/grad_cam/grad_cam.py</div><div id='m_class'> M Class Name: GradCAM</div><div id='n_method'> N Class Name: GradCAM</div><div id='m_method'> M Method Name: generate(2)</div><div id='n_method'> N Method Name: generate(2)</div><div id='m_parent_class'> M Parent Class: _BaseWrapper</div><div id='n_parent_class'> N Parent Class: _BaseWrapper</div><div id='m_file'> M File Name: evaluation_models/grad_cam/grad_cam.py</div><div id='n_file'> N File Name: evaluation_models/grad_cam/grad_cam.py</div><div id='m_start'> M Start Line: 209</div><div id='m_end'> M End Line: 228</div><div id='n_start'> N Start Line: 231</div><div id='n_end'> N End Line: 244</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        drifts = {}

        for property_name in properties:
            lower_bound<a id="change"> = </a>min(df_train[property_name].min(), <a id="change">df_test[property_name].min()</a>)
            upper_bound = max(df_train[property_name].max(), df_test[property_name].max())
            bounds = (lower_bound, upper_bound)
</code></pre><h3>After Change</h3><pre><code class='java'>
        df_train = pd.DataFrame(self.train_properties)
        df_test = pd.DataFrame(self.test_properties)

        figures = <a id="change">{}</a>
        drifts = {}

        for property_name in properties:
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/e9d89a5984493e12d24957ce2eae5e05fc0f0b10#diff-2bcaf3e8d2ac23aa539bf739f9ad8496ed4dbbf4b7324d2919908204e133e6f9L117' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55772695</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: e9d89a5984493e12d24957ce2eae5e05fc0f0b10</div><div id='time'> Time: 2022-03-03</div><div id='author'> Author: noamzbr@gmail.com</div><div id='file'> File Name: deepchecks/vision/checks/distribution/image_property_drift.py</div><div id='m_class'> M Class Name: ImagePropertyDrift</div><div id='n_method'> N Class Name: ImagePropertyDrift</div><div id='m_method'> M Method Name: compute(2)</div><div id='n_method'> N Method Name: compute(2)</div><div id='m_parent_class'> M Parent Class: TrainTestCheck</div><div id='n_parent_class'> N Parent Class: TrainTestCheck</div><div id='m_file'> M File Name: deepchecks/vision/checks/distribution/image_property_drift.py</div><div id='n_file'> N File Name: deepchecks/vision/checks/distribution/image_property_drift.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 170</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 156</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def prepare_attack(self, x, eps):
        max_ = x.max()
        min_ = <a id="change">x.min()</a>
        data_range<a id="change"> = </a>max_ - min_
        attack_params = {&quotepsilons&quot: eps * data_range.item(),
                         &quotlb&quot: min_,
                         &quotub&quot: max_}</code></pre><h3>After Change</h3><pre><code class='java'>
        return adv_samples

    def prepare_attack(self, attack, attack_params, eps):
        attack_params.update(<a id="change">{
            </a>&quotlb&quot: self.lb,
            &quotub&quot: self.ub<a id="change">}</a>)
        attack_cls, is_min_distance, \
        self.is_secml_class, attack_norm = SUPPORTED_ATTACKS[attack]
        if is_min_distance is False:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maurapintor/pandavision/commit/9f11a21e6a90c95602da5c82c73d7a5522305c25#diff-fbed87b032954fa98e97eab2ef4f45c263ad037077e0c3d254ae1b8f12916488L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55772662</div><div id='project'> Project Name: maurapintor/pandavision</div><div id='commit'> Commit Name: 9f11a21e6a90c95602da5c82c73d7a5522305c25</div><div id='time'> Time: 2021-11-02</div><div id='author'> Author: maura.pintor@gmail.com</div><div id='file'> File Name: app/adv/classification/attack_classification.py</div><div id='m_class'> M Class Name: AttackClassification</div><div id='n_method'> N Class Name: AttackClassification</div><div id='m_method'> M Method Name: prepare_attack(4)</div><div id='n_method'> N Method Name: prepare_attack(3)</div><div id='m_parent_class'> M Parent Class: AttackBase</div><div id='n_parent_class'> N Parent Class: AttackBase</div><div id='m_file'> M File Name: app/adv/classification/attack_classification.py</div><div id='n_file'> N File Name: app/adv/classification/attack_classification.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        heatmap = np.array(heatmap.cpu())
        heatmap = cv2.resize(heatmap[0], _input.shape[2:])

        heatmap = heatmap - <a id="change">np.min(</a>heatmap<a id="change">)</a>
        heatmap<a id="change"> = </a>heatmap / np.max(heatmap)
        return heatmap
</code></pre><h3>After Change</h3><pre><code class='java'>

    def grad_cam(self, _input: torch.FloatTensor, _class: List[int]) -&gt; np.ndarray:
        if isinstance(_class, int):
            _class = <a id="change">[</a>_class<a id="change"></a>] * len(_input)
        _class = torch.tensor(_class).to(_input.device)
        feats = self._model.get_fm(_input).detach()   &#47&#47 (N,C,H,W)
        feats.requires_grad_()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/2bf7c2a2e8acba2592ee17d60d1a59b7bd1bbfe5#diff-2e5a199c407507ee95051b9d3c697f33888e4d96925f51e508939244c2f34dbeL206' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55772693</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 2bf7c2a2e8acba2592ee17d60d1a59b7bd1bbfe5</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/model/imagemodel.py</div><div id='m_class'> M Class Name: ImageModel</div><div id='n_method'> N Class Name: ImageModel</div><div id='m_method'> M Method Name: grad_cam(3)</div><div id='n_method'> N Method Name: grad_cam(3)</div><div id='m_parent_class'> M Parent Class: Model</div><div id='n_parent_class'> N Parent Class: Model</div><div id='m_file'> M File Name: trojanzoo/model/imagemodel.py</div><div id='n_file'> N File Name: trojanzoo/model/imagemodel.py</div><div id='m_start'> M Start Line: 206</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 190</div><div id='n_end'> N End Line: 212</div><BR>