<html><h3>Pattern ID :195
</h3><img src='1653929.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    elif set(samples) == {&quotA&quot, &quotB&quot}:
        samples = (&quotA&quot, &quotB&quot)
        prefix = &quotAB&quot
    elif <a id="change">set(</a>samples<a id="change">)</a> == {&quotA&quot, &quotC&quot}:
        samples = (&quotA&quot, &quotC&quot)
        prefix = &quotAC&quot
    elif set(samples) == {&quotB&quot, &quotC&quot}:</code></pre><h3>After Change</h3><pre><code class='java'>

def normalize_samples(samples):
    assert len(set(samples) - {"A", "B", "C"}) == 0
    samples = <a id="change">tuple(</a>set(samples)<a id="change">)</a>
    prefix<a id="change"> = </a>"".join(samples)
    return samples, prefix

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/constantinpape/torch-em/commit/a3d9214cbd8196667d20296ec2f64ac28bd871fa#diff-d5f8e05cfbfa9564f2120eefe88c84adda102cb57f4214b03e3c49d0e84f1884L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1653929</div><div id='project'> Project Name: constantinpape/torch-em</div><div id='commit'> Commit Name: a3d9214cbd8196667d20296ec2f64ac28bd871fa</div><div id='time'> Time: 2021-12-08</div><div id='author'> Author: constantin.pape@embl.de</div><div id='file'> File Name: experiments/neuron-segmentation/cremi/train_affinities.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: normalize_samples(1)</div><div id='n_method'> N Method Name: normalize_samples(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: experiments/neuron-segmentation/cremi/train_affinities.py</div><div id='n_file'> N File Name: experiments/neuron-segmentation/cremi/train_affinities.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 98</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 88</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        index = self._check_and_convert(index)
        labels = self.labels[index]

        index = <a id="change">set(</a>index.tolist()<a id="change">)</a>
        batch_index, batch_labels = [], []
        for cluster in range(self.n_cluster):
            nodes = set(self.cluster_member[cluster])
            batch_nodes = list(nodes.intersection(index))</code></pre><h3>After Change</h3><pre><code class='java'>
            batch_mask.append(mini_mask)
            batch_labels.append(mini_labels)

        batch_data<a id="change"> = </a><a id="change">tuple(</a>zip(batch_features, batch_adj, batch_mask)<a id="change">)</a>
        with self.device:
            sequence = ClusterMiniBatchSequence(batch_data, batch_labels)
        return sequence
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/edisonleeeee/graphgallery/commit/6d453bba5f625a27587472fe0496f5456b8a767b#diff-440858156a7d3f87d2d5b735682b620ff5f6759275b44d3fbfd4dc342ffbcfabL101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1653916</div><div id='project'> Project Name: edisonleeeee/graphgallery</div><div id='commit'> Commit Name: 6d453bba5f625a27587472fe0496f5456b8a767b</div><div id='time'> Time: 2020-03-15</div><div id='author'> Author: cnljt@outlook.com</div><div id='file'> File Name: nn/models/clustergcn.py</div><div id='m_class'> M Class Name: ClusterGCN</div><div id='n_method'> N Class Name: ClusterGCN</div><div id='m_method'> M Method Name: train_sequence(2)</div><div id='n_method'> N Method Name: train_sequence(2)</div><div id='m_parent_class'> M Parent Class: SupervisedModel</div><div id='n_parent_class'> N Parent Class: SupervisedModel</div><div id='m_file'> M File Name: nn/models/clustergcn.py</div><div id='n_file'> N File Name: nn/models/clustergcn.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 113</div><div id='n_start'> N Start Line: 106</div><div id='n_end'> N End Line: 122</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super().predict(index)
        index = self._check_and_convert(index) 
        order_dict = {i: order for order, i in enumerate(index)}
        index = <a id="change">set(</a>index.tolist()<a id="change">)</a>
        batch_index, orders = [], []
        for cluster in range(self.n_cluster):
            nodes = set(self.cluster_member[cluster])
            batch_nodes = list(nodes.intersection(index))</code></pre><h3>After Change</h3><pre><code class='java'>
            batch_mask.append(mini_mask)
            orders.append([order_dict[n] for n in batch_nodes])
            
        batch_data<a id="change"> = </a><a id="change">tuple(</a>zip(batch_features, batch_adj, batch_mask)<a id="change">)</a>
        
        logit = np.zeros((index.size, self.n_classes), dtype=&quotfloat32&quot)
        with self.device:
            batch_data = self._to_tensor(batch_data)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/edisonleeeee/graphgallery/commit/6d453bba5f625a27587472fe0496f5456b8a767b#diff-440858156a7d3f87d2d5b735682b620ff5f6759275b44d3fbfd4dc342ffbcfabL75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1653922</div><div id='project'> Project Name: edisonleeeee/graphgallery</div><div id='commit'> Commit Name: 6d453bba5f625a27587472fe0496f5456b8a767b</div><div id='time'> Time: 2020-03-15</div><div id='author'> Author: cnljt@outlook.com</div><div id='file'> File Name: nn/models/clustergcn.py</div><div id='m_class'> M Class Name: ClusterGCN</div><div id='n_method'> N Class Name: ClusterGCN</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: SupervisedModel</div><div id='n_parent_class'> N Parent Class: SupervisedModel</div><div id='m_file'> M File Name: nn/models/clustergcn.py</div><div id='n_file'> N File Name: nn/models/clustergcn.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 99</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    for c in used_col:
                        used_schema.add(c)

            common_schema = <a id="change">set(</a>nodes[n].inputs<a id="change">)</a> & ahead_schema
            for x in common_schema:
                ahead_schema.remove(x)
                used_schema.add(x)</code></pre><h3>After Change</h3><pre><code class='java'>
                if isinstance(used_col, str):
                    check_schema += (used_col,)
                else:
                    check_schema<a id="change"> += </a><a id="change">tuple(</a>used_col<a id="change">)</a>

            common_schema = set(check_schema) & ahead_schema
            for x in common_schema:
                ahead_schema.remove(x)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/9ae4843055b127c3476f669d092618b5704079ab#diff-3b49e350d6ca75e7b3c5f6573e90e6bd36b63da5212cb23dcad5a976131e9e5fL123' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1653908</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: 9ae4843055b127c3476f669d092618b5704079ab</div><div id='time'> Time: 2023-01-09</div><div id='author'> Author: shiyu.chen@zilliz.com</div><div id='file'> File Name: towhee/runtime/dag_repr.py</div><div id='m_class'> M Class Name: DAGRepr</div><div id='n_method'> N Class Name: DAGRepr</div><div id='m_method'> M Method Name: dfs_used_schema(3)</div><div id='n_method'> N Method Name: dfs_used_schema(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: towhee/runtime/dag_repr.py</div><div id='n_file'> N File Name: towhee/runtime/dag_repr.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 148</div><BR>