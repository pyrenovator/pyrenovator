<html><h3>Pattern ID :16871
</h3><img src='56490957.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                **kwargs
            )

            <a id="change">setattr(</a>self, f&quotoptim{ind}&quot, optimizer<a id="change">)</a> &#47&#47 cannot use pytorch ModuleList for some reason with optimizers

            if self.use_ema:
                self.ema_unets.append(EMA(unet, **ema_kwargs))</code></pre><h3>After Change</h3><pre><code class='java'>
        self.max_grad_norm = max_grad_norm

        self.register_buffer(&quotstep&quot, torch.tensor([0.]))
        results = <a id="change">list(</a>self.accelerator.prepare(decoder, *optimizers)<a id="change">)</a>
        self.decoder<a id="change"> = </a>results.pop(0)
        for opt_ind in range(len(optimizers)):
            setattr(self, f&quotoptim{opt_ind}&quot, results.pop(0))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lucidrains/dalle2-pytorch/commit/58892135d9bcf117921c885dda161c0b67452096#diff-617450527162fa367141dbf45e8b201673573479820af0ffc56ba93b7f70947fL577' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56490957</div><div id='project'> Project Name: lucidrains/dalle2-pytorch</div><div id='commit'> Commit Name: 58892135d9bcf117921c885dda161c0b67452096</div><div id='time'> Time: 2022-06-19</div><div id='author'> Author: aidan.dempster@gmail.com</div><div id='file'> File Name: dalle2_pytorch/trainer.py</div><div id='m_class'> M Class Name: DecoderTrainer</div><div id='n_method'> N Class Name: DecoderTrainer</div><div id='m_method'> M Method Name: __init__(10)</div><div id='n_method'> N Method Name: __init__(9)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: dalle2_pytorch/trainer.py</div><div id='n_file'> N File Name: dalle2_pytorch/trainer.py</div><div id='m_start'> M Start Line: 591</div><div id='m_end'> M End Line: 620</div><div id='n_start'> N Start Line: 577</div><div id='n_end'> N End Line: 633</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    _schema[field_name]
                ).merge_doc(other)
                field = doc.to_field()
                <a id="change">setattr(</a>cls, field_name, _schema[field_name]<a id="change">)</a>
                cls._declare_field(field, field_name)
                dataset_field_docs = cls._dataset_doc()[cls._fields_attr()]
                docs = dataset_field_docs
</code></pre><h3>After Change</h3><pre><code class='java'>
                        docs = field.fields
                        break

            field.fields<a id="change"> = </a><a id="change">list(</a>updated_docs.values()<a id="change">)</a>

        dataset_field_docs.save()

    @classmethod</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852#diff-b4e92a2491c17c73053ef81d1f4550849068f80a672bdb4c89ec7fa52439f7b0L257' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56490942</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852</div><div id='time'> Time: 2022-04-04</div><div id='author'> Author: ben@voxel51.com</div><div id='file'> File Name: fiftyone/core/odm/mixins.py</div><div id='m_class'> M Class Name: DatasetMixin</div><div id='n_method'> N Class Name: DatasetMixin</div><div id='m_method'> M Method Name: merge_field_schema(4)</div><div id='n_method'> N Method Name: merge_field_schema(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fiftyone/core/odm/mixins.py</div><div id='n_file'> N File Name: fiftyone/core/odm/mixins.py</div><div id='m_start'> M Start Line: 278</div><div id='m_end'> M End Line: 320</div><div id='n_start'> N Start Line: 280</div><div id='n_end'> N End Line: 327</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if fuse_subwords_strategy:
                tokens, selected_atts = fuse_subwords(tokens, selected_atts, self.tokenizer,
                                                      strategy=fuse_subwords_strategy)
                <a id="change">setattr(</a>self, text_field, tokens<a id="change">)</a>

            sequence = Sequence(words=tokens, scores=selected_atts)
            hm = sequence.words_rgb(token_pad=self.tokenizer.pad_token,
                                    position_pad=self.tokenizer.padding_side,</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Use detokenizer to fill text fields
        self.fill_text_fields(attributions=atts, fuse_subwords_strategy=fuse_subwords_strategy)

        ctoken_fields = <a id="change">list(</a>self.texts.values()<a id="change">)</a>
        ctokens<a id="change"> = </a>reduce(lambda x, y: x + y, ctoken_fields)
        heatmap = Heatmap(color_tokens=ctokens, gamma=gamma)

        return heatmap</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dfki-nlp/thermostat/commit/f7cc2beb222e50207fb5ca26900bab4e861d59da#diff-6ab4c95f94b6241bd77621bf1fee4ada8e781074aeaca5d9c6e2a8f43e0b4e8bL208' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56490948</div><div id='project'> Project Name: dfki-nlp/thermostat</div><div id='commit'> Commit Name: f7cc2beb222e50207fb5ca26900bab4e861d59da</div><div id='time'> Time: 2021-06-20</div><div id='author'> Author: feldhusnlp@gmail.com</div><div id='file'> File Name: src/thermostat/data/dataset_utils.py</div><div id='m_class'> M Class Name: Thermounit</div><div id='n_method'> N Class Name: Thermounit</div><div id='m_method'> M Method Name: heatmap(5)</div><div id='n_method'> N Method Name: heatmap(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/thermostat/data/dataset_utils.py</div><div id='n_file'> N File Name: src/thermostat/data/dataset_utils.py</div><div id='m_start'> M Start Line: 210</div><div id='m_end'> M End Line: 236</div><div id='n_start'> N Start Line: 244</div><div id='n_end'> N End Line: 250</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if v is not None:
                self.register_buffer(k, v)
            else:
                <a id="change">setattr(</a>self, k, None<a id="change">)</a>
        self.processors = nn.ModuleList([]) &#47&#47 register modules for .to(device)
        self.dag_summary = {}
        for processor, connections in self.dag:
            self.processors.append(processor)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.name = name
        self.ext_param_sizes = {}
        self.processor_names = [processor.name for processor in self.processors]
        self.conditioned_params<a id="change"> = </a><a id="change">list(</a>conditioned<a id="change">)</a>
        self.dag_summary = {}
        for processor, connections in zip(self.processors, self.connections):
            &#47&#47 parameters that rely on external input and not outputs of other modules and are not conditioned
            ext_params = [k for k, v in connections.items() if v not in self.processor_names+self.conditioned_params]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hyakuchiki/realtimeddsp/commit/18a14dbae33c975de26b9dcd41d02e5a59d0d5f9#diff-6adfd958756ec57d08360aa96b9e5040cf7be464f91e202f7b3306c05b67f0c5L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56490944</div><div id='project'> Project Name: hyakuchiki/realtimeddsp</div><div id='commit'> Commit Name: 18a14dbae33c975de26b9dcd41d02e5a59d0d5f9</div><div id='time'> Time: 2022-05-16</div><div id='author'> Author: naotakemasuda@g.ecc.u-tokyo.ac.jp</div><div id='file'> File Name: diffsynth/synthesizer.py</div><div id='m_class'> M Class Name: Synthesizer</div><div id='n_method'> N Class Name: Synthesizer</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: diffsynth/synthesizer.py</div><div id='n_file'> N File Name: diffsynth/synthesizer.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 34</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        scores = torch.cat(score_list)

        setattr(interaction, &quotpos_len_list&quot, pos_len_list)
        <a id="change">setattr(</a>interaction, &quotuser_idx_list&quot, user_idx_list<a id="change">)</a>

        return interaction, scores
</code></pre><h3>After Change</h3><pre><code class='java'>
        neg_scores = scores.masked_select(used_mask)
        neg_scores = torch.split(neg_scores, neg_len_list, dim=0)

        final_scores<a id="change"> = </a><a id="change">list(</a>itertools.chain.from_iterable(zip(pos_scores, neg_scores))<a id="change">)</a>
        final_scores = torch.cat(final_scores)

        setattr(interaction, &quotpos_len_list&quot, pos_len_list)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/efaf2d8c84961b5042c0d42e08e56a59f064f267#diff-0564ece5aadc13d5923043addc422a8058c6d96026493e84652cedc2f1bdca99L184' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56490946</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: efaf2d8c84961b5042c0d42e08e56a59f064f267</div><div id='time'> Time: 2020-08-05</div><div id='author'> Author: houyupeng@ruc.edu.cn</div><div id='file'> File Name: trainer/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: _full_sort_batch_eval(2)</div><div id='n_method'> N Method Name: _full_sort_batch_eval(2)</div><div id='m_parent_class'> M Parent Class: AbstractTrainer</div><div id='n_parent_class'> N Parent Class: AbstractTrainer</div><div id='m_file'> M File Name: trainer/trainer.py</div><div id='n_file'> N File Name: trainer/trainer.py</div><div id='m_start'> M Start Line: 186</div><div id='m_end'> M End Line: 212</div><div id='n_start'> N Start Line: 187</div><div id='n_end'> N End Line: 211</div><BR>