<html><h3>Pattern ID :31853
</h3><img src='93105148.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def get_img_for_mosaic(self, brightness_rnd, contrast_rnd, hue_rnd, saturation_rnd, i):
        img_path = self.img_files[random.randrange(0, len(self.img_files))].rstrip()
        label_path = self.label_files[<a id="change">random.randrange(</a>0, len(self.img_files)<a id="change">)</a>].rstrip()

        &#47&#47 img_path = self.img_files[i].rstrip()
        &#47&#47 label_path = self.label_files[i].rstrip()</code></pre><h3>After Change</h3><pre><code class='java'>
        return img_path, tensor_img, targets

    def get_img_for_mosaic(self, brightness_rnd, contrast_rnd, hue_rnd, saturation_rnd):
        random_index = <a id="change">random.randrange(</a>0, len(self.img_files)<a id="change">)</a>
        img_path = self.img_files[random_index].rstrip()
        label_path<a id="change"> = </a>self.label_files[random_index].rstrip()

        
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/vcasecnikovs/yet-another-yolov4-pytorch/commit/409de7e53ff6abac6188257b230f5a812842f2ef#diff-11bb3b632c84e01e0bf1b576e72c513fd062811e900ebcb5f22df0eac7d3b0d9L158' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93105148</div><div id='project'> Project Name: vcasecnikovs/yet-another-yolov4-pytorch</div><div id='commit'> Commit Name: 409de7e53ff6abac6188257b230f5a812842f2ef</div><div id='time'> Time: 2020-05-29</div><div id='author'> Author: casecnikov@gmail.com</div><div id='file'> File Name: dataset.py</div><div id='m_class'> M Class Name: ListDataset</div><div id='n_method'> N Class Name: ListDataset</div><div id='m_method'> M Method Name: get_img_for_mosaic(5)</div><div id='n_method'> N Method Name: get_img_for_mosaic(6)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: dataset.py</div><div id='n_file'> N File Name: dataset.py</div><div id='m_start'> M Start Line: 158</div><div id='m_end'> M End Line: 160</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 161</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _get_next_batch_start_index(self):
        if self.shuffle_and_repeat:
            &#47&#47 if self.groups &gt; 1, this ensures that the start of each batch is a multiply of self.groups, i.e. where a group starts
            return <a id="change">random.randrange(</a>0, len(self.data_source) / self.groups<a id="change">)</a> * self.groups
        else:
            return self.last_batch_start_index
</code></pre><h3>After Change</h3><pre><code class='java'>
                self.data_source_marked = np.zeros(shape=(len(self.data_source)))
                examples_left_in_epoch = len(self.data_source)
            &#47&#47 if self.groups &gt; 1, this ensures that the start of each batch is a multiply of self.groups, i.e. where a group starts
            start_idx<a id="change"> = </a><a id="change">random.randrange(</a>0, examples_left_in_epoch / self.groups<a id="change">)</a> * self.groups
            start_idx = self._unmarked_index_to_datasource_index(start_idx)
            return start_idx
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/a691d60143284a6c89b252c63509e3e0c6d80c2e#diff-c117e0d022bc8fb1b3aed917f667c3d74d7f7471f186ba90a4f66a25224fe146L146' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93105149</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: a691d60143284a6c89b252c63509e3e0c6d80c2e</div><div id='time'> Time: 2022-09-01</div><div id='author'> Author: s.j.semnani@gmail.com</div><div id='file'> File Name: genienlp/data_utils/iterator.py</div><div id='m_class'> M Class Name: LengthSortedIterator</div><div id='n_method'> N Class Name: LengthSortedIterator</div><div id='m_method'> M Method Name: _get_next_batch_start_index(1)</div><div id='n_method'> N Method Name: _get_next_batch_start_index(1)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Sampler</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Sampler</div><div id='m_file'> M File Name: genienlp/data_utils/iterator.py</div><div id='n_file'> N File Name: genienlp/data_utils/iterator.py</div><div id='m_start'> M Start Line: 149</div><div id='m_end'> M End Line: 149</div><div id='n_start'> N Start Line: 165</div><div id='n_end'> N End Line: 173</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                episode_rew += reward
                total_reward_in_epoch += reward
                if random.uniform(0, 1) &lt; self.RANDOM_PERTURBATIONS_LEVEL:
                    self.env.step(<a id="change">random.randrange(</a>self.PERTURBATIONS_INTENSITY * self.env.action_space.n<a id="change">)</a>)
                if run % self.SHOW_EVERY == 0:
                    self.env.render()
                if number_of_steps &gt; self.NUMBER_OF_EXPLORATION_STEPS:</code></pre><h3>After Change</h3><pre><code class='java'>
                episode_rew += reward
                total_reward_in_epoch += reward
                if random.uniform(0, 1) &lt; self.RANDOM_PERTURBATIONS_LEVEL:
                    perturbation_action<a id="change"> = </a><a id="change">random.randrange(</a>self.env.action_space.n<a id="change">)</a>
                    self.env.step(self.PERTURBATIONS_INTENSITY * perturbation_action)
                    logging.debug("perturbated in step {} with action {}".format(episode_rew, perturbation_action))

                if run % self.SHOW_EVERY == 0:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jderobot/rl-studio/commit/a7469f2963188c828794b54185f3eca38c8159b6#diff-6f60d386339ac5f01acd2f7451eeb06ee63b8a45dfa85818b490383d707747eaL127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93105146</div><div id='project'> Project Name: jderobot/rl-studio</div><div id='commit'> Commit Name: a7469f2963188c828794b54185f3eca38c8159b6</div><div id='time'> Time: 2022-09-24</div><div id='author'> Author: ruben.lucas.zaragoza@hotmail.com</div><div id='file'> File Name: rl_studio/agents/cartpole/train_dqn.py</div><div id='m_class'> M Class Name: DQNCartpoleTrainer</div><div id='n_method'> N Class Name: DQNCartpoleTrainer</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rl_studio/agents/cartpole/train_dqn.py</div><div id='n_file'> N File Name: rl_studio/agents/cartpole/train_dqn.py</div><div id='m_start'> M Start Line: 133</div><div id='m_end'> M End Line: 173</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 195</div><BR>