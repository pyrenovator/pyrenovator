<html><h3>Pattern ID :4856
</h3><img src='17065748.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.optimizer = optim.SGD(
            self.model.parameters(), lr=0.1, momentum=0.9, weight_decay=5e-4
        )
        self.criterion = <a id="change">nn.CrossEntropyLoss()</a>

    def reset_local_params(self):
        self.total = 0
        self.correct = 0</code></pre><h3>After Change</h3><pre><code class='java'>
        self.optimizer = optim.SGD(
            self.model.parameters(), lr=0.1, momentum=0.9, weight_decay=5e-4
        )
        self.criterion = <a id="change">nn.CrossEntropyLoss().to(</a>device<a id="change">)</a>

    def reset_local_params(self):
        self.total = 0
        self.correct = 0</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/0e8053368ce27cbcf26a0ad90c902629fba2aa4c#diff-878d5fbedcf7d92d6f522bbd7dafb02bac3861c74efd8858227a95604f4f7ae0L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17065748</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 0e8053368ce27cbcf26a0ad90c902629fba2aa4c</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/simulation/mpi/split_nn/server.py</div><div id='m_class'> M Class Name: SplitNN_server</div><div id='n_method'> N Class Name: SplitNN_server</div><div id='m_method'> M Method Name: init_params(1)</div><div id='n_method'> N Method Name: init_params(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/simulation/mpi/split_nn/server.py</div><div id='n_file'> N File Name: python/fedml/simulation/mpi/split_nn/server.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 22</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.model = model
        self.model.to(self.device)
        self.criterion = <a id="change">nn.CrossEntropyLoss()</a>
        if self.args.client_optimizer == "sgd":
            self.optimizer = torch.optim.SGD(self.model.parameters(), lr=self.args.lr)
        else:
            self.optimizer = torch.optim.Adam(</code></pre><h3>After Change</h3><pre><code class='java'>

        self.model = model
        self.model.to(self.device)
        self.criterion = <a id="change">nn.CrossEntropyLoss().to(</a>device<a id="change">)</a>
        if self.args.client_optimizer == "sgd":
            self.optimizer = torch.optim.SGD(self.model.parameters(), lr=self.args.lr)
        else:
            self.optimizer = torch.optim.Adam(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/0e8053368ce27cbcf26a0ad90c902629fba2aa4c#diff-434a2cb0c47d838101d3a9aa92547feb6be88cbbeb727aa0f55547b484712463L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17065746</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 0e8053368ce27cbcf26a0ad90c902629fba2aa4c</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/centralized/centralized_trainer.py</div><div id='m_class'> M Class Name: CentralizedTrainer</div><div id='n_method'> N Class Name: CentralizedTrainer</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: python/fedml/centralized/centralized_trainer.py</div><div id='n_file'> N File Name: python/fedml/centralized/centralized_trainer.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 37</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.args = args
        self.device = device

        self.criterion = <a id="change">nn.CrossEntropyLoss()</a>

        self.isdrop = False
        self.model_trainer = model_trainer
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.args = args
        self.device = device

        self.criterion = <a id="change">nn.CrossEntropyLoss().to(</a>device<a id="change">)</a>

        self.isdrop = False
        self.model_trainer = model_trainer
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/0e8053368ce27cbcf26a0ad90c902629fba2aa4c#diff-ffb5dcfa73d0944a8aff94caa5b73a29ea9d82894df9b721e335c02be8931575L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17065747</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 0e8053368ce27cbcf26a0ad90c902629fba2aa4c</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/simulation/sp/turboaggregate/TA_client.py</div><div id='m_class'> M Class Name: TA_Client</div><div id='n_method'> N Class Name: TA_Client</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: Client</div><div id='n_parent_class'> N Parent Class: Client</div><div id='m_file'> M File Name: python/fedml/simulation/sp/turboaggregate/TA_client.py</div><div id='n_file'> N File Name: python/fedml/simulation/sp/turboaggregate/TA_client.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.model = model
        self.model.to(self.device)
        self.criterion = <a id="change">nn.CrossEntropyLoss()</a>
        if self.args.client_optimizer == "sgd":
            self.optimizer = torch.optim.SGD(self.model.parameters(), lr=self.args.lr)
        else:
            self.optimizer = torch.optim.Adam(</code></pre><h3>After Change</h3><pre><code class='java'>

        self.model = model
        self.model.to(self.device)
        self.criterion = <a id="change">nn.CrossEntropyLoss().to(</a>device<a id="change">)</a>
        if self.args.client_optimizer == "sgd":
            self.optimizer = torch.optim.SGD(self.model.parameters(), lr=self.args.lr)
        else:
            self.optimizer = torch.optim.Adam(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/5ed43926cab918500be4a542e7ee005fe93b84e7#diff-434a2cb0c47d838101d3a9aa92547feb6be88cbbeb727aa0f55547b484712463L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17065742</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 5ed43926cab918500be4a542e7ee005fe93b84e7</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/centralized/centralized_trainer.py</div><div id='m_class'> M Class Name: CentralizedTrainer</div><div id='n_method'> N Class Name: CentralizedTrainer</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: python/fedml/centralized/centralized_trainer.py</div><div id='n_file'> N File Name: python/fedml/centralized/centralized_trainer.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 37</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if loss_type==&quotlabel_smoothing&quot:
        criterion = LabelSmoothingLoss(conf[&quotmodel&quot][&quotout_dim&quot], padding_idx=conf[&quotmodel&quot][&quotpad_id&quot])
    elif loss_type==&quotcross_entropy&quot:
        criterion = <a id="change">nn.CrossEntropyLoss(ignore_index=conf[&quotmodel&quot][&quotpad_id&quot])</a>
        
    return criterion.to(device)</code></pre><h3>After Change</h3><pre><code class='java'>
    if loss_type==&quotlabel_smoothing&quot:
        criterion = LabelSmoothingLoss(conf[&quotmodel&quot][&quotout_dim&quot], padding_idx=conf[&quotmodel&quot][&quotpad_id&quot]).to(device)
    elif loss_type==&quotcross_entropy&quot:
        criterion = <a id="change">nn.CrossEntropyLoss(ignore_index=conf[&quotmodel&quot][&quotpad_id&quot]).to(</a>device<a id="change">)</a>
    elif loss_type==&quotrnnt_loss&quot:
        import warp_rnnt._C as core
        criterion = rnnt_loss
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/qute012/kosr/commit/40fb17f5a01ef3b746e7c8822b5a016b3c8f88dc#diff-d2d44c8ae26fe29c5e0f2c78b1d9d68b5f57758287b3969fd48cc95ce41b03daL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17065743</div><div id='project'> Project Name: qute012/kosr</div><div id='commit'> Commit Name: 40fb17f5a01ef3b746e7c8822b5a016b3c8f88dc</div><div id='time'> Time: 2021-02-01</div><div id='author'> Author: ejrwls012@gmail.com</div><div id='file'> File Name: kosr/utils/loss.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: build_criterion(1)</div><div id='n_method'> N Method Name: build_criterion(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kosr/utils/loss.py</div><div id='n_file'> N File Name: kosr/utils/loss.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 58</div><BR>