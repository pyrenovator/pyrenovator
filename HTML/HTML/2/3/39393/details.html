<html><h3>Pattern ID :39393
</h3><img src='111847323.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    for c, Tk in <a id="change">zip(</a>server.clients, Tks<a id="change">)</a>:
        c._qk = 1.0 * Tk / max_Tk
        c.prob_available = 1
        c.prob_drop = 0</code></pre><h3>After Change</h3><pre><code class='java'>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    q = <a id="change">np.array(</a>Tks<a id="change">)/</a>max_Tk
    state_updater.set_variable(state_updater.all_clients, &quotq&quot, q)
    state_updater.set_variable(state_updater.all_clients, &quotprob_available&quot, q)
    def f(self):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L382' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111847323</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: sin_lognormal_client_availability(2)</div><div id='n_method'> N Method Name: sin_lognormal_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 382</div><div id='m_end'> M End Line: 389</div><div id='n_start'> N Start Line: 439</div><div id='n_end'> N End Line: 456</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 a list of (from, to) word segments that we want to cut on
    shifted = np.insert(word_segment_idxs, 0, -1) + 1
    segment_idxs = <a id="change">zip(</a>shifted, word_segment_idxs<a id="change">)</a>

    &#47&#47 construct the these larger segments
    segments = []
    for (i, j) in segment_idxs:</code></pre><h3>After Change</h3><pre><code class='java'>
    n_words = len(word_segments)

    &#47&#47 a list of pause durations between words
    pauses = <a id="change">np.array(</a>pause_durations(alignment)<a id="change">)</a>

    &#47&#47 word segment indices that have a trailing pause
    pause_segment_idxs = np.argwhere(pauses &gt; cut_threshold)
    pause_segment_idxs = pause_segment_idxs.squeeze().reshape(-1)

    &#47&#47 a list of (from, to) word segments that we want to cut on
    bounds = []
    if <a id="change">not pause_segment_idxs</a>:
        bounds.append((0, n_words))
    else:
        from_word = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/feldberlin/timething/commit/984a3d2bc672ed5194eb3bcd8349ae60095a1f20#diff-86aefcda1e10d34645a7bad135286ea532e4397fc8145acb25dcbc134a6193f8L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111847326</div><div id='project'> Project Name: feldberlin/timething</div><div id='commit'> Commit Name: 984a3d2bc672ed5194eb3bcd8349ae60095a1f20</div><div id='time'> Time: 2022-05-09</div><div id='author'> Author: purzelrakete@gmail.com</div><div id='file'> File Name: timething/cutter.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: pause_cuts(2)</div><div id='n_method'> N Method Name: pause_cuts(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timething/cutter.py</div><div id='n_file'> N File Name: timething/cutter.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    for c, Tk in <a id="change">zip(</a>server.clients, Tks<a id="change">)</a>:
        c.prob_available = 1.0 * Tk / max_Tk

def sin_lognormal_client_availability(server, beta=0.1):</code></pre><h3>After Change</h3><pre><code class='java'>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    probs = <a id="change">np.array(</a>Tks<a id="change">)/</a>max_Tk
    state_updater.set_variable(state_updater.all_clients, &quotprob_available&quot, probs)
    state_updater.set_variable(state_updater.all_clients, &quotprob_unavailable&quot, [1 - p for p in probs])
    state_updater.roundly_fixed_availability = True</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L363' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111847331</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: lognormal_client_availability(2)</div><div id='n_method'> N Method Name: lognormal_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 369</div><div id='m_end'> M End Line: 373</div><div id='n_start'> N Start Line: 423</div><div id='n_end'> N End Line: 430</div><BR>