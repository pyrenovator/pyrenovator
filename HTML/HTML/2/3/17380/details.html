<html><h3>Pattern ID :17380
</h3><img src='57701121.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        st, en = self._check_length(st, en)
        attrs = check_attributes(dynamic_attributes, self.dynamic_attributes)

        nc<a id="change"> = </a><a id="change">netCDF4.Dataset(</a>os.path.join(self.ds_dir, f&quotHYSETS_2020_{self.source}.nc&quot)<a id="change">)</a>

        stn_df = pd.DataFrame(columns=attrs)

        for var in nc.variables:</code></pre><h3>After Change</h3><pre><code class='java'>
                                 en=None,
                                 to_dataframe=False):
        Fetches dynamic attributes of one station.
        station = <a id="change">[</a>int(station)<a id="change"></a>]
        return self._fetch_dynamic_attributes(stations=station,
                                              dynamic_attributes=dynamic_attributes,
                                              st=st,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/atrcheema/dl4seq/commit/518f536a9edfbd2de387303c829d38a8757ee33e#diff-4d7cf961d7f8c2debefa238d402177be13376b56057f8ba0b2722c4b7411450aL459' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57701121</div><div id='project'> Project Name: atrcheema/dl4seq</div><div id='commit'> Commit Name: 518f536a9edfbd2de387303c829d38a8757ee33e</div><div id='time'> Time: 2021-06-15</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: AI4Water/utils/datasets/camels.py</div><div id='m_class'> M Class Name: HYSETS</div><div id='n_method'> N Class Name: HYSETS</div><div id='m_method'> M Method Name: fetch_dynamic_attributes(6)</div><div id='n_method'> N Method Name: fetch_dynamic_attributes(5)</div><div id='m_parent_class'> M Parent Class: Camels</div><div id='n_parent_class'> N Parent Class: Camels</div><div id='m_file'> M File Name: AI4Water/utils/datasets/camels.py</div><div id='n_file'> N File Name: AI4Water/utils/datasets/camels.py</div><div id='m_start'> M Start Line: 459</div><div id='m_end'> M End Line: 475</div><div id='n_start'> N Start Line: 648</div><div id='n_end'> N End Line: 653</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            raise ValueError("LightGBM doesn&quott support multi-label training")

        dtrain<a id="change"> = </a><a id="change">lgb.Dataset(</a>x_train<a id="change">, label=y_train)</a>
        dvalid = lgb.Dataset(x_valid, label=y_valid)
        return dtrain, dvalid

    def fit(</code></pre><h3>After Change</h3><pre><code class='java'>
        The motivation of current version is to make validation optional
        - train segment is necessary;
        
        ds_l = <a id="change">[]</a>
        assert "train" in dataset.segments
        for key in ["train", "valid"]:
            if key in dataset.segments:
                df = dataset.prepare(key, col_set=["feature", "label"], data_key=DataHandlerLP.DK_L)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/cf35562e8458bc10fc0760e6c30c560c4eb10734#diff-2787a50d8268040e8512018e56b802adb4678e5dfd2a9581654b0f41e314717eL25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57701126</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: cf35562e8458bc10fc0760e6c30c560c4eb10734</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: you-n-g@users.noreply.github.com</div><div id='file'> File Name: qlib/contrib/model/gbdt.py</div><div id='m_class'> M Class Name: LGBModel</div><div id='n_method'> N Class Name: LGBModel</div><div id='m_method'> M Method Name: _prepare_data(3)</div><div id='n_method'> N Method Name: _prepare_data(2)</div><div id='m_parent_class'> M Parent Class: LightGBMFInt,ModelFT</div><div id='n_parent_class'> N Parent Class: LightGBMFInt,ModelFT</div><div id='m_file'> M File Name: qlib/contrib/model/gbdt.py</div><div id='n_file'> N File Name: qlib/contrib/model/gbdt.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 get the workflow and fit the dataset
        workflow = get_nvt_workflow()
        workflow.fit(full_dataset)
        train_dataset<a id="change"> = </a><a id="change">nvt.Dataset(</a>train_df<a id="change">)</a>
        workflow.transform(train_dataset).to_parquet(output_path="train/")
        valid_dataset = nvt.Dataset(valid_df)
        workflow.transform(valid_dataset).to_parquet(output_path="valid/")
        &#47&#47 version the two folders prepared by NV tabular as tar files on s3</code></pre><h3>After Change</h3><pre><code class='java'>
        import nvtabular as nvt &#47&#47 pylint: disable=import-error
        from dataset_utils import upload_dataset_folders
        &#47&#47 read dataset into frames
        label_to_df = <a id="change">{}</a>
        for label, dataset in self.label_to_dataset.items():
            label_to_df[label] = read_to_dataframe(dataset, label)
        full_dataset = nvt.Dataset(pd.concat(list(label_to_df.values())))
        &#47&#47 get the workflow and fit the dataset</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jacopotagliabue/recs-at-resonable-scale/commit/3c599bc91a696c45c616604705cbfff7910a1011#diff-9b8fa700f21964aef76747038004e0ed38e07299e7c0adc81db033595dde7677L167' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57701135</div><div id='project'> Project Name: jacopotagliabue/recs-at-resonable-scale</div><div id='commit'> Commit Name: 3c599bc91a696c45c616604705cbfff7910a1011</div><div id='time'> Time: 2022-07-18</div><div id='author'> Author: tagliabue.jacopo@gmail.com</div><div id='file'> File Name: src/my_merlin_flow.py</div><div id='m_class'> M Class Name: merlinFlow</div><div id='n_method'> N Class Name: merlinFlow</div><div id='m_method'> M Method Name: build_workflow(1)</div><div id='n_method'> N Method Name: build_workflow(1)</div><div id='m_parent_class'> M Parent Class: FlowSpec</div><div id='n_parent_class'> N Parent Class: FlowSpec</div><div id='m_file'> M File Name: src/my_merlin_flow.py</div><div id='n_file'> N File Name: src/my_merlin_flow.py</div><div id='m_start'> M Start Line: 176</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 194</div><div id='n_end'> N End Line: 213</div><BR>