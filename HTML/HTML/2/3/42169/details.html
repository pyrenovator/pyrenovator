<html><h3>Pattern ID :42169
</h3><img src='118653552.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            action = self.env.action_space.sample()     &#47&#47 Explore action space
        else:
            action = torch.argmax(self.eval_net(state)).numpy() &#47&#47 Exploit learned values
        <a id="change">return </a>action
            
    def store_trajectory(self, s, a, r, s_):
        traj = np.hstack((s,[a,r],s_))</code></pre><h3>After Change</h3><pre><code class='java'>
           action.
        
        state = state[np.newaxis, :]
        action<a id="change"> = </a><a id="change">self.sess.run(</a>self.sample_op, {self.states: state}<a id="change">)</a>[0]

        return np.clip(action, -self.bound, self.bound)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/skylark0924/machine-learning-is-all-you-need/commit/2a04011e72ca9c2780b4ce7375e6274fb2611943#diff-9076dae78caf4a727fcdb2b769e1373701bddbebae48a1d73cb46375a82df58dL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118653552</div><div id='project'> Project Name: skylark0924/machine-learning-is-all-you-need</div><div id='commit'> Commit Name: 2a04011e72ca9c2780b4ce7375e6274fb2611943</div><div id='time'> Time: 2020-04-30</div><div id='author'> Author: 24936522+Skylark0924@users.noreply.github.com</div><div id='file'> File Name: 16PPO/16PPO.py</div><div id='m_class'> M Class Name: Skylark_PPO</div><div id='n_method'> N Class Name: Skylark_PPO</div><div id='m_method'> M Method Name: choose_action(2)</div><div id='n_method'> N Method Name: choose_action(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: 16PPO/16PPO.py</div><div id='n_file'> N File Name: 16PPO/16PPO.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 113</div><div id='n_end'> N End Line: 116</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                f&quotTrainValidationBaseCheck or ModelOnlyBaseCheck. Got  {check.__class__.__name__} &quot
                                f&quotinstead&quot)

        <a id="change">return </a>results
</code></pre><h3>After Change</h3><pre><code class='java'>
            elif isinstance(check, ModelOnlyBaseCheck):
                results.append(check.run(model=model))
            elif isinstance(check, CheckSuite):
                suite_res<a id="change"> = </a><a id="change">check.run(</a>model, train_dataset, validation_dataset, check_datasets_policy<a id="change">)</a>
                if check.name in results:
                    raise MLChecksValueError(&quotEach suite must have a unique name&quot)
                results.append(suite_res)
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/dd5d0ff5fbea192e9465f4d3b0c2132bb4e5c7e3#diff-7bda2846031bc61a66dcc0fafda47e5ccfdec1dafd25bd2b8f97c5a5bd85b456L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118653543</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: dd5d0ff5fbea192e9465f4d3b0c2132bb4e5c7e3</div><div id='time'> Time: 2021-10-17</div><div id='author'> Author: matanper@gmail.com</div><div id='file'> File Name: mlchecks/base/suite.py</div><div id='m_class'> M Class Name: CheckSuite</div><div id='n_method'> N Class Name: CheckSuite</div><div id='m_method'> M Method Name: run(5)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: BaseCheck</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mlchecks/base/suite.py</div><div id='n_file'> N File Name: mlchecks/base/suite.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 77</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    engine = sqlalchemy.create_engine(f&quotsqlite:///{db_path}&quot)
    fill_db_data(engine, metadata_path, test_parameters)

    <a id="change">return </a>engine


@pytest.fixture(scope=&quotsession&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
    else:
        port_number = 22345
        client = docker.from_env()
        container<a id="change"> = </a><a id="change">client.containers.run(</a>&quotmysql:latest&quot<a id="change">,
                                          environment={&quotMYSQL_ROOT_PASSWORD&quot: &quotmy-secret-pw&quot},
                                          ports={&quot3306/tcp&quot: port_number},
                                          detach=True)</a>

        max_waiting_time = 2 * 60
        start = time.perf_counter()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/393d69b752d37450339da6bae479147c841abe76#diff-e52e4ddd58b7ef887ab03c04116e676f6280b824ab7469d5d3080e5cba4f2128L84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118653547</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 393d69b752d37450339da6bae479147c841abe76</div><div id='time'> Time: 2020-08-07</div><div id='author'> Author: 47669575+EmilieDel@users.noreply.github.com</div><div id='file'> File Name: tests/conftest.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fake_sqlalchemy_engine(4)</div><div id='n_method'> N Method Name: fake_sqlalchemy_engine(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/conftest.py</div><div id='n_file'> N File Name: tests/conftest.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 163</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def run_mypy(file: str) -&gt; int:
    <a id="change">return </a>subprocess.run(["mypy", "--config=mypy.ini", f"{str(file)}"]).returncode


def main() -&gt; int:</code></pre><h3>After Change</h3><pre><code class='java'>
        print(f"Iteration {iteration}: running mypy on {len(files)}{&quot remaining&quot if iteration &gt; 1 else &quot&quot} files")
        command = ["mypy", "--config=mypy.ini", "--verbose"] + files
        &#47&#47 We pipe stdout and then print it, otherwise lines can appear in the wrong order in builds.
        process = <a id="change">subprocess.run(</a>command<a id="change">, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)</a>
        for line in process.stdout.split("\n"):
            print(line)
        &#47&#47 Set of files we are hoping to see mentioned in the mypy log.
        files_to_do = set(files)
        &#47&#47 Remove from files_to_do everything that&quots mentioned in the log.
        for line in process.stderr.split("\n"):
            for token in line.split():
                files_to_do.discard(token)
        &#47&#47 If we didn&quott manage to discard any files, there&quots no point continuing. This should not occur, but if
        &#47&#47 it does, we don&quott want to continue indefinitely.
        if len(files_to_do) == len(files):
            print("No further files appear to have been checked!")
            return_code = max(return_code, 1)
            break
        files = sorted(files_to_do)
        return_code<a id="change"> = </a>max(return_code, process.returncode)
        iteration += 1
    return return_code
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/innereye-deeplearning/commit/1136e23352ac8b4e93705b96bdac9f08120f8399#diff-344abec58e93ca8213cf166ae9214a8c5e073b5fd2e8e6811a95832c1011e646L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118653550</div><div id='project'> Project Name: microsoft/innereye-deeplearning</div><div id='commit'> Commit Name: 1136e23352ac8b4e93705b96bdac9f08120f8399</div><div id='time'> Time: 2020-08-14</div><div id='author'> Author: dacart@microsoft.com</div><div id='file'> File Name: mypy_runner.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_mypy(1)</div><div id='n_method'> N Method Name: run_mypy(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mypy_runner.py</div><div id='n_file'> N File Name: mypy_runner.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 15</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 45</div><BR>