<html><h3>Pattern ID :10174
</h3><img src='35954412.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        self.save_for_backward(input, second, rbot0, rbot1)

        <a id="change">assert </a>(input.is_contiguous() == True)
        assert (second.is_contiguous() == True)

        output = second.new_zeros([second.size(0), second.size(1), second.size(2), second.size(3)])</code></pre><h3>After Change</h3><pre><code class='java'>

        self.save_for_backward(input, second, rbot0, rbot1)

        input<a id="change"> = </a><a id="change">input.contiguous()</a>
        second = second.contiguous()

        output = second.new_zeros([second.size(0), second.size(1), second.size(2), second.size(3)])
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/prunetruong/gocor/commit/24a24d0cbd5163d50ccd3407f334442144b62b73#diff-ce476e103dcdda452a12e60d39f1b193c55ee8107f91ba814d2758361eb13d25L397' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35954412</div><div id='project'> Project Name: prunetruong/gocor</div><div id='commit'> Commit Name: 24a24d0cbd5163d50ccd3407f334442144b62b73</div><div id='time'> Time: 2021-06-09</div><div id='author'> Author: truongp@ethz.ch</div><div id='file'> File Name: GOCor/local_correlation/correlation.py</div><div id='m_class'> M Class Name: _FunctionCorrelationTranspose</div><div id='n_method'> N Class Name: _FunctionCorrelationTranspose</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: GOCor/local_correlation/correlation.py</div><div id='n_file'> N File Name: GOCor/local_correlation/correlation.py</div><div id='m_start'> M Start Line: 397</div><div id='m_end'> M End Line: 398</div><div id='n_start'> N Start Line: 397</div><div id='n_end'> N End Line: 398</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.save_for_backward(first, second, rbot0, rbot1)

        <a id="change">assert </a>(first.is_contiguous() == True)
        assert (second.is_contiguous() == True)

        output = first.new_zeros([first.size(0), 81, first.size(2), first.size(3)])</code></pre><h3>After Change</h3><pre><code class='java'>

        self.save_for_backward(first, second, rbot0, rbot1)

        first<a id="change"> = </a><a id="change">first.contiguous()</a>
        second = second.contiguous()

        output = first.new_zeros([first.size(0), 81, first.size(2), first.size(3)])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/prunetruong/gocor/commit/24a24d0cbd5163d50ccd3407f334442144b62b73#diff-ce476e103dcdda452a12e60d39f1b193c55ee8107f91ba814d2758361eb13d25L281' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35954421</div><div id='project'> Project Name: prunetruong/gocor</div><div id='commit'> Commit Name: 24a24d0cbd5163d50ccd3407f334442144b62b73</div><div id='time'> Time: 2021-06-09</div><div id='author'> Author: truongp@ethz.ch</div><div id='file'> File Name: GOCor/local_correlation/correlation.py</div><div id='m_class'> M Class Name: _FunctionCorrelation</div><div id='n_method'> N Class Name: _FunctionCorrelation</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: GOCor/local_correlation/correlation.py</div><div id='n_file'> N File Name: GOCor/local_correlation/correlation.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 288</div><div id='n_start'> N Start Line: 287</div><div id='n_end'> N End Line: 288</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def backward(self, gradOutput):
        first, second, rbot0, rbot1 = self.saved_tensors

        <a id="change">assert </a>(gradOutput.is_contiguous() == True)

        gradFirst = first.new_zeros([first.size(0), first.size(1), first.size(2), first.size(3)]) if \
        self.needs_input_grad[0] == True else None</code></pre><h3>After Change</h3><pre><code class='java'>
    def backward(self, gradOutput):
        first, second, rbot0, rbot1 = self.saved_tensors

        gradOutput<a id="change"> = </a><a id="change">gradOutput.contiguous()</a>

        gradFirst = first.new_zeros([first.size(0), first.size(1), first.size(2), first.size(3)]) if \
        self.needs_input_grad[0] == True else None
        gradSecond = first.new_zeros([first.size(0), first.size(1), first.size(2), first.size(3)]) if \</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/prunetruong/gocor/commit/24a24d0cbd5163d50ccd3407f334442144b62b73#diff-ce476e103dcdda452a12e60d39f1b193c55ee8107f91ba814d2758361eb13d25L334' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35954416</div><div id='project'> Project Name: prunetruong/gocor</div><div id='commit'> Commit Name: 24a24d0cbd5163d50ccd3407f334442144b62b73</div><div id='time'> Time: 2021-06-09</div><div id='author'> Author: truongp@ethz.ch</div><div id='file'> File Name: GOCor/local_correlation/correlation.py</div><div id='m_class'> M Class Name: _FunctionCorrelation</div><div id='n_method'> N Class Name: _FunctionCorrelation</div><div id='m_method'> M Method Name: backward(2)</div><div id='n_method'> N Method Name: backward(2)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: GOCor/local_correlation/correlation.py</div><div id='n_file'> N File Name: GOCor/local_correlation/correlation.py</div><div id='m_start'> M Start Line: 337</div><div id='m_end'> M End Line: 337</div><div id='n_start'> N Start Line: 337</div><div id='n_end'> N End Line: 337</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def multiclass_dice_coeff(input: Tensor, target: Tensor):
    <a id="change">assert </a>input.size() == target.size()
    dice = 0
    &#47&#47 remove backgroud region
    for channel in range(1, input.shape[1]):</code></pre><h3>After Change</h3><pre><code class='java'>
def multiclass_dice_coeff(input: Tensor, target: Tensor):
    Batchsize, Channel = input.shape[0], input.shape[1]
    y_pred = input.float().contiguous().view(Batchsize, Channel, -1)
    y_true = <a id="change">target.long().contiguous()</a>.view(Batchsize, -1)
    y_true = F.one_hot(y_true, Channel)  &#47&#47 N,H*W -&gt; N,H*W, C
    y_true<a id="change"> = </a>y_true.permute(0, 2, 1)  &#47&#47 H, C, H*W
    assert y_pred.size() == y_true.size()
    dice = 0
    &#47&#47 remove backgroud region</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/junqiangchen/pytorchdeeplearing/commit/4c0130e39ce545780538b929f1a87c71404de340#diff-be0d98f09e2841925a55182268279416f90c5c666c0a433c11734e9ec0d57b02L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35954413</div><div id='project'> Project Name: junqiangchen/pytorchdeeplearing</div><div id='commit'> Commit Name: 4c0130e39ce545780538b929f1a87c71404de340</div><div id='time'> Time: 2022-07-12</div><div id='author'> Author: 1207173174@qq.com</div><div id='file'> File Name: model/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: multiclass_dice_coeff(2)</div><div id='n_method'> N Method Name: multiclass_dice_coeff(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model/metric.py</div><div id='n_file'> N File Name: model/metric.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 43</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def backward(self, gradOutput):
        input, second, rbot0, rbot1 = self.saved_tensors

        <a id="change">assert </a>(gradOutput.is_contiguous() == True)

        gradInput = input.new_zeros([input.size(0), input.size(1), input.size(2), input.size(3)]) if \
        self.needs_input_grad[0] == True else None</code></pre><h3>After Change</h3><pre><code class='java'>
    def backward(self, gradOutput):
        input, second, rbot0, rbot1 = self.saved_tensors

        gradOutput<a id="change"> = </a><a id="change">gradOutput.contiguous()</a>

        gradInput = input.new_zeros([input.size(0), input.size(1), input.size(2), input.size(3)]) if \
        self.needs_input_grad[0] == True else None
        gradSecond = second.new_zeros([second.size(0), second.size(1), second.size(2), second.size(3)]) if \</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/prunetruong/gocor/commit/24a24d0cbd5163d50ccd3407f334442144b62b73#diff-ce476e103dcdda452a12e60d39f1b193c55ee8107f91ba814d2758361eb13d25L437' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35954410</div><div id='project'> Project Name: prunetruong/gocor</div><div id='commit'> Commit Name: 24a24d0cbd5163d50ccd3407f334442144b62b73</div><div id='time'> Time: 2021-06-09</div><div id='author'> Author: truongp@ethz.ch</div><div id='file'> File Name: GOCor/local_correlation/correlation.py</div><div id='m_class'> M Class Name: _FunctionCorrelationTranspose</div><div id='n_method'> N Class Name: _FunctionCorrelationTranspose</div><div id='m_method'> M Method Name: backward(2)</div><div id='n_method'> N Method Name: backward(2)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: GOCor/local_correlation/correlation.py</div><div id='n_file'> N File Name: GOCor/local_correlation/correlation.py</div><div id='m_start'> M Start Line: 440</div><div id='m_end'> M End Line: 440</div><div id='n_start'> N Start Line: 440</div><div id='n_end'> N End Line: 440</div><BR>