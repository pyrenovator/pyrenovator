<html><h3>Pattern ID :9119
</h3><img src='33250595.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Run this to run all workflow automaticly
    def main(self):
        <a id="change">self.reset()</a>
        print("========== simulate ==========")
        self.rolling_online_manager.simulate(end_time=self.end_time)
        print(self.rolling_online_manager.get_collector()())
        print(self.rolling_online_manager.get_online_history(self.exp_name))</code></pre><h3>After Change</h3><pre><code class='java'>
        self.rolling_online_manager.simulate(end_time=self.end_time)
        print("========== collect results ==========")
        print(self.rolling_online_manager.get_collector()())
        <a id="change">print("========== online history =========="</a><a id="change">)</a>
        print(self.rolling_online_manager.get_online_history(self.exp_name))


if __name__ == "__main__":</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/67c5740c83b428519427854efb214e58c28eb9ab#diff-17e4c3659e237cf97bf2c08ae833421f543cdedaca6134187b0e32a3927a00bfL128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33250595</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 67c5740c83b428519427854efb214e58c28eb9ab</div><div id='time'> Time: 2021-04-28</div><div id='author'> Author: lzh222333@163.com</div><div id='file'> File Name: examples/online_srv/online_management_simulate.py</div><div id='m_class'> M Class Name: OnlineSimulationExample</div><div id='n_method'> N Class Name: OnlineSimulationExample</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/online_srv/online_management_simulate.py</div><div id='n_file'> N File Name: examples/online_srv/online_management_simulate.py</div><div id='m_start'> M Start Line: 151</div><div id='m_end'> M End Line: 151</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 134</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
					&quotepisode&quot, game_iters, &quotscore %.1f&quot % score, &quotavg score %.1f&quot % avg_score,
					&quottime_steps&quot, n_steps, &quotlearning_steps&quot, learn_iters
				)
				observation, info = <a id="change">env.reset()</a>
				score = 0
		
		&#47&#47 agent.learn()
		BaseModel.hard_update(ppo.last_policy, agent.policy)</code></pre><h3>After Change</h3><pre><code class='java'>
		score_history.extend(cumulative_rewards)
		avg_score = np.mean(cumulative_rewards)
		std_score = np.std(cumulative_rewards)
		<a id="change">print(
			f"iteration: {iteration}, "
			f"avg_score: {avg_score:.1f}, "
			f"std_score: {std_score:.1f}, "
			f"best_curr_score: {np.max(cumulative_rewards):.1f}"</a><a id="change">
		)</a>
		BaseModel.hard_update(ppo.last_policy, agent.policy)
		for _ in range(n_epochs):
			for batch in buffer.get_batch_generator(batch_size=batch_size, device=agent.device, randomize=True):
				trainer._exec_batch(batch)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neurotorch/neurotorch/commit/198788020cc23b8cba6fed918112de1ff32fb3ba#diff-09dfd647bc1273bf6835dc23e0871491b8ce164d28080b9bd4ac74c449399eeeL354' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33250594</div><div id='project'> Project Name: neurotorch/neurotorch</div><div id='commit'> Commit Name: 198788020cc23b8cba6fed918112de1ff32fb3ba</div><div id='time'> Time: 2022-12-15</div><div id='author'> Author: 50332514+JeremieGince@users.noreply.github.com</div><div id='file'> File Name: tutorials/reinforcement_learning/ppo_from_youtube.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tutorials/reinforcement_learning/ppo_from_youtube.py</div><div id='n_file'> N File Name: tutorials/reinforcement_learning/ppo_from_youtube.py</div><div id='m_start'> M Start Line: 357</div><div id='m_end'> M End Line: 428</div><div id='n_start'> N Start Line: 356</div><div id='n_end'> N End Line: 449</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def first_run(self):
        print("========== first_run ==========")
        <a id="change">self.reset()</a>
        self.rolling_online_manager.first_train()
        self.rolling_online_manager.to_pickle(self._ROLLING_MANAGER_PATH)
        print(self.rolling_online_manager.get_collector()())
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.rolling_online_manager.reset()
        print("========== first_run ==========")
        self.rolling_online_manager.first_train()
        <a id="change">print("========== dump =========="</a><a id="change">)</a>
        self.rolling_online_manager.to_pickle(self._ROLLING_MANAGER_PATH)
        print("========== collect results ==========")
        print(self.collector())
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/67c5740c83b428519427854efb214e58c28eb9ab#diff-905e631fd6acf026c2050172fa4b5e2b5ff8c0ce0eebb6c4f1699ab139b325c5L127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33250598</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 67c5740c83b428519427854efb214e58c28eb9ab</div><div id='time'> Time: 2021-04-28</div><div id='author'> Author: lzh222333@163.com</div><div id='file'> File Name: examples/online_srv/rolling_online_management.py</div><div id='m_class'> M Class Name: RollingOnlineExample</div><div id='n_method'> N Class Name: RollingOnlineExample</div><div id='m_method'> M Method Name: first_run(1)</div><div id='n_method'> N Method Name: first_run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/online_srv/rolling_online_management.py</div><div id='n_file'> N File Name: examples/online_srv/rolling_online_management.py</div><div id='m_start'> M Start Line: 129</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 141</div><BR>