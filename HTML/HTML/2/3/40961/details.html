<html><h3>Pattern ID :40961
</h3><img src='115466967.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if rank == 0:
        parameter_count = compute_parameter_count(
            num_layers, hidden_size, vocab_size)
        print(<a id="change">model[0]</a>)
        print(f"Parameter count {parameter_count/1e9:.2f} B")

    &#47&#47 Benchmark step time</code></pre><h3>After Change</h3><pre><code class='java'>
    names = [&quotforward-compute&quot, &quotbackward-compute&quot, &quotbackward-params-all-reduce&quot,
             &quotbackward-embedding-all-reduce&quot, &quotoptimizer&quot]
    for name in names:
        <a id="change">timers(name).reset()</a>

    &#47&#47 Benchmark step time
    repeat = 3
    number = 3</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/alpa-projects/alpa/commit/6dd67226bf2f1f93b285fadabc82d0e3583c5020#diff-89c94ee1ac79d718eff883928243ddcfc1af77e31f87681a6c9af0eccf563524L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115466967</div><div id='project'> Project Name: alpa-projects/alpa</div><div id='commit'> Commit Name: 6dd67226bf2f1f93b285fadabc82d0e3583c5020</div><div id='time'> Time: 2021-07-29</div><div id='author'> Author: lianminzheng@gmail.com</div><div id='file'> File Name: benchmark/megatron/benchmark_gpt_bert_one_case.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: benchmark_gpt_bert_one_case(1)</div><div id='n_method'> N Method Name: benchmark_gpt_bert_one_case(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: benchmark/megatron/benchmark_gpt_bert_one_case.py</div><div id='n_file'> N File Name: benchmark/megatron/benchmark_gpt_bert_one_case.py</div><div id='m_start'> M Start Line: 172</div><div id='m_end'> M End Line: 212</div><div id='n_start'> N Start Line: 137</div><div id='n_end'> N End Line: 186</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    &#47&#47 we keep track of which entities have resolved mappings to specific parsers, so we don&quott run lower
                    &#47&#47 ranked strategies if we don&quott need to

                    query_entity = <a id="change">entities_this_group[0]</a>
                    resolved_parsers = set(mapping.parser_name for mapping in query_entity.mappings)
                    terms_to_consider = filter(
                        lambda x: x.parser_name not in resolved_parsers,
                        terms,</code></pre><h3>After Change</h3><pre><code class='java'>
        :param namespace_strategy_execution:
        :return:
        
        <a id="change">namespace_strategy_execution.reset()</a>
        strategy_max_index = namespace_strategy_execution.longest_mapping_strategy_list_size

        groups = {
            k: list(v) for k, v in sort_then_group(ents_needing_mappings, entity_to_entity_key)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/08cbd53257bc5c3db2769582fcb2fe8d8fcec341#diff-03432c3d3b6f2efced6317dd0b9df63e3d3868df53919f019b1f21b585224ea6L146' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115466966</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 08cbd53257bc5c3db2769582fcb2fe8d8fcec341</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='m_class'> M Class Name: StrategyRunner</div><div id='n_method'> N Class Name: StrategyRunner</div><div id='m_method'> M Method Name: execute_hit_post_processing_strategies(4)</div><div id='n_method'> N Method Name: execute_hit_post_processing_strategies(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='n_file'> N File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='m_start'> M Start Line: 161</div><div id='m_end'> M End Line: 230</div><div id='n_start'> N Start Line: 263</div><div id='n_end'> N End Line: 284</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                tot_env_steps += 1

                &#47&#47 save
                value = <a id="change">self.agent.estimate_value(obs)[0]</a>
                self.buffer.add_transition(obs, action, reward, value, log_prob)
                obs = next_obs

                timeout = traj_length == self.max_trajectory_length</code></pre><h3>After Change</h3><pre><code class='java'>
            env_steps = 0
            num_sampled_trajs = 0
            while env_steps &lt; self.num_env_steps_per_epoch:
                obs, info = <a id="change">self.train_env.reset()</a>
                traj_return = 0
                for traj_step in range(self.max_trajectory_length):
                    &#47&#47 get action
                    action = itemgetter("action")(self.agent.select_action(obs, deterministic=False))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/x35f/unstable_baselines/commit/4f0036392d4f35e65516efa47407b0cfbe05eb81#diff-084f54cf4c9712a3f85d6eb7311649aae3804690c3692160d12c8fa0b3fb9579L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115466969</div><div id='project'> Project Name: x35f/unstable_baselines</div><div id='commit'> Commit Name: 4f0036392d4f35e65516efa47407b0cfbe05eb81</div><div id='time'> Time: 2023-01-16</div><div id='author'> Author: 1621322691@qq.com</div><div id='file'> File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='m_class'> M Class Name: PPOTrainer</div><div id='n_method'> N Class Name: PPOTrainer</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: BaseTrainer</div><div id='n_parent_class'> N Parent Class: BaseTrainer</div><div id='m_file'> M File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='n_file'> N File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 80</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        task_info = tasks.get_task_info(start_info, goal_info)
        if len(task_info) == 0:
            continue
        if demo_task_counter[<a id="change">list(task_info)[0]</a>] &lt; num_samples:
            seq_length = torch.unique(actions, dim=1).shape[1]  &#47&#47 Compute windows_size
            demo_task_counter += Counter(task_info)
            logger.info(f"Tasks Objective: {num_samples}")</code></pre><h3>After Change</h3><pre><code class='java'>
        if task not in tasks_lang.keys():
            continue
        if "slide_" in task:
            <a id="change">env.reset(</a>reset_info, i, seq_length // 2<a id="change">)</a>
            inter_info = env.get_info()
            &#47&#47 check if task was achieved in sequence
            task_info = tasks.get_task_info(start_info, inter_info)
            if len(task_info) &gt; 0:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mees/calvin/commit/3dafb1d021299e9fccc0c298baff9f08717a79e6#diff-9aca857713ce13d8e8d86196abe99ff25d1fc227f2a77b98f280a24e1f70a1aaL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115466971</div><div id='project'> Project Name: mees/calvin</div><div id='commit'> Commit Name: 3dafb1d021299e9fccc0c298baff9f08717a79e6</div><div id='time'> Time: 2021-08-26</div><div id='author'> Author: oier.mees@gmail.com</div><div id='file'> File Name: calvin/utils/automatic_lang_annotator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: annotator(8)</div><div id='n_method'> N Method Name: annotator(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: calvin/utils/automatic_lang_annotator.py</div><div id='n_file'> N File Name: calvin/utils/automatic_lang_annotator.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 59</div><BR>