<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for idx, mask_diff in enumerate(mask_diffs):
            indices = self._unpruned_idxs[idx]
            next_idx = weights_idx + indices.numel()
            <a id="change">weights_to_prune[weights_idx:next_idx]</a> = (
                self._params[idx].data.view(-1)[indices]
                * (mask_diff.view(-1)[indices] == -1.0)  &#47&#47 newly pruned weights
            ).to(weights_to_prune.device)</code></pre><h3>After Change</h3><pre><code class='java'>
            masks that describe how these masks changed since the last update
        
        &#47&#47 calculate optimal perturbation on main process and broadcast to all
        perturb = self._calc_params_perterb(mask_diffs)<a id="change"> if </a>self._is_main_proc<a id="change"> else </a>None
        perturb = self._broadcast_list_from_main([perturb])[0]

        &#47&#47 update weights by mapping to perturbation</code></pre>