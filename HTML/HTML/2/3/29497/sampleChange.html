<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        hbf = HighBiasFold(model)
        hbf.bias_fold(cls_set_info, bn_dict)
        bias1_new = numpy_helper.to_array(ParamUtils.get_param(model.model, convs[1], BIAS_INDEX))
        <a id="change">assert </a>not bias1.sum() == bias1_new.sum()

def _build_session(model):
    </code></pre><h3>After Change</h3><pre><code class='java'>
        input_shape = (1, 3, 32, 32)
        test_data = np.random.randn(*input_shape).astype(np.float32)
        equalize_torch(model_torch, input_shape)
        cle_out<a id="change"> = </a>model_torch(<a id="change">torch.as_tensor(</a>test_data<a id="change">)</a>)

        &#47&#47 Equalize ONNX
        conv_bn_pairs, bn_conv_pairs = fold_all_batch_norms_to_weight(model_onnx.model)</code></pre>