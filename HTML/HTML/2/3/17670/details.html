<html><h3>Pattern ID :17670
</h3><img src='58322408.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

                save_as = (
                    self.logger.experiment[0]
                    if <a id="change">type(</a>self.logger.experiment<a id="change">)</a> == list
                    else self.logger.experiment
                ).log_dir + "/confusion_matrix.png"
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Make confusion matrix
        if (
            self.hparams.test_confusion_matrix
            and <a id="change">hasattr(</a>self, <a id="change">"num_classes"</a><a id="change">)</a>
            and self.trainer.progress_bar_callback.is_enabled
        ):
            try:
                preds = torch.tensor(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lukashedegaard/ride/commit/0a1ee7092312b167a7619a4d86aa5cbc8a9d7704#diff-b0637ec87b9dac9a853c67b4902eb73019e246c16769d5ad532027163e8fd900L260' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58322408</div><div id='project'> Project Name: lukashedegaard/ride</div><div id='commit'> Commit Name: 0a1ee7092312b167a7619a4d86aa5cbc8a9d7704</div><div id='time'> Time: 2021-03-22</div><div id='author'> Author: lukasxhedegaard@gmail.com</div><div id='file'> File Name: ride/lifecycle.py</div><div id='m_class'> M Class Name: Lifecycle</div><div id='n_method'> N Class Name: Lifecycle</div><div id='m_method'> M Method Name: test_epoch_end(2)</div><div id='n_method'> N Method Name: test_epoch_end(2)</div><div id='m_parent_class'> M Parent Class: MetricMixin</div><div id='n_parent_class'> N Parent Class: MetricMixin</div><div id='m_file'> M File Name: ride/lifecycle.py</div><div id='n_file'> N File Name: ride/lifecycle.py</div><div id='m_start'> M Start Line: 274</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 260</div><div id='n_end'> N End Line: 282</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if type(child) == nnq.FloatFunctional or type(child) == nnq.QFunctional:
            if needs_observation(child):
                child.activation_post_process = get_activation_post_process(child.qconfig, device)
        elif has_special_act_post_process(<a id="change">type(</a>child<a id="change">)</a>):
            special_act_post_process = get_default_special_act_post_process(type(child))
            insert_activation_post_process(child, special_act_post_process)
        elif non_leaf_module_list is not None and type(child) in non_leaf_module_list:</code></pre><h3>After Change</h3><pre><code class='java'>

    for name, child in module.named_children():
        if type(child) == nnq.FloatFunctional or type(child) == nnq.QFunctional:
            if <a id="change">hasattr(</a>child, <a id="change">&quotqconfig&quot</a><a id="change">)</a> and child.qconfig is not None:
                child.activation_post_process = get_activation_post_process(child.qconfig, device)
        elif non_leaf_module_list is not None and type(child) in non_leaf_module_list:
            insert_activation_post_process(child)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/25db74bf5e6ed580172d1f9aa637cc9243c6f09d#diff-a6fae041b5102998a862dc32077f83ada8acf6afc8a19f973fa9d3644a82e57aL90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58322405</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 25db74bf5e6ed580172d1f9aa637cc9243c6f09d</div><div id='time'> Time: 2020-10-26</div><div id='author'> Author: albandes@fb.com</div><div id='file'> File Name: torch/quantization/quantize.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: add_observer_(5)</div><div id='n_method'> N Method Name: add_observer_(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch/quantization/quantize.py</div><div id='n_file'> N File Name: torch/quantization/quantize.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 147</div><div id='n_start'> N Start Line: 131</div><div id='n_end'> N End Line: 135</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def cuda2cpu(pred):
    &#47&#47 将cuda的torch变量转为cpu
    if <a id="change">type(</a>pred<a id="change">)</a> == list:
        return pred
    if pred.is_cuda:
        pred_cpu = pred.cpu().numpy()</code></pre><h3>After Change</h3><pre><code class='java'>

def cuda2cpu(pred):
    &#47&#47 将cuda的torch变量转为cpu
    if not <a id="change">hasattr(</a>pred, <a id="change">&quotis_cuda&quot</a><a id="change">)</a>:
        return pred
    if pred.is_cuda:
        try:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/carlsummer/python_developer_tools/commit/34f42943dd7b463eb27a397c7d40cdc38e1eaffb#diff-8beec754aae72e9efc43ecddf901e544645d85c37fa6df30b8315dd7255d4840L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58322406</div><div id='project'> Project Name: carlsummer/python_developer_tools</div><div id='commit'> Commit Name: 34f42943dd7b463eb27a397c7d40cdc38e1eaffb</div><div id='time'> Time: 2021-06-10</div><div id='author'> Author: zengxh@chint.com</div><div id='file'> File Name: python_developer_tools/cv/utils/torch_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: cuda2cpu(1)</div><div id='n_method'> N Method Name: cuda2cpu(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python_developer_tools/cv/utils/torch_utils.py</div><div id='n_file'> N File Name: python_developer_tools/cv/utils/torch_utils.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 90</div><BR>