<html><h3>Pattern ID :9235
</h3><img src='33317192.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for thread in self.transform_threads:
            thread.start()

        <a id="change">while </a>self.pq.empty()<a id="change">:
            </a>if not self.pq.empty():
                break
        for thread in self.push_threads:
            thread.start()</code></pre><h3>After Change</h3><pre><code class='java'>
                for thread in self.transform_threads:
                    thread.start()
                break
            <a id="change">time.sleep(1</a><a id="change">)</a>

        while True:
            if not self.pq.empty():
                for thread in self.push_threads:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/relevanceai/relevanceai/commit/bcd86f07e227544c61cfdd095da6975c5185159b#diff-6381bc42fc96d5408fc21bc0c5e13e7e988d68b4ad1b822e38153923b3d9ccf4L557' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33317192</div><div id='project'> Project Name: relevanceai/relevanceai</div><div id='commit'> Commit Name: bcd86f07e227544c61cfdd095da6975c5185159b</div><div id='time'> Time: 2022-09-19</div><div id='author'> Author: joseph.twin@relevance.ai</div><div id='file'> File Name: relevanceai/operations_new/ops_run.py</div><div id='m_class'> M Class Name: PullTransformPush</div><div id='n_method'> N Class Name: PullTransformPush</div><div id='m_method'> M Method Name: _start_worker_threads(1)</div><div id='n_method'> N Method Name: _start_worker_threads(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: relevanceai/operations_new/ops_run.py</div><div id='n_file'> N File Name: relevanceai/operations_new/ops_run.py</div><div id='m_start'> M Start Line: 559</div><div id='m_end'> M End Line: 568</div><div id='n_start'> N Start Line: 557</div><div id='n_end'> N End Line: 569</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        time.sleep(0.3)

    <a id="change">while </a>True<a id="change">:
        </a>pass


if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
            bin_id, posObj=[0.5, 0.5, 0.1], ornObj=[0, 0, 0, 1]
        )

    <a id="change">time.sleep(1</a><a id="change">)</a>

    bin_aabb_min, bin_aabb_max = mercury.pybullet.get_aabb(bin_id)
    bin_aabb_min += 0.01
    bin_aabb_max -= 0.01</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wkentaro/safepicking/commit/1a11c14cdd6581a34e985e4d875032525109e855#diff-7d79c5e602b59cab12da6ef8ab87c072015cd55c9925b391ace2499125d743f6L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33317188</div><div id='project'> Project Name: wkentaro/safepicking</div><div id='commit'> Commit Name: 1a11c14cdd6581a34e985e4d875032525109e855</div><div id='time'> Time: 2021-03-16</div><div id='author'> Author: www.kentaro.wada@gmail.com</div><div id='file'> File Name: examples/goal/bin_packing_no_act.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/goal/bin_packing_no_act.py</div><div id='n_file'> N File Name: examples/goal/bin_packing_no_act.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 123</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Now loop and wait for a test to complete. The spin-wait here isn&quott a big
        &#47&#47 deal because the number of processes will be O(&#47&#47GPUs) &lt;&lt; O(&#47&#47CPUs).
        any_done = False
        <a id="change">while </a>not any_done<a id="change">:
            </a>for p in processes:
                if not p.is_alive():
                    any_done = True
                    break</code></pre><h3>After Change</h3><pre><code class='java'>
                if not p.is_alive():
                    any_done = True
                    break
            <a id="change">time.sleep(.1</a><a id="change">)</a>  &#47&#47 So we don&quott hog CPU

        &#47&#47 If we hit the timeout, then presume a test is hanged
        if not any_done:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/deepspeed/commit/349f845b838c6992c5ea19e80fc728bef9645962#diff-6dfd44de956710597d8b77a3a67b7c5ce247d6a72ddd61510b5664f6d2e5e67eL107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33317191</div><div id='project'> Project Name: microsoft/deepspeed</div><div id='commit'> Commit Name: 349f845b838c6992c5ea19e80fc728bef9645962</div><div id='time'> Time: 2023-02-10</div><div id='author'> Author: michaelwyatt@microsoft.com</div><div id='file'> File Name: tests/unit/common.py</div><div id='m_class'> M Class Name: DistributedExec</div><div id='n_method'> N Class Name: DistributedExec</div><div id='m_method'> M Method Name: _launch_procs(2)</div><div id='n_method'> N Method Name: _launch_procs(2)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: tests/unit/common.py</div><div id='n_file'> N File Name: tests/unit/common.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 113</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            stderr=subprocess.PIPE,
            bufsize=1,
        )
        <a id="change">while </a>processes_alive([jinad_process, flow_process])<a id="change">:
            </a>time.sleep(15)
            logger.info(&quotrolling update done in process&quot)
            &#47&#47 add query testing
            query_doc = Document()</code></pre><h3>After Change</h3><pre><code class='java'>
    try:
        logger.info(&quotstarting jinad...&quot)
        os.system(&quotnohup jinad &gt; jinad.log 2&gt; jinaderr.log &&quot)
        <a id="change">time.sleep(2</a><a id="change">)</a>
        logger.info(&quotstarting app.py...&quot)
        os.system(f&quotnohup {sys.executable} -u app.py -t flows &gt; flow.log 2&gt; flowerr.log &&quot)
        time.sleep(15)
        logger.info(&quotrolling update done in process&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/f5b1bcec4d3ae544568b6f108fdf48ee71a3b776#diff-775351c1eb007cb0f7fcfedd56a9a408aa8b73197739e41ca866ee532fa9f058L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 33317187</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: f5b1bcec4d3ae544568b6f108fdf48ee71a3b776</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: cristian.mitroi@jina.ai</div><div id='file'> File Name: wikipedia-sentences-query-while-indexing/tests/test_query_while_indexing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_query_while_indexing(0)</div><div id='n_method'> N Method Name: test_query_while_indexing(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: wikipedia-sentences-query-while-indexing/tests/test_query_while_indexing.py</div><div id='n_file'> N File Name: wikipedia-sentences-query-while-indexing/tests/test_query_while_indexing.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 69</div><BR>