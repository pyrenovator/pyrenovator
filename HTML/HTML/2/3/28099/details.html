<html><h3>Pattern ID :28099
</h3><img src='83049339.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        neighbors, distances, distance_vecs = nl(pos, batch)
    &#47&#47print
    print("Batch with largest number of atoms: {}".format(int(n_atoms_per_batch.max())))
    <a id="change">print(</a>"Batch with smallest number of atoms: {}".format(int(n_atoms_per_batch.min()))<a id="change">)</a>
    print("Number of pairs: {}, Number of particles: {}".format(int(neighbors.shape[1]), int(n_atoms_per_batch.to(torch.double).
                                                                                             sum().item())))
    if device == &quotcuda&quot:
        torch.cuda.synchronize()</code></pre><h3>After Change</h3><pre><code class='java'>
        Average time per batch in seconds.
    
    torch.random.manual_seed(12344)
    <a id="change">np.random.seed(43211</a><a id="change">)</a>
    num_particles = total_num_particles // n_batches
    expected_num_neighbors = mean_num_neighbors
    cutoff = np.cbrt(3 * expected_num_neighbors / (4 * np.pi * density));
    n_atoms_per_batch = torch.randint(int(num_particles/2), int(num_particles*2), size=(n_batches,),device="cpu")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/730ecd458eea34f7e18cf47960d6ad4e5561c9ef#diff-ff79c38fc08d4f21f1ee7eca2a91226a86d0390944aa221e91f783d20aa7ddf0L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83049339</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: 730ecd458eea34f7e18cf47960d6ad4e5561c9ef</div><div id='time'> Time: 2023-05-06</div><div id='author'> Author: raulppelaez@gmail.com</div><div id='file'> File Name: benchmarks/neighbors.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: benchmark_neighbors(6)</div><div id='n_method'> N Method Name: benchmark_neighbors(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: benchmarks/neighbors.py</div><div id='n_file'> N File Name: benchmarks/neighbors.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    image_paths.append(os.path.join("/data",line[0]))
            else:
                break
        <a id="change">print(</a>image_paths<a id="change">)</a>
        self.__file_list =  image_paths
        

if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
    def get_first_10_imgs(self):
        fh = open(self.__label_path)
        image_paths = {}
        <a id="change">random.seed(1</a><a id="change">)</a>
        lines = random.choices(fh.readlines(),k=10)

        for line in lines:
            line = line.rstrip().split()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jingtianyilong/yolov4-pytorch/commit/47671101d0e0abe291ba461ec21f9a755a3fa8da#diff-4bae857ce6398a4645b227fbd4ff1b9e49ae54239baded3628dc802b0ae1f9ccL61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83049338</div><div id='project'> Project Name: jingtianyilong/yolov4-pytorch</div><div id='commit'> Commit Name: 47671101d0e0abe291ba461ec21f9a755a3fa8da</div><div id='time'> Time: 2021-01-25</div><div id='author'> Author: zijie.guo@daimler.com</div><div id='file'> File Name: visualize_demo.py</div><div id='m_class'> M Class Name: Detection</div><div id='n_method'> N Class Name: Detection</div><div id='m_method'> M Method Name: get_first_10_imgs(1)</div><div id='n_method'> N Method Name: get_first_10_imgs(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: visualize_demo.py</div><div id='n_file'> N File Name: visualize_demo.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 91</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                src_val=src_val,
                target_train=target_train,
            )
            <a id="change">print(</a>score<a id="change">)</a>

        shutil.rmtree(TEST_FOLDER)

        &#47&#47 correct_weights = get_weight(</code></pre><h3>After Change</h3><pre><code class='java'>
class TestDeepEmbeddedValidator(unittest.TestCase):
    def test_deep_embedded_validator(self):
        torch.manual_seed(1234)
        <a id="change">np.random.seed(1234</a><a id="change">)</a>
        validator = DeepEmbeddedValidator(
            temp_folder=os.path.join(TEST_FOLDER, "deep_embedded_validation"),
            batch_size=256,
        )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kevinmusgrave/pytorch-adapt/commit/c4058b413f5b5dc09ea89ad6b2ad6f2a175dedec#diff-1b77dfa2a41a71100391dd1ba03b76ae0a1de57524227565aebe20ba2ef6d1b1L79' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83049337</div><div id='project'> Project Name: kevinmusgrave/pytorch-adapt</div><div id='commit'> Commit Name: c4058b413f5b5dc09ea89ad6b2ad6f2a175dedec</div><div id='time'> Time: 2022-01-31</div><div id='author'> Author: tkm45@cornell.edu</div><div id='file'> File Name: tests/validators/test_deep_embedded_validator.py</div><div id='m_class'> M Class Name: TestDeepEmbeddedValidator</div><div id='n_method'> N Class Name: TestDeepEmbeddedValidator</div><div id='m_method'> M Method Name: test_deep_embedded_validator(1)</div><div id='n_method'> N Method Name: test_deep_embedded_validator(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/validators/test_deep_embedded_validator.py</div><div id='n_file'> N File Name: tests/validators/test_deep_embedded_validator.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 131</div><BR>