<html><h3>Pattern ID :38683
</h3><img src='110627768.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                                                             requires_grad=False))

        &#47&#47 save the quantizer added parameters for later calculations
        self.quantizer_parameters = {THRESHOLD_TENSOR: <a id="change">layer.get_parameter(</a>name + "_" + THRESHOLD_TENSOR<a id="change">)</a>}

        return self.quantizer_parameters
</code></pre><h3>After Change</h3><pre><code class='java'>
                                                                             requires_grad=False))

        &#47&#47 save the quantizer added parameters for later calculations
        <a id="change">self.add_quantizer_variable(</a>THRESHOLD_TENSOR, <a id="change">layer.get_parameter(</a>name + "_" + THRESHOLD_TENSOR<a id="change">)</a>, VariableGroup.QPARAMS<a id="change">)</a>


    def __call__(self,
                 inputs: nn.Parameter,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sony/model_optimization/commit/99a264c23aa2fa4da3496c980d552bc2c014409a#diff-5a194b35689bcb18308e7ff806b876f0a88fc35a2e7d0fe22a5e45672c183549L90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110627768</div><div id='project'> Project Name: sony/model_optimization</div><div id='commit'> Commit Name: 99a264c23aa2fa4da3496c980d552bc2c014409a</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: 54019246+eladc-git@users.noreply.github.com</div><div id='file'> File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_class'> M Class Name: STEWeightQATQuantizer</div><div id='n_method'> N Class Name: STEWeightQATQuantizer</div><div id='m_method'> M Method Name: initialize_quantization(4)</div><div id='n_method'> N Method Name: initialize_quantization(4)</div><div id='m_parent_class'> M Parent Class: BasePytorchQATTrainableQuantizer</div><div id='n_parent_class'> N Parent Class: BasePytorchQATTrainableQuantizer</div><div id='m_file'> M File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='n_file'> N File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 90</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 save the quantizer added parameters for later calculations
        self.quantizer_parameters = {PTQ_THRESHOLD: layer.get_parameter(f"{name}_{PTQ_THRESHOLD}"),
                                     AUXVAR: <a id="change">layer.get_parameter(</a>f"{name}_{AUXVAR}"<a id="change">)</a>}

        return self.quantizer_parameters
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 save the quantizer added parameters for later calculations
        self.add_quantizer_variable(PTQ_THRESHOLD, layer.get_parameter(f"{name}_{PTQ_THRESHOLD}"), VariableGroup.QPARAMS)
        <a id="change">self.add_quantizer_variable(</a>AUXVAR, <a id="change">layer.get_parameter(</a>f"{name}_{AUXVAR}"<a id="change">)</a>, VariableGroup.WEIGHTS<a id="change">)</a>


    def get_quant_config(self) -&gt; Dict[str, np.ndarray]:
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sony/model_optimization/commit/99a264c23aa2fa4da3496c980d552bc2c014409a#diff-66cf65a6f2e4c20699ffd5b9c0a80fd25376c0287dddc48be3d9982cb3ae13fdL110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110627769</div><div id='project'> Project Name: sony/model_optimization</div><div id='commit'> Commit Name: 99a264c23aa2fa4da3496c980d552bc2c014409a</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: 54019246+eladc-git@users.noreply.github.com</div><div id='file'> File Name: model_compression_toolkit/gptq/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_class'> M Class Name: STEWeightGPTQQuantizer</div><div id='n_method'> N Class Name: STEWeightGPTQQuantizer</div><div id='m_method'> M Method Name: initialize_quantization(4)</div><div id='n_method'> N Method Name: initialize_quantization(4)</div><div id='m_parent_class'> M Parent Class: BasePytorchGPTQTrainableQuantizer</div><div id='n_parent_class'> N Parent Class: BasePytorchGPTQTrainableQuantizer</div><div id='m_file'> M File Name: model_compression_toolkit/gptq/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='n_file'> N File Name: model_compression_toolkit/gptq/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 130</div><div id='n_end'> N End Line: 131</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        layer.register_parameter(f"{name}_{AUXVAR}", nn.Parameter(alpha, requires_grad=True))

        &#47&#47 save the quantizer added parameters for later calculations
        self.quantizer_parameters = {PTQ_THRESHOLD: <a id="change">layer.get_parameter(</a>f"{name}_{PTQ_THRESHOLD}"<a id="change">)</a>,
                                     AUXVAR: layer.get_parameter(f"{name}_{AUXVAR}"),
                                     GPTQ_ITER: layer.get_parameter(f"{name}_{GPTQ_ITER}")}
</code></pre><h3>After Change</h3><pre><code class='java'>
        layer.register_parameter(f"{name}_{AUXVAR}", nn.Parameter(alpha, requires_grad=True))

        &#47&#47 save the quantizer added parameters for later calculations
        <a id="change">self.add_quantizer_variable(</a>PTQ_THRESHOLD, <a id="change">layer.get_parameter(</a>f"{name}_{PTQ_THRESHOLD}"<a id="change">)</a>, VariableGroup.QPARAMS<a id="change">)</a>
        self.add_quantizer_variable(AUXVAR, layer.get_parameter(f"{name}_{AUXVAR}"), VariableGroup.WEIGHTS)
        self.add_quantizer_variable(GPTQ_ITER, layer.get_parameter(f"{name}_{GPTQ_ITER}"), VariableGroup.WEIGHTS)

        if self.quantization_parameter_learning:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sony/model_optimization/commit/99a264c23aa2fa4da3496c980d552bc2c014409a#diff-8a3237209ce9096bb409cd9ac6184a2afdb418876189bd198e0403111edbeb57L162' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110627770</div><div id='project'> Project Name: sony/model_optimization</div><div id='commit'> Commit Name: 99a264c23aa2fa4da3496c980d552bc2c014409a</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: 54019246+eladc-git@users.noreply.github.com</div><div id='file'> File Name: model_compression_toolkit/gptq/pytorch/quantizer/soft_rounding/symmetric_soft_quantizer.py</div><div id='m_class'> M Class Name: SymmetricSoftRoundingGPTQ</div><div id='n_method'> N Class Name: SymmetricSoftRoundingGPTQ</div><div id='m_method'> M Method Name: initialize_quantization(4)</div><div id='n_method'> N Method Name: initialize_quantization(4)</div><div id='m_parent_class'> M Parent Class: BasePytorchGPTQTrainableQuantizer</div><div id='n_parent_class'> N Parent Class: BasePytorchGPTQTrainableQuantizer</div><div id='m_file'> M File Name: model_compression_toolkit/gptq/pytorch/quantizer/soft_rounding/symmetric_soft_quantizer.py</div><div id='n_file'> N File Name: model_compression_toolkit/gptq/pytorch/quantizer/soft_rounding/symmetric_soft_quantizer.py</div><div id='m_start'> M Start Line: 198</div><div id='m_end'> M End Line: 209</div><div id='n_start'> N Start Line: 196</div><div id='n_end'> N End Line: 204</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        layer.register_parameter(name, nn.Parameter(to_torch_tensor(self.threshold_tensor), requires_grad=True))

        &#47&#47 save the quantizer added parameters for later calculations
        self.quantizer_parameters = {THRESHOLD_TENSOR: <a id="change">layer.get_parameter(</a>name<a id="change">)</a>}
        return self.quantizer_parameters

    def __call__(self,</code></pre><h3>After Change</h3><pre><code class='java'>
        layer.register_parameter(name, nn.Parameter(to_torch_tensor(self.threshold_tensor), requires_grad=True))

        &#47&#47 save the quantizer added parameters for later calculations
        <a id="change">self.add_quantizer_variable(</a>THRESHOLD_TENSOR, <a id="change">layer.get_parameter(</a>name<a id="change">)</a>, VariableGroup.QPARAMS<a id="change">)</a>

    def __call__(self,
                 inputs: torch.Tensor,
                 training: bool = True) -&gt; torch.Tensor:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sony/model_optimization/commit/99a264c23aa2fa4da3496c980d552bc2c014409a#diff-5a194b35689bcb18308e7ff806b876f0a88fc35a2e7d0fe22a5e45672c183549L158' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110627774</div><div id='project'> Project Name: sony/model_optimization</div><div id='commit'> Commit Name: 99a264c23aa2fa4da3496c980d552bc2c014409a</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: 54019246+eladc-git@users.noreply.github.com</div><div id='file'> File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_class'> M Class Name: STEActivationQATQuantizer</div><div id='n_method'> N Class Name: STEActivationQATQuantizer</div><div id='m_method'> M Method Name: initialize_quantization(4)</div><div id='n_method'> N Method Name: initialize_quantization(4)</div><div id='m_parent_class'> M Parent Class: BasePytorchQATTrainableQuantizer</div><div id='n_parent_class'> N Parent Class: BasePytorchQATTrainableQuantizer</div><div id='m_file'> M File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='n_file'> N File Name: model_compression_toolkit/qat/pytorch/quantizer/ste_rounding/symmetric_ste.py</div><div id='m_start'> M Start Line: 168</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 169</div><div id='n_end'> N End Line: 169</div><BR>