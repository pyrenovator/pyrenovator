<html><h3>Pattern ID :25529
</h3><img src='77726403.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                )

        for name, parameter in exec_properties.items():
            <a id="change">function_args[name] = </a>parameter

        returns = self._FUNCTION(**function_args)
        if return_artifact is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
        pydantic_c: Type[pydantic.BaseModel] = create_model(
            "params", **{k: (v, ...) for k, v in param_spec.items()}
        )
        function_args.update(<a id="change">pydantic_c.parse_obj(new_exec).dict()</a>)

        returns = self._FUNCTION(**function_args)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/1bedf476dccfee4b8bd3d27b90aad192e90b810e#diff-35d414758e8b047715253b40ecea2974475f328c13f27da5a27304070fdacad9L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77726403</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 1bedf476dccfee4b8bd3d27b90aad192e90b810e</div><div id='time'> Time: 2021-10-01</div><div id='author'> Author: bariscandurak@hotmail.com</div><div id='file'> File Name: src/zenml/steps/utils.py</div><div id='m_class'> M Class Name: _FunctionExecutor</div><div id='n_method'> N Class Name: _FunctionExecutor</div><div id='m_method'> M Method Name: Do(4)</div><div id='n_method'> N Method Name: Do(4)</div><div id='m_parent_class'> M Parent Class: BaseExecutor</div><div id='n_parent_class'> N Parent Class: BaseExecutor</div><div id='m_file'> M File Name: src/zenml/steps/utils.py</div><div id='n_file'> N File Name: src/zenml/steps/utils.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 104</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 on MAC OS, we need to set this environment variable
        &#47&#47 to fix problems with the fork() calls (see this thread
        &#47&#47 for more information: http://sealiesoftware.com/blog/archive/2017/6/5/Objective-C_and_fork_in_macOS_1013.html)
        <a id="change">os.environ["OBJC_DISABLE_INITIALIZE_FORK_SAFETY"] = </a>"YES"
        server = deployer.deploy_server(
            deployment_config, timeout=SERVER_START_STOP_TIMEOUT
        )</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 on MAC OS, we need to set this environment variable
    &#47&#47 to fix problems with the fork() calls (see this thread
    &#47&#47 for more information: http://sealiesoftware.com/blog/archive/2017/6/5/Objective-C_and_fork_in_macOS_1013.html)
    <a id="change">mocker.patch.dict(
        </a>os.environ, {"OBJC_DISABLE_INITIALIZE_FORK_SAFETY": "YES"}<a id="change">
    )</a>
    port = scan_for_available_port(start=8003, stop=9000)
    deployment_config = ServerDeploymentConfig(
        name="test_server",
        provider="local",</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/e05a0ff0a91d268e3937cd700e0bcbb2cf8576e7#diff-a2fda76917fbf84fd2a2cd10e916ef984869e1a1a46b21d34ca92f524b072249L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77726401</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: e05a0ff0a91d268e3937cd700e0bcbb2cf8576e7</div><div id='time'> Time: 2023-03-03</div><div id='author'> Author: schustmi@users.noreply.github.com</div><div id='file'> File Name: tests/unit/zen_server/test_zen_server.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_server_up_down(2)</div><div id='n_method'> N Method Name: test_server_up_down(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/unit/zen_server/test_zen_server.py</div><div id='n_file'> N File Name: tests/unit/zen_server/test_zen_server.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 37</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 make sure the environment variable is set, then the global config should
    &#47&#47 return the corresponding value
    <a id="change">os.environ["ZENML_ANALYTICS_OPT_IN"] = </a>"false"
    assert config.analytics_opt_in is False
</code></pre><h3>After Change</h3><pre><code class='java'>
    config = GlobalConfig()

    &#47&#47 delete the environment variable that is set at the beginning of all tests
    <a id="change">mocker.patch.dict(</a>os.environ<a id="change">, values={}, clear=True)</a>
    assert config.analytics_opt_in is True

    &#47&#47 make sure the environment variable is set, then the global config should
    &#47&#47 return the corresponding value</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/eb8c8d4d35159cb9cbd455fd645fd353bc0d3587#diff-14bf9d9abe227fbdae8f8b04f57d2f48017b3ca963c474ac887aa108246907b5L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77726406</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: eb8c8d4d35159cb9cbd455fd645fd353bc0d3587</div><div id='time'> Time: 2022-01-20</div><div id='author'> Author: schustmi@users.noreply.github.com</div><div id='file'> File Name: tests/unit/config/test_global_config.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_global_config_returns_value_from_environment_variable(1)</div><div id='n_method'> N Method Name: test_global_config_returns_value_from_environment_variable(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/unit/config/test_global_config.py</div><div id='n_file'> N File Name: tests/unit/config/test_global_config.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 56</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                model = pydantic_c(**{k: v})

                &#47&#47 always jsonify
                <a id="change">self.__params[k] = </a>model.json()

                &#47&#47 we can also maybe use dict or json here
                self.PARAM_SPEC[k] = str</code></pre><h3>After Change</h3><pre><code class='java'>

            &#47&#47 always jsonify
            import json
            self.__params = {k: json.dumps(v) for k, v in <a id="change">model.dict()</a>.items()}

        except RuntimeError:
            &#47&#47 TODO [MED]: Change this to say more clearly what</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/cfaf64a733041271d1b3710307c0ea561f190f70#diff-ea6a3cc50bec27c1d3046731637ee6c19ffafad48025a8b84a4352e268861151L67' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77726407</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: cfaf64a733041271d1b3710307c0ea561f190f70</div><div id='time'> Time: 2021-09-30</div><div id='author'> Author: bariscandurak@hotmail.com</div><div id='file'> File Name: src/zenml/steps/base_step.py</div><div id='m_class'> M Class Name: BaseStep</div><div id='n_method'> N Class Name: BaseStep</div><div id='m_method'> M Method Name: __init__(1)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/steps/base_step.py</div><div id='n_file'> N File Name: src/zenml/steps/base_step.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 106</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 116</div><BR>