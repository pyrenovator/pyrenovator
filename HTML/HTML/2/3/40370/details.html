<html><h3>Pattern ID :40370
</h3><img src='114529027.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        total_df.columns = new_columns

        &#47&#47 Split the dataset in normal and abnormal examples
        normal_df = total_df[total_df.target == <a id="change">str(</a>label_normal<a id="change">)</a>].drop(labels=&quottarget&quot, axis=1)
        anomaly_df = total_df[total_df.target != str(label_normal)].drop(labels=&quottarget&quot, axis=1)

        if experiment == "features":</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Load the data and create a train/test set with split
        with open(self.dir / "ECG5000_TRAIN.arff") as f:
            data, _ = loadarff(f)
            total_df<a id="change"> = </a><a id="change">pd.DataFrame(</a>data<a id="change">)</a>
        with open(self.dir / "ECG5000_TEST.arff") as f:
            data, _ = loadarff(f)
            total_df = total_df.append(pd.DataFrame(data))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jonathancrabbe/label-free-xai/commit/7832fb8cd17720cf452ccc75704f1eb46a4b0da6#diff-9963193f39b43b9cfb35ddf270b57ea89d7f4e464d38cb2dec5b22174d0c79f2L175' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114529027</div><div id='project'> Project Name: jonathancrabbe/label-free-xai</div><div id='commit'> Commit Name: 7832fb8cd17720cf452ccc75704f1eb46a4b0da6</div><div id='time'> Time: 2022-05-24</div><div id='author'> Author: jonathan.cr1302@gmail.com</div><div id='file'> File Name: utils/datasets.py</div><div id='m_class'> M Class Name: ECG5000</div><div id='n_method'> N Class Name: ECG5000</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: utils/datasets.py</div><div id='n_file'> N File Name: utils/datasets.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 198</div><div id='n_start'> N Start Line: 176</div><div id='n_end'> N End Line: 200</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	y = df[&quotT&quot].T[targets2index[target]]
	
	drugs = df[&quotX&quot]
	drugs_idx = np.array([&quotDrug &quot + <a id="change">str(</a>i<a id="change">)</a> for i in list(range(drugs.shape[0]))])

	return drugs, y, drugs_idx
</code></pre><h3>After Change</h3><pre><code class='java'>
	import pandas as pd
	df = pd.DataFrame()
	df[&quotX&quot] = pd.Series([i for i in inx[&quotX&quot]])
	df = pd.concat([df, <a id="change">pd.DataFrame(</a>inx[&quotT&quot]<a id="change">, columns = targets)</a>], axis = 1)
	df[&quotID&quot]<a id="change"> = </a>[&quotDrug &quot + str(i+1) for i in range(len(df))]
	df.to_pickle(&quot/Users/kexinhuang/Desktop/qm7b.pkl&quot)

def QM8_9():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mims-harvard/tdc/commit/77a6e4386efd75bd5d14443ee59d04cdfb98e3cc#diff-579c6125b5c3fca2c843ab9b6d8fc34263fbfcabbd55e6d404fcbadbcb699b63L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114529026</div><div id='project'> Project Name: mims-harvard/tdc</div><div id='commit'> Commit Name: 77a6e4386efd75bd5d14443ee59d04cdfb98e3cc</div><div id='time'> Time: 2020-11-06</div><div id='author'> Author: kexinhuang@hsph.harvard.edu</div><div id='file'> File Name: data_process/QM_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: QM7_process(3)</div><div id='n_method'> N Method Name: QM7_process(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data_process/QM_utils.py</div><div id='n_file'> N File Name: data_process/QM_utils.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    input_feats = list(dataset.spec().keys())
    output_feats = list(model.output_spec().keys())
    pred_key_to_explain = <a id="change">str(</a>config[EXPLAIN_KEY]<a id="change">)</a>
    sample_size = int(config[SAMPLE_KEY]) if config[SAMPLE_KEY] else 0

    if not pred_key_to_explain or pred_key_to_explain not in output_feats:
      logging.warning(&quotSHAP requires an output field to explain.&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
      inputs_to_use: pd.DataFrame = examples

    random_baseline = dataset.sample(1).examples
    background<a id="change"> = </a><a id="change">pd.DataFrame(</a>random_baseline<a id="change">)</a>[input_feats]

    def prediction_fn(examples):
      dict_examples: list[JsonDict] = [{</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/13110812e9d3ed5eeefe6267dddf940522e3685c#diff-6f37f6762d295a38ae02d08cb302f701c130ffaf330e95533d87ef7e73d28ee8L97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114529020</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: 13110812e9d3ed5eeefe6267dddf940522e3685c</div><div id='time'> Time: 2022-11-21</div><div id='author'> Author: ryanmullins@google.com</div><div id='file'> File Name: lit_nlp/components/shap_explainer.py</div><div id='m_class'> M Class Name: TabularShapExplainer</div><div id='n_method'> N Class Name: TabularShapExplainer</div><div id='m_method'> M Method Name: run(6)</div><div id='n_method'> N Method Name: run(6)</div><div id='m_parent_class'> M Parent Class: lit_components.Interpreter</div><div id='n_parent_class'> N Parent Class: lit_components.Interpreter</div><div id='m_file'> M File Name: lit_nlp/components/shap_explainer.py</div><div id='n_file'> N File Name: lit_nlp/components/shap_explainer.py</div><div id='m_start'> M Start Line: 124</div><div id='m_end'> M End Line: 174</div><div id='n_start'> N Start Line: 124</div><div id='n_end'> N End Line: 178</div><BR>