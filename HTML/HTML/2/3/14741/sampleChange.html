<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 transformer feature fusion
        pc_feats = self.corr_module(pc_feats, part_valids)  &#47&#47 [B, P, C]
        &#47&#47 MLP predict poses
        instance_label<a id="change"> = </a><a id="change">instance_label.type_as(</a>pc_feats<a id="change">)</a>
        feats = torch.cat([pc_feats, instance_label], dim=-1)  &#47&#47 [B, P, C+P]
        quat, trans = self.pose_predictor(feats)

        pred_dict = {</code></pre><h3>After Change</h3><pre><code class='java'>
            B, P, N, _ = part_pcs.shape
            valid_mask = (part_valids == 1)
            &#47&#47 shared-weight encoder
            valid_pcs = <a id="change">part_pcs[valid_mask]</a>  &#47&#47 [n, N, 3]
            valid_feats = self.encoder(valid_pcs)  &#47&#47 [n, C]
            pc_feats = torch.zeros(B, P, self.pc_feat_dim).type_as(valid_feats)
            pc_feats[valid_mask] = valid_feats</code></pre>