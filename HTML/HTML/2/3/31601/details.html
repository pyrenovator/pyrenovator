<html><h3>Pattern ID :31601
</h3><img src='92258383.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.masks_fps = [os.path.join(masks_dir, mask_id) for mask_id in self.mask_ids]

        &#47&#47 convert str names to class values on masks
        self.class_values = [self.CLASSES.index(<a id="change">cls.lower()</a>)+1 for cls in classes]

        self.augmentation = augmentation
        self.preprocessing = preprocessing</code></pre><h3>After Change</h3><pre><code class='java'>

    def __init__(self, data_dir, augmentation=None):
        images_dir = os.path.join(data_dir, &quotrgb&quot)
        masks_dir<a id="change"> = </a><a id="change">os.path.join(</a>data_dir, &quotmasks&quot<a id="change">)</a>
        self.image_ids = sorted(os.listdir(images_dir))
        self.mask_ids = sorted(os.listdir(masks_dir))
        self.images_fps = [os.path.join(images_dir, image_id) for image_id in self.image_ids]
        self.masks_fps = [os.path.join(masks_dir, mask_id) for mask_id in self.mask_ids]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ais-bonn/vp-suite/commit/390d6a59e5d07a80f1d75348720f59d34fb085a0#diff-11bb3b632c84e01e0bf1b576e72c513fd062811e900ebcb5f22df0eac7d3b0d9L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92258383</div><div id='project'> Project Name: ais-bonn/vp-suite</div><div id='commit'> Commit Name: 390d6a59e5d07a80f1d75348720f59d34fb085a0</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: boltres@ais.uni-bonn.de</div><div id='file'> File Name: dataset.py</div><div id='m_class'> M Class Name: SynpickDataset</div><div id='n_method'> N Class Name: SynpickDataset</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: dataset.py</div><div id='n_file'> N File Name: dataset.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 17</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            f"task {task} unsupported for export_transformer_to_onnx. Supported "
            f"tasks include {list(_TASK_TO_CONSTRUCTOR.keys())}"
        )
    auto_model_constructor = _TASK_TO_CONSTRUCTOR[<a id="change">task.lower()</a>]

    if not os.path.isdir(model_path):
        raise ValueError(</code></pre><h3>After Change</h3><pre><code class='java'>
        pipeline, it will look only for &quotmodel.onnx&quot
    :return: path to the exported ONNX file
    
    task<a id="change"> = </a><a id="change">"-".join(</a>task.lower().split("_")<a id="change">)</a>
    if task not in _TASK_TO_CONSTRUCTOR:
        raise ValueError(
            f"task {task} unsupported for export_transformer_to_onnx. Supported "
            f"tasks include {list(_TASK_TO_CONSTRUCTOR.keys())}"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/sparseml/commit/9fdc4c4cf0bdd4b9cb34e8c7ca7f065f492b5c4f#diff-d3d8274c434e2beb4229ea279576d0e7a7731b703ba045211f91b6c02dd0d026L101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92258379</div><div id='project'> Project Name: neuralmagic/sparseml</div><div id='commit'> Commit Name: 9fdc4c4cf0bdd4b9cb34e8c7ca7f065f492b5c4f</div><div id='time'> Time: 2022-01-19</div><div id='author'> Author: bfineran@users.noreply.github.com</div><div id='file'> File Name: src/sparseml/transformers/utils/export.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: export_transformer_to_onnx(6)</div><div id='n_method'> N Method Name: export_transformer_to_onnx(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/sparseml/transformers/utils/export.py</div><div id='n_file'> N File Name: src/sparseml/transformers/utils/export.py</div><div id='m_start'> M Start Line: 126</div><div id='m_end'> M End Line: 131</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 132</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.atoms_str = atom
        self.basis = basis

        if <a id="change">self.basis.lower()</a> not in [&quotsz&quot,&quotdz&quot]:
            raise ValueError("Only DZ and SZ basis set supported")

        &#47&#47 process the atom name/pos</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 get the basis folder
        self.basis_path = os.path.dirname(os.path.realpath(__file__))
        self.basis_path = os.path.join(self.basis_path,&quotatomicdata&quot)
        self.basis_path<a id="change"> = </a><a id="change">os.path.join(</a>self.basis_path,self.basis_type<a id="change">)</a>
        self.basis_path = os.path.join(self.basis_path, basis.upper())

        &#47&#47 init the basis data
        self.nshells = [] &#47&#47 number of shell per atom</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/74731adef629b6f7c9b971bc1c1e46c207d99cc9#diff-76e89d540a8754a7f50a2072cbb656a0650fc8eb6874b78a85933197016ff1b2L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92258377</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 74731adef629b6f7c9b971bc1c1e46c207d99cc9</div><div id='time'> Time: 2019-08-13</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: pyCHAMP/wavefunction/molecule.py</div><div id='m_class'> M Class Name: Molecule</div><div id='n_method'> N Class Name: Molecule</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: pyCHAMP/wavefunction/molecule.py</div><div id='n_file'> N File Name: pyCHAMP/wavefunction/molecule.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    if is_py2:
        text = unicode(text)
    text = <a id="change">text.lower()</a>
    text = unicodedata.normalize(&quotNFD&quot, text)
    text = &quot&quot.join([ch for ch in text if unicodedata.category(ch) != &quotMn&quot])
    return text
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    &#47&#47 convert non-special tokens to lowercase
    escaped_special_toks = [re.escape(s_tok) for s_tok in never_split]
    pattern = r"(" + <a id="change">r"|".join(</a>escaped_special_toks<a id="change">)</a> + r")|" + r"(.+?)"
    text<a id="change"> = </a>re.sub(pattern, lambda m: m.groups()[0] or m.groups()[1].lower(), text)

    &#47&#47 text = text.lower()
    text = unicodedata.normalize(&quotNFD&quot, text)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/bert4torch/commit/78ab60ac9f6a9e07bdf1cc004e7da931026d1bd3#diff-5f2128d290e7d03d38af8d6583c7a89df1e6996b620f9ef79c90b549090b467eL175' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92258376</div><div id='project'> Project Name: tongjilibo/bert4torch</div><div id='commit'> Commit Name: 78ab60ac9f6a9e07bdf1cc004e7da931026d1bd3</div><div id='time'> Time: 2022-06-04</div><div id='author'> Author: tongjilibo@163.com</div><div id='file'> File Name: bert4torch/snippets.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: lowercase_and_normalize(2)</div><div id='n_method'> N Method Name: lowercase_and_normalize(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: bert4torch/snippets.py</div><div id='n_file'> N File Name: bert4torch/snippets.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 175</div><div id='n_end'> N End Line: 184</div><BR>