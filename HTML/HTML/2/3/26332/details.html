<html><h3>Pattern ID :26332
</h3><img src='79078343.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    for parser_name, hits_iter in hits_by_parser_name:
                        if not any(hit.confidence == SearchRanks.EXACT_MATCH for hit in hits_iter):
                            needs_sapbert = True
                            <a id="change">break</a>
                    if needs_sapbert:
                        entities_to_process.append(ent)

            self.process_entities(entities_to_process)</code></pre><h3>After Change</h3><pre><code class='java'>
                    &#47&#47 TODO: in theory I think you could pass an embedding index when constructing
                    &#47&#47 that never gets used because it isn&quott in the list of entities and ontologies
                    &#47&#47 but I&quotm unclear here - unimportant enough to delay until later
                    if not <a id="change">all(
                        parser_has_high_conf_hit</a><a id="change">[index.parser.name] for index in self.indices
                    )</a>:
                        entities_to_process.append(ent)

            self.process_entities(entities_to_process)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/1fc805988a2f90a87dc1025c0b3b572855fef154#diff-5d0b0ded5b343b5692f05ff69dc8f3b4f8d860427b9eb29f6b3cbe52194fa86cL110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79078343</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 1fc805988a2f90a87dc1025c0b3b572855fef154</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: elliot.ford@astrazeneca.com</div><div id='file'> File Name: kazu/steps/linking/sapbert.py</div><div id='m_class'> M Class Name: SapBertForEntityLinkingStep</div><div id='n_method'> N Class Name: SapBertForEntityLinkingStep</div><div id='m_method'> M Method Name: _run(2)</div><div id='n_method'> N Method Name: _run(2)</div><div id='m_parent_class'> M Parent Class: BaseStep</div><div id='n_parent_class'> N Parent Class: BaseStep</div><div id='m_file'> M File Name: kazu/steps/linking/sapbert.py</div><div id='n_file'> N File Name: kazu/steps/linking/sapbert.py</div><div id='m_start'> M Start Line: 111</div><div id='m_end'> M End Line: 124</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 127</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if model.user_locked:
                    continue
                else:
                    <a id="change">break</a>
            &#47&#47 Too many iterations
            if model.iteration &gt; 1000:
                return "End"
            &#47&#47 not yet converged</code></pre><h3>After Change</h3><pre><code class='java'>
    def action(self, state):

        &#47&#47 All models locked
        if <a id="change">all(model</a><a id="change">.locked for model in state.models)</a>:
            state.models.unlock_models()
            return "End"          
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/d1668a4d784c875f8a4011c0b1623116a2027274#diff-f240026acef999814bc9472b7ac4234c0611e646f043bfaf2730d0954d1c3422L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79078340</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: d1668a4d784c875f8a4011c0b1623116a2027274</div><div id='time'> Time: 2022-06-01</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/nodes/stop_iteration.py</div><div id='m_class'> M Class Name: Stop_Iteration</div><div id='n_method'> N Class Name: Stop_Iteration</div><div id='m_method'> M Method Name: action(2)</div><div id='n_method'> N Method Name: action(2)</div><div id='m_parent_class'> M Parent Class: Decision</div><div id='n_parent_class'> N Parent Class: Decision</div><div id='m_file'> M File Name: autoprof/nodes/stop_iteration.py</div><div id='n_file'> N File Name: autoprof/nodes/stop_iteration.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            paired = [self.is_paired("__enter_barrier_{}".format(m))
                      for m in self.group_members]
            if all(paired):
                <a id="change">break</a>
            else:
                sleep(0.2)

    @_check_executor</code></pre><h3>After Change</h3><pre><code class='java'>

        self._barrier_status = True
        if get_cur_name() == self.group_members[0]:
            all_entered = <a id="change">all(
                self</a><a id="change">.registered_sync("_rpc_entered_barrier_{}".format(m))
                for m in self.group_members
            )</a>
            if not all_entered:
                sleep(0.2)
            for m in self.group_members:
                self.registered_sync("_rpc_exit_barrier_{}".format(m))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/iffix/machin/commit/1ccbad3dd537a8c17d52d0c03181855b5a7ee4a8#diff-876793ba079d477858d926d38ffcbac8b956b49ebbe1249d772eaab094838ff3L814' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79078341</div><div id='project'> Project Name: iffix/machin</div><div id='commit'> Commit Name: 1ccbad3dd537a8c17d52d0c03181855b5a7ee4a8</div><div id='time'> Time: 2020-08-09</div><div id='author'> Author: hanhanmumuqq@163.com</div><div id='file'> File Name: machin/parallel/distributed/world.py</div><div id='m_class'> M Class Name: RpcGroup</div><div id='n_method'> N Class Name: RpcGroup</div><div id='m_method'> M Method Name: barrier(1)</div><div id='n_method'> N Method Name: barrier(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: machin/parallel/distributed/world.py</div><div id='n_file'> N File Name: machin/parallel/distributed/world.py</div><div id='m_start'> M Start Line: 819</div><div id='m_end'> M End Line: 829</div><div id='n_start'> N Start Line: 825</div><div id='n_end'> N End Line: 837</div><BR>