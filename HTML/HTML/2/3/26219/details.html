<html><h3>Pattern ID :26219
</h3><img src='78938952.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def pre_run(self) -&gt; None:
        Bootstraps Airflow if not done so, and then makes sure its up.
        <a id="change">self.up()</a>

    def up(self) -&gt; None:
        This should ensure that Airflow is running.
        if self._commander.is_ready():  &#47&#47 type: ignore[no-untyped-call]</code></pre><h3>After Change</h3><pre><code class='java'>
        Raises:
            RuntimeError: If airflow is not running.
        
        <a id="change">if not self.is_running</a>:
            raise RuntimeError(
                "Airflow orchestrator is currently not running. "
                "Run `zenml orchestrator up` to start the "</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/e4124736175739696314570a66715f4790fe3249#diff-d925b09fb147c552096249c5128702d0664591acb1659a2539bda478251c374dL105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78938952</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: e4124736175739696314570a66715f4790fe3249</div><div id='time'> Time: 2021-11-02</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='m_class'> M Class Name: AirflowOrchestrator</div><div id='n_method'> N Class Name: AirflowOrchestrator</div><div id='m_method'> M Method Name: pre_run(1)</div><div id='n_method'> N Method Name: pre_run(1)</div><div id='m_parent_class'> M Parent Class: BaseOrchestrator</div><div id='n_parent_class'> N Parent Class: BaseOrchestrator</div><div id='m_file'> M File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='n_file'> N File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='m_start'> M Start Line: 105</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 163</div><div id='n_end'> N End Line: 170</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    cli_utils.declare(
        f"Bootstrapping resources for orchestrator: `{orchestrator_name}`."
    )
    <a id="change">orch.up()</a>
    cli_utils.declare(f"Orchestrator: `{orchestrator_name}` is up.")


@orchestrator.command("down")</code></pre><h3>After Change</h3><pre><code class='java'>
@click.argument("orchestrator_name", type=str, required=False)
def up_orchestrator(orchestrator_name: Optional[str] = None) -&gt; None:
    Provisions resources for the orchestrator
    <a id="change">if not orchestrator_name</a>:
        active_stack = Repository().get_active_stack()
        orchestrator_name = active_stack.orchestrator_name
        cli_utils.declare(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/686762da4b49f818d45634079903a8d5369f20c6#diff-bf47a93ed728e20a0ff408215a50302a233655d5df85a16b8bca85db5f92de24L239' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78938953</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 686762da4b49f818d45634079903a8d5369f20c6</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/cli/config.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: up_orchestrator(1)</div><div id='n_method'> N Method Name: up_orchestrator(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/cli/config.py</div><div id='n_file'> N File Name: src/zenml/cli/config.py</div><div id='m_start'> M Start Line: 239</div><div id='m_end'> M End Line: 246</div><div id='n_start'> N Start Line: 239</div><div id='n_end'> N End Line: 255</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.bootstrap_airflow()

        &#47&#47 Now we can run it as its bootstrapped.
        <a id="change">self._commander.up()</a>
        logger.info("Airflow is now up.")

        &#47&#47 Store our own pid for future termination
        self.pid = os.getpid()</code></pre><h3>After Change</h3><pre><code class='java'>
            self._log_webserver_credentials()
            return

        <a id="change">if not path_utils.file_exists(self.dags_folder)</a>:
            path_utils.create_dir_recursive_if_not_exists(self.dags_folder)

        from airflow.cli.commands.standalone_command import StandaloneCommand</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/e4124736175739696314570a66715f4790fe3249#diff-d925b09fb147c552096249c5128702d0664591acb1659a2539bda478251c374dL107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78938954</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: e4124736175739696314570a66715f4790fe3249</div><div id='time'> Time: 2021-11-02</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='m_class'> M Class Name: AirflowOrchestrator</div><div id='n_method'> N Class Name: AirflowOrchestrator</div><div id='m_method'> M Method Name: up(1)</div><div id='n_method'> N Method Name: up(1)</div><div id='m_parent_class'> M Parent Class: BaseOrchestrator</div><div id='n_parent_class'> N Parent Class: BaseOrchestrator</div><div id='m_file'> M File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='n_file'> N File Name: src/zenml/orchestrators/airflow/airflow_orchestrator.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 128</div><div id='n_start'> N Start Line: 174</div><div id='n_end'> N End Line: 191</div><BR>