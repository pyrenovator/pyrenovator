<html><h3>Pattern ID :4105
</h3><img src='15261690.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            fs = fsspec.filesystem("file")
            dest_dataset_dict_path = dataset_dict_path
        for k in json.load(
            fs.open(<a id="change">Path(dest_dataset_dict_path, "dataset_dict.json").as_posix()</a>, "r", encoding="utf-8")
        )["splits"]:
            dataset_dict_split_path = (
                dataset_dict_path.split("://")[0] + "://" + Path(dest_dataset_dict_path, k).as_posix()</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            fs = fsspec.filesystem("file")
            dest_dataset_dict_path = dataset_dict_path
        dataset_dict_json_path<a id="change"> = </a><a id="change">Path(dest_dataset_dict_path, config.DATASETDICT_JSON_FILENAME).as_posix()</a>
        dataset_info_path = Path(dest_dataset_dict_path, config.DATASET_INFO_FILENAME).as_posix()
        if fs.isfile(dataset_info_path) and not fs.isfile(dataset_dict_json_path):
            raise FileNotFoundError(
                f"No such file or directory: &quot{dataset_dict_json_path}&quot. Expected to load a DatasetDict object, but got a Dataset. Please use datasets.load_from_disk instead."</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/1ea2239a6ea4ca8f4b1d314ccc7d7c2e03257b6d#diff-a03fe8c218f22c8b26cc51f588cf5466c27f433373033d8724f66f996c2beda8L721' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15261690</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 1ea2239a6ea4ca8f4b1d314ccc7d7c2e03257b6d</div><div id='time'> Time: 2021-06-08</div><div id='author'> Author: 42851186+lhoestq@users.noreply.github.com</div><div id='file'> File Name: src/datasets/dataset_dict.py</div><div id='m_class'> M Class Name: DatasetDict</div><div id='n_method'> N Class Name: DatasetDict</div><div id='m_method'> M Method Name: load_from_disk(3)</div><div id='n_method'> N Method Name: load_from_disk(3)</div><div id='m_parent_class'> M Parent Class: dict</div><div id='n_parent_class'> N Parent Class: dict</div><div id='m_file'> M File Name: src/datasets/dataset_dict.py</div><div id='n_file'> N File Name: src/datasets/dataset_dict.py</div><div id='m_start'> M Start Line: 723</div><div id='m_end'> M End Line: 723</div><div id='n_start'> N Start Line: 721</div><div id='n_end'> N End Line: 729</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        converted_model_path.parent.mkdir(parents=True, exist_ok=True)

        with UserErrorContext():
            onnx_runner = OnnxrtRunner(SessionFromOnnx(<a id="change">exported_model_path.as_posix()</a>, providers=[target_device]))
            with onnx_runner:
                onnx_input_metadata = onnx_runner.get_input_metadata()
</code></pre><h3>After Change</h3><pre><code class='java'>
            ).as_posix()
        elif framework == Framework.ONNX:  &#47&#47 ONNX
            &#47&#47 pytype: disable=attribute-error
            input_model_path<a id="change"> = </a><a id="change">model.as_posix()</a>
            &#47&#47 pytype: enable=attribute-error
        else:
            raise UserError(f"Unknown framework: {framework.value}")
        converted_model_path = get_package_path(workdir, model_name) / self.get_output_relative_path()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/triton-inference-server/model_navigator/commit/7ac1a1b6dedca92c428c29c9f408625b44d00b70#diff-f1d2411e6c7d4c1bf29d62db0574fa2c92ac491252386daa22a36a8bf548f868L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15261692</div><div id='project'> Project Name: triton-inference-server/model_navigator</div><div id='commit'> Commit Name: 7ac1a1b6dedca92c428c29c9f408625b44d00b70</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: kkleczewski@nvidia.com</div><div id='file'> File Name: model_navigator/framework_api/commands/convert/onnx.py</div><div id='m_class'> M Class Name: ConvertONNX2TRT</div><div id='n_method'> N Class Name: ConvertONNX2TRT</div><div id='m_method'> M Method Name: __call__(10)</div><div id='n_method'> N Method Name: __call__(9)</div><div id='m_parent_class'> M Parent Class: Command</div><div id='n_parent_class'> N Parent Class: Command</div><div id='m_file'> M File Name: model_navigator/framework_api/commands/convert/onnx.py</div><div id='n_file'> N File Name: model_navigator/framework_api/commands/convert/onnx.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 95</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            )

        onnx_runner = OnnxrtRunner(
            SessionFromOnnx(<a id="change">exported_model_path.as_posix()</a>, providers=[self.runtime_provider.value])
        )

        return onnx_runner</code></pre><h3>After Change</h3><pre><code class='java'>
            ).as_posix()
        elif framework == Framework.ONNX:
            &#47&#47 pytype: disable=attribute-error
            onnx_model_path<a id="change"> = </a><a id="change">model.as_posix()</a>
            &#47&#47 pytype: enable=attribute-error
        else:
            raise UserError(f"Unknown framework: {framework.value}")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/triton-inference-server/model_navigator/commit/7ac1a1b6dedca92c428c29c9f408625b44d00b70#diff-8864e03cfc8e0b7526f164aad2ad15179bdee9a05be51d9330290b7071e39f76L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15261698</div><div id='project'> Project Name: triton-inference-server/model_navigator</div><div id='commit'> Commit Name: 7ac1a1b6dedca92c428c29c9f408625b44d00b70</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: kkleczewski@nvidia.com</div><div id='file'> File Name: model_navigator/framework_api/commands/performance/onnx.py</div><div id='m_class'> M Class Name: PerformanceONNX</div><div id='n_method'> N Class Name: PerformanceONNX</div><div id='m_method'> M Method Name: _get_runner(6)</div><div id='n_method'> N Method Name: _get_runner(5)</div><div id='m_parent_class'> M Parent Class: PerformanceBase</div><div id='n_parent_class'> N Parent Class: PerformanceBase</div><div id='m_file'> M File Name: model_navigator/framework_api/commands/performance/onnx.py</div><div id='n_file'> N File Name: model_navigator/framework_api/commands/performance/onnx.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 64</div><BR>