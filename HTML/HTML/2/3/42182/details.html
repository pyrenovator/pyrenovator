<html><h3>Pattern ID :42182
</h3><img src='118713089.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        polygon.intersection(bb)
        for polygon in polygons
        for bb in bounding_boxes
        if <a id="change">polygon.intersects(</a>bb<a id="change">)</a>
    ]
    return itertools.chain.from_iterable(map(validate_polygon, polygons_to_crop))
</code></pre><h3>After Change</h3><pre><code class='java'>
    for polygon in polygons:
        for bbox in bounding_boxes:
            if polygon.intersects(bbox) and polygon not in polygons_to_crop:
                polygon<a id="change"> = </a><a id="change">polygon.intersection(</a>bbox<a id="change">)</a>
                polygons_to_crop.append(polygon)
    return list(itertools.chain.from_iterable(map(validate_polygon, polygons_to_crop)))

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dsgoficial/pytorch_segmentation_models_trainer/commit/9f6dcc87706e8d59bcea015e4474423f313b71d5#diff-4ac5d551e03e04482456867c4c952953f178582517c0f7f8965a19d6336e07b8L376' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118713089</div><div id='project'> Project Name: dsgoficial/pytorch_segmentation_models_trainer</div><div id='commit'> Commit Name: 9f6dcc87706e8d59bcea015e4474423f313b71d5</div><div id='time'> Time: 2021-11-23</div><div id='author'> Author: philipeborba@gmail.com</div><div id='file'> File Name: pytorch_segmentation_models_trainer/utils/polygonrnn_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: crop_polygons_to_bounding_boxes(2)</div><div id='n_method'> N Method Name: crop_polygons_to_bounding_boxes(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pytorch_segmentation_models_trainer/utils/polygonrnn_utils.py</div><div id='n_file'> N File Name: pytorch_segmentation_models_trainer/utils/polygonrnn_utils.py</div><div id='m_start'> M Start Line: 380</div><div id='m_end'> M End Line: 385</div><div id='n_start'> N Start Line: 376</div><div id='n_end'> N End Line: 382</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        ret = 0.0
        for doc_id in actual[:self.eval_at]:
            <a id="change">if </a>doc_id in desired:
                ret += 1.0

        recall = ret/len(desired)</code></pre><h3>After Change</h3><pre><code class='java'>
            return 0.0

        actual_at_k = actual[:self.eval_at] if self.eval_at else actual
        ret<a id="change"> = </a>len(<a id="change">set(actual_at_k).intersection(</a>set(desired)<a id="change">)</a>)

        recall = ret / len(desired)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina-hub/commit/800699a67731420ad9b038ea92caa1f3f61e039b#diff-006046df0394d205c348aef4bca3fb7f58857f37cf05b8393157417008065304L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118713078</div><div id='project'> Project Name: jina-ai/jina-hub</div><div id='commit'> Commit Name: 800699a67731420ad9b038ea92caa1f3f61e039b</div><div id='time'> Time: 2020-12-29</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: evaluators/rank/f1ScoreEvaluator/__init__.py</div><div id='m_class'> M Class Name: f1ScoreEvaluator</div><div id='n_method'> N Class Name: f1ScoreEvaluator</div><div id='m_method'> M Method Name: evaluate(3)</div><div id='n_method'> N Method Name: evaluate(3)</div><div id='m_parent_class'> M Parent Class: BaseRankingEvaluator</div><div id='n_parent_class'> N Parent Class: BaseRankingEvaluator</div><div id='m_file'> M File Name: evaluators/rank/f1ScoreEvaluator/__init__.py</div><div id='n_file'> N File Name: evaluators/rank/f1ScoreEvaluator/__init__.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 34</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return cls.check(instance)
        
    def __getitem__(cls, item: Any) -&gt; _TensorTypeMeta:
        <a id="change">if </a>item is None:
            &#47&#47 Corresponding to how None is allow in TensorType.getitem: it has a
            &#47&#47 special value there, so we disallow it here.
            raise ValueError(f"{item} not a valid type argument.")</code></pre><h3>After Change</h3><pre><code class='java'>
            base_cls = cls
        name = base_cls.__name__
        dict = cls.getitem(item)
        intersection<a id="change"> = </a><a id="change">cls._torchtyping_fields.intersection(</a>dict.keys()<a id="change">)</a>
        if intersection:
            raise TypeError(f"Overwriting {intersection} fields.")
        fields = cls._torchtyping_fields | dict.keys()
        key = [base_cls]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/patrick-kidger/torchtyping/commit/c25e3e0e6394ee8a973623173aa24eafec0bec7c#diff-75eb220c62646c2c9a5d41e5d890f7e38200af8b7cf7424554f47e4e23239c51L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118713082</div><div id='project'> Project Name: patrick-kidger/torchtyping</div><div id='commit'> Commit Name: c25e3e0e6394ee8a973623173aa24eafec0bec7c</div><div id='time'> Time: 2021-03-28</div><div id='author'> Author: 33688385+patrick-kidger@users.noreply.github.com</div><div id='file'> File Name: torchtyping/tensor.py</div><div id='m_class'> M Class Name: _TensorTypeMeta</div><div id='n_method'> N Class Name: _TensorTypeMeta</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: type</div><div id='n_parent_class'> N Parent Class: type</div><div id='m_file'> M File Name: torchtyping/tensor.py</div><div id='n_file'> N File Name: torchtyping/tensor.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    {SINGLE_RETURN_OUT_NAME: return_spec}
                )

        <a id="change">if </a>check_dict_keys_match(cls.INPUT_SIGNATURE, cls.OUTPUT_SIGNATURE):
            raise StepInterfaceError(
                "The input names and output names cannot be the same!"
            )</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Raise an exception if input and output names of a step overlap as
        &#47&#47 that makes it impossible to distinguish their materializers
        &#47&#47 TODO [MEDIUM]: Can we use two factories to avoid this issue?
        shared_input_output_keys<a id="change"> = </a><a id="change">set(cls.INPUT_SIGNATURE).intersection(
            </a>set(cls.OUTPUT_SIGNATURE)<a id="change">
        )</a>
        if shared_input_output_keys:
            raise StepInterfaceError(
                f"There is an overlap in the input and output names of "
                f"step &quot{name}&quot: {shared_input_output_keys}. Please make "</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/8ad287d81d8ca453fd79c996b7f2afbf977cce59#diff-ea6a3cc50bec27c1d3046731637ee6c19ffafad48025a8b84a4352e268861151L80' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118713085</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 8ad287d81d8ca453fd79c996b7f2afbf977cce59</div><div id='time'> Time: 2021-11-17</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/steps/base_step.py</div><div id='m_class'> M Class Name: BaseStepMeta</div><div id='n_method'> N Class Name: BaseStepMeta</div><div id='m_method'> M Method Name: __new__(4)</div><div id='n_method'> N Method Name: __new__(4)</div><div id='m_parent_class'> M Parent Class: type</div><div id='n_parent_class'> N Parent Class: type</div><div id='m_file'> M File Name: src/zenml/steps/base_step.py</div><div id='n_file'> N File Name: src/zenml/steps/base_step.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 72</div><div id='n_end'> N End Line: 158</div><BR>