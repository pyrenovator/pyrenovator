<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if self.total_round_num &gt; np.sqrt(self.client_num) * L:
                scale_d = 2 * self.w_clip * self.nbafl_constant * np.sqrt(
                    np.power(self.total_round_num, 2) -
                    <a id="change">np.power(</a>L, <a id="change">2</a><a id="change">)</a> * self.client_num) / (
                                  min(self.sample_client_num.values()) * self.client_num *
                                  self.nbafl_epsilon)
                for p in global_model.parameters():</code></pre><h3>After Change</h3><pre><code class='java'>
            scale_d = 2 * self.w_clip * self.nbafl_constant * np.sqrt(np.power(self.total_round_num, 2) -
                np.power(self.sample_client_num, 2) * self.client_num) / (self.sample_client_num * self.client_num * self.nbafl_epsilon)
            for k in global_model.keys():
                global_model[k] = Gaussian.compute_noise_using_sigma(scale_d, <a id="change">global_model[k]</a>.shape)
        return global_model

</code></pre>