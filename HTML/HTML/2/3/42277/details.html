<html><h3>Pattern ID :42277
</h3><img src='118950487.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        inferred_freq = "BH"
    else:
        dominant_freq_percentage = distribution.max() / len(df["ds"])
        num_freq = frequencies[<a id="change">np.argmax(</a>distribution<a id="change">)</a>]  &#47&#47 get value of most common diff
        inferred_freq = convert_num_to_str_freq(num_freq, df["ds"].iloc[0])

    log.info(</code></pre><h3>After Change</h3><pre><code class='java'>
        num_freq = 2.6784e15
        inferred_freq = "MS" if pd.to_datetime(df["ds"].iloc[0]).day &lt; 15 else "M"
    &#47&#47 exception - yearly df (365 days freq or 366 days freq)
    elif <a id="change">argmax_frequency == 3.1536e16 or argmax_frequency == 3.16224e16</a>:
        dominant_freq_percentage = get_dist_considering_two_freqs(distribution) / len(df["ds"])
        num_freq = 3.1536e16
        inferred_freq = "YS" if pd.to_datetime(df["ds"].iloc[0]).day &lt; 15 else "Y"</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/cdedd4e2f6f25b21917e5cb2c1aa9acbde9f3fd9#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L1265' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118950487</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: cdedd4e2f6f25b21917e5cb2c1aa9acbde9f3fd9</div><div id='time'> Time: 2023-04-14</div><div id='author'> Author: noxan@users.noreply.github.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _infer_frequency(3)</div><div id='n_method'> N Method Name: _infer_frequency(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 1265</div><div id='m_end'> M End Line: 1302</div><div id='n_start'> N Start Line: 1287</div><div id='n_end'> N End Line: 1325</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                raise RuntimeError(
                    f"Unsupported variable_dim_index={variable_dim_index}"
                )
            indices = <a id="change">np.argmax(</a>onehot<a id="change">, axis=variable_dim_index)</a>

            target_shape = list(transformed_data.shape)
            target_shape[-1] = 1
            indices = indices.reshape(target_shape)</code></pre><h3>After Change</h3><pre><code class='java'>
    if np.isnan(transformed_data).any():
        return None
    for output in outputs:
        if <a id="change">"OneHotEncodedOutput" in str(
            output.__class__
        ) or "BinaryEncodedOutput" in str(output.__class__)</a>:

            if variable_dim_index == 1:
                v = transformed_data[</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gretelai/gretel-synthetics/commit/cf7dd31ca60b565bb50fdf0b30092e2c9ebb25bf#diff-d3a8f221673d80e72a8bdfb7b36b7ea09482e9ec10db970329d1a5c71aa08362L341' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118950515</div><div id='project'> Project Name: gretelai/gretel-synthetics</div><div id='commit'> Commit Name: cf7dd31ca60b565bb50fdf0b30092e2c9ebb25bf</div><div id='time'> Time: 2022-11-21</div><div id='author'> Author: kendrick@gretel.ai</div><div id='file'> File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: inverse_transform(4)</div><div id='n_method'> N Method Name: inverse_transform(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='n_file'> N File Name: src/gretel_synthetics/timeseries_dgan/transformations.py</div><div id='m_start'> M Start Line: 367</div><div id='m_end'> M End Line: 442</div><div id='n_start'> N Start Line: 699</div><div id='n_end'> N End Line: 764</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return (torch.argmax(pred, dim=1) == labels).float().sum() / len(pred)
    else:
        if torch.sum(mask) != 0:
            return (<a id="change">torch.argmax(</a>pred[mask]<a id="change">, dim=1)</a> == labels[mask]).float().sum() / int(torch.sum(mask))
        else:
            return 0.0
</code></pre><h3>After Change</h3><pre><code class='java'>
def eval_acc(pred, labels, mask=None):
    if mask is not None:
        pred, labels = pred[mask], labels[mask]
        if <a id="change">pred is None or labels is None</a>:
            return 0.0

    return (torch.argmax(pred, dim=1) == labels).float().sum() / len(pred)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thudm/grb/commit/18bad184e9aefb67e62565ed334a2466010ec36f#diff-9a916fa531f7dded6431e044c6b6e8ae3084a266023bc9a763073e9da676bf86L5' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 118950514</div><div id='project'> Project Name: thudm/grb</div><div id='commit'> Commit Name: 18bad184e9aefb67e62565ed334a2466010ec36f</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: qinkai.zheng1028@gmail.com</div><div id='file'> File Name: grb/evaluator/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_acc(3)</div><div id='n_method'> N Method Name: eval_acc(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: grb/evaluator/metric.py</div><div id='n_file'> N File Name: grb/evaluator/metric.py</div><div id='m_start'> M Start Line: 7</div><div id='m_end'> M End Line: 14</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 12</div><BR>