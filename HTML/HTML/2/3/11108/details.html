<html><h3>Pattern ID :11108
</h3><img src='38181703.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                node_to_output_tensors_dict.update({n: output_t})
            else:
                assert isinstance(out_tensors_of_n, torch.Tensor)
                <a id="change">if </a><a id="change">n in self.interest_points and out_tensors_of_n.requires_grad</a>:
                    out_tensors_of_n.retain_grad()
                node_to_output_tensors_dict.update({n: [out_tensors_of_n]})
</code></pre><h3>After Change</h3><pre><code class='java'>
                        &#47&#47 We get here in case we have an output node, which is an interest point,
                        &#47&#47 but it is not differentiable. We need to add this dummy tensor to in order to include this
                        &#47&#47 node in the coming weights computation.
                        self.interest_points_tensors.append(<a id="change">torch.tensor(</a>[0.0]<a id="change">,
                                                                         requires_grad=True,
                                                                         device=out_tensors_of_n.device)</a>)
                node_to_output_tensors_dict.update({n: [out_tensors_of_n]})

        outputs = generate_outputs(self.output_list,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sony/model_optimization/commit/cb04cd2ed78ed7503bc11447b9520561e30d0eb5#diff-2dc34d537990012234ca8b55b9d0fe4e2d136aa77e177631c99ec2895763ee44L138' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38181703</div><div id='project'> Project Name: sony/model_optimization</div><div id='commit'> Commit Name: cb04cd2ed78ed7503bc11447b9520561e30d0eb5</div><div id='time'> Time: 2022-07-20</div><div id='author'> Author: ofirg6@gmail.com</div><div id='file'> File Name: model_compression_toolkit/core/pytorch/back2framework/model_gradients.py</div><div id='m_class'> M Class Name: PytorchModelGradients</div><div id='n_method'> N Class Name: PytorchModelGradients</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: model_compression_toolkit/core/pytorch/back2framework/model_gradients.py</div><div id='n_file'> N File Name: model_compression_toolkit/core/pytorch/back2framework/model_gradients.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 160</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 184</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.item_list_length_field: item_list_length,
        }
        for field in self.dataset.inter_feat:
            <a id="change">if </a><a id="change">field != self.iid_field and field != self.time_field</a>:
                new_dict[field] = self.dataset.inter_feat[field][target_index].values
        if self.position_field:
            new_dict[self.position_field] = np.tile(np.arange(self.max_item_list_len), (new_length, 1))</code></pre><h3>After Change</h3><pre><code class='java'>
        new_dict = {
            self.item_list_field: torch.zeros((new_length, self.max_item_list_len), dtype=torch.int64),
            self.time_list_field: torch.zeros((new_length, self.max_item_list_len)),
            self.item_list_length_field: <a id="change">torch.tensor(</a>item_list_length<a id="change">)</a>,
        }
        if self.position_field:
            new_dict[self.position_field] = torch.arange(self.max_item_list_len).repeat(new_length).view(new_length, -1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/03922da139b2a8c758f07f98804e43f8f2003d8b#diff-c9d44b5bc773d3e9abdd8e97a7822c63722e862ba7a4de93fe5f6b46667ce3a6L113' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38181701</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 03922da139b2a8c758f07f98804e43f8f2003d8b</div><div id='time'> Time: 2020-11-30</div><div id='author'> Author: 297086016@qq.com</div><div id='file'> File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_class'> M Class Name: SequentialDataLoader</div><div id='n_method'> N Class Name: SequentialDataLoader</div><div id='m_method'> M Method Name: augmentation(5)</div><div id='n_method'> N Method Name: augmentation(5)</div><div id='m_parent_class'> M Parent Class: AbstractDataLoader</div><div id='n_parent_class'> N Parent Class: AbstractDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_start'> M Start Line: 125</div><div id='m_end'> M End Line: 145</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    for column in range(0, input_rows):
        for row in range(0, filter_length):
            check_row = column + row
            <a id="change">if </a><a id="change">(check_row &gt;= start_row) and (check_row &lt;= stop_row)</a>:
                row_indices.append(row + column - start_row)
                column_indices.append(column)
                values.append(filter[row])</code></pre><h3>After Change</h3><pre><code class='java'>
    row_indices = torch.tensor(
        [row + col - start_row for row, col in product_lst], device=filter.device
    )
    col_indices = <a id="change">torch.tensor(</a>[col for row, col in product_lst]<a id="change">, device=filter.device)</a>
    indices = torch.stack([row_indices, col_indices])
    values = torch.stack([filter[row] for row, col in product_lst])

    return torch.sparse_coo_tensor(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/v0lta/pytorch-wavelet-toolbox/commit/623deeb220e325f65bd2a0ad576cd2ebfedc7cce#diff-4cf3e41efbfc338d0b6af6fd66d51bf77a37adf3814121abe1d2f6fc7040efa8L330' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38181697</div><div id='project'> Project Name: v0lta/pytorch-wavelet-toolbox</div><div id='commit'> Commit Name: 623deeb220e325f65bd2a0ad576cd2ebfedc7cce</div><div id='time'> Time: 2023-02-20</div><div id='author'> Author: felix.blanke@scai.fraunhofer.de</div><div id='file'> File Name: src/ptwt/sparse_math.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: construct_conv_matrix(3)</div><div id='n_method'> N Method Name: construct_conv_matrix(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/ptwt/sparse_math.py</div><div id='n_file'> N File Name: src/ptwt/sparse_math.py</div><div id='m_start'> M Start Line: 354</div><div id='m_end'> M End Line: 385</div><div id='n_start'> N Start Line: 354</div><div id='n_end'> N End Line: 384</div><BR>