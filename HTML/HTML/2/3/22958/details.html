<html><h3>Pattern ID :22958
</h3><img src='72957123.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.parametrize("share_torso", [True, False])
def test_actor_critic_shared_arch(actor_critic_class, share_encoder, share_torso):
    input = T.Tensor([1, 1])
    loss_fn<a id="change"> = </a><a id="change">T.nn.MSELoss()</a>
    actor = Actor(
        encoder=IdentityEncoder(),
        torso=MLP([2, 2]),
        head=DeterministicPolicyHead(input_shape=2, action_shape=1, activation_fn=None),</code></pre><h3>After Change</h3><pre><code class='java'>
        assert actor_critic.actor and actor_critic.critic

    else:
        <a id="change">assert </a>not actor_critic.actor and not actor_critic.critic
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/londonnode/pearl/commit/154b68d1925a7b73086da8bc3e861d06bf841027#diff-0adb667cd397bd56edce10eec11e1b10821740a10d72bd148b09645fc9108968L109' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72957123</div><div id='project'> Project Name: londonnode/pearl</div><div id='commit'> Commit Name: 154b68d1925a7b73086da8bc3e861d06bf841027</div><div id='time'> Time: 2021-09-13</div><div id='author'> Author: rohan.tangri@gmail.com</div><div id='file'> File Name: tests/test_models.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_actor_critic_shared_arch(3)</div><div id='n_method'> N Method Name: test_actor_critic_shared_arch(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_models.py</div><div id='n_file'> N File Name: tests/test_models.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 142</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 127</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    train_dataset = torch.utils.data.TensorDataset(x_seq, target_seq)

    train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=batch_size, shuffle=shuffle)
    criterion<a id="change"> = </a><a id="change">torch.nn.MSELoss()</a>.to(device)
    for batch_data in train_loader:
        encoder_inputs, labels = batch_data
        outputs = model(encoder_inputs, edge_index)</code></pre><h3>After Change</h3><pre><code class='java'>
        outputs1 = model(encoder_inputs, edge_index_seq)
        outputs2 = model(encoder_inputs, edge_index_seq[0])
    assert outputs1.shape == (batch_size, node_count, num_for_predict)
    <a id="change">assert </a>outputs2.shape == (batch_size, node_count, num_for_predict)

def test_chebconvatt():
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/benedekrozemberczki/pytorch_geometric_temporal/commit/8efa512ff3ac06546a082de036a85428720abd7a#diff-592bffdec032ab970088ee321003f32504e7af07175645e811641e910aca3e35L287' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72957122</div><div id='project'> Project Name: benedekrozemberczki/pytorch_geometric_temporal</div><div id='commit'> Commit Name: 8efa512ff3ac06546a082de036a85428720abd7a</div><div id='time'> Time: 2021-03-20</div><div id='author'> Author: He_YX@outlook.com</div><div id='file'> File Name: test/convolutional_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_mstgcn(0)</div><div id='n_method'> N Method Name: test_mstgcn(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/convolutional_test.py</div><div id='n_file'> N File Name: test/convolutional_test.py</div><div id='m_start'> M Start Line: 291</div><div id='m_end'> M End Line: 328</div><div id='n_start'> N Start Line: 293</div><div id='n_end'> N End Line: 311</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    train_dataset = torch.utils.data.TensorDataset(x_seq, target_seq)

    train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=batch_size, shuffle=shuffle)
    criterion<a id="change"> = </a><a id="change">torch.nn.MSELoss()</a>.to(device)
    for batch_data in train_loader:
        encoder_inputs, labels = batch_data
        outputs = model(encoder_inputs, edge_index)</code></pre><h3>After Change</h3><pre><code class='java'>
        outputs1 = model(encoder_inputs, edge_index_seq)
        outputs2 = model(encoder_inputs, edge_index_seq[0])
    assert outputs1.shape == (batch_size, node_count, num_for_predict)
    <a id="change">assert </a>outputs2.shape == (batch_size, node_count, num_for_predict)

def test_mstgcn():
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/benedekrozemberczki/pytorch_geometric_temporal/commit/8efa512ff3ac06546a082de036a85428720abd7a#diff-592bffdec032ab970088ee321003f32504e7af07175645e811641e910aca3e35L244' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72957124</div><div id='project'> Project Name: benedekrozemberczki/pytorch_geometric_temporal</div><div id='commit'> Commit Name: 8efa512ff3ac06546a082de036a85428720abd7a</div><div id='time'> Time: 2021-03-20</div><div id='author'> Author: He_YX@outlook.com</div><div id='file'> File Name: test/convolutional_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_astgcn(0)</div><div id='n_method'> N Method Name: test_astgcn(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/convolutional_test.py</div><div id='n_file'> N File Name: test/convolutional_test.py</div><div id='m_start'> M Start Line: 248</div><div id='m_end'> M End Line: 285</div><div id='n_start'> N Start Line: 236</div><div id='n_end'> N End Line: 266</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, epochs, max_val=30.0, mult=-5.0, alpha=0.2, max_batch_num=100, hist_device=&quotcpu&quot):
        super().__init__()
        self.loss_sup = nn.CrossEntropyLoss()
        self.loss_unsup<a id="change"> = </a><a id="change">nn.MSELoss()</a>
        self.max_epochs = epochs
        self.max_val = max_val
        self.mult = mult
        self.alpha = alpha</code></pre><h3>After Change</h3><pre><code class='java'>
        self.hist_unsup = []
        self.hist_sup = []
        self.hist_device = hist_device
        <a id="change">assert </a>(self.alpha &gt;= 0) & (self.alpha &lt; 1)  &#47&#47 等于1的时候upata写分母为0

    def forward(self, y_pred_sup, y_pred_unsup, y_true_sup, epoch, bti):
        if bti &lt; self.max_batch_num:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/bert4torch/commit/60e2e26767bd1fd96cb5b4366f3d8d2db851f43e#diff-d70635202aab72abb863eb813ebb853a4ed3e9b396458e1f458621fdc92f8211L229' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 72957126</div><div id='project'> Project Name: tongjilibo/bert4torch</div><div id='commit'> Commit Name: 60e2e26767bd1fd96cb5b4366f3d8d2db851f43e</div><div id='time'> Time: 2022-08-04</div><div id='author'> Author: lb@libos-MacBook-Pro.local</div><div id='file'> File Name: bert4torch/losses.py</div><div id='m_class'> M Class Name: TemporalEnsemblingLoss</div><div id='n_method'> N Class Name: TemporalEnsemblingLoss</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: bert4torch/losses.py</div><div id='n_file'> N File Name: bert4torch/losses.py</div><div id='m_start'> M Start Line: 232</div><div id='m_end'> M End Line: 235</div><div id='n_start'> N Start Line: 235</div><div id='n_end'> N End Line: 241</div><BR>