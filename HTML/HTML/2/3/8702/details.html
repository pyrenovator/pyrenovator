<html><h3>Pattern ID :8702
</h3><img src='32366782.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        num_hit_samples = depth_samples.shape[0]
        deltas = deltas[mask].reshape(num_hit_samples, 1)
        samples = samples[mask]
        ridx = <a id="change">torch.arange(</a>0, pidx.shape[0]<a id="change">, device=pidx.device)</a>
        ridx = ridx[..., None].repeat(1, num_samples)[mask]
        boundary = spc_render.mark_pack_boundaries(ridx)

        return ASRaymarchResults(</code></pre><h3>After Change</h3><pre><code class='java'>
        pidx = query_results.pidx
        pidx = pidx.reshape(num_rays, num_samples)
        mask = pidx &gt; -1
        non_masked_idx<a id="change"> = </a><a id="change">torch.nonzero(</a>mask<a id="change">)</a>
        
        deltas = depth.diff(dim=-1,
                            prepend=(torch.zeros(rays.origins.shape[0], 1, device=depth.device) + rays.dist_min))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nvidiagameworks/kaolin-wisp/commit/cc9b4cbcee211cba6d22ad5bae9fe9ca42cec4a8#diff-503735559f6257c49adc7a4dbf8369d251a33f48e34af4777b87427251fd242bL237' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32366782</div><div id='project'> Project Name: nvidiagameworks/kaolin-wisp</div><div id='commit'> Commit Name: cc9b4cbcee211cba6d22ad5bae9fe9ca42cec4a8</div><div id='time'> Time: 2023-02-03</div><div id='author'> Author: l.pierscieniewski@gmail.com</div><div id='file'> File Name: wisp/accelstructs/octree_as.py</div><div id='m_class'> M Class Name: OctreeAS</div><div id='n_method'> N Class Name: OctreeAS</div><div id='m_method'> M Method Name: _raymarch_ray(4)</div><div id='n_method'> N Method Name: _raymarch_ray(4)</div><div id='m_parent_class'> M Parent Class: BaseAS</div><div id='n_parent_class'> N Parent Class: BaseAS</div><div id='m_file'> M File Name: wisp/accelstructs/octree_as.py</div><div id='n_file'> N File Name: wisp/accelstructs/octree_as.py</div><div id='m_start'> M Start Line: 237</div><div id='m_end'> M End Line: 265</div><div id='n_start'> N Start Line: 253</div><div id='n_end'> N End Line: 279</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        item_order = np.random.permutation(n_items)
    else:
        &#47&#47 write trajectories in default order
        item_order = <a id="change">np.arange(</a>n_items<a id="change">)</a>

    def frame_gen():
        for idx in item_order:
            sub_dict = {}</code></pre><h3>After Change</h3><pre><code class='java'>
        warnings.warn("No &quotdone&quot at end of trajectories; inserting a fake one")
        all_dones[-1] = True
        added_final_none = True
    traj_ends<a id="change">, = </a><a id="change">np.nonzero(</a>all_dones<a id="change">)</a>
    &#47&#47 add one to ends so that when we index with array[start:end], we get the
    &#47&#47 full trajectory
    traj_ends = traj_ends + 1
    traj_starts = np.concatenate(([0], traj_ends[:-1]), axis=0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/a433a3485cdc7d68a6fb14f615a90eee6a176c11#diff-f2a5bcc55d2abc2fd98dd4535b61daea55c2e86955e7e375173c931b8c1e0085L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32366789</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: a433a3485cdc7d68a6fb14f615a90eee6a176c11</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(5)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='n_file'> N File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        item_order = np.random.permutation(n_items)
    else:
        &#47&#47 write trajectories in default order
        item_order = <a id="change">np.arange(</a>n_items<a id="change">)</a>

    def frame_gen():
        for idx in item_order:
            sub_dict = {}</code></pre><h3>After Change</h3><pre><code class='java'>
        warnings.warn("No &quotdone&quot at end of trajectories; inserting a fake one")
        all_dones[-1] = True
        added_final_none = True
    traj_ends<a id="change">, = </a><a id="change">np.nonzero(</a>all_dones<a id="change">)</a>
    &#47&#47 add one to ends so that when we index with array[start:end], we get the
    &#47&#47 full trajectory
    traj_ends = traj_ends + 1
    traj_starts = np.concatenate(([0], traj_ends[:-1]), axis=0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/42a64e6b4c81fabe1e0535c503773dd62f2ff383#diff-f2a5bcc55d2abc2fd98dd4535b61daea55c2e86955e7e375173c931b8c1e0085L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32366791</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 42a64e6b4c81fabe1e0535c503773dd62f2ff383</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(5)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='n_file'> N File Name: src/il_representations/scripts/mkdataset_demos.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 90</div><BR>