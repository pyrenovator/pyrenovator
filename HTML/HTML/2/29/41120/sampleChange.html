<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    right = left + image_size
    bottom = top + image_size

    lr = <a id="change">lr.crop(</a>(<a id="change">left</a><a id="change"> // upscale_factor</a><a id="change">,
                  top // upscale_factor,
                  right // upscale_factor,
                  bottom // upscale_factor</a>)<a id="change">)</a>
    hr = <a id="change">hr.crop(</a>(<a id="change">left</a><a id="change">, top, right, bottom</a>)<a id="change">)</a>

    <a id="change">return </a>lr<a id="change">, hr</a>


def random_rotate(lr: Any, hr: Any, degrees: list) -&gt; [Any, Any]:
    Will ``PIL.Image`` randomly rotate the image.</code></pre><h3>After Change</h3><pre><code class='java'>
    hr_image_height, hr_image_width = hr_image.shape[:2]

    &#47&#47 Just need to find the top and left coordinates of the image
    hr_top = random.randint(0, hr_image_height<a id="change"> - hr_image_size</a>)
    hr_left = random.randint(0, hr_image_width - hr_image_size)

    &#47&#47 Define the LR image position
    lr_top = hr_top // upscale_factor
    <a id="change">lr_left</a> = hr_left // upscale_factor
    lr_image_size = <a id="change">hr_image_size</a><a id="change"> // </a>upscale_factor

    &#47&#47 Crop image patch
    patch_lr_image = lr_image[lr_top:lr_top + lr_image_size, <a id="change">lr_left</a>:<a id="change">lr_left</a><a id="change"> + </a>lr_image_size, ...]
    patch_hr_image<a id="change"> = </a><a id="change">hr_image[hr_top:hr_top + hr_image_size, hr_left:hr_left + hr_image_size, ...]</a>

    <a id="change">return </a>patch_lr_image<a id="change">, patch_hr_image</a>


def random_rotate(lr_image: np.ndarray, hr_image: np.ndarray, angles: list, lr_center=None, hr_center=None, scale_factor: float = 1.0) -&gt; [np.ndarray, np.ndarray]:
    Rotate an image randomly by a specified angle.</code></pre>