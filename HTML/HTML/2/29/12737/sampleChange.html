<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 update libai_cfg by kwargs
        for k, v in self.kwargs.items():
            <a id="change">self.libai_cfg[k] = v</a>


class T5LoaderLibai(ModelLoaderLiBai):
    def __init__(self, model, libai_cfg, pretrained_model_path, **kwargs):</code></pre><h3>After Change</h3><pre><code class='java'>
        with open(config_file, mode="r", encoding="utf-8") as f:
            cfg_dict = json.load(f)

        <a id="change">self._update_cfg("vocab_size"</a>, cfg_dict["vocab_size"]<a id="change">)</a>
        <a id="change">self._update_cfg("hidden_size"</a>, cfg_dict["d_model"]<a id="change">)</a>
        <a id="change">self._update_cfg("hidden_layers"</a>, cfg_dict["num_layers"]<a id="change">)</a>
        <a id="change">self._update_cfg("num_attention_heads"</a>, cfg_dict["num_heads"]<a id="change">)</a>
        <a id="change">self._update_cfg("intermediate_size"</a>, cfg_dict["d_ff"]<a id="change">)</a>
        self._update_cfg("hidden_dropout_prob", cfg_dict["dropout_rate"])
        <a id="change">self._update_cfg("attention_probs_dropout_prob"</a>, cfg_dict["dropout_rate"]<a id="change">)</a>
        self._update_cfg("max_position_embeddings", cfg_dict.get("n_positions", 512))
        <a id="change">self._update_cfg(
            "relative_attention_num_buckets"</a>, cfg_dict["relative_attention_num_buckets"]<a id="change">
        )</a>
        <a id="change">self._update_cfg("embedding_dropout_prob"</a>, cfg_dict["dropout_rate"]<a id="change">)</a>
        <a id="change">self._update_cfg("initializer_range"</a>, cfg_dict["initializer_factor"]<a id="change">)</a>
        <a id="change">self._update_cfg("layernorm_eps"</a>, cfg_dict["layer_norm_epsilon"]<a id="change">)</a>
        <a id="change">self._update_cfg("head_size"</a>, cfg_dict["d_kv"]<a id="change">)</a>

        &#47&#47 update libai_cfg by kwargs
        for k, <a id="change">v</a> in self.kwargs.items():
            <a id="change">self._update_cfg(</a>k, <a id="change">v</a><a id="change">)</a>

        <a id="change">self._update_cfg_log()</a>


class T5LoaderLibai(ModelLoaderLiBai):
    def __init__(self, model, libai_cfg, pretrained_model_path, **kwargs):</code></pre>