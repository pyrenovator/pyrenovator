<html><h3>Pattern ID :2888
</h3><img src='11338285.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def test_RNG():
    Test the random number generator with all possible configurations
    <a id="change">for </a><a id="change">precision</a> in <a id="change">["float"</a>, <a id="change">"double"</a>]<a id="change">:
        </a><a id="change">set_precision(precision</a><a id="change">, backend="torch")</a>
        <a id="change">set_precision(precision</a><a id="change">, backend="jax")</a>
        dtype_name<a id="change"> = </a><a id="change">{"double": "float64", "float": "float32"}[precision]</a>
        &#47&#47 Tensorflow support for double and numpy support for float aren&quott
        &#47&#47 implemented yet
        <a id="change">if precision == "double"</a>:
            precision_supported_backends<a id="change"> = </a><a id="change">["numpy"</a>, <a id="change">"torch"</a>, <a id="change">"jax"</a>]
        else:
            precision_supported_backends<a id="change"> = </a><a id="change">["torch"</a>, <a id="change">"jax"</a>, <a id="change">"tensorflow"</a>]
        <a id="change">for </a>backend in precision_supported_backends<a id="change">:
            </a>_run_RNG_tests(dtype_name, backend)


if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>

def test_RNG():
    Test the random number generator with all possible configurations
    <a id="change">_run_tests_with_all_backends(</a>_run_RNG_tests<a id="change">)</a>


if __name__ == "__main__":
    try:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 15</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/fe469e010f5fe3ffa3881d63ff832c2400f14bfe#diff-6be5fe3f7f41c5805077a39f26d71dd428df2519519f86983a39e002eec6a392L157' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11338285</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: fe469e010f5fe3ffa3881d63ff832c2400f14bfe</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/tests/utils_integration_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_RNG(0)</div><div id='n_method'> N Method Name: test_RNG(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/tests/utils_integration_test.py</div><div id='n_file'> N File Name: torchquad/tests/utils_integration_test.py</div><div id='m_start'> M Start Line: 157</div><div id='m_end'> M End Line: 170</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 168</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_linspace_with_grads():
    Test _linspace_with_grads with all possible configurations
    <a id="change">for </a><a id="change">precision</a> in <a id="change">["float"</a>, <a id="change">"double"</a>]<a id="change">:
        </a><a id="change">set_precision(</a>precision<a id="change">, backend="torch")</a>
        <a id="change">set_precision(</a>precision<a id="change">, backend="jax")</a>
        dtype_name<a id="change"> = </a><a id="change">{"double": "float64", "float": "float32"}[precision]</a>
        &#47&#47 Tensorflow support for double and numpy support for float aren&quott
        &#47&#47 implemented yet
        <a id="change">if precision == "double"</a>:
            precision_supported_backends<a id="change"> = </a><a id="change">["numpy"</a>, <a id="change">"torch"</a>, <a id="change">"jax"</a>]
        else:
            &#47&#47 If JAX is tested before Tensorflow here, an out of memory error
            &#47&#47 happens because both allocate all memory on the GPU by default.
            &#47&#47 The XLA_PYTHON_CLIENT_PREALLOCATE=false environment variable
            &#47&#47 avoids the crash of JAX.
            &#47&#47 For some reason it also does not crash if Tensorflow is tested
            &#47&#47 before JAX, which is done here.
            &#47&#47 Calling block_until_ready on all arrays created with JAX instead
            &#47&#47 of changing the tests order did not avoid the crash for some
            &#47&#47 reason.
            precision_supported_backends<a id="change"> = </a><a id="change">["torch"</a>, <a id="change">"tensorflow"</a>, <a id="change">"jax"</a>]

        <a id="change">for </a>backend, requires_grad in product(
            precision_supported_backends, [False, True]
        )<a id="change">:
            </a>_run_linspace_with_grads_tests(dtype_name, backend, requires_grad)


def _run_setup_integration_domain_tests(dtype_name, backend):</code></pre><h3>After Change</h3><pre><code class='java'>

def test_linspace_with_grads():
    Test _linspace_with_grads with all possible configurations
    <a id="change">_run_tests_with_all_backends(
        </a>_run_linspace_with_grads_tests,
        [{"requires_grad": True}, {"requires_grad": False}]<a id="change">,
    )</a>


def _run_setup_integration_domain_tests(dtype_name, backend):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/fe469e010f5fe3ffa3881d63ff832c2400f14bfe#diff-6be5fe3f7f41c5805077a39f26d71dd428df2519519f86983a39e002eec6a392L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11338284</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: fe469e010f5fe3ffa3881d63ff832c2400f14bfe</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/tests/utils_integration_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_linspace_with_grads(0)</div><div id='n_method'> N Method Name: test_linspace_with_grads(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/tests/utils_integration_test.py</div><div id='n_file'> N File Name: torchquad/tests/utils_integration_test.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_RNG():
    Test the random number generator with all possible configurations
    <a id="change">for </a><a id="change">precision</a> in <a id="change">["float"</a>, <a id="change">"double"</a>]<a id="change">:
        </a><a id="change">set_precision(</a>precision<a id="change">, backend="torch")</a>
        <a id="change">set_precision(</a>precision<a id="change">, backend="jax")</a>
        dtype_name<a id="change"> = </a><a id="change">{"double": "float64", "float": "float32"}[precision]</a>
        &#47&#47 Tensorflow support for double and numpy support for float aren&quott
        &#47&#47 implemented yet
        <a id="change">if precision == "double"</a>:
            precision_supported_backends<a id="change"> = </a><a id="change">["numpy"</a>, <a id="change">"torch"</a>, <a id="change">"jax"</a>]
        else:
            precision_supported_backends<a id="change"> = </a><a id="change">["torch"</a>, <a id="change">"jax"</a>, <a id="change">"tensorflow"</a>]
        <a id="change">for </a>backend in precision_supported_backends<a id="change">:
            </a>_run_RNG_tests(dtype_name, backend)


if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>

def test_RNG():
    Test the random number generator with all possible configurations
    <a id="change">_run_tests_with_all_backends(</a>_run_RNG_tests<a id="change">)</a>


if __name__ == "__main__":
    try:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/fe469e010f5fe3ffa3881d63ff832c2400f14bfe#diff-6be5fe3f7f41c5805077a39f26d71dd428df2519519f86983a39e002eec6a392L155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11338280</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: fe469e010f5fe3ffa3881d63ff832c2400f14bfe</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/tests/utils_integration_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_RNG(0)</div><div id='n_method'> N Method Name: test_RNG(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/tests/utils_integration_test.py</div><div id='n_file'> N File Name: torchquad/tests/utils_integration_test.py</div><div id='m_start'> M Start Line: 157</div><div id='m_end'> M End Line: 170</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 168</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_setup_integration_domain():
    Test _setup_integration_domain with all possible configurations
    <a id="change">for </a><a id="change">precision</a> in <a id="change">["float"</a>, <a id="change">"double"</a>]<a id="change">:
        </a><a id="change">set_precision(</a>precision<a id="change">, backend="torch")</a>
        <a id="change">set_precision(</a>precision<a id="change">, backend="jax")</a>
        dtype_name<a id="change"> = </a><a id="change">{"double": "float64", "float": "float32"}[precision]</a>
        &#47&#47 Tensorflow support for double and numpy support for float aren&quott
        &#47&#47 implemented yet
        <a id="change">if precision == "double"</a>:
            precision_supported_backends<a id="change"> = </a><a id="change">["numpy"</a>, <a id="change">"torch"</a>, <a id="change">"jax"</a>]
        else:
            precision_supported_backends<a id="change"> = </a><a id="change">["torch"</a>, <a id="change">"jax"</a>, <a id="change">"tensorflow"</a>]
        <a id="change">for </a>backend in precision_supported_backends<a id="change">:
            </a>_run_setup_integration_domain_tests(dtype_name, backend)


def _run_RNG_tests(dtype_name, backend):</code></pre><h3>After Change</h3><pre><code class='java'>

def test_setup_integration_domain():
    Test _setup_integration_domain with all possible configurations
    <a id="change">_run_tests_with_all_backends(</a>_run_setup_integration_domain_tests<a id="change">)</a>


def _run_RNG_tests(dtype_name, backend):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/fe469e010f5fe3ffa3881d63ff832c2400f14bfe#diff-6be5fe3f7f41c5805077a39f26d71dd428df2519519f86983a39e002eec6a392L106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11338282</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: fe469e010f5fe3ffa3881d63ff832c2400f14bfe</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/tests/utils_integration_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_setup_integration_domain(0)</div><div id='n_method'> N Method Name: test_setup_integration_domain(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/tests/utils_integration_test.py</div><div id='n_file'> N File Name: torchquad/tests/utils_integration_test.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 121</div><div id='n_start'> N Start Line: 130</div><div id='n_end'> N End Line: 130</div><BR>