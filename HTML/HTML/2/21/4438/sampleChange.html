<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        model = self.dummy_model()
        sample = self.dummy_sample_deter

        <a id="change">for </a><a id="change">t</a> in <a id="change">reversed(range(num_inference_steps</a><a id="change">)</a><a id="change">):
            </a>residual = model(sample, inference_step_times[t])

            pred_prev_sample = scheduler.step(residual, sample, t, num_inference_steps, eta)

            variance<a id="change"> = 0</a>
            <a id="change">if eta &gt; 0</a>:
                noise<a id="change"> = </a>self.dummy_sample_deter
                variance<a id="change"> = </a><a id="change">scheduler.get_variance(t, num_inference_steps) ** (0.5) * eta * </a>noise

            sample<a id="change"> = </a>pred_prev_sample<a id="change"> + </a>variance

        result_sum = np.sum(np.abs(sample))
        result_mean = np.mean(np.abs(sample))</code></pre><h3>After Change</h3><pre><code class='java'>
        sample = self.dummy_sample_deter

        scheduler.set_timesteps(num_inference_steps)
        <a id="change">for </a>t in scheduler.timesteps<a id="change">:
            </a>residual<a id="change"> = </a>model(sample, t)

            sample = scheduler.step(residual, t, sample, eta)["prev_sample"]
</code></pre>