<html><h3>Pattern ID :41967
</h3><img src='117615394.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(config</a>, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(config</a><a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(config</a><a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(config</a><a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(config</a><a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 17</div><BR><div id='size'>Non-data size: 32</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/e439ef6a019576492d810ee68946d62ac631292c#diff-71baf12724b33d7f1596b1744305c7b99446878e1f3d7e4d140e37bc39a07944L538' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615394</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: e439ef6a019576492d810ee68946d62ac631292c</div><div id='time'> Time: 2022-03-17</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/PVTv2/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/PVTv2/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/PVTv2/main_multi_gpu.py</div><div id='m_start'> M Start Line: 584</div><div id='m_end'> M End Line: 604</div><div id='n_start'> N Start Line: 538</div><div id='n_end'> N End Line: 551</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/9f7a940250ea8454e24250fde326d83e5600a9ce#diff-5ecc52942ba178f6423714083c2f8d600e7969610ee4b6e30df06905802eba81L558' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615395</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 9f7a940250ea8454e24250fde326d83e5600a9ce</div><div id='time'> Time: 2022-03-18</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/Shuffle_Transformer/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/Shuffle_Transformer/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/Shuffle_Transformer/main_multi_gpu.py</div><div id='m_start'> M Start Line: 560</div><div id='m_end'> M End Line: 580</div><div id='n_start'> N Start Line: 536</div><div id='n_end'> N End Line: 549</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/d133adbee9cb2b343e98e244e7323b4e0404bfe3#diff-ec7d30dc3794343dda1e3203cdb399e6ddecbaf933129ba8155cc4188e1146eeL555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615392</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: d133adbee9cb2b343e98e244e7323b4e0404bfe3</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/ConvMLP/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/ConvMLP/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/ConvMLP/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/c828e210b7fbe9d419d2613961daf49d64456e06#diff-076e00497d35a63efaa9ffc8617d033a6739d509d7ef115af4a31966201b9e07L555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615393</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: c828e210b7fbe9d419d2613961daf49d64456e06</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/ConvMixer/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/ConvMixer/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/ConvMixer/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/183d97f4c92390d4008b8344a7667f4901f29680#diff-e6e54629715a709ccc0a8fa1a9ca5b5b2de52e0b3db7ed2140f5188db1209717L559' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615398</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 183d97f4c92390d4008b8344a7667f4901f29680</div><div id='time'> Time: 2022-03-29</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/ViP/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/ViP/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/ViP/main_multi_gpu.py</div><div id='m_start'> M Start Line: 561</div><div id='m_end'> M End Line: 581</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/0a51d90e46985b5c07005cafa66b865eaa395c71#diff-ab7ad5300d22ba2bf1621fb3951744e674a8de00f300a5543dc1aa80ad04bc1aL555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615399</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 0a51d90e46985b5c07005cafa66b865eaa395c71</div><div id='time'> Time: 2022-03-30</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/MLP-Mixer/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/MLP-Mixer/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/MLP-Mixer/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/e3ef3265a6b6fc8f76a4c7baab710a56f7c5cae6#diff-13c3339fe4edc52eb0ebc7e275511878470e632438a65e2580783a1182608414L555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615396</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: e3ef3265a6b6fc8f76a4c7baab710a56f7c5cae6</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/CycleMLP/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/CycleMLP/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/CycleMLP/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/54d9d051a00984e3212ba81d339655976fb87d1c#diff-22a9c80311203b0d141f2050dfc3d81336733d73d83e792271e2c9020013e3f9L556' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615397</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 54d9d051a00984e3212ba81d339655976fb87d1c</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/SwinTransformer/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/SwinTransformer/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/SwinTransformer/main_multi_gpu.py</div><div id='m_start'> M Start Line: 558</div><div id='m_end'> M End Line: 578</div><div id='n_start'> N Start Line: 548</div><div id='n_end'> N End Line: 561</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/b0cc73b59eb9fc6c39a93c18e536e2f2b1a30e16#diff-8712f0b058ea02058223f9feeb3bf10bc468e300f421bca97899d66d1e72b68bL581' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615402</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: b0cc73b59eb9fc6c39a93c18e536e2f2b1a30e16</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/CSwin/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/CSwin/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/CSwin/main_multi_gpu.py</div><div id='m_start'> M Start Line: 583</div><div id='m_end'> M End Line: 603</div><div id='n_start'> N Start Line: 536</div><div id='n_end'> N End Line: 549</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/9c6aea9305a304e0aad8a9e2490c73743a420017#diff-499f1ab57b55a429cf69fac23cebf0d90c19dca25194ac4f2eca3d7b3c8fe29aL568' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615403</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 9c6aea9305a304e0aad8a9e2490c73743a420017</div><div id='time'> Time: 2022-04-11</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/MobileFormer/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/MobileFormer/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/MobileFormer/main_multi_gpu.py</div><div id='m_start'> M Start Line: 570</div><div id='m_end'> M End Line: 590</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/0851d5d3c8313afd0d7c04847ece0a884cc057e4#diff-9b6b925a93b66a228770b4723783c713176d475f2087610ad1dcaad84dcb52b3L555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615400</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 0851d5d3c8313afd0d7c04847ece0a884cc057e4</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/FF_Only/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/FF_Only/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/FF_Only/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/ed51cb9114f4a31e612b8e6ae94425f461147dd6#diff-58d18f271ab0c5a5ce1d7fad483376e3c365fdaaa116d45c7ee135ec736165d2L580' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615401</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: ed51cb9114f4a31e612b8e6ae94425f461147dd6</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/HVT/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/HVT/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/HVT/main_multi_gpu.py</div><div id='m_start'> M Start Line: 582</div><div id='m_end'> M End Line: 602</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/b155a0c1934ea747170e71af4eabcfeeca90d073#diff-a7021de108eab2c380e7b35d502393b7928380aa3613c2d3af956fed8b973925L581' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615387</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: b155a0c1934ea747170e71af4eabcfeeca90d073</div><div id='time'> Time: 2022-03-17</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/CaiT/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/CaiT/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/CaiT/main_multi_gpu.py</div><div id='m_start'> M Start Line: 583</div><div id='m_end'> M End Line: 603</div><div id='n_start'> N Start Line: 538</div><div id='n_end'> N End Line: 551</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/695de3d3fa113fe9fe6bae3d214e0e1c7b332af7#diff-427b41f01cb5e165b4ce966e0d1437077f4056d7dfb61b44861634eb7c488dc5L555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615390</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 695de3d3fa113fe9fe6bae3d214e0e1c7b332af7</div><div id='time'> Time: 2022-03-31</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/ResMLP/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/ResMLP/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/ResMLP/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/665078193109524252fc5940cfb1d61eb7cc7082#diff-d9508750364be035b1126712dbab55816a3996e9f8ebdae57f304140314bd981L582' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615391</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 665078193109524252fc5940cfb1d61eb7cc7082</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/MobileViT/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/MobileViT/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/MobileViT/main_multi_gpu.py</div><div id='m_start'> M Start Line: 584</div><div id='m_end'> M End Line: 604</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val,), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/2507b00fecbb32f787daea97daabdd927d00b1c3#diff-d23739011c9664db87a926ddb39216cdf282af9c25a35afd7fbbc66187053762L558' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615388</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 2507b00fecbb32f787daea97daabdd927d00b1c3</div><div id='time'> Time: 2022-04-07</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/CvT/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/CvT/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/CvT/main_multi_gpu.py</div><div id='m_start'> M Start Line: 560</div><div id='m_end'> M End Line: 580</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated by: (1) config.py, (2) yaml file, (3) arguments
    arguments<a id="change"> = get_arguments()</a>
    <a id="change">config</a> = <a id="change">get_config()</a>
    <a id="change">config = update_config(</a>config, arguments<a id="change">)</a>

    &#47&#47 set output folder
    <a id="change">if not config.EVAL</a>:
        config.SAVE<a id="change"> = </a><a id="change">&quot{}/train-{}&quot.format(</a>config.SAVE, <a id="change">time.strftime(&quot%Y%m%d-%H-%M-%S&quot</a><a id="change">)</a><a id="change">)</a>
    else:
        config.SAVE<a id="change"> = </a>&quot{}/eval-{}&quot.format(config.SAVE, <a id="change">time.strftime(</a>&quot%Y%m%d-%H-%M-%S&quot<a id="change">)</a>)

    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get dataset and start DDP
    <a id="change">if not config.EVAL</a>:
        dataset_train<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quottrain&quot)</a>
    else:
        dataset_train<a id="change"> = </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, mode=&quotval&quot)</a>
    config.NGPUS = <a id="change">len(</a><a id="change">paddle.static.cuda_places())</a><a id="change"> if </a><a id="change">config.NGPUS == -1 else </a>config.NGPUS
    dist.spawn(main_worker, args=(config, dataset_train, dataset_val, ), nprocs=config.NGPUS)

</code></pre><h3>After Change</h3><pre><code class='java'>

def main():
    &#47&#47 config is updated in order: (1) default in config.py, (2) yaml file, (3) arguments
    <a id="change">config</a> = <a id="change">update_config(</a><a id="change">get_config()</a>, <a id="change">get_arguments())</a>

    &#47&#47 set output folder
    config.SAVE<a id="change"> = </a>os.path.join(config.SAVE,
        f"{&quoteval&quot if config.EVAL else &quottrain&quot}-{time.strftime(&quot%Y%m%d-%H-%M&quot)}")
    if not os.path.exists(config.SAVE):
        os.makedirs(config.SAVE, exist_ok=True)

    &#47&#47 get train dataset if in train mode and val dataset
    dataset_train = <a id="change">get_dataset(</a>config<a id="change">, is_train=True)</a><a id="change"> if not config.EVAL</a><a id="change"> else </a>None
    dataset_val<a id="change"> = </a><a id="change">get_dataset(</a>config<a id="change">, is_train=False)</a>

    &#47&#47 dist spawn lunch: use CUDA_VISIBLE_DEVICES to set available gpus
    paddle.distributed.spawn(main_worker, args=(config, dataset_train, dataset_val))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/br-idl/paddlevit/commit/2eff48aa5e19751aac800cfa49c47c57fb34d9d4#diff-1b4a7db8d9dd5326e9785dc9018eb4ef13864392899fcc1eafdfbf0bfa1cb03dL555' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117615389</div><div id='project'> Project Name: br-idl/paddlevit</div><div id='commit'> Commit Name: 2eff48aa5e19751aac800cfa49c47c57fb34d9d4</div><div id='time'> Time: 2022-03-30</div><div id='author'> Author: xperzy@gmail.com</div><div id='file'> File Name: image_classification/gMLP/main_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: image_classification/gMLP/main_multi_gpu.py</div><div id='n_file'> N File Name: image_classification/gMLP/main_multi_gpu.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 577</div><div id='n_start'> N Start Line: 537</div><div id='n_end'> N End Line: 550</div><BR>