<html><h3>Pattern ID :31729
</h3><img src='92657541.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        self.uploaded_weights = []
        tot_samples = 0
        self.uploaded_ids<a id="change"> = </a><a id="change">[]</a>
        self.uploaded_models<a id="change"> = </a>[]
        for client in self.selected_clients:
            <a id="change">self.uploaded_weights.append(</a>client.train_samples<a id="change">)</a>
            tot_samples<a id="change"> += </a>client.train_samples
            <a id="change">self.uploaded_ids.append(</a>client.id<a id="change">)</a>
            <a id="change">self.uploaded_models.append(</a>client.model<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples

    def aggregate_parameters(self):</code></pre><h3>After Change</h3><pre><code class='java'>
    def receive_models(self):
        assert (len(self.selected_clients) &gt; 0)

        active_clients<a id="change"> = </a><a id="change">random.sample(
            </a>self.selected_clients, <a id="change">int(</a>(<a id="change">1</a><a id="change">-</a>self.client_drop_rate)<a id="change"> * </a>self.join_clients<a id="change">)</a><a id="change">)</a>

        self.uploaded_weights = []
        self.uploaded_models<a id="change"> = </a>[]
        tot_samples = 0
        for <a id="change">client</a> in active_clients:
            client_time_cost<a id="change"> = </a><a id="change">client.train_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.train_time_cost[&quotnum_rounds&quot] + \
                    client.send_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.send_time_cost[&quotnum_rounds&quot]</a>
            <a id="change">if client_time_cost &lt;= self.time_threthold</a>:
                tot_samples<a id="change"> += </a>client.train_samples
                <a id="change">self.uploaded_models.append(</a>client.model<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples

    def aggregate_parameters(self):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 25</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tsingz0/pfl-non-iid/commit/0ecf70532e5cdb63068a838024751005298357a3#diff-ac261f9cd25ad22dde1199e199bfa3189d71fd2a5e873894cab0119281e51cffL93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92657541</div><div id='project'> Project Name: tsingz0/pfl-non-iid</div><div id='commit'> Commit Name: 0ecf70532e5cdb63068a838024751005298357a3</div><div id='time'> Time: 2022-12-04</div><div id='author'> Author: 2719584131@qq.com</div><div id='file'> File Name: system/flcore/servers/serverbase.py</div><div id='m_class'> M Class Name: Server</div><div id='n_method'> N Class Name: Server</div><div id='m_method'> M Method Name: receive_models(1)</div><div id='n_method'> N Method Name: receive_models(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: system/flcore/servers/serverbase.py</div><div id='n_file'> N File Name: system/flcore/servers/serverbase.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 105</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.uploaded_weights = []
        tot_samples = 0
        self.uploaded_ids<a id="change"> = </a><a id="change">[]</a>
        self.uploaded_models<a id="change"> = </a>[]
        for <a id="change">client</a> in self.selected_clients:
            <a id="change">self.uploaded_weights.append(</a>client.train_samples<a id="change">)</a>
            tot_samples<a id="change"> += </a>client.train_samples
            <a id="change">self.uploaded_ids.append(</a>client.id<a id="change">)</a>
            <a id="change">self.uploaded_models.append(</a>client.model<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples

    def aggregate_parameters(self):</code></pre><h3>After Change</h3><pre><code class='java'>
    def receive_models(self):
        assert (len(self.selected_clients) &gt; 0)

        active_clients<a id="change"> = </a><a id="change">random.sample(
            </a>self.selected_clients, <a id="change">int(</a>(<a id="change">1</a><a id="change">-</a>self.client_drop_rate)<a id="change"> * </a>self.join_clients<a id="change">)</a><a id="change">)</a>

        self.uploaded_weights = []
        self.uploaded_models<a id="change"> = </a>[]
        tot_samples = 0
        for <a id="change">client</a> in active_clients:
            client_time_cost<a id="change"> = </a><a id="change">client.train_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.train_time_cost[&quotnum_rounds&quot] + \
                    client.send_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.send_time_cost[&quotnum_rounds&quot]</a>
            <a id="change">if client_time_cost &lt;= self.time_threthold</a>:
                tot_samples<a id="change"> += </a>client.train_samples
                <a id="change">self.uploaded_models.append(</a>client.model<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples

    def aggregate_parameters(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tsingz0/pfl-non-iid/commit/0ecf70532e5cdb63068a838024751005298357a3#diff-ac261f9cd25ad22dde1199e199bfa3189d71fd2a5e873894cab0119281e51cffL90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92657543</div><div id='project'> Project Name: tsingz0/pfl-non-iid</div><div id='commit'> Commit Name: 0ecf70532e5cdb63068a838024751005298357a3</div><div id='time'> Time: 2022-12-04</div><div id='author'> Author: 2719584131@qq.com</div><div id='file'> File Name: system/flcore/servers/serverbase.py</div><div id='m_class'> M Class Name: Server</div><div id='n_method'> N Class Name: Server</div><div id='m_method'> M Method Name: receive_models(1)</div><div id='n_method'> N Method Name: receive_models(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: system/flcore/servers/serverbase.py</div><div id='n_file'> N File Name: system/flcore/servers/serverbase.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 105</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.uploaded_weights = []
        tot_samples = 0
        self.uploaded_ids<a id="change"> = </a><a id="change">[]</a>
        self.uploaded_models<a id="change"> = </a>[]
        for <a id="change">client</a> in self.selected_clients:
            <a id="change">self.uploaded_weights.append(</a>client.train_samples<a id="change">)</a>
            tot_samples<a id="change"> += </a>client.train_samples
            <a id="change">self.uploaded_ids.append(</a>client.id<a id="change">)</a>
            <a id="change">self.uploaded_models.append(</a>client.model.base<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples
</code></pre><h3>After Change</h3><pre><code class='java'>
    def receive_models(self):
        assert (len(self.selected_clients) &gt; 0)

        active_clients<a id="change"> = </a><a id="change">random.sample(
            </a>self.selected_clients, <a id="change">int(</a>(<a id="change">1</a><a id="change">-</a>self.client_drop_rate)<a id="change"> * </a>self.join_clients<a id="change">)</a><a id="change">)</a>

        self.uploaded_weights = []
        self.uploaded_models<a id="change"> = </a>[]
        tot_samples = 0
        for <a id="change">client</a> in active_clients:
            client_time_cost<a id="change"> = </a><a id="change">client.train_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.train_time_cost[&quotnum_rounds&quot] + \
                    client.send_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.send_time_cost[&quotnum_rounds&quot]</a>
            <a id="change">if client_time_cost &lt;= self.time_threthold</a>:
                tot_samples<a id="change"> += </a>client.train_samples
                <a id="change">self.uploaded_models.append(</a>client.model.base<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tsingz0/pfl-non-iid/commit/0ecf70532e5cdb63068a838024751005298357a3#diff-c4ed2fe376fe878dbf5cf018d1ad118d53669e868b6e37d672359d7998ec2c27L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92657536</div><div id='project'> Project Name: tsingz0/pfl-non-iid</div><div id='commit'> Commit Name: 0ecf70532e5cdb63068a838024751005298357a3</div><div id='time'> Time: 2022-12-04</div><div id='author'> Author: 2719584131@qq.com</div><div id='file'> File Name: system/flcore/servers/serverper.py</div><div id='m_class'> M Class Name: FedPer</div><div id='n_method'> N Class Name: FedPer</div><div id='m_method'> M Method Name: receive_models(1)</div><div id='n_method'> N Method Name: receive_models(1)</div><div id='m_parent_class'> M Parent Class: Server</div><div id='n_parent_class'> N Parent Class: Server</div><div id='m_file'> M File Name: system/flcore/servers/serverper.py</div><div id='n_file'> N File Name: system/flcore/servers/serverper.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 54</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.uploaded_weights = []
        tot_samples = 0
        self.uploaded_ids<a id="change"> = </a><a id="change">[]</a>
        self.uploaded_models<a id="change"> = </a>[]
        for <a id="change">client</a> in self.selected_clients:
            <a id="change">self.uploaded_weights.append(</a>client.train_samples<a id="change">)</a>
            tot_samples<a id="change"> += </a>client.train_samples
            <a id="change">self.uploaded_ids.append(</a>client.id<a id="change">)</a>
            <a id="change">self.uploaded_models.append(</a>client.model.base<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples
</code></pre><h3>After Change</h3><pre><code class='java'>
    def receive_models(self):
        assert (len(self.selected_clients) &gt; 0)

        active_clients<a id="change"> = </a><a id="change">random.sample(
            </a>self.selected_clients, <a id="change">int(</a>(<a id="change">1</a><a id="change">-</a>self.client_drop_rate)<a id="change"> * </a>self.join_clients<a id="change">)</a><a id="change">)</a>

        self.uploaded_weights = []
        self.uploaded_models<a id="change"> = </a>[]
        tot_samples = 0
        for <a id="change">client</a> in active_clients:
            client_time_cost<a id="change"> = </a><a id="change">client.train_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.train_time_cost[&quotnum_rounds&quot] + \
                    client.send_time_cost[&quottotal_cost&quot]</a><a id="change"> / client.send_time_cost[&quotnum_rounds&quot]</a>
            <a id="change">if client_time_cost &lt;= self.time_threthold</a>:
                tot_samples<a id="change"> += </a>client.train_samples
                <a id="change">self.uploaded_models.append(</a>client.model.base<a id="change">)</a>
        for i, w in enumerate(self.uploaded_weights):
            self.uploaded_weights[i] = w / tot_samples
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tsingz0/pfl-non-iid/commit/0ecf70532e5cdb63068a838024751005298357a3#diff-b7baa85b7d580698a07ce23725819c7e00cfa835bf2fe6c834ed08837861415aL55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92657539</div><div id='project'> Project Name: tsingz0/pfl-non-iid</div><div id='commit'> Commit Name: 0ecf70532e5cdb63068a838024751005298357a3</div><div id='time'> Time: 2022-12-04</div><div id='author'> Author: 2719584131@qq.com</div><div id='file'> File Name: system/flcore/servers/serverbabu.py</div><div id='m_class'> M Class Name: FedBABU</div><div id='n_method'> N Class Name: FedBABU</div><div id='m_method'> M Method Name: receive_models(1)</div><div id='n_method'> N Method Name: receive_models(1)</div><div id='m_parent_class'> M Parent Class: Server</div><div id='n_parent_class'> N Parent Class: Server</div><div id='m_file'> M File Name: system/flcore/servers/serverbabu.py</div><div id='n_file'> N File Name: system/flcore/servers/serverbabu.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 71</div><BR>