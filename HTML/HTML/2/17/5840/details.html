<html><h3>Pattern ID :5840
</h3><img src='20669963.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">raise ValueError("Non local inference is not implemented!"</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">if api_key is None</a>:
            <a id="change">raise ValueError(
                "Please provide your api_key (https://kiri.ai) with api_key=... or set local=True"</a><a id="change">)</a>

        body<a id="change"> = </a><a id="change">{
            </a>"text": input_text<a id="change">
        }</a>

        <a id="change">res = </a><a id="change">requests.post("https://api.kiri.ai/emotion"</a><a id="change">, json=body,
                            headers={"x-api-key": api_key})</a>

        <a id="change">return res["emotion"]</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 13</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/77b817f0da35180a4c68800ecea3aea89dd267f0#diff-0d97217a389782f8096e3e3832ff160554c25e78f8a87a86c03c8e2cdb3bf639L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20669963</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: 77b817f0da35180a4c68800ecea3aea89dd267f0</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/models/emotion.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: emotion(5)</div><div id='n_method'> N Method Name: emotion(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/models/emotion.py</div><div id='n_file'> N File Name: kiri/models/emotion.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">raise ValueError("Non local inference is not implemented!"</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">if api_key is None</a>:
            <a id="change">raise ValueError(
                "Please provide your api_key (https://kiri.ai) with api_key=... or set local=True"</a><a id="change">)</a>

        body<a id="change"> = </a><a id="change">{
            </a>"text": input_text<a id="change">
        }</a>

        <a id="change">res = </a><a id="change">requests.post("https://api.kiri.ai/summarisation"</a><a id="change">, json=body,
                            headers={"x-api-key": api_key})</a>

        <a id="change">return res["summary"]</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/77b817f0da35180a4c68800ecea3aea89dd267f0#diff-1cd8b5faccf43a7299ad6c16304dbb5601e63b0b822a1ebe26b1452c352daf43L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20669962</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: 77b817f0da35180a4c68800ecea3aea89dd267f0</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/models/summary.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: summarise(5)</div><div id='n_method'> N Method Name: summarise(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/models/summary.py</div><div id='n_file'> N File Name: kiri/models/summary.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return results

    else:
        <a id="change">raise ValueError("Non local inference is not implemented!"</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
            return results

    else:
        <a id="change">if api_key is None</a>:
            <a id="change">raise ValueError(
                "Please provide your api_key (https://kiri.ai) with api_key=... or set local=True"</a><a id="change">)</a>

        body<a id="change"> = </a><a id="change">{
            </a>"text": input_text,
            "labels": labels<a id="change">
        }</a>

        <a id="change">res = </a><a id="change">requests.post("https://api.kiri.ai/classification"</a><a id="change">, json=body,
                            headers={"x-api-key": api_key})</a>

        <a id="change">return res["probabilities"]</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/backprop-ai/backprop/commit/77b817f0da35180a4c68800ecea3aea89dd267f0#diff-1e9a868a525eb9b0306aeea46a49002a8a3c127029bd8bf1555a0231588b6c6aL20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20669961</div><div id='project'> Project Name: backprop-ai/backprop</div><div id='commit'> Commit Name: 77b817f0da35180a4c68800ecea3aea89dd267f0</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/models/classification.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: zero_shot(6)</div><div id='n_method'> N Method Name: zero_shot(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/models/classification.py</div><div id='n_file'> N File Name: kiri/models/classification.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 70</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return model.encode(input_text)

    else:
        <a id="change">raise ValueError("Non local inference is not implemented!"</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        return model.encode(input_text)

    else:
        <a id="change">if api_key is None</a>:
            <a id="change">raise ValueError(
                "Please provide your api_key (https://kiri.ai) with api_key=... or set local=True"</a><a id="change">)</a>

        body<a id="change"> = </a><a id="change">{
            </a>"text": input_text<a id="change">
        }</a>

        <a id="change">res = </a><a id="change">requests.post("https://api.kiri.ai/vectorisation"</a><a id="change">, json=body,
                            headers={"x-api-key": api_key})</a>

        <a id="change">return res["vector"]</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/77b817f0da35180a4c68800ecea3aea89dd267f0#diff-ef690fd52bfe0c676d64819e89e0810b0b736bc592ab030d19b4341f127619a6L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20669960</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: 77b817f0da35180a4c68800ecea3aea89dd267f0</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/models/vectorisation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: vectorise(4)</div><div id='n_method'> N Method Name: vectorise(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/models/vectorisation.py</div><div id='n_file'> N File Name: kiri/models/vectorisation.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">raise ValueError("Non local inference is not implemented!"</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        return generate(input_text, model_name=model_name,
                        tokenizer_name=tokenizer_name, local=local)
    else:
        <a id="change">if api_key is None</a>:
            <a id="change">raise ValueError(
                "Please provide your api_key (https://kiri.ai) with api_key=... or set local=True"</a><a id="change">)</a>

        &#47&#47 List of two tuples
        prev_qa = list(zip(*prev_qa))
        body<a id="change"> = </a><a id="change">{
            </a>"question": question,
            "context": context,
            "prev_q": prev_qa[0],
            "prev_a": prev_qa[1]<a id="change">
        }</a>

        <a id="change">res = </a><a id="change">requests.post("https://api.kiri.ai/qa"</a><a id="change">, json=body,
                            headers={"x-api-key": api_key})</a>

        <a id="change">return res["answer"]</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/77b817f0da35180a4c68800ecea3aea89dd267f0#diff-efb4ea2eb9bdd78acec50a5426cd4898eb3bec9897114848746eeb91e2ad7a15L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20669957</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: 77b817f0da35180a4c68800ecea3aea89dd267f0</div><div id='time'> Time: 2021-01-08</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/models/qa.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: qa(7)</div><div id='n_method'> N Method Name: qa(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/models/qa.py</div><div id='n_file'> N File Name: kiri/models/qa.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 53</div><BR>