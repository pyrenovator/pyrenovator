<html><h3>Pattern ID :22002
</h3><img src='69845097.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if "feature_cost" not in hyperparams.keys()
            else hyperparams["feature_cost"]
        )
        self._lr = 0.01<a id="change"> if </a><a id="change">"lr" not in hyperparams.keys() else </a>hyperparams["lr"]
        self._lambda = (
            0.01 if "lambda_" not in hyperparams.keys() else hyperparams["lambda_"]
        )
        self._n_iter = (
            1000 if "n_iter" not in hyperparams.keys() else hyperparams["n_iter"]
        )
        self._t_max_min = (
            0.5<a id="change"> if </a><a id="change">"t_max_min" not in hyperparams.keys() else </a>hyperparams["t_max_min"]
        )
        self._norm = 2 if "norm" not in hyperparams.keys() else hyperparams["norm"]
        self._clamp = (
            True if "clamp" not in hyperparams.keys() else hyperparams["clamp"]
        )
        self._loss_type = (
            "MSE" if "loss_type" not in hyperparams.keys() else hyperparams["loss_type"]
        )
        self._y_target = (
            [0, 1] if "y_target" not in hyperparams.keys() else hyperparams["y_target"]
        )
        self._binary_cat_features = (
            True<a id="change">
            if </a><a id="change">"binary_cat_features" not in hyperparams.keys()
            else </a>hyperparams["binary_cat_features"]
        )

    def get_counterfactuals(self, factuals: pd.DataFrame) -&gt; pd.DataFrame:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        super().__init__(mlmodel)

        checked_hyperparams = <a id="change">merge_default_parameters(
            </a>hyperparams, self.__DEFAULT_HYPERPARAMS<a id="change">
        )</a>
        self._feature_costs = checked_hyperparams["feature_cost"]
        self._lr = checked_hyperparams["lr"]
        self._lambda = checked_hyperparams["lambda_"]
        self._n_iter = checked_hyperparams["n_iter"]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 10</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0#diff-ebb85f44c1b21594844d5509115fb5c4600bf732b2bffb2a0f9dc6b6cc4b62b3L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69845097</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0</div><div id='time'> Time: 2021-06-21</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='m_class'> M Class Name: Wachter</div><div id='n_method'> N Class Name: Wachter</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: RecourseMethod</div><div id='n_parent_class'> N Parent Class: RecourseMethod</div><div id='m_file'> M File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='n_file'> N File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if "feature_cost" not in hyperparams.keys()
            else hyperparams["feature_cost"]
        )
        self._lr = 0.01<a id="change"> if </a><a id="change">"lr" not in hyperparams.keys() else </a>hyperparams["lr"]
        self._lambda = (
            0.01 if "lambda_" not in hyperparams.keys() else hyperparams["lambda_"]
        )
        self._n_iter = (
            1000 if "n_iter" not in hyperparams.keys() else hyperparams["n_iter"]
        )
        self._t_max_min = (
            0.5<a id="change"> if </a><a id="change">"t_max_min" not in hyperparams.keys() else </a>hyperparams["t_max_min"]
        )
        self._norm = 2 if "norm" not in hyperparams.keys() else hyperparams["norm"]
        self._clamp = (
            True if "clamp" not in hyperparams.keys() else hyperparams["clamp"]
        )
        self._loss_type = (
            "MSE"<a id="change"> if </a><a id="change">"loss_type" not in hyperparams.keys() else </a>hyperparams["loss_type"]
        )
        self._y_target = (
            [0, 1] if "y_target" not in hyperparams.keys() else hyperparams["y_target"]</code></pre><h3>After Change</h3><pre><code class='java'>
        
        super().__init__(mlmodel)

        checked_hyperparams = <a id="change">merge_default_parameters(
            </a>hyperparams, self.__DEFAULT_HYPERPARAMS<a id="change">
        )</a>
        self._feature_costs = checked_hyperparams["feature_cost"]
        self._lr = checked_hyperparams["lr"]
        self._lambda = checked_hyperparams["lambda_"]
        self._n_iter = checked_hyperparams["n_iter"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0#diff-ebb85f44c1b21594844d5509115fb5c4600bf732b2bffb2a0f9dc6b6cc4b62b3L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69845096</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0</div><div id='time'> Time: 2021-06-21</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='m_class'> M Class Name: Wachter</div><div id='n_method'> N Class Name: Wachter</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: RecourseMethod</div><div id='n_parent_class'> N Parent Class: RecourseMethod</div><div id='m_file'> M File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='n_file'> N File Name: carla/recourse_methods/catalog/wachter/model.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Get hyperparameter
        self._fs_size = (
            100<a id="change"> if </a><a id="change">"fs_size" not in hyperparams.keys() else </a>hyperparams["fs_size"]
        )
        self._discretize_continuous = (
            False<a id="change">
            if </a><a id="change">"discretize" not in hyperparams.keys()
            else </a>hyperparams["discretize"]
        )
        self._sample_around_instance = (
            True<a id="change"> if </a><a id="change">"sample" not in hyperparams.keys() else </a>hyperparams["sample"]
        )

        &#47&#47 Build ActionSet</code></pre><h3>After Change</h3><pre><code class='java'>
        )

        &#47&#47 Get hyperparameter
        checked_hyperparams = <a id="change">merge_default_parameters(
            </a>hyperparams, self.__DEFAULT_HYPERPARAMS<a id="change">
        )</a>
        self._fs_size = checked_hyperparams["fs_size"]
        self._discretize_continuous = checked_hyperparams["discretize"]
        self._sample_around_instance = checked_hyperparams["sample"]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0#diff-8da82884c3fa15146c8cc2d92a9d00adc5ae6527a2dc6b8504f3ac285bc1169aL14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69845176</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0</div><div id='time'> Time: 2021-06-21</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/recourse_methods/catalog/actionable_recourse/model.py</div><div id='m_class'> M Class Name: ActionableRecourse</div><div id='n_method'> N Class Name: ActionableRecourse</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: RecourseMethod</div><div id='n_parent_class'> N Parent Class: RecourseMethod</div><div id='m_file'> M File Name: carla/recourse_methods/catalog/actionable_recourse/model.py</div><div id='n_file'> N File Name: carla/recourse_methods/catalog/actionable_recourse/model.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.params = hyperparams

        self._target_column = data.target
        self._lambda = self.params["lambda"]<a id="change"> if </a><a id="change">"lambda" in hyperparams.keys() else </a>0.5
        self._optimizer = (
            self.params["optimizer"] if "optimizer" in hyperparams.keys() else "adam"
        )
        self._lr = self.params["lr"]<a id="change"> if </a><a id="change">"lr" in hyperparams.keys() else </a>0.1
        self._max_iter = (
            self.params["max_iter"] if "max_iter" in hyperparams.keys() else 1000
        )
        self._target_class = (
            hyperparams["target_class"]
            if "target_class" in hyperparams.keys()
            else [0, 1]
        )
        self._binary_cat_features = (
            hyperparams["binary_cat_features"]<a id="change">
            if </a><a id="change">"binary_cat_features" in hyperparams.keys()
            else </a>True
        )

        df_enc_norm_data = self.encode_normalize_order_factuals(</code></pre><h3>After Change</h3><pre><code class='java'>
            }
        
        super().__init__(mlmodel)
        self.params = <a id="change">merge_default_parameters(</a>hyperparams, self.__DEFAULT_HYPERPARAMS<a id="change">)</a>

        self._target_column = data.target
        self._lambda = self.params["lambda"]
        self._optimizer = self.params["optimizer"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0#diff-943c670918a637f02f6280d800304d54fb78f618f920b2794a02cdf6f95188f2L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69845102</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 2f74a92b5bd08fbe28b20a329c5ef65c18d9f2a0</div><div id='time'> Time: 2021-06-21</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/recourse_methods/catalog/revise/model.py</div><div id='m_class'> M Class Name: Revise</div><div id='n_method'> N Class Name: Revise</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: RecourseMethod</div><div id='n_parent_class'> N Parent Class: RecourseMethod</div><div id='m_file'> M File Name: carla/recourse_methods/catalog/revise/model.py</div><div id='n_file'> N File Name: carla/recourse_methods/catalog/revise/model.py</div><div id='m_start'> M Start Line: 61</div><div id='m_end'> M End Line: 87</div><div id='n_start'> N Start Line: 82</div><div id='n_end'> N End Line: 96</div><BR>