<html><h3>Pattern ID :14620
</h3><img src='47963379.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        rel_path = os.path.relpath(root, folder) if (root != folder) else &quot&quot
        label = os.path.basename(rel_path) if leaf_name_only else rel_path.replace(os.path.sep, &quot_&quot)
        if build_class_idx and not subdirs:
            <a id="change">class_to_idx[label]</a><a id="change"> = </a>None
        for f in files:
            base, ext = os.path.splitext(f)
            if ext.lower() in types:
                filenames.append(os.path.join(root, f))
                labels.append(label)
    if build_class_idx:
        classes = <a id="change">sorted(class_to_idx</a><a id="change">.keys(), key=natural_key)</a>
        <a id="change">for </a>idx, c in enumerate(classes)<a id="change">:
            class_to_idx[c] = </a>idx
    images_and_targets = zip(filenames, [class_to_idx[l] for l in labels])
    if sort:
        images_and_targets = sorted(images_and_targets, key=lambda k: natural_key(k[0]))
    if build_class_idx:
        <a id="change">return </a>images_and_targets, classes, class_to_idx
    else:
        return images_and_targets
</code></pre><h3>After Change</h3><pre><code class='java'>
    if class_to_idx is None:
        &#47&#47 building class index
        unique_labels = set(labels)
        sorted_labels = list(<a id="change">sorted(</a>unique_labels<a id="change">, key=natural_key)</a>)
        class_to_idx = <a id="change">{c: idx for idx, c in enumerate(sorted_labels)}</a>
    images_and_targets = zip(filenames, [class_to_idx[l] for l in labels])
    if sort:
        images_and_targets = sorted(images_and_targets, key=lambda k: natural_key(k[0]))
    <a id="change">return </a>images_and_targets<a id="change">, class_to_idx</a>


def load_class_map(filename, root=&quot&quot):
    class_to_idx = {}</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 14</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/alvinwan/nbdt-pytorch-image-models/commit/1daa303744763c141a137c589aa6068c174aa669#diff-bf0bed803b304dd59a70a5731c1a1c56dfb5b781c6b435177fab26210d291087L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47963379</div><div id='project'> Project Name: alvinwan/nbdt-pytorch-image-models</div><div id='commit'> Commit Name: 1daa303744763c141a137c589aa6068c174aa669</div><div id='time'> Time: 2020-02-01</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/data/dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: find_images_and_targets(5)</div><div id='n_method'> N Method Name: find_images_and_targets(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/data/dataset.py</div><div id='n_file'> N File Name: timm/data/dataset.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        rel_path = os.path.relpath(root, folder) if (root != folder) else &quot&quot
        label = os.path.basename(rel_path) if leaf_name_only else rel_path.replace(os.path.sep, &quot_&quot)
        if build_class_idx and not subdirs:
            <a id="change">class_to_idx[label]</a><a id="change"> = </a>None
        for f in files:
            base, ext = os.path.splitext(f)
            if ext.lower() in types:
                filenames.append(os.path.join(root, f))
                labels.append(label)
    if build_class_idx:
        classes = <a id="change">sorted(</a><a id="change">class_to_idx.keys(), key=natural_key)</a>
        <a id="change">for </a>idx, c in enumerate(classes)<a id="change">:
            class_to_idx[c] = </a>idx
    images_and_targets = zip(filenames, [class_to_idx[l] for l in labels])
    if sort:
        images_and_targets = sorted(images_and_targets, key=lambda k: natural_key(k[0]))
    if build_class_idx:
        return images_and_targets, classes, class_to_idx
    else:
        <a id="change">return </a>images_and_targets


class Dataset(data.Dataset):</code></pre><h3>After Change</h3><pre><code class='java'>
    if class_to_idx is None:
        &#47&#47 building class index
        unique_labels = set(labels)
        sorted_labels = list(<a id="change">sorted(</a>unique_labels<a id="change">, key=natural_key)</a>)
        class_to_idx = <a id="change">{c: idx for idx, c in enumerate(sorted_labels)}</a>
    images_and_targets = zip(filenames, [class_to_idx[l] for l in labels])
    if sort:
        images_and_targets = sorted(images_and_targets, key=lambda k: natural_key(k[0]))
    <a id="change">return </a>images_and_targets<a id="change">, class_to_idx</a>


def load_class_map(filename, root=&quot&quot):
    class_to_idx = {}</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alvinwan/nbdt-pytorch-image-models/commit/1daa303744763c141a137c589aa6068c174aa669#diff-bf0bed803b304dd59a70a5731c1a1c56dfb5b781c6b435177fab26210d291087L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47963378</div><div id='project'> Project Name: alvinwan/nbdt-pytorch-image-models</div><div id='commit'> Commit Name: 1daa303744763c141a137c589aa6068c174aa669</div><div id='time'> Time: 2020-02-01</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/data/dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: find_images_and_targets(5)</div><div id='n_method'> N Method Name: find_images_and_targets(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/data/dataset.py</div><div id='n_file'> N File Name: timm/data/dataset.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            continue
        dirname, basename = os.path.split(ti.path)
        label = os.path.basename(dirname)
        <a id="change">class_to_idx[label]</a><a id="change"> = </a>None
        ext = os.path.splitext(basename)[1]
        if ext.lower() in IMG_EXTENSIONS:
            files.append(ti)
            labels.append(label)
    <a id="change">for </a>idx, c in enumerate(<a id="change">sorted(</a><a id="change">class_to_idx.keys(), key=natural_key)</a>)<a id="change">:
        class_to_idx[c] = </a>idx
    tarinfo_and_targets = zip(files, [class_to_idx[l] for l in labels])
    tarinfo_and_targets = sorted(tarinfo_and_targets, key=lambda k: natural_key(k[0].path))
    <a id="change">return </a>tarinfo_and_targets


class DatasetTar(data.Dataset):</code></pre><h3>After Change</h3><pre><code class='java'>
            labels.append(label)
    if class_to_idx is None:
        unique_labels = set(labels)
        sorted_labels = list(<a id="change">sorted(</a>unique_labels<a id="change">, key=natural_key)</a>)
        class_to_idx = <a id="change">{c: idx for idx, c in enumerate(sorted_labels)}</a>
    tarinfo_and_targets = zip(files, [class_to_idx[l] for l in labels])
    if sort:
        tarinfo_and_targets = sorted(tarinfo_and_targets, key=lambda k: natural_key(k[0].path))
    <a id="change">return </a>tarinfo_and_targets<a id="change">, class_to_idx</a>


class DatasetTar(data.Dataset):
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alvinwan/nbdt-pytorch-image-models/commit/1daa303744763c141a137c589aa6068c174aa669#diff-bf0bed803b304dd59a70a5731c1a1c56dfb5b781c6b435177fab26210d291087L95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47963381</div><div id='project'> Project Name: alvinwan/nbdt-pytorch-image-models</div><div id='commit'> Commit Name: 1daa303744763c141a137c589aa6068c174aa669</div><div id='time'> Time: 2020-02-01</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/data/dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _extract_tar_info(3)</div><div id='n_method'> N Method Name: _extract_tar_info(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/data/dataset.py</div><div id='n_file'> N File Name: timm/data/dataset.py</div><div id='m_start'> M Start Line: 95</div><div id='m_end'> M End Line: 113</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 126</div><BR>