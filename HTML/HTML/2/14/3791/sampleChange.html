<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.ITEM_LIST_LEN = config[&quotITEM_LIST_LENGTH_FIELD&quot]
        self.TARGET_ITEM_ID = self.ITEM_ID
        self.NEG_ITEM_ID = config[&quotNEG_PREFIX&quot] + self.ITEM_ID
        <a id="change">self.FEATURE_FIELD = config</a><a id="change">[&quotFEATURE_FIELD&quot]</a>
        self.FEATURE_LIST<a id="change"> = self.FEATURE_FIELD</a><a id="change"> + config</a><a id="change">[&quotLIST_SUFFIX&quot]</a>

        self.max_item_list_length = config[&quotMAX_ITEM_LIST_LENGTH&quot]
        self.item_count = dataset.item_num
        self.feature_count = <a id="change">dataset.num(self.FEATURE_FIELD</a><a id="change">)</a>
        self.item_feat = dataset.get_item_feature()
        print(self.item_feat.interaction.keys())

        &#47&#47 embedding_size is same as hidden_size
        self.item_embedding = nn.Embedding(self.item_count, config[&quothidden_size&quot], padding_idx=0)
        self.feature_embedding = <a id="change">nn.Embedding(</a>self.feature_count, config[&quothidden_size&quot]<a id="change">, padding_idx=0)</a>
        self.position_embedding = nn.Embedding(self.max_item_list_length, config[&quothidden_size&quot], padding_idx=0)

        &#47&#47 For simplicity, we use same architecture for item_trm and feature_trm
        self.item_trm_encoder = TransformerEncoder(config)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.item_embedding = nn.Embedding(self.item_count, config[&quothidden_size&quot], padding_idx=0)
        self.position_embedding = nn.Embedding(self.max_item_list_length, config[&quothidden_size&quot], padding_idx=0)

        <a id="change">self.get_feat_dims()</a>
        <a id="change">self.get_feat_embeddings()</a>

        &#47&#47 For simplicity, we use same architecture for item_trm and feature_trm
        self.item_trm_encoder = TransformerEncoder(config)
</code></pre>