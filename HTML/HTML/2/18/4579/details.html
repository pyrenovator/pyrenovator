<html><h3>Pattern ID :4579
</h3><img src='16537869.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    prop = np.array(server.local_data_vols)
    prop = prop ** (-beta)
    maxp = np.max(prop)
    <a id="change">for </a>c, <a id="change">pc</a> in <a id="change">zip(</a>server.clients, prop<a id="change">):
        </a>c.prob_available<a id="change"> = pc</a><a id="change"> / </a>maxp

def y_fewer_first_client_availability(server, beta=0.2):
    </code></pre><h3>After Change</h3><pre><code class='java'>
    Clients with less data will have a larger active rate at each round.
            ci=(1-beta)^(-|Di|), pi=ci/cmax, beta ∈ [0,1)
    
    <a id="change">global state_updater</a>
    &#47&#47 alpha = float(mode[mode.find(&quot-&quot) + 1:]) if mode.find(&quot-&quot) != -1 else 0.1
    prop = np.array(server.local_data_vols)
    prop = prop ** (-beta)
    maxp = np.max(prop)
    probs<a id="change"> = </a>prop<a id="change">/</a>maxp
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_available&quot</a>, probs<a id="change">)</a>
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_unavailable&quot</a>, <a id="change">[1 - p for p in probs]</a><a id="change">)</a>
    state_updater.roundly_fixed_availability = True

def y_fewer_first_client_availability(server, beta=0.2):
    </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 12</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L338' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16537869</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: less_data_first_client_availability(2)</div><div id='n_method'> N Method Name: less_data_first_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 338</div><div id='m_end'> M End Line: 342</div><div id='n_start'> N Start Line: 380</div><div id='n_end'> N End Line: 388</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    prop = np.array(server.local_data_vols)
    prop = prop ** (-beta)
    maxp = np.max(prop)
    <a id="change">for </a>c, <a id="change">pc</a> in <a id="change">zip(</a>server.clients, prop<a id="change">):
        </a>c.prob_available<a id="change"> = </a>pc<a id="change"> / </a>maxp

def y_fewer_first_client_availability(server, beta=0.2):
    </code></pre><h3>After Change</h3><pre><code class='java'>
    Clients with less data will have a larger active rate at each round.
            ci=(1-beta)^(-|Di|), pi=ci/cmax, beta ∈ [0,1)
    
    <a id="change">global state_updater</a>
    &#47&#47 alpha = float(mode[mode.find(&quot-&quot) + 1:]) if mode.find(&quot-&quot) != -1 else 0.1
    prop = np.array(server.local_data_vols)
    prop = prop ** (-beta)
    maxp = np.max(prop)
    probs<a id="change"> = </a>prop<a id="change">/</a>maxp
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_available&quot</a>, probs<a id="change">)</a>
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_unavailable&quot</a>, <a id="change">[1 - p for p in probs]</a><a id="change">)</a>
    state_updater.roundly_fixed_availability = True

def y_fewer_first_client_availability(server, beta=0.2):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L331' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16537870</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: less_data_first_client_availability(2)</div><div id='n_method'> N Method Name: less_data_first_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 338</div><div id='m_end'> M End Line: 342</div><div id='n_start'> N Start Line: 380</div><div id='n_end'> N End Line: 388</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    p = np.array(server.local_data_vols)
    p = p ** beta
    maxp = np.max(p)
    <a id="change">for </a>c, <a id="change">pc</a> in <a id="change">zip(</a>server.clients, p<a id="change">):
        </a>c.prob_available<a id="change"> = </a>pc<a id="change"> / </a>maxp

def less_data_first_client_availability(server, beta=0.5):
    </code></pre><h3>After Change</h3><pre><code class='java'>
    Clients with more data will have a larger active rate at each round.
    e.g. ci=tanh(-|Di| ln(beta+epsilon)), pi=ci/cmax, beta ∈ [0,1)
    
    <a id="change">global state_updater</a>
    p = np.array(server.local_data_vols)
    p = p ** beta
    maxp = np.max(p)
    probs<a id="change"> = </a>p<a id="change">/</a>maxp
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_available&quot</a>, probs<a id="change">)</a>
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_unavailable&quot</a>, <a id="change">[1 - p for p in probs]</a><a id="change">)</a>
    state_updater.roundly_fixed_availability = True

def less_data_first_client_availability(server, beta=0.5):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L319' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16537871</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: more_data_first_client_availability(2)</div><div id='n_method'> N Method Name: more_data_first_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 326</div><div id='m_end'> M End Line: 330</div><div id='n_start'> N Start Line: 366</div><div id='n_end'> N End Line: 373</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    <a id="change">for </a>c, <a id="change">Tk</a> in <a id="change">zip(</a>server.clients, Tks<a id="change">):
        </a>c.prob_available<a id="change"> = </a>1.0<a id="change"> * </a>Tk / max_Tk

def sin_lognormal_client_availability(server, beta=0.1):
    This setting shares the same active rate distribution with LogNormal, however, the active rates are</code></pre><h3>After Change</h3><pre><code class='java'>
    Client Availability and Time-Varying Communication Constraints&quot (http://arxiv.org/abs/2205.06730).
        ci ~ logmal(0, lognormal(0, -ln(1-beta)), pi=ci/cmax
    
    <a id="change">global state_updater</a>
    epsilon = 0.000001
    Tks = [np.random.lognormal(0, -np.log(1 - beta - epsilon)) for _ in server.clients]
    max_Tk = max(Tks)
    probs<a id="change"> = </a>np.array(Tks)<a id="change">/</a>max_Tk
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_available&quot</a>, probs<a id="change">)</a>
    <a id="change">state_updater.set_variable(</a>state_updater.all_clients, <a id="change">&quotprob_unavailable&quot</a>, <a id="change">[1 - p for p in probs]</a><a id="change">)</a>
    state_updater.roundly_fixed_availability = True

def sin_lognormal_client_availability(server, beta=0.1):
    This setting shares the same active rate distribution with LogNormal, however, the active rates are</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/5139f0998d6cbf6361eeb62cbc14f09764877f5e#diff-b6937938de97ac03fd435e1e565816bf3689b145927a977f5a2969aea1183753L363' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16537872</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 5139f0998d6cbf6361eeb62cbc14f09764877f5e</div><div id='time'> Time: 2022-11-05</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/system_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: lognormal_client_availability(2)</div><div id='n_method'> N Method Name: lognormal_client_availability(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/system_simulator.py</div><div id='n_file'> N File Name: utils/system_simulator.py</div><div id='m_start'> M Start Line: 369</div><div id='m_end'> M End Line: 373</div><div id='n_start'> N Start Line: 423</div><div id='n_end'> N End Line: 430</div><BR>