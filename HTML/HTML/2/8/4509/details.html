<html><h3>Pattern ID :4509
</h3><img src='16368377.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    expected_batch_size = (
        batch_size if split == base.Split.TRAIN else eval_batch_size)

    <a id="change">self.assertEqual(movie_id.shape[0]</a>, expected_batch_size<a id="change">)</a>
    <a id="change">self.assertEqual(</a>user_id.shape[0], expected_batch_size<a id="change">)</a>
    <a id="change">self.assertEqual(</a>labels.shape[0], expected_batch_size<a id="change">)</a>

  @parameterized.named_parameters((&quotTrain&quot, base.Split.TRAIN),
                                  (&quotValidation&quot, base.Split.VAL),
                                  (&quotTest&quot, base.Split.TEST))</code></pre><h3>After Change</h3><pre><code class='java'>
                        &quotuser_occupation_label&quot, &quotuser_occupation_text&quot,
                        &quotuser_zip_code&quot, &quotlabels&quot]

    <a id="change">for </a>name in feature_name_arr<a id="change">:
      </a>feature = element[name]
      expected_batch_size = (
          batch_size if split == base.Split.TRAIN else eval_batch_size)
      <a id="change">self.assertEqual(</a>feature.shape[0], expected_batch_size<a id="change">)</a>

  @parameterized.named_parameters((&quotTrain&quot, base.Split.TRAIN),
                                  (&quotValidation&quot, base.Split.VAL),
                                  (&quotTest&quot, base.Split.TEST))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/google/uncertainty-baselines/commit/3e776527b4ccd9c59660e6d5f8ac260b6b62c8c1#diff-ed0f635dffa2b60c52c8ce50b535da3c4b4e47a40e143ce24e2be74dd8be4555L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16368377</div><div id='project'> Project Name: google/uncertainty-baselines</div><div id='commit'> Commit Name: 3e776527b4ccd9c59660e6d5f8ac260b6b62c8c1</div><div id='time'> Time: 2020-10-07</div><div id='author'> Author: chenzhe@google.com</div><div id='file'> File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='m_class'> M Class Name: MovieLensDatasetTest</div><div id='n_method'> N Class Name: MovieLensDatasetTest</div><div id='m_method'> M Method Name: testDatasetSize(2)</div><div id='n_method'> N Method Name: testDatasetSize(2)</div><div id='m_parent_class'> M Parent Class: parameterized.TestCase,tf.test.TestCase</div><div id='n_parent_class'> N Parent Class: parameterized.TestCase,tf.test.TestCase</div><div id='m_file'> M File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='n_file'> N File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 55</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.assertEqual(len(mapped_dataset), 5)

        <a id="change">self.assertEqual(
            </a>mapped_dataset[0]["source"], "Q: Who is Bill Gates?\nA: &lt;/s&gt;"<a id="change">
        )</a>

        <a id="change">self.assertEqual(
            mapped_dataset[0]["target"]</a>,
            "Bill Gates is a billionaire."<a id="change">,
        )</a>

        self.assertEqual(
            mapped_dataset[1]["source"], "Q: who is john lennon?\nA: &lt;/s&gt;"
        )
        <a id="change">self.assertEqual(
            </a>mapped_dataset[1]["target"],
            "John Lennon was a musician."<a id="change">,
        )</a>

    def test_few_shot_exception(self):
        with self.assertRaises(KeyError):
            FewShotJinjaMapper(</code></pre><h3>After Change</h3><pre><code class='java'>

        self.assertEqual(len(mapped_dataset), 5)

        <a id="change">for i</a> in range(5)<a id="change">:
            </a>self.assertEqual(
                mapped_dataset[i]["source"],
                f"Q: {FEW_SHOT_DATASET[i][&quotquestion&quot]}\nA: &lt;/s&gt;",
            )

            <a id="change">self.assertEqual(
                </a>mapped_dataset[i]["target"],
                FEW_SHOT_DATASET[i]["answer"]<a id="change">,
            )</a>

    def test_few_shot_exception(self):
        with self.assertRaises(KeyError):
            FewShotJinjaMapper(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/smashed/commit/679401d1b908c21aa216f6ec7895271b7f78a88c#diff-b1818a7fded3b080287b597b062f42929dda519dfe8ce1dd5fefd6ac75accb06L155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16368345</div><div id='project'> Project Name: allenai/smashed</div><div id='commit'> Commit Name: 679401d1b908c21aa216f6ec7895271b7f78a88c</div><div id='time'> Time: 2023-01-11</div><div id='author'> Author: lucas@allenai.org</div><div id='file'> File Name: tests/test_promptsource.py</div><div id='m_class'> M Class Name: TestPromptsource</div><div id='n_method'> N Class Name: TestPromptsource</div><div id='m_method'> M Method Name: test_few_shot_jinja_zero_shots(1)</div><div id='n_method'> N Method Name: test_few_shot_jinja_zero_shots(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_promptsource.py</div><div id='n_file'> N File Name: tests/test_promptsource.py</div><div id='m_start'> M Start Line: 156</div><div id='m_end'> M End Line: 179</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 134</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
      expected_batch_size = (
          batch_size if split == base.Split.TRAIN else eval_batch_size)

      <a id="change">self.assertEqual(movie_id.shape[0]</a>, expected_batch_size<a id="change">)</a>
      <a id="change">self.assertEqual(</a>user_id.shape[0], expected_batch_size<a id="change">)</a>
      <a id="change">self.assertEqual(</a>labels.shape[0], expected_batch_size<a id="change">)</a>


if __name__ == &quot__main__&quot:
  tf.test.main()</code></pre><h3>After Change</h3><pre><code class='java'>
                          &quotuser_occupation_label&quot, &quotuser_occupation_text&quot,
                          &quotuser_zip_code&quot, &quotlabels&quot]

      <a id="change">for name</a> in feature_name_arr<a id="change">:
        </a>feature = element[name]
        expected_batch_size = (
            batch_size if split == base.Split.TRAIN else eval_batch_size)
        <a id="change">self.assertEqual(</a>feature.shape[0], expected_batch_size<a id="change">)</a>


if __name__ == &quot__main__&quot:
  tf.test.main()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/google/uncertainty-baselines/commit/3e776527b4ccd9c59660e6d5f8ac260b6b62c8c1#diff-ed0f635dffa2b60c52c8ce50b535da3c4b4e47a40e143ce24e2be74dd8be4555L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16368349</div><div id='project'> Project Name: google/uncertainty-baselines</div><div id='commit'> Commit Name: 3e776527b4ccd9c59660e6d5f8ac260b6b62c8c1</div><div id='time'> Time: 2020-10-07</div><div id='author'> Author: chenzhe@google.com</div><div id='file'> File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='m_class'> M Class Name: MovieLensDatasetTest</div><div id='n_method'> N Class Name: MovieLensDatasetTest</div><div id='m_method'> M Method Name: testDatasetSizeNoneValidation(2)</div><div id='n_method'> N Method Name: testDatasetSizeNoneValidation(2)</div><div id='m_parent_class'> M Parent Class: parameterized.TestCase,tf.test.TestCase</div><div id='n_parent_class'> N Parent Class: parameterized.TestCase,tf.test.TestCase</div><div id='m_file'> M File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='n_file'> N File Name: uncertainty_baselines/datasets/movielens_test.py</div><div id='m_start'> M Start Line: 74</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 87</div><BR>