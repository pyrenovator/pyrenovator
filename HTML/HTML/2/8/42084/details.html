<html><h3>Pattern ID :42084
</h3><img src='117850086.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        deployment_stages_topic = <a id="change">"/model_ops/model_device/return_deployment_stages/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,</code></pre><h3>After Change</h3><pre><code class='java'>
    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        deployment_stages_topic_prefix = "/model_ops/model_device/return_deployment_stages"
        deployment_stages_topic<a id="change"> = </a><a id="change">"{}/{}".format(deployment_stages_topic_prefix</a>, end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,
                                     "model_stage_index": model_stages_index,
                                     "model_stage_title": model_stages_title,
                                     "model_stage_detail": model_stage_detail,
                                     "timestamp": int(format(time.time(), &quot.0f&quot))}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_stages_topic, json.dumps(deployment_stages_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(deployment_stages_topic_prefix</a>, <a id="change">json.dumps(</a>deployment_stages_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def start_cloud_server_process(self):
        run_config = self.request_json["run_config"]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/71959bc097732169cb2b42a84e2a6f4f29d7f8aa#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L666' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850086</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 71959bc097732169cb2b42a84e2a6f4f29d7f8aa</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_stages(8)</div><div id='n_method'> N Method Name: send_deployment_stages(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 666</div><div id='m_end'> M End Line: 666</div><div id='n_start'> N Start Line: 670</div><div id='n_end'> N End Line: 683</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        deployment_status_topic = <a id="change">"/model_ops/model_device/return_deployment_status/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_status_payload = {"end_point_id": end_point_id, "model_name": model_name,
                                     "model_url": model_inference_url,
                                     "model_status": model_status}
        self.setup_client_mqtt_mgr()</code></pre><h3>After Change</h3><pre><code class='java'>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        <a id="change">deployment_status_topic_prefix</a> = "/model_ops/model_device/return_deployment_status"
        deployment_status_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_status_topic_prefix, end_point_id<a id="change">)</a>
        deployment_status_payload = {"end_point_id": end_point_id, "model_name": model_name,
                                     "model_url": model_inference_url,
                                     "model_status": model_status}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_status_topic, json.dumps(deployment_status_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_status_topic_prefix, <a id="change">json.dumps(</a>deployment_status_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/aae4b75593fa9d374406cf8ad87a6b1e8d1843a4#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L654' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850087</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: aae4b75593fa9d374406cf8ad87a6b1e8d1843a4</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_status(5)</div><div id='n_method'> N Method Name: send_deployment_status(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 655</div><div id='m_end'> M End Line: 655</div><div id='n_start'> N Start Line: 657</div><div id='n_end'> N End Line: 665</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        deployment_stages_topic = <a id="change">"/model_ops/model_device/return_deployment_stages/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,</code></pre><h3>After Change</h3><pre><code class='java'>

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        <a id="change">deployment_stages_topic_prefix</a> = "/model_ops/model_device/return_deployment_stages"
        deployment_stages_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_stages_topic_prefix, end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,
                                     "model_stage_index": model_stages_index,
                                     "model_stage_title": model_stages_title,
                                     "model_stage_detail": model_stage_detail,
                                     "timestamp": int(format(time.time(), &quot.0f&quot))}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_stages_topic, json.dumps(deployment_stages_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_stages_topic_prefix, <a id="change">json.dumps(</a>deployment_stages_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def start_cloud_server_process(self):
        run_config = self.request_json["run_config"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/71959bc097732169cb2b42a84e2a6f4f29d7f8aa#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L664' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850084</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 71959bc097732169cb2b42a84e2a6f4f29d7f8aa</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_stages(8)</div><div id='n_method'> N Method Name: send_deployment_stages(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 666</div><div id='m_end'> M End Line: 666</div><div id='n_start'> N Start Line: 670</div><div id='n_end'> N End Line: 683</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def send_deployment_results(self, end_point_id, model_name, model_inference_url,
                                model_version, inference_port, inference_engine,
                                model_metadata, model_config):
        deployment_results_topic = <a id="change">"/model_ops/model_device/return_deployment_result/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_results_payload = {"model_name": model_name, "model_url": model_inference_url,
                                      "version": model_version, "port": inference_port,
                                      "inference_engine": inference_engine,
                                      "model_metadata": model_metadata,</code></pre><h3>After Change</h3><pre><code class='java'>
    def send_deployment_results(self, end_point_id, model_name, model_inference_url,
                                model_version, inference_port, inference_engine,
                                model_metadata, model_config):
        <a id="change">deployment_results_topic_prefix</a> = "/model_ops/model_device/return_deployment_result"
        deployment_results_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_results_topic_prefix, end_point_id<a id="change">)</a>
        deployment_results_payload = {"model_name": model_name, "model_url": model_inference_url,
                                      "version": model_version, "port": inference_port,
                                      "inference_engine": inference_engine,
                                      "model_metadata": model_metadata,
                                      "model_config": model_config}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_results_topic, json.dumps(deployment_results_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_results_topic_prefix, <a id="change">json.dumps(</a>deployment_results_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        deployment_status_topic_prefix = "/model_ops/model_device/return_deployment_status"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/aae4b75593fa9d374406cf8ad87a6b1e8d1843a4#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L640' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850085</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: aae4b75593fa9d374406cf8ad87a6b1e8d1843a4</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_results(9)</div><div id='n_method'> N Method Name: send_deployment_results(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 643</div><div id='m_end'> M End Line: 643</div><div id='n_start'> N Start Line: 643</div><div id='n_end'> N End Line: 653</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def send_deployment_results(self, end_point_id, model_name, model_inference_url,
                                model_version, inference_port, inference_engine,
                                model_metadata, model_config):
        deployment_results_topic = <a id="change">"/model_ops/model_device/return_deployment_result/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_results_payload = {"model_name": model_name, "model_url": model_inference_url,
                                      "version": model_version, "port": inference_port,
                                      "inference_engine": inference_engine,
                                      "model_metadata": model_metadata,</code></pre><h3>After Change</h3><pre><code class='java'>
    def send_deployment_results(self, end_point_id, model_name, model_inference_url,
                                model_version, inference_port, inference_engine,
                                model_metadata, model_config):
        <a id="change">deployment_results_topic_prefix</a> = "/model_ops/model_device/return_deployment_result"
        deployment_results_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_results_topic_prefix, end_point_id<a id="change">)</a>
        deployment_results_payload = {"model_name": model_name, "model_url": model_inference_url,
                                      "version": model_version, "port": inference_port,
                                      "inference_engine": inference_engine,
                                      "model_metadata": model_metadata,
                                      "model_config": model_config}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_results_topic, json.dumps(deployment_results_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_results_topic_prefix, <a id="change">json.dumps(</a>deployment_results_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        deployment_status_topic_prefix = "/model_ops/model_device/return_deployment_status"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/71959bc097732169cb2b42a84e2a6f4f29d7f8aa#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L640' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850082</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 71959bc097732169cb2b42a84e2a6f4f29d7f8aa</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_results(9)</div><div id='n_method'> N Method Name: send_deployment_results(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 643</div><div id='m_end'> M End Line: 643</div><div id='n_start'> N Start Line: 643</div><div id='n_end'> N End Line: 653</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        deployment_status_topic = <a id="change">"/model_ops/model_device/return_deployment_status/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_status_payload = {"end_point_id": end_point_id, "model_name": model_name,
                                     "model_url": model_inference_url,
                                     "model_status": model_status}
        self.setup_client_mqtt_mgr()</code></pre><h3>After Change</h3><pre><code class='java'>
        self.release_client_mqtt_mgr()

    def send_deployment_status(self, end_point_id, model_name, model_inference_url, model_status):
        <a id="change">deployment_status_topic_prefix</a> = "/model_ops/model_device/return_deployment_status"
        deployment_status_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_status_topic_prefix, end_point_id<a id="change">)</a>
        deployment_status_payload = {"end_point_id": end_point_id, "model_name": model_name,
                                     "model_url": model_inference_url,
                                     "model_status": model_status}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_status_topic, json.dumps(deployment_status_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_status_topic_prefix, <a id="change">json.dumps(</a>deployment_status_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/71959bc097732169cb2b42a84e2a6f4f29d7f8aa#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L654' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850083</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 71959bc097732169cb2b42a84e2a6f4f29d7f8aa</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_status(5)</div><div id='n_method'> N Method Name: send_deployment_status(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 655</div><div id='m_end'> M End Line: 655</div><div id='n_start'> N Start Line: 657</div><div id='n_end'> N End Line: 665</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        deployment_stages_topic = <a id="change">"/model_ops/model_device/return_deployment_stages/{}".format(</a>end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,</code></pre><h3>After Change</h3><pre><code class='java'>

    def send_deployment_stages(self, end_point_id, model_name, model_id, model_inference_url,
                               model_stages_index, model_stages_title, model_stage_detail):
        <a id="change">deployment_stages_topic_prefix</a> = "/model_ops/model_device/return_deployment_stages"
        deployment_stages_topic<a id="change"> = </a><a id="change">"{}/{}".format(</a>deployment_stages_topic_prefix, end_point_id<a id="change">)</a>
        deployment_stages_payload = {"model_name": model_name,
                                     "model_id": model_id,
                                     "model_url": model_inference_url,
                                     "end_point_id": end_point_id,
                                     "model_stage_index": model_stages_index,
                                     "model_stage_title": model_stages_title,
                                     "model_stage_detail": model_stage_detail,
                                     "timestamp": int(format(time.time(), &quot.0f&quot))}
        self.setup_client_mqtt_mgr()
        self.wait_client_mqtt_connected()
        self.client_mqtt_mgr.send_message_json(deployment_stages_topic, json.dumps(deployment_stages_payload))
        <a id="change">self.client_mqtt_mgr.send_message_json(</a>deployment_stages_topic_prefix, <a id="change">json.dumps(</a>deployment_stages_payload<a id="change">)</a><a id="change">)</a>
        self.release_client_mqtt_mgr()

    def start_cloud_server_process(self):
        run_config = self.request_json["run_config"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/aae4b75593fa9d374406cf8ad87a6b1e8d1843a4#diff-cfaa966ad20b7c4fe1e2568196ec97beb805798368d33b17192f962b871d54b2L664' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117850092</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: aae4b75593fa9d374406cf8ad87a6b1e8d1843a4</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_class'> M Class Name: FedMLServerRunner</div><div id='n_method'> N Class Name: FedMLServerRunner</div><div id='m_method'> M Method Name: send_deployment_stages(8)</div><div id='n_method'> N Method Name: send_deployment_stages(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/model_deployment/device_server_runner.py</div><div id='m_start'> M Start Line: 666</div><div id='m_end'> M End Line: 666</div><div id='n_start'> N Start Line: 670</div><div id='n_end'> N End Line: 683</div><BR>