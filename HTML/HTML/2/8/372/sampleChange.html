<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return ifft(c)
    else:
        bucketed_tensors = {b: [] for b in time_buckets}
        ret = <a id="change">{b: None for b in time_buckets}</a>

        for j, (mii,win_range,Lg,col) in enumerate(loopparams):
            c = torch.zeros(*f_slices.shape[:2], 1, Lg, dtype=ft.dtype, device=torch.device(device))
</code></pre><h3>After Change</h3><pre><code class='java'>
            c[:, :, 0, sl2] = t[:, :, :Lg//2]  &#47&#47 if mii is odd, this is of length mii//2

            &#47&#47 start a new block
            <a id="change">if block_ptr == -1</a><a id="change"> or bucketed_tensors[block_ptr][0].shape[-1] != Lg</a>:
                bucketed_tensors.append(c)
                block_ptr<a id="change"> += </a>1
            else:
                &#47&#47 concat block to previous contiguous frequency block with same time resolution
                bucketed_tensors[block_ptr] = torch.cat([bucketed_tensors[block_ptr], c], dim=2)</code></pre>