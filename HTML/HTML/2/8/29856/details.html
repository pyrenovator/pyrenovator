<html><h3>Pattern ID :29856
</h3><img src='88344310.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if i == 0:
                continue
            language = line[0]
            <a id="change">if language != self.language</a>:
                <a id="change">continue</a>
            guid = "%s-%s" % ("test", i)
            text_a = line[6]
            text_b = line[7]
            label = line[1]</code></pre><h3>After Change</h3><pre><code class='java'>
            guid = "%s-%s" % (line[0], "test")
            text_a = line[4]
            text_b = line[5]
            <a id="change">if len(text_a) &lt; 5</a><a id="change"> or len(text_b) &lt; 5</a>:
                <a id="change">continue</a>
            label = line[3]
            assert isinstance(text_a, str), f"Training input {text_a} is not a string"
            assert isinstance(text_b, str), f"Training input {text_b} is not a string"
            assert isinstance(label, str), f"Training label {label} is not a string"</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/persiannlp/parsinlu/commit/7397e7e1aeb26010dc1d232f9a1e289bf5dc0458#diff-b54d2dd7878ddc4516dec262cc48c4242b248dc86cb708916302c2dcf198cb8eL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88344310</div><div id='project'> Project Name: persiannlp/parsinlu</div><div id='commit'> Commit Name: 7397e7e1aeb26010dc1d232f9a1e289bf5dc0458</div><div id='time'> Time: 2020-10-01</div><div id='author'> Author: danielk@allenai.org</div><div id='file'> File Name: src/processors/entailment.py</div><div id='m_class'> M Class Name: TEProcessor</div><div id='n_method'> N Class Name: TEProcessor</div><div id='m_method'> M Method Name: get_test_examples(2)</div><div id='n_method'> N Method Name: get_test_examples(2)</div><div id='m_parent_class'> M Parent Class: DataProcessor</div><div id='n_parent_class'> N Parent Class: DataProcessor</div><div id='m_file'> M File Name: src/processors/entailment.py</div><div id='n_file'> N File Name: src/processors/entailment.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 find model functions in torchvision.models
    for model_name, constructor_function in getmembers(torchvision_models, isfunction):
        &#47&#47 using the "pretrained" keyword as proxy for a model function
        <a id="change">if "pretrained" not in signature(constructor_function).parameters</a>:
            <a id="change">continue</a>

        key = "torchvision.{}".format(model_name)
        image_size = (
            (3, 224, 224) if "inception_v3" not in model_name else (3, 299, 299)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 using the "pretrained" keyword as proxy for a model function
        &#47&#47 NOTE: pretrained param was replaced with "weights" in torchvision 0.13.0
        params = signature(constructor_function).parameters
        <a id="change">if </a>not <a id="change">("pretrained" in params or "weights" in params)</a>:
            <a id="change">continue</a>

        key = "torchvision.{}".format(model_name)
        image_size = (
            (3, 224, 224) if "inception_v3" not in model_name else (3, 299, 299)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/sparseml/commit/f3b39c66433b67ecba73622fe38fb5904008f3ca#diff-e6cf98d6cb77f9d57a63adf37768a59a9286fe30a2607b9e86557a32885319e2L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88344311</div><div id='project'> Project Name: neuralmagic/sparseml</div><div id='commit'> Commit Name: f3b39c66433b67ecba73622fe38fb5904008f3ca</div><div id='time'> Time: 2022-11-04</div><div id='author'> Author: 109536191+corey-nm@users.noreply.github.com</div><div id='file'> File Name: src/sparseml/pytorch/models/external/torchvision.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _register_classification_models(0)</div><div id='n_method'> N Method Name: _register_classification_models(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/sparseml/pytorch/models/external/torchvision.py</div><div id='n_file'> N File Name: src/sparseml/pytorch/models/external/torchvision.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 45</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    print(f&quot[{ent}] 无法对应到 [{text}] 的token_span，已丢弃&quot)
                    token_start_index = -1
            
            <a id="change">if token_start_index == -1</a>:
                <a id="change">continue</a>

            &#47&#47 检查token_span与原span是否对应
            token_span = (token_start_index, token_start_index + ent_token_len - 1, ent_span[2])
            &#47&#47 XXX:对[UNK]的处理不完善</code></pre><h3>After Change</h3><pre><code class='java'>
            token_start_index = list(filter(lambda x:token2char_span_mapping[x][0] == ent_span[0], token_start_indexs))
            token_end_index = list(filter(lambda x:token2char_span_mapping[x][-1]-1 == ent_span[1], token_end_indexs)) &#47&#47 token2char_span_mapping[x][-1]-1 减1是因为原始的char_span是闭区间，而token2char_span是开区间

            <a id="change">if len(token_start_index)==0</a><a id="change"> or len(token_end_index)==0</a>:
                print(f&quot[{ent}] 无法对应到 [{text}] 的token_span，已丢弃&quot)
                <a id="change">continue</a>
            token_span = (token_start_index[0], token_end_index[0], ent_span[2])
            ent2token_spans.append(token_span)
            
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gaohongkui/globalpointer_pytorch/commit/5146e4d180d865b94c8e0d173320f021df21498d#diff-a9ca103e95ab74ef9bae0986b5cc4c9f3230e50b062e7855c929b211a1d038a5L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88344305</div><div id='project'> Project Name: gaohongkui/globalpointer_pytorch</div><div id='commit'> Commit Name: 5146e4d180d865b94c8e0d173320f021df21498d</div><div id='time'> Time: 2021-07-31</div><div id='author'> Author: 1427224680@qq.com</div><div id='file'> File Name: common/utils.py</div><div id='m_class'> M Class Name: Preprocessor</div><div id='n_method'> N Class Name: Preprocessor</div><div id='m_method'> M Method Name: get_ent2token_spans(3)</div><div id='n_method'> N Method Name: get_ent2token_spans(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: common/utils.py</div><div id='n_file'> N File Name: common/utils.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            target.position + [target.dimension[0]/2, 0, -target.dimension[2]/2]])

        uv, mask = calib.project_points_to_camera(points, frame_to=image_frame, frame_from=targets.frame, remove_outlier=False)
        <a id="change">if np.sum(mask) &lt; 4</a>: <a id="change">continue</a> &#47&#47 ignore boxes that is outside the image
        uv = uv.astype(int)

        &#47&#47 draw box</code></pre><h3>After Change</h3><pre><code class='java'>
        for i, j in pairs:
            if not inlier[i] and not inlier[j]:
                continue
            <a id="change">if i not in dmask</a><a id="change"> or j not in dmask</a>: &#47&#47 only calculate for points ahead
                <a id="change">continue</a>
            cv2.line(image, (uv[i,0], uv[i,1]), (uv[j,0], uv[j,1]), color, thickness)
        &#47&#47 draw direction
        cv2.line(image, (uv[-2,0], uv[-2,1]), (uv[-1,0], uv[-1,1]), color, thickness)
    return image</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cmpute/d3d/commit/19eed21c2ea40b91d048f99d07fffd1d3f2196c7#diff-b3d7d54f6c4aeecfc8f6b0fcb5b691318c92069106d0dbad56c65679f1838865L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 88344307</div><div id='project'> Project Name: cmpute/d3d</div><div id='commit'> Commit Name: 19eed21c2ea40b91d048f99d07fffd1d3f2196c7</div><div id='time'> Time: 2020-05-14</div><div id='author'> Author: cmpute@qq.com</div><div id='file'> File Name: d3d/vis/image.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: visualize_detections(6)</div><div id='n_method'> N Method Name: visualize_detections(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: d3d/vis/image.py</div><div id='n_file'> N File Name: d3d/vis/image.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 37</div><BR>