<html><h3>Pattern ID :27892
</h3><img src='82836855.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if not enabled and self.get_op_mode() != int(libpymo.TensorQuantizerOpMode.passThrough):
            op_mode = int(libpymo.TensorQuantizerOpMode.passThrough)
            &#47&#47 update the isEncodingValid state to False
            <a id="change">if isinstance(</a>self.tensor_quantizer, list<a id="change">)</a>:
                <a id="change">for </a>tensor_quantizer in self.tensor_quantizer<a id="change">:
                    </a>tensor_quantizer.isEncodingValid<a id="change"> = False</a>
            else:
                self.tensor_quantizer.isEncodingValid<a id="change"> = False</a>
        &#47&#47 if enable is requested and this op was previously disabled
        &#47&#47 we enable the op by setting the initial op_mode that depends on the Quantizer type
        elif enabled and self.get_op_mode() == int(libpymo.TensorQuantizerOpMode.passThrough):
            if self.quantizer_type is QuantizerType.param:</code></pre><h3>After Change</h3><pre><code class='java'>
            elif self.quantizer_type is QuantizerType.activation:
                op_mode = int(libpymo.TensorQuantizerOpMode.updateStats)
            &#47&#47 update the isEncodingValid state to False
            <a id="change">self._invalidate_tensor_quantizer_encodings()</a>

        var_name = self.quant_op_name + &quot_op_mode&quot
        self.set_variable(var_name, op_mode)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/quic/aimet/commit/e54945562c36b236750617d74bf4b4a5ebae9e65#diff-df0b5df71ef711a2a2f2a2d2fc504212b53e2ef1842d05030c6bf95482915963L312' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82836855</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: e54945562c36b236750617d74bf4b4a5ebae9e65</div><div id='time'> Time: 2022-01-19</div><div id='author'> Author: quic_mangal@quicinc.com</div><div id='file'> File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_class'> M Class Name: QuantizerInfo</div><div id='n_method'> N Class Name: QuantizerInfo</div><div id='m_method'> M Method Name: enabled(2)</div><div id='n_method'> N Method Name: enabled(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='n_file'> N File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_start'> M Start Line: 317</div><div id='m_end'> M End Line: 336</div><div id='n_start'> N Start Line: 312</div><div id='n_end'> N End Line: 321</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        var_name = self.quant_op_name + &quot_use_symmetric_encoding&quot
        self.set_variable(var_name, use_symmetric_encoding)
        <a id="change">if isinstance(</a>self.tensor_quantizer, list<a id="change">)</a>:
            <a id="change">for tensor_quantizer</a> in self.tensor_quantizer<a id="change">:
                </a>tensor_quantizer.isEncodingValid<a id="change"> = </a>False
        else:
            self.tensor_quantizer.isEncodingValid<a id="change"> = </a>False

    @property
    def quant_scheme(self) -&gt; libpymo.QuantizationMode:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        var_name = self.quant_op_name + &quot_use_symmetric_encoding&quot
        self.set_variable(var_name, use_symmetric_encoding)
        <a id="change">self._invalidate_tensor_quantizer_encodings()</a>

    @property
    def quant_scheme(self) -&gt; libpymo.QuantizationMode:
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/e54945562c36b236750617d74bf4b4a5ebae9e65#diff-df0b5df71ef711a2a2f2a2d2fc504212b53e2ef1842d05030c6bf95482915963L165' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82836853</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: e54945562c36b236750617d74bf4b4a5ebae9e65</div><div id='time'> Time: 2022-01-19</div><div id='author'> Author: quic_mangal@quicinc.com</div><div id='file'> File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_class'> M Class Name: QuantizerInfo</div><div id='n_method'> N Class Name: QuantizerInfo</div><div id='m_method'> M Method Name: use_symmetric_encoding(2)</div><div id='n_method'> N Method Name: use_symmetric_encoding(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='n_file'> N File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_start'> M Start Line: 172</div><div id='m_end'> M End Line: 178</div><div id='n_start'> N Start Line: 179</div><div id='n_end'> N End Line: 179</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        var_name = self.quant_op_name + &quot_bit_width&quot
        self.set_variable(var_name, bitwidth)
        <a id="change">if isinstance(</a>self.tensor_quantizer, list<a id="change">)</a>:
            <a id="change">for tensor_quantizer</a> in self.tensor_quantizer<a id="change">:
                </a>tensor_quantizer.isEncodingValid<a id="change"> = </a>False
        else:
            self.tensor_quantizer.isEncodingValid<a id="change"> = </a>False

    @property
    def use_symmetric_encoding(self) -&gt; bool:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        var_name = self.quant_op_name + &quot_bit_width&quot
        self.set_variable(var_name, bitwidth)
        <a id="change">self._invalidate_tensor_quantizer_encodings()</a>

    def _invalidate_tensor_quantizer_encodings(self):
        
        Sets isEncodingValid flag to False for every tensor quantizer</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/e54945562c36b236750617d74bf4b4a5ebae9e65#diff-df0b5df71ef711a2a2f2a2d2fc504212b53e2ef1842d05030c6bf95482915963L143' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82836851</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: e54945562c36b236750617d74bf4b4a5ebae9e65</div><div id='time'> Time: 2022-01-19</div><div id='author'> Author: quic_mangal@quicinc.com</div><div id='file'> File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_class'> M Class Name: QuantizerInfo</div><div id='n_method'> N Class Name: QuantizerInfo</div><div id='m_method'> M Method Name: bitwidth(2)</div><div id='n_method'> N Method Name: bitwidth(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='n_file'> N File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/quantizer_info.py</div><div id='m_start'> M Start Line: 150</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 151</div><div id='n_end'> N End Line: 151</div><BR>