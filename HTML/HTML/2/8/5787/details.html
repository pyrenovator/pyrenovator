<html><h3>Pattern ID :5787
</h3><img src='20351296.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.num_classes = model.cfg.num_classes
        self.ignored_label_inds = model.cfg.ignored_label_inds

        if <a id="change">&quotclass_weights&quot in dataset.cfg.keys()</a>:
            weights = DP.get_class_weights(dataset.cfg.class_weights)
            self.class_weights = tf.convert_to_tensor(weights, dtype=tf.float32)
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.ignored_label_inds = model.cfg.ignored_label_inds
        self.class_weights = None

        if <a id="change">&quotclass_weights&quot in dataset.cfg.keys() and len(
                dataset.cfg.class_weights) != 0</a>:
            weights = DP.get_class_weights(dataset.cfg.class_weights)
            self.class_weights = tf.convert_to_tensor(weights, dtype=tf.float32)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/isl-org/open3d-ml/commit/67123f7e9d5dbbe6a73c42ef648093a7d25ace4a#diff-381abd747c81aa38115465cf19c598c394514c33708938afe0991dea87c1b926L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20351296</div><div id='project'> Project Name: isl-org/open3d-ml</div><div id='commit'> Commit Name: 67123f7e9d5dbbe6a73c42ef648093a7d25ace4a</div><div id='time'> Time: 2021-05-11</div><div id='author'> Author: sanskaragrawal107@gmail.com</div><div id='file'> File Name: ml3d/tf/modules/losses/semseg_loss.py</div><div id='m_class'> M Class Name: SemSegLoss</div><div id='n_method'> N Class Name: SemSegLoss</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: ml3d/tf/modules/losses/semseg_loss.py</div><div id='n_file'> N File Name: ml3d/tf/modules/losses/semseg_loss.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 15</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 17</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    state_dict["visual_encoder.pos_embed"] = interpolate_pos_embed(
        state_dict["visual_encoder.pos_embed"], model.visual_encoder
    )
    if <a id="change">"visual_encoder_m.pos_embed" in model.state_dict().keys()</a>:
        state_dict["visual_encoder_m.pos_embed"] = interpolate_pos_embed(
            state_dict["visual_encoder_m.pos_embed"], model.visual_encoder_m
        )</code></pre><h3>After Change</h3><pre><code class='java'>
    state_dict["visual_encoder.pos_embed"] = interpolate_pos_embed(
        state_dict["visual_encoder.pos_embed"], model.visual_encoder
    )
    if <a id="change">(
        "visual_encoder_m.pos_embed" in model.state_dict().keys()
        and "visual_encoder_m.pos_embed" in state_dict
    )</a>:
        state_dict["visual_encoder_m.pos_embed"] = interpolate_pos_embed(
            state_dict["visual_encoder_m.pos_embed"], model.visual_encoder_m
        )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/salesforce/lavis/commit/cc226ecd116107732ccb4bd0e1a2c173071767f7#diff-ebb435ab75c9a8eb91f5edceee6c27c8d63dd130c76ae9e8a16ba125bdef52f5L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20351297</div><div id='project'> Project Name: salesforce/lavis</div><div id='commit'> Commit Name: cc226ecd116107732ccb4bd0e1a2c173071767f7</div><div id='time'> Time: 2022-05-25</div><div id='author'> Author: dongxu_li@outlook.com</div><div id='file'> File Name: lavis/models/albef_models/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_from_pretrained(2)</div><div id='n_method'> N Method Name: load_from_pretrained(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lavis/models/albef_models/__init__.py</div><div id='n_file'> N File Name: lavis/models/albef_models/__init__.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, pipeline, model, dataset, device):
        super(SemSegLoss, self).__init__()
        &#47&#47 weighted_CrossEntropyLoss
        if <a id="change">&quotclass_weights&quot in dataset.cfg.keys()</a>:
            class_wt = DataProcessing.get_class_weights(
                dataset.cfg.class_weights)
            weights = torch.tensor(class_wt, dtype=torch.float, device=device)</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self, pipeline, model, dataset, device):
        super(SemSegLoss, self).__init__()
        &#47&#47 weighted_CrossEntropyLoss
        if <a id="change">&quotclass_weights&quot in dataset.cfg.keys() and len(
                dataset.cfg.class_weights) != 0</a>:
            class_wt = DataProcessing.get_class_weights(
                dataset.cfg.class_weights)
            weights = torch.tensor(class_wt, dtype=torch.float, device=device)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/isl-org/open3d-ml/commit/67123f7e9d5dbbe6a73c42ef648093a7d25ace4a#diff-a8265ee8dd5a0316a0eaf346272ad530ff15835665c966d1bb8d27a417144b75L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20351294</div><div id='project'> Project Name: isl-org/open3d-ml</div><div id='commit'> Commit Name: 67123f7e9d5dbbe6a73c42ef648093a7d25ace4a</div><div id='time'> Time: 2021-05-11</div><div id='author'> Author: sanskaragrawal107@gmail.com</div><div id='file'> File Name: ml3d/torch/modules/losses/semseg_loss.py</div><div id='m_class'> M Class Name: SemSegLoss</div><div id='n_method'> N Class Name: SemSegLoss</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: ml3d/torch/modules/losses/semseg_loss.py</div><div id='n_file'> N File Name: ml3d/torch/modules/losses/semseg_loss.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.width_factor = width_factor
        if &quotnorm_par&quot not in kwargs.keys() and isinstance(dataset, ImageSet):
            kwargs[&quotnorm_par&quot] = dataset.norm_par
        if <a id="change">&quotnum_classes&quot not in kwargs.keys()</a>:
            kwargs[&quotnum_classes&quot] = 1000
        super().__init__(name=name, model_class=model_class, layer=layer, width_factor=width_factor, dataset=dataset, **kwargs)
        self.sgm: bool = sgm</code></pre><h3>After Change</h3><pre><code class='java'>
        self.width_factor = width_factor
        if &quotnorm_par&quot not in kwargs.keys() and isinstance(dataset, ImageSet):
            kwargs[&quotnorm_par&quot] = dataset.norm_par
        if <a id="change">&quotnum_classes&quot not in kwargs.keys() and dataset is None</a>:
            kwargs[&quotnum_classes&quot] = 1000
        super().__init__(name=name, model_class=model_class, layer=layer, width_factor=width_factor, dataset=dataset, **kwargs)
        self.sgm: bool = sgm</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/207037b45f0a67e7ce1c0d7a14f01ecc9f813692#diff-e4201db069ef045059539923de84285f4ad73c36598f618679811e6a3551953cL155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20351295</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 207037b45f0a67e7ce1c0d7a14f01ecc9f813692</div><div id='time'> Time: 2020-12-29</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/imagemodel.py</div><div id='m_class'> M Class Name: ImageModel</div><div id='n_method'> N Class Name: ImageModel</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: Model</div><div id='n_parent_class'> N Parent Class: Model</div><div id='m_file'> M File Name: trojanvision/models/imagemodel.py</div><div id='n_file'> N File Name: trojanvision/models/imagemodel.py</div><div id='m_start'> M Start Line: 163</div><div id='m_end'> M End Line: 163</div><div id='n_start'> N Start Line: 163</div><div id='n_end'> N End Line: 163</div><BR>