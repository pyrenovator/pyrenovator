<html><h3>Pattern ID :11515
</h3><img src='39188977.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            type_list.append(obj.type) 
            ry_list.append(obj.ry)

    <a id="change">with open(</a><a id="change">&quotbox3d_dimensions.pickle&quot,&quotwb&quot) as fp:
        </a>pickle.dump(type_list, fp)
        <a id="change">pickle.dump(</a>dimension_list, <a id="change">fp</a><a id="change">)</a>
        pickle.dump(ry_list, fp)

def read_det_file(det_filename):
    &quot&quot&quot Parse lines in 2D detection output files &quot&quot&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    dimension_mean = np.array(dimension_list).mean(0)
    print(dimension_mean)

    with open(<a id="change">os.path.join(</a>BASE_DIR,<a id="change">&quotbox3d_mean_dimensions.pickle&quot</a><a id="change">)</a>,&quotwb&quot) as fp:
        pickle.dump(dimension_mean, fp)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/simon3dv/frustum_pointnets_pytorch/commit/bb2e3b1c4e11a1d358f5e5b3d1bfa0c150d75db8#diff-913464f6ca56fd89785b4166318dd2505b90eb6e1b0f0708131f31212cfed999L297' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39188977</div><div id='project'> Project Name: simon3dv/frustum_pointnets_pytorch</div><div id='commit'> Commit Name: bb2e3b1c4e11a1d358f5e5b3d1bfa0c150d75db8</div><div id='time'> Time: 2020-02-20</div><div id='author'> Author: gzfansiming@gmail.com</div><div id='file'> File Name: kitti/prepare_data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_box3d_dim_statistics(2)</div><div id='n_method'> N Method Name: get_box3d_dim_statistics(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kitti/prepare_data.py</div><div id='n_file'> N File Name: kitti/prepare_data.py</div><div id='m_start'> M Start Line: 297</div><div id='m_end'> M End Line: 319</div><div id='n_start'> N Start Line: 300</div><div id='n_end'> N End Line: 325</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            type_list.append(obj.type) 
            ry_list.append(obj.ry)

    <a id="change">with open(&quotbox3d_dimensions.pickle&quot</a><a id="change">,&quotwb&quot) as fp:
        </a>pickle.dump(type_list, fp)
        <a id="change">pickle.dump(</a>dimension_list, fp<a id="change">)</a>
        pickle.dump(ry_list, fp)

def read_det_file(det_filename):
    &quot&quot&quot Parse lines in 2D detection output files &quot&quot&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    dimension_mean = np.array(dimension_list).mean(0)
    print(dimension_mean)

    with open(<a id="change">os.path.join(</a>BASE_DIR,<a id="change">&quotbox3d_mean_dimensions.pickle&quot</a><a id="change">)</a>,&quotwb&quot) as fp:
        pickle.dump(dimension_mean, fp)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/simon3dv/frustum_pointnets_pytorch/commit/bb2e3b1c4e11a1d358f5e5b3d1bfa0c150d75db8#diff-913464f6ca56fd89785b4166318dd2505b90eb6e1b0f0708131f31212cfed999L297' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39188976</div><div id='project'> Project Name: simon3dv/frustum_pointnets_pytorch</div><div id='commit'> Commit Name: bb2e3b1c4e11a1d358f5e5b3d1bfa0c150d75db8</div><div id='time'> Time: 2020-02-20</div><div id='author'> Author: gzfansiming@gmail.com</div><div id='file'> File Name: kitti/prepare_data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_box3d_dim_statistics(2)</div><div id='n_method'> N Method Name: get_box3d_dim_statistics(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kitti/prepare_data.py</div><div id='n_file'> N File Name: kitti/prepare_data.py</div><div id='m_start'> M Start Line: 297</div><div id='m_end'> M End Line: 319</div><div id='n_start'> N Start Line: 300</div><div id='n_end'> N End Line: 325</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 start federated optimization
    output = server.run()
    &#47&#47 save results as .json file
    <a id="change">with open(</a><a id="change">&quotfedtask/&quot+ option[&quottask&quot] + &quot/record/&quot + flw.output_filename(option, server), &quotw&quot) as outfile:
        </a><a id="change">ujson.dump(</a>output, outfile<a id="change">)</a>

if __name__ == &quot__main__&quot:
    main()</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 start federated optimization
    server.run()
    &#47&#47 save results as .json file
    logger.save(<a id="change">os.path.join(</a>&quotfedtask&quot, option[&quottask&quot], <a id="change">&quotrecord&quot</a>, flw.output_filename(option, server)<a id="change">)</a>)

if __name__ == &quot__main__&quot:
    main()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/681d475eb56f16a625b422698c88a1209a74ce03#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L4' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39188979</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 681d475eb56f16a625b422698c88a1209a74ce03</div><div id='time'> Time: 2021-12-21</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 16</div><div id='n_start'> N Start Line: 72</div><div id='n_end'> N End Line: 82</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        best = np.argmax(metrics[&quotaccuracy&quot])  &#47&#47 这个不是最好的一次吗？
        avg_acc = metrics[&quotaccuracy&quot][best]
        &#47&#47 save metrics
        <a id="change">with open(&quot./metrics.json&quot</a><a id="change">, &quotw&quot) as f:
            </a><a id="change">json.dump(</a>metrics, f<a id="change">)</a>
        load_name_tmp = &quotep_&quot + str(best) + &quot.m&quot
        self.model.load_state_dict(torch.load(self.tmp_path + load_name_tmp))
        &#47&#47 删除之前创建的临时文件夹
        for rt, dirs, files in os.walk(self.tmp_path):</code></pre><h3>After Change</h3><pre><code class='java'>
            if self.config[&quothyper_tune&quot]:
                &#47&#47 use ray tune to checkpoint
                with tune.checkpoint_dir(step=epoch) as checkpoint_dir:
                    path = <a id="change">os.path.join(</a>checkpoint_dir, <a id="change">"checkpoint"</a><a id="change">)</a>
                    self.save_model(path)
                &#47&#47 ray tune use loss to determine which params are best
                tune.report(loss=avg_eval_loss, accuracy=avg_eval_acc)
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/libcity/bigscity-libcity/commit/022010c6ffc7ff440e276127d6e6341751e03d69#diff-3b0408c84ea1982a6fe3d842dd9eff33a8bba27ca54ad0f448b9f8ae7b2c38e4L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39188971</div><div id='project'> Project Name: libcity/bigscity-libcity</div><div id='commit'> Commit Name: 022010c6ffc7ff440e276127d6e6341751e03d69</div><div id='time'> Time: 2021-04-14</div><div id='author'> Author: 33283819+WenMellors@users.noreply.github.com</div><div id='file'> File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='m_class'> M Class Name: TrajLocPredExecutor</div><div id='n_method'> N Class Name: TrajLocPredExecutor</div><div id='m_method'> M Method Name: train(3)</div><div id='n_method'> N Method Name: train(3)</div><div id='m_parent_class'> M Parent Class: AbstractExecutor</div><div id='n_parent_class'> N Parent Class: AbstractExecutor</div><div id='m_file'> M File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='n_file'> N File Name: trafficdl/executor/traj_loc_pred_executor.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 71</div><BR>