<html><h3>Pattern ID :34103
</h3><img src='97458895.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        kwargs[&quotimage_size&quot] = image_size
        self.fpn_channels = fpn_channels
        self.image_size = image_size
        fpn_norm_layer<a id="change"> = </a><a id="change">kwargs.pop("fpn_norm_layer"</a>, nn.BatchNorm2d<a id="change">)</a>
        &#47&#47 create modules
        if pretrained_backbone:
            backbone_norm_layer = FrozenBatchNorm2d
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
class EfficientNetBackBoneWithBiFPN(nn.Sequential):
    def __init__(self, config):

        backbone_name = <a id="change">config[&quotbackbone_name&quot]</a>
        pretrained_backbone = config[&quotpretrained_backbone&quot]
        backbone_norm_layer = config["backbone_norm_layer"]
        image_size = config[&quotimage_size&quot]
        backbone_freeze = config[&quotbackbone_freeze&quot]
        &#47&#47 -------------------------
        fpn_norm_layer = config["other_norm_layer"]
        fpn_channels = <a id="change">config[&quotfpn_channels&quot]</a>
        fpn_num_repeat = config[&quotfpn_num_repeat&quot]

        &#47&#47 create modules
        backbone = _efficientnet(backbone_name, pretrained_backbone,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jintao-huang/efficientdet_pytorch/commit/63fbf56348d5f299bf5757f5c4b0fa68a0a7adca#diff-258d0736f4ec16a45bec12b84352faf736ace909e51d18ff8a8c09fc0e1a5b98L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97458895</div><div id='project'> Project Name: jintao-huang/efficientdet_pytorch</div><div id='commit'> Commit Name: 63fbf56348d5f299bf5757f5c4b0fa68a0a7adca</div><div id='time'> Time: 2020-05-24</div><div id='author'> Author: hjt_study@qq.com</div><div id='file'> File Name: models/backbone.py</div><div id='m_class'> M Class Name: EfficientNetBackBoneWithBiFPN</div><div id='n_method'> N Class Name: EfficientNetBackBoneWithBiFPN</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: nn.Sequential</div><div id='n_parent_class'> N Parent Class: nn.Sequential</div><div id='m_file'> M File Name: models/backbone.py</div><div id='n_file'> N File Name: models/backbone.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    del out_dict["macro avg"]
    del out_dict["weighted avg"]

    accuracy<a id="change"> = </a><a id="change">out_dict.pop("accuracy"</a><a id="change">)</a>
    out_dict = {
        tag: {
            metric.replace("support", "number").replace("f1-score", "f1"): metric_value
            for metric, metric_value in tag_scores.items()</code></pre><h3>After Change</h3><pre><code class='java'>
        )
    )
    prfs = precision_recall_fscore_support(
        list(filter(lambda tag: tag != "O", chain.from_iterable(<a id="change">data["y_true"]</a>))),
        list(filter(lambda tag: tag != "O", chain.from_iterable(<a id="change">data["y_pred"]</a>))),
        average="micro",
    )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/clarin-pl/embeddings/commit/e631c8cb3d1d378eb76398e6f8db803f0e2a941d#diff-39ec252f559067bb00a6ebedbfb6a0831d415c479a18abbff4cdeea6c890c7e1L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97458879</div><div id='project'> Project Name: clarin-pl/embeddings</div><div id='commit'> Commit Name: e631c8cb3d1d378eb76398e6f8db803f0e2a941d</div><div id='time'> Time: 2021-12-21</div><div id='author'> Author: 34009816+asawczyn@users.noreply.github.com</div><div id='file'> File Name: tests/test_sequence_labelling_evaluator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: sklearn_metrics(1)</div><div id='n_method'> N Method Name: sklearn_metrics(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_sequence_labelling_evaluator.py</div><div id='n_file'> N File Name: tests/test_sequence_labelling_evaluator.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    component_type = StackComponentType(component_type)
    component_name = component_config.pop("name")
    component_flavor = component_config.pop("flavor")
    component_id<a id="change"> = </a><a id="change">component_config.pop("id"</a><a id="change">)</a>
    component_shared = component_config.pop("is_shared")

    &#47&#47 make sure component can be registered, otherwise ask for new name
    client = Client()</code></pre><h3>After Change</h3><pre><code class='java'>
        The ID of the imported component.
    
    name = component_dict["name"]
    flavor = <a id="change">component_dict["flavor"]</a>
    config = <a id="change">component_dict["configuration"]</a>

    &#47&#47 make sure component can be registered, otherwise ask for new name
    client = Client()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/9fcb2ae4fca0414e82f951d83c9e7e22f016eb39#diff-0bdc526e22fe7b8b13c747514ee5af365eaaa9ac6c3be0bbad4bcc3cc51188abL817' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97458894</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 9fcb2ae4fca0414e82f951d83c9e7e22f016eb39</div><div id='time'> Time: 2022-11-29</div><div id='author'> Author: schustmi@users.noreply.github.com</div><div id='file'> File Name: src/zenml/cli/stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _import_stack_component(2)</div><div id='n_method'> N Method Name: _import_stack_component(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/cli/stack.py</div><div id='n_file'> N File Name: src/zenml/cli/stack.py</div><div id='m_start'> M Start Line: 829</div><div id='m_end'> M End Line: 881</div><div id='n_start'> N Start Line: 829</div><div id='n_end'> N End Line: 861</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        kwargs[&quotimage_size&quot] = image_size
        self.fpn_channels = fpn_channels
        self.image_size = image_size
        fpn_norm_layer<a id="change"> = </a><a id="change">kwargs.pop("fpn_norm_layer"</a>, nn.BatchNorm2d<a id="change">)</a>
        &#47&#47 create modules
        if pretrained_backbone:
            backbone_norm_layer = FrozenBatchNorm2d
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
class EfficientNetBackBoneWithBiFPN(nn.Sequential):
    def __init__(self, config):

        backbone_name = <a id="change">config[&quotbackbone_name&quot]</a>
        pretrained_backbone = config[&quotpretrained_backbone&quot]
        backbone_norm_layer = <a id="change">config["backbone_norm_layer"]</a>
        image_size = config[&quotimage_size&quot]
        backbone_freeze = config[&quotbackbone_freeze&quot]
        &#47&#47 -------------------------
        fpn_norm_layer = config["other_norm_layer"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jintao-huang/efficientdet_pytorch/commit/63fbf56348d5f299bf5757f5c4b0fa68a0a7adca#diff-258d0736f4ec16a45bec12b84352faf736ace909e51d18ff8a8c09fc0e1a5b98L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97458893</div><div id='project'> Project Name: jintao-huang/efficientdet_pytorch</div><div id='commit'> Commit Name: 63fbf56348d5f299bf5757f5c4b0fa68a0a7adca</div><div id='time'> Time: 2020-05-24</div><div id='author'> Author: hjt_study@qq.com</div><div id='file'> File Name: models/backbone.py</div><div id='m_class'> M Class Name: EfficientNetBackBoneWithBiFPN</div><div id='n_method'> N Class Name: EfficientNetBackBoneWithBiFPN</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: nn.Sequential</div><div id='n_parent_class'> N Parent Class: nn.Sequential</div><div id='m_file'> M File Name: models/backbone.py</div><div id='n_file'> N File Name: models/backbone.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        from .sd_pipeline import StableDiffusionInpaintPipeline

        model_kwargs = {}
        sd_disable_nsfw<a id="change"> = </a><a id="change">kwargs.pop(&quotsd_disable_nsfw&quot</a>, False<a id="change">)</a>
        if sd_disable_nsfw:
            logger.info("Disable Stable Diffusion Model NSFW checker")
            model_kwargs.update(dict(
                feature_extractor=DummyFeatureExtractor(),</code></pre><h3>After Change</h3><pre><code class='java'>
        from .sd_pipeline import StableDiffusionInpaintPipeline

        model_kwargs = {}
        if <a id="change">kwargs[&quotsd_disable_nsfw&quot]</a>:
            logger.info("Disable Stable Diffusion Model NSFW checker")
            model_kwargs.update(dict(
                feature_extractor=DummyFeatureExtractor(),
                safety_checker=DummySafetyChecker(),
            ))

        self.model = StableDiffusionInpaintPipeline.from_pretrained(
            self.model_id_or_path,
            revision="fp16" if torch.cuda.is_available() else "main",
            torch_dtype=torch.float16 if torch.cuda.is_available() else torch.float32,
            use_auth_token=kwargs["hf_access_token"],
            **model_kwargs
        )
        &#47&#47 https://huggingface.co/docs/diffusers/v0.3.0/en/api/pipelines/stable_diffusion&#47&#47diffusers.StableDiffusionInpaintPipeline.enable_attention_slicing
        self.model.enable_attention_slicing()
        self.model = self.model.to(device)

        if <a id="change">kwargs[&quotsd_cpu_textencoder&quot]</a>:
            logger.info("Run Stable Diffusion TextEncoder on CPU")
            self.model.text_encoder = self.model.text_encoder.to(torch.device(&quotcpu&quot))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sanster/lama-cleaner/commit/ec7b2d8e2d7a6c764bed927269639830fc3292c6#diff-b30cc422385f3a87adcd8d356966cefef10c8bbb076f4acfc6160b6e90298b77L70' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97458891</div><div id='project'> Project Name: sanster/lama-cleaner</div><div id='commit'> Commit Name: ec7b2d8e2d7a6c764bed927269639830fc3292c6</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: cwq1913@gmail.com</div><div id='file'> File Name: lama_cleaner/model/sd.py</div><div id='m_class'> M Class Name: SD</div><div id='n_method'> N Class Name: SD</div><div id='m_method'> M Method Name: init_model(2)</div><div id='n_method'> N Method Name: init_model(2)</div><div id='m_parent_class'> M Parent Class: InpaintModel</div><div id='n_parent_class'> N Parent Class: InpaintModel</div><div id='m_file'> M File Name: lama_cleaner/model/sd.py</div><div id='n_file'> N File Name: lama_cleaner/model/sd.py</div><div id='m_start'> M Start Line: 74</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 96</div><BR>