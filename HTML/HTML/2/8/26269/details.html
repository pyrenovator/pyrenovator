<html><h3>Pattern ID :26269
</h3><img src='79037998.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            return block_forecasts
        else:
            &#47&#47 Last dimension Adapter
            <a id="change">if self.loss.outputsize_multiplier==1</a>:
                forecast<a id="change"> = </a><a id="change">forecast.squeeze(-1</a><a id="change">)</a>
            return forecast
</code></pre><h3>After Change</h3><pre><code class='java'>
                block_forecasts.append(block_forecast)
        
        &#47&#47 Adapting output&quots domain
        forecast<a id="change"> = </a><a id="change">self.loss.domain_map(</a>forecast<a id="change">)</a>

        if self.decompose_forecast:
            &#47&#47 (n_batch, n_blocks, h, output_size)
            block_forecasts = torch.stack(block_forecasts)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/b9fb6390489436d1c16b805ac3cd8bcc5646c521#diff-81f81a1c9f0f6a0d17e9c5d97c2c92d39dfeb3801db56b035e5ab362363c8a6bL317' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79037998</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: b9fb6390489436d1c16b805ac3cd8bcc5646c521</div><div id='time'> Time: 2022-11-24</div><div id='author'> Author: kin.gtz.olivares@gmail.com</div><div id='file'> File Name: neuralforecast/models/nhits.py</div><div id='m_class'> M Class Name: NHITS</div><div id='n_method'> N Class Name: NHITS</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: BaseWindows</div><div id='n_parent_class'> N Parent Class: BaseWindows</div><div id='m_file'> M File Name: neuralforecast/models/nhits.py</div><div id='n_file'> N File Name: neuralforecast/models/nhits.py</div><div id='m_start'> M Start Line: 318</div><div id='m_end'> M End Line: 333</div><div id='n_start'> N Start Line: 317</div><div id='n_end'> N End Line: 323</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Adapt output to loss
        y_hat = self.output_adapter(temporal_features)
        <a id="change">if self.loss.outputsize_multiplier==1</a>:
            y_hat<a id="change"> = </a><a id="change">y_hat.squeeze(-1</a><a id="change">)</a>

        return y_hat
    
    def training_step(self, batch, batch_idx):</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Adapt output to loss
        y_hat = self.output_adapter(temporal_features)
        y_hat<a id="change"> = </a><a id="change">self.loss.domain_map(</a>y_hat<a id="change">)</a>

        return y_hat
    
    def training_step(self, batch, batch_idx):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/f22bf6b6c9e16557938ceff48393befa938d3d43#diff-41eecd0ef689d197ddf876810e314a81f6466d3a7f210f3260e3ec2eb767e258L473' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79037999</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: f22bf6b6c9e16557938ceff48393befa938d3d43</div><div id='time'> Time: 2022-11-24</div><div id='author'> Author: kin.gtz.olivares@gmail.com</div><div id='file'> File Name: neuralforecast/models/tft.py</div><div id='m_class'> M Class Name: TFT</div><div id='n_method'> N Class Name: TFT</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: BaseWindows</div><div id='n_parent_class'> N Parent Class: BaseWindows</div><div id='m_file'> M File Name: neuralforecast/models/tft.py</div><div id='n_file'> N File Name: neuralforecast/models/tft.py</div><div id='m_start'> M Start Line: 538</div><div id='m_end'> M End Line: 542</div><div id='n_start'> N Start Line: 538</div><div id='n_end'> N End Line: 539</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return block_forecasts
        else:
            &#47&#47 Last dimension Adapter
            <a id="change">if self.loss.outputsize_multiplier==1</a>:
                forecast<a id="change"> = </a><a id="change">forecast.squeeze(-1</a><a id="change">)</a>
            return forecast
</code></pre><h3>After Change</h3><pre><code class='java'>
                block_forecasts.append(block_forecast)

        &#47&#47 Adapting output&quots domain
        forecast<a id="change"> = </a><a id="change">self.loss.domain_map(</a>forecast<a id="change">)</a>                

        if self.decompose_forecast:
            &#47&#47 (n_batch, n_blocks, h, out_features)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/b9fb6390489436d1c16b805ac3cd8bcc5646c521#diff-a7dc432cc8778a314f7fe3103948e43dc174dfe957795927551fa29aedebbba9L274' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79037996</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: b9fb6390489436d1c16b805ac3cd8bcc5646c521</div><div id='time'> Time: 2022-11-24</div><div id='author'> Author: kin.gtz.olivares@gmail.com</div><div id='file'> File Name: neuralforecast/models/nbeats.py</div><div id='m_class'> M Class Name: NBEATS</div><div id='n_method'> N Class Name: NBEATS</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: BaseWindows</div><div id='n_parent_class'> N Parent Class: BaseWindows</div><div id='m_file'> M File Name: neuralforecast/models/nbeats.py</div><div id='n_file'> N File Name: neuralforecast/models/nbeats.py</div><div id='m_start'> M Start Line: 289</div><div id='m_end'> M End Line: 304</div><div id='n_start'> N Start Line: 289</div><div id='n_end'> N End Line: 295</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return block_forecasts
        else:
            &#47&#47 Last dimension Adapter
            <a id="change">if self.loss.outputsize_multiplier==1</a>:
                forecast<a id="change"> = </a><a id="change">forecast.squeeze(-1</a><a id="change">)</a>
            return forecast
</code></pre><h3>After Change</h3><pre><code class='java'>
                block_forecasts.append(block_forecast)

        &#47&#47 Adapting output&quots domain
        forecast<a id="change"> = </a><a id="change">self.loss.domain_map(</a>forecast<a id="change">)</a>                

        if self.decompose_forecast:
            &#47&#47 (n_batch, n_blocks, h)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nixtla/neuralforecast/commit/b9fb6390489436d1c16b805ac3cd8bcc5646c521#diff-55a0984e5013c74f55c88f211f27f4a802c613921db7e9460e8802002728963cL328' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79037997</div><div id='project'> Project Name: nixtla/neuralforecast</div><div id='commit'> Commit Name: b9fb6390489436d1c16b805ac3cd8bcc5646c521</div><div id='time'> Time: 2022-11-24</div><div id='author'> Author: kin.gtz.olivares@gmail.com</div><div id='file'> File Name: neuralforecast/models/nbeatsx.py</div><div id='m_class'> M Class Name: NBEATSx</div><div id='n_method'> N Class Name: NBEATSx</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: BaseWindows</div><div id='n_parent_class'> N Parent Class: BaseWindows</div><div id='m_file'> M File Name: neuralforecast/models/nbeatsx.py</div><div id='n_file'> N File Name: neuralforecast/models/nbeatsx.py</div><div id='m_start'> M Start Line: 347</div><div id='m_end'> M End Line: 362</div><div id='n_start'> N Start Line: 347</div><div id='n_end'> N End Line: 353</div><BR>