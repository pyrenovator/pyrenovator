<html><h3>Pattern ID :1945
</h3><img src='8648227.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Train the Xvector model
    train_set = hparams["train_loader"]()
    valid_set<a id="change"> = </a>hparams["valid_loader"]()
    xvect_brain.fit(range(hparams["number_of_epochs"]), train_set, valid_set)
    print("Xvector model training completed!")

    &#47&#47 Instantiate extractor obj
    ext_brain = Extractor(
        model=hparams["xvector_model"],
        feats=hparams["compute_features"],
        norm=hparams["mean_var_norm"],
    )

    &#47&#47 Extract xvectors from a validation sample
    valid_x<a id="change">, valid_y = </a><a id="change">next(iter(</a>valid_set.get_dataloader()<a id="change">)</a><a id="change">)</a>
    print("Extracting Xvector from a sample validation batch!")
    xvectors = ext_brain.extract(valid_x)
    print("Extracted Xvector.Shape: ", xvectors.shape)
</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    &#47&#47 Extract xvectors from a validation sample
    extraction_loader<a id="change"> = </a>sb.data_io.dataloader.make_dataloader(
        hparams["valid_data"], **hparams["loader_kwargs"]
    )
    batch<a id="change"> = </a><a id="change">next(</a><a id="change">iter(</a>extraction_loader<a id="change">))</a>
    print("Extracting Xvector from a sample validation batch!")
    xvectors = ext_brain.extract(batch.wav.data, batch.wav.lengths)
    print("Extracted Xvector.Shape: ", xvectors.shape)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/d656bc6618227a593465ff1a507ec955172eb4ac#diff-3e0d114fe5e2550449e8688e4a89f8ceeb73b27cd14c0b2edf1d764984691716L84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8648227</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: d656bc6618227a593465ff1a507ec955172eb4ac</div><div id='time'> Time: 2020-12-20</div><div id='author'> Author: aku.rouhe@aalto.fi</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/Xvector/example_xvector_experiment.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/Xvector/example_xvector_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/Xvector/example_xvector_experiment.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 106</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 120</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_add_augmentation_albumentations(mnist_dataset_train):
    &#47&#47 Arrange
    copy_dataset<a id="change"> = </a>mnist_dataset_train.copy()
    augmentation = A.CenterCrop(1, 1)
    &#47&#47 Act
    copy_dataset.add_augmentation(augmentation)
    &#47&#47 Assert
    batch<a id="change"> = </a><a id="change">next(iter(</a>copy_dataset.get_data_loader()<a id="change">)</a><a id="change">)</a>
    data_sample = batch[0][0]
    assert_that(data_sample.numpy().shape, equal_to((1, 1, 1)))

</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Arrange
    augmentation = A.CenterCrop(1, 1)
    &#47&#47 Act
    copy_dataset<a id="change"> = </a>mnist_dataset_train.get_augmented_dataset(augmentation)
    &#47&#47 Assert
    batch<a id="change"> = </a><a id="change">next(</a><a id="change">iter(</a>copy_dataset.data_loader<a id="change">))</a>
    data_sample = batch[0][0]
    assert_that(data_sample.numpy().shape, equal_to((1, 1, 1)))

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/7cc184f31b2fa68766de920f8d1df1a3d8deaa05#diff-647ea011bec6d8b515da666ca7bcf4d765a9d254d536053766029b36d01a61c8L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8648225</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 7cc184f31b2fa68766de920f8d1df1a3d8deaa05</div><div id='time'> Time: 2022-03-09</div><div id='author'> Author: jonatan.lib@gmail.com</div><div id='file'> File Name: tests/vision/core/vision_data_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_add_augmentation_albumentations(1)</div><div id='n_method'> N Method Name: test_add_augmentation_albumentations(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/core/vision_data_test.py</div><div id='n_file'> N File Name: tests/vision/core/vision_data_test.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_add_augmentation_imgaug(mnist_dataset_train_imgaug):
    &#47&#47 Arrange
    copy_dataset<a id="change"> = </a>mnist_dataset_train_imgaug.copy()
    augmentation = iaa.CenterCropToFixedSize(1, 1)
    &#47&#47 Act
    copy_dataset.add_augmentation(augmentation)
    &#47&#47 Assert
    batch<a id="change"> = </a><a id="change">next(iter(</a>copy_dataset.get_data_loader()<a id="change">)</a><a id="change">)</a>
    data_sample = batch[0][0]
    assert_that(data_sample.numpy().shape, equal_to((1, 1, 1)))

</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Arrange
    augmentation = iaa.CenterCropToFixedSize(1, 1)
    &#47&#47 Act
    copy_dataset<a id="change"> = </a>mnist_dataset_train_imgaug.get_augmented_dataset(augmentation)
    &#47&#47 Assert
    batch<a id="change"> = </a><a id="change">next(</a><a id="change">iter(</a>copy_dataset.data_loader<a id="change">))</a>
    data_sample = batch[0][0]
    assert_that(data_sample.numpy().shape, equal_to((1, 1, 1)))

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/7cc184f31b2fa68766de920f8d1df1a3d8deaa05#diff-647ea011bec6d8b515da666ca7bcf4d765a9d254d536053766029b36d01a61c8L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8648229</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 7cc184f31b2fa68766de920f8d1df1a3d8deaa05</div><div id='time'> Time: 2022-03-09</div><div id='author'> Author: jonatan.lib@gmail.com</div><div id='file'> File Name: tests/vision/core/vision_data_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_add_augmentation_imgaug(1)</div><div id='n_method'> N Method Name: test_add_augmentation_imgaug(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/core/vision_data_test.py</div><div id='n_file'> N File Name: tests/vision/core/vision_data_test.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 63</div><BR>