<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def test_step(self, batch, batch_idx):
        y = batch["target"]
        ret_value = self(batch)
        _<a id="change"> = </a><a id="change">self.calculate_loss(y</a>, ret_value["clf_logits"], ret_value["logits"]<a id="change">, tag="test")</a>
        _<a id="change"> = </a><a id="change">self.calculate_metrics(y</a>, ret_value["logits"]<a id="change">, tag="test")</a>
        return ret_value["logits"], y

    def calculate_loss(self, y, classification_logits, y_hat, tag):
        cl_loss = self.classification_loss(classification_logits.squeeze(), y[:, 0].squeeze().long())</code></pre><h3>After Change</h3><pre><code class='java'>
    def test_step(self, batch, batch_idx):
        y = batch["target"]
        ret_value = self(batch)
        <a id="change">self.calculate_loss(y</a>, ret_value["clf_logits"], ret_value["logits"]<a id="change">, tag="test")</a>
        <a id="change">self.calculate_metrics(y</a>, ret_value["logits"]<a id="change">, tag="test")</a>
        return ret_value["logits"], y

    def calculate_loss(self, y, classification_logits, y_hat, tag):
        cl_loss = self.classification_loss(classification_logits.squeeze(), y[:, 0].squeeze().long())</code></pre>