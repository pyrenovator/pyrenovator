<html><h3>Pattern ID :39338
</h3><img src='111564086.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def test_memory_mapped_table_add_column(arrow_file, in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = MemoryMappedTable.from_file(arrow_file).add_column(i, field_, column)
    assert table.table == in_memory_pa_table.add_column(i, field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre><h3>After Change</h3><pre><code class='java'>
def test_memory_mapped_table_add_column(arrow_file, in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = MemoryMappedTable.from_file(arrow_file).add_column(i, field_, column)
    assert table.table == in_memory_pa_table.add_column(i, field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 10</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L557' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564086</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_memory_mapped_table_add_column(2)</div><div id='n_method'> N Method Name: test_memory_mapped_table_add_column(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 557</div><div id='m_end'> M End Line: 557</div><div id='n_start'> N Start Line: 557</div><div id='n_end'> N End Line: 557</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_memory_mapped_table_append_column(arrow_file, in_memory_pa_table):
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = MemoryMappedTable.from_file(arrow_file).append_column(field_, column)
    assert table.table == in_memory_pa_table.append_column(field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre><h3>After Change</h3><pre><code class='java'>

def test_memory_mapped_table_append_column(arrow_file, in_memory_pa_table):
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = MemoryMappedTable.from_file(arrow_file).append_column(field_, column)
    assert table.table == in_memory_pa_table.append_column(field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L566' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564087</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_memory_mapped_table_append_column(2)</div><div id='n_method'> N Method Name: test_memory_mapped_table_append_column(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 568</div><div id='m_end'> M End Line: 568</div><div id='n_start'> N Start Line: 568</div><div id='n_end'> N End Line: 568</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        "mixed": mixed_in_memory_and_memory_mapped_blocks,
    }[blocks_type]
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).append_column(field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.append_column(field_, column)</code></pre><h3>After Change</h3><pre><code class='java'>
        "mixed": mixed_in_memory_and_memory_mapped_blocks,
    }[blocks_type]
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).append_column(field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.append_column(field_, column)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L924' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564084</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_concatenation_table_append_column(5)</div><div id='n_method'> N Method Name: test_concatenation_table_append_column(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 933</div><div id='m_end'> M End Line: 933</div><div id='n_start'> N Start Line: 933</div><div id='n_end'> N End Line: 933</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_in_memory_table_set_column(in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = InMemoryTable(in_memory_pa_table).set_column(i, field_, column)
    assert table.table == in_memory_pa_table.set_column(i, field_, column)
    assert isinstance(table, InMemoryTable)</code></pre><h3>After Change</h3><pre><code class='java'>
def test_in_memory_table_set_column(in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = InMemoryTable(in_memory_pa_table).set_column(i, field_, column)
    assert table.table == in_memory_pa_table.set_column(i, field_, column)
    assert isinstance(table, InMemoryTable)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L397' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564098</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_in_memory_table_set_column(1)</div><div id='n_method'> N Method Name: test_in_memory_table_set_column(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 400</div><div id='m_end'> M End Line: 400</div><div id='n_start'> N Start Line: 400</div><div id='n_end'> N End Line: 400</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Test ignoring unknown columns
    schema_df_new = mining_schema_df.drop_duplicates().copy()
    schema_df_new["unknown_column"] = <a id="change">[i for i in range(len(schema_df_new))]</a>
    mining_schema = MiningSchema()
    with pytest.warns(UserWarning, match=r"column.* unknown_column"):
        mining_schema.add_from_df(schema_df_new)
    &#47&#47 Check that all data was added and the unknown columns was ignored</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Test ignoring unknown columns
    schema_df_new = mining_schema_df.drop_duplicates().copy()
    schema_df_new["unknown_column"] = <a id="change">list(range(len(</a>schema_df_new<a id="change">)</a><a id="change">)</a><a id="change">)</a>
    mining_schema = MiningSchema()
    with pytest.warns(UserWarning, match=r"column.* unknown_column"):
        mining_schema.add_from_df(schema_df_new)
    &#47&#47 Check that all data was added and the unknown columns was ignored</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/adb6e49d01db5e34f8816ebdc6b43d161f40e348#diff-3bbfdf0d10a09b8b1477cf6d88ad826df0e93370433faf49e97698c025fc4569L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564082</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: adb6e49d01db5e34f8816ebdc6b43d161f40e348</div><div id='time'> Time: 2021-05-26</div><div id='author'> Author: Stannislav@users.noreply.github.com</div><div id='file'> File Name: tests/test_widgets/test_mining_schema.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_df(1)</div><div id='n_method'> N Method Name: test_df(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_widgets/test_mining_schema.py</div><div id='n_file'> N File Name: tests/test_widgets/test_mining_schema.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 64</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 64</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    }[blocks_type]
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).set_column(i, field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.set_column(i, field_, column)</code></pre><h3>After Change</h3><pre><code class='java'>
    }[blocks_type]
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).set_column(i, field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.set_column(i, field_, column)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L956' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564080</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_concatenation_table_set_column(5)</div><div id='n_method'> N Method Name: test_concatenation_table_set_column(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 966</div><div id='m_end'> M End Line: 966</div><div id='n_start'> N Start Line: 966</div><div id='n_end'> N End Line: 966</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_memory_mapped_table_set_column(arrow_file, in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = MemoryMappedTable.from_file(arrow_file).set_column(i, field_, column)
    assert table.table == in_memory_pa_table.set_column(i, field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre><h3>After Change</h3><pre><code class='java'>
def test_memory_mapped_table_set_column(arrow_file, in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = MemoryMappedTable.from_file(arrow_file).set_column(i, field_, column)
    assert table.table == in_memory_pa_table.set_column(i, field_, column)
    assert isinstance(table, MemoryMappedTable)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L586' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564095</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_memory_mapped_table_set_column(2)</div><div id='n_method'> N Method Name: test_memory_mapped_table_set_column(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 589</div><div id='m_end'> M End Line: 589</div><div id='n_start'> N Start Line: 589</div><div id='n_end'> N End Line: 589</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    }[blocks_type]
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).add_column(i, field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.add_column(i, field_, column)</code></pre><h3>After Change</h3><pre><code class='java'>
    }[blocks_type]
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    with pytest.raises(NotImplementedError):
        ConcatenationTable.from_blocks(blocks).add_column(i, field_, column)
        &#47&#47 assert table.table == in_memory_pa_table.add_column(i, field_, column)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L905' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564093</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_concatenation_table_add_column(5)</div><div id='n_method'> N Method Name: test_concatenation_table_add_column(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 915</div><div id='m_end'> M End Line: 915</div><div id='n_start'> N Start Line: 915</div><div id='n_end'> N End Line: 915</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_in_memory_table_add_column(in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = InMemoryTable(in_memory_pa_table).add_column(i, field_, column)
    assert table.table == in_memory_pa_table.add_column(i, field_, column)
    assert isinstance(table, InMemoryTable)</code></pre><h3>After Change</h3><pre><code class='java'>
def test_in_memory_table_add_column(in_memory_pa_table):
    i = len(in_memory_pa_table.column_names)
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = InMemoryTable(in_memory_pa_table).add_column(i, field_, column)
    assert table.table == in_memory_pa_table.add_column(i, field_, column)
    assert isinstance(table, InMemoryTable)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L374' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564090</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_in_memory_table_add_column(1)</div><div id='n_method'> N Method Name: test_in_memory_table_add_column(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 377</div><div id='m_end'> M End Line: 377</div><div id='n_start'> N Start Line: 377</div><div id='n_end'> N End Line: 377</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_in_memory_table_append_column(in_memory_pa_table):
    field_ = "new_field"
    column = pa.array(<a id="change">[i for i in range(len(in_memory_pa_table))]</a>)
    table = InMemoryTable(in_memory_pa_table).append_column(field_, column)
    assert table.table == in_memory_pa_table.append_column(field_, column)
    assert isinstance(table, InMemoryTable)</code></pre><h3>After Change</h3><pre><code class='java'>

def test_in_memory_table_append_column(in_memory_pa_table):
    field_ = "new_field"
    column = pa.array(<a id="change">list(range(len(</a>in_memory_pa_table<a id="change">)</a><a id="change">)</a><a id="change">)</a>)
    table = InMemoryTable(in_memory_pa_table).append_column(field_, column)
    assert table.table == in_memory_pa_table.append_column(field_, column)
    assert isinstance(table, InMemoryTable)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/94b16b674111ca5e1a03ddcb71dc0b53acc2f934#diff-956061cd60efd54943151485eaa77ab422337bf1298e1f6094f118cd138b7c04L383' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111564091</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 94b16b674111ca5e1a03ddcb71dc0b53acc2f934</div><div id='time'> Time: 2023-02-23</div><div id='author'> Author: skylion.aaron@gmail.com</div><div id='file'> File Name: tests/test_table.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_in_memory_table_append_column(1)</div><div id='n_method'> N Method Name: test_in_memory_table_append_column(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_table.py</div><div id='n_file'> N File Name: tests/test_table.py</div><div id='m_start'> M Start Line: 385</div><div id='m_end'> M End Line: 385</div><div id='n_start'> N Start Line: 385</div><div id='n_end'> N End Line: 385</div><BR>