<html><h3>Pattern ID :21702
</h3><img src='69321249.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    this_dir = os.path.dirname(os.path.abspath(__file__))
    extensions_dir = os.path.join(this_dir, &quotDCLS/src&quot)

    ext_list = <a id="change">[</a>&quotdcls_1d&quot,
                <a id="change">&quotdcls_2_1d&quot</a>,                
                &quotdcls_2d&quot,
                <a id="change">&quotdcls_3_1d&quot</a>,
                &quotdcls_3_2d&quot,                
                &quotdcls_3d&quot,                
                &quotdcls&quot,
                &quotim2col_dcls&quot<a id="change"></a>]    
    if not sys.platform == &quotwin32&quot:
        &#47&#47 win32 does not support cuSparse
        ext_list.extend([&quotspmm&quot, 
                         &quotsparse_weight_conv&quot])
    
    extra_compile_args = {&quotcxx&quot: [&quot-g&quot], &quotnvcc&quot: [&quot-use_fast_math&quot]}
    
    extension = CUDAExtension
    define_macros = [("WITH_CUDA", None)]
    ext_modules<a id="change"> = </a>list([
        extension(
            ext_name,
            glob.glob(os.path.join(extensions_dir, ext_name + &quot.cpp&quot)) + glob.glob(os.path.join(extensions_dir, &quotcuda&quot, ext_name + &quot_cuda_kernel.cu&quot)),</code></pre><h3>After Change</h3><pre><code class='java'>
    else:
        print(&quotInstall With CUDA Extension&quot)
    this_dir = os.path.dirname(os.path.abspath(__file__))
    extensions_dir_construct<a id="change"> = </a><a id="change">os.path.join(</a>this_dir, <a id="change">&quotDCLS/construct/src&quot</a><a id="change">)</a>
    extensions_dir = os.path.join(this_dir, &quotDCLS/src&quot)    

    ext_list_construct = [&quotdcls_construct_1d&quot,
                          &quotdcls_construct_2_1d&quot,                
                          &quotdcls_construct_2d&quot,
                          &quotdcls_construct_3_1d&quot,
                          &quotdcls_construct_3_2d&quot,                
                          &quotdcls_construct_3d&quot]
    ext_list = [&quotdcls_2d&quot,
                &quotim2col_dcls_2d&quot]    
    if not sys.platform == &quotwin32&quot:
        &#47&#47 win32 does not support cuSparse
        ext_list_construct.extend([&quotspmm&quot, 
                         &quotsparse_weight_conv&quot])
    
    extra_compile_args = {&quotcxx&quot: [&quot-g&quot], &quotnvcc&quot: [&quot-use_fast_math&quot]}
    
    extension = CUDAExtension
    define_macros = [("WITH_CUDA", None)]
    ext_modules<a id="change"> = </a>list([
        extension(
            ext_name,
            glob.glob(os.path.join(extensions_dir_construct, ext_name + &quot.cpp&quot)) + glob.glob(os.path.join(extensions_dir_construct, &quotcuda&quot, ext_name + &quot_cuda_kernel.cu&quot)),</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/k-h-ismail/dilated-convolution-with-learnable-spacings-pytorch/commit/1c44ddb48f45ba7aff9c9bbd3a31ca15b0b0aa6c#diff-60f61ab7a8d1910d86d9fda2261620314edcae5894d5aaa236b821c7256badd7L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69321249</div><div id='project'> Project Name: k-h-ismail/dilated-convolution-with-learnable-spacings-pytorch</div><div id='commit'> Commit Name: 1c44ddb48f45ba7aff9c9bbd3a31ca15b0b0aa6c</div><div id='time'> Time: 2021-10-12</div><div id='author'> Author: khalfaoui.ismail@hotmail.com</div><div id='file'> File Name: setup.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_extensions(0)</div><div id='n_method'> N Method Name: get_extensions(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: setup.py</div><div id='n_file'> N File Name: setup.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        if use_onnx:
            if use_cuda:
                providers<a id="change"> = </a><a id="change">[
                            &quotCUDAExecutionProvider&quot</a>,
                            <a id="change">&quotCPUExecutionProvider&quot</a>
                            ]
            else:
                providers = [&quotCPUExecutionProvider&quot]
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.use_onnx = use_onnx
        self.device = &quotcuda&quot if use_cuda else &quotcpu&quot
        if weights == None:
            weights<a id="change"> = </a><a id="change">os.path.join("weights"</a>, "yolov5n.pt"<a id="change">)</a>
        if cfg == None:
            cfg = os.path.join("cfg", "yolor_p6.cfg")
        &#47&#47If incase weighst is a list of paths then select path at first index
        weights<a id="change"> = </a>str(weights[0] if isinstance(weights, list) else weights)
        &#47&#47 Load Model
        self.model = self.load_model(use_cuda, weights, cfg=cfg, img_size=640)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/augmentedstartups/as-one/commit/79f3ea97d63f873008f3ad548f1428f07f4d9dae#diff-9154a085fa2fce4c0495a4fe364b1cba4be28cc642d14f5b5b8eb80e737ae200L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69321376</div><div id='project'> Project Name: augmentedstartups/as-one</div><div id='commit'> Commit Name: 79f3ea97d63f873008f3ad548f1428f07f4d9dae</div><div id='time'> Time: 2022-09-07</div><div id='author'> Author: ajmair.kashif@axcelerate.ai</div><div id='file'> File Name: asone-linux/code/asone/detectors/yolor/yolor_detector.py</div><div id='m_class'> M Class Name: YOLOrDetector</div><div id='n_method'> N Class Name: YOLOrDetector</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: asone-linux/code/asone/detectors/yolor/yolor_detector.py</div><div id='n_file'> N File Name: asone-linux/code/asone/detectors/yolor/yolor_detector.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 28</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    

    cache_dir = os.path.join(root, "datasets", "IMDB")
    column_names<a id="change"> = </a><a id="change">["text"</a>, <a id="change">"label"</a>]
    mode_list = []
    datasets_list = []
    cache_file(</code></pre><h3>After Change</h3><pre><code class='java'>
    else:
        raise ValueError("&quotsplit&quot only support str, tuple and list type.")

    extract_path<a id="change"> = </a><a id="change">os.path.join(</a>cache_dir, <a id="change">"aclImdb"</a><a id="change">)</a>
    if not os.path.exists(extract_path):
        with tarfile.open(os.path.join(cache_dir, "aclImdb_v1.tar.gz"),&quotr&quot) as tarf:
            tarf.extractall(cache_dir)

    for mode in mode_list:
        datasets_list<a id="change"> += </a>(IMDBDataset(extract_path, mode, shuffle=shuffle),)

    if len(mode_list) == 1:
        return datasets_list[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mindlab-ai/mindnlp/commit/0728dd21ec19d46df64d9d865be99a22efed329c#diff-d8ca6d2cb95d357b8f75ffeba822c9078ebb95b43de24cb395eeacf257c4317eL71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69321293</div><div id='project'> Project Name: mindlab-ai/mindnlp</div><div id='commit'> Commit Name: 0728dd21ec19d46df64d9d865be99a22efed329c</div><div id='time'> Time: 2023-03-22</div><div id='author'> Author: lvyufeng@cqu.edu.cn</div><div id='file'> File Name: mindnlp/dataset/text_classification/imdb.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: IMDB(4)</div><div id='n_method'> N Method Name: IMDB(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mindnlp/dataset/text_classification/imdb.py</div><div id='n_file'> N File Name: mindnlp/dataset/text_classification/imdb.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 66</div><div id='n_end'> N End Line: 91</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        if use_onnx:
            if use_cuda:
                providers<a id="change"> = </a><a id="change">[
                            &quotCUDAExecutionProvider&quot</a>,
                            <a id="change">&quotCPUExecutionProvider&quot</a>
                            ]
            else:
                providers = [&quotCPUExecutionProvider&quot]
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.use_onnx = use_onnx
        self.device = &quotcuda&quot if use_cuda else &quotcpu&quot
        if weights is None:
            weights<a id="change"> = </a><a id="change">os.path.join(</a>"weights", <a id="change">"yolov5n.pt"</a><a id="change">)</a>

        if model_name is None:
            model_name = &quotyolox-s&quot

        if exp_file is None:
            exp_file = os.path.join("exps", "default", "yolox_s.py")
        &#47&#47 Load Model
        if self.use_onnx:
            self.model = self.load_onnx_model(use_cuda, weights)
        else:
            self.model<a id="change"> = </a>self.load_torch_model(weights, exp_file, model_name)


    def load_onnx_model(self, use_cuda, weights):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/augmentedstartups/as-one/commit/d10df000daa742a49e93689aae9972f7b3f68dc0#diff-d66cf3eba4f108a5065f6e2a113c2b77a75644dd0d90c18a95f9ab8e57857288L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69321260</div><div id='project'> Project Name: augmentedstartups/as-one</div><div id='commit'> Commit Name: d10df000daa742a49e93689aae9972f7b3f68dc0</div><div id='time'> Time: 2022-09-09</div><div id='author'> Author: ajmair.kashif@axcelerate.ai</div><div id='file'> File Name: asone-linux/code/asone/detectors/yolox/yolox_detector.py</div><div id='m_class'> M Class Name: YOLOxDetector</div><div id='n_method'> N Class Name: YOLOxDetector</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: asone-linux/code/asone/detectors/yolox/yolox_detector.py</div><div id='n_file'> N File Name: asone-linux/code/asone/detectors/yolox/yolox_detector.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 43</div><BR>