<html><h3>Pattern ID :6486
</h3><img src='22529477.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def mape(y_hat, y):
    <a id="change">return </a><a id="change">torch.abs(</a>(y_hat - y)<a id="change"> / </a>y<a id="change">)</a>


def pinball_loss(y_hat, y, q):
    err = y - y_hat</code></pre><h3>After Change</h3><pre><code class='java'>
    Returns:
        float | torch.Tensor: The Mean Absolute Percentage Error.
    
    err<a id="change"> = </a><a id="change">torch.abs(</a>(y_hat - y)<a id="change">/</a>(y + tsl.epsilon)<a id="change">)</a>
    <a id="change">return _masked_reduce(</a>err, reduction, mask, nan_to_zero<a id="change">)</a>


def mse(y_hat: torch.Tensor, y: torch.Tensor, mask: Optional[torch.Tensor] = None,
        reduction: ReductionType = &quotmean&quot,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/91641187daca670184d74fdb8dcdbda0f5eb6e9d#diff-51df9f63f346117bfe6c3e9fba24c3de12357f1d199cbede6bd16e165ef36b95L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22529477</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: 91641187daca670184d74fdb8dcdbda0f5eb6e9d</div><div id='time'> Time: 2022-11-14</div><div id='author'> Author: stefano.imoscopi@usi.ch</div><div id='file'> File Name: tsl/metrics/torch/functional.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mape(5)</div><div id='n_method'> N Method Name: mape(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tsl/metrics/torch/functional.py</div><div id='n_file'> N File Name: tsl/metrics/torch/functional.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 153</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    Returns:
        float: The Mean Absolute Percentage Error in percentage.
    
    <a id="change">return </a>100 * <a id="change">np.abs(</a>(y_hat - y)<a id="change"> / </a>(y + tsl.epsilon)<a id="change">)</a>.mean()


def mse(y_hat: FrameArray, y: FrameArray) -&gt; float:</code></pre><h3>After Change</h3><pre><code class='java'>
    Returns:
        float | np.ndarray: The Mean Absolute Percentage Error. (not in percent)
    
    err<a id="change"> = </a><a id="change">np.abs(</a>(y_hat - y)<a id="change">/</a>(y + tsl.epsilon)<a id="change">)</a>
    <a id="change">return _masked_reduce(</a>err, reduction, mask, nan_to_zero<a id="change">)</a>


def mse(y_hat: FrameArray, y: FrameArray, mask: Optional[FrameArray] = None,
        reduction: ReductionType = &quotmean&quot,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/ab39739efc2636cd5fc6f865bef7270490e74a38#diff-5331885da24c6c47f734ea44ed32cb10bb94c568d21e592f8e5a5173240269b0L98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22529476</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: ab39739efc2636cd5fc6f865bef7270490e74a38</div><div id='time'> Time: 2022-10-28</div><div id='author'> Author: stefano.imoscopi@usi.ch</div><div id='file'> File Name: tsl/metrics/numpy/functional.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mape(5)</div><div id='n_method'> N Method Name: mape(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tsl/metrics/numpy/functional.py</div><div id='n_file'> N File Name: tsl/metrics/numpy/functional.py</div><div id='m_start'> M Start Line: 98</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    Returns:
        float: The Mean Absolute Error.
    
    <a id="change">return </a>_reduce(<a id="change">np.abs(</a>y_hat<a id="change"> - </a>y<a id="change">)</a>, reduction)


def nmae(y_hat: FrameArray, y: FrameArray) -&gt; float:</code></pre><h3>After Change</h3><pre><code class='java'>
    Returns:
        float | np.ndarray: The Mean Absolute Error.
    
    err<a id="change"> = </a><a id="change">np.abs(</a>y_hat<a id="change"> - </a>y<a id="change">)</a>
    <a id="change">return _masked_reduce(</a>err, reduction, mask, nan_to_num<a id="change">)</a>


def nmae(y_hat: FrameArray, y: FrameArray) -&gt; float:
    rCompute the *Normalized Mean Absolute Error* (NMAE) between the estimate</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/bf6fed0ba43d9d1468b1aec5b8b569bed02675e0#diff-5331885da24c6c47f734ea44ed32cb10bb94c568d21e592f8e5a5173240269b0L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22529475</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: bf6fed0ba43d9d1468b1aec5b8b569bed02675e0</div><div id='time'> Time: 2022-10-28</div><div id='author'> Author: ivan.marisca@hotmail.it</div><div id='file'> File Name: tsl/metrics/numpy/functional.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mae(5)</div><div id='n_method'> N Method Name: mae(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tsl/metrics/numpy/functional.py</div><div id='n_file'> N File Name: tsl/metrics/numpy/functional.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 73</div><BR>