<html><h3>Pattern ID :32894
</h3><img src='95421731.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            )
            sys.exit(1)
    print(f&quot&#47&#47&#47&#47&#47&#47 task = {task}&quot)
    <a id="change">if </a>task == &quotindex&quot:
        if os.path.exists(workspace):
            print(f&quot\n +---------------------------------------------------------------------------------+ \
                    \n |                                   🤖🤖🤖                                        | \
                    \n | The directory {workspace} already exists. Please remove it before indexing again. | \
                    \n |                                   🤖🤖🤖                                        | \
                    \n +---------------------------------------------------------------------------------+&quot)
        index()
    elif task == &quotindex_restful&quot:
        index_restful(num_docs_index)
    elif <a id="change">task == &quotquery&quot</a>:
        query()
    elif task == &quotquery_restful&quot:
        if not os.path.exists(workspace):
            print(f&quotThe directory {workspace} does not exist. Please index first via `python app.py -t index`&quot)
        query_restful()
    elif task == &quotdryrun&quot:
        dryrun()
    else:
        <a id="change">raise NotImplementedError(
            f&quotunknown task: {task}. A valid task is either `index` or `query`.&quot</a><a id="change">)</a>


if __name__ == &quot__main__&quot:
    main()</code></pre><h3>After Change</h3><pre><code class='java'>
    elif task == &quotquery_restful&quot:
        if not os.path.exists(workspace):
            logger.error(f&quotThe directory {workspace} does not exist. Please index first via `python app.py -t index`&quot)
            <a id="change">sys.exit(1</a><a id="change">)</a>
        query_restful()
    elif task == &quotdryrun&quot:
        dryrun()
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/dc36fee6c43ef11c33354b58c79af6ce11fae6ff#diff-d8af17c2511fbb66cc20ccdc1d61944c4a62679333ad4345eefb038e23a7da85L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95421731</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: dc36fee6c43ef11c33354b58c79af6ce11fae6ff</div><div id='time'> Time: 2021-05-10</div><div id='author'> Author: 51201318+slettner@users.noreply.github.com</div><div id='file'> File Name: tumblr-gif-search/app.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tumblr-gif-search/app.py</div><div id='n_file'> N File Name: tumblr-gif-search/app.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        with f:
            with TimeContext(f&quotQPS: indexing {num_docs}&quot, logger=f.logger):
                f.index_files(&quotdata/*.wav&quot, batch_size=2, size=num_docs)
    elif <a id="change"></a>task == &quotindex_restful&quot:
        index_restful(num_docs)
    elif task == &quotquery&quot:
        f = Flow.load_config(&quotflows/query.yml&quot)
        with f:
            &#47&#47 no perf measurement here, as it opens the REST API and blocks
            f.block()
    elif <a id="change">task == &quotdryrun&quot</a>:
        f = Flow.load_config(&quotflows/query.yml&quot)
        with f:
            pass
    else:
        <a id="change">raise NotImplementedError(
            f&quotunknown task: {task}. A valid task is either `index` or `query` or `dryrun`.&quot</a><a id="change">)</a>


if __name__ == &quot__main__&quot:
    main()</code></pre><h3>After Change</h3><pre><code class='java'>
    if &quotquery&quot in task:
        if not os.path.exists(workspace):
            print(f&quotThe directory {workspace} does not exist. Please index first via `python app.py -t index`&quot)
            <a id="change">sys.exit(1</a><a id="change">)</a>
    if task == &quotquery_restful&quot:
        f = Flow.load_config(&quotflows/query.yml&quot)
        f.use_rest_gateway(os.environ.get(&quotJINA_PORT&quot))
        with f:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/b0e8f1b2653490d5d7dc7c9976235f830a4822fe#diff-f9f29559a8d36475f06b7ab33e52458f2b3d2c48e0a5f1894482dc97028d5108L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95421732</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: b0e8f1b2653490d5d7dc7c9976235f830a4822fe</div><div id='time'> Time: 2021-05-14</div><div id='author'> Author: nan.wang@jina.ai</div><div id='file'> File Name: audio-search/app.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: audio-search/app.py</div><div id='n_file'> N File Name: audio-search/app.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 83</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    elif task == &quotquery&quot:
        config()
        query()
    elif <a id="change"></a>task == &quotquery_restful&quot:
        if not os.path.exists(workspace):
            logger.warning(f&quotThe directory {workspace} does not exist. Please index first via `python app.py -t index`&quot)
        query_restful()
    elif <a id="change">task == &quotdryrun&quot</a>:
        dryrun()
    else:
        <a id="change">raise NotImplementedError(
            f&quotunknown task: {task}. A valid task is either `index` or `query`.&quot</a><a id="change">)</a>

if __name__ == &quot__main__&quot:
    main()
</code></pre><h3>After Change</h3><pre><code class='java'>
                    \n | The directory {workspace} already exists. Please remove it before indexing again. | \
                    \n |                                   🤖🤖🤖                                        | \
                    \n +---------------------------------------------------------------------------------+&quot)
            <a id="change">sys.exit(1</a><a id="change">)</a>
        index(num_docs)
    elif task == &quotquery&quot:
        query()
    elif task == &quotquery_text&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/examples/commit/e2bac6411dfc263b22bd8023274ce5a662e21c57#diff-2267e8e53b42b3d2dc2a413309c4f06c2b0754b68241bb673b5075436beb815dL105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95421733</div><div id='project'> Project Name: jina-ai/examples</div><div id='commit'> Commit Name: e2bac6411dfc263b22bd8023274ce5a662e21c57</div><div id='time'> Time: 2021-07-16</div><div id='author'> Author: 51201318+slettner@users.noreply.github.com</div><div id='file'> File Name: multires-lyrics-search/app.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: multires-lyrics-search/app.py</div><div id='n_file'> N File Name: multires-lyrics-search/app.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 133</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 89</div><BR>