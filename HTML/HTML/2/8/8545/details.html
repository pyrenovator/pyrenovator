<html><h3>Pattern ID :8545
</h3><img src='29725509.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    users = to_numpy(log, "user_idx")
    items = to_numpy(log, "item_idx")
    relevance = to_numpy(log, "relevance")
    <a id="change">return </a><a id="change">csr_matrix(</a>(relevance<a id="change">, (items, users)</a>)<a id="change">)</a>


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:
    </code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 2]], dtype=int64)
    
    df = log.select("user_idx", "item_idx", "relevance").toPandas()
    <a id="change">return </a><a id="change">csr_matrix(</a>(df.relevance<a id="change">, (df.item_idx, df.user_idx)</a>)<a id="change">)</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/11d2dcf0cc56cfcbaee2c35e801681acf6757d9a#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL277' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29725509</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 11d2dcf0cc56cfcbaee2c35e801681acf6757d9a</div><div id='time'> Time: 2020-05-07</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
           [0, 2]], dtype=int64)
    
    data_frame = log.select("user_idx", "item_idx", "relevance").toPandas()
    <a id="change">return </a><a id="change">csr_matrix(
        </a>(
            data_frame.relevance<a id="change">,
            (data_frame.item_idx.astype(int), data_frame.user_idx.astype(int))</a>,
        )<a id="change">
    )</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    col_count = int(
        item_count if item_count is not None else pandas_df.item_idx.max() + 1
    )
    <a id="change">return </a><a id="change">csr_matrix(
        </a>(pandas_df.relevance<a id="change">, (pandas_df.user_idx, pandas_df.item_idx)</a>)<a id="change">,
        shape=(row_count, col_count),
    )</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/b87b016dcd59de396c49fab931fd6337c72ff16c#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL171' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29725508</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: b87b016dcd59de396c49fab931fd6337c72ff16c</div><div id='time'> Time: 2020-05-15</div><div id='author'> Author: Shminke.B.A@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(3)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 171</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 172</div><div id='n_end'> N End Line: 203</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    users = to_numpy(log, "user_idx")
    items = to_numpy(log, "item_idx")
    relevance = to_numpy(log, "relevance")
    <a id="change">return </a><a id="change">csr_matrix(</a>(relevance<a id="change">, (items, users)</a>)<a id="change">)</a>


def to_numpy(log: DataFrame, col: str) -&gt; np.ndarray:
    </code></pre><h3>After Change</h3><pre><code class='java'>
           [0, 2]], dtype=int64)
    
    df = log.select("user_idx", "item_idx", "relevance").toPandas()
    <a id="change">return </a><a id="change">csr_matrix(</a>(df.relevance<a id="change">, (df.item_idx, df.user_idx)</a>)<a id="change">)</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/d64dec49c52992118860248b7aba033c903c12b9#diff-3df8995e7757f58ab72261f4c2270076b4493ad9ba18d64476da3d168e33bedaL263' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29725510</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: d64dec49c52992118860248b7aba033c903c12b9</div><div id='time'> Time: 2020-04-30</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: sponge_bob_magic/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_csr(1)</div><div id='n_method'> N Method Name: to_csr(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sponge_bob_magic/utils.py</div><div id='n_file'> N File Name: sponge_bob_magic/utils.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 278</div><BR>