<html><h3>Pattern ID :8381
</h3><img src='29275516.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        current_shape = list(d[self.ref_image].shape)

        if self.depth_first:
            <a id="change">if self.axis != 0</a>:
                <a id="change">raise </a>RuntimeError("Depth first means the depth axis should be 0.")
            &#47&#47 in here we assume the depth dimension was in the last dimension of "original_shape"
            original_shape<a id="change"> = </a>np.roll(original_shape, 1)

        factor = np.array(current_shape) / original_shape
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Assume channel is first and depth is last CHWD
        original_shape = d[meta_dict_key]["spatial_shape"]
        current_shape = <a id="change">list(d[self.ref_image].shape)[1:]</a>

        &#47&#47 in here we assume the depth dimension is in the last dimension of "original_shape" and "current_shape"
        factor = np.array(current_shape) / original_shape
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/project-monai/monailabel/commit/6ad3aaad098238115cba1e65df6726ca19a4e474#diff-ed3b5072b42bd705c8ea626ad811a82b2a44dc745e40038ead07bd4d32e4f64bL738' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29275516</div><div id='project'> Project Name: project-monai/monailabel</div><div id='commit'> Commit Name: 6ad3aaad098238115cba1e65df6726ca19a4e474</div><div id='time'> Time: 2021-11-11</div><div id='author'> Author: diazandr3s@gmail.com</div><div id='file'> File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_class'> M Class Name: AddGuidanceFromPointsCustomd</div><div id='n_method'> N Class Name: AddGuidanceFromPointsCustomd</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: Transform</div><div id='n_parent_class'> N Parent Class: Transform</div><div id='m_file'> M File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='n_file'> N File Name: monailabel/deepedit/multilabel/transforms.py</div><div id='m_start'> M Start Line: 747</div><div id='m_end'> M End Line: 766</div><div id='n_start'> N Start Line: 738</div><div id='n_end'> N End Line: 738</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Input validation
        additional_columns = set(kwargs.keys())
        forbidden = additional_columns.intersection(TRIPLES_DF_COLUMNS)
        <a id="change">if len(forbidden) &gt; 0</a>:
            <a id="change">raise </a>ValueError(
                f&quotThe key-words for additional arguments must not be in {TRIPLES_DF_COLUMNS}, but {forbidden} were &quot
                f&quotused.&quot,
            )

        &#47&#47 convert to numpy
        tensor<a id="change"> = </a>tensor.cpu().numpy()
        data = dict(zip([&quothead_id&quot, &quotrelation_id&quot, &quottail_id&quot], tensor.T))

        &#47&#47 vectorized label lookup</code></pre><h3>After Change</h3><pre><code class='java'>
            )

        &#47&#47 Re-order columns
        columns = list(TRIPLES_DF_COLUMNS) + <a id="change">old_col[3:]</a>
        return data.loc[:, columns]

    def new_with_restriction(
        self,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/a2f9ee81f1899e695483c69983cc8159524cbe01#diff-2dce01c3c0b4127bdab5850a84b545299b150d156c01aad24589fa76762c6c72L645' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29275517</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: a2f9ee81f1899e695483c69983cc8159524cbe01</div><div id='time'> Time: 2021-01-21</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: src/pykeen/triples/triples_factory.py</div><div id='m_class'> M Class Name: TriplesFactory</div><div id='n_method'> N Class Name: TriplesFactory</div><div id='m_method'> M Method Name: tensor_to_df(2)</div><div id='n_method'> N Method Name: tensor_to_df(2)</div><div id='m_parent_class'> M Parent Class: CoreTriplesFactory</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/pykeen/triples/triples_factory.py</div><div id='n_file'> N File Name: src/pykeen/triples/triples_factory.py</div><div id='m_start'> M Start Line: 661</div><div id='m_end'> M End Line: 693</div><div id='n_start'> N Start Line: 941</div><div id='n_end'> N End Line: 958</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if len(objects) == 2:
                    image = objects[0]
                    objects = objects[1].split(&quot\"&quot)
                    <a id="change">if 1 &lt; len(objects)</a>:
                        if len(objects) % 2:
                            captions = [objects[2 * i + 1]
                                for i in range(int(len(objects) / 2))]
                        else:
                            <a id="change">raise </a>Exception("Line %s: unexpected number "
                                "of quotes in filename" % line)
                    else:
                        captions<a id="change"> = </a>objects[0].split()
                else:
                    image = objects[0][:-1]
                    captions = []</code></pre><h3>After Change</h3><pre><code class='java'>
                if len(objects) == 2:
                    image = objects[0]
                    captions = []
                    for caption in <a id="change">objects[1:]</a>:
                        if caption[0] != &quot\"&quot or caption[-1] != &quot\"&quot:
                            log.warning("Line %s: unexpected number "
                                "of quotes" % line)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/551fa11a820347080aaa92b43cac2fe61f1691a6#diff-8dabf26e19c18cd14fd53c6edd8a4b1d2dda9ebff6029ef2786e570df53ac0daL53' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29275512</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: 551fa11a820347080aaa92b43cac2fe61f1691a6</div><div id='time'> Time: 2021-07-22</div><div id='author'> Author: kirill.sizov@intel.com</div><div id='file'> File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_class'> M Class Name: _IcdarExtractor</div><div id='n_method'> N Class Name: _IcdarExtractor</div><div id='m_method'> M Method Name: _load_recognition_items(1)</div><div id='n_method'> N Method Name: _load_recognition_items(1)</div><div id='m_parent_class'> M Parent Class: SourceExtractor</div><div id='n_parent_class'> N Parent Class: SourceExtractor</div><div id='m_file'> M File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='n_file'> N File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    if img.ndim == 2:
        h, w = img.shape
    elif <a id="change">img.ndim == 3</a>:
        h<a id="change">, w, c = </a>img.shape
    else:
        <a id="change">raise </a>ValueError(f&quotImage ndim should be 2 or 3, but got {img.ndim}&quot)

    h_space = np.arange(0, h - crop_size + 1, step)
    if h - (h_space[-1] + crop_size) &gt; thresh_size:</code></pre><h3>After Change</h3><pre><code class='java'>

    img = cv2.imread(path, cv2.IMREAD_UNCHANGED)

    h, w = <a id="change">img.shape[0:2]</a>
    h_space = np.arange(0, h - crop_size + 1, step)
    if h - (h_space[-1] + crop_size) &gt; thresh_size:
        h_space = np.append(h_space, h - crop_size)
    w_space = np.arange(0, w - crop_size + 1, step)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xinntao/real-esrgan/commit/8675208bc9524afc694162e8a295fffe81eb5bad#diff-3ab6c0785145ce80de7c87d08c49b8d72a2a7aab2f9bb06110e124d39f197521L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29275508</div><div id='project'> Project Name: xinntao/real-esrgan</div><div id='commit'> Commit Name: 8675208bc9524afc694162e8a295fffe81eb5bad</div><div id='time'> Time: 2021-09-07</div><div id='author'> Author: wxt1994@126.com</div><div id='file'> File Name: scripts/extract_subimages.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: worker(2)</div><div id='n_method'> N Method Name: worker(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/extract_subimages.py</div><div id='n_file'> N File Name: scripts/extract_subimages.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 109</div><BR>