<html><h3>Pattern ID :39731
</h3><img src='113172606.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    == set(normalize))
        if normalize[&quottype&quot] == &quotBN&quot:
            self.bn_eval = normalize[&quotbn_eval&quot]
            self.bn_frozen = <a id="change">normalize[&quotbn_frozen&quot]</a>
        self.normalize = normalize

        self.block, stage_blocks = self.arch_settings[depth]
        self.stage_blocks = stage_blocks[:num_stages]
        self.inplanes = 64

        self.conv1 = nn.Conv2d(
            3, 64, kernel_size=7, stride=2, padding=3, bias=False)
        stem_norm = build_norm_layer(normalize, 64)
        self.stem_norm_name = &quotgn1&quot if <a id="change">normalize[&quottype&quot]</a> == &quotGN&quot else &quotbn1&quot
        self.add_module(self.stem_norm_name, stem_norm)
        self.relu = nn.ReLU(inplace=True)
        self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.is_frozen = [i &lt;= frozen_stages for i in range(num_stages + 1)]
        assert (isinstance(normalize, dict) and &quoteval&quot in normalize
                and &quotfrozen&quot in normalize)
        self.norm_eval<a id="change"> = </a><a id="change">normalize.pop(&quoteval&quot</a><a id="change">)</a>
        self.normalize = normalize
        self.block, stage_blocks = self.arch_settings[depth]
        self.stage_blocks = stage_blocks[:num_stages]
        self.inplanes = 64</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/f64c95616677f90aa79b556251d2c426ef4d07dc#diff-9e74a787bb65349ba8132ef6e75391c75732620feb72f0ec0283e9913e7afc80L261' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113172606</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: f64c95616677f90aa79b556251d2c426ef4d07dc</div><div id='time'> Time: 2018-12-30</div><div id='author'> Author: thangvubk@gmail.com</div><div id='file'> File Name: mmdet/models/backbones/resnet.py</div><div id='m_class'> M Class Name: ResNet</div><div id='n_method'> N Class Name: ResNet</div><div id='m_method'> M Method Name: __init__(10)</div><div id='n_method'> N Method Name: __init__(10)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: mmdet/models/backbones/resnet.py</div><div id='n_file'> N File Name: mmdet/models/backbones/resnet.py</div><div id='m_start'> M Start Line: 261</div><div id='m_end'> M End Line: 286</div><div id='n_start'> N Start Line: 272</div><div id='n_end'> N End Line: 281</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        use_cpu_embedding = True
    else:
        default_chunk_size = config["default_chunk_size"]
        use_fake_dist = <a id="change">config["use_fake_dist"]</a>
        use_cpu_embedding = <a id="change">config["use_cpu_embedding"]</a>

    mgr = PatrickStarManager(local_rank=local_rank)
    client = PatrickStarClient(rank=local_rank,
                               default_chunk_size=default_chunk_size,</code></pre><h3>After Change</h3><pre><code class='java'>
        use_cpu_embedding = True
    else:
        default_chunk_size = config.pop("default_chunk_size", DEFAULT_CHUNK_SIZE)
        use_fake_dist<a id="change"> = </a><a id="change">config.pop("use_fake_dist"</a>, False<a id="change">)</a>
        release_during_init = config.pop("release_during_init", True)
        use_cpu_embedding = config.pop("use_cpu_embedding", True)

    mgr = PatrickStarManager(local_rank=local_rank)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencent/patrickstar/commit/851862d1a201ffc78718f76d3bcf9ba283049ade#diff-ce3418b9d47df37629ea4d74e1789c597370390dd8d961c7a437af319ec8aa22L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113172607</div><div id='project'> Project Name: tencent/patrickstar</div><div id='commit'> Commit Name: 851862d1a201ffc78718f76d3bcf9ba283049ade</div><div id='time'> Time: 2021-09-06</div><div id='author'> Author: zilinzhu@tencent.com</div><div id='file'> File Name: patrickstar/runtime/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: initialize_engine(3)</div><div id='n_method'> N Method Name: initialize_engine(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: patrickstar/runtime/__init__.py</div><div id='n_file'> N File Name: patrickstar/runtime/__init__.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 46</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            assert (set([&quottype&quot, &quotbn_eval&quot, &quotbn_frozen&quot])
                    == set(normalize))
        if normalize[&quottype&quot] == &quotBN&quot:
            self.bn_eval = <a id="change">normalize[&quotbn_eval&quot]</a>
            self.bn_frozen = <a id="change">normalize[&quotbn_frozen&quot]</a>
        self.normalize = normalize

        self.block, stage_blocks = self.arch_settings[depth]
        self.stage_blocks = stage_blocks[:num_stages]</code></pre><h3>After Change</h3><pre><code class='java'>
        self.is_frozen = [i &lt;= frozen_stages for i in range(num_stages + 1)]
        assert (isinstance(normalize, dict) and &quoteval&quot in normalize
                and &quotfrozen&quot in normalize)
        self.norm_eval<a id="change"> = </a><a id="change">normalize.pop(&quoteval&quot</a><a id="change">)</a>
        self.normalize = normalize
        self.block, stage_blocks = self.arch_settings[depth]
        self.stage_blocks = stage_blocks[:num_stages]
        self.inplanes = 64</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/f64c95616677f90aa79b556251d2c426ef4d07dc#diff-9e74a787bb65349ba8132ef6e75391c75732620feb72f0ec0283e9913e7afc80L236' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113172604</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: f64c95616677f90aa79b556251d2c426ef4d07dc</div><div id='time'> Time: 2018-12-30</div><div id='author'> Author: thangvubk@gmail.com</div><div id='file'> File Name: mmdet/models/backbones/resnet.py</div><div id='m_class'> M Class Name: ResNet</div><div id='n_method'> N Class Name: ResNet</div><div id='m_method'> M Method Name: __init__(10)</div><div id='n_method'> N Method Name: __init__(10)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: mmdet/models/backbones/resnet.py</div><div id='n_file'> N File Name: mmdet/models/backbones/resnet.py</div><div id='m_start'> M Start Line: 261</div><div id='m_end'> M End Line: 286</div><div id='n_start'> N Start Line: 272</div><div id='n_end'> N End Line: 281</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.features_dim = self.encoder.inplanes
            &#47&#47 remove fc layer
            self.encoder.fc = nn.Identity()
            if <a id="change">backbone_args["cifar"]</a>:
                self.encoder.conv1 = nn.Conv2d(
                    3, 64, kernel_size=3, stride=1, padding=2, bias=False
                )
                self.encoder.maxpool = nn.Identity()
        else:
            self.encoder = self.base_model(<a id="change">backbone_args["patch_size"]</a>)
            self.features_dim = self.encoder.num_features

        self.classifier = nn.Linear(self.features_dim, num_classes)</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 initialize encoder
        kwargs = self.backbone_args.copy()
        cifar<a id="change"> = </a><a id="change">kwargs.pop("cifar"</a>, False<a id="change">)</a>
        &#47&#47 swin specific
        if "swin" in self.encoder_name and cifar:
            kwargs["window_size"] = 4
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vturrisi/contrastive-learning/commit/a2b958f6aad3f495dd249daf5b5cdaa06396cecf#diff-bf0f79abb0e767723150e5fe64a4a5935492d2fcf2eb222cfe5f8c901bcd11b0L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113172631</div><div id='project'> Project Name: vturrisi/contrastive-learning</div><div id='commit'> Commit Name: a2b958f6aad3f495dd249daf5b5cdaa06396cecf</div><div id='time'> Time: 2021-09-17</div><div id='author'> Author: vt.turrisi@gmail.com</div><div id='file'> File Name: solo/methods/base.py</div><div id='m_class'> M Class Name: BaseMethod</div><div id='n_method'> N Class Name: BaseMethod</div><div id='m_method'> M Method Name: __init__(24)</div><div id='n_method'> N Method Name: __init__(24)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: solo/methods/base.py</div><div id='n_file'> N File Name: solo/methods/base.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 176</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 208</div><BR>