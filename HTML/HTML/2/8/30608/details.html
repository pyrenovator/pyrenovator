<html><h3>Pattern ID :30608
</h3><img src='90413083.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 logger.addFilter(RepeatFilter())

        &#47&#47 Add stream handler
        stream_handler<a id="change"> = </a>colorlog.StreamHandler(stream=sys.stdout)
        <a id="change">stream_handler.setFormatter(</a>colored_formatter<a id="change">)</a>
        <a id="change">logger.addHandler(</a>stream_handler<a id="change">)</a>

        &#47&#47 Add file handler
        if log_folder:
            os.makedirs(log_folder, exist_ok=True)</code></pre><h3>After Change</h3><pre><code class='java'>
            logger.addFilter(RepeatFilter())

        &#47&#47 Add stream handler if none has been added.
        <a id="change">if not any(
            [isinstance(h, colorlog.StreamHandler) for h in logger.handlers]
        )</a>:
            stream_handler<a id="change"> = </a>colorlog.StreamHandler(stream=sys.stdout)
            <a id="change">stream_handler.setFormatter(</a>colored_formatter<a id="change">)</a>
            <a id="change">logger.addHandler(</a>stream_handler<a id="change">)</a>

        &#47&#47 Add file handler if log folder is specified.
        if log_folder:
            os.makedirs(log_folder, exist_ok=True)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/graphnet-team/graphnet/commit/bd3e5418b7edfeab96db9eec4a03bd56bee34218#diff-745c00329ed248dda40e175285922d80e57b4c31a6c66ac75dd86b5083adc438L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90413083</div><div id='project'> Project Name: graphnet-team/graphnet</div><div id='commit'> Commit Name: bd3e5418b7edfeab96db9eec4a03bd56bee34218</div><div id='time'> Time: 2023-02-21</div><div id='author'> Author: andreas.sogaard@gmail.com</div><div id='file'> File Name: src/graphnet/utilities/logging.py</div><div id='m_class'> M Class Name: Logger</div><div id='n_method'> N Class Name: Logger</div><div id='m_method'> M Method Name: _configure_root_logger(2)</div><div id='n_method'> N Method Name: _configure_root_logger(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/graphnet/utilities/logging.py</div><div id='n_file'> N File Name: src/graphnet/utilities/logging.py</div><div id='m_start'> M Start Line: 87</div><div id='m_end'> M End Line: 111</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 115</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    logger.setLevel(logging.DEBUG)
    formatter = logging.Formatter(
        &quot%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot)
    sh<a id="change"> = </a>logging.StreamHandler()
    <a id="change">sh.setFormatter(</a>formatter<a id="change">)</a>
    <a id="change">logger.addHandler(</a>sh<a id="change">)</a>
    if log_file:
        &#47&#47 New log will be appended, not overwrite
        fh = logging.FileHandler(log_file)
        fh.setFormatter(formatter)</code></pre><h3>After Change</h3><pre><code class='java'>
    logger = logging.getLogger(name)
    logger.setLevel(logging.DEBUG)

    <a id="change">if not logger.hasHandlers()</a>:  &#47&#47 Prevent attaching multiple handlers
        formatter = logging.Formatter(
            &quot%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot)
        sh<a id="change"> = </a>logging.StreamHandler()
        <a id="change">sh.setFormatter(</a>formatter<a id="change">)</a>
        <a id="change">logger.addHandler(</a>sh<a id="change">)</a>
        if log_file:
            &#47&#47 New log will be appended, not overwrite
            fh = logging.FileHandler(log_file)
            fh.setFormatter(formatter)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zjunlp/dart/commit/c41d9ead1c1a3b76eab8ba323f0f3dcdd350655e#diff-51246e53255db77c9edad496f074aa1bdbf8dbdc11f89a02040115c9ab4fa7f0L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90413081</div><div id='project'> Project Name: zjunlp/dart</div><div id='commit'> Commit Name: c41d9ead1c1a3b76eab8ba323f0f3dcdd350655e</div><div id='time'> Time: 2022-12-03</div><div id='author'> Author: lilq1285@163.com</div><div id='file'> File Name: src/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_logger(2)</div><div id='n_method'> N Method Name: get_logger(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils.py</div><div id='n_file'> N File Name: src/utils.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.time_costs = []
        self.time_buf = {}
        self.formatter = logging.Formatter(&quot%(asctime)s %(filename)s %(funcName)s [line:%(lineno)d] %(levelname)s %(message)s&quot)
        self.head<a id="change"> = </a>logging.StreamHandler()
        self.head.setLevel(logging.INFO)
        <a id="change">self.head.setFormatter(</a>self.formatter<a id="change">)</a>
        <a id="change">self.addHandler(</a>self.head<a id="change">)</a>

    def check_if_log(self, round, eval_interval=-1):
        For evaluating every &quoteval_interval&quot rounds, check whether to log at &quotround&quot.
        self.current_round = round</code></pre><h3>After Change</h3><pre><code class='java'>
        self.time_buf = {}
        self.formatter = logging.Formatter(&quot%(asctime)s %(filename)s %(funcName)s [line:%(lineno)d] %(levelname)s %(message)s&quot)
        self.handler_list = []
        <a id="change">if not self.meta[&quotno_log_console&quot]</a>:
            self.streamhandler<a id="change"> = </a>logging.StreamHandler()
            <a id="change">self.streamhandler.setFormatter(</a>self.formatter<a id="change">)</a>
            self.streamhandler.setLevel(self._LEVEL[self.meta[&quotlog_level&quot].upper()])
            <a id="change">self.addHandler(</a>self.streamhandler<a id="change">)</a>
        if self.meta[&quotlog_file&quot]:
            log_dir = self.get_log_path()
            self.log_path = os.path.join(log_dir, self.get_time_string()+self.get_output_name(&quot.log&quot))
            if not os.path.exists(self.get_log_path()):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwzzz/easyfl/commit/45505e44ba6f50c9df0453fd543b7dfe0891d0e9#diff-60400dd25faee473490afcbde8c7c080f1de6c03ee9bdb889c82e95a7f87fadaL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90413084</div><div id='project'> Project Name: wwzzz/easyfl</div><div id='commit'> Commit Name: 45505e44ba6f50c9df0453fd543b7dfe0891d0e9</div><div id='time'> Time: 2022-07-29</div><div id='author'> Author: zzz510711928@gmail.com</div><div id='file'> File Name: utils/logger/basic_logger.py</div><div id='m_class'> M Class Name: Logger</div><div id='n_method'> N Class Name: Logger</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: logging.Logger</div><div id='n_parent_class'> N Parent Class: logging.Logger</div><div id='m_file'> M File Name: utils/logger/basic_logger.py</div><div id='n_file'> N File Name: utils/logger/basic_logger.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 48</div><BR>