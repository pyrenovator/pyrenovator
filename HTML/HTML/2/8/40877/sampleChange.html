<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47Â gess direction
    direct = 1 &#47&#47 or -1 if CA is berfore
    if direct:
        phis<a id="change"> = </a><a id="change">np.vstack(</a>np.array([None for i in range(len(N_mask))])<a id="change">)</a>.T
    else:
        phis = np.vstack(np.array([None for i in range(len(N_mask))])).T
    neg_phis = (phis &lt; 0).sum(axis=-1)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 compute phis and count lower than 0s
    phis_count = []
    for i in range(cs.shape[0]):
        phis<a id="change"> = </a><a id="change">[]</a>
        <a id="change">for </a>j in range(1, cs.shape[1]-1)<a id="change">:
            </a><a id="change">phis.append( </a>get_dihedral_numpy(cs[i,j-1], ns[i,j], cs[i,j], n[i<a id="change">,j+1</a>], cs[i,j+1])<a id="change"> )</a>
        phis_count.append( (np.array(phis)&lt;0).sum() )

    return preds[np.argmax(np.array(phis_count))]
</code></pre>