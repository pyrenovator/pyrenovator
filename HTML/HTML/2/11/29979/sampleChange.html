<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def check_equal(a, b):
    eps = 1e-1 &#47&#47 icc error almost reaches 1e-1
    relative_error = <a id="change">(abs(a - b) / abs(b + 1)).mean()</a>
    print(f"relative_error: {relative_error}")
    <a id="change">return </a><a id="change">relative_error &lt; eps</a>

class TestBatchNorm(unittest.TestCase):
    def test_batchnorm(self):
        &#47&#47 ***************************************************************</code></pre><h3>After Change</h3><pre><code class='java'>
    pytorch_arr = torch.Tensor(arr)
    jittor_result = j_layer(jittor_arr)
    pytorch_result = p_layer(pytorch_arr)
    <a id="change">assert </a>np.allclose(pytorch_result.detach().numpy(), jittor_result.numpy(), threshold)

class TestBatchNorm(unittest.TestCase):
    def test_batchnorm(self):</code></pre>