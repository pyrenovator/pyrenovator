<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        quantizer_channels = extract_channels[-1]
        post_quantizer_channels = context_channels[-1]
        extra_args = (
            {"num_residuals": quantizer_num_residuals}<a id="change">
            if </a>quantizer_type == "rvq"<a id="change">
            else </a>{}
        )

        self.quantizer = Quantizer1d(</code></pre><h3>After Change</h3><pre><code class='java'>
        quantizer_channels = extract_channels[-1]
        post_quantizer_channels = context_channels[-1]

        <a id="change">if self.quantizer_type == "timewise"</a>:
            self.quantizer = Quantizer1d(
                channels=quantizer_channels,
                num_groups=quantizer_groups,
                codebook_size=codebook_size,
                expire_threshold=quantizer_expire_threshold,
                num_residuals=quantizer_num_residuals,
            )
        elif <a id="change">self.quantizer_type == "channelwise"</a>:
            assert_message<a id="change"> = </a>"quantizer_split_size required with channelwise type"
            assert quantizer_split_size is not None, assert_message
            self.quantizer<a id="change"> = </a>QuantizerChannelwise1d(
                channels=quantizer_channels,
                split_size=quantizer_split_size,
                num_groups=quantizer_groups,
                codebook_size=codebook_size,
                expire_threshold=quantizer_expire_threshold,
                num_residuals=quantizer_num_residuals,
            )
        else:
            <a id="change">raise ValueError("Quantizer type must be timewise or channelwise"</a><a id="change">)</a>

        self.post_quantizer = nn.Sequential(
            ResnetBlock1d(
                in_channels=quantizer_channels,</code></pre>