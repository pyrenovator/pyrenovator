<html><h3>Pattern ID :13706
</h3><img src='45825443.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def proba_distribution(self, action_logits: th.Tensor,
                           deterministic: bool = False) -&gt; Tuple[th.Tensor, &quotCategoricalDistribution&quot]:
        self.distribution = Categorical(logits=action_logits)
        <a id="change">if deterministic</a>:
            action<a id="change"> = self.mode()</a>
        else:
            action<a id="change"> = self</a><a id="change">.sample()</a>
        <a id="change">return </a>action<a id="change">, self</a>

    def mode(self) -&gt; th.Tensor:
        return th.argmax(self.distribution.probs, dim=1)
</code></pre><h3>After Change</h3><pre><code class='java'>

    def proba_distribution(self, action_logits: th.Tensor) -&gt; &quotCategoricalDistribution&quot:
        self.distribution = Categorical(logits=action_logits)
        <a id="change">return </a>self

    def mode(self) -&gt; th.Tensor:
        return th.argmax(self.distribution.probs, dim=1)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/fdecd512dbeeb8f9009744c56a487c1ae794e637#diff-736dcee564b8b0bdb8ed81b8e701da6b79b7ca4dc0bb0fb4f44777813114358eL224' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45825443</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: fdecd512dbeeb8f9009744c56a487c1ae794e637</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/common/distributions.py</div><div id='m_class'> M Class Name: CategoricalDistribution</div><div id='n_method'> N Class Name: CategoricalDistribution</div><div id='m_method'> M Method Name: proba_distribution(2)</div><div id='n_method'> N Method Name: proba_distribution(3)</div><div id='m_parent_class'> M Parent Class: Distribution</div><div id='n_parent_class'> N Parent Class: Distribution</div><div id='m_file'> M File Name: torchy_baselines/common/distributions.py</div><div id='n_file'> N File Name: torchy_baselines/common/distributions.py</div><div id='m_start'> M Start Line: 224</div><div id='m_end'> M End Line: 230</div><div id='n_start'> N Start Line: 269</div><div id='n_end'> N End Line: 269</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        action_std = th.ones_like(mean_actions) * log_std.exp()
        self.distribution = Normal(mean_actions, action_std)
        <a id="change">if deterministic</a>:
            action<a id="change"> = self.mode()</a>
        else:
            action<a id="change"> = </a><a id="change">self.sample()</a>
        <a id="change">return </a>action<a id="change">, self</a>

    def mode(self) -&gt; th.Tensor:
        return self.distribution.mean
</code></pre><h3>After Change</h3><pre><code class='java'>
        
        action_std = th.ones_like(mean_actions) * log_std.exp()
        self.distribution = Normal(mean_actions, action_std)
        <a id="change">return </a>self

    def mode(self) -&gt; th.Tensor:
        return self.distribution.mean</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/fdecd512dbeeb8f9009744c56a487c1ae794e637#diff-736dcee564b8b0bdb8ed81b8e701da6b79b7ca4dc0bb0fb4f44777813114358eL90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45825442</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: fdecd512dbeeb8f9009744c56a487c1ae794e637</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/common/distributions.py</div><div id='m_class'> M Class Name: DiagGaussianDistribution</div><div id='n_method'> N Class Name: DiagGaussianDistribution</div><div id='m_method'> M Method Name: proba_distribution(3)</div><div id='n_method'> N Method Name: proba_distribution(4)</div><div id='m_parent_class'> M Parent Class: Distribution</div><div id='n_parent_class'> N Parent Class: Distribution</div><div id='m_file'> M File Name: torchy_baselines/common/distributions.py</div><div id='n_file'> N File Name: torchy_baselines/common/distributions.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 141</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def proba_distribution(self, action_logits: th.Tensor,
                           deterministic: bool = False) -&gt; Tuple[th.Tensor, &quotCategoricalDistribution&quot]:
        self.distribution = Categorical(logits=action_logits)
        <a id="change">if deterministic</a>:
            action<a id="change"> = self.mode()</a>
        else:
            action<a id="change"> = </a><a id="change">self.sample()</a>
        <a id="change">return </a>action<a id="change">, self</a>

    def mode(self) -&gt; th.Tensor:
        return th.argmax(self.distribution.probs, dim=1)
</code></pre><h3>After Change</h3><pre><code class='java'>

    def proba_distribution(self, action_logits: th.Tensor) -&gt; &quotCategoricalDistribution&quot:
        self.distribution = Categorical(logits=action_logits)
        <a id="change">return </a>self

    def mode(self) -&gt; th.Tensor:
        return th.argmax(self.distribution.probs, dim=1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/fdecd512dbeeb8f9009744c56a487c1ae794e637#diff-736dcee564b8b0bdb8ed81b8e701da6b79b7ca4dc0bb0fb4f44777813114358eL223' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45825446</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: fdecd512dbeeb8f9009744c56a487c1ae794e637</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/common/distributions.py</div><div id='m_class'> M Class Name: CategoricalDistribution</div><div id='n_method'> N Class Name: CategoricalDistribution</div><div id='m_method'> M Method Name: proba_distribution(2)</div><div id='n_method'> N Method Name: proba_distribution(3)</div><div id='m_parent_class'> M Parent Class: Distribution</div><div id='n_parent_class'> N Parent Class: Distribution</div><div id='m_file'> M File Name: torchy_baselines/common/distributions.py</div><div id='n_file'> N File Name: torchy_baselines/common/distributions.py</div><div id='m_start'> M Start Line: 224</div><div id='m_end'> M End Line: 230</div><div id='n_start'> N Start Line: 269</div><div id='n_end'> N End Line: 269</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        variance = th.mm(latent_sde ** 2, self.get_std(log_std) ** 2)
        self.distribution = Normal(mean_actions, th.sqrt(variance + self.epsilon))

        <a id="change">if deterministic</a>:
            action<a id="change"> = self.mode()</a>
        else:
            action<a id="change"> = </a><a id="change">self.sample(</a>latent_sde<a id="change">)</a>
        <a id="change">return </a>action<a id="change">, self</a>

    def mode(self) -&gt; th.Tensor:
        action = self.distribution.mean
        if self.bijector is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
        self._latent_sde = latent_sde if self.learn_features else latent_sde.detach()
        variance = th.mm(latent_sde ** 2, self.get_std(log_std) ** 2)
        self.distribution = Normal(mean_actions, th.sqrt(variance + self.epsilon))
        <a id="change">return </a>self

    def get_action(self, deterministic: bool = False) -&gt; th.Tensor:
        if deterministic:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/fdecd512dbeeb8f9009744c56a487c1ae794e637#diff-736dcee564b8b0bdb8ed81b8e701da6b79b7ca4dc0bb0fb4f44777813114358eL359' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45825445</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: fdecd512dbeeb8f9009744c56a487c1ae794e637</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/common/distributions.py</div><div id='m_class'> M Class Name: StateDependentNoiseDistribution</div><div id='n_method'> N Class Name: StateDependentNoiseDistribution</div><div id='m_method'> M Method Name: proba_distribution(4)</div><div id='n_method'> N Method Name: proba_distribution(5)</div><div id='m_parent_class'> M Parent Class: Distribution</div><div id='n_parent_class'> N Parent Class: Distribution</div><div id='m_file'> M File Name: torchy_baselines/common/distributions.py</div><div id='n_file'> N File Name: torchy_baselines/common/distributions.py</div><div id='m_start'> M Start Line: 362</div><div id='m_end'> M End Line: 381</div><div id='n_start'> N Start Line: 417</div><div id='n_end'> N End Line: 420</div><BR>