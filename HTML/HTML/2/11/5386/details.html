<html><h3>Pattern ID :5386
</h3><img src='19196295.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        assert len(reader) == 18

    def test_load_data(self):
        <a id="change">pass</a>

    def test_load_ann(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(reader) == 18

    def test_load_data(self):
        data<a id="change"> = reader</a><a id="change">.load_data(0</a><a id="change">)</a>
        data_1<a id="change"> = reader</a><a id="change">.load_data(
            0</a><a id="change">, leads=0, sampfrom=1000, sampto=5000, data_format="plain", units="μV"
        )</a>
        assert data.ndim == 2
        assert data_1.shape == (1, 4000)
        assert np.allclose(data[0, 1000:5000], data_1 / 1000, atol=1e-2)
        data_1<a id="change"> = reader</a><a id="change">.load_data(
            0</a><a id="change">, leads=0, data_format="channel_last", fs=2 * reader.fs
        )</a>
        assert data_1.shape == (2 * data.shape[1], 1)

    def test_load_ann(self):
        rec = reader.diagnoses_records_list["AFp"][0]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/ec2d0d633644b2cf01d7486a60d94cb5b2e68dbd#diff-4d22651f5644d610f0f42284d18a72b5cb2bc20131ee1983eed06fc16116b5aaL25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19196295</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: ec2d0d633644b2cf01d7486a60d94cb5b2e68dbd</div><div id='time'> Time: 2022-11-26</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: test/test_databases/test_cpsc2021.py</div><div id='m_class'> M Class Name: TestCPSC2021</div><div id='n_method'> N Class Name: TestCPSC2021</div><div id='m_method'> M Method Name: test_load_data(1)</div><div id='n_method'> N Method Name: test_load_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_databases/test_cpsc2021.py</div><div id='n_file'> N File Name: test/test_databases/test_cpsc2021.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert len(reader) == 2000

    def test_load_data(self):
        <a id="change">pass</a>

    def test_load_ann(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(reader) == 2000

    def test_load_data(self):
        data<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">)</a>
        data_1<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">, data_format="flat", units="μV")</a>
        assert data.ndim == 2 and data.shape[0] == 1
        assert data_1.ndim == 1 and data_1.shape[0] == data.shape[1]
        assert np.allclose(data, data_1.reshape(1, -1) / 1000, atol=1e-2)
        data_1<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">, data_format="flat", fs=2 * reader.fs)</a>
        assert data_1.shape[0] == 2 * data.shape[1]

        with pytest.raises(ValueError, match="Invalid `data_format`: xxx"):
            reader.load_data(0, data_format="xxx")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/7565d50a3add7a43f7be13337255b7004834b7ee#diff-d30ca9ecfc60acca1ef55c6cdbfb1d9e798081817ce918933df7658a2754f828L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19196300</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: 7565d50a3add7a43f7be13337255b7004834b7ee</div><div id='time'> Time: 2022-11-26</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: test/test_databases/test_cpsc2019.py</div><div id='m_class'> M Class Name: TestCPSC2019</div><div id='n_method'> N Class Name: TestCPSC2019</div><div id='m_method'> M Method Name: test_load_data(1)</div><div id='n_method'> N Method Name: test_load_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_databases/test_cpsc2019.py</div><div id='n_file'> N File Name: test/test_databases/test_cpsc2019.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert len(reader) == 18

    def test_load_data(self):
        <a id="change">pass</a>

    def test_load_ann(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(reader) == 18

    def test_load_data(self):
        data<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">)</a>
        data_1<a id="change"> = </a><a id="change">reader.load_data(
            0</a><a id="change">, leads=0, sampfrom=1000, sampto=5000, data_format="plain", units="μV"
        )</a>
        assert data.ndim == 2
        assert data_1.shape == (1, 4000)
        assert np.allclose(data[0, 1000:5000], data_1 / 1000, atol=1e-2)
        data_1<a id="change"> = </a><a id="change">reader.load_data(
            0</a><a id="change">, leads=0, data_format="channel_last", fs=2 * reader.fs
        )</a>
        assert data_1.shape == (2 * data.shape[1], 1)

    def test_load_ann(self):
        rec = reader.diagnoses_records_list["AFp"][0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/ec2d0d633644b2cf01d7486a60d94cb5b2e68dbd#diff-4d22651f5644d610f0f42284d18a72b5cb2bc20131ee1983eed06fc16116b5aaL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19196302</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: ec2d0d633644b2cf01d7486a60d94cb5b2e68dbd</div><div id='time'> Time: 2022-11-26</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: test/test_databases/test_cpsc2021.py</div><div id='m_class'> M Class Name: TestCPSC2021</div><div id='n_method'> N Class Name: TestCPSC2021</div><div id='m_method'> M Method Name: test_load_data(1)</div><div id='n_method'> N Method Name: test_load_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_databases/test_cpsc2021.py</div><div id='n_file'> N File Name: test/test_databases/test_cpsc2021.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert len(reader) == 200

    def test_load_data(self):
        <a id="change">pass</a>

    def test_load_ann(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(reader) == 78

    def test_load_data(self):
        data<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">)</a>
        assert data.ndim == 2
        data<a id="change"> = </a><a id="change">reader.load_data(0</a><a id="change">, leads=0, data_format="flat")</a>
        assert data.ndim == 1
        data<a id="change"> = </a><a id="change">reader.load_data(
            0</a><a id="change">, leads=0, data_format="flat", sampfrom=1000, sampto=2000
        )</a>
        assert data.shape == (1000,)

    def test_load_ecg_data(self):
        rec = reader.ecg_records[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/ca1f0f161611729ae6f2f1f584258324891c9bac#diff-4d743afe57f22264a7b2b1809ff5a51f319345c6f7aa64c365dc31fb8228c571L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19196303</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: ca1f0f161611729ae6f2f1f584258324891c9bac</div><div id='time'> Time: 2022-11-25</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: test/test_databases/test_apnea_ecg.py</div><div id='m_class'> M Class Name: TestApneaECG</div><div id='n_method'> N Class Name: TestApneaECG</div><div id='m_method'> M Method Name: test_load_data(1)</div><div id='n_method'> N Method Name: test_load_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_databases/test_apnea_ecg.py</div><div id='n_file'> N File Name: test/test_databases/test_apnea_ecg.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert len(reader) == 9

    def test_load_data(self):
        <a id="change">pass</a>

    def test_load_ann(self):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert isinstance(psg_data[1], Real) and psg_data[1] &gt; 0

    def test_load_data(self):
        data<a id="change">, fs = </a><a id="change">reader.load_data(0</a><a id="change">)</a>
        assert isinstance(data, np.ndarray)
        assert data.ndim == 2
        assert isinstance(fs, Real) and fs &gt; 0
        data_1<a id="change">, fs_1 = </a><a id="change">reader.load_data(0</a><a id="change">, fs=500, data_format="flat")</a>
        assert isinstance(data_1, np.ndarray)
        assert data_1.ndim == 1
        assert fs_1 == 500
        data_1<a id="change">, fs_1 = </a><a id="change">reader.load_data(0</a><a id="change">, sampfrom=10, sampto=20, data_format="flat")</a>
        assert fs_1 == fs
        assert data_1.shape[0] == int(10 * fs)
        assert np.allclose(data_1, data[0, int(10 * fs) : int(20 * fs)])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/0f62ca0a504b90ec8b7674a38ac5d08157896d16#diff-e78dcc55de0f2408ee4681c92b7b12c2cf2d58301f80b33458e652e8095dda5bL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19196298</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: 0f62ca0a504b90ec8b7674a38ac5d08157896d16</div><div id='time'> Time: 2022-12-08</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: test/test_databases/test_shhs.py</div><div id='m_class'> M Class Name: TestSHHS</div><div id='n_method'> N Class Name: TestSHHS</div><div id='m_method'> M Method Name: test_load_data(1)</div><div id='n_method'> N Method Name: test_load_data(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_databases/test_shhs.py</div><div id='n_file'> N File Name: test/test_databases/test_shhs.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 82</div><div id='n_end'> N End Line: 93</div><BR>