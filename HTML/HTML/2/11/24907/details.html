<html><h3>Pattern ID :24907
</h3><img src='76734672.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">))</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid error: %.2f" % summarize_average(valid_stats["error"]))

</code></pre><h3>After Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        global train_loss
        train_loss<a id="change"> = </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">)</a>
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a>train_loss<a id="change">)</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid error: %.2f" % summarize_average(valid_stats["error"]))

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/fba15c4a2cc8461ebd2e23979969162c6c529a99#diff-148cca07ff23cecb21427fac73250298b93fe4e33c6652b454c3365d910bc849L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734672</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: fba15c4a2cc8461ebd2e23979969162c6c529a99</div><div id='time'> Time: 2020-05-21</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/speaker_identification/example_spkid_experiment.py</div><div id='m_class'> M Class Name: SpkIdBrain</div><div id='n_method'> N Class Name: SpkIdBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/speaker_identification/example_spkid_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/speaker_identification/example_spkid_experiment.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats=None):
        print("Epoch %d complete" % epoch)
        print("Train loss: %.2f" % summarize_average(train_stats["loss"]))
        <a id="change">print(</a><a id="change">"Valid loss: %.2f"</a><a id="change"> % </a><a id="change">summarize_average(valid_stats["loss"]</a><a id="change">))</a>


train_set = params.train_loader()
valid_set = params.valid_loader()</code></pre><h3>After Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats=None):
        print("Epoch %d complete" % epoch)
        print("Train loss: %.2f" % summarize_average(train_stats["loss"]))
        val_loss<a id="change"> = </a><a id="change">summarize_average(valid_stats["loss"]</a><a id="change">)</a>
        <a id="change">print(</a><a id="change">"Valid loss: %.2f"</a><a id="change"> % </a>val_loss<a id="change">)</a>
        perplexity = 2 ** (val_loss / math.log(2))
        print("Perplexity: %.2f" % perplexity)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/ac96a1dded8582d63d71db9aa5fb0f9da60759d0#diff-fc006014d60816d56aafc3d9aaab18435d17b8ce02c5a73f9ec2f3ab8894506eL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734673</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: ac96a1dded8582d63d71db9aa5fb0f9da60759d0</div><div id='time'> Time: 2020-07-06</div><div id='author'> Author: jjery2243542@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='m_class'> M Class Name: LMBrain</div><div id='n_method'> N Class Name: LMBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">))</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid PER: %.2f" % summarize_error_rate(valid_stats["PER"]))

</code></pre><h3>After Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        global train_loss
        train_loss<a id="change"> = </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">)</a>
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a>train_loss<a id="change">)</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid PER: %.2f" % summarize_error_rate(valid_stats["PER"]))

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/fba15c4a2cc8461ebd2e23979969162c6c529a99#diff-481d8600489efefd8695156645b3c87237be72eddf5343364dc52f77db1c078dL42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734677</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: fba15c4a2cc8461ebd2e23979969162c6c529a99</div><div id='time'> Time: 2020-05-21</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/ASR_CTC/example_asr_ctc_experiment.py</div><div id='m_class'> M Class Name: CTCBrain</div><div id='n_method'> N Class Name: CTCBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/ASR_CTC/example_asr_ctc_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/ASR_CTC/example_asr_ctc_experiment.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if params.use_tensorboard:
            train_logger.log_stats({"Epoch": epoch}, train_stats, valid_stats)
        print("Completed epoch %d" % epoch)
        <a id="change">print(</a><a id="change">"Train loss: %.3f"</a><a id="change"> % </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">))</a>
        print("Valid loss: %.3f" % summarize_average(valid_stats["loss"]))


train_set = params.train_loader()</code></pre><h3>After Change</h3><pre><code class='java'>
            train_logger.log_stats({"Epoch": epoch}, train_stats, valid_stats)
        print("Completed epoch %d" % epoch)
        global train_loss
        train_loss<a id="change"> = </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">)</a>
        <a id="change">print(</a><a id="change">"Train loss: %.3f"</a><a id="change"> % </a>train_loss<a id="change">)</a>
        print("Valid loss: %.3f" % summarize_average(valid_stats["loss"]))


train_set = params.train_loader()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/fba15c4a2cc8461ebd2e23979969162c6c529a99#diff-4dabce28acaaa9d131f74c405b8c868006644de66c4bb77bce06f474ad3afaabL52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734651</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: fba15c4a2cc8461ebd2e23979969162c6c529a99</div><div id='time'> Time: 2020-05-21</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/autoencoder/example_auto_experiment.py</div><div id='m_class'> M Class Name: AutoBrain</div><div id='n_method'> N Class Name: AutoBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/autoencoder/example_auto_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/autoencoder/example_auto_experiment.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        print("Train loss: %.3f" % summarize_average(train_stats["loss"]))
        print("Valid loss: %.3f" % summarize_average(valid_stats["loss"]))
        print("Valid PESQ: %.3f" % summarize_average(valid_stats["pesq"]))
        <a id="change">print(</a><a id="change">"Valid STOI: %.3f"</a><a id="change"> % </a><a id="change">summarize_average(valid_stats["stoi"]</a><a id="change">))</a>
        print(len(valid_stats["pesq"]))

    def write_wavs(self, predictions, inputs, epoch):
        ids, wavs, lens = inputs</code></pre><h3>After Change</h3><pre><code class='java'>

    def on_epoch_end(self, epoch, train_stats, valid_stats):
        epoch_pesq = summarize_average(valid_stats["pesq"])
        epoch_stoi<a id="change"> = </a><a id="change">summarize_average(valid_stats["stoi"]</a><a id="change">)</a>

        if params.use_tensorboard:
            train_logger.log_stats(
                {
                    "Epoch": epoch,
                    "Valid PESQ": epoch_pesq,
                    "Valid STOI": epoch_stoi,
                },
                train_stats,
                valid_stats,
            )

        params.checkpointer.save_and_keep_only(
            meta={"PESQ": epoch_pesq},
            importance_keys=[ckpt_recency, lambda c: c.meta["PESQ"]],
        )

        print("Completed epoch %d" % epoch)
        print("Train loss: %.3f" % summarize_average(train_stats["loss"]))
        print("Valid loss: %.3f" % summarize_average(valid_stats["loss"]))
        print("Valid PESQ: %.3f" % epoch_pesq)
        <a id="change">print(</a><a id="change">"Valid STOI: %.3f"</a><a id="change"> % </a>epoch_stoi<a id="change">)</a>

    def write_wavs(self, predictions, inputs, epoch):
        ids, wavs, lens = inputs
        predictions = predictions.cpu()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/3fc1ae12a34dbcd228bed7a14877e6fa1a8b2eb2#diff-441fc9d062686b40e52cc1568518dc76f17324dbff72a88e27c2132f6e4ee6ecL137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734664</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 3fc1ae12a34dbcd228bed7a14877e6fa1a8b2eb2</div><div id='time'> Time: 2020-06-24</div><div id='author'> Author: jerrygood0703@gmail.com</div><div id='file'> File Name: recipes/DNS/enhance_spectral_map/experiment.py</div><div id='m_class'> M Class Name: SEBrain</div><div id='n_method'> N Class Name: SEBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/DNS/enhance_spectral_map/experiment.py</div><div id='n_file'> N File Name: recipes/DNS/enhance_spectral_map/experiment.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 139</div><div id='n_end'> N End Line: 162</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats=None):
        print("Epoch %d complete" % epoch)
        print("Train loss: %.2f" % summarize_average(train_stats["loss"]))
        <a id="change">print(</a><a id="change">"Valid loss: %.2f"</a><a id="change"> % </a><a id="change">summarize_average(valid_stats["loss"]</a><a id="change">))</a>


train_set = params.train_loader()
valid_set = params.valid_loader()</code></pre><h3>After Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats=None):
        print("Epoch %d complete" % epoch)
        print("Train loss: %.2f" % summarize_average(train_stats["loss"]))
        val_loss = <a id="change">summarize_average(valid_stats["loss"]</a><a id="change">)</a>
        print("Valid loss: %.2f" % val_loss)
        perplexity<a id="change"> = </a>2 ** (val_loss / math.log(2))
        <a id="change">print(</a><a id="change">"Valid perplexity: %.2f"</a><a id="change"> % </a>perplexity<a id="change">)</a>


train_set = params.train_loader()
valid_set = params.valid_loader()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/f83a8f37d9ae0fd75ac73a2ac5a1b8cc0864a93b#diff-fc006014d60816d56aafc3d9aaab18435d17b8ce02c5a73f9ec2f3ab8894506eL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734654</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: f83a8f37d9ae0fd75ac73a2ac5a1b8cc0864a93b</div><div id='time'> Time: 2020-07-06</div><div id='author'> Author: jjery2243542@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='m_class'> M Class Name: LMBrain</div><div id='n_method'> N Class Name: LMBrain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/LM_RNN/example_lm_rnn_experiment.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">))</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid error: %.2f" % summarize_average(valid_stats["error"]))

</code></pre><h3>After Change</h3><pre><code class='java'>
    def on_epoch_end(self, epoch, train_stats, valid_stats):
        print("Epoch %d complete" % epoch)
        global train_loss
        train_loss<a id="change"> = </a><a id="change">summarize_average(train_stats["loss"]</a><a id="change">)</a>
        <a id="change">print(</a><a id="change">"Train loss: %.2f"</a><a id="change"> % </a>train_loss<a id="change">)</a>
        print("Valid loss: %.2f" % summarize_average(valid_stats["loss"]))
        print("Valid error: %.2f" % summarize_average(valid_stats["error"]))

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/fba15c4a2cc8461ebd2e23979969162c6c529a99#diff-7c22a58f96fdc0961b1fd1ff3df2b828f9db3f5f8f830024bc22bdb45e6b0260L39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76734670</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: fba15c4a2cc8461ebd2e23979969162c6c529a99</div><div id='time'> Time: 2020-05-21</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: recipes/minimal_examples/neural_networks/ASR_DNN_HMM/example_asr_dnn_hmm_experiment.py</div><div id='m_class'> M Class Name: ASR_Brain</div><div id='n_method'> N Class Name: ASR_Brain</div><div id='m_method'> M Method Name: on_epoch_end(4)</div><div id='n_method'> N Method Name: on_epoch_end(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/minimal_examples/neural_networks/ASR_DNN_HMM/example_asr_dnn_hmm_experiment.py</div><div id='n_file'> N File Name: recipes/minimal_examples/neural_networks/ASR_DNN_HMM/example_asr_dnn_hmm_experiment.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 48</div><BR>