<html><h3>Pattern ID :3683
</h3><img src='13915668.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, <a id="change">img</a>, label, <a id="change">original_img</a>, <a id="change">log_dir</a>, <a id="change">show_imgs</a><a id="change">, additional_args=traj_info)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs,
                                 additional_args=traj_info)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, <a id="change">img</a>, label, <a id="change">original_img</a>, <a id="change">log_dir</a>, <a id="change">show_imgs</a><a id="change">, additional_args=traj_info)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
    network = prepare_network(venv)
    images, labels = process_data(venv)

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        print(&quotoutput&quot, output)
        original_img = img[0].permute(1, 2, 0).numpy()
        label = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, <a id="change">img</a>, label, <a id="change">original_img</a>, <a id="change">log_dir</a>, show_imgs<a id="change">)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, <a id="change">img</a>, label, <a id="change">original_img</a>, <a id="change">log_dir</a>, show_imgs<a id="change">)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/6f08d52461178312bf98d71df399dc1d117d5515#diff-04d7c4d87a42834b2102127235c10394e6569c887d9c06f1c9ac178162f836d5L326' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13915668</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 6f08d52461178312bf98d71df399dc1d117d5515</div><div id='time'> Time: 2020-09-12</div><div id='author'> Author: RPC2@users.noreply.github.com</div><div id='file'> File Name: src/il_representations/scripts/interpret.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(9)</div><div id='n_method'> N Method Name: run(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/interpret.py</div><div id='n_file'> N File Name: src/il_representations/scripts/interpret.py</div><div id='m_start'> M Start Line: 328</div><div id='m_end'> M End Line: 354</div><div id='n_start'> N Start Line: 326</div><div id='n_end'> N End Line: 350</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    network = prepare_network(venv)
    images, labels = process_data(venv)

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        traj_info = None
        output = network(img)
        print(&quotoutput&quot, output)
        <a id="change">original_img</a> = img[0].permute(1, 2, 0).numpy()
        label = int(label)
        img.requires_grad = True

        <a id="change">log_dir</a> = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">, additional_args=traj_info)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs,
                                 additional_args=traj_info)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">, additional_args=traj_info)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
    network = prepare_network(venv)
    images, labels = process_data(venv)

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        print(&quotoutput&quot, output)
        <a id="change">original_img</a> = img[0].permute(1, 2, 0).numpy()
        label = int(label)
        img.requires_grad = True

        <a id="change">log_dir</a> = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/6f08d52461178312bf98d71df399dc1d117d5515#diff-04d7c4d87a42834b2102127235c10394e6569c887d9c06f1c9ac178162f836d5L324' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13915669</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 6f08d52461178312bf98d71df399dc1d117d5515</div><div id='time'> Time: 2020-09-12</div><div id='author'> Author: RPC2@users.noreply.github.com</div><div id='file'> File Name: src/il_representations/scripts/interpret.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(9)</div><div id='n_method'> N Method Name: run(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/interpret.py</div><div id='n_file'> N File Name: src/il_representations/scripts/interpret.py</div><div id='m_start'> M Start Line: 328</div><div id='m_end'> M End Line: 354</div><div id='n_start'> N Start Line: 326</div><div id='n_end'> N End Line: 350</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def run(show_imgs, saliency, integrated_gradient, deep_lift, layer_conductance):
    &#47&#47 Load the network and images
    images, labels = process_data()
    <a id="change">network</a> = prepare_network()

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            saliency_grads = <a id="change">saliency_(</a>network, img, label<a id="change">)</a>
            saliency_viz = viz.visualize_image_attr(saliency_grads, original_img, method="blended_heat_map",
                                                    sign="absolute_value",
                                                    show_colorbar=True,
                                                    title="Overlayed Gradient Magnitudes")
            save_img(figure_2_numpy(saliency_viz[0]), &quotsaliency&quot, log_dir, show=show_imgs)

        if integrated_gradient:
            ig = integrated_gradient_(network, img.contiguous(), label)
            ig_viz = viz.visualize_image_attr(ig, original_img, method="blended_heat_map", sign="all",
                                              show_colorbar=True,
                                              title="Overlayed Integrated Gradients")
            save_img(figure_2_numpy(ig_viz[0]), &quotintegrated_gradients&quot, log_dir, show=show_imgs)

        if deep_lift:
            dl = <a id="change">deep_lift_(</a>network, img, label<a id="change">)</a>
            dl_viz = viz.visualize_image_attr(dl, original_img, method="blended_heat_map", sign="all",
                                              show_colorbar=True,
                                              title="Overlayed DeepLift")
            save_img(figure_2_numpy(dl_viz[0]), &quotdeep_lift&quot, log_dir, show=show_imgs)</code></pre><h3>After Change</h3><pre><code class='java'>
def run(show_imgs, saliency, integrated_gradient, deep_lift, layer_conductance, layer_gradcam):
    &#47&#47 Load the network and images
    images, labels = process_data()
    <a id="change">network</a> = prepare_network()

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if integrated_gradient:
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if layer_conductance:  &#47&#47 TODO: How to interpret this?
            lc = layer_conductance_(network, network.encoder[0], img, label)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/413c3358f4e777453956bd37f3246daa50088b03#diff-04d7c4d87a42834b2102127235c10394e6569c887d9c06f1c9ac178162f836d5L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13915522</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 413c3358f4e777453956bd37f3246daa50088b03</div><div id='time'> Time: 2020-08-30</div><div id='author'> Author: RPC2@users.noreply.github.com</div><div id='file'> File Name: src/il_representations/scripts/interpret.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(6)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/interpret.py</div><div id='n_file'> N File Name: src/il_representations/scripts/interpret.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 172</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 191</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def run(show_imgs, saliency, integrated_gradient, deep_lift, layer_conductance):
    &#47&#47 Load the network and images
    images, labels = process_data()
    <a id="change">network</a> = prepare_network()

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            saliency_grads = <a id="change">saliency_(</a>network, img, label<a id="change">)</a>
            saliency_viz = viz.visualize_image_attr(saliency_grads, original_img, method="blended_heat_map",
                                                    sign="absolute_value",
                                                    show_colorbar=True,
                                                    title="Overlayed Gradient Magnitudes")
            save_img(figure_2_numpy(saliency_viz[0]), &quotsaliency&quot, log_dir, show=show_imgs)

        if integrated_gradient:
            ig = integrated_gradient_(network, img.contiguous(), label)
            ig_viz = viz.visualize_image_attr(ig, original_img, method="blended_heat_map", sign="all",
                                              show_colorbar=True,
                                              title="Overlayed Integrated Gradients")
            save_img(figure_2_numpy(ig_viz[0]), &quotintegrated_gradients&quot, log_dir, show=show_imgs)

        if deep_lift:
            dl = <a id="change">deep_lift_(</a>network, img, label<a id="change">)</a>
            dl_viz = viz.visualize_image_attr(dl, original_img, method="blended_heat_map", sign="all",
                                              show_colorbar=True,
                                              title="Overlayed DeepLift")
            save_img(figure_2_numpy(dl_viz[0]), &quotdeep_lift&quot, log_dir, show=show_imgs)</code></pre><h3>After Change</h3><pre><code class='java'>
def run(show_imgs, saliency, integrated_gradient, deep_lift, layer_conductance, layer_gradcam):
    &#47&#47 Load the network and images
    images, labels = process_data()
    <a id="change">network</a> = prepare_network()

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if integrated_gradient:
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if layer_conductance:  &#47&#47 TODO: How to interpret this?
            lc = layer_conductance_(network, network.encoder[0], img, label)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/b3735cce2d58bf4603b822323ce9acec2b8df386#diff-04d7c4d87a42834b2102127235c10394e6569c887d9c06f1c9ac178162f836d5L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13915532</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: b3735cce2d58bf4603b822323ce9acec2b8df386</div><div id='time'> Time: 2020-08-30</div><div id='author'> Author: RPC2@users.noreply.github.com</div><div id='file'> File Name: src/il_representations/scripts/interpret.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(6)</div><div id='n_method'> N Method Name: run(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/interpret.py</div><div id='n_file'> N File Name: src/il_representations/scripts/interpret.py</div><div id='m_start'> M Start Line: 140</div><div id='m_end'> M End Line: 172</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 191</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        layer_activation, layer_kwargs):
    &#47&#47 Load the network and images
    venv = auto_env.load_vec_env()
    <a id="change">network</a> = prepare_network(venv)
    images, labels = process_data(venv)

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        traj_info = None
        output = network(img)
        print(&quotoutput&quot, output)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">, additional_args=traj_info)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs,
                                 additional_args=traj_info)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">, additional_args=traj_info)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
        layer_activation, layer_kwargs):
    &#47&#47 Load the network and images
    venv = auto_env.load_vec_env()
    <a id="change">network</a> = prepare_network(venv)
    images, labels = process_data(venv)

    for <a id="change">img</a>, label in zip(images, labels):
        &#47&#47 Get policy prediction
        output = network(img)
        print(&quotoutput&quot, output)
        original_img = img[0].permute(1, 2, 0).numpy()
        <a id="change">label</a> = int(label)
        img.requires_grad = True

        log_dir = interp_ex.observers[0].dir
        save_img(img[0], &quotoriginal_image&quot, log_dir, show=False)

        if saliency:
            <a id="change">saliency_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if integrated_gradient:
            &#47&#47 integrated_gradient_(network, img, label, original_img, log_dir, show_imgs)
            integrated_gradient_(network, img.contiguous(), label, original_img, log_dir, show_imgs)

        if deep_lift:
            <a id="change">deep_lift_(</a>network, img, label, original_img, log_dir, show_imgs<a id="change">)</a>

        if layer_conductance:
            module, idx = layer_kwargs[&quotlayer_conductance&quot][&quotmodule&quot], \
                          layer_kwargs[&quotlayer_conductance&quot][&quotlayer_idx&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/390b698f05df909d47075a183bda91db17680ff4#diff-04d7c4d87a42834b2102127235c10394e6569c887d9c06f1c9ac178162f836d5L324' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13915678</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 390b698f05df909d47075a183bda91db17680ff4</div><div id='time'> Time: 2020-09-12</div><div id='author'> Author: RPC2@users.noreply.github.com</div><div id='file'> File Name: src/il_representations/scripts/interpret.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(9)</div><div id='n_method'> N Method Name: run(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/interpret.py</div><div id='n_file'> N File Name: src/il_representations/scripts/interpret.py</div><div id='m_start'> M Start Line: 328</div><div id='m_end'> M End Line: 354</div><div id='n_start'> N Start Line: 326</div><div id='n_end'> N End Line: 350</div><BR>