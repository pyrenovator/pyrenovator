<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    return &quot &quot.join(input_tokens)

def text_infilling(input_sequence, num_text_spans, mask_token, thingtalk):
    all_entities<a id="change"> = </a><a id="change">[]</a>
    all_device_tokens = []
    if thingtalk:
        all_entities = quoted_pattern_maybe_space.findall(thingtalk)
        for token in device_pattern.findall(thingtalk):</code></pre><h3>After Change</h3><pre><code class='java'>
    if thingtalk:
        all_entities = quoted_pattern_maybe_space.findall(thingtalk)
        
        <a id="change">for </a>entity in all_entities<a id="change">:
            </a>entity_tokens<a id="change"> = entity</a><a id="change">.split(&quot &quot</a><a id="change">)</a>
            beg = find_index(input_tokens, entity_tokens)
            if <a id="change">beg != -1</a>:
                all_entity_spans.append((beg, beg<a id="change">+</a><a id="change">len(</a>entity_tokens<a id="change">)</a>))
        
        for token in device_pattern.findall(thingtalk):
            all_device_tokens.extend(token.split(&quot.&quot))</code></pre>