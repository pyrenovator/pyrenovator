<html><h3>Pattern ID :5570
</h3><img src='19700975.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    if count and data is None:
        with pytest.raises(RuntimeError) as excinfo:
            <a id="change">FlowProposal.resume(</a>proposal, None, {}<a id="change">)</a>
        assert &quotCould not resume&quot in str(excinfo.value)
    else:
        FlowProposal.resume(proposal, None, {})
        if data:</code></pre><h3>After Change</h3><pre><code class='java'>
    proposal.training_data = data
    proposal.training_count = count
    proposal.check_state = MagicMock()
    <a id="change">model = </a><a id="change">MagicMock()</a>
    if count and data is None:
        with pytest.raises(RuntimeError) as excinfo, \
             <a id="change">patch(&quotnessai.proposal.base.Proposal.resume&quot</a><a id="change">) as mock:
            </a><a id="change">FlowProposal.resume(</a>proposal, <a id="change">model</a>, {}<a id="change">)</a>
        assert &quotCould not resume&quot in str(excinfo.value)
    else:
        with patch(&quotnessai.proposal.base.Proposal.resume&quot) as mock:
            FlowProposal.resume(proposal, model, {})
        if data:
            proposal.check_state.assert_called_once_with(data)
    <a id="change">mock.assert_called_once_with(model</a><a id="change">)</a>


@pytest.mark.parametrize(&quotpopulated&quot, [False, True])
def test_get_state(proposal, populated):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/dad068f0491ce65384ed40898cc5034d4f335163#diff-9e6b5b5948180fe141f4ce5426461303cd7d313be047bbff72657adbd5aea611L110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19700975</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: dad068f0491ce65384ed40898cc5034d4f335163</div><div id='time'> Time: 2022-04-02</div><div id='author'> Author: michaeljw1@googlemail.com</div><div id='file'> File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_resume_w_update_bounds(3)</div><div id='n_method'> N Method Name: test_resume_w_update_bounds(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='n_file'> N File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_start'> M Start Line: 110</div><div id='m_end'> M End Line: 113</div><div id='n_start'> N Start Line: 114</div><div id='n_end'> N End Line: 125</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            FlowProposal.resume(proposal, None, {})
        assert &quotCould not resume&quot in str(excinfo.value)
    else:
        <a id="change">FlowProposal.resume(</a>proposal, None, {}<a id="change">)</a>
        if data:
            proposal.check_state.assert_called_once_with(data)

</code></pre><h3>After Change</h3><pre><code class='java'>
    proposal.training_data = data
    proposal.training_count = count
    proposal.check_state = MagicMock()
    <a id="change">model = </a><a id="change">MagicMock()</a>
    if count and data is None:
        with pytest.raises(RuntimeError) as excinfo, \
             patch(&quotnessai.proposal.base.Proposal.resume&quot) as mock:
            FlowProposal.resume(proposal, model, {})
        assert &quotCould not resume&quot in str(excinfo.value)
    else:
        <a id="change">with patch(&quotnessai.proposal.base.Proposal.resume&quot</a><a id="change">) as mock:
            </a><a id="change">FlowProposal.resume(</a>proposal, model, {}<a id="change">)</a>
        if data:
            proposal.check_state.assert_called_once_with(data)
    <a id="change">mock.assert_called_once_with(</a>model<a id="change">)</a>


@pytest.mark.parametrize(&quotpopulated&quot, [False, True])
def test_get_state(proposal, populated):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/dad068f0491ce65384ed40898cc5034d4f335163#diff-9e6b5b5948180fe141f4ce5426461303cd7d313be047bbff72657adbd5aea611L97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19700976</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: dad068f0491ce65384ed40898cc5034d4f335163</div><div id='time'> Time: 2022-04-02</div><div id='author'> Author: michaeljw1@googlemail.com</div><div id='file'> File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_resume_w_update_bounds(3)</div><div id='n_method'> N Method Name: test_resume_w_update_bounds(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='n_file'> N File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_start'> M Start Line: 110</div><div id='m_end'> M End Line: 113</div><div id='n_start'> N Start Line: 114</div><div id='n_end'> N End Line: 125</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    proposal.mask = None
    proposal.update_bounds = False
    proposal.weights_file = None
    <a id="change">FlowProposal.resume(</a>proposal, None, {}, &quotweights.pt&quot<a id="change">)</a>
    proposal.initialise.assert_called_once()
    proposal.flow.reload_weights.assert_called_once_with(&quotweights.pt&quot)

</code></pre><h3>After Change</h3><pre><code class='java'>
    proposal.mask = None
    proposal.update_bounds = False
    proposal.weights_file = None
    <a id="change">model = </a><a id="change">MagicMock()</a>
    <a id="change">with patch(&quotnessai.proposal.base.Proposal.resume&quot</a><a id="change">) as mock:
        </a><a id="change">FlowProposal.resume(</a>proposal, model, {}<a id="change">, weights_file=&quotweights.pt&quot)</a>
    <a id="change">mock.assert_called_once_with(</a>model<a id="change">)</a>
    osexist.assert_called_once_with(&quotweights.pt&quot)
    proposal.initialise.assert_called_once()
    proposal.flow.reload_weights.assert_called_once_with(&quotweights.pt&quot)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/dad068f0491ce65384ed40898cc5034d4f335163#diff-9e6b5b5948180fe141f4ce5426461303cd7d313be047bbff72657adbd5aea611L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19700977</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: dad068f0491ce65384ed40898cc5034d4f335163</div><div id='time'> Time: 2022-04-02</div><div id='author'> Author: michaeljw1@googlemail.com</div><div id='file'> File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_resume_w_weights(2)</div><div id='n_method'> N Method Name: test_resume_w_weights(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='n_file'> N File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_start'> M Start Line: 90</div><div id='m_end'> M End Line: 90</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 97</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    proposal.mask = [1, 0]
    proposal.update_bounds = False
    proposal.weights_file = None
    <a id="change">FlowProposal.resume(</a>proposal, None, {&quotmodel_config&quot: {&quotkwargs&quot: {}}}<a id="change">)</a>
    proposal.initialise.assert_called_once()
    assert array_equal(proposal.flow_config[&quotmodel_config&quot][&quotkwargs&quot][&quotmask&quot],
                       array([1, 0]))
</code></pre><h3>After Change</h3><pre><code class='java'>
    proposal.mask = [1, 0]
    proposal.update_bounds = False
    proposal.weights_file = None
    <a id="change">model = </a><a id="change">MagicMock()</a>
    <a id="change">with patch(&quotnessai.proposal.base.Proposal.resume&quot</a><a id="change">) as mock:
        </a><a id="change">FlowProposal.resume(</a>proposal, model, {&quotmodel_config&quot: {&quotkwargs&quot: {}}}<a id="change">)</a>
    <a id="change">mock.assert_called_once_with(</a>model<a id="change">)</a>
    proposal.initialise.assert_called_once()
    assert array_equal(proposal.flow_config[&quotmodel_config&quot][&quotkwargs&quot][&quotmask&quot],
                       array([1, 0]))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/dad068f0491ce65384ed40898cc5034d4f335163#diff-9e6b5b5948180fe141f4ce5426461303cd7d313be047bbff72657adbd5aea611L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 19700978</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: dad068f0491ce65384ed40898cc5034d4f335163</div><div id='time'> Time: 2022-04-02</div><div id='author'> Author: michaeljw1@googlemail.com</div><div id='file'> File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_resume(1)</div><div id='n_method'> N Method Name: test_resume(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='n_file'> N File Name: tests/test_proposal/test_flowproposal/test_flowproposal_init_resume.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 79</div><BR>