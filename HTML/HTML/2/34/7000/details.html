<html><h3>Pattern ID :7000
</h3><img src='23331524.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">optim_dict = </a><a id="change">self.optimizer.state_dict()</a>
                    <a id="change">lr = optim_dict[&quotparam_groups&quot]</a><a id="change">[0]</a>[&quotlr&quot]
                    
                    <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(lr, <a id="change">0.5</a><a id="change"> * lr</a>)<a id="change">)</a>
                    
                    <a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]<a id="change"> = </a><a id="change">0.5</a><a id="change"> * lr</a>
                    <a id="change">self.optimizer.load_state_dict(optim_dict</a><a id="change">)</a>
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)
            </code></pre><h3>After Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">for </a>param_group in self.optimizer.param_groups<a id="change">:
                        </a>prev_lr<a id="change"> = </a>param_group[&quotlr&quot]
                        lr<a id="change"> = 0.5</a><a id="change"> * </a>prev_lr
                        <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(prev_lr, lr)<a id="change">)</a>
                        param_group[&quotlr&quot]<a id="change"> = </a>lr
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 24</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/73e096a93893194808456d3eaaf6025ea7476f75#diff-b61b98e7733d0396b3b1f77244617744f6ae8cc0f81d894ba9279b12993aed7aL99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23331524</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 73e096a93893194808456d3eaaf6025ea7476f75</div><div id='time'> Time: 2021-03-11</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/librispeech/common/src/driver.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/librispeech/common/src/driver.py</div><div id='n_file'> N File Name: egs/librispeech/common/src/driver.py</div><div id='m_start'> M Start Line: 99</div><div id='m_end'> M End Line: 108</div><div id='n_start'> N Start Line: 99</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    if self.no_improvement &gt;= 10:
                        print("Stop training")
                        break
                    <a id="change">if self.no_improvement &gt;= 3</a>:
                        <a id="change">optim_dict = </a><a id="change">self.optimizer.state_dict()</a>
                        <a id="change">lr = </a><a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]
                        
                        <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(lr, <a id="change">0.5</a><a id="change"> * </a>lr)<a id="change">)</a>
                        
                        <a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]<a id="change"> = </a><a id="change">0.5</a><a id="change"> * </a>lr
                        <a id="change">self.optimizer.load_state_dict(</a>optim_dict<a id="change">)</a>
                else:
                    self.no_improvement = 0
            
            self.prev_loss = valid_loss</code></pre><h3>After Change</h3><pre><code class='java'>
                    if self.no_improvement &gt;= 10:
                        print("Stop training")
                        break
                    <a id="change">if self.no_improvement &gt;= 3</a>:
                        <a id="change">for param_group</a> in self.optimizer.param_groups<a id="change">:
                            </a>prev_lr<a id="change"> = </a>param_group[&quotlr&quot]
                            lr<a id="change"> = 0.5</a><a id="change"> * </a>prev_lr
                            <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(prev_lr, lr)<a id="change">)</a>
                            param_group[&quotlr&quot]<a id="change"> = </a>lr
                else:
                    self.no_improvement = 0
            </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/f8c3ddb3fa2caca46d51140e0ea28839dc729c05#diff-d5cb03ca8f1fcaf1e8bc22f5deab4b6231d44a4eba914490ae1f21298075470dL80' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23331525</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: f8c3ddb3fa2caca46d51140e0ea28839dc729c05</div><div id='time'> Time: 2021-03-11</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_class'> M Class Name: TrainerBase</div><div id='n_method'> N Class Name: TrainerBase</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/wsj0-mix/common/src/driver.py</div><div id='n_file'> N File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 110</div><div id='n_start'> N Start Line: 102</div><div id='n_end'> N End Line: 108</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">optim_dict = </a><a id="change">self.optimizer.state_dict()</a>
                    <a id="change">lr = </a><a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]
                    
                    <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(lr, <a id="change">0.5</a><a id="change"> * </a>lr)<a id="change">)</a>
                    
                    <a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]<a id="change"> = </a><a id="change">0.5</a><a id="change"> * </a>lr
                    <a id="change">self.optimizer.load_state_dict(</a>optim_dict<a id="change">)</a>
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)
            </code></pre><h3>After Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">for param_group</a> in self.optimizer.param_groups<a id="change">:
                        </a>prev_lr<a id="change"> = </a>param_group[&quotlr&quot]
                        lr<a id="change"> = 0.5</a><a id="change"> * </a>prev_lr
                        <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(prev_lr, lr)<a id="change">)</a>
                        param_group[&quotlr&quot]<a id="change"> = </a>lr
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/73e096a93893194808456d3eaaf6025ea7476f75#diff-b61b98e7733d0396b3b1f77244617744f6ae8cc0f81d894ba9279b12993aed7aL78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23331494</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 73e096a93893194808456d3eaaf6025ea7476f75</div><div id='time'> Time: 2021-03-11</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/librispeech/common/src/driver.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/librispeech/common/src/driver.py</div><div id='n_file'> N File Name: egs/librispeech/common/src/driver.py</div><div id='m_start'> M Start Line: 99</div><div id='m_end'> M End Line: 108</div><div id='n_start'> N Start Line: 99</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">optim_dict = </a><a id="change">self.optimizer.state_dict()</a>
                    <a id="change">lr = </a><a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]
                    
                    <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(lr, <a id="change">0.5</a><a id="change"> * </a>lr)<a id="change">)</a>
                    
                    <a id="change">optim_dict[&quotparam_groups&quot][0]</a>[&quotlr&quot]<a id="change"> = </a><a id="change">0.5</a><a id="change"> * </a>lr
                    <a id="change">self.optimizer.load_state_dict(</a>optim_dict<a id="change">)</a>
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)
            </code></pre><h3>After Change</h3><pre><code class='java'>
                if self.no_improvement &gt;= 5:
                    print("Stop training")
                    break
                <a id="change">if self.no_improvement == 3</a>:
                    <a id="change">for param_group</a> in self.optimizer.param_groups<a id="change">:
                        </a>prev_lr<a id="change"> = </a>param_group[&quotlr&quot]
                        lr<a id="change"> = 0.5</a><a id="change"> * </a>prev_lr
                        <a id="change">print(</a>"Learning rate: {} -&gt; {}".format(prev_lr, lr)<a id="change">)</a>
                        param_group[&quotlr&quot]<a id="change"> = </a>lr
            
            model_path = os.path.join(self.model_dir, "last.pth")
            self.save_model(epoch, model_path)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/73e096a93893194808456d3eaaf6025ea7476f75#diff-820cb8c1edbaae892602427ebc0ac64e9c6a06ae7e153ec6fc30820417bde2f6L72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23331520</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 73e096a93893194808456d3eaaf6025ea7476f75</div><div id='time'> Time: 2021-03-11</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/dsd100/common/src/driver.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/dsd100/common/src/driver.py</div><div id='n_file'> N File Name: egs/dsd100/common/src/driver.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 102</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 100</div><BR>