<html><h3>Pattern ID :16295
</h3><img src='54521231.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        logger.pushd(&quotregular_evaluate&quot)
        arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
        dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
        natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])        
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
        
        <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
            logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
        
        <a id="change">if dataset_name not in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:
            <a id="change">logger.warn(f&quotdataset {dataset_name} is not part of natsbench&quot</a><a id="change">)</a>
            <a id="change">raise </a><a id="change">NotImplementedError()</a>
        
        info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
        test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
        <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
        <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
        logger.popd()
            

        &#47&#47 conditional zerocost evaluation</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 regular evaluation of the architecture
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        logger.pushd(&quotregular_evaluate&quot)   
        <a id="change">if dataset_name in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:            
            arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
            dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
            natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])
            logger.info(natsbench_location)        
            
            api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
            
            <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
                logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
                        
            info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
            test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
            <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
            <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
        else:
            <a id="change">logger.info({</a>&quotregtrainingtop1&quot: -1<a id="change">}</a><a id="change">)</a>
        logger.popd()
        

        &#47&#47 conditional zerocost evaluation</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 31</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/f598ba3a35c293d0b7d8bf4791e61210082e86a3#diff-463f9009bf22c27c72064ce6a177ca56a009985e6fd0d103ac9447f48f13ee3dL62' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 54521231</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: f598ba3a35c293d0b7d8bf4791e61210082e86a3</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: dedey@microsoft.com</div><div id='file'> File Name: archai/algos/zero_cost_measures/zero_cost_natsbench_conditional_experiment_runner.py</div><div id='m_class'> M Class Name: ZeroCostConditionalNatsbenchExperimentRunner</div><div id='n_method'> N Class Name: ZeroCostConditionalNatsbenchExperimentRunner</div><div id='m_method'> M Method Name: run_eval(2)</div><div id='n_method'> N Method Name: run_eval(2)</div><div id='m_parent_class'> M Parent Class: ExperimentRunner</div><div id='n_parent_class'> N Parent Class: ExperimentRunner</div><div id='m_file'> M File Name: archai/algos/zero_cost_measures/zero_cost_natsbench_conditional_experiment_runner.py</div><div id='n_file'> N File Name: archai/algos/zero_cost_measures/zero_cost_natsbench_conditional_experiment_runner.py</div><div id='m_start'> M Start Line: 62</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 82</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        logger.pushd(&quotregular_evaluate&quot)
        arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
        dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
        natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])
        logger.info(natsbench_location)        
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
        
        <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
            logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
        
        <a id="change">if dataset_name not in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:
            <a id="change">logger.warn(f&quotdataset {dataset_name} is not part of natsbench&quot</a><a id="change">)</a>
            <a id="change">raise </a><a id="change">NotImplementedError()</a>
        
        info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
        test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
        <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
        <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
        logger.popd()


        &#47&#47 regular evaluation of n epochs</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 regular evaluation of the architecture
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        logger.pushd(&quotregular_evaluate&quot)   
        <a id="change">if dataset_name in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:            
            arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
            dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
            natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])
            logger.info(natsbench_location)        
            
            api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
            
            <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
                logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
                        
            info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
            test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
            <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
            <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
            logger.popd()
        elif dataset_name ==&quotsynthetic_cifar10&quot:
            <a id="change">logger.info({</a>&quotregtrainingtop1&quot: -1<a id="change">}</a><a id="change">)</a>
        logger.popd()

        &#47&#47 regular evaluation of n epochs
        evaler = NatsbenchRegularEvaluater()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/e1f335cfb3cbabad1e217cef63ac4c055f31f6ec#diff-334acbe78063a77a7645339041fee3ea6efd4213ab9492f8b2b17d09dedae5d8L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 54521243</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: e1f335cfb3cbabad1e217cef63ac4c055f31f6ec</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: dedey@microsoft.com</div><div id='file'> File Name: archai/algos/natsbench/natsbench_regular_experiment_runner.py</div><div id='m_class'> M Class Name: NatsbenchRegularExperimentRunner</div><div id='n_method'> N Class Name: NatsbenchRegularExperimentRunner</div><div id='m_method'> M Method Name: run_eval(2)</div><div id='n_method'> N Method Name: run_eval(2)</div><div id='m_parent_class'> M Parent Class: ExperimentRunner</div><div id='n_parent_class'> N Parent Class: ExperimentRunner</div><div id='m_file'> M File Name: archai/algos/natsbench/natsbench_regular_experiment_runner.py</div><div id='n_file'> N File Name: archai/algos/natsbench/natsbench_regular_experiment_runner.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        logger.pushd(&quotregular_evaluate&quot)
        arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
        dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
        natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])
        logger.info(natsbench_location)        
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
        
        <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
            logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
        
        <a id="change">if dataset_name not in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:
            <a id="change">logger.warn(f&quotdataset {dataset_name} is not part of natsbench&quot</a><a id="change">)</a>
            <a id="change">raise </a><a id="change">NotImplementedError()</a>
        
        info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
        test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
        <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
        <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
        logger.popd()
            

        &#47&#47 freeze train evaluation of the architecture</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 regular evaluation of the architecture
        &#47&#47 where we simply lookup the result
        &#47&#47 --------------------------------------
        dataset_name<a id="change"> = </a>conf_eval[&quotloader&quot][&quotdataset&quot][&quotname&quot]

        logger.pushd(&quotregular_evaluate&quot)   
        <a id="change">if dataset_name in {&quotcifar10&quot, &quotcifar100&quot, &quotImageNet16-120&quot}</a>:            
            arch_id<a id="change"> = </a>conf_eval[&quotnatsbench&quot][&quotarch_index&quot]
            dataroot<a id="change"> = </a>utils.full_path(conf_eval[&quotloader&quot][&quotdataset&quot][&quotdataroot&quot])    
            natsbench_location<a id="change"> = </a>os.path.join(dataroot, &quotnatsbench&quot, conf_eval[&quotnatsbench&quot][&quotnatsbench_tss_fast&quot])
            logger.info(natsbench_location)        
            
            api<a id="change"> = </a>create(natsbench_location, &quottss&quot, fast_mode=True, verbose=True)
            
            <a id="change">if </a>arch_id &gt; 15625 or arch_id &lt; 0:
                logger.warn(f&quotarchitecture id {arch_id} is invalid &quot)
                        
            info<a id="change"> = </a>api.get_more_info(arch_id, dataset_name, hp=200, is_random=False)
            test_accuracy<a id="change"> = </a>info[&quottest-accuracy&quot]
            <a id="change">logger.info(</a>f&quotRegular training top1 test accuracy is {test_accuracy}&quot<a id="change">)</a>
            <a id="change">logger.info(</a>{&quotregtrainingtop1&quot: float(test_accuracy)}<a id="change">)</a>
        elif dataset_name ==&quotsynthetic_cifar10&quot:
            <a id="change">logger.info({</a>&quotregtrainingtop1&quot: -1<a id="change">}</a><a id="change">)</a>
        logger.popd()            

        &#47&#47 freeze train evaluation of the architecture
        &#47&#47 -------------------------------------------</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/fd9fe4cc36a49f59aed9e294e6db217fe4ef5efe#diff-3ad62d30af7797dad492f0a6fc98fddfd7108878a452190f116c697a7e4af268L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 54521226</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: fd9fe4cc36a49f59aed9e294e6db217fe4ef5efe</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: dedey@microsoft.com</div><div id='file'> File Name: archai/algos/proxynas/freeze_natsbench_experiment_runner.py</div><div id='m_class'> M Class Name: FreezeNatsbenchExperimentRunner</div><div id='n_method'> N Class Name: FreezeNatsbenchExperimentRunner</div><div id='m_method'> M Method Name: run_eval(2)</div><div id='n_method'> N Method Name: run_eval(2)</div><div id='m_parent_class'> M Parent Class: ExperimentRunner</div><div id='n_parent_class'> N Parent Class: ExperimentRunner</div><div id='m_file'> M File Name: archai/algos/proxynas/freeze_natsbench_experiment_runner.py</div><div id='n_file'> N File Name: archai/algos/proxynas/freeze_natsbench_experiment_runner.py</div><div id='m_start'> M Start Line: 61</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 80</div><BR>