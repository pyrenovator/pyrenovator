<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Probably the faster way to do this is just SVD the whole (likely rank deficient) matrix
        &#47&#47 grab the second highest singular value . . . Instead, we just amputate the empty rows/cols and move on.
        nzero_rc = px != 0
        nz_pmat<a id="change"> = </a>p[nzero_rc,:][:,nzero_rc] &#47&#47 Symmetric, so this is ok!
        ccm = np.corrcoef(nz_pmat)
        e_vals = np.linalg.eigvalsh(ccm)
        <a id="change">e_vals.sort()</a>
        feats[dir, 13] = np.sqrt(e_vals[-2])

    return feats
</code></pre><h3>After Change</h3><pre><code class='java'>
            feats[dir, 11] = (feats[dir,8]-HXY1)/max(HX,HY)
        feats[dir, 12] = np.sqrt(1 - np.exp( -2. * (HXY2 - feats[dir,8])))

        <a id="change">if compute_14th_feature</a>:
            &#47&#47 Square root of the second largest eigenvalue of the correlation matrix
            &#47&#47 Probably the faster way to do this is just SVD the whole (likely rank deficient) matrix
            &#47&#47 grab the second highest singular value . . . Instead, we just amputate the empty rows/cols and move on.
            nzero_rc = px != 0
            nz_pmat<a id="change"> = </a>p[nzero_rc,:][:,nzero_rc] &#47&#47 Symmetric, so this is ok!
            ccm = np.corrcoef(nz_pmat)
            e_vals = np.linalg.eigvalsh(ccm)
            <a id="change">e_vals.sort()</a>
            feats[dir, 13] = np.sqrt(e_vals[-2])

    return feats
</code></pre>