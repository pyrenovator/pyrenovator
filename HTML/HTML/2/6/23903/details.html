<html><h3>Pattern ID :23903
</h3><img src='74417879.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        m_parameter = torch.Tensor([0]).cuda()

    else:
        m_parameter<a id="change"> = </a>torch.Tensor(<a id="change">[</a>0<a id="change"></a>])

    for parameter in list(model.parameters()):
        m_parameter = torch.cat((m_parameter, parameter.data.view(-1)))</code></pre><h3>After Change</h3><pre><code class='java'>
    
    Squash model parameters or gradients into a single tensor.
    
    parameters<a id="change"> = </a>[param.data.view(-1) for param in model.parameters()
                  ]  &#47&#47 vectorize each model parameter
    m_parameters = torch.cat(parameters)

    <a id="change">if </a>cuda:
        m_parameters<a id="change"> = </a><a id="change">m_parameters.cuda()</a>

    return m_parameters

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/12925dd3ac83f8a9e1fbd4ed32fb3ec602217a77#diff-3f9658bd0898d77d8d23be9f67b244ede72a902b683904801797bba2c7b6793fL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74417879</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 12925dd3ac83f8a9e1fbd4ed32fb3ec602217a77</div><div id='time'> Time: 2021-04-09</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/utils/serialization.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: ravel_model_params(2)</div><div id='n_method'> N Method Name: ravel_model_params(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fedlab_core/utils/serialization.py</div><div id='n_file'> N File Name: fedlab_core/utils/serialization.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 15</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.layer_count = layer_count
        self.sample_token_count = sample_token_count
        self.start_token = torch.tensor([start_token]).to(torch.long)
        self.pad_token<a id="change"> = </a>torch.tensor(<a id="change">[</a>1<a id="change"></a>]).to(torch.long)
        self.condition_factor = torch.tensor([10]).to(torch.float)
        &#47&#47 if torch.cuda.is_available(): 
        &#47&#47     self.start_token = self.start_token.cuda()</code></pre><h3>After Change</h3><pre><code class='java'>
            embed_count // attention_head_count
        )
        self.zero_prob = torch.zeros([1])
        self.token_indices<a id="change"> = </a>torch.arange(self.sample_token_count)
        self.start_token = torch.tensor([start_token]).to(torch.long)
        <a id="change">if </a>torch.cuda.is_available():
            self.zero_prob = self.zero_prob.cuda()
            self.token_indices<a id="change"> = </a><a id="change">self.token_indices.cuda()</a>
            self.start_token = self.start_token.cuda()


    def decode_step(self,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kuprel/min-dalle/commit/17c96fe110fad3d48ea591dcd46475f521499770#diff-a32b6e5a8d67db649bbd4d0118fdcd645421a8fcca842a8ccaa2bf61e702f403L111' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74417878</div><div id='project'> Project Name: kuprel/min-dalle</div><div id='commit'> Commit Name: 17c96fe110fad3d48ea591dcd46475f521499770</div><div id='time'> Time: 2022-06-28</div><div id='author'> Author: brkuprel@gmail.com</div><div id='file'> File Name: min_dalle/models/dalle_bart_decoder_torch.py</div><div id='m_class'> M Class Name: DalleBartDecoderTorch</div><div id='n_method'> N Class Name: DalleBartDecoderTorch</div><div id='m_method'> M Method Name: __init__(11)</div><div id='n_method'> N Method Name: __init__(11)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: min_dalle/models/dalle_bart_decoder_torch.py</div><div id='n_file'> N File Name: min_dalle/models/dalle_bart_decoder_torch.py</div><div id='m_start'> M Start Line: 127</div><div id='m_end'> M End Line: 129</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 161</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    prediction = cv2.imread(fake_image)
    target = cv2.imread(real_image)

    error_value = <a id="change">[]</a>
    for i in range(len(target)):
        error_value.append((target[i] - prediction[i]) ** 2)

    mse<a id="change"> = </a>sum(error_value) / len(error_value)

    if mse &lt; 1.0e-10:
        return 100</code></pre><h3>After Change</h3><pre><code class='java'>
    psnr = 10 * math.log10(255.0 ** 2 / mse)

    (_, channel, _, _) = img1.size()
    window<a id="change"> = </a>create_window(window_size, channel)

    <a id="change">if </a>img1.is_cuda:
        window<a id="change"> = </a><a id="change">window.cuda(</a>img1.get_device()<a id="change">)</a>
    window = window.type_as(img1)

    ssim = _ssim(img1, img2, window, window_size, channel, size_average)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lornatang/srgan-pytorch/commit/cb04075c03b2a9f9b49c1e6d6edb8de1f6647249#diff-6a5896400679e5a49f57bedde92f21145707b951c4cbda7f56777f97518e74d8L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74417877</div><div id='project'> Project Name: lornatang/srgan-pytorch</div><div id='commit'> Commit Name: cb04075c03b2a9f9b49c1e6d6edb8de1f6647249</div><div id='time'> Time: 2020-09-01</div><div id='author'> Author: liuchangyu1111@gmail.com</div><div id='file'> File Name: srgan_pytorch/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: evaluate_performance(4)</div><div id='n_method'> N Method Name: evaluate_performance(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: srgan_pytorch/utils.py</div><div id='n_file'> N File Name: srgan_pytorch/utils.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 47</div><BR>