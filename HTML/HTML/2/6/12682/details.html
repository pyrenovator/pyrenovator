<html><h3>Pattern ID :12682
</h3><img src='42955151.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.item_list_length_field: torch.tensor(item_list_length),
        }
        if self.position_field:
            new_dict[self.position_field]<a id="change"> = </a><a id="change">torch.arange(</a>self.max_item_list_len<a id="change">)</a>.repeat(new_length).view(new_length, -1)
        iid_value = self.dataset.inter_feat[self.iid_field]
        time_value = self.dataset.inter_feat[self.time_field]
        for i, (index, length) in enumerate(zip(item_list_index, item_list_length)):</code></pre><h3>After Change</h3><pre><code class='java'>
            self.item_list_length_field: torch.tensor(item_list_length),
        }

        <a id="change">for </a>field in self.dataset.inter_feat<a id="change">:
            </a>if field != self.uid_field:
                list_field = getattr(self, f&quot{field}_list_field&quot)
                list_len<a id="change"> = </a>self.dataset.field2seqlen[list_field]
                shape = (new_length, list_len) if isinstance(list_len, int) else (new_length, ) + list_len
                list_ftype<a id="change"> = </a>self.dataset.field2type[list_field]
                dtype = torch.int64 if list_ftype in [FeatureType.TOKEN, FeatureType.TOKEN_SEQ] else torch.float64
                new_dict[list_field] = torch.zeros(shape, dtype=dtype)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/ff2c1876a9a57351382828ca1246646ee01aff42#diff-c9d44b5bc773d3e9abdd8e97a7822c63722e862ba7a4de93fe5f6b46667ce3a6L114' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42955151</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: ff2c1876a9a57351382828ca1246646ee01aff42</div><div id='time'> Time: 2020-12-06</div><div id='author'> Author: 297086016@qq.com</div><div id='file'> File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_class'> M Class Name: SequentialDataLoader</div><div id='n_method'> N Class Name: SequentialDataLoader</div><div id='m_method'> M Method Name: augmentation(4)</div><div id='n_method'> N Method Name: augmentation(5)</div><div id='m_parent_class'> M Parent Class: AbstractDataLoader</div><div id='n_parent_class'> N Parent Class: AbstractDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 145</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.item_list_length_field: torch.tensor(item_list_length),
        }
        if self.position_field:
            new_dict[self.position_field]<a id="change"> = </a><a id="change">torch.arange(</a>self.max_item_list_len<a id="change">)</a>.repeat(new_length).view(new_length, -1)
        iid_value = self.dataset.inter_feat[self.iid_field]
        time_value = self.dataset.inter_feat[self.time_field]
        for i, (index, length) in enumerate(zip(item_list_index, item_list_length)):</code></pre><h3>After Change</h3><pre><code class='java'>
            self.item_list_length_field: torch.tensor(item_list_length),
        }

        <a id="change">for field</a> in self.dataset.inter_feat<a id="change">:
            </a>if field != self.uid_field:
                list_field = getattr(self, f&quot{field}_list_field&quot)
                list_len<a id="change"> = </a>self.dataset.field2seqlen[list_field]
                shape = (new_length, list_len) if isinstance(list_len, int) else (new_length, ) + list_len
                list_ftype<a id="change"> = </a>self.dataset.field2type[list_field]
                dtype = torch.int64 if list_ftype in [FeatureType.TOKEN, FeatureType.TOKEN_SEQ] else torch.float64
                new_dict[list_field] = torch.zeros(shape, dtype=dtype)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/ff2c1876a9a57351382828ca1246646ee01aff42#diff-c9d44b5bc773d3e9abdd8e97a7822c63722e862ba7a4de93fe5f6b46667ce3a6L114' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42955134</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: ff2c1876a9a57351382828ca1246646ee01aff42</div><div id='time'> Time: 2020-12-06</div><div id='author'> Author: 297086016@qq.com</div><div id='file'> File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_class'> M Class Name: SequentialDataLoader</div><div id='n_method'> N Class Name: SequentialDataLoader</div><div id='m_method'> M Method Name: augmentation(4)</div><div id='n_method'> N Method Name: augmentation(5)</div><div id='m_parent_class'> M Parent Class: AbstractDataLoader</div><div id='n_parent_class'> N Parent Class: AbstractDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/sequential_dataloader.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 145</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    entities = torch.full(size=(num_entities,), fill_value=-1, dtype=torch.long)
    relations = torch.full(size=(num_relations,), fill_value=-1, dtype=torch.long)
    h, r, t = triples.T
    triple_id = <a id="change">torch.arange(</a>num_triples<a id="change">)</a>
    entities[h] = relations[r] = entities[t]<a id="change"> = </a>triple_id

    if entities.min() &lt; 0:
        raise TripleCoverageError(arr=entities, name="entities")</code></pre><h3>After Change</h3><pre><code class='java'>
    covered = _get_covered_entities(df=df, chosen=chosen)

    &#47&#47 Select one triple for each head/tail entity, which is not yet covered.
    <a id="change">for column</a> in "ht"<a id="change">:
        </a>covered<a id="change"> = </a>_get_covered_entities(df=df, chosen=chosen)
        chosen<a id="change"> |= </a>_get_cover_for_column(df=df[~df[column].isin(covered)], column=column)

    &#47&#47 create mask
    num_triples = triples.shape[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/ba79675f0442b0faa1b39b9ece7d8154db5e4ad3#diff-76b40e05fb8a98a8bc9e4a5d88c450e5022366b591b626023f9e82a38f6cd2b3L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42955146</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: ba79675f0442b0faa1b39b9ece7d8154db5e4ad3</div><div id='time'> Time: 2021-10-14</div><div id='author'> Author: cthoyt@gmail.com</div><div id='file'> File Name: src/pykeen/triples/splitting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_cover_deterministic(1)</div><div id='n_method'> N Method Name: _get_cover_deterministic(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/pykeen/triples/splitting.py</div><div id='n_file'> N File Name: src/pykeen/triples/splitting.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 95</div><div id='n_start'> N Start Line: 94</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Get all centered pillar points
    x_grid = np.arange(x_min, x_max, grid_size)
    y_grid<a id="change"> = </a><a id="change">np.arange(</a>y_min, y_max, grid_size<a id="change">)</a>

    pillars = list()
    for px in x_grid:
        for py in y_grid:</code></pre><h3>After Change</h3><pre><code class='java'>
        [Pillar(x=x_min + j*grid_size, y=y_min + i*grid_size, grid_size=grid_size) for i in range(n_pillars_y + 1)]
        for j in range(n_pillars_x + 1)]

    <a id="change">for point</a> in pc<a id="change">:
        </a>x, y, z = point
        pillar_idx_x<a id="change"> = </a>math.ceil((x - x_min) / grid_size)
        pillar_idx_y<a id="change"> = </a>math.ceil((y - y_min) / grid_size)

        pillar_matrix[pillar_idx_x][pillar_idx_y].add_point(point=point)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jabb0/fastflow3d/commit/455c6bbe80699b8f0a79a9819e6c9d4dcef7569f#diff-b473b0af4f5bbf69d499d1bfc6dcec67242f9e7297ff16e38cd728c4008b5ac5L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42955139</div><div id='project'> Project Name: jabb0/fastflow3d</div><div id='commit'> Commit Name: 455c6bbe80699b8f0a79a9819e6c9d4dcef7569f</div><div id='time'> Time: 2021-06-11</div><div id='author'> Author: aron.distelzweig@hotmail.com</div><div id='file'> File Name: utils/pillars.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: create_pillars(2)</div><div id='n_method'> N Method Name: create_pillars(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/pillars.py</div><div id='n_file'> N File Name: utils/pillars.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 49</div><BR>