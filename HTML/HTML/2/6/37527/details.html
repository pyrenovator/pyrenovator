<html><h3>Pattern ID :37527
</h3><img src='108065316.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if im.shape[:2] != seg.shape[:2]:
            seg = resize(seg, (im.shape[0], im.shape[1], 3), order=0)
        im[seg==0] = 0 &#47&#47 make background black.
        imsave(os.path.join(output_dir, <a id="change">os.path.splitext(fname)[0]</a> + &quot.jpg&quot), im, quality=95)

def save_corrected_segmentation(annot_fpath, seg_dir, output_dir):
    assign the annotations (corrections) to the segmentations. This is useful</code></pre><h3>After Change</h3><pre><code class='java'>
        im_fname = os.path.basename(im_fpath)
        im = Image.open(im_fpath)
        if im.mode == &quotP&quot: &#47&#47 see https://github.com/python-pillow/Pillow/issues/7045
            im<a id="change"> = </a><a id="change">im.convert("RGBA"</a><a id="change">)</a>
        im<a id="change"> = </a>np.array(im)
        &#47&#47 resize the segmentation to match the image, so smaller segmentations
        &#47&#47 can be used to mask larger images (for example in localisation stages)
        if im.shape[:2] != seg.shape[:2]:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/abe404/root_painter/commit/2a09dabce71827f91248e1bd1a2ec4c5b298fd8e#diff-70734cee2c55d35ab4255b60354d2e4d8e20576e916dc38f3bec009e2e18218dL117' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108065316</div><div id='project'> Project Name: abe404/root_painter</div><div id='commit'> Commit Name: 2a09dabce71827f91248e1bd1a2ec4c5b298fd8e</div><div id='time'> Time: 2023-04-30</div><div id='author'> Author: abe@abesmith.co.uk</div><div id='file'> File Name: painter/src/main/python/im_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: save_masked_image(4)</div><div id='n_method'> N Method Name: save_masked_image(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: painter/src/main/python/im_utils.py</div><div id='n_file'> N File Name: painter/src/main/python/im_utils.py</div><div id='m_start'> M Start Line: 117</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 135</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        np_img = cv2.imdecode(nparr, cv2.IMREAD_GRAYSCALE)
    else:
        np_img = cv2.imdecode(nparr, cv2.IMREAD_UNCHANGED)
        if len(np_img.shape) == 3 and <a id="change">np_img.shape[2]</a> == 4:
            alpha_channel = np_img[:, :, -1]
            np_img = cv2.cvtColor(np_img, cv2.COLOR_BGRA2RGB)
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
            alpha_channel = np_img[:, :, -1]
            np_img = cv2.cvtColor(np_img, cv2.COLOR_RGBA2RGB)
        else:
            image<a id="change"> = </a><a id="change">image.convert(&quotRGB&quot</a><a id="change">)</a>
            np_img<a id="change"> = </a>np.array(image)

    return np_img, alpha_channel
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sanster/lama-cleaner/commit/ff504210032101b74efdc58cfb75a3f1ad3590b9#diff-9c50fd97460561bd355b306651bece11de607253a920497deaa2b8798afcdf4aL86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108065318</div><div id='project'> Project Name: sanster/lama-cleaner</div><div id='commit'> Commit Name: ff504210032101b74efdc58cfb75a3f1ad3590b9</div><div id='time'> Time: 2023-01-17</div><div id='author'> Author: cwq1913@gmail.com</div><div id='file'> File Name: lama_cleaner/helper.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_img(2)</div><div id='n_method'> N Method Name: load_img(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lama_cleaner/helper.py</div><div id='n_file'> N File Name: lama_cleaner/helper.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 95</div><div id='n_start'> N Start Line: 90</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        img = imread(img_path)

        img_dims = img.shape
        H, W = img_dims[0], <a id="change">img_dims[1]</a>
        shortest_side_length = min(H,W)

        minimum_scale_factor = float(self.crop_size) / float(shortest_side_length)
        scale_low = max(minimum_scale_factor, self.scale_low)</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 H, W = img_dims[0], img_dims[1]
            &#47&#47 PIL
            img = PIL.Image.open(img_path)
            img<a id="change"> = </a><a id="change">img.convert(&quotRGB&quot</a><a id="change">)</a> 
            W<a id="change">, H = </a>img.size  &#47&#47 slightly confusing

            shortest_side_length = min(H,W)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/justin-tan/high-fidelity-generative-compression/commit/d2436856c9ed336ea22cc8751138db0b72b89e36#diff-92dfe8808abf30d0f55be106f3899be48fb42d002d2db5de432a99f711e7444fL159' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108065319</div><div id='project'> Project Name: justin-tan/high-fidelity-generative-compression</div><div id='commit'> Commit Name: d2436856c9ed336ea22cc8751138db0b72b89e36</div><div id='time'> Time: 2020-08-10</div><div id='author'> Author: jtan@spartan-login1.hpc.unimelb.edu.au</div><div id='file'> File Name: hific/utils/datasets.py</div><div id='m_class'> M Class Name: OpenImages</div><div id='n_method'> N Class Name: OpenImages</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: BaseDataset</div><div id='n_parent_class'> N Parent Class: BaseDataset</div><div id='m_file'> M File Name: hific/utils/datasets.py</div><div id='n_file'> N File Name: hific/utils/datasets.py</div><div id='m_start'> M Start Line: 170</div><div id='m_end'> M End Line: 183</div><div id='n_start'> N Start Line: 177</div><div id='n_end'> N End Line: 203</div><BR>