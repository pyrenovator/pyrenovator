<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    try:
                        ontology_name = self.entity_class_to_ontology_mappings[entity.entity_class]
                        index = self.ontology_index_dict.get(ontology_name, None)
                        <a id="change">if </a><a id="change">index is not None</a>:
                            metadata_df = index.search(entity.match)
                            for i, row in metadata_df.iterrows():
                                row_dict = row.to_dict()
                                ontology_id = <a id="change">row_dict.pop(</a>IDX<a id="change">)</a>
                                mapping_type = row_dict.pop(MAPPING_TYPE).tolist()
                                row_dict[NAMESPACE] = self.namespace()
                                new_mapping<a id="change"> = </a>Mapping(
                                    source=ontology_name,
                                    idx=ontology_id,
                                    mapping_type=mapping_type,</code></pre><h3>After Change</h3><pre><code class='java'>
                            fuzzy=self.fuzzy,
                            namespace=self.namespace(),
                        )
                        <a id="change">for </a>mapping in mappings<a id="change">:
                            </a>entity.add_mapping(mapping)
                            self.lookup_cache.update_lookup_cache(entity, mapping)
                    except Exception:
                        doc = find_document_from_entity(docs, entity)</code></pre>