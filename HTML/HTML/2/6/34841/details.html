<html><h3>Pattern ID :34841
</h3><img src='99906836.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for col in df_disk:
            assert_eq(result[col], df_disk[col])
    else:
        <a id="change">assert </a>len(df0) == len(df_disk)


@pytest.mark.parametrize("part_mem_fraction", [0.01])</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 we don&quott have a deterministic ordering here, especially when using
    &#47&#47 a dask client with multiple workers - so we need to sort the values here
    columns = <a id="change">[</a>"label", <a id="change">"x"</a>, "y", <a id="change">"id"</a>] + cat_names
    got<a id="change"> = </a><a id="change">result.sort_values(columns).reset_index(drop=True)</a>
    expect = df_disk.sort_values(columns).reset_index(drop=True)
    assert_eq(got, expect)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nvidia/nvtabular/commit/9218dd5b7d5244e860ddf45b637e3f482c157156#diff-649a1e71ae3d6b6029207d0d05db1e6aa950ecabf40f6fc929ea1f884efaf2c9L93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99906836</div><div id='project'> Project Name: nvidia/nvtabular</div><div id='commit'> Commit Name: 9218dd5b7d5244e860ddf45b637e3f482c157156</div><div id='time'> Time: 2021-02-10</div><div id='author'> Author: github@benfrederickson.com</div><div id='file'> File Name: tests/unit/test_dask_nvt.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_dask_workflow_api_dlrm(9)</div><div id='n_method'> N Method Name: test_dask_workflow_api_dlrm(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/unit/test_dask_nvt.py</div><div id='n_file'> N File Name: tests/unit/test_dask_nvt.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 120</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred<a id="change"> = </a><a id="change">pred.loc[:, ["user_id", "item_id"]].sort_values("user_id").reset_index(drop=True)</a>
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/9405dd1ebbc8691fd238984b6d1862fcc0f86c3e#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99906829</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 9405dd1ebbc8691fd238984b6d1862fcc0f86c3e</div><div id='time'> Time: 2020-09-15</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred<a id="change"> = </a><a id="change">pred.loc[:, ["user_id", "item_id"]].sort_values("user_id").reset_index(drop=True)</a>
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/af83229f4f08642d7822f0d7395dd27ccba9aaf2#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99906843</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: af83229f4f08642d7822f0d7395dd27ccba9aaf2</div><div id='time'> Time: 2020-10-13</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>