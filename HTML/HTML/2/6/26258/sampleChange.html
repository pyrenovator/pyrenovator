<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def _make_tuple_weights(self, broadcast_indices, weights):
        if isinstance(weights, int):
            return weights
        expanded_weights = <a id="change">[weights[..., None][idx] for idx in broadcast_indices]</a>
        result = 1
        for w in expanded_weights:
            result = result*w
        return self.math.pow(result, 1./self.rank)</code></pre><h3>After Change</h3><pre><code class='java'>
            return 1

        result = 1
        <a id="change">for </a>(inp, <a id="change">broadcast</a>) in zip(inputs, broadcast_indices)<a id="change">:
            </a>weights = inp.weights
            if isinstance(weights, int):
                result = result*<a id="change">float(</a>weights<a id="change">)</a>
                continue
            expanded_weights = weights[..., None][broadcast]
            result<a id="change"> = </a>result*expanded_weights
        return self.math.pow(result, 1./self.rank)

    def _mask_scores(self, scores, broadcast_indices, mask):</code></pre>