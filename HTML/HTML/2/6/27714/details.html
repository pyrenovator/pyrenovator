<html><h3>Pattern ID :27714
</h3><img src='82198403.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                self._create_tuple_ops(node, module_tensor_tuples_map, node_name_to_module, ops)
            else:
                if node.outputsSize() != 1:
                    <a id="change">logger.error("multiple output Ops are not supported %s"</a>, str(node)<a id="change">)</a>
                    raise NotImplementedError

                output_name: str = node.output().debugName()
</code></pre><h3>After Change</h3><pre><code class='java'>
        
        if is_leaf_module(model):
            return self._parse_single_module_model(model, trace.graph, ir_nodes_list)
        <a id="change">if inputs_map is None</a>:
            inputs_map<a id="change"> = </a><a id="change">{}</a>
        curr_inputs = [inp for inp in trace.graph.inputs()]
        if higher_level_inputs is not None:
            _update_inputs_map(curr_inputs, higher_level_inputs, inputs_map)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/quic/aimet/commit/4f09ee7eded0de72f959a68889e02f89a53ad364#diff-2b6b389f1c7f1d5039c94c8cba46a20d86eb90f18739dcce292126fca2586013L239' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82198403</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 4f09ee7eded0de72f959a68889e02f89a53ad364</div><div id='time'> Time: 2020-11-18</div><div id='author'> Author: quic_klhsieh@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/meta/connectedgraph.py</div><div id='m_class'> M Class Name: ConnectedGraph</div><div id='n_method'> N Class Name: ConnectedGraph</div><div id='m_method'> M Method Name: _parse_trace_graph(7)</div><div id='n_method'> N Method Name: _parse_trace_graph(5)</div><div id='m_parent_class'> M Parent Class: AimetCommonConnectedGraph</div><div id='n_parent_class'> N Parent Class: AimetCommonConnectedGraph</div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/meta/connectedgraph.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/meta/connectedgraph.py</div><div id='m_start'> M Start Line: 239</div><div id='m_end'> M End Line: 309</div><div id='n_start'> N Start Line: 260</div><div id='n_end'> N End Line: 318</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                f&quotInvalid data type for JAX: "{data_type}". Only float or double are supported.&quot
            )
    else:
        <a id="change">logger.error("Changing the data type is not supported for backend "</a>, backend<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    if backend == "torch":
        _set_precision_torch(data_type)
    elif <a id="change">data_type not in ["float", "double"]</a>:
        logger.error(
            f&quotInvalid data type for {backend}: "{data_type}". Only float or double are supported.&quot
        )
    elif backend == "jax":
        from jax.config import config

        config.update("jax_enable_x64", data_type == "double")
        logger.info(f"JAX data type set to {data_type}")
    elif backend in ["numpy", "tensorflow"]:
        torchquad_default_dtypes[backend]<a id="change"> = </a><a id="change">{</a>"float": "float32", "double": "float64"<a id="change">}</a>[
            data_type
        ]
        logger.info(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/6e4ecdbde059a8579eecaeda33ea46e00a92f353#diff-3d54e7eb7aec67774cc15e5afce7009e96cc62f50e194efb772043701d68e546L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82198399</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: 6e4ecdbde059a8579eecaeda33ea46e00a92f353</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/utils/set_precision.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: set_precision(2)</div><div id='n_method'> N Method Name: set_precision(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/utils/set_precision.py</div><div id='n_file'> N File Name: torchquad/utils/set_precision.py</div><div id='m_start'> M Start Line: 67</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 83</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            else:
                current_setting = tensor_quantizer.use_symmetric_encodings
            if current_setting != quantizer_setting:
                <a id="change">logger.error(&quotConflicting tensor quantizer settings for symmetric encodings&quot</a><a id="change">)</a>
                raise AssertionError(&quotConflicting tensor quantizer settings for symmetric encodings&quot)
        else:
            if setting_name in [ConfigDictKeys.IS_INPUT_QUANTIZED, ConfigDictKeys.IS_OUTPUT_QUANTIZED]:
                tensor_quantizer.enabled = quantizer_setting</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 Tensor quantizer&quots setting has already been modified
            if setting_name in [ConfigDictKeys.IS_INPUT_QUANTIZED, ConfigDictKeys.IS_OUTPUT_QUANTIZED]:
                current_setting = tensor_quantizer.enabled
            elif <a id="change">setting_name == ConfigDictKeys.IS_SYMMETRIC</a>:
                current_setting = tensor_quantizer.use_symmetric_encodings
            else:
                current_setting<a id="change"> = </a><a id="change">{</a>ConfigDictKeys.MIN: tensor_quantizer.encoding_min_max_fixed_vals[0],
                                   ConfigDictKeys.MAX: tensor_quantizer.encoding_min_max_fixed_vals[1]<a id="change">}</a>
            log_with_error_and_assert_if_false(current_setting == quantizer_setting,
                                               logger,
                                               f&quotConflicting tensor quantizer settings for {setting_name}&quot)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/23f8abbb32da75a3ba3b8ea5a1a118337f831424#diff-1bd15c8bfaa307f9af8fe1f6224cd49f00a7231a001807b033b3b8cf6d2140f9L699' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82198397</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 23f8abbb32da75a3ba3b8ea5a1a118337f831424</div><div id='time'> Time: 2023-04-10</div><div id='author'> Author: quic_klhsieh@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _modify_tensor_quantizers(4)</div><div id='n_method'> N Method Name: _modify_tensor_quantizers(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/quantsim_config/quantsim_config.py</div><div id='m_start'> M Start Line: 700</div><div id='m_end'> M End Line: 733</div><div id='n_start'> N Start Line: 703</div><div id='n_end'> N End Line: 743</div><BR>