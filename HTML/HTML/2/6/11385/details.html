<html><h3>Pattern ID :11385
</h3><img src='38837984.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    crafted_doc = reader.craft(array_bytes, 0)

    assert crafted_doc[&quotblob&quot].shape[0] == size
    <a id="change">np.testing.assert_array_equal(</a>crafted_doc[&quotblob&quot], sample_array<a id="change">)</a>

def test_bytes_reader_int_type():
    size = 8
    sample_array = np.random.rand(size).astype(&quotint&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
    reader = ArrayBytesReader(as_type=as_type)

    crafted_docs = reader.craft(array_bytes if single else [array_bytes, array_bytes])
    <a id="change">if single</a>:
        assert crafted_docs[&quotblob&quot].shape[0] == _size
        np.testing.assert_array_equal(crafted_docs[&quotblob&quot], sample_array)
    else:
        <a id="change">assert </a>len(crafted_docs) == 2
        for crafted_doc in crafted_docs:
            assert crafted_doc[&quotblob&quot].shape[0] == _size
            <a id="change">np.testing.assert_array_equal(</a>crafted_doc[&quotblob&quot], sample_array<a id="change">)</a>


@pytest.mark.parametrize(&quotdata_type, reader_type&quot, [(&quotfloat32&quot, &quotfloat64&quot)])
def test_bytes_reader_wrong_type(data_type, reader_type):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina-hub/commit/cd26c020c86cd5c620b3ab1aae6d36f11bf453eb#diff-14f5588ef2d831d2bb4ded565d2d264ccc8f615cc8773fcf5e6ba1d208b2a5c9L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38837984</div><div id='project'> Project Name: jina-ai/jina-hub</div><div id='commit'> Commit Name: cd26c020c86cd5c620b3ab1aae6d36f11bf453eb</div><div id='time'> Time: 2021-03-15</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: crafters/numeric/ArrayBytesReader/tests/test_arraybytesreader.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_bytes_reader(2)</div><div id='n_method'> N Method Name: test_bytes_reader(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: crafters/numeric/ArrayBytesReader/tests/test_arraybytesreader.py</div><div id='n_file'> N File Name: crafters/numeric/ArrayBytesReader/tests/test_arraybytesreader.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    proposal.augment_names = [&quote_1&quot, &quote_2&quot]
    AugmentedFlowProposal.augmented_prior(proposal, x)
    np.testing.assert_array_equal(x[&quote_1&quot], mock.call_args_list[0][0][0])
    <a id="change">np.testing.assert_array_equal(</a>x[&quote_2&quot], mock.call_args_list[1][0][0]<a id="change">)</a>


@pytest.mark.parametrize(&quotmarg&quot, [False, True])
def test_log_prior(proposal, x, marg):</code></pre><h3>After Change</h3><pre><code class='java'>
    proposal.marginalise_augment = marg
    proposal.augment_names = [&quote_1&quot, &quote_2&quot]
    log_prior = AugmentedFlowProposal.augmented_prior(proposal, x)
    <a id="change">if marg</a>:
        <a id="change">assert </a>log_prior == 0
    else:
        np.testing.assert_array_equal(x[&quote_1&quot], mock.call_args_list[0][0][0])
        <a id="change">np.testing.assert_array_equal(</a>x[&quote_2&quot], mock.call_args_list[1][0][0]<a id="change">)</a>


@patch(&quotnessai.proposal.flowproposal.FlowProposal.log_prior&quot, return_value=1)
def test_log_prior(mock_prior, proposal, x):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/693fda5f8a93797c2dfaaa1abd98cbbaf4a1f0ea#diff-5bba28999818688b103cff57873085065912fc7d066b2ab4e6d28184163222d5L125' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38837985</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: 693fda5f8a93797c2dfaaa1abd98cbbaf4a1f0ea</div><div id='time'> Time: 2021-04-12</div><div id='author'> Author: m.williams.4@research.gla.ac.uk</div><div id='file'> File Name: tests/test_proposal/test_augmented.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_augmented_prior(4)</div><div id='n_method'> N Method Name: test_augmented_prior(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_proposal/test_augmented.py</div><div id='n_file'> N File Name: tests/test_proposal/test_augmented.py</div><div id='m_start'> M Start Line: 129</div><div id='m_end'> M End Line: 131</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    for nsp, v in zip(
        config.NON_SAMPLING_PARAMETERS, config.NON_SAMPLING_DEFAULTS
    ):
        <a id="change">np.testing.assert_array_equal(</a>array[nsp], v * np.ones(n)<a id="change">)</a>


def test_empty_structured_array_dtype():
    Assert the correct default values are used when specifying the dtype</code></pre><h3>After Change</h3><pre><code class='java'>
    for nsp, v in zip(
        config.NON_SAMPLING_PARAMETERS, config.NON_SAMPLING_DEFAULTS
    ):
        <a id="change">if non_sampling_parameters</a>:
            <a id="change">np.testing.assert_array_equal(</a>array[nsp], v * np.ones(n)<a id="change">)</a>
        else:
            <a id="change">assert </a>nsp not in array.dtype.names


def test_empty_structured_array_dtype(non_sampling_parameters):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/d43909486cc968031de03eecdb3c5107adf96433#diff-df07b47321360b9882011cef1a5d72afc345eb8709c285321644a3e6e1385117L104' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38837989</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: d43909486cc968031de03eecdb3c5107adf96433</div><div id='time'> Time: 2023-01-20</div><div id='author'> Author: m.williams.4@research.gla.ac.uk</div><div id='file'> File Name: tests/test_livepoint.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_empty_structured_array_names(1)</div><div id='n_method'> N Method Name: test_empty_structured_array_names(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_livepoint.py</div><div id='n_file'> N File Name: tests/test_livepoint.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 145</div><BR>