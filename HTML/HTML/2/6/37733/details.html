<html><h3>Pattern ID :37733
</h3><img src='108371509.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        ed = int(tick_to_time[tempos[i + 1].time] * rate * time_aug_factor)
        tempo_seq[st:ed] = int(tempos[i].tempo + 0.5)
    st = int(tick_to_time[tempos[-1].time] * rate * time_aug_factor)
    tempo_seq[st:] = int(<a id="change">tempos[-1]</a>.tempo + 0.5)
    return note_seq, tempo_seq

</code></pre><h3>After Change</h3><pre><code class='java'>
    tempos = midi_obj.tempo_changes
    tempos.sort(key=lambda x: (x.time, x.tempo))
    assert len(tempos) == 1
    tempo_BPM<a id="change"> = </a>tempos[0].tempo         &#47&#47 global information, beats per minute
    tempo_BPS = tempo_BPM / 60.0        &#47&#47 global information, beats per second

    note_seq = np.zeros(int(rate * max_time * time_aug_factor), dtype=dtype)
    tempo_seq = np.zeros(int(rate * max_time * time_aug_factor), dtype=dtype)
    for i in range(len(notes)):
        st = int(tick_to_time[notes[i].start] * rate * time_aug_factor)
        ed = int(tick_to_time[notes[i].end] * rate * time_aug_factor)
        note_seq[st:ed] = notes[i].pitch if (pitch_aug_factor == 0 or notes[i].pitch == 0) else (notes[i].pitch + pitch_aug_factor)

        st_time = tick_to_time[notes[i].start] * time_aug_factor
        ed_time = tick_to_time[notes[i].end] * time_aug_factor
        note_duration = ed_time - st_time       &#47&#47 Beats in seconds
        beat_num = note_duration<a id="change"> * </a>tempo_BPS  &#47&#47 Beats nums in note
        beat_input<a id="change"> = </a><a id="change">int(</a>beat_num / 0.0125 + 0.5<a id="change">)</a>
        tempo_seq[st:ed] = beat_input

    return note_seq, tempo_seq
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sjtmusicteam/muskits/commit/976232e4df99bdbc8298e2a20436034edc51e9ab#diff-fa0e8b40b7d4f3b12f66685446b0d3165f6e397b28b96f892aa8a2fde7b74972L41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371509</div><div id='project'> Project Name: sjtmusicteam/muskits</div><div id='commit'> Commit Name: 976232e4df99bdbc8298e2a20436034edc51e9ab</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: 2016202112@ruc.edu.cn</div><div id='file'> File Name: muskit/fileio/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: midi_to_seq(5)</div><div id='n_method'> N Method Name: midi_to_seq(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: muskit/fileio/utils.py</div><div id='n_file'> N File Name: muskit/fileio/utils.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            CE = CE_new
        
        &#47&#47 convert cell array fields F, CI, CE to struct array with same
        grads_array = <a id="change">gradient_samples[0]</a>
        &#47&#47  convert struct array into individual arrays of samples
        F_grads     = grads_array.F      &#47&#47 n by l
        CI_grads    = grads_array.CI     &#47&#47 n by p
        CE_grads    = grads_array.CE     &#47&#47 n by q </code></pre><h3>After Change</h3><pre><code class='java'>
            F_grads_lst.append(grads_array.F)     &#47&#47 n by l
            CI_grads_lst.append(grads_array.CI)     &#47&#47 n by p
            CE_grads_lst.append(grads_array.CE)     &#47&#47 n by q 
        F_grads_tmp<a id="change"> = </a>np.array(F_grads_lst) 
        n = <a id="change">int(</a>F_grads_tmp.size<a id="change">/</a>l<a id="change">)</a>
        F_grads<a id="change"> = </a>F_grads_tmp.reshape((n,l))
        CI_grads = np.array(CI_grads_lst).reshape((n,p)) 
        CE_grads = np.array(CE_grads_lst).reshape((n,q))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/463b2821dec8138ab19ddc82e1bb5df260d3efdd#diff-7d6ebe2dd5e630c52526969a403e6cc06e1a43663e935fb2608bebb7dc140d23L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371508</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: 463b2821dec8138ab19ddc82e1bb5df260d3efdd</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: liang664@umn.edu</div><div id='file'> File Name: python_translation/private/qpTerminationCondition.py</div><div id='m_class'> M Class Name: qpTC</div><div id='n_method'> N Class Name: qpTC</div><div id='m_method'> M Method Name: qpTerminationCondition(5)</div><div id='n_method'> N Method Name: qpTerminationCondition(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python_translation/private/qpTerminationCondition.py</div><div id='n_file'> N File Name: python_translation/private/qpTerminationCondition.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.time_depth = num_frames
        self.video_path = video_path
        &#47&#47 self.resize = resize
        self.video_file_name = <a id="change">video_path.split(&quot/&quot)[-1]</a>.split(&quot.&quot)[0]
        self.target_path = target_path
        self.frames = None
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 self.resize = resize
        self.target_path = target_signal_path
        self.frames = None
        self.clip_size<a id="change"> = </a>clip_size
        self.num_slices<a id="change"> = </a><a id="change">int(</a>self.time_depth<a id="change">/</a>self.clip_size<a id="change">)</a>

        mean = (0.485, 0.456, 0.406)
        std = (0.229, 0.224, 0.225)
        &#47&#47 Maybe add more augmentations</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/anweshcr7/rhythmnet/commit/be723666bfcfc6953d1182af0b44f044f6a72cf1#diff-84764692ec740d5cd6dd45310b3a8d6905c03b4f1781b9b497e636a34fb54fb9L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371554</div><div id='project'> Project Name: anweshcr7/rhythmnet</div><div id='commit'> Commit Name: be723666bfcfc6953d1182af0b44f044f6a72cf1</div><div id='time'> Time: 2021-01-10</div><div id='author'> Author: anwesh.marwade@beyondsports.nl</div><div id='file'> File Name: src/utils/dataset.py</div><div id='m_class'> M Class Name: DataLoaderRhythmNet</div><div id='n_method'> N Class Name: DataLoaderRhythmNet</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: src/utils/dataset.py</div><div id='n_file'> N File Name: src/utils/dataset.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 29</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    img /= 255.0  &#47&#47 get to [0, 1] range
    if target_shape is not None:
        if isinstance(target_shape, int) and target_shape != -1:  &#47&#47 scalar -&gt; implicitly setting the height
            ratio = target_shape / <a id="change">img.shape[0]</a>
            width = int(img.shape[1] * ratio)
            img = cv.resize(img, (width, target_shape), interpolation=cv.INTER_CUBIC)
        else:  &#47&#47 set both dimensions to target shape
            img = cv.resize(img, (target_shape[1], target_shape[0]), interpolation=cv.INTER_CUBIC)</code></pre><h3>After Change</h3><pre><code class='java'>
    if target_shape is not None:  &#47&#47 resize section
        if isinstance(target_shape, int) and target_shape != -1:  &#47&#47 scalar -&gt; implicitly setting the height
            current_height, current_width = img.shape[:2]
            new_height<a id="change"> = </a>target_shape
            new_width = <a id="change">int(</a>current_width<a id="change"> * </a>(new_height / current_height)<a id="change">)</a>
            img = cv.resize(img, (new_width, new_height), interpolation=cv.INTER_CUBIC)
        else:  &#47&#47 set both dimensions to target shape
            img = cv.resize(img, (target_shape[1], target_shape[0]), interpolation=cv.INTER_CUBIC)

    &#47&#47 this need to go after resizing - otherwise cv.resize will push values outside of [0,1] range
    img<a id="change"> = </a>img.astype(np.float32)  &#47&#47 convert from uint8 to float32
    img /= 255.0  &#47&#47 get to [0, 1] range
    return img
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gordicaleksa/pytorch-neural-style-transfer/commit/1719b37e3267fbafe0ae81eb6b711fed6a54f675#diff-9653b8c2ce917a6134298b00c8b3f7d4b7c4dc473a752303f37a870392742127L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371469</div><div id='project'> Project Name: gordicaleksa/pytorch-neural-style-transfer</div><div id='commit'> Commit Name: 1719b37e3267fbafe0ae81eb6b711fed6a54f675</div><div id='time'> Time: 2020-08-02</div><div id='author'> Author: gordicaleksa@gmail.com</div><div id='file'> File Name: utils/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_image(2)</div><div id='n_method'> N Method Name: load_image(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/utils.py</div><div id='n_file'> N File Name: utils/utils.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 35</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.viewer.draw_image(img)
        &#47&#47 draw a transparent circle around target point with variable radius
        &#47&#47 based on the difference z-direction
        diff_z = abs(current_point[2]-<a id="change">target_point[2]</a>)
        self.viewer.draw_circle(radius=diff_z,
                                pos_x=target_point[0],
                                pos_y=target_point[1],</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 rescale image
        &#47&#47 INTER_NEAREST, INTER_LINEAR, INTER_AREA, INTER_CUBIC, INTER_LANCZOS4
        scale_x = 2
        scale_y<a id="change"> = </a>2
        img<a id="change"> = </a>cv2.resize(img,
                         (int(scale_x*img.shape[1]),<a id="change">int(</a>scale_y<a id="change">*</a>img.shape[0]<a id="change">)</a>),
                         interpolation=cv2.INTER_LINEAR)
        &#47&#47 skip if there is a viewer open
        if self.viewer is None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/4abcc2eeb57bced99ef1ef46d8dfdb423aa213da#diff-4821e83b6435b9f0aba912172fa587060e29cc9674406538e661473e9b8a4b54L371' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371567</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 4abcc2eeb57bced99ef1ef46d8dfdb423aa213da</div><div id='time'> Time: 2018-01-12</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/PlaneDetection/detectPlanePlayer.py</div><div id='m_class'> M Class Name: MedicalPlayer</div><div id='n_method'> N Class Name: MedicalPlayer</div><div id='m_method'> M Method Name: display(2)</div><div id='n_method'> N Method Name: display(2)</div><div id='m_parent_class'> M Parent Class: gym.Env</div><div id='n_parent_class'> N Parent Class: gym.Env</div><div id='m_file'> M File Name: examples/PlaneDetection/detectPlanePlayer.py</div><div id='n_file'> N File Name: examples/PlaneDetection/detectPlanePlayer.py</div><div id='m_start'> M Start Line: 374</div><div id='m_end'> M End Line: 399</div><div id='n_start'> N Start Line: 380</div><div id='n_end'> N End Line: 400</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            bbox = annotations[&quotbbox&quot]
            bbox[:, :4] *= scale
            bbox = clip_boxes(bbox, (scaled_height, scaled_width))
            indices = <a id="change">np.where(np.sum(bbox, axis=1) != 0)[0]</a>
            if len(indices) &lt; len(bbox):
                bbox = np.take(bbox, indices)
                annotations[&quotcls&quot] = np.take(annotations[&quotcls&quot], indices)
            annotations[&quotbbox&quot] = bbox</code></pre><h3>After Change</h3><pre><code class='java'>

        img_scale_y = self.target_size[0] / height
        img_scale_x = self.target_size[1] / width
        img_scale<a id="change"> = </a>min(img_scale_y, img_scale_x)
        scaled_h<a id="change"> = </a><a id="change">int(</a>height<a id="change"> * </a>img_scale<a id="change">)</a>
        scaled_w = int(width * img_scale)

        new_img = Image.new("RGB", (self.target_size[1], self.target_size[0]))
        interp_method = _pil_interp(self.interpolation)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rwightman/efficientdet-pytorch/commit/143f26f2857a5b14a1954ce400e88e65adcf073c#diff-479d84d070ee9f281525485c858feac53f0c674c69e1751c37e5f9aacf9e6db2L65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108371454</div><div id='project'> Project Name: rwightman/efficientdet-pytorch</div><div id='commit'> Commit Name: 143f26f2857a5b14a1954ce400e88e65adcf073c</div><div id='time'> Time: 2020-04-18</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: data/transforms.py</div><div id='m_class'> M Class Name: ResizePad</div><div id='n_method'> N Class Name: ResizePad</div><div id='m_method'> M Method Name: __call__(3)</div><div id='n_method'> N Method Name: __call__(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data/transforms.py</div><div id='n_file'> N File Name: data/transforms.py</div><div id='m_start'> M Start Line: 67</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 104</div><BR>