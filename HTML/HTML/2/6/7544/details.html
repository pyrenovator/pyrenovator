<html><h3>Pattern ID :7544
</h3><img src='24905820.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            group_df = group_data[1]
            sample_values = dict(group_df[dataset.features].iloc[0])
            labels = tuple(sorted(group_df[label_name].unique()))
            sample = pd.DataFrame.from_dict({&quotindex&quot: [labels] + list(<a id="change">sample_values.values()</a>)},
                                            columns=[ambiguous_label_name] + list(sample_values.keys()),
                                            orient=&quotindex&quot)
            n_data_sample = group_df.shape[0]</code></pre><h3>After Change</h3><pre><code class='java'>
                display_sample[ambiguous_label_name] = ambiguous_labels
                display_samples.append(display_sample)

        <a id="change">if len(display_samples) == 0</a>:
            display<a id="change"> = </a>None
        else:
            display<a id="change"> = </a>pd.DataFrame.from_records(display_samples[:self.n_to_show])
            display.set_index(ambiguous_label_name, inplace=True)
            display = [
                &quotEach row in the table shows an example of a data sample &quot</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/b0bf20b9abb8067eac01dfc710851aac05ca4564#diff-f12b3d23a1ed0bbbd12a91115b30111a34beba1883c76c196032eb3cdd77a83fL64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24905820</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: b0bf20b9abb8067eac01dfc710851aac05ca4564</div><div id='time'> Time: 2022-06-29</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: deepchecks/tabular/checks/data_integrity/conflicting_labels.py</div><div id='m_class'> M Class Name: ConflictingLabels</div><div id='n_method'> N Class Name: ConflictingLabels</div><div id='m_method'> M Method Name: run_logic(3)</div><div id='n_method'> N Method Name: run_logic(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetCheck</div><div id='n_parent_class'> N Parent Class: SingleDatasetCheck</div><div id='m_file'> M File Name: deepchecks/tabular/checks/data_integrity/conflicting_labels.py</div><div id='n_file'> N File Name: deepchecks/tabular/checks/data_integrity/conflicting_labels.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 123</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Axes colors
    &#47&#47 https://stackoverflow.com/questions/7778954/elegantly-changing-the-color-of-a-plot-frame-in-matplotlib/7944576
    plt.setp(<a id="change">ax.spines.values()</a>, color=&quot&#47&#47737373&quot)
    ax.tick_params(axis=&quotx&quot, colors=&quot&#47&#47737373&quot)
    ax.tick_params(axis=&quoty&quot, colors=&quot&#47&#47737373&quot)
</code></pre><h3>After Change</h3><pre><code class='java'>
    
        Plot encodings using TSNE dimentionality reduction
    
    <a id="change">if </a>num_components != 2 and <a id="change">num_components != 3</a>:
        raise NotImplementedError(&quotUnsupported number ({}) of tsne components requested. Only 2D and 3D are supported&quot.format(
            num_components
        ))
    &#47&#47 https://towardsdatascience.com/visualising-high-dimensional-datasets-using-pca-and-t-sne-in-python-8ef87e7915b
    &#47&#47 https://scipy-lectures.org/packages/scikit-learn/auto_examples/plot_tsne.html
    tsne = TSNE(n_components=num_components, random_state=0)
    enc_reduced = tsne.fit_transform(all_encodings)

    &#47&#47 ----- Visualize ------
    &#47&#47 update class labeling
    &#47&#47 This is hardcoded stuff because it&quots mostly needed for final presentation
    &#47&#47 TODO avoid hardcoding dataset names (or template names) -- picking up from dataset properties?
    mapping = {
        &quottee_sleeveless&quot: &quotShirts and dresses&quot,
        &quottee&quot: &quotShirts and dresses&quot,
        &quotjacket&quot: &quotJacket&quot,
        &quotjacket_hood&quot: &quotOpen Hoody&quot,
        &quotpants_straight_sides&quot: &quotPants&quot,
        &quotwb_pants_straight&quot: &quotWaistband pants&quot,
        &quotjumpsuit_sleeveless&quot: &quotSleeveless Jumpsuit&quot,
        &quotskirt_4_panels&quot: &quot4-panel Skirts&quot,
        &quotskirt_2_panels&quot: &quot2-panel Skirts&quot,
        &quotskirt_8_panels&quot: &quot8-panel Skirts&quot,
        &quotdress_sleeveless&quot: &quotSleeveless Dresses &quot,
        &quotwb_dress_sleeveless&quot: &quotSleeveless Waistband dresses&quot
    }
    classes = np.array([mapping.get(label, &quotUnknown&quot) for label in classes])

    &#47&#47 define colors
    colors = {
        &quotShirts and dresses&quot: (0.747, 0.236, 0.048),  &#47&#47 (190, 60, 12)
        &quotJacket&quot: (0.4793117642402649, 0.10461537539958954, 0.0),
        &quotOpen Hoody&quot: (0.746999979019165, 0.28518322110176086, 0.11503798514604568), 
        &quot8-panel Skirts&quot: (0.048, 0.0290, 0.747),  &#47&#47 (12, 74, 190)
        &quot4-panel Skirts&quot: (0.048, 0.0290, 0.747),  &#47&#47 (12, 74, 190)
        &quot2-panel Skirts&quot: (0.24227915704250336, 0.6172128915786743, 1.0),  
        &quotPants&quot: (0.025, 0.354, 0.152),  &#47&#47 (6, 90. 39)
        &quotJumpsuit&quot: (0.6104, 0.3023, 0.0872),  &#47&#47 (105,52,15)
        &quotWaistband dresses&quot: (0.2, 0.007, 0.192),  
        &quotDresses&quot: (0.527, 0.0, 0.0),  &#47&#47 (134,0,0)
        &quotWaistband pants&quot: (0.250900000333786, 0.3528999984264374, 0.13330000638961792), 
        &quotUnknown&quot: (0.15, 0.15, 0.15)
    }

    &#47&#47 global plot edges color setup
    &#47&#47 https://stackoverflow.com/questions/7778954/elegantly-changing-the-color-of-a-plot-frame-in-matplotlib/7944576
    base_color<a id="change"> = </a>&quot&#47&#47737373&quot
    matplotlib.rc(&quotaxes&quot, edgecolor=base_color)

    &#47&#47 plot
    if num_components == 3:
        fig = plt.figure()
        ax<a id="change"> = </a>fig.add_subplot(111, projection=&quot3d&quot)
    else:  &#47&#47 2D
        fig, ax = plt.subplots()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maria-korosteleva/garment-pattern-estimation/commit/749ecd380ee700191dcf477911e3b0db9e90beb8#diff-fde64aebe676c905a3754f4c07acbf1916b36af379b3ef969cd9c3c32db2abe0L112' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24905854</div><div id='project'> Project Name: maria-korosteleva/garment-pattern-estimation</div><div id='commit'> Commit Name: 749ecd380ee700191dcf477911e3b0db9e90beb8</div><div id='time'> Time: 2021-04-07</div><div id='author'> Author: mariako@kaist.ac.kr</div><div id='file'> File Name: nn/evaluation_scripts/latent_space_vis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: tsne_plot(7)</div><div id='n_method'> N Method Name: tsne_plot(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nn/evaluation_scripts/latent_space_vis.py</div><div id='n_file'> N File Name: nn/evaluation_scripts/latent_space_vis.py</div><div id='m_start'> M Start Line: 158</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 204</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def sample_iter(self):

        for path in tqdm(self.raw_paths, desc="Files"):
            molecules = list(<a id="change">h5py.File(path).values()</a>)

            for mol in tqdm(molecules, desc="Molecules", leave=False):
                z = pt.tensor(mol["atomic_numbers"], dtype=pt.long)</code></pre><h3>After Change</h3><pre><code class='java'>
            ):

                &#47&#47 Subsample molecules
                <a id="change">if i_mol % self.subsample_molecules != 0</a>:
                    continue

                z = pt.tensor(mol["atomic_numbers"], dtype=pt.long)
                fq = pt.tensor(mol["formal_charges"], dtype=pt.long)
                q = fq.sum()

                for pos, y, neg_dy, pq, dp in load_confs(mol, n_atoms=len(z)):

                    &#47&#47 Skip samples with large forces
                    if self.max_gradient:
                        if neg_dy.norm(dim=1).max() &gt; float(self.max_gradient):
                            continue

                    &#47&#47 Create a sample
                    args = dict(
                        z=z, pos=pos, y=y.view(1, 1), neg_dy=neg_dy, q=q, pq=pq, dp=dp
                    )
                    if mol_ids:
                        args["mol_id"]<a id="change"> = </a>mol_id
                    data<a id="change"> = </a>Data(**args)

                    if self.pre_filter is not None and not self.pre_filter(data):
                        continue</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/d23e6500f2cef1fa56d6c99ce5fdb983f1379bca#diff-56de3e28dd2b438171f4af7de59cc66305304d98e21b24faf4d744698d8c1aa3L72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24905816</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: d23e6500f2cef1fa56d6c99ce5fdb983f1379bca</div><div id='time'> Time: 2022-10-28</div><div id='author'> Author: peastman@stanford.edu</div><div id='file'> File Name: torchmdnet/datasets/ace.py</div><div id='m_class'> M Class Name: Ace</div><div id='n_method'> N Class Name: Ace</div><div id='m_method'> M Method Name: sample_iter(2)</div><div id='n_method'> N Method Name: sample_iter(1)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: torchmdnet/datasets/ace.py</div><div id='n_file'> N File Name: torchmdnet/datasets/ace.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 206</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        cls_distributions = cls.get_distributions()
        &#47&#47for k, v in kwargs.items():
        &#47&#47    print(k, (type(v)))
        print(<a id="change">kwargs.values()</a>)
        assert all([isinstance(v, Distribution) for v in kwargs.values()])
        print(kwargs.keys())
        print(cls_distributions.keys())</code></pre><h3>After Change</h3><pre><code class='java'>
            for parameter in cls_distribution.get_distribution_parameters().values():
                parameter.requires_grad_(requires_grad)
        ridx = cls.__qualname__.rfind("_")
        <a id="change">if ridx == -1</a>:
            cls_oldname<a id="change"> = </a>cls.__qualname__
        else:
            cls_oldname<a id="change"> = </a>cls.__qualname__[:ridx]
        new_cls_name = f"{cls_oldname}_{torch.randint(1000000,9000000,(1,)).item()}"
        new_cls = type(new_cls_name, (cls,), cls_distributions)
        return new_cls</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/anguelos/tormentor/commit/8c66a4efb958e0096ec2132a0cb2c4e0d2385948#diff-5701e99c17cab1b133e351b7d6f5979b7050ffe98cbf4a8e7c4245d003e06a59L172' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24905851</div><div id='project'> Project Name: anguelos/tormentor</div><div id='commit'> Commit Name: 8c66a4efb958e0096ec2132a0cb2c4e0d2385948</div><div id='time'> Time: 2020-06-25</div><div id='author'> Author: anguelos.nicolaou@gmail.com</div><div id='file'> File Name: tormentor/base_augmentation.py</div><div id='m_class'> M Class Name: DeterministicImageAugmentation</div><div id='n_method'> N Class Name: DeterministicImageAugmentation</div><div id='m_method'> M Method Name: override_distributions(2)</div><div id='n_method'> N Method Name: override_distributions(2)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: tormentor/base_augmentation.py</div><div id='n_file'> N File Name: tormentor/base_augmentation.py</div><div id='m_start'> M Start Line: 173</div><div id='m_end'> M End Line: 186</div><div id='n_start'> N Start Line: 158</div><div id='n_end'> N End Line: 163</div><BR>