<html><h3>Pattern ID :16723
</h3><img src='55972438.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for i in range(epochs): &#47&#47 trains the NN 1,000 times
            if i % 50 ==0: 
                print ("For iteration &#47&#47 " + str(i) + "\n")
                print ("Loss: \n" + str(np.mean(<a id="change">np.square(</a>Y_train<a id="change"> - </a>self.feedforward()<a id="change">)</a>))) &#47&#47 mean sum squared loss
                print ("\n")
            self.output = self.feedforward()
            self.backprop()</code></pre><h3>After Change</h3><pre><code class='java'>
        for i in range(epochs): &#47&#47 trains the CNN in epochs
            loss = 0
            num_correct = 0
            <a id="change">for </a>j, (image, label) in enumerate(zip(X_train, Y_train))<a id="change">:
                </a>if j % 100 == 99:
                    print(
                        &quot[Step %d] Past 100 steps: Average Loss %.3f | Accuracy: %d%%&quot %
                        (j + 1, loss / 100, num_correct))
                    loss = 0
                    num_correct<a id="change"> = </a>0

                loss<a id="change">, acc = </a>self.train(image, label, lr=learning_rate)
                loss += loss
                num_correct += acc
    </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/skylark0924/machine-learning-is-all-you-need/commit/8bc9d709f482e2535d2f6411c8592c81e9868f23#diff-8e3717ea91418153c77560bb595488a6f8fb3b179a0109f17a930014848fcb2bL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55972438</div><div id='project'> Project Name: skylark0924/machine-learning-is-all-you-need</div><div id='commit'> Commit Name: 8bc9d709f482e2535d2f6411c8592c81e9868f23</div><div id='time'> Time: 2020-04-23</div><div id='author'> Author: l.syj@163.com</div><div id='file'> File Name: 10CNN/CNN_models.py</div><div id='m_class'> M Class Name: Skylark_CNN</div><div id='n_method'> N Class Name: Skylark_CNN</div><div id='m_method'> M Method Name: fit(6)</div><div id='n_method'> N Method Name: fit(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: 10CNN/CNN_models.py</div><div id='n_file'> N File Name: 10CNN/CNN_models.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ctx = Context()
    ctx.parameters = params
    src, tgt = inp
    return <a id="change">jnp.square(</a>attention(ctx, feed_forward(ctx, src))<a id="change"> - </a>tgt<a id="change">)</a>.mean()


def update(ctx: Context, grads: typing.Dict[str, jnp.ndarray]) -&gt; typing.Dict[str, jnp.ndarray]:</code></pre><h3>After Change</h3><pre><code class='java'>
    ctx = Context()
    ctx.parameters = params
    src, tgt = inp
    <a id="change">for _</a> in range(ctx.depth)<a id="change">:
        </a>src<a id="change"> += </a>feed_forward(ctx, src)
        src<a id="change"> += </a>attention(ctx, src)
    return jnp.square(src - tgt).mean()

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/homebrewnlp/homebrewnlp-jax/commit/60869c89f86e49153af903f2c71d3ef34fda3574#diff-fada037ad086638e65c7ae77e3d223963e9afaa26326aab0ea718f4013176e43L134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55972375</div><div id='project'> Project Name: homebrewnlp/homebrewnlp-jax</div><div id='commit'> Commit Name: 60869c89f86e49153af903f2c71d3ef34fda3574</div><div id='time'> Time: 2021-07-19</div><div id='author'> Author: 39779310+ClashLuke@users.noreply.github.com</div><div id='file'> File Name: model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute(2)</div><div id='n_method'> N Method Name: compute(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model.py</div><div id='n_file'> N File Name: model.py</div><div id='m_start'> M Start Line: 135</div><div id='m_end'> M End Line: 138</div><div id='n_start'> N Start Line: 136</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for i in range(epochs): &#47&#47 trains the NN 1,000 times
            if i % 50 ==0: 
                print ("For iteration &#47&#47 " + str(i) + "\n")
                print ("Loss: \n" + str(np.mean(<a id="change">np.square(</a>Y_train<a id="change"> - </a>self.feedforward()<a id="change">)</a>))) &#47&#47 mean sum squared loss
                print ("\n")
            self.output = self.feedforward()
            self.backprop()</code></pre><h3>After Change</h3><pre><code class='java'>
        for i in range(epochs): &#47&#47 trains the CNN in epochs
            loss = 0
            num_correct = 0
            <a id="change">for j</a>, (image, label) in enumerate(zip(X_train, Y_train))<a id="change">:
                </a>if j % 100 == 99:
                    print(
                        &quot[Step %d] Past 100 steps: Average Loss %.3f | Accuracy: %d%%&quot %
                        (j + 1, loss / 100, num_correct))
                    loss<a id="change"> = </a>0
                    num_correct = 0

                loss, acc = self.train(image, label, lr=learning_rate)
                loss += loss
                num_correct<a id="change"> += </a>acc
    
    def forward(self, image, label):
        out = self.conv2d.forward((image/255)-0.5)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/skylark0924/machine-learning-is-all-you-need/commit/8bc9d709f482e2535d2f6411c8592c81e9868f23#diff-8e3717ea91418153c77560bb595488a6f8fb3b179a0109f17a930014848fcb2bL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 55972466</div><div id='project'> Project Name: skylark0924/machine-learning-is-all-you-need</div><div id='commit'> Commit Name: 8bc9d709f482e2535d2f6411c8592c81e9868f23</div><div id='time'> Time: 2020-04-23</div><div id='author'> Author: l.syj@163.com</div><div id='file'> File Name: 10CNN/CNN_models.py</div><div id='m_class'> M Class Name: Skylark_CNN</div><div id='n_method'> N Class Name: Skylark_CNN</div><div id='m_method'> M Method Name: fit(6)</div><div id='n_method'> N Method Name: fit(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: 10CNN/CNN_models.py</div><div id='n_file'> N File Name: 10CNN/CNN_models.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 48</div><BR>