<html><h3>Pattern ID :12898
</h3><img src='43577528.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 TODO &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
        &#47&#47 currently returning all features as it is. Instead should only return features of those boxes that satisfy the condition
        &#47&#47 use utils.py/get_intersection_area(box1, box2)
        selected_idx = <a id="change">np.arange(</a>other_boxes.shape[0]<a id="change">)</a>

        return other_box_features[selected_idx]
    
    def get_detections_losses(self, model, class_logits, box_regression, labels, regression_targets, proposals, image_sizes, original_image_sizes, name=&quot&quot):</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 TODO &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
        &#47&#47 currently returning all features as it is. Instead should only return features of those boxes that satisfy the condition
        &#47&#47 use utils.py/get_intersection_area(box1, box2)
        selected<a id="change"> = </a><a id="change">[]</a>
        N = other_boxes.shape[0]
        <a id="change">for </a>i in range(N)<a id="change">:
            </a>if get_intersection_area(box, other_boxes[i]) / get_area(other_boxes[i]) &gt;= area_thresh:
                <a id="change">selected.append(</a>other_box_features[i]<a id="change">)</a>
        if selected:
            selected = torch.stack(selected)
            return selected
        return None</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kevalmorabia97/object-and-semantic-part-detection-pytorch/commit/bdc3a83bb432a561f5647561c13b83dc37725bd8#diff-dcfeaa5ac3dffd54264034760914588d92fc7395c81eaa9274715840dc28100bL209' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43577528</div><div id='project'> Project Name: kevalmorabia97/object-and-semantic-part-detection-pytorch</div><div id='commit'> Commit Name: bdc3a83bb432a561f5647561c13b83dc37725bd8</div><div id='time'> Time: 2020-05-02</div><div id='author'> Author: taragayatri@gmail.com</div><div id='file'> File Name: models.py</div><div id='m_class'> M Class Name: JointDetector</div><div id='n_method'> N Class Name: JointDetector</div><div id='m_method'> M Method Name: get_related_box_features(5)</div><div id='n_method'> N Method Name: get_related_box_features(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models.py</div><div id='n_file'> N File Name: models.py</div><div id='m_start'> M Start Line: 209</div><div id='m_end'> M End Line: 211</div><div id='n_start'> N Start Line: 227</div><div id='n_end'> N End Line: 249</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.json_data = []

        for songID, track in enumerate(self.mus.tracks):
            for start in <a id="change">np.arange(</a>0, track.duration, duration - overlap<a id="change">)</a>:
                if start + duration &gt;= track.duration:
                    break
                </code></pre><h3>After Change</h3><pre><code class='java'>
            if set(self.sources) == set(__sources__):
                mixture = track.audio.transpose(1, 0)
            else:
                sources<a id="change"> = </a><a id="change">[]</a>
                <a id="change">for _source</a> in self.sources<a id="change">:
                    </a><a id="change">sources.append(</a>track.targets[_source].audio.transpose(1, 0)[np.newaxis]<a id="change">)</a>
                sources = np.concatenate(sources, axis=0)
                mixture = sources.sum(axis=0)
            
            self.std[songID] = np.std(mixture.mean(axis=0))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/b7a22e8f24f8206fc28ef8b7f01f01fcce0a498c#diff-8f1539f8f92a2935319a03c1ee38b31a527ccde3261a84eef37557a3687d73b3L85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43577516</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: b7a22e8f24f8206fc28ef8b7f01f01fcce0a498c</div><div id='time'> Time: 2021-08-10</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='m_class'> M Class Name: WaveTrainDataset</div><div id='n_method'> N Class Name: WaveTrainDataset</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: WaveDataset</div><div id='n_parent_class'> N Parent Class: WaveDataset</div><div id='m_file'> M File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='n_file'> N File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 117</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 98</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if sparse_variables_1 &gt; 0:
        if sparse_variables_1 &lt; 1:
            sparse_variables_1 = np.ceil(sparse_variables_1 * N).astype(&quotint&quot)
        up[np.random.choice(<a id="change">np.arange(</a>N<a id="change">)</a>, N - sparse_variables_1, replace=False)] = 0
    vp = np.random.rand(M, 1)
    if sparse_variables_2 &gt; 0:
        if sparse_variables_2 &lt; 1:</code></pre><h3>After Change</h3><pre><code class='java'>
    
    z = np.random.normal(0, 1, n)
    views = []
    true_features<a id="change"> = </a><a id="change">[]</a>
    <a id="change">for </a>p, <a id="change">sparsity</a> in zip(view_features, view_sparsity)<a id="change">:
        </a>weights = np.random.rand(p, 1)
        if sparsity &gt; 0:
            if sparsity &lt; 1:
                sparsity = np.ceil(sparsity * p).astype(&quotint&quot)
            weights[np.random.choice(np.arange(p), p - sparsity, replace=False)] = 0

        gaussian_x = np.random.normal(0, eps, (n, p))
        view = np.outer(z, weights)
        view += gaussian_x
        views.append(view)
        <a id="change">true_features.append(</a>weights<a id="change">)</a>
    return views, true_features


class CCA_Dataset(Dataset):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/6e0c61ce1ab34a95c67f794aefa73814ef633df0#diff-530930897d76d92962b08f6b999b56ba19208433ee58e0c9b3aa3b0d86255bf2L327' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43577524</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: 6e0c61ce1ab34a95c67f794aefa73814ef633df0</div><div id='time'> Time: 2021-04-27</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: generate_simple_data(4)</div><div id='n_method'> N Method Name: generate_simple_data(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cca_zoo/data.py</div><div id='n_file'> N File Name: cca_zoo/data.py</div><div id='m_start'> M Start Line: 327</div><div id='m_end'> M End Line: 361</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 123</div><BR>