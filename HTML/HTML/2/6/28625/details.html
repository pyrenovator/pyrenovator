<html><h3>Pattern ID :28625
</h3><img src='84533073.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            The next RunConfig generated by this class
        

        <a id="change">for </a>model_configs in self._model_configs_list<a id="change">:
            </a>model_config_names = [
                model_config.get_field(&quotname&quot) for model_config in model_configs
            ]

            self._pacg<a id="change"> = </a>PerfAnalyzerConfigGenerator(self._config,
                                                     model_config_names,
                                                     self._model_pa_flags,
                                                     self._model_parameters)</code></pre><h3>After Change</h3><pre><code class='java'>
        model_config_generator = self._mcg.next_config()

        while not self._mcg.is_done():
            model_config<a id="change"> = </a><a id="change">next(</a>model_config_generator<a id="change">)</a>

            self._pacg<a id="change"> = </a>PerfAnalyzerConfigGenerator(
                self._config, model_config.get_field(&quotname&quot),
                self._model_pa_flags, self._model_parameters)
            perf_analyzer_config_generator = self._pacg.next_config()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/f3992399068cf61f9f3f8ecf6f3606cec7062ebf#diff-85124372ff8c31042ca3fe8c59e17e5df7783515c925cd2382f3c8188c41dcfdL69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84533073</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: f3992399068cf61f9f3f8ecf6f3606cec7062ebf</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: 50968584+tgerdesnv@users.noreply.github.com</div><div id='file'> File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='m_class'> M Class Name: RunConfigGenerator</div><div id='n_method'> N Class Name: RunConfigGenerator</div><div id='m_method'> M Method Name: next_config(1)</div><div id='n_method'> N Method Name: next_config(1)</div><div id='m_parent_class'> M Parent Class: ConfigGeneratorInterface</div><div id='n_parent_class'> N Parent Class: ConfigGeneratorInterface</div><div id='m_file'> M File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='n_file'> N File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='m_start'> M Start Line: 71</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        vocab = self.translator.fields[&quottgt&quot].vocab
        if n_best &gt; self.translator.opt.beam_size:
            self.translator.opt.beam_size = n_best
        <a id="change">for batch</a> in testData<a id="change">:
            </a>_<a id="change">, lens = </a>batch.src
            &#47&#47 This only works if batch_size is one

            predBatch, goldBatch, predScore, goldScore, attn, src = (</code></pre><h3>After Change</h3><pre><code class='java'>
        vocab = self.translator.fields[&quottgt&quot].vocab
        if n_best &gt; self.translator.opt.beam_size:
            self.translator.opt.beam_size = n_best
        batch<a id="change"> = </a><a id="change">next(</a>testData.__iter__()<a id="change">)</a>
        _<a id="change">, lens = </a>batch.src
        &#47&#47 This only works if batch_size is one

        predBatch, goldBatch, predScore, goldScore, attn, src = (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thunlp/openattack/commit/4de951a0100064347949add1a115b1b6bda847f3#diff-95f10f07aa9ac20b2d9b309fc164abb321785d727b3fa7376a96b449df885b72L96' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84533075</div><div id='project'> Project Name: thunlp/openattack</div><div id='commit'> Commit Name: 4de951a0100064347949add1a115b1b6bda847f3</div><div id='time'> Time: 2020-07-13</div><div id='author'> Author: zhougr18@mails.tsinghua.edu.cn</div><div id='file'> File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='m_class'> M Class Name: OnmtModel</div><div id='n_method'> N Class Name: OnmtModel</div><div id='m_method'> M Method Name: translate(4)</div><div id='n_method'> N Method Name: translate(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='n_file'> N File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='m_start'> M Start Line: 104</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 147</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            The next RunConfig generated by this class
        

        <a id="change">for model_configs</a> in self._model_configs_list<a id="change">:
            </a>model_config_names = [
                model_config.get_field(&quotname&quot) for model_config in model_configs
            ]

            self._pacg = PerfAnalyzerConfigGenerator(self._config,
                                                     model_config_names,
                                                     self._model_pa_flags,
                                                     self._model_parameters)
            perf_analyzer_config_generator<a id="change"> = </a>self._pacg.next_config()
            while not self._pacg.is_done():
                perf_analyzer_config = next(perf_analyzer_config_generator)
                run_config = self._generate_run_config(model_configs,</code></pre><h3>After Change</h3><pre><code class='java'>
        model_config_generator = self._mcg.next_config()

        while not self._mcg.is_done():
            model_config<a id="change"> = </a><a id="change">next(</a>model_config_generator<a id="change">)</a>

            self._pacg = PerfAnalyzerConfigGenerator(
                self._config, model_config.get_field(&quotname&quot),
                self._model_pa_flags, self._model_parameters)
            perf_analyzer_config_generator<a id="change"> = </a>self._pacg.next_config()
            while not self._pacg.is_done():
                perf_analyzer_config = next(perf_analyzer_config_generator)
                run_config = self._generate_run_config(model_config,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/f3992399068cf61f9f3f8ecf6f3606cec7062ebf#diff-85124372ff8c31042ca3fe8c59e17e5df7783515c925cd2382f3c8188c41dcfdL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84533074</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: f3992399068cf61f9f3f8ecf6f3606cec7062ebf</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: 50968584+tgerdesnv@users.noreply.github.com</div><div id='file'> File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='m_class'> M Class Name: RunConfigGenerator</div><div id='n_method'> N Class Name: RunConfigGenerator</div><div id='m_method'> M Method Name: next_config(1)</div><div id='n_method'> N Method Name: next_config(1)</div><div id='m_parent_class'> M Parent Class: ConfigGeneratorInterface</div><div id='n_parent_class'> N Parent Class: ConfigGeneratorInterface</div><div id='m_file'> M File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='n_file'> N File Name: model_analyzer/config/generate/run_config_generator.py</div><div id='m_start'> M Start Line: 71</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            batch_size=opt.batch_size, train=False, sort=False,
            shuffle=False)
        gold = []
        <a id="change">for batch</a> in testData<a id="change">:
            </a>scores<a id="change"> = </a>self.translator._runTarget(batch, data)
            gold.extend([x for x in scores.cpu().numpy()[0]])
        return np.array(gold)
</code></pre><h3>After Change</h3><pre><code class='java'>
            batch_size=opt.batch_size, train=False, sort=False,
            shuffle=False)
        gold = []
        batch<a id="change"> = </a><a id="change">next(</a>testData.__iter__()<a id="change">)</a>
        scores<a id="change"> = </a>self.translator._runTarget(batch, data)
        gold.extend([x for x in scores.cpu().numpy()[0]])
        return np.array(gold)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thunlp/openattack/commit/4de951a0100064347949add1a115b1b6bda847f3#diff-95f10f07aa9ac20b2d9b309fc164abb321785d727b3fa7376a96b449df885b72L153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84533077</div><div id='project'> Project Name: thunlp/openattack</div><div id='commit'> Commit Name: 4de951a0100064347949add1a115b1b6bda847f3</div><div id='time'> Time: 2020-07-13</div><div id='author'> Author: zhougr18@mails.tsinghua.edu.cn</div><div id='file'> File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='m_class'> M Class Name: OnmtModel</div><div id='n_method'> N Class Name: OnmtModel</div><div id='m_method'> M Method Name: score(3)</div><div id='n_method'> N Method Name: score(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='n_file'> N File Name: TAADToolbox/attackers/sears/onmt_model.py</div><div id='m_start'> M Start Line: 161</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 168</div><BR>