<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        nabla_er = -(bexp_er).unsqueeze(-1) * \
            xyz / R.unsqueeze(-1)

    <a id="change">return </a><a id="change">return_required_data(</a>derivative, _kernel,
                                _first_derivative_kernel,
                                _second_derivative_kernel<a id="change">)</a>


def return_required_data(derivative, _kernel,
                         _first_derivative_kernel,</code></pre><h3>After Change</h3><pre><code class='java'>
    er = torch.exp(-bas_exp * R)

    &#47&#47 computes the grad
    if any(x in derivative for x in <a id="change">[1</a>, <a id="change">2</a>, <a id="change">3</a>]):
        bexp_er = bas_exp * er
        nabla_er = -(bexp_er).unsqueeze(-1) * \
            xyz / R.unsqueeze(-1)</code></pre>