<html><h3>Pattern ID :1044
</h3><img src='5255616.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47     zorder=1,
            &#47&#47     linestyle=&quot--&quot,
            &#47&#47 )
            <a id="change">try:
                </a>self.plot_backprojection_set(
                    backreachable_set,
                    target_set,
                    color=&quottab:pink&quot,
                    zorder=1,
                    linestyle=&quot--&quot,
                )
            <a id="change">except</a>: 
                <a id="change">pass</a>
            &#47&#47 import pdb; pdb.set_trace()
            self.plot_target_set(
                backproj_overapprox,
                color=&quottab:blue&quot,</code></pre><h3>After Change</h3><pre><code class='java'>
                )
        
        import nn_closed_loop.constraints as constraints
        x0<a id="change"> = </a><a id="change">np.array(
            </a>[  &#47&#47 (num_inputs, 2)
                <a id="change">[</a>-5.5, -5.0<a id="change"></a>],  &#47&#47 x0min, x0max
                [-0.5, 0.5],  &#47&#47 x1min, x1max
            ]<a id="change">
        )</a>
        x0_constraint = constraints.LpConstraint(
            range=x0, p=np.inf
        )
        self.dynamics.show_trajectories(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mit-acl/nn_robustness_analysis/commit/411481973517f03f63eefbf578ca75c9500cdb2d#diff-d0698ee66895448c091d380c6631fa12fa68dc9aef7eaa12f1ed79ebf7a5445cL130' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5255616</div><div id='project'> Project Name: mit-acl/nn_robustness_analysis</div><div id='commit'> Commit Name: 411481973517f03f63eefbf578ca75c9500cdb2d</div><div id='time'> Time: 2022-02-22</div><div id='author'> Author: nrober@mit.edu</div><div id='file'> File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='m_class'> M Class Name: ClosedLoopBackwardAnalyzer</div><div id='n_method'> N Class Name: ClosedLoopBackwardAnalyzer</div><div id='m_method'> M Method Name: visualize(9)</div><div id='n_method'> N Method Name: visualize(9)</div><div id='m_parent_class'> M Parent Class: analyzers.Analyzer</div><div id='n_parent_class'> N Parent Class: analyzers.Analyzer</div><div id='m_file'> M File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='n_file'> N File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 150</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 208</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        graph.n_pulses = n_pulses

        for key, value in labels_dict.items():
            <a id="change">try:
                </a>graph[key] = torch.tensor(value)
            <a id="change">except </a>TypeError:
                &#47&#47 Cannot convert `value` to Tensor due to its data type, e.g. `str`.
                <a id="change">pass</a>

        for key, value in truth_dict.items():
            try:
                graph[key] = torch.tensor(value)</code></pre><h3>After Change</h3><pre><code class='java'>
        if len(features):
            data = np.asarray(features)[:,1:]
        else:
            data<a id="change"> = </a><a id="change">np.array([]</a><a id="change">)</a>.reshape((0, len(self._features) - 1))
        
        &#47&#47 Construct graph data object
        x = torch.tensor(data, dtype=self._dtype) </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/icecube/graphnet/commit/eb45a08bdcff1415775b1279be15dedcadbccf05#diff-abb56473e2b8bd6f07a5127359fb83021cea64a2308541034378cc5b958df695L110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5255619</div><div id='project'> Project Name: icecube/graphnet</div><div id='commit'> Commit Name: eb45a08bdcff1415775b1279be15dedcadbccf05</div><div id='time'> Time: 2021-11-11</div><div id='author'> Author: andreas.sogaard@gmail.com</div><div id='file'> File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='m_class'> M Class Name: SQLiteDataset</div><div id='n_method'> N Class Name: SQLiteDataset</div><div id='m_method'> M Method Name: _create_graph(3)</div><div id='n_method'> N Method Name: _create_graph(3)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='n_file'> N File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='m_start'> M Start Line: 125</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 161</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        backreachable_set = kwargs[&quotper_timestep&quot][-1][&quotbackreachable_set&quot]
        target_set = output_constraint
        t_max = len(kwargs[&quotper_timestep&quot])
        <a id="change">try:
            </a>self.plot_true_backprojection_sets(
                backreachable_set,
                target_set,
                t_max=t_max,
                color=self.true_backprojection_set_color,
                zorder=self.true_backprojection_set_zorder,
                linestyle=self.true_backprojection_set_linestyle,
                show_samples=True
            )
        <a id="change">except</a>:
            <a id="change">pass</a>

        &#47&#47 If they exist, plot all our loose input constraints (i.e., our one-step backprojection set estimates)
        &#47&#47 TODO: Make plotting these optional via a flag
        for info in kwargs.get(&quotper_timestep&quot, []):</code></pre><h3>After Change</h3><pre><code class='java'>

        import numpy as np
        import nn_closed_loop.constraints as constraints
        x0 = <a id="change">np.array(
            [  &#47&#47 (num_inputs, 2)
                </a>[-5.5, -4.5],  &#47&#47 x0min, x0max
                [-0.5, 0.5]<a id="change"></a>,  &#47&#47 x1min, x1max
            ]<a id="change">
        )</a>
        &#47&#47 x0 = np.array( &#47&#47 tree_trunks_vs_quadrotor_12__
        &#47&#47         [  &#47&#47 (num_inputs, 2)
        &#47&#47             [-6.5,-0.25, 2, 1.95, -0.01, -0.01],
        &#47&#47             [-6, 0.25, 2.5, 2.0, 0.01, 0.01],
        &#47&#47         ]
        &#47&#47     ).T
        &#47&#47 x0 = np.array(
        &#47&#47     [  &#47&#47 (num_inputs, 2)
        &#47&#47         [-0.5, 0.5],
        &#47&#47         [-0.5, 0.5],
        &#47&#47         [-0.01, 0.01],
        &#47&#47         [-0.01, 0.01],
        &#47&#47     ]
        &#47&#47 )
        &#47&#47 x0 = np.array(
        &#47&#47         [  &#47&#47 (num_inputs, 2)
        &#47&#47             [-2-0.25, -4+0.25],  &#47&#47 x0min, x0max
        &#47&#47             [-3., 3.],  &#47&#47 x1min, x1max
        &#47&#47             [0.49, 0.50],
        &#47&#47             [-0.01, 0.01]
        &#47&#47         ]
        &#47&#47     )
        x0_constraint = constraints.LpConstraint(
            range=x0, p=np.inf
        )
        input_dims = [x["dim"] for x in inputs_to_highlight]
        self.dynamics.show_trajectories(
            len(input_constraints) * self.dynamics.dt,
            x0_constraint,
            input_dims=input_dims,
            ax=self.partitioner.animate_axes,
            controller=self.propagator.network,
            zorder=10
        ) 

        &#47&#47 initial_range = np.array( &#47&#47 tree_trunks_vs_quadrotor_12__
        &#47&#47     [  &#47&#47 (num_inputs, 2)
        &#47&#47         [-6.5, 0.25-0.25, 2, .95, -0.01, -0.01],
        &#47&#47         [-6, 0.25+0.25, 2.5, 1.0, 0.01, 0.01],
        &#47&#47     ]
        &#47&#47 ).T

        initial_constraint<a id="change"> = </a>constraints.LpConstraint(x0)
        self.partitioner.plot_reachable_sets(
            initial_constraint,
            input_dims,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mit-acl/nn_robustness_analysis/commit/aed9f9b4eef5ac9826f2323736ec43eddc8ef5df#diff-d0698ee66895448c091d380c6631fa12fa68dc9aef7eaa12f1ed79ebf7a5445cL133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5255621</div><div id='project'> Project Name: mit-acl/nn_robustness_analysis</div><div id='commit'> Commit Name: aed9f9b4eef5ac9826f2323736ec43eddc8ef5df</div><div id='time'> Time: 2022-04-01</div><div id='author'> Author: nrober1122@gmail.com</div><div id='file'> File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='m_class'> M Class Name: ClosedLoopBackwardAnalyzer</div><div id='n_method'> N Class Name: ClosedLoopBackwardAnalyzer</div><div id='m_method'> M Method Name: visualize_single_set(10)</div><div id='n_method'> N Method Name: visualize_single_set(10)</div><div id='m_parent_class'> M Parent Class: analyzers.Analyzer</div><div id='n_parent_class'> N Parent Class: analyzers.Analyzer</div><div id='m_file'> M File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='n_file'> N File Name: nn_closed_loop/nn_closed_loop/analyzers/ClosedLoopBackwardAnalyzer.py</div><div id='m_start'> M Start Line: 218</div><div id='m_end'> M End Line: 280</div><div id='n_start'> N Start Line: 200</div><div id='n_end'> N End Line: 326</div><BR>