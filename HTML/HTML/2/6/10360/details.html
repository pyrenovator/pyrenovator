<html><h3>Pattern ID :10360
</h3><img src='36318313.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        for col in self._features:
            col_data = self.data[col]
            num_unique<a id="change"> = </a><a id="change">col_data.nunique(dropna=True)</a>
            if not is_numeric_dtype(col_data) or self.is_categorical(num_unique, len(col_data.dropna())):
                cat_columns.append(col)
        return cat_columns
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Checking for categorical dtypes
        cat_dtypes = self.data.select_dtypes(include=&quotcategory&quot)
        <a id="change">if len(cat_dtypes.columns) &gt; 0</a>:
            <a id="change">return </a>list(cat_dtypes.columns)

        for col in self._features:
            if self.is_categorical(col):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/b21044f653bb70943273dfb4cc1a020c9d537daa#diff-c8a5567eb0359a2f349a825f59c82b0c13d69cb9a593ef50be4facacdeeba015L153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36318313</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: b21044f653bb70943273dfb4cc1a020c9d537daa</div><div id='time'> Time: 2021-11-10</div><div id='author'> Author: itay@deepchecks.com</div><div id='file'> File Name: mlchecks/base/dataset.py</div><div id='m_class'> M Class Name: Dataset</div><div id='n_method'> N Class Name: Dataset</div><div id='m_method'> M Method Name: infer_categorical_features(1)</div><div id='n_method'> N Method Name: infer_categorical_features(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mlchecks/base/dataset.py</div><div id='n_file'> N File Name: mlchecks/base/dataset.py</div><div id='m_start'> M Start Line: 153</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 157</div><div id='n_end'> N End Line: 162</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if not tmp_x.empty:
            return (1 / tmp_x).sum() / x.shape[0]
        return 0
    num_users<a id="change"> = </a><a id="change">tmp_data[&quotuser_id&quot].nunique()</a>
    mask = tmp_data[&quotrank&quot] &gt; k
    tmp_data.loc[mask, &quotrank&quot] = -1
    grouped = tmp_data.groupby(&quotuser_id&quot)[&quotrank&quot].apply(get_mrr)
    return grouped.sum() / num_users</code></pre><h3>After Change</h3><pre><code class='java'>
    return any(data &gt; 0)

def mrr(data):
    tmp_x = data[<a id="change">data &gt; 0</a>]
    <a id="change">if </a>not tmp_x.empty:
        return (1 / tmp_x).sum() / data.shape[0]
    <a id="change">return </a>0

def recall(data):
    return (data &gt; 0).sum() / data.shape[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/b1bf9c4f1c9e381eb635a52870f990c7d1ab4818#diff-b4ad8049203cd9bbf0c3f3a4edb37f8b72780228334d55fab31c4c555f942bd6L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36318311</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: b1bf9c4f1c9e381eb635a52870f990c7d1ab4818</div><div id='time'> Time: 2020-07-07</div><div id='author'> Author: 1337990880@qq.com</div><div id='file'> File Name: utils/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mrr(1)</div><div id='n_method'> N Method Name: mrr(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/metrics.py</div><div id='n_file'> N File Name: utils/metrics.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 13</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if not tmp_x.empty:
            return (1 / tmp_x).sum() / x.shape[0]
        return 0
    num_users<a id="change"> = </a><a id="change">tmp_data[&quotuser_id&quot].nunique()</a>
    mask = tmp_data[&quotrank&quot] &gt; k
    tmp_data.loc[mask, &quotrank&quot] = -1
    grouped = tmp_data.groupby(&quotuser_id&quot)[&quotrank&quot].apply(get_mrr)
    return grouped.sum() / num_users</code></pre><h3>After Change</h3><pre><code class='java'>
    return any(data &gt; 0)

def mrr(data):
    tmp_x = data[<a id="change">data &gt; 0</a>]
    <a id="change">if </a>not tmp_x.empty:
        return (1 / tmp_x).sum() / data.shape[0]
    <a id="change">return </a>0

def recall(data):
    return (data &gt; 0).sum() / data.shape[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/cf5c4dcdff6237cb0c5cedb35d12b7831cfdc46d#diff-b4ad8049203cd9bbf0c3f3a4edb37f8b72780228334d55fab31c4c555f942bd6L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36318309</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: cf5c4dcdff6237cb0c5cedb35d12b7831cfdc46d</div><div id='time'> Time: 2020-07-07</div><div id='author'> Author: 893833413@qq.com</div><div id='file'> File Name: utils/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mrr(1)</div><div id='n_method'> N Method Name: mrr(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/metrics.py</div><div id='n_file'> N File Name: utils/metrics.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 13</div><BR>