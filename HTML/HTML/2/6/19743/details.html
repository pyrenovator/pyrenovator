<html><h3>Pattern ID :19743
</h3><img src='64411348.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        prefix = &quot&quot
    result = {}
    for k, v in dictionary.items():
        <a id="change">if </a><a id="change">isinstance(</a>v, dict<a id="change">)</a>:
            new_prefix<a id="change"> = </a>prefix + k + sep
            result.update(flatten_dictionary(dictionary=v, prefix=new_prefix))
        else:
            new_k = prefix + k
            result[new_k]<a id="change"> = </a>v
    return result

</code></pre><h3>After Change</h3><pre><code class='java'>
    Flattens a nested dictionary.
    real_prefix = tuple() if prefix is None else (prefix,)
    partial_result = _flatten_dictionary(dictionary=dictionary, prefix=real_prefix)
    return <a id="change">{sep.join(k): v for k, v in partial_result.items()}</a>


def _flatten_dictionary(dictionary: Dict[str, Any], prefix: Tuple[str, ...] = tuple()) -&gt; Dict[Tuple[str, ...], Any]:
    Utility method for flattening a nested dictionary.</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/8d1d32106b328a8cb00c7295304503cb0f8b6f87#diff-40596b02d54c46825543c70f0edc8b4f37080d71056c046047763d2ae3f66f9eL149' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64411348</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 8d1d32106b328a8cb00c7295304503cb0f8b6f87</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: src/poem/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: flatten_dictionary(3)</div><div id='n_method'> N Method Name: flatten_dictionary(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/poem/utils.py</div><div id='n_file'> N File Name: src/poem/utils.py</div><div id='m_start'> M Start Line: 149</div><div id='m_end'> M End Line: 159</div><div id='n_start'> N Start Line: 149</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        (lambda _: 1e100) if lr_schedule is None else lr_schedule,
    }

    <a id="change">if </a><a id="change">isinstance(</a>encoder, policy_class<a id="change">)</a>:
        policy<a id="change"> = </a>encoder
    elif policy_class == sb3_pols.ActorCriticCnnPolicy:
        policy_kwargs.update({&quotortho_init&quot: ortho_init,
                              &quotlog_std_init&quot: log_std_init})

        policy = policy_class(**policy_kwargs)
    elif policy_class == CnnPolicy:
        policy_kwargs.update({&quotoptimizer_class&quot: optimizer_class,
                              &quotoptimizer_kwargs&quot: optimizer_kwargs,
                              })

        policy<a id="change"> = </a>policy_class(**policy_kwargs)
    else:
        raise NotImplementedError
</code></pre><h3>After Change</h3><pre><code class='java'>
            full_encoder_dict = full_encoder.state_dict()

            &#47&#47 pretrained_dict contains weights & bias for conv layers only.
            pretrained_dict = <a id="change">{k: v for k, v in partial_encoder_dict.items() if
                               k in full_encoder_dict}</a>
            full_encoder_dict.update(pretrained_dict)
            full_encoder.load_state_dict(full_encoder_dict)

            encoder = full_encoder</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/bd5e3f1d81db75a1241a9fd43d7b1daba1286152#diff-c89e267c35244f4a7b1392541f3a998a20951f7d934bb7dc532f18d3bdc5ab04L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64411345</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: bd5e3f1d81db75a1241a9fd43d7b1daba1286152</div><div id='time'> Time: 2021-10-18</div><div id='author'> Author: cyn0531@hku.hk</div><div id='file'> File Name: src/il_representations/scripts/policy_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: make_policy(0)</div><div id='n_method'> N Method Name: make_policy(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/policy_utils.py</div><div id='n_file'> N File Name: src/il_representations/scripts/policy_utils.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 87</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 118</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            label_names (`List[str]`, `optional`):
                The list of keys in your dictionary of inputs that correspond to the labels.
        
        <a id="change">if </a>not <a id="change">isinstance(</a>onnx_config, OnnxConfig<a id="change">)</a>:
            raise TypeError(
                f"The ONNX configuration `onnx_config` associated to the pre-existing ONNX model is of type "
                f"{type(onnx_config)}, which is not an instance of `OnnxConfig`."
            )

        self.onnx_named_inputs<a id="change"> = </a>list(onnx_config.inputs.keys())
        self.onnx_named_outputs = list(onnx_config.outputs.keys())
        self.onnx_config = onnx_config
        self.execution_provider = execution_provider
        self.model_path<a id="change"> = </a>Path(model_path)
        self.compute_metrics = compute_metrics
        default_label_names = (
            ["start_positions", "end_positions"] if self.onnx_config.task == "question-answering" else ["labels"]</code></pre><h3>After Change</h3><pre><code class='java'>
        self.compute_metrics = compute_metrics
        self.label_names = ["labels"] if label_names is None else label_names
        self.session = InferenceSession(str(model_path), providers=[execution_provider])
        self.onnx_input_names = <a id="change">{input_key.name: idx for idx, input_key in enumerate(self.session.get_inputs())}</a>

    def evaluation_loop(self, dataset: Dataset):
        
        Run evaluation and returns metrics and predictions.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/optimum/commit/fb7e303d9254fcee194aa76f4a0b7fa9d9b140d0#diff-ead537b852181c739b05770de913355e1a87437d08d68d8807ad3107dc5e63fbL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64411358</div><div id='project'> Project Name: huggingface/optimum</div><div id='commit'> Commit Name: fb7e303d9254fcee194aa76f4a0b7fa9d9b140d0</div><div id='time'> Time: 2022-08-24</div><div id='author'> Author: 80481427+echarlaix@users.noreply.github.com</div><div id='file'> File Name: optimum/onnxruntime/model.py</div><div id='m_class'> M Class Name: ORTModel</div><div id='n_method'> N Class Name: ORTModel</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: optimum/onnxruntime/model.py</div><div id='n_file'> N File Name: optimum/onnxruntime/model.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 58</div><BR>