<html><h3>Pattern ID :390
</h3><img src='2284208.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        assert type(image_size) is list, "Image size must be a list"
        assert image_size == [439, 640], "Incorrect image size"
        assert type(output_scale) is np.ndarray, "Output scale must be a numpy array"
        <a id="change">assert </a>output_scale == pytest.approx(np.array([1.95, 2.84]), 0.01), "Incorrect scale"

    def test_model_instantiation(self, posenet_predictor):
        self.posenet_model = posenet_predictor._create_posenet_model()</code></pre><h3>After Change</h3><pre><code class='java'>
        assert type(image_size) is list, "Image size must be a list"
        assert image_size == [439, 640], "Incorrect image size"
        assert type(output_scale) is np.ndarray, "Output scale must be a numpy array"
        <a id="change">npt.assert_almost_equal(</a>output_scale, <a id="change">np.array(</a>[1.95, 2.84]<a id="change">)</a>,
                                <a id="change">2</a><a id="change">), "Incorrect scale"</a>

    def test_model_instantiation(self, posenet_predictor):
        self.posenet_model = posenet_predictor._create_posenet_model()
        assert self.posenet_model is not None, "Model is not instantiated"</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/ff36a76cad7e4fa9f1af3f71acb5de2d33487295#diff-bde6905e7b0cc9f787481834b8edae97aa315f0e4059401630794d430a0bbcc6L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2284208</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: ff36a76cad7e4fa9f1af3f71acb5de2d33487295</div><div id='time'> Time: 2021-05-24</div><div id='author'> Author: pangyyyyyy96@gmail.com</div><div id='file'> File Name: tests/pipeline/nodes/model/posenetv1/test_predictor.py</div><div id='m_class'> M Class Name: TestPredictor</div><div id='n_method'> N Class Name: TestPredictor</div><div id='m_method'> M Method Name: test_create_image_from_frame(2)</div><div id='n_method'> N Method Name: test_create_image_from_frame(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/model/posenetv1/test_predictor.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/model/posenetv1/test_predictor.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                         displacements=displacements_fwd)
        assert score == pytest.approx(0.4393, 0.01), \
            "Score did not meet expected value"
        <a id="change">assert </a>coords == pytest.approx(np.array([77.11, 71.62]), 0.01), \
            "Coordinates of incorrect values"
</code></pre><h3>After Change</h3><pre><code class='java'>
                                         displacements=displacements_fwd)
        npt.assert_almost_equal(score, 0.4393,
                                4), "Score did not meet expected value"
        <a id="change">npt.assert_almost_equal(</a>coords, <a id="change">np.array(</a>[77.11, 71.62]<a id="change">)</a>,
                                <a id="change">2</a><a id="change">), "Coordinates of incorrect values"</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/ff36a76cad7e4fa9f1af3f71acb5de2d33487295#diff-df86b3957e30d00bffc9b3c4749d28d5676e65a972d81fece46d0b00fd387aebL60' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2284199</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: ff36a76cad7e4fa9f1af3f71acb5de2d33487295</div><div id='time'> Time: 2021-05-24</div><div id='author'> Author: pangyyyyyy96@gmail.com</div><div id='file'> File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='m_class'> M Class Name: TestDecode</div><div id='n_method'> N Class Name: TestDecode</div><div id='m_method'> M Method Name: test_traverse_to_target_keypoint(6)</div><div id='n_method'> N Method Name: test_traverse_to_target_keypoint(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def test_clip_to_indices(self, source_keypoint):
        source_keypoint_indices = _clip_to_indices(
            keypoints=source_keypoint, output_stride=16, width=14, height=14)
        <a id="change">assert </a>source_keypoint_indices == pytest.approx(np.array([5, 4])), \
            "Unexpected output from clipping to indices"

    def test_traverse_to_target_keypoint(self, source_keypoint, scores, offsets,</code></pre><h3>After Change</h3><pre><code class='java'>
    def test_clip_to_indices(self, source_keypoint):
        source_keypoint_indices = _clip_to_indices(
            keypoints=source_keypoint, output_stride=16, width=14, height=14)
        <a id="change">npt.assert_almost_equal(</a>source_keypoint_indices, <a id="change">np.array(</a>[5, 4]<a id="change">)</a>,
                                <a id="change">4</a><a id="change">), "Unexpected output from clipping to indices"</a>

    def test_traverse_to_target_keypoint(self, source_keypoint, scores, offsets,
                                         displacements_bwd, displacements_fwd):
        score, coords = \</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/ff36a76cad7e4fa9f1af3f71acb5de2d33487295#diff-df86b3957e30d00bffc9b3c4749d28d5676e65a972d81fece46d0b00fd387aebL54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2284202</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: ff36a76cad7e4fa9f1af3f71acb5de2d33487295</div><div id='time'> Time: 2021-05-24</div><div id='author'> Author: pangyyyyyy96@gmail.com</div><div id='file'> File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='m_class'> M Class Name: TestDecode</div><div id='n_method'> N Class Name: TestDecode</div><div id='m_method'> M Method Name: test_clip_to_indices(2)</div><div id='n_method'> N Method Name: test_clip_to_indices(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/model/posenetv1/test_decode.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 59</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        image_processed, scale = rescale_image(frame, (500, 333), 1.5, 16, "resnet")
        assert image_processed.shape == (
            1, 497, 737, 3), "Rescaled image is of incorrect shape"
        <a id="change">assert </a>scale == pytest.approx(np.array([0.8684, 0.8551]), 0.01), "Incorrect scale"

    def test_preprocess_image_resnet(self, frame, image_resnet):
        image_processed, scale = rescale_image(frame, (225, 225), 1, 16, "resnet")</code></pre><h3>After Change</h3><pre><code class='java'>
        image_processed, scale = rescale_image(frame, (500, 333), 1.5, 16, "resnet")
        assert image_processed.shape == (
            1, 497, 737, 3), "Rescaled image is of incorrect shape"
        <a id="change">npt.assert_almost_equal(</a>scale, <a id="change">np.array(</a>[0.8684, 0.8551]<a id="change">)</a>,
                                <a id="change">4</a><a id="change">), "Incorrect scale"</a>

    def test_preprocess_image_resnet(self, frame, image_resnet):
        image_processed, scale = rescale_image(frame, (225, 225), 1, 16, "resnet")
        assert image_processed.shape == (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aisingapore/peekingduck/commit/ff36a76cad7e4fa9f1af3f71acb5de2d33487295#diff-9053ce90fbd33d94bf35a30879cefacab9ee083729c2e07182c829af331600cbL51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2284201</div><div id='project'> Project Name: aisingapore/peekingduck</div><div id='commit'> Commit Name: ff36a76cad7e4fa9f1af3f71acb5de2d33487295</div><div id='time'> Time: 2021-05-24</div><div id='author'> Author: pangyyyyyy96@gmail.com</div><div id='file'> File Name: tests/pipeline/nodes/model/posenetv1/test_preprocessing.py</div><div id='m_class'> M Class Name: TestPreprocessing</div><div id='n_method'> N Class Name: TestPreprocessing</div><div id='m_method'> M Method Name: test_resize_image(2)</div><div id='n_method'> N Method Name: test_resize_image(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/model/posenetv1/test_preprocessing.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/model/posenetv1/test_preprocessing.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 57</div><BR>