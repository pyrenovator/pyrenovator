<html><h3>Pattern ID :16082
</h3><img src='53999015.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            writer.add_scalar(&quotRefine/loss_per&quot, loss_per.item(), iteration)
            loss_all.backward()
            optimizer.step()
            <a id="change">print(</a><a id="change">"loss:"</a><a id="change">+</a><a id="change">str(</a>loss_all.item()<a id="change">))</a>
            print(&quotlr:&quot+str(scheduler._last_lr[0]))
            iteration += 1
        scheduler.step()
</code></pre><h3>After Change</h3><pre><code class='java'>
            
            if get_rank() == 0:

                <a id="change">interior_step_bar.update(1</a><a id="change">)</a>
            &#47&#47 print(f"Batch: {i}/{len(train_loader)} epoch {epoch}")

            img = batch.cuda(non_blocking=True)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/montaellis/framework-of-gan-inversion/commit/e395662415889bea6fbc80cfc80d1fbff249835e#diff-bd8627408468b8a07419e2d5e01ea1c90a5af1850530308e7c2f962d6967b0ebL99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53999015</div><div id='project'> Project Name: montaellis/framework-of-gan-inversion</div><div id='commit'> Commit Name: e395662415889bea6fbc80cfc80d1fbff249835e</div><div id='time'> Time: 2021-10-19</div><div id='author'> Author: elliszkn@163.com</div><div id='file'> File Name: train_ddp.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(0)</div><div id='n_method'> N Method Name: train(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_ddp.py</div><div id='n_file'> N File Name: train_ddp.py</div><div id='m_start'> M Start Line: 208</div><div id='m_end'> M End Line: 265</div><div id='n_start'> N Start Line: 99</div><div id='n_end'> N End Line: 291</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        total_loss += loss
        waste_time = time.time() - start_time
        <a id="change">print(</a><a id="change">&quot\nEpoch:&quot</a><a id="change">+ </a><a id="change">str(</a>epoch+1<a id="change">)</a> + &quot/&quot + str(Epoch)<a id="change">)</a>
        print(&quotiter:&quot + str(iteration) + &quot/&quot + str(epoch_size) + &quot || Total Loss: %.4f || %.4fs/step&quot % (total_loss/(iteration+1),waste_time))
        start_time = time.time()
</code></pre><h3>After Change</h3><pre><code class='java'>
                loss = sum(losses)
                val_loss += loss
            pbar.set_postfix(**{&quottotal_loss&quot: val_loss.item() / (iteration + 1)})
            <a id="change">pbar.update(1</a><a id="change">)</a>
            
    print(&quotFinish Validation&quot)
    print(&quotEpoch:&quot+ str(epoch+1) + &quot/&quot + str(Epoch))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bubbliiiing/yolo3-pytorch/commit/d67b456f0551b5565d1be3339b446ca601d1078c#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53999014</div><div id='project'> Project Name: bubbliiiing/yolo3-pytorch</div><div id='commit'> Commit Name: d67b456f0551b5565d1be3339b446ca601d1078c</div><div id='time'> Time: 2020-07-28</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fit_ont_epoch(9)</div><div id='n_method'> N Method Name: fit_ont_epoch(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 71</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 85</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        total_loss += loss
        waste_time = time.time() - start_time
        <a id="change">print(</a><a id="change">&quot\nEpoch:&quot</a><a id="change">+ </a><a id="change">str(</a>epoch+1<a id="change">)</a> + &quot/&quot + str(Epoch)<a id="change">)</a>
        print(&quotiter:&quot + str(iteration) + &quot/&quot + str(epoch_size) + &quot || Total Loss: %.4f || %.4fs/step&quot % (total_loss/(iteration+1),waste_time))
        start_time = time.time()
    &#47&#47 将loss写入tensorboard，下面注释的是每个世代保存一次</code></pre><h3>After Change</h3><pre><code class='java'>
            pbar.set_postfix(**{&quottotal_loss&quot: total_loss.item() / (iteration + 1), 
                                &quotlr&quot        : get_lr(optimizer),
                                &quotstep/s&quot    : waste_time})
            <a id="change">pbar.update(1</a><a id="change">)</a>


            start_time = time.time()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bubbliiiing/yolov4-pytorch/commit/c1c7677c0d9837682dfc807b39415bb4b9a1cb3c#diff-bd82358bc6c4c160f47a62aadfd20d68a0c03408cc9d0840ac78e471f696f5e6L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53999024</div><div id='project'> Project Name: bubbliiiing/yolov4-pytorch</div><div id='commit'> Commit Name: c1c7677c0d9837682dfc807b39415bb4b9a1cb3c</div><div id='time'> Time: 2020-07-28</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: train_with_tensorboard.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fit_ont_epoch(10)</div><div id='n_method'> N Method Name: fit_ont_epoch(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_with_tensorboard.py</div><div id='n_file'> N File Name: train_with_tensorboard.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 45</div><div id='n_end'> N End Line: 113</div><BR>