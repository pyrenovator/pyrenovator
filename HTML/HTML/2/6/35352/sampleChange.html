<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 each copy of this step in the parallelization will have its own value
        self.hyper_string = self.input
        self.hypers = json.loads(self.hyper_string)
        <a id="change">target_folder</a><a id="change">, self.local_paths</a> = self.get_folder(is_cloud=self.IS_CLOUD)
        train = Dataset(&quot{}train/*.parquet&quot.format(target_folder))
        valid = Dataset(<a id="change">&quot{}valid/*.parquet&quot.format(target_folder</a><a id="change">)</a>)
        print("Train dataset shape: {}, Validation: {}".format(
            train.to_ddf().compute().shape,
            valid.to_ddf().compute().shape</code></pre><h3>After Change</h3><pre><code class='java'>
        self.metrics = model.evaluate(valid, batch_size=1024, return_dict=True)
        print("\n\n====&gt; Eval results: {}\n\n".format(self.metrics))
        &#47&#47 save the model
        model_hash<a id="change"> = </a>str(hashlib.md5(self.hyper_string.encode(&quotutf-8&quot)).hexdigest())
        self.model_path = &quotmerlin/model{}/&quot.format(model_hash)
        <a id="change">model.save(</a>self.model_path<a id="change">)</a>
        print("Model saved!")
        self.next(self.join_runs)

    def get_items_topk_recommender_model(</code></pre>