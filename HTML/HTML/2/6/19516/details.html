<html><h3>Pattern ID :19516
</h3><img src='63538121.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    searchspace = NDSSearchSpace(
        "/Users/jackturner/work/nds/data/ResNet.json", searchspace="ResNet"
    )
    data<a id="change"> = </a>torch.rand((<a id="change">1</a><a id="change">, 3, 32, 32</a>))
    for _ in range(10):
        model = searchspace.sample_random_architecture()
        y, _ = model(data)</code></pre><h3>After Change</h3><pre><code class='java'>
    score = proxy.score(model, minibatch)
    t2 = time.time()

    <a id="change">assert </a>(t2-t1) &lt; 10.

    assert score &gt; 0
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jack-willturner/gymnastics/commit/4fc66122fd76c42dbed118821adf774e57ce55c6#diff-2e0e326d8664727970a3d25f946f7a8d7765050f09f575df7b3895e7af6d4c03L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63538121</div><div id='project'> Project Name: jack-willturner/gymnastics</div><div id='commit'> Commit Name: 4fc66122fd76c42dbed118821adf774e57ce55c6</div><div id='time'> Time: 2021-08-07</div><div id='author'> Author: jackwilliamturner@icloud.com</div><div id='file'> File Name: test/test_proxy_naswot.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_proxy_naswot(0)</div><div id='n_method'> N Method Name: test_proxy_naswot(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_proxy_naswot.py</div><div id='n_file'> N File Name: test/test_proxy_naswot.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert isinstance(image_raw, numpy.ndarray)

    image_raw = image_raw[:224, :224].astype(numpy.float32) / 255
    image_raw<a id="change"> = </a>numpy.expand_dims(numpy.transpose(image_raw, (<a id="change">2</a><a id="change">, 0, 1</a>)), 0)
    image_raw = numpy.ascontiguousarray(image_raw)
    assert image_raw.shape == (1, 3, 224, 224)
    assert image_raw.dtype == numpy.float32</code></pre><h3>After Change</h3><pre><code class='java'>
    assert isinstance(pipeline, CustomTaskPipeline)

    assert pipeline.input_schema == object
    <a id="change">assert </a>pipeline.output_schema == object
    assert pipeline.process_inputs(1.2345) == 1.2345
    assert pipeline.process_engine_outputs([1.2345], asdf=True) == [1.2345]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/06c45eb10b3aa6932d8786f34ca3187f760d87ff#diff-e61011742e54887307b8eab6487d8011a74247dfdd61cbdf784a99513a534eb7L61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63538129</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: 06c45eb10b3aa6932d8786f34ca3187f760d87ff</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: 109536191+corey-nm@users.noreply.github.com</div><div id='file'> File Name: tests/deepsparse/pipelines/test_custom_pipeline.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_no_input_call(1)</div><div id='n_method'> N Method Name: test_no_input_call(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/deepsparse/pipelines/test_custom_pipeline.py</div><div id='n_file'> N File Name: tests/deepsparse/pipelines/test_custom_pipeline.py</div><div id='m_start'> M Start Line: 62</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 padding
        pad_input = (H % 2 == 1) or (W % 2 == 1)
        if pad_input:
            x<a id="change"> = </a>F.pad(x, (<a id="change">0</a><a id="change">, 0, 0, W % 2, 0, H % 2</a>))

        x0 = x[:, :, 0::2, 0::2, :]  &#47&#47 B D H/2 W/2 C
        x1 = x[:, :, 1::2, 0::2, :]  &#47&#47 B D H/2 W/2 C</code></pre><h3>After Change</h3><pre><code class='java'>
        
        H, W = self.input_resolution
        B, L, C = x.shape
        <a id="change">assert </a>L == H * W, "input feature has wrong size"
        assert H % 2 == 0 and W % 2 == 0, f"x size ({H}*{W}) are not even."

        x = x.view(B, H, W, C)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bwittmann/transoar/commit/829a2ecf6cd071bfc222fe830ebca1ed7a9cd8c4#diff-e237dac88e7ea9172f4d3310b0f37332bce40b9f8893b1e30b30feaddce55e94L287' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63538112</div><div id='project'> Project Name: bwittmann/transoar</div><div id='commit'> Commit Name: 829a2ecf6cd071bfc222fe830ebca1ed7a9cd8c4</div><div id='time'> Time: 2021-11-08</div><div id='author'> Author: bastian.wittmann@tum.de</div><div id='file'> File Name: transoar/models/backbones/swin_transformer.py</div><div id='m_class'> M Class Name: PatchMerging</div><div id='n_method'> N Class Name: PatchMerging</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: transoar/models/backbones/swin_transformer.py</div><div id='n_file'> N File Name: transoar/models/backbones/swin_transformer.py</div><div id='m_start'> M Start Line: 292</div><div id='m_end'> M End Line: 299</div><div id='n_start'> N Start Line: 307</div><div id='n_end'> N End Line: 319</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        x1 = centers[0][0]
        y1 = centers[0][1]
        
        heatmap<a id="change"> = </a>render_target_heatmap_ttfnet((<a id="change">4</a><a id="change">,128,128</a>), centers, sizes, indices, mask) * 0.95
        heatmap[indices[0],y1,x1] = 1                               &#47&#47 make the first point having highest score
        heatmap = -torch.log((1 - heatmap) / (heatmap + 1e-8))      &#47&#47 inverse sigmoid, convert probabilities to logits
</code></pre><h3>After Change</h3><pre><code class='java'>
        out_bbox  = output["bboxes"][0][0]

        assert out_label == labels[0][0]
        <a id="change">assert </a>out_score == 1

        assert out_bbox[0] == (x1 + pred_offset[0,0,y1,x1]) * model.output_stride
        assert out_bbox[1] == (y1 + pred_offset[0,1,y1,x1]) * model.output_stride</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gau-nernst/centernet-lightning/commit/bde713dbf016e3c26a00307e27cc9eca629776de#diff-fc5366019754d3de1b8ebf26cabeba799916b19dc0f2e5bf1273b3d18254da47L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 63538085</div><div id='project'> Project Name: gau-nernst/centernet-lightning</div><div id='commit'> Commit Name: bde713dbf016e3c26a00307e27cc9eca629776de</div><div id='time'> Time: 2021-06-19</div><div id='author'> Author: gau.nernst@yahoo.com.sg</div><div id='file'> File Name: model_test.py</div><div id='m_class'> M Class Name: TestModels</div><div id='n_method'> N Class Name: TestModels</div><div id='m_method'> M Method Name: test_decode_detections(1)</div><div id='n_method'> N Method Name: test_decode_detections(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_test.py</div><div id='n_file'> N File Name: model_test.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 93</div><BR>