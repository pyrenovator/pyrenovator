<html><h3>Pattern ID :4672
</h3><img src='16738079.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def attempt_download(weights):
    <a id="change">if </a>not <a id="change">Path(weights).exists()</a>:
        &#47&#47 Attempt to download pretrained weights if not found locally
        weights = str(weights).strip().replace("&quot", &quot&quot)
        file = Path(weights).name.lower()

        msg = weights + &quot missing, try downloading from https://github.com/ultralytics/yolov5/releases/&quot
        response = requests.get(&quothttps://api.github.com/repos/ultralytics/yolov5/releases/latest&quot).json()  &#47&#47 github api
        assets = [x[&quotname&quot] for x in response[&quotassets&quot]]  &#47&#47 release assets, i.e. [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, ...]
        redundant = False  &#47&#47 second download option

        if file in assets and not os.path.isfile(weights):
            try:  &#47&#47 GitHub
                tag = response[&quottag_name&quot]  &#47&#47 i.e. &quotv1.0&quot
                url<a id="change"> = </a>f&quothttps://github.com/ultralytics/yolov5/releases/download/{tag}/{file}&quot
                print(&quotDownloading %s to %s...&quot % (url, weights))
                torch.hub.download_url_to_file(url, weights)
                assert os.path.exists(weights) and os.path.getsize(weights) &gt; 1E6  &#47&#47 check
            except Exception as e:  &#47&#47 GCP
                print(&quotDownload error: %s&quot % e)
                assert redundant, &quotNo secondary mirror&quot
                url = &quothttps://storage.googleapis.com/ultralytics/yolov5/ckpt/&quot + file
                print(&quotDownloading %s to %s...&quot % (url, weights))
                r<a id="change"> = </a>os.system(&quotcurl -L %s -o %s&quot % (url, weights))  &#47&#47 torch.hub.download_url_to_file(url, weights)
            finally:
                if not (os.path.exists(weights) and os.path.getsize(weights) &gt; 1E6):  &#47&#47 check
                    os.remove(weights) if os.path.exists(weights) else None  &#47&#47 remove partial downloads</code></pre><h3>After Change</h3><pre><code class='java'>
            tag = response[&quottag_name&quot]  &#47&#47 i.e. &quotv1.0&quot
        except:  &#47&#47 fallback plan
            assets = [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, &quotyolov5l.pt&quot, &quotyolov5x.pt&quot]
            tag<a id="change"> = </a><a id="change">subprocess.check_output(&quotgit tag&quot, shell=True).decode().split()[-1]</a>

        name = file.name
        if name in assets:
            msg = f&quot{file} missing, try downloading from https://github.com/{repo}/releases/&quot</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fcakyon/yolov5-pip/commit/97db72f1868649781b23837f9fe96d450f5f0610#diff-31e3c7f15ad28b1ff8c6b7d806c05261a1c6571b9df52c105000e6b88fc272afL19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16738079</div><div id='project'> Project Name: fcakyon/yolov5-pip</div><div id='commit'> Commit Name: 97db72f1868649781b23837f9fe96d450f5f0610</div><div id='time'> Time: 2021-04-14</div><div id='author'> Author: 34196005+fcakyon@users.noreply.github.com</div><div id='file'> File Name: yolov5/utils/google_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: attempt_download(2)</div><div id='n_method'> N Method Name: attempt_download(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: yolov5/utils/google_utils.py</div><div id='n_file'> N File Name: yolov5/utils/google_utils.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def _load_config(self, provider_config):
        list_of_node_ips = get_list_of_node_ips(provider_config)
        <a id="change">if </a><a id="change">os.path.exists(</a>self.state_path<a id="change">)</a>:
            state<a id="change"> = </a>json.loads(open(self.state_path).read())
        else:
            state<a id="change"> = </a>{}
        logger.info(
            "Loaded cluster state: {}".format(state))
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Filter removed node ips.
        for node_ip in list(nodes):
            if node_ip not in list_of_node_ips:
                node<a id="change"> = </a><a id="change">nodes[node_ip]</a>
                &#47&#47 remove node only if it is terminated (not in use)
                if node == "terminated":
                    del nodes[node_ip]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/163577fc8aa93f97bfd1f830feb49c28eb70a0db#diff-494c77d54c8d4ae7f21aa96d7093ab9f63cc4f960638c6461239efe123f3c791L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16738063</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: 163577fc8aa93f97bfd1f830feb49c28eb70a0db</div><div id='time'> Time: 2023-05-24</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='m_class'> M Class Name: FileStateStore</div><div id='n_method'> N Class Name: FileStateStore</div><div id='m_method'> M Method Name: _load_config(2)</div><div id='n_method'> N Method Name: _load_config(2)</div><div id='m_parent_class'> M Parent Class: StateStore</div><div id='n_parent_class'> N Parent Class: StateStore</div><div id='m_file'> M File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='n_file'> N File Name: python/cloudtik/providers/_private/onprem/state_store.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 142</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    os.makedirs(dump_path_bkg_masked, exist_ok=True)
    os.makedirs(dump_path_person_masked, exist_ok=True)

    <a id="change">if </a><a id="change">os.path.exists(</a>second_style_path<a id="change">)</a>:
        second_dir<a id="change"> = </a>second_style_path
    else:
        second_dir<a id="change"> = </a>content_pics
        
    if len(os.listdir(dump_path_bkg_masked)) == 0 and len(os.listdir(dump_path_person_masked)) == 0:
        for cnt, (path1, path2, path3) in enumerate(zip(os.listdir(dump_dest), os.listdir(mask_dest), os.listdir(second_dir))):</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 in dirs
    frames_dir = relevant_directories[&quotframes_path&quot]
    mask_frames_dir<a id="change"> = </a><a id="change">relevant_directories[&quotprocessed_masks_dump_path&quot]</a>
    stylized_frames_dir = relevant_directories[&quotstylized_frames_path&quot]

    &#47&#47 out dirs (we&quotll dump combined imagery here)
    dump_path = os.path.join(stylized_frames_dir, os.path.pardir)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gordicaleksa/pytorch-naive-video-neural-style-transfer/commit/eb258a320653c1198a40fb422c98f1f37212c8cc#diff-18d7056e8caf3b212693d1befdc8190da58ab6dad574ab5496d98ca47f8927f4L105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16738075</div><div id='project'> Project Name: gordicaleksa/pytorch-naive-video-neural-style-transfer</div><div id='commit'> Commit Name: eb258a320653c1198a40fb422c98f1f37212c8cc</div><div id='time'> Time: 2020-08-03</div><div id='author'> Author: gordicaleksa@gmail.com</div><div id='file'> File Name: segmentation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: stylized_frames_mask_combiner(3)</div><div id='n_method'> N Method Name: stylized_frames_mask_combiner(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: segmentation.py</div><div id='n_file'> N File Name: segmentation.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 150</div><div id='n_start'> N Start Line: 109</div><div id='n_end'> N End Line: 156</div><BR>