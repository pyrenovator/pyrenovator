<html><h3>Pattern ID :13034
</h3><img src='44031700.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        global_model_params = self.aggregator.get_global_model_params()
        for process_id in range(1, self.size):
            self.send_message_init_config(
                process_id, global_model_params, <a id="change">client_indexes[process_id - 1]</a>
            )

    def register_message_receive_handlers(self):
        self.register_message_receive_handler(</code></pre><h3>After Change</h3><pre><code class='java'>
            self.args.client_num_per_round,
        )

        client_schedule<a id="change"> = </a><a id="change">self.aggregator.generate_client_schedule(</a>self.round_idx, client_indexes<a id="change">)</a>
        average_weight_dict = self.aggregator.get_average_weight(client_indexes)

        global_model_params = self.aggregator.get_global_model_params()
        for process_id in range(1, self.size):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/b5b62443e3442c798793c92fa5ebbaf394ac16e6#diff-e9eb391b74cfd552934128091766f9a847cd439fccd636b3a89ff6ae6172de8bL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44031700</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: b5b62443e3442c798793c92fa5ebbaf394ac16e6</div><div id='time'> Time: 2022-08-16</div><div id='author'> Author: 956234606@qq.com</div><div id='file'> File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_class'> M Class Name: FedOptServerManager</div><div id='n_method'> N Class Name: FedOptServerManager</div><div id='m_method'> M Method Name: send_init_msg(1)</div><div id='n_method'> N Method Name: send_init_msg(1)</div><div id='m_parent_class'> M Parent Class: FedMLCommManager</div><div id='n_parent_class'> N Parent Class: FedMLCommManager</div><div id='m_file'> M File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='n_file'> N File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                print("transform_tensor_to_list")
                global_model_params = transform_tensor_to_list(global_model_params)

            for <a id="change">receiver_id</a> in range(1, self.size):
                self.send_message_sync_model_to_client(
                    receiver_id, global_model_params, <a id="change">client_indexes[receiver_id - 1]</a>
                )

    def send_message_init_config(self, receive_id, global_model_params, client_index):
        message = Message(</code></pre><h3>After Change</h3><pre><code class='java'>
                    self.args.client_num_in_total,
                    self.args.client_num_per_round,
                )
            client_schedule<a id="change"> = </a><a id="change">self.aggregator.generate_client_schedule(</a>self.round_idx, client_indexes<a id="change">)</a>
            average_weight_dict = self.aggregator.get_average_weight(client_indexes)

            global_model_params = self.aggregator.get_global_model_params()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/b5b62443e3442c798793c92fa5ebbaf394ac16e6#diff-e9eb391b74cfd552934128091766f9a847cd439fccd636b3a89ff6ae6172de8bL51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44031699</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: b5b62443e3442c798793c92fa5ebbaf394ac16e6</div><div id='time'> Time: 2022-08-16</div><div id='author'> Author: 956234606@qq.com</div><div id='file'> File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_class'> M Class Name: FedOptServerManager</div><div id='n_method'> N Class Name: FedOptServerManager</div><div id='m_method'> M Method Name: handle_message_receive_model_from_client(2)</div><div id='n_method'> N Method Name: handle_message_receive_model_from_client(2)</div><div id='m_parent_class'> M Parent Class: FedMLCommManager</div><div id='n_parent_class'> N Parent Class: FedMLCommManager</div><div id='m_file'> M File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='n_file'> N File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                print("transform_tensor_to_list")
                global_model_params = transform_tensor_to_list(global_model_params)

            for <a id="change">receiver_id</a> in range(1, self.size):
                self.send_message_sync_model_to_client(
                    receiver_id, global_model_params, <a id="change">client_indexes[receiver_id - 1]</a>
                )

    def send_message_init_config(self, receive_id, global_model_params, client_index):
        message = Message(</code></pre><h3>After Change</h3><pre><code class='java'>
                    self.args.client_num_in_total,
                    self.args.client_num_per_round,
                )
            client_schedule<a id="change"> = </a><a id="change">self.aggregator.generate_client_schedule(</a>self.round_idx, client_indexes<a id="change">)</a>
            average_weight_dict = self.aggregator.get_average_weight(client_indexes)

            global_model_params = self.aggregator.get_global_model_params()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/ba79c4fa9a99c47e23d7b1ad1d7d907d5d567ba8#diff-e9eb391b74cfd552934128091766f9a847cd439fccd636b3a89ff6ae6172de8bL51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44031698</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: ba79c4fa9a99c47e23d7b1ad1d7d907d5d567ba8</div><div id='time'> Time: 2022-08-16</div><div id='author'> Author: 956234606@qq.com</div><div id='file'> File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_class'> M Class Name: FedOptServerManager</div><div id='n_method'> N Class Name: FedOptServerManager</div><div id='m_method'> M Method Name: handle_message_receive_model_from_client(2)</div><div id='n_method'> N Method Name: handle_message_receive_model_from_client(2)</div><div id='m_parent_class'> M Parent Class: FedMLCommManager</div><div id='n_parent_class'> N Parent Class: FedMLCommManager</div><div id='m_file'> M File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='n_file'> N File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.args.client_num_per_round,
        )
        global_model_params = self.aggregator.get_global_model_params()
        for <a id="change">process_id</a> in range(1, self.size):
            self.send_message_init_config(
                process_id, global_model_params, <a id="change">client_indexes[process_id - 1]</a>
            )

    def register_message_receive_handlers(self):
        self.register_message_receive_handler(</code></pre><h3>After Change</h3><pre><code class='java'>
            self.args.client_num_per_round,
        )

        client_schedule<a id="change"> = </a><a id="change">self.aggregator.generate_client_schedule(</a>self.round_idx, client_indexes<a id="change">)</a>
        average_weight_dict = self.aggregator.get_average_weight(client_indexes)

        global_model_params = self.aggregator.get_global_model_params()
        for process_id in range(1, self.size):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/ba79c4fa9a99c47e23d7b1ad1d7d907d5d567ba8#diff-e9eb391b74cfd552934128091766f9a847cd439fccd636b3a89ff6ae6172de8bL32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 44031697</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: ba79c4fa9a99c47e23d7b1ad1d7d907d5d567ba8</div><div id='time'> Time: 2022-08-16</div><div id='author'> Author: 956234606@qq.com</div><div id='file'> File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_class'> M Class Name: FedOptServerManager</div><div id='n_method'> N Class Name: FedOptServerManager</div><div id='m_method'> M Method Name: send_init_msg(1)</div><div id='n_method'> N Method Name: send_init_msg(1)</div><div id='m_parent_class'> M Parent Class: FedMLCommManager</div><div id='n_parent_class'> N Parent Class: FedMLCommManager</div><div id='m_file'> M File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='n_file'> N File Name: python/fedml/simulation/mpi/fedopt_seq/FedOptServerManager.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 48</div><BR>