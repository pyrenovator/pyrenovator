<html><h3>Pattern ID :41852
</h3><img src='117288173.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            unpop_rows = []
            iterable = range(0, n_rows, batch_size)

            <a id="change">if verbose</a>:
                iterable<a id="change"> = </a><a id="change">tqdm.tqdm(</a>iterable<a id="change">)</a>

            for i in iterable:
                row = dset[i : i + batch_size]
                is_unpop = np.isnan(row).any(axis=1)  &#47&#47 (batch_size,)</code></pre><h3>After Change</h3><pre><code class='java'>
            unpop_rows = []

            for i in range(0, n_rows, batch_size):
                <a id="change">if </a>verbose:
                    print(
                        f"\rFinding unpopulated rows: {round(100*i/n_rows):&gt;3d}% done",
                        end="",</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/197099cfa2636b52afd0a77557d6f45ef5c53b36#diff-4b150e405b68036f0aeb504c616bf01a24cfcf87b52f78ac1fe6fd27dcb6df5dL301' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117288173</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 197099cfa2636b52afd0a77557d6f45ef5c53b36</div><div id='time'> Time: 2021-04-15</div><div id='author'> Author: francesco.casalegno@gmail.com</div><div id='file'> File Name: src/bluesearch/utils.py</div><div id='m_class'> M Class Name: H5</div><div id='n_method'> N Class Name: H5</div><div id='m_method'> M Method Name: find_unpopulated_rows(4)</div><div id='n_method'> N Method Name: find_unpopulated_rows(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bluesearch/utils.py</div><div id='n_file'> N File Name: src/bluesearch/utils.py</div><div id='m_start'> M Start Line: 302</div><div id='m_end'> M End Line: 310</div><div id='n_start'> N Start Line: 301</div><div id='n_end'> N End Line: 314</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            n_indices = len(sorted_indices)
            iterable = range(0, n_indices, batch_size)

            <a id="change">if verbose</a>:
                iterable<a id="change"> = </a><a id="change">tqdm.tqdm(</a>iterable<a id="change">)</a>

            for i in iterable:
                subarray = dset[sorted_indices[i : i + batch_size]]  &#47&#47 (batch_size, dim)
                final_res_l.append(subarray)</code></pre><h3>After Change</h3><pre><code class='java'>
            n_indices = len(sorted_indices)

            for i in range(0, n_indices, batch_size):
                <a id="change">if </a>verbose:
                    print(f"\rLoading H5: {round(100*i/n_indices):&gt;3d}% done", end="")
                subarray = dset[sorted_indices[i : i + batch_size]]  &#47&#47 (batch_size, dim)
                final_res_l.append(subarray)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/197099cfa2636b52afd0a77557d6f45ef5c53b36#diff-4b150e405b68036f0aeb504c616bf01a24cfcf87b52f78ac1fe6fd27dcb6df5dL367' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117288169</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 197099cfa2636b52afd0a77557d6f45ef5c53b36</div><div id='time'> Time: 2021-04-15</div><div id='author'> Author: francesco.casalegno@gmail.com</div><div id='file'> File Name: src/bluesearch/utils.py</div><div id='m_class'> M Class Name: H5</div><div id='n_method'> N Class Name: H5</div><div id='m_method'> M Method Name: load(5)</div><div id='n_method'> N Method Name: load(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bluesearch/utils.py</div><div id='n_file'> N File Name: src/bluesearch/utils.py</div><div id='m_start'> M Start Line: 406</div><div id='m_end'> M End Line: 412</div><div id='n_start'> N Start Line: 406</div><div id='n_end'> N End Line: 415</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            raise ValueError("There exist image names in the custom metadata "
                             "without corresponding filenames on the server.")

        <a id="change">if verbose</a>:
            &#47&#47 wrap samples in a progress bar
            samples<a id="change"> = </a><a id="change">tqdm.tqdm(</a>samples<a id="change">)</a>

        for sample in samples:

            metadata = filename_to_metadata[sample.file_name]</code></pre><h3>After Change</h3><pre><code class='java'>
        with ThreadPoolExecutor(max_workers=max_workers) as executor:
            &#47&#47 get iterator over results
            results = executor.map(upload_sample_metadata, sample_requests)
            <a id="change">if </a>verbose:
                results = tqdm(results, total=len(sample_requests))
            &#47&#47 iterate over results to make sure they are completed
            list(results)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lightly-ai/lightly/commit/828601b03aa47078a883f170bead1c5cd5bf05af#diff-be57b233f5bf6063e59932f261fbe614c60035e59b7f7355d4a19914570fff36L113' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117288165</div><div id='project'> Project Name: lightly-ai/lightly</div><div id='commit'> Commit Name: 828601b03aa47078a883f170bead1c5cd5bf05af</div><div id='time'> Time: 2022-01-18</div><div id='author'> Author: 43336610+guarin@users.noreply.github.com</div><div id='file'> File Name: lightly/api/api_workflow_upload_metadata.py</div><div id='m_class'> M Class Name: _UploadCustomMetadataMixin</div><div id='n_method'> N Class Name: _UploadCustomMetadataMixin</div><div id='m_method'> M Method Name: upload_custom_metadata(4)</div><div id='n_method'> N Method Name: upload_custom_metadata(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lightly/api/api_workflow_upload_metadata.py</div><div id='n_file'> N File Name: lightly/api/api_workflow_upload_metadata.py</div><div id='m_start'> M Start Line: 166</div><div id='m_end'> M End Line: 193</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 208</div><BR>