<html><h3>Pattern ID :3443
</h3><img src='13239346.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    import yaml
    import os

    fs = open(<a id="change">os.path.join(</a>private_config_path, "config.yaml"<a id="change">)</a>, encoding="UTF-8")
    private_config = <a id="change">yaml.load(</a>fs<a id="change">, Loader=yaml.FullLoader)</a>
    dirs = []
    if xlabel is None:
        xlabel = DEFAULT_X_NAME
</code></pre><h3>After Change</h3><pre><code class='java'>
    scale_dict = {}
    if misc_scale_index is None:
        misc_scale_index = []
    for <a id="change">i</a> in <a id="change">range(</a>len(qualities)<a id="change">)</a>:
        if i in misc_scale_index:
            scale_dict[<a id="change">qualities[i]</a>] = misc_scale[misc_scale_index.index(i)]
        else:
            scale_dict[<a id="change">qualities[i]</a>] = 1
    _, _, lgd, texts = plot_util.plot_results(results, xy_fn= lambda r, y_names: csv_to_xy(r, DEFAULT_X_NAME, y_names,
                                                                                           scale_dict, x_start=x_start, y_bound=y_bound,
                                                                                           remove_outlier=remove_outlier),</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/xionghuichen/rlassistant/commit/c960619032588e7490bfcecc6c8aa20a04a0bddf#diff-a8c3aff055596448cd598dd02c9f760327d2126ed0fb81a01e0173d529481ddbL91' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13239346</div><div id='project'> Project Name: xionghuichen/rlassistant</div><div id='commit'> Commit Name: c960619032588e7490bfcecc6c8aa20a04a0bddf</div><div id='time'> Time: 2020-12-21</div><div id='author'> Author: zpcxh95@outlook.com</div><div id='file'> File Name: RLA/easy_plot/plot_func.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: plot_res_func(17)</div><div id='n_method'> N Method Name: plot_res_func(19)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: RLA/easy_plot/plot_func.py</div><div id='n_file'> N File Name: RLA/easy_plot/plot_func.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 173</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 150</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    import yaml
    import os

    fs = open(<a id="change">os.path.join(</a>private_config_path, "config.yaml"<a id="change">)</a>, encoding="UTF-8")
    private_config = <a id="change">yaml.load(</a>fs<a id="change">, Loader=yaml.FullLoader)</a>
    dirs = []
    if xlabel is None:
        xlabel = DEFAULT_X_NAME
</code></pre><h3>After Change</h3><pre><code class='java'>
    scale_dict = {}
    if misc_scale_index is None:
        misc_scale_index = []
    for <a id="change">i</a> in <a id="change">range(</a>len(qualities)<a id="change">)</a>:
        if i in misc_scale_index:
            scale_dict[<a id="change">qualities[i]</a>] = misc_scale[misc_scale_index.index(i)]
        else:
            scale_dict[<a id="change">qualities[i]</a>] = 1
    _, _, lgd, texts = plot_util.plot_results(results, xy_fn= lambda r, y_names: csv_to_xy(r, DEFAULT_X_NAME, y_names,
                                                                                           scale_dict, x_start=x_start, y_bound=y_bound,
                                                                                           remove_outlier=remove_outlier),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xionghuichen/rlassistant/commit/c960619032588e7490bfcecc6c8aa20a04a0bddf#diff-a8c3aff055596448cd598dd02c9f760327d2126ed0fb81a01e0173d529481ddbL91' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13239344</div><div id='project'> Project Name: xionghuichen/rlassistant</div><div id='commit'> Commit Name: c960619032588e7490bfcecc6c8aa20a04a0bddf</div><div id='time'> Time: 2020-12-21</div><div id='author'> Author: zpcxh95@outlook.com</div><div id='file'> File Name: RLA/easy_plot/plot_func.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: plot_res_func(17)</div><div id='n_method'> N Method Name: plot_res_func(19)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: RLA/easy_plot/plot_func.py</div><div id='n_file'> N File Name: RLA/easy_plot/plot_func.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 173</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 150</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                torch.save(model.state_dict(), os.path.join(args.save_dir, "model.best"))

    &#47&#47 Evaluate on test set
    model.load_state_dict(<a id="change">torch.load(os.path.join(</a>args.save_dir + "/model.best"<a id="change">)</a><a id="change">)</a>)
    test_score = evaluate(
        data=test_data,
        batch_size=args.batch_size,</code></pre><h3>After Change</h3><pre><code class='java'>
    metric_func = get_metric_func(args.metric)

    &#47&#47 Train ensemble of models
    for <a id="change">model_idx</a> in <a id="change">range(</a>args.ensemble_size<a id="change">)</a>:
        &#47&#47 Build/load model
        print(&quotBuilding model {}&quot.format(model_idx))
        model = build_MPN(
            hidden_size=args.hidden_size,
            depth=args.depth,
            num_tasks=num_tasks,
            sigmoid=args.dataset_type == &quotclassification&quot,
            dropout=args.dropout,
            activation=args.activation,
            attention=args.attention,
            three_d=args.three_d
        )
        if args.checkpoint_paths is not None:
            print(&quotLoading model from {}&quot.format(<a id="change">args.checkpoint_paths[model_idx]</a>))
            model.load_state_dict(torch.load(<a id="change">args.checkpoint_paths[model_idx]</a>))
        print(model)
        print(&quotNumber of parameters = {:,}&quot.format(param_count(model)))
        if args.cuda:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aamini/chemprop/commit/b4507aa6cac42e8b0f7268f54065330b21d613b5#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13239350</div><div id='project'> Project Name: aamini/chemprop</div><div id='commit'> Commit Name: b4507aa6cac42e8b0f7268f54065330b21d613b5</div><div id='time'> Time: 2018-09-24</div><div id='author'> Author: swansonk.14@gmail.com</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_training(1)</div><div id='n_method'> N Method Name: run_training(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    for root, dirs, files in tqdm(os.walk(feature_dir)):
        for name in files:
            path = <a id="change">os.path.join(</a>root, name<a id="change">)</a>
            features = <a id="change">np.load(</a>path<a id="change">)</a>
            centroid_dist = np.linalg.norm(features - centroid, axis=1)
            if np.min(centroid_dist) &lt; min_dist:
                min_dist = np.min(centroid_dist)
                vid_id = path[path.index(&quot/&quot) + 1: path.rindex(&quot/&quot)]</code></pre><h3>After Change</h3><pre><code class='java'>
    features_id = None
    features_row = None

    for <a id="change">i</a> in tqdm(<a id="change">range(</a>counter<a id="change">)</a>):
        centroid_dist = np.linalg.norm(<a id="change">features[i]</a> - centroid, axis=1)
        if np.min(centroid_dist) &lt; min_dist:
            path = <a id="change">feature_paths[i]</a>
            min_dist = np.min(centroid_dist)
            vid_id = path[path.index(&quot/&quot) + 1: path.rindex(&quot/&quot)]
            features_id = path[path.rindex(&quot-&quot) + 1: path.rindex(&quot.&quot)]
            features_row = np.argmin(centroid_dist)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ammesatyajit/videobert/commit/e6cec027ebc3f4a4a2270a4e406ea9dc9fd16856#diff-1fe6549e10b9d64ba66aa03fb53a4593b5a8c238513694bbaf1f8a03f1852d20L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13239348</div><div id='project'> Project Name: ammesatyajit/videobert</div><div id='commit'> Commit Name: e6cec027ebc3f4a4a2270a4e406ea9dc9fd16856</div><div id='time'> Time: 2021-01-01</div><div id='author'> Author: ammesatyajit@gmail.com</div><div id='file'> File Name: VideoBERT/data/centroid_to_img.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: img_path_from_centroid(3)</div><div id='n_method'> N Method Name: img_path_from_centroid(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: VideoBERT/data/centroid_to_img.py</div><div id='n_file'> N File Name: VideoBERT/data/centroid_to_img.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 39</div><BR>