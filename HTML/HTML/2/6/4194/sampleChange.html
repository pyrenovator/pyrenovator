<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def run_inference(features, encoder):
    Get the embedding of an utterance using the encoder.
    <a id="change">pass</a>
</code></pre><h3>After Change</h3><pre><code class='java'>

def run_inference(features, encoder):
    Get the embedding of an utterance using the encoder.
    sliding_windows<a id="change"> = </a>feature_extraction.extract_sliding_windows(features)
    batch_input<a id="change"> = torch.from_numpy(</a><a id="change">np.stack(sliding_windows)).float()</a>
    batch_output = encoder(batch_input)[:, -1, :]
    aggregated_output = torch.mean(batch_output, dim=0, keepdim=False)
    <a id="change">return </a>aggregated_output.data.numpy()
</code></pre>