<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        score_paired = 1 - score_unpaired
        &#47&#47 print(pred_bp)
        pairs_not_nan = torch.logical_not(torch.isnan(pairs))
        loss  = torch.sum(<a id="change">pairs[pairs_not_nan[:, 0], 0]</a> * score_unpaired[pairs_not_nan[:, 0]])
        loss += torch.sum(pairs[pairs_not_nan[:, 1], 1] * score_paired[pairs_not_nan[:, 1]])

        return loss</code></pre><h3>After Change</h3><pre><code class='java'>
        print(pred_bp)
        pairs_not_nan = torch.logical_not(torch.isnan(pairs))
        pairs_not_nan = pairs_not_nan[:, 0] * pairs_not_nan[:, 1]
        pairs<a id="change"> = </a>pairs[pairs_not_nan, 0]<a id="change"> - </a>pairs[pairs_not_nan, 1]
        score_unpaired = score_unpaired[pairs_not_nan]
        &#47&#47print(pairs * (score_unpaired-0.5))
        &#47&#47print(score_unpaired&gt;0.5)
        loss<a id="change"> = </a>torch.sum(<a id="change">torch.clamp(</a>pairs * (score_unpaired-0.5)<a id="change">, min=0)</a>)

        return loss
</code></pre>