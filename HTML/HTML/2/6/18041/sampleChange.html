<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                break &#47&#47 don&quott start from i=0; there is a large difference between the length of the first and last element

        self.last_batch_start_index += len(batch_of_indices)
        <a id="change">assert </a>len(batch_of_indices) &gt; 0, &quotFound an example larger than batch size.&quot
        return batch_of_indices

    def _get_next_batch_start_index(self):</code></pre><h3>After Change</h3><pre><code class='java'>
            else:
                longest_example = new_example &#47&#47 this is the first element in batch, and therefore the longest
            examples_size = self.batch_size_fn(longest_example)
            <a id="change">if examples_size &gt; self.batch_size</a>:
                <a id="change">logger.warning(&quotSkipping an example larger than batch size. Consider increasing the batch size to avoid this warning&quot</a><a id="change">)</a>
                self.last_batch_start_index += 1
                i<a id="change"> = </a>self._get_next_batch_start_index()
                continue
                
            new_batch_size = current_batch_size + self.batch_size_fn(longest_example)</code></pre>