<html><h3>Pattern ID :964
</h3><img src='4606368.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    dataiter = iter(dataloader)
    images, labels = dataiter.next()

    for i, <a id="change">data</a> in enumerate(dataloader, 0):
        inputs, labels = data
        inputs, labels = inputs.to(device), labels.to(device)
        print("Input:", inputs.shape)
        outputs = model(inputs)
        print(&quotmodel out:&quot, outputs.shape)
        <a id="change">if i == 1</a>:
            <a id="change">break</a>

    &#47&#47 print labels
    &#47&#47print(&quot &quot.join(&quot%5s&quot % classes[labels[j]] for j in range(4)))
</code></pre><h3>After Change</h3><pre><code class='java'>
    print(&quotmodel loaded&quot)

    &#47&#47 prepare to count predictions for each class
    correct_pred = <a id="change">{classname: 0 for classname in classes}</a>
    total_pred = {classname: 0 for classname in classes}

    &#47&#47 again no gradients needed
    with torch.no_grad():</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/loretoparisi/hf-experiments/commit/286971f578836b95fec5d7123b3b23cd5fa01603#diff-e18ee566b47545dc43db41d92acbfe58becfa49e56bec72bca5adea1445e53e3L156' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4606368</div><div id='project'> Project Name: loretoparisi/hf-experiments</div><div id='commit'> Commit Name: 286971f578836b95fec5d7123b3b23cd5fa01603</div><div id='time'> Time: 2021-05-11</div><div id='author'> Author: loretoparisi@gmail.com</div><div id='file'> File Name: src/mlpvision/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test(5)</div><div id='n_method'> N Method Name: test(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/mlpvision/train.py</div><div id='n_file'> N File Name: src/mlpvision/train.py</div><div id='m_start'> M Start Line: 156</div><div id='m_end'> M End Line: 176</div><div id='n_start'> N Start Line: 158</div><div id='n_end'> N End Line: 192</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        if context.with_display:
            fig = go.Figure()
            for <a id="change">class_name</a> in dataset_classes:
                if class_name in self.excluded_classes:
                    continue
                <a id="change">if len(dataset_classes) == 2</a>:
                    fig.add_trace(go.Scatter(
                        x=fpr[class_name],
                        y=tpr[class_name],
                        line_width=2,
                        name=f&quotauc = {roc_auc[class_name]:0.2f}&quot,
                    ))
                    fig.add_trace(get_cutoff_figure(tpr[class_name], fpr[class_name], thresholds[class_name]))
                    <a id="change">break</a>
                else:
                    fig.add_trace(go.Scatter(
                        x=fpr[class_name],
                        y=tpr[class_name],</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            display = None

        return CheckResult(<a id="change">{x: roc_auc[x] for x in classes_for_display}</a>, header=&quotROC Report&quot, display=display)

    def add_condition_auc_greater_than(self, min_auc: float = 0.7):
        Add condition - require min allowed AUC score per class.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/ec34587bc5b26414f14a8beaa6ab45df382edb0f#diff-c93e326457a5a2b9031e0b48c45438e234e704cdfcd5ba66557ab31dffc1b83fL52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4606366</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: ec34587bc5b26414f14a8beaa6ab45df382edb0f</div><div id='time'> Time: 2022-11-20</div><div id='author'> Author: 67195469+Nadav-Barak@users.noreply.github.com</div><div id='file'> File Name: deepchecks/tabular/checks/model_evaluation/roc_report.py</div><div id='m_class'> M Class Name: RocReport</div><div id='n_method'> N Class Name: RocReport</div><div id='m_method'> M Method Name: run_logic(3)</div><div id='n_method'> N Method Name: run_logic(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetCheck</div><div id='n_parent_class'> N Parent Class: SingleDatasetCheck</div><div id='m_file'> M File Name: deepchecks/tabular/checks/model_evaluation/roc_report.py</div><div id='n_file'> N File Name: deepchecks/tabular/checks/model_evaluation/roc_report.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 82</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    anno.append(Label(label))
                image_path = osp.join(self.image_dir, item_id +
                    ImagenetTxtPath.DEFAULT_IMAGE_EXT)
                for <a id="change">path</a> in glob(osp.join(self.image_dir, item_id + &quot*&quot)):
                    <a id="change">if osp.splitext(path)[1] in ImagenetTxtPath.IMAGE_EXT_FORMAT</a>:
                        image_path = path
                        <a id="change">break</a>
                items[item_id] = DatasetItem(id=item_id, subset=self._subset,
                    image=image_path, annotations=anno)
        return items
</code></pre><h3>After Change</h3><pre><code class='java'>

        image_dir = self.image_dir
        if osp.isdir(image_dir):
            images = <a id="change">{ osp.splitext(osp.relpath(p, image_dir))[0]: p
                for p in find_images(image_dir, recursive=True) }</a>
        else:
            images = {}

        with open(path, encoding=&quotutf-8&quot) as f:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/745c16ac8d1d924e7784b3c6b9f6fe1a11a13624#diff-a28a0a0b37c59c8c01cdb522418a42f5770ee4bf662d08b1cd1de26b3dfe1803L48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4606367</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: 745c16ac8d1d924e7784b3c6b9f6fe1a11a13624</div><div id='time'> Time: 2021-03-18</div><div id='author'> Author: maxim.zhiltsov@intel.com</div><div id='file'> File Name: datumaro/plugins/imagenet_txt_format.py</div><div id='m_class'> M Class Name: ImagenetTxtExtractor</div><div id='n_method'> N Class Name: ImagenetTxtExtractor</div><div id='m_method'> M Method Name: _load_items(2)</div><div id='n_method'> N Method Name: _load_items(2)</div><div id='m_parent_class'> M Parent Class: SourceExtractor</div><div id='n_parent_class'> N Parent Class: SourceExtractor</div><div id='m_file'> M File Name: datumaro/plugins/imagenet_txt_format.py</div><div id='n_file'> N File Name: datumaro/plugins/imagenet_txt_format.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 59</div><BR>