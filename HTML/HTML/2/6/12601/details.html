<html><h3>Pattern ID :12601
</h3><img src='42784704.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
class TestLock(unittest.TestCase):
    def test(self):
        mpi = jt.compile_extern.mpi
        mpirun_path<a id="change"> = </a><a id="change">jt.compile_extern.mpicc_path.replace("mpicc"</a>, <a id="change">"mpirun"</a><a id="change">)</a>
        if os.environ.get(&quotlock_full_test&quot, &quot0&quot) == &quot1&quot:
            cache_path = os.path.join(str(Path.home()), ".cache", "jittor", "lock")
            cmd = f"rm -rf {cache_path} && cache_name=lock {mpirun_path} -np 2 {sys.executable} -m jittor.test.test_example"
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
            cmd = f"cache_name=lock {sys.executable} -m jittor.test.test_example"
        else:
            cmd = f"{sys.executable} -m jittor.test.test_example"
        <a id="change">print("run cmd twice"</a>, cmd<a id="change">)</a>
        assert os.system(f"{cmd} & {cmd} & wait %1 && wait %2") == 0


if __name__ == "__main__":</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/987d42cc886cc4097f48ef62bb687c2d26bfe7a6#diff-79a86ea979d26bcf63b321718d468fde13e8cbf65b055eb75fb9f2319101c5a6L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42784704</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 987d42cc886cc4097f48ef62bb687c2d26bfe7a6</div><div id='time'> Time: 2020-04-11</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/test/test_lock.py</div><div id='m_class'> M Class Name: TestLock</div><div id='n_method'> N Class Name: TestLock</div><div id='m_method'> M Method Name: test(1)</div><div id='n_method'> N Method Name: test(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: python/jittor/test/test_lock.py</div><div id='n_file'> N File Name: python/jittor/test/test_lock.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 26</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
			answer = [len(selected_cells)]
		elif agg_op == &quotsum&quot:
			selected_cells = [c.lstrip(&quot0&quot) for c in selected_cells if len(c)&gt;1]
			answer<a id="change"> = </a>[sum([int(ast.literal_eval(<a id="change">x.strip().replace(","</a>,<a id="change">""</a><a id="change">)</a>)) for x in selected_cells if not isinstance(x, int)])]
		elif agg_op == &quotaverage&quot:
			print(selected_cells)
			selected_cells = [c.lstrip(&quot0&quot) if len(c)&gt;1 else c for c in selected_cells ]</code></pre><h3>After Change</h3><pre><code class='java'>
				selected_cells.append(rows[i][sql[&quotsel&quot]])
		
		if table[&quottypes&quot][sql[&quotsel&quot]] == &quotreal&quot:
			<a id="change">print("real column ???"</a><a id="change">)</a>
			selected_cells = [float(str(s).replace(&quot,&quot,&quot&quot)) for s in selected_cells]
		else:
			selected_cells = [s.lower() for s in selected_cells]
		</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/primeqa/primeqa/commit/32f77bb89bc1dc354d6ecc6da81db34be8b59dc3#diff-64864e66e56a30afc1b134c02860dafa6594753f869647c334514c0a0f5a8df9L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42784705</div><div id='project'> Project Name: primeqa/primeqa</div><div id='commit'> Commit Name: 32f77bb89bc1dc354d6ecc6da81db34be8b59dc3</div><div id='time'> Time: 2022-07-05</div><div id='author'> Author: vishk024@in.ibm.com</div><div id='file'> File Name: primeqa/tableqa/utils/wikisql_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _execute_sql(2)</div><div id='n_method'> N Method Name: _execute_sql(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: primeqa/tableqa/utils/wikisql_utils.py</div><div id='n_file'> N File Name: primeqa/tableqa/utils/wikisql_utils.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 123</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        d = id2sent[ins["id"]]
        d["relations"] = list(map(lambda x: id2rel[x], rels))
        for word in ["head", "tail"]:
            d[word] = <a id="change">d[word].replace(" "</a>, <a id="change">""</a><a id="change">)</a>
            d["text"] = d["text"].replace(" ", "")
            positions<a id="change"> = </a>rtp.find_all_positions(d["text"], d[word])
            if len(positions) == 0:
                print("warn! data skipped", d)
                continue</code></pre><h3>After Change</h3><pre><code class='java'>
        d[&quotentities&quot].append(["PER", *positions[0]])  &#47&#47 only take the first occurrence
        positions = find_all_positions(sent_text, id2sent[ins["id"]]["tail"])
        if len(positions) == 0:
            <a id="change">print("warn! data skipped"</a>, d<a id="change">)</a>
            continue
        d[&quotentities&quot].append(["PER", *positions[0]])   &#47&#47 only take the first occurrence
        rels = list(set(map(int, ins["relations"].split())))
        d[&quotrelations&quot]= [[id2rel[rel], 0, 1] for rel in rels]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/spico197/rex/commit/6c064639242c6f66893a4319081b7339ff6a43da#diff-c836c082f1d772bb00534f28860dfe7297b0b0c2d853e803819eea4ae04114c2L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42784706</div><div id='project'> Project Name: spico197/rex</div><div id='commit'> Commit Name: 6c064639242c6f66893a4319081b7339ff6a43da</div><div id='time'> Time: 2021-05-06</div><div id='author'> Author: spico1026@gmail.com</div><div id='file'> File Name: data/IPRE/convert.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: convert_data(3)</div><div id='n_method'> N Method Name: convert_data(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data/IPRE/convert.py</div><div id='n_file'> N File Name: data/IPRE/convert.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 44</div><BR>