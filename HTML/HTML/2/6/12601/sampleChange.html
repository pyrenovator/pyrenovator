<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
class TestLock(unittest.TestCase):
    def test(self):
        mpi = jt.compile_extern.mpi
        mpirun_path<a id="change"> = </a><a id="change">jt.compile_extern.mpicc_path.replace("mpicc"</a>, <a id="change">"mpirun"</a><a id="change">)</a>
        if os.environ.get(&quotlock_full_test&quot, &quot0&quot) == &quot1&quot:
            cache_path = os.path.join(str(Path.home()), ".cache", "jittor", "lock")
            cmd = f"rm -rf {cache_path} && cache_name=lock {mpirun_path} -np 2 {sys.executable} -m jittor.test.test_example"
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
            cmd = f"cache_name=lock {sys.executable} -m jittor.test.test_example"
        else:
            cmd = f"{sys.executable} -m jittor.test.test_example"
        <a id="change">print("run cmd twice"</a>, cmd<a id="change">)</a>
        assert os.system(f"{cmd} & {cmd} & wait %1 && wait %2") == 0


if __name__ == "__main__":</code></pre>