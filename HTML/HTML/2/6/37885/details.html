<html><h3>Pattern ID :37885
</h3><img src='108623992.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    optimizer = torch.optim.Adam(milnet.parameters(), lr=args.lr, betas=(0.5, 0.9), weight_decay=args.weight_decay)
    scheduler = torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, args.num_epochs, 0.000005)
    
    <a id="change">if </a>args.new_features == 0:
        bags_csv = &quotdatasets/tcga-dataset/TCGA.csv&quot
    else:
        luad_list<a id="change"> = </a>glob.glob(&quotdatasets&quot+os.sep+&quotwsi-tcga-lung&quot+os.sep+&quotLUAD&quot+os.sep+&quot*.csv&quot)
        lusc_list<a id="change"> = </a>glob.glob(&quotdatasets&quot+os.sep+&quotwsi-tcga-lung&quot+os.sep+&quotLUSC&quot+os.sep+&quot*.csv&quot)
        luad_df = pd.DataFrame(luad_list)
        luad_df[&quotlabel&quot] = 0
        luad_df.to_csv(&quotdatasets/wsi-tcga-lung/LUAD.csv&quot, index=False)        
        lusc_df = pd.DataFrame(lusc_list)
        lusc_df[&quotlabel&quot]<a id="change"> = </a>1
        lusc_df.to_csv(&quotdatasets/wsi-tcga-lung/LUSC.csv&quot, index=False)        
        bags_path = luad_df.append(lusc_df, ignore_index=True)
        bags_path = shuffle(bags_path)</code></pre><h3>After Change</h3><pre><code class='java'>
    parser.add_argument(&quot--num_epochs&quot, default=40, type=int, help=&quotNumber of total training epochs&quot)
    parser.add_argument(&quot--weight_decay&quot, default=5e-3, type=float, help=&quotWeight decay&quot)
    parser.add_argument(&quot--new_features&quot, default=0, type=int, help=&quotUse newly trained features 1/0(on/off)&quot)
    <a id="change">parser.add_argument(&quot--dataset&quot</a><a id="change">, default=&quotTCGA-lung&quot, type=str, help=&quotDataset folder name&quot)</a>
    args = parser.parse_args()
    
    
    i_classifier = mil.FCLayer(in_size=args.feats_size, out_size=args.num_classes).cuda()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/binli123/dsmil-wsi/commit/9679d9909a89006555a4d371274255f65ef695ac#diff-dd26f5261cb299cd13658b3284fdaac27b3055e490d7096f9993f5b88164cc06L111' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108623992</div><div id='project'> Project Name: binli123/dsmil-wsi</div><div id='commit'> Commit Name: 9679d9909a89006555a4d371274255f65ef695ac</div><div id='time'> Time: 2021-05-20</div><div id='author'> Author: bli346@wisc.edu</div><div id='file'> File Name: train_tcga.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_tcga.py</div><div id='n_file'> N File Name: train_tcga.py</div><div id='m_start'> M Start Line: 129</div><div id='m_end'> M End Line: 165</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 169</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        heuristic_count += 1
                        continue
                    _, quote_values = remove_thingtalk_quotes(o[args.thingtalk_column])
                    <a id="change">if </a>quote_values is None:
                        heuristic_count<a id="change"> += </a>1
                        continue
                    should_skip<a id="change"> = </a>False
                    for q in quote_values:
                        if q not in all_input_columns:
                            heuristic_count<a id="change"> += </a>1
                            should_skip = True
                            break
                    if should_skip:</code></pre><h3>After Change</h3><pre><code class='java'>
                        help=&quotThe path to the output file.&quot)
    parser.add_argument(&quot--query_file&quot, type=str,
                        help=&quotThe path to the file containing new queries.&quot)
    <a id="change">parser.add_argument(&quot--thrown_away&quot</a><a id="change">, type=str, default=None,
                        help=&quotThe path to the output file that will contain inputs that were removed because of `--transformation`.&quot)</a>
    parser.add_argument(&quot--thingtalk_gold_file&quot, type=str,
                        help=&quotThe path to the file containing the dataset with a correct thingtalk column.&quot)
    parser.add_argument(&quot--num_new_queries&quot, type=int, default=1,
                        help=&quotNumber of new queries per old query. Valid if "--transformation replace_queries" is used.&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/d2eacd4e5c5347cb45907aea9e0a81a54b9fd5bf#diff-ee119052413383bfd6476efcd585c7782e225b9afadedd52e593204c70c2e120L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108623945</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: d2eacd4e5c5347cb45907aea9e0a81a54b9fd5bf</div><div id='time'> Time: 2020-05-26</div><div id='author'> Author: s.j.semnani@gmail.com</div><div id='file'> File Name: genienlp/paraphrase/scripts/transform_dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: genienlp/paraphrase/scripts/transform_dataset.py</div><div id='n_file'> N File Name: genienlp/paraphrase/scripts/transform_dataset.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 196</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert osp.isdir(args.path_in)
    assert osp.isdir(osp.join(args.path_in, &quotdata_3d_semantics&quot, args.scene_name)), f&quotInput folder not found {osp.join(args.path_in, "data_3d_semantics", args.scene_name)}&quot
    
    <a id="change">if </a>args.shift_cells:
        cells_text<a id="change"> = </a>&quotY&quot
    elif args.grid_cells:
        cells_text<a id="change"> = </a>&quotG&quot
    else:
        cells_text<a id="change"> = </a>&quotN&quot

    args.path_out = f&quot{args.path_out}_{args.cell_size}-{args.cell_dist}_sc{cells_text}_pd{args.pose_dist}_pc{args.pose_count}_sp{"Y" if args.shift_poses else "N"}_{args.describe_by}_nm{args.num_mentioned}&quot
    if args.describe_best_cell:</code></pre><h3>After Change</h3><pre><code class='java'>
    parser.add_argument(&quot--describe_best_cell&quot, action=&quotstore_true&quot) 
    parser.add_argument(&quot--no_ontop&quot, action=&quotstore_true&quot)

    <a id="change">parser.add_argument(&quot--all_cells&quot</a><a id="change">, action=&quotstore_true&quot, help="Do not reject cells with too few objects.")</a>

    args = parser.parse_args()
    
    assert osp.isdir(args.path_in)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mako443/text2pos-cvpr2022/commit/e2c96e40d20820ff3d569acc39ca96d28fe7121f#diff-aa9d948a48a745c7eccd3b4626fa4a2c163d9df27654a0755df44b7854147921L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108624107</div><div id='project'> Project Name: mako443/text2pos-cvpr2022</div><div id='commit'> Commit Name: e2c96e40d20820ff3d569acc39ca96d28fe7121f</div><div id='time'> Time: 2021-06-03</div><div id='author'> Author: manuel.kolmet@gmail.com</div><div id='file'> File Name: datapreparation/args.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: parse_arguments(0)</div><div id='n_method'> N Method Name: parse_arguments(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: datapreparation/args.py</div><div id='n_file'> N File Name: datapreparation/args.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 7</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        opt.learning_rate = 0.01

    &#47&#47 set the path according to the environment
    <a id="change">if </a>hostname.startswith(&quotvisiongpu&quot):
        opt.model_path<a id="change"> = </a>&quot/path/to/my/model&quot
        opt.tb_path<a id="change"> = </a>&quot/path/to/my/tensorboard&quot
    else:
        opt.model_path = &quot./save/models&quot
        opt.tb_path<a id="change"> = </a>&quot./save/tensorboard&quot

    iterations = opt.lr_decay_epochs.split(&quot,&quot)
    opt.lr_decay_epochs = list([])</code></pre><h3>After Change</h3><pre><code class='java'>
    parser.add_argument(&quot--device&quot, type=str, default=&quotcuda:1&quot, help=&quotbatch_size&quot)

    &#47&#47 optimization
    <a id="change">parser.add_argument(&quot--learning_rate&quot</a><a id="change">, type=float, default=0.1, help=&quotlearning rate&quot)</a>
    parser.add_argument(&quot--lr_decay_epochs&quot, type=str, default=&quot200, 300, 400, 500&quot, help=&quotwhere to decay lr, can be a list&quot)
    parser.add_argument(&quot--lr_decay_rate&quot, type=float, default=0.1, help=&quotdecay rate for learning rate&quot)
    parser.add_argument(&quot--weight_decay&quot, type=float, default=5e-4, help=&quotweight decay&quot)
    parser.add_argument(&quot--momentum&quot, type=float, default=0.9, help=&quotmomentum&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alldbi/supermix/commit/37639c730e5763956c96ea607288813804b962b7#diff-3090bb87b176cdf12afbf0e28a1acc8a13b1d4030c01abfea584b3ee8d8d499eL22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108624112</div><div id='project'> Project Name: alldbi/supermix</div><div id='commit'> Commit Name: 37639c730e5763956c96ea607288813804b962b7</div><div id='time'> Time: 2020-01-17</div><div id='author'> Author: ad0046@mix.wvu.edu</div><div id='file'> File Name: train_teacher.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: parse_option(0)</div><div id='n_method'> N Method Name: parse_option(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_teacher.py</div><div id='n_file'> N File Name: train_teacher.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 69</div><BR>