<html><h3>Pattern ID :29315
</h3><img src='86042576.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            off_x = 0
            off_y = 0
            <a id="change">if self.model_type &gt; 0</a>:
                off_x = self.res * ((1. * logit(tensor[66 + i][y, x])) - 0.0)
                off_y = self.res * ((1. * logit(tensor[66 * 2 + i][y, x])) - 0.0)
            else:
                off_x<a id="change"> = </a>self.res * ((2. * float(tensor[66 + i][y, x])) - 1.0)
                off_y = self.res * ((2. * float(tensor[66 * 2 + i][y, x])) - 1.0)
            lm_x = crop_y1 + scale_y * (self.res * (float(x) / 28.) + off_x)
            lm_y = crop_x1 + scale_x * (self.res * (float(y) / 28.) + off_y)</code></pre><h3>After Change</h3><pre><code class='java'>
            off_x = self.res * ((1. * logit(tensor[66 + i][x, y])) - 0.0)
            off_y = self.res * ((1. * logit(tensor[66 * 2 + i][x, y])) - 0.0)
            off_x = math.floor(off_x + 0.5)
            off_y<a id="change"> = </a><a id="change">math.floor(</a>off_y<a id="change"> + </a>0.5<a id="change">)</a>
            lm_x = crop_y1 + scale_y * (self.res * (float(x) / 28.) + off_x)
            lm_y = crop_x1 + scale_x * (self.res * (float(y) / 28.) + off_y)
            lms.append((lm_x,lm_y,conf))
        avg_conf = avg_conf / 66.</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/emilianavt/openseeface/commit/dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5#diff-0fd2935c2a1fe561051ff2ef9dda8f4c52cc652e8160029708680c2e61fa2cf0L253' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 86042576</div><div id='project'> Project Name: emilianavt/openseeface</div><div id='commit'> Commit Name: dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5</div><div id='time'> Time: 2020-01-26</div><div id='author'> Author: 38952746+emilianavt@users.noreply.github.com</div><div id='file'> File Name: tracker.py</div><div id='m_class'> M Class Name: Tracker</div><div id='n_method'> N Class Name: Tracker</div><div id='m_method'> M Method Name: landmarks(3)</div><div id='n_method'> N Method Name: landmarks(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tracker.py</div><div id='n_file'> N File Name: tracker.py</div><div id='m_start'> M Start Line: 253</div><div id='m_end'> M End Line: 276</div><div id='n_start'> N Start Line: 256</div><div id='n_end'> N End Line: 263</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 the following code takes ordered data and scatters it on to an image grid
        &#47&#47 profiling for a 2D problem showed drastic differences in performances
        &#47&#47 for these two implementations on cpu/gpu, but they do the same thing
        <a id="change">if device == torch.device(&quotcpu&quot)</a>:
            tmp<a id="change"> = </a>complex_mult(coef.unsqueeze(0), kdat, dim=1)
            for bind in range(griddat.shape[0]):
                for riind in range(griddat.shape[1]):
                    griddat[bind, riind].index_put_(</code></pre><h3>After Change</h3><pre><code class='java'>
    centers = tf.cast(tf.floor(numpoints * L / 2), int_type)

    &#47&#47 offset from k-space to first coef loc
    kofflist<a id="change"> = </a>1 + \
        tf.cast(<a id="change">tf.floor(</a>tm<a id="change"> - </a>numpoints[:, None] / 2.0<a id="change">)</a>, int_type)

    &#47&#47 initialize output array
    griddat = tf.zeros(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zaccharieramzi/tfkbnufft/commit/e1123a8893ee7aeee9593a67d2151f8d860f384a#diff-9f6c80acef016f710c93669e2f4412dd11f8b0b6df0906e13e939992168a3b6dL146' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 86042579</div><div id='project'> Project Name: zaccharieramzi/tfkbnufft</div><div id='commit'> Commit Name: e1123a8893ee7aeee9593a67d2151f8d860f384a</div><div id='time'> Time: 2020-03-01</div><div id='author'> Author: zaccharie.ramzi@gmail.com</div><div id='file'> File Name: tfkbnufft/nufft/interp_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_interp_back(3)</div><div id='n_method'> N Method Name: run_interp_back(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tfkbnufft/nufft/interp_functions.py</div><div id='n_file'> N File Name: tfkbnufft/nufft/interp_functions.py</div><div id='m_start'> M Start Line: 160</div><div id='m_end'> M End Line: 205</div><div id='n_start'> N Start Line: 161</div><div id='n_end'> N End Line: 190</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 pylint: disable=unexpected-keyword-arg
        &#47&#47 Resource variable is default in TF2.x
        <a id="change">if version.parse(tf.version.VERSION) &gt;= version.parse("2.0")</a>:
            alpha_var = tf.Variable(alpha, trainable=True, name=&quotalpha&quot)
        else:
            alpha_var<a id="change"> = </a>tf.Variable(alpha, trainable=True, use_resource=True, name=&quotalpha&quot)

        return alpha_var
</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            delta = encoding.delta

        tensor_floor<a id="change"> = </a><a id="change">tf.floor(</a>tensor<a id="change"> / </a>delta<a id="change">)</a>
        tensor = (tensor / delta) - tensor_floor
        alpha_var = AdaroundWrapper._create_alpha_var(tensor)
        return alpha_var
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/7e49dde6832e4427fbd176fa0e9f6898a81dc3f1#diff-33d4dcc5d5b9eeb5eee6d9c3391d72e8a64a2ccc46f98d2c4b146306b45e91d9L168' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 86042570</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 7e49dde6832e4427fbd176fa0e9f6898a81dc3f1</div><div id='time'> Time: 2022-04-28</div><div id='author'> Author: quic_ykota@quicinc.com</div><div id='file'> File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/adaround/adaround_wrapper.py</div><div id='m_class'> M Class Name: AdaroundWrapper</div><div id='n_method'> N Class Name: AdaroundWrapper</div><div id='m_method'> M Method Name: _initialize_alpha(4)</div><div id='n_method'> N Method Name: _initialize_alpha(2)</div><div id='m_parent_class'> M Parent Class: keras.layers.Layer</div><div id='n_parent_class'> N Parent Class: keras.layers.Layer</div><div id='m_file'> M File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/adaround/adaround_wrapper.py</div><div id='n_file'> N File Name: TrainingExtensions/tensorflow/src/python/aimet_tensorflow/adaround/adaround_wrapper.py</div><div id='m_start'> M Start Line: 173</div><div id='m_end'> M End Line: 186</div><div id='n_start'> N Start Line: 243</div><div id='n_end'> N End Line: 266</div><BR>