<html><h3>Pattern ID :4807
</h3><img src='16948022.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        global_num_max += 1
      return f"&lt;&lt;&lt; {x.global_num} &gt;&gt;&gt;"

    _,sop = <a id="change">str(</a>op<a id="change">)</a>.split(".")
    top_colors = {LoadOps: "&#47&#47ffffff", UnaryOps: "&#47&#47c0c0c0", ReduceOps: "&#47&#478080ff", BinaryOps: "&#47&#47c0c0c0", MovementOps: "&#47&#4780ff80", ProcessingOps: "&#47&#47ff8080"}

    for x in inp:</code></pre><h3>After Change</h3><pre><code class='java'>
    top_colors = {LoadOps: "&#47&#47ffffff", UnaryOps: "&#47&#47c0c0c0", ReduceOps: "&#47&#478080ff", BinaryOps: "&#47&#47c0c0c0", MovementOps: "&#47&#4780ff80", ProcessingOps: "&#47&#47ff8080"}

    for x in inp:
      if not isinstance(op, list): op<a id="change"> = </a>[op]
      sop<a id="change"> = </a>&quot.&quot.join(<a id="change">[str(y).split(".")[1] for y in op]</a>[::-1])
      G.add_edge(nm(x), nm(ret), label=sop, color=&quot&#47&#47808080&quot if dashed else &quot&quot, style=&quotdashed&quot if dashed else &quot&quot)
      if &quotlabel&quot not in G.nodes[nm(x)]: G.nodes[nm(x)][&quotlabel&quot] = str(x.shape)
    if nm(ret) not in G.nodes: G.add_node(nm(ret))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/6b652dafb2925c39c5da028ab24ead75fb28d751#diff-5736814df0b2c07a42d5c1bfef6b5aa5635ce18043f4aa030e21768694259ca3L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16948022</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: 6b652dafb2925c39c5da028ab24ead75fb28d751</div><div id='time'> Time: 2022-06-19</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: tinygrad/ops.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: log_op(5)</div><div id='n_method'> N Method Name: log_op(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tinygrad/ops.py</div><div id='n_file'> N File Name: tinygrad/ops.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def atom_vocab(smiles: str) -&gt; List[str]:
    return [<a id="change">str(</a>atom.GetAtomicNum()<a id="change">)</a> for atom in Chem.MolFromSmiles(smiles).GetAtoms()]


def atom_features_vocab(smiles: str) -&gt; List[str]:</code></pre><h3>After Change</h3><pre><code class='java'>
        featurizer = lambda x: x.GetAtomicNum()
    elif vocab_func == &quotatom_features&quot:
        featurizer = atom_features
    all_atoms<a id="change"> = </a>Chem.MolFromSmiles(smiles).GetAtoms()
    features<a id="change"> = </a><a id="change">[str(featurizer(atom)) for atom in all_atoms]</a>
    if nb_info:
        nb_indices = []
        for atom in all_atoms:
            nb_indices.append([nb.GetIdx() for nb in atom.GetNeighbors()]) &#47&#47 atoms are sorted by idx</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aamini/chemprop/commit/aab44e510498fd3906a30e7e658857d9d35ea1df#diff-26879063feb7da5c76f3530951c21aa1c795f58970a2a6c5a42c0c5fac87f263L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16948023</div><div id='project'> Project Name: aamini/chemprop</div><div id='commit'> Commit Name: aab44e510498fd3906a30e7e658857d9d35ea1df</div><div id='time'> Time: 2018-12-18</div><div id='author'> Author: yangk@mit.edu</div><div id='file'> File Name: chemprop/data/vocab.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: atom_vocab(3)</div><div id='n_method'> N Method Name: atom_vocab(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: chemprop/data/vocab.py</div><div id='n_file'> N File Name: chemprop/data/vocab.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if vocab_func == &quotfeature_vector&quot:
        features = [featurizer(atom) for atom in all_atoms]
    else:
        features = [<a id="change">str(</a>featurizer(atom)<a id="change">)</a> for atom in all_atoms]

    if nb_info:
        nb_indices = []</code></pre><h3>After Change</h3><pre><code class='java'>
    if args.functional_group_features:
        fg_featurizer = FunctionalGroupFeaturizer(args)
        fg_features = fg_featurizer.featurize(mol)
    all_atoms<a id="change"> = </a>mol.GetAtoms()
    if vocab_func == &quotfeature_vector&quot:
        features = [atom_features(atom, fg_features[i].tolist()) if args.functional_group_features else atom_features(atom)
                        for i, atom in enumerate(all_atoms)]
    elif vocab_func == &quotatom_features&quot:
        features<a id="change"> = </a><a id="change">[str(atom_features(atom, fg_features[i].tolist())) if args.functional_group_features else str(atom_features(atom))
                        for i, atom in enumerate(all_atoms)]</a>
    else:
        &#47&#47vocab_func = atom
        features = [atom.GetAtomicNum() for atom in all_atoms]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aamini/chemprop/commit/41e120f481132ba4e9d07f6e0164a4a4c9336a10#diff-26879063feb7da5c76f3530951c21aa1c795f58970a2a6c5a42c0c5fac87f263L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16948026</div><div id='project'> Project Name: aamini/chemprop</div><div id='commit'> Commit Name: 41e120f481132ba4e9d07f6e0164a4a4c9336a10</div><div id='time'> Time: 2018-12-18</div><div id='author'> Author: yangk@mit.edu</div><div id='file'> File Name: chemprop/data/vocab.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: atom_vocab(4)</div><div id='n_method'> N Method Name: atom_vocab(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: chemprop/data/vocab.py</div><div id='n_file'> N File Name: chemprop/data/vocab.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	y = df[&quotT&quot].T[targets2index[target]]
	
	drugs = df[&quotX&quot]
	drugs_idx = np.array([&quotDrug &quot + <a id="change">str(</a>i<a id="change">)</a> for i in list(range(drugs.shape[0]))])

	return drugs, y, drugs_idx
</code></pre><h3>After Change</h3><pre><code class='java'>

	targets = ["E_PBE0", "E_max_EINDO", "I_max_ZINDO", "HOMO_ZINDO", "LUMO_ZINDO", "E_1st_ZINDO", "IP_ZINDO", "EA_ZINDO", "HOMO_PBE0", "LUMO_PBE0", "HOMO_GW", "LUMO_GW", "alpha_PBE0", "alpha_SCS"]
	import pandas as pd
	df<a id="change"> = </a>pd.DataFrame()
	df[&quotX&quot] = pd.Series([i for i in inx[&quotX&quot]])
	df = pd.concat([df, pd.DataFrame(inx[&quotT&quot], columns = targets)], axis = 1)
	df[&quotID&quot]<a id="change"> = </a><a id="change">[&quotDrug &quot + str(i+1) for i in range(len(df))]</a>
	df.to_pickle(&quot/Users/kexinhuang/Desktop/qm7b.pkl&quot)

def QM8_9():
	import deepchem as dc</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mims-harvard/tdc/commit/77a6e4386efd75bd5d14443ee59d04cdfb98e3cc#diff-579c6125b5c3fca2c843ab9b6d8fc34263fbfcabbd55e6d404fcbadbcb699b63L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16948025</div><div id='project'> Project Name: mims-harvard/tdc</div><div id='commit'> Commit Name: 77a6e4386efd75bd5d14443ee59d04cdfb98e3cc</div><div id='time'> Time: 2020-11-06</div><div id='author'> Author: kexinhuang@hsph.harvard.edu</div><div id='file'> File Name: data_process/QM_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: QM7_process(3)</div><div id='n_method'> N Method Name: QM7_process(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data_process/QM_utils.py</div><div id='n_file'> N File Name: data_process/QM_utils.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 25</div><BR>