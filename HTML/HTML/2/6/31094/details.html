<html><h3>Pattern ID :31094
</h3><img src='91311819.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Concatenate data
        dataframe = OrderedDict(
            <a id="change">[(key, pd.DataFrame()) for key in self._table_names]</a>
        )
        for data_dict in data:
            for key, data in data_dict.items():
                df = construct_dataframe(data)</code></pre><h3>After Change</h3><pre><code class='java'>
            )

        &#47&#47 Concatenate data
        <a id="change">dataframe</a> = <a id="change">OrderedDict()</a>
        for data_dict in data:
            for key, data in data_dict.items():
                df = construct_dataframe(data)

                if self.any_pulsemap_is_non_empty(data_dict) and len(df) &gt; 0:
                    &#47&#47 only include data_dict in temp. databases if at least one pulsemap is non-empty,
                    &#47&#47 and the current extractor (df) is also non-empty (also since truth is always non-empty)
                    <a id="change">if </a>key in dataframe:
                        dataframe[key] = dataframe[key].append(
                            df, ignore_index=True, sort=True
                        )
                    else:
                        <a id="change">dataframe[key]</a> = df

        &#47&#47 Save each dataframe to SQLite database
        self.logger.debug(f"Saving to {output_file}")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/graphnet-team/graphnet/commit/f6152046ab32a6571bc9e9d8803a045326ce7a82#diff-381fb9307c2327d0fbc5bc1def9a2bbc145f3ab1c84d90cdf404b144a0630191L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91311819</div><div id='project'> Project Name: graphnet-team/graphnet</div><div id='commit'> Commit Name: f6152046ab32a6571bc9e9d8803a045326ce7a82</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: andreas.sogaard@gmail.com</div><div id='file'> File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='m_class'> M Class Name: SQLiteDataConverter</div><div id='n_method'> N Class Name: SQLiteDataConverter</div><div id='m_method'> M Method Name: save_data(3)</div><div id='n_method'> N Method Name: save_data(3)</div><div id='m_parent_class'> M Parent Class: DataConverter</div><div id='n_parent_class'> N Parent Class: DataConverter</div><div id='m_file'> M File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='n_file'> N File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        targets = np.empty_like(time)
    else:
        series = df.loc[:, &quoty_scaled&quot].values
        targets = <a id="change">[series[i + n_lags: i + n_lags + n_forecasts] for i in range(n_samples)]</a>
        targets = np.array(targets)

    if verbose:
        print("Tabularized inputs shapes:")</code></pre><h3>After Change</h3><pre><code class='java'>
        if np.isnan(inputs["lags"]).any(): raise ValueError(&quotInput lags contain NaN values in y.&quot)

    if covar_config is not None and n_lags &gt; 0:
        <a id="change">covariates</a> = <a id="change">OrderedDict(</a>{}<a id="change">)</a>
        for covar in covar_config:
            if covar in df.columns:
                <a id="change">covariates[covar]</a> = _stride_lagged_features(df_col_name=covar)
                <a id="change">if </a>np.isnan(covariates[covar]).any(): raise ValueError(&quotInput lags contain NaN values in &quot, covar)
        inputs[&quotcovariates&quot] = covariates

    if predict_mode:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/ae0ba720f438f8a50ffd5e397e3cde56a91a157b#diff-19e8b8bb76c45be0b19f9651c6c08d9e4641f5f993cdbaa581338cc45aff7516L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91311818</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: ae0ba720f438f8a50ffd5e397e3cde56a91a157b</div><div id='time'> Time: 2020-06-22</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: neuralprophet/time_dataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: tabularize_univariate_datetime(7)</div><div id='n_method'> N Method Name: tabularize_univariate_datetime(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/time_dataset.py</div><div id='n_file'> N File Name: neuralprophet/time_dataset.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 163</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 177</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Concatenate data
        dataframe = OrderedDict(
            <a id="change">[(key, pd.DataFrame()) for key in self._table_names]</a>
        )
        for data_dict in data:
            for key, data in data_dict.items():
                df = construct_dataframe(data)</code></pre><h3>After Change</h3><pre><code class='java'>
            )

        &#47&#47 Concatenate data
        <a id="change">dataframe</a> = <a id="change">OrderedDict()</a>
        for data_dict in data:
            for key, data in data_dict.items():
                df = construct_dataframe(data)

                if self.any_pulsemap_is_non_empty(data_dict) and len(df) &gt; 0:
                    &#47&#47 only include data_dict in temp. databases if at least one pulsemap is non-empty,
                    &#47&#47 and the current extractor (df) is also non-empty (also since truth is always non-empty)
                    <a id="change">if </a>key in dataframe:
                        dataframe[key] = dataframe[key].append(
                            df, ignore_index=True, sort=True
                        )
                    else:
                        <a id="change">dataframe[key]</a> = df

        &#47&#47 Save each dataframe to SQLite database
        self.logger.debug(f"Saving to {output_file}")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/icecube/graphnet/commit/f6152046ab32a6571bc9e9d8803a045326ce7a82#diff-381fb9307c2327d0fbc5bc1def9a2bbc145f3ab1c84d90cdf404b144a0630191L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91311820</div><div id='project'> Project Name: icecube/graphnet</div><div id='commit'> Commit Name: f6152046ab32a6571bc9e9d8803a045326ce7a82</div><div id='time'> Time: 2022-08-25</div><div id='author'> Author: andreas.sogaard@gmail.com</div><div id='file'> File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='m_class'> M Class Name: SQLiteDataConverter</div><div id='n_method'> N Class Name: SQLiteDataConverter</div><div id='m_method'> M Method Name: save_data(3)</div><div id='n_method'> N Method Name: save_data(3)</div><div id='m_parent_class'> M Parent Class: DataConverter</div><div id='n_parent_class'> N Parent Class: DataConverter</div><div id='m_file'> M File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='n_file'> N File Name: src/graphnet/data/sqlite/sqlite_dataconverter.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 50</div><BR>