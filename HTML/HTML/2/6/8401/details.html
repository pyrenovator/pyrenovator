<html><h3>Pattern ID :8401
</h3><img src='29280780.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if img_stack is None:
            img_stack = bf.load_image(paths[i] + "/" + filenames[i])
            &#47&#47 Normalize Intensity
            img_stack<a id="change"> = </a>img_stack/<a id="change">img_stack.max()</a>
        else:
            img = bf.load_image(paths[i] + "/" + filenames[i])
            &#47&#47 Normalize Intensity by dividing by max
            img = img/img.max()</code></pre><h3>After Change</h3><pre><code class='java'>
    for i in range(len(filenames)):
        img = load_image(paths[i] + "/" + filenames[i])
        img = img/img.max()
        <a id="change">if type(img_stack) == type(None)</a>:
            img_stack<a id="change"> = </a>img
        else:
            img_stack = np.vstack([img_stack, img])
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/stan-hua/cytoimagenet/commit/8fd9a8300cb96673368487f145a26d96c4a49d22#diff-896e98671bc646f9b29c2b534b62d4d3b4c3604b3ae1f3de0ac0886643177d5fL42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29280780</div><div id='project'> Project Name: stan-hua/cytoimagenet</div><div id='commit'> Commit Name: 8fd9a8300cb96673368487f145a26d96c4a49d22</div><div id='time'> Time: 2021-06-16</div><div id='author'> Author: stanley.hua@mail.utoronto.ca</div><div id='file'> File Name: scripts/preprocessor_2.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: merger(3)</div><div id='n_method'> N Method Name: merger(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/preprocessor_2.py</div><div id='n_file'> N File Name: scripts/preprocessor_2.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 61</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            score_i = avg_probs_i.sum() / tgt_len
            if avg_attn is not None:
                avg_attn_i = avg_attn[i, start_idxs[i]:]
                _<a id="change">, alignment = </a><a id="change">avg_attn_i.max(dim=0)</a>
            else:
                avg_attn_i = alignment = None
            hypos.append([{
                &quottokens&quot: ref,</code></pre><h3>After Change</h3><pre><code class='java'>
            model.eval()
            decoder_out = model.forward(**net_input)
            attn = decoder_out[1]
            <a id="change">if type(attn) is dict</a>:
                attn<a id="change"> = </a>attn.get(&quotattn&quot, None)

            batched = batch_for_softmax(decoder_out, orig_target)
            probs, idx = None, 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neulab/retomaton/commit/1c6679294848f303a361cba7b306b760e299bd9c#diff-1a403262a607638a5f5fbfcced3738f3281d9f5fc7713fc1525378077e8ba56bL21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29280795</div><div id='project'> Project Name: neulab/retomaton</div><div id='commit'> Commit Name: 1c6679294848f303a361cba7b306b760e299bd9c</div><div id='time'> Time: 2019-09-30</div><div id='author'> Author: sarthak_garg@apple.com</div><div id='file'> File Name: fairseq/sequence_scorer.py</div><div id='m_class'> M Class Name: SequenceScorer</div><div id='n_method'> N Class Name: SequenceScorer</div><div id='m_method'> M Method Name: generate(3)</div><div id='n_method'> N Method Name: generate(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fairseq/sequence_scorer.py</div><div id='n_file'> N File Name: fairseq/sequence_scorer.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 109</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if img_stack is None:
            img_stack = bf.load_image(paths[i] + "/" + filenames[i])
            &#47&#47 Normalize Intensity
            img_stack = img_stack/<a id="change">img_stack.max()</a>
        else:
            img = bf.load_image(paths[i] + "/" + filenames[i])
            &#47&#47 Normalize Intensity by dividing by max
            img = img/img.max()
            img_stack = np.vstack([img_stack, img])

    &#47&#47 Average along stack
    img_stack = img_stack.mean(axis=0)

    &#47&#47 Normalize back to 0-255
    img_stack<a id="change"> = </a>img_stack * 255

    Image.fromarray(img_stack).convert("L").save(f"{data_dir}{dir_name}/merged/{new_filename}")
</code></pre><h3>After Change</h3><pre><code class='java'>
    for i in range(len(filenames)):
        img = load_image(paths[i] + "/" + filenames[i])
        img = img/img.max()
        <a id="change">if type(img_stack) == type(None)</a>:
            img_stack<a id="change"> = </a>img
        else:
            img_stack = np.vstack([img_stack, img])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stan-hua/cytoimagenet/commit/8fd9a8300cb96673368487f145a26d96c4a49d22#diff-81a83041685f9e414a39d7c1eabd3b0fc0ea51670a319fedf89a8a83615763daL35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 29280788</div><div id='project'> Project Name: stan-hua/cytoimagenet</div><div id='commit'> Commit Name: 8fd9a8300cb96673368487f145a26d96c4a49d22</div><div id='time'> Time: 2021-06-16</div><div id='author'> Author: stanley.hua@mail.utoronto.ca</div><div id='file'> File Name: scripts/preprocessor.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: merger(3)</div><div id='n_method'> N Method Name: merger(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/preprocessor.py</div><div id='n_file'> N File Name: scripts/preprocessor.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 62</div><BR>