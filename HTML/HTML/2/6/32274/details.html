<html><h3>Pattern ID :32274
</h3><img src='94402176.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 NULL has already been filtered
        prev = IdxPair(pairs[0].src.id, pairs[0].tgt.id)
        for pair in pairs[1:]:
            <a id="change">if </a>not (
                (pair.src.id == prev.src + 1 and pair.tgt.id == prev.tgt + 1)
                or <a id="change">(pair.src.id == prev.src and pair.tgt.id == prev.tgt + 1)</a>
                or (pair.src.id == prev.src + 1 and pair.tgt.id == prev.tgt)
            ):
                return False
            prev<a id="change"> = </a>IdxPair(pair.src.id, pair.tgt.id)
        return True

    def add_null_aligns(self):</code></pre><h3>After Change</h3><pre><code class='java'>

    @staticmethod
    def idxs_are_consecutive(idxs: List[int]):
        return sorted(idxs) == <a id="change">list(</a>range(min(idxs), max(idxs)+1)<a id="change">)</a>

    def add_null_aligns(self):
        &#47&#47 Fill in 0 idx for words that are not aligned
        &#47&#47 The second list comprehension will already take into account the added idxs of the first one</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bramvanroy/astred/commit/7c23779d00d2997039927856df921d4dedb421ae#diff-c410fdfd70693913038aad32ed0fe7ee4b8e4f892bc1a9ab156805d6a79e4b71L182' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94402176</div><div id='project'> Project Name: bramvanroy/astred</div><div id='commit'> Commit Name: 7c23779d00d2997039927856df921d4dedb421ae</div><div id='time'> Time: 2021-02-17</div><div id='author'> Author: Bram.Vanroy@UGent.be</div><div id='file'> File Name: astred/aligned.py</div><div id='m_class'> M Class Name: AlignedSentences</div><div id='n_method'> N Class Name: AlignedSentences</div><div id='m_method'> M Method Name: idxs_are_consecutive(1)</div><div id='n_method'> N Method Name: idxs_are_consecutive(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: astred/aligned.py</div><div id='n_file'> N File Name: astred/aligned.py</div><div id='m_start'> M Start Line: 182</div><div id='m_end'> M End Line: 198</div><div id='n_start'> N Start Line: 190</div><div id='n_end'> N End Line: 191</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        pred = decoded_preds[i]
        label = decoded_labels[i]
        for key in pred:
            <a id="change">if key in label</a><a id="change"> and pred[key] == label[key]</a>:
                correct<a id="change"> += </a>1
        total += len(label)
    total = 1e-10 if total == 0 else total 
    return dict(</code></pre><h3>After Change</h3><pre><code class='java'>
                                                                decoded_preds, 
                                                                training_args.true_types,
                                                                training_args.pred_types)
    pos_labels = <a id="change">list(</a>training_args.id2role.values()<a id="change">)</a>
    pos_labels.remove(training_args.id2role[0])
    micro_f1 = f1_score(final_labels, final_preds, labels=pos_labels, average="micro") * 100.0
    return {"micro_f1": micro_f1}
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thu-keg/omnievent/commit/16615dd3b3b08bc6a7d3a7e658469e9c3ef58003#diff-c401add59b28a47361b10eb1ffae4bd238b671225cf9a1b8e754124048d8353cL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94402192</div><div id='project'> Project Name: thu-keg/omnievent</div><div id='commit'> Commit Name: 16615dd3b3b08bc6a7d3a7e658469e9c3ef58003</div><div id='time'> Time: 2022-06-06</div><div id='author'> Author: penghao20170136@163.com</div><div id='file'> File Name: src/OpenEE/evaluation/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_seq_F1(2)</div><div id='n_method'> N Method Name: compute_seq_F1(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/OpenEE/evaluation/metric.py</div><div id='n_file'> N File Name: src/OpenEE/evaluation/metric.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        scale = (encoding_max - encoding_min) / (2 ** bitwidth.data - 1)
        offset = torch.round(-encoding_min / scale)

        <a id="change">if len(scale) &gt; 1</a><a id="change"> and len(tensor.shape) &gt; 1</a>:
            scale<a id="change"> = </a>broadcast_to_tensor(tensor, scale, channel_axis)

        if len(offset) &gt; 1 and len(tensor.shape) &gt; 1:
            offset = broadcast_to_tensor(tensor, offset, channel_axis)</code></pre><h3>After Change</h3><pre><code class='java'>
        scale_grad = (clamp_out + offset - tensor * mask_tensor / delta) * grad
        offset_grad = dequantize_grad * (1 - mask_tensor)

        dim = <a id="change">list(</a>range(len(tensor.shape))<a id="change">)</a>
        if len(delta) &gt; 1 and len(tensor.shape) &gt; 1:
            dim.pop(channel_axis)

        intermediate_term1 = scale_grad.sum(dim=dim) / steps</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/f98b3ba87548a733ad92ba19cc888d87a58197ed#diff-53af21caaa602b295954c0afcf0271342e22c2c3e5f1386f293cd465e08e53d2L728' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94402212</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: f98b3ba87548a733ad92ba19cc888d87a58197ed</div><div id='time'> Time: 2022-08-08</div><div id='author'> Author: quic_geunlee@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='m_class'> M Class Name: QuantizeDequantizeFunc</div><div id='n_method'> N Class Name: QuantizeDequantizeFunc</div><div id='m_method'> M Method Name: backward(2)</div><div id='n_method'> N Method Name: backward(2)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/tensor_quantizer.py</div><div id='m_start'> M Start Line: 731</div><div id='m_end'> M End Line: 750</div><div id='n_start'> N Start Line: 741</div><div id='n_end'> N End Line: 759</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            self.coorinate_embedding_size = coordinate_dims

        <a id="change">if &quotrgb&quot in observation_space.spaces</a><a id="change"> and &quotdepth&quot in observation_space.spaces</a>:
            self.visual_encoder = nn.Linear(4096, hidden_size)
        else:
            self.visual_encoder<a id="change"> = </a>nn.Linear(2048, hidden_size)

        self.state_encoder = RNNStateEncoder(
            (0 if self.is_blind else self.recurrent_hidden_state_size)</code></pre><h3>After Change</h3><pre><code class='java'>

        import torchvision.models as models
        self.visual_encoder = nn.Sequential(
            *<a id="change">list(</a>models.resnet50(pretrained=True).children()<a id="change">)</a>[:-1] + [nn.Flatten(), nn.Linear(2048, 512)]
        )

        self.state_encoder = RNNStateEncoder(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/2ba64c7e5439a65ae01094dbcda18ff0185f6bdc#diff-b1a9fa4b2ba0ef3bb9235843302240f1dd75b10b930af27b94262caa4703878cL175' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94402201</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: 2ba64c7e5439a65ae01094dbcda18ff0185f6bdc</div><div id='time'> Time: 2020-02-18</div><div id='author'> Author: klemenk@allenai.org</div><div id='file'> File Name: models/point_nav_models.py</div><div id='m_class'> M Class Name: PointNavActorCriticResNet50GRU</div><div id='n_method'> N Class Name: PointNavActorCriticResNet50GRU</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: Subscript</div><div id='n_parent_class'> N Parent Class: Subscript</div><div id='m_file'> M File Name: models/point_nav_models.py</div><div id='n_file'> N File Name: models/point_nav_models.py</div><div id='m_start'> M Start Line: 195</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 201</div><div id='n_end'> N End Line: 203</div><BR>