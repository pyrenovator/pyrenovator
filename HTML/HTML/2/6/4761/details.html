<html><h3>Pattern ID :4761
</h3><img src='16878177.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def forward(self, x, neighbor):
        fadj = self.feature_adjacency(x, neighbor)
        self.adj<a id="change"> += </a><a id="change">fadj.sum(</a>0<a id="change">)</a>
        x = self.feat1(x, fadj)
        x = self.acvt1(x)
        x = self.feat2(x, self.adj)
        x = self.acvt2(x)</code></pre><h3>After Change</h3><pre><code class='java'>

    def forward(self, x, neighbor):
        fadj = self.feature_adjacency(x, neighbor)
        adj<a id="change"> = </a>self.row_normalize(self.adj.sqrt())<a id="change"> + </a>torch.eye(<a id="change">x.size(-1</a><a id="change">)</a>,device=x.device)
        x = self.feat1(x, fadj)
        x = self.acvt1(x)
        x = self.feat2(x, fadj)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wang-chen/lgl/commit/8301c0340a820f10327286d4fbe47b2ee06aca13#diff-dcfeaa5ac3dffd54264034760914588d92fc7395c81eaa9274715840dc28100bL49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16878177</div><div id='project'> Project Name: wang-chen/lgl</div><div id='commit'> Commit Name: 8301c0340a820f10327286d4fbe47b2ee06aca13</div><div id='time'> Time: 2020-05-12</div><div id='author'> Author: jeffsan@gmx.com</div><div id='file'> File Name: models.py</div><div id='m_class'> M Class Name: Net</div><div id='n_method'> N Class Name: Net</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models.py</div><div id='n_file'> N File Name: models.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 invert noise for bright regions (bright regions are considered being on average &gt; 0.33 * 255)
        generated_noise = generated_noise.int()
        bright_regions = <a id="change">img.sum(</a>1<a id="change">)</a> &gt; brightness_threshold * img.shape[1]
        for ch in range(img.shape[1]):
            gnch = generated_noise[:, ch]
            gnch[bright_regions] = gnch[bright_regions] * -1
            generated_noise[:, ch]<a id="change"> = </a>gnch

        anom = (anom.int() + generated_noise).clamp(0, 255).byte()
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 invert noise if difference of malformed and original is less than threshold and inverted difference is higher
        diff = ((anom.int() + generated_noise).clamp(0, 255) - anom.int())
        diff = diff.reshape(<a id="change">anom.size(0</a><a id="change">)</a>, -1).sum(1).float().div(np.prod(anom.shape)).abs()
        diffi = ((anom.int() - generated_noise).clamp(0, 255) - anom.int())
        diffi = diffi.reshape(anom.size(0), -1).sum(1).float().div(np.prod(anom.shape)).abs()
        inv = [i for i, (d, di) in enumerate(zip(diff, diffi)) if d &lt; invert_threshold and di &gt; d]
        generated_noise[inv]<a id="change"> = -generated_noise[inv]</a>

        anom = (anom.int() + generated_noise).clamp(0, 255).byte()

        t = 1 if not hasattr(ds, &quotanomalous_label&quot) else ds.anomalous_label  &#47&#47 target transform has already been applied</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liznerski/fcdd/commit/d110aa8b141dc13f47156da913a6b4f9d64ddc74#diff-fb7d9650a48b1de740043527c5d5e928e02fb69b57694006eafa311d213e906cL133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16878176</div><div id='project'> Project Name: liznerski/fcdd</div><div id='commit'> Commit Name: d110aa8b141dc13f47156da913a6b4f9d64ddc74</div><div id='time'> Time: 2020-10-12</div><div id='author'> Author: p_liznersk13@cs.uni-kl.de</div><div id='file'> File Name: python/fcdd/datasets/online_superviser.py</div><div id='m_class'> M Class Name: OnlineSuperviser</div><div id='n_method'> N Class Name: OnlineSuperviser</div><div id='m_method'> M Method Name: __malformed_normal(8)</div><div id='n_method'> N Method Name: __malformed_normal(8)</div><div id='m_parent_class'> M Parent Class: ImgGTTargetTransform</div><div id='n_parent_class'> N Parent Class: ImgGTTargetTransform</div><div id='m_file'> M File Name: python/fcdd/datasets/online_superviser.py</div><div id='n_file'> N File Name: python/fcdd/datasets/online_superviser.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 146</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 151</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        p = self.projection(c_onehot)

        x<a id="change"> += </a><a id="change">torch.sum(</a>p * h<a id="change">, dim=1, keepdim=True)</a>

        return x

</code></pre><h3>After Change</h3><pre><code class='java'>

        in_prod = p * h

        x = x.view(<a id="change">x.size(0</a><a id="change">)</a>, -1)
        x<a id="change"> = </a>torch.mean(x, dim=-1)<a id="change"> + </a>torch.mean(in_prod, dim=-1)

        return x
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelbroughton/stargan-voice-conversion-2/commit/26484a2db5a00247535c7ec7c1f97c10e711e022#diff-fada037ad086638e65c7ae77e3d223963e9afaa26326aab0ea718f4013176e43L191' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16878197</div><div id='project'> Project Name: samuelbroughton/stargan-voice-conversion-2</div><div id='commit'> Commit Name: 26484a2db5a00247535c7ec7c1f97c10e711e022</div><div id='time'> Time: 2020-09-01</div><div id='author'> Author: broughtonjsam@gmail.com</div><div id='file'> File Name: model.py</div><div id='m_class'> M Class Name: Discriminator</div><div id='n_method'> N Class Name: Discriminator</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: model.py</div><div id='n_file'> N File Name: model.py</div><div id='m_start'> M Start Line: 193</div><div id='m_end'> M End Line: 208</div><div id='n_start'> N Start Line: 190</div><div id='n_end'> N End Line: 206</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 world_size * (2C + 1) -&gt; world_size * C, world_size * C, world_size * 1
        mean_all, invstd_all, count_all = torch.split(combined, num_channels, dim=1)

        size<a id="change"> = </a><a id="change">count_all.view(-1).long().sum()</a>
        if size == 1:
            raise ValueError(&quotExpected more than 1 value per channel when training, got input size {}&quot.format(size))

        &#47&#47 calculate global mean & invstd</code></pre><h3>After Change</h3><pre><code class='java'>
            input = input.contiguous()
        weight = weight.contiguous()

        size<a id="change"> = </a>int(input.numel()<a id="change"> // </a><a id="change">input.size(1</a><a id="change">)</a>)
        if size == 1 and world_size &lt; 2:
            raise ValueError(&quotExpected more than 1 value per channel when training, got input size {}&quot.format(size))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/d30f4d1dfd5237d89834363ce2cff9de4ee92811#diff-6083dbd5d169b44f41c2fd5e9638c88d246aff4cd86d2a839c72972ed198546bL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16878169</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: d30f4d1dfd5237d89834363ce2cff9de4ee92811</div><div id='time'> Time: 2021-03-03</div><div id='author'> Author: 24860335+xwang233@users.noreply.github.com</div><div id='file'> File Name: torch/nn/modules/_functions.py</div><div id='m_class'> M Class Name: SyncBatchNorm</div><div id='n_method'> N Class Name: SyncBatchNorm</div><div id='m_method'> M Method Name: forward(10)</div><div id='n_method'> N Method Name: forward(10)</div><div id='m_parent_class'> M Parent Class: Function</div><div id='n_parent_class'> N Parent Class: Function</div><div id='m_file'> M File Name: torch/nn/modules/_functions.py</div><div id='n_file'> N File Name: torch/nn/modules/_functions.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 51</div><BR>