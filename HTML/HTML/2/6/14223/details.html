<html><h3>Pattern ID :14223
</h3><img src='47255393.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            out_audio = torch.squeeze(out_audio, dim=1)
            for i, l in enumerate(seq_len):
                out_audio[i, l:] = 0
            librosa.output.write_wav(&quotmixed.wav&quot, train_mixed[0].cpu().data.numpy()[:<a id="change">seq_len[0]</a>.cpu().data.numpy()], 16000)
            librosa.output.write_wav(&quotclean.wav&quot, train_clean[0].cpu().data.numpy()[:seq_len[0].cpu().data.numpy()], 16000)
            librosa.output.write_wav(&quotout.wav&quot, out_audio[0].cpu().data.numpy()[:seq_len[0].cpu().data.numpy()], 16000)
            loss = wSDRLoss(train_mixed, train_clean, out_audio)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Learning rate scheduler
    scheduler = ExponentialLR(optimizer, 0.996)

    <a id="change">if not os.path.exists(&quotckpt&quot)</a>: &#47&#47 model save dir
        <a id="change">os.mkdir(</a>&quotckpt&quot<a id="change">)</a>

    for epoch in range(1, args.num_epochs+1):
        train_bar = tqdm(train_data_loader, ncols=60)
        loss_sum = 0.0</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/imlhf/se_dcunet/commit/aacd67a401d583a46ae3040bca5ba873d7227956#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L79' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47255393</div><div id='project'> Project Name: imlhf/se_dcunet</div><div id='commit'> Commit Name: aacd67a401d583a46ae3040bca5ba873d7227956</div><div id='time'> Time: 2020-02-21</div><div id='author'> Author: red_wind@foxmail.com</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 121</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    cap = cv2.VideoCapture(video)

    file_name = <a id="change">(os.path.basename(video).split(&quot.mp4&quot))[0]</a>
    try:
        if not os.path.exists(save_dir + file_name):
            os.makedirs(save_dir + file_name)
    except OSError:</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47     os.makedirs(save_dir + file_name)

        save_path = Path(save_dir).joinpath(file_name)
        <a id="change">if not save_path.exists()</a>:
            <a id="change">save_path.mkdir()</a>
    except OSError:
        print(&quotError: Creating directory of data&quot)

    &#47&#47 Setting the frame limit to 100</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liaorongfan/deeppersonality/commit/fc0e0a8ca8ebd7ce3ad206c1265dc8e586819def#diff-18b089b4bdf8ffa9f3b77901324ca9a0d333fad0082874610e7140a0d1cf04f3L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47255392</div><div id='project'> Project Name: liaorongfan/deeppersonality</div><div id='commit'> Commit Name: fc0e0a8ca8ebd7ce3ad206c1265dc8e586819def</div><div id='time'> Time: 2022-03-06</div><div id='author'> Author: 15670381505@163.com</div><div id='file'> File Name: dpcv/data/utils/video_to_image.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: frame_sample(2)</div><div id='n_method'> N Method Name: frame_sample(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dpcv/data/utils/video_to_image.py</div><div id='n_file'> N File Name: dpcv/data/utils/video_to_image.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def train_model(model, dataset_nums, device):

    &#47&#47 TODO train on all dataset nums in dataset_nums
    dataset_num = <a id="change">dataset_nums[0]</a>
    val_proportion = 0.25
    seed = 42

    model = model.to(device)</code></pre><h3>After Change</h3><pre><code class='java'>
    print(&quotFinished Training&quot)


    <a id="change">if not os.path.exists(_CURRENT + &quot/models&quot)</a>:
        <a id="change">os.mkdir(</a>_CURRENT + &quot/models&quot<a id="change">)</a>
    timestamp = datetime.now().strftime("%m-%d-%Y_%H-%M-%S")
    PATH = _CURRENT + f&quot/models/CNN_Transformer_{timestamp}.pth&quot
    torch.save(model.state_dict(), PATH)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xushenlz/parksim/commit/701696aefdeb77cedae8a71c4ed9802dfd1d7041#diff-eb8479c83c2a5e66383b5e5f8606c512312d69ae256ca7f2d95cc34388e23ac2L73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47255396</div><div id='project'> Project Name: xushenlz/parksim</div><div id='commit'> Commit Name: 701696aefdeb77cedae8a71c4ed9802dfd1d7041</div><div id='time'> Time: 2022-03-04</div><div id='author'> Author: mattlacayo@berkeley.edu</div><div id='file'> File Name: python/parksim/trajectory_predict/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_model(5)</div><div id='n_method'> N Method Name: train_model(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/parksim/trajectory_predict/train.py</div><div id='n_file'> N File Name: python/parksim/trajectory_predict/train.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 109</div><BR>