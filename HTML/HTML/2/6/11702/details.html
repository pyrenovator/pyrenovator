<html><h3>Pattern ID :11702
</h3><img src='39524139.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Weight vectors for y (normalized to 1)
        self.weights = [np.random.rand(dataset.shape[1]) for dataset in self.datasets]

        self.old_weights<a id="change"> = </a><a id="change">[np.random.rand(dataset.shape[1]) for dataset in self.datasets]</a>


        &#47&#47 initialize with first column
        self.targets = np.array([dataset[:, 0] / np.linalg.norm(dataset[:, 0]) if np.linalg.norm(</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 This loops through each view and udpates both the weights and targets where relevant
        for _ in range(self.max_iter):
            for i, view in enumerate(self.datasets):
                if <a id="change">self.auxiliary</a>:
                    self.target<a id="change"> = </a><a id="change">self.scores.mean(axis=0)</a>
                self.weights[i] = self.update_function(i)

            &#47&#47 tree doesn&quott have the lyuponov function
            if self.method[:4] != &quottree&quot:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/5b47ee36369d5a91aae369a39d2fdd39bc2bff1f#diff-a604b29d96a4ccd2740e077ab0439223a01f35873fe65b9f3b5ac936185b35d1L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39524139</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: 5b47ee36369d5a91aae369a39d2fdd39bc2bff1f</div><div id='time'> Time: 2020-10-31</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/alternating_least_squares.py</div><div id='m_class'> M Class Name: ALS_inner_loop</div><div id='n_method'> N Class Name: ALS_inner_loop</div><div id='m_method'> M Method Name: iterate(1)</div><div id='n_method'> N Method Name: iterate(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cca_zoo/alternating_least_squares.py</div><div id='n_file'> N File Name: cca_zoo/alternating_least_squares.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    w = (leading + norm_w.max(-1))[np.newaxis]

    modalities = np.split(signal, signal.shape[-1], -1)
    colormaps<a id="change"> = </a><a id="change">[plt.cm.get_cmap(name)(np.linspace(0, 1., int(256 / len(modalities)))) for name in CMAPS]</a>[
                :len(modalities)]
    colors = np.concatenate(colormaps, 0)
    mycolormap = mcolors.LinearSegmentedColormap.from_list(&quotmycolormap&quot, colors)</code></pre><h3>After Change</h3><pre><code class='java'>
              interpolation=&quotbilinear&quot)

    &#47&#47 impose modalities on the background in corresponding colormaps
    for <a id="change">i</a> in range(n_mod):
        y = modalities[i]  &#47&#47 modality signals
        c<a id="change"> = </a><a id="change">colormaps[i].mean(</a>0<a id="change">)</a>  &#47&#47 mean color for the corresponding colormap
        ax.plot(t, y.squeeze(-1), linewidth=1.5, c=c)

    &#47&#47 save a figure to the numpy array</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kolaszko/haptic_transformer/commit/b78cf689b18ea6854d17e5ed972b867313e8c086#diff-15bb97bc6ad29ac4b074bd849c915f9abdabee19ea470f25e7f650f7379943f6L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39524143</div><div id='project'> Project Name: kolaszko/haptic_transformer</div><div id='commit'> Commit Name: b78cf689b18ea6854d17e5ed972b867313e8c086</div><div id='time'> Time: 2021-12-02</div><div id='author'> Author: michalbednarek.e@gmail.com</div><div id='file'> File Name: utils/analysis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: impose(3)</div><div id='n_method'> N Method Name: impose(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/analysis.py</div><div id='n_file'> N File Name: utils/analysis.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    X, S, N = [torch.from_numpy(df.analysis(x.numpy())) for x in (x, s, n)]
    Xw = F.pad(X, (0, 0, ORDER - 1, 0)).unfold(1, ORDER, 1)
    Rss<a id="change">, Rnn = </a><a id="change">[compute_cov(X, ORDER) for X in (S, N)]</a>
    ifc = Rss[..., -1]
    Rnn = _tik_reg(Rnn, DLOAD, EPS)
    Rxx = Rss + Rnn  &#47&#47 Adding these is a lot better compared to estimating Rxx from X
    R_inv = torch.inverse(Rxx)</code></pre><h3>After Change</h3><pre><code class='java'>
        Rxx = Rss + Rnn
    else:
        Rxx = _tik_reg(Rxx, DLOAD, EPS)
    if <a id="change">avg_rxx</a>:
        diag = Rxx.diagonal(dim1=-2, dim2=-1)
        diag[..., :]<a id="change"> = </a><a id="change">diag.mean(</a>-1<a id="change">, keepdim=True)</a>
    R_inv = torch.inverse(Rxx)
    &#47&#47 Manual way
    w = torch.einsum("...nm,...m-&gt;...n", R_inv, ifc)
    Y = torch.einsum("...fn,...fn-&gt;...f", Xw, w)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rikorose/deepfilternet/commit/beca7997f8bb9f50e111b3b9370b1f960f9ec158#diff-4bab3489e17bfd00c42ff7865089785d61b1bc15c74ed8c88379bdbc98c8f5daL385' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39524142</div><div id='project'> Project Name: rikorose/deepfilternet</div><div id='commit'> Commit Name: beca7997f8bb9f50e111b3b9370b1f960f9ec158</div><div id='time'> Time: 2022-11-03</div><div id='author'> Author: Rikorose@users.noreply.github.com</div><div id='file'> File Name: DeepFilterNet/df/multiframe.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_ideal_wf(2)</div><div id='n_method'> N Method Name: compute_ideal_wf(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: DeepFilterNet/df/multiframe.py</div><div id='n_file'> N File Name: DeepFilterNet/df/multiframe.py</div><div id='m_start'> M Start Line: 393</div><div id='m_end'> M End Line: 418</div><div id='n_start'> N Start Line: 385</div><div id='n_end'> N End Line: 432</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    for i in range(len(areaNames)):
        area_ps = ps[..., i, 0]
        figure_title = iou_type + "-" + class_name + "-" + areaNames[i]
        aps<a id="change"> = </a><a id="change">[ps_.mean() for ps_ in area_ps]</a>
        ps_curve = [ps_.mean(axis=1) if ps_.ndim &gt; 1 else ps_ for ps_ in area_ps]
        ps_curve.insert(0, np.zeros(ps_curve[0].shape))
        fig = plt.figure()
        ax = plt.subplot(111)</code></pre><h3>After Change</h3><pre><code class='java'>
        figure_title = iou_type + "-" + class_name + "-" + areaNames[i]
        aps = [ps_[ps_ &gt; -1].mean() for ps_ in area_ps]
        ps_curve = []
        for <a id="change">ps_</a> in area_ps:
            if ps_.ndim &gt; 1:
                ps_mean = np.zeros((ps_.shape[0],))
                for ind, ps_threshold in enumerate(ps_):
                    ps_mean[ind]<a id="change"> = </a><a id="change">ps_threshold[ps_threshold &gt; -1].mean()</a>
                ps_curve.append(ps_mean)
            else:
                ps_curve.append(ps_)
        ps_curve.insert(0, np.zeros(ps_curve[0].shape))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/obss/sahi/commit/c358cc200a67ed985790bc19deccec5fe1c4e75d#diff-d11dc70f88d3abdb3482cd1519b9fd9561abb05aefa1dfe38df27b06c3136786L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 39524144</div><div id='project'> Project Name: obss/sahi</div><div id='commit'> Commit Name: c358cc200a67ed985790bc19deccec5fe1c4e75d</div><div id='time'> Time: 2022-01-08</div><div id='author'> Author: 34196005+fcakyon@users.noreply.github.com</div><div id='file'> File Name: sahi/scripts/coco_error_analysis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _makeplot(5)</div><div id='n_method'> N Method Name: _makeplot(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sahi/scripts/coco_error_analysis.py</div><div id='n_file'> N File Name: sahi/scripts/coco_error_analysis.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 43</div><BR>