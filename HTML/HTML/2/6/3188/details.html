<html><h3>Pattern ID :3188
</h3><img src='12145401.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        crop_info = []
        num_crops = 0
        for j, (x,y,w,h) in enumerate(new_faces):
            <a id="change">if </a>self.model_type &lt; 2:
                crop_x1 = x - int(w * 0.2)
                crop_y1 = y - int(h * 0.25)
                crop_x2 = x + w + int(w * 0.2)</code></pre><h3>After Change</h3><pre><code class='java'>
            if crop_x2 - crop_x1 &lt; 4 or crop_y2 - crop_y1 &lt; 4:
                continue

            start_pp<a id="change"> = time</a><a id="change">.perf_counter()</a>
            crop = self.preprocess(im, (crop_x1, crop_y1, crop_x2, crop_y2))
            duration_pp += 1000 * (<a id="change">time.perf_counter() - </a>start_pp)
            crops.append(crop)
            crop_info.append((crop_x1, crop_y1, scale_x, scale_y))
            num_crops += 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/emilianavt/openseeface/commit/dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5#diff-0fd2935c2a1fe561051ff2ef9dda8f4c52cc652e8160029708680c2e61fa2cf0L397' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 12145401</div><div id='project'> Project Name: emilianavt/openseeface</div><div id='commit'> Commit Name: dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5</div><div id='time'> Time: 2020-01-26</div><div id='author'> Author: 38952746+emilianavt@users.noreply.github.com</div><div id='file'> File Name: tracker.py</div><div id='m_class'> M Class Name: Tracker</div><div id='n_method'> N Class Name: Tracker</div><div id='m_method'> M Method Name: predict(3)</div><div id='n_method'> N Method Name: predict(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tracker.py</div><div id='n_file'> N File Name: tracker.py</div><div id='m_start'> M Start Line: 409</div><div id='m_end'> M End Line: 515</div><div id='n_start'> N Start Line: 397</div><div id='n_end'> N End Line: 542</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    GlobalCounters.global_ops = 0
    GlobalCounters.global_mem = 0
    <a id="change">if </a>DEBUG &gt;= 4: print("benchmark start")
    st = time.monotonic()
    ret = f1(*args)
    if isinstance(ret, Tensor):</code></pre><h3>After Change</h3><pre><code class='java'>

    GlobalCounters.global_ops = 0
    GlobalCounters.global_mem = 0
    st<a id="change"> = </a><a id="change">time.perf_counter()</a>
    ret = f1(*args)
    if isinstance(ret, Tensor): Device[ret.device].synchronize()
    else: sync()
    et = (<a id="change">time.perf_counter()</a><a id="change"> - </a>st) * 1000
    if i &gt;= 1: ets.append(et)   &#47&#47 not the first run / one used for OPTLOCAL
    if GlobalCounters.global_ops:
      save_ops, save_mem = GlobalCounters.global_ops, GlobalCounters.global_mem</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/20894991edd4528979231a012f02336873e85dd6#diff-380ecce21058b60aad2fb89024c8bf1aa76bfc253b3862cb7575b92dfce5e853L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 12145369</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: 20894991edd4528979231a012f02336873e85dd6</div><div id='time'> Time: 2023-03-28</div><div id='author'> Author: 72895+geohot@users.noreply.github.com</div><div id='file'> File Name: test/test_speed_v_torch.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: helper_test_speed(1)</div><div id='n_method'> N Method Name: helper_test_speed(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_speed_v_torch.py</div><div id='n_file'> N File Name: test/test_speed_v_torch.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 71</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            object_dict = {}
            object_dict.update({"frame_number": frame_number})
            for key, value in object_item.items():
                <a id="change">if </a>isinstance(value, (list, tuple)):
                    for i, item in enumerate(value):
                        object_dict.update({str(key) + "_" + str(i): item})
                else:</code></pre><h3>After Change</h3><pre><code class='java'>
    @staticmethod
    def log_objects(object_list, frame_number, file_path):
        if len(object_list) != 0:
            start<a id="change"> = </a><a id="change">time.perf_counter()</a>
            object_dict = list(map(lambda x: prepare_object(x, frame_number), object_list))

            if not os.path.exists(file_path):
                with open(file_path, "w", newline="") as csvfile:
                    field_names = list(object_dict[0].keys())
                    writer = csv.DictWriter(csvfile, fieldnames=field_names)
                    writer.writeheader()

            with open(file_path, "a", newline="") as csvfile:
                field_names = list(object_dict[0].keys())
                writer = csv.DictWriter(csvfile, fieldnames=field_names)
                writer.writerows(object_dict)
            print("logging objects took ", <a id="change">time.perf_counter()</a><a id="change"> - </a>start, "  sec")

    def log_distances(self, distances, frame_number, file_path):
        violating_objects = self.extract_violating_objects(distances)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralet/smart-social-distancing/commit/d8886c3554a6d7caaabfed394a4bd1f999393fc3#diff-86bafb917077c7ee560882a998e3606b0e91a0f2546355536a11366e2f3e6187L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 12145371</div><div id='project'> Project Name: neuralet/smart-social-distancing</div><div id='commit'> Commit Name: d8886c3554a6d7caaabfed394a4bd1f999393fc3</div><div id='time'> Time: 2020-04-13</div><div id='author'> Author: alpha.carinae29@gmail.com</div><div id='file'> File Name: libs/loggers/csv_logger.py</div><div id='m_class'> M Class Name: Logger</div><div id='n_method'> N Class Name: Logger</div><div id='m_method'> M Method Name: log_objects(3)</div><div id='n_method'> N Method Name: log_objects(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: libs/loggers/csv_logger.py</div><div id='n_file'> N File Name: libs/loggers/csv_logger.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 59</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        crop_info = []
        num_crops = 0
        for j, (x,y,w,h) in enumerate(new_faces):
            <a id="change">if </a>self.model_type &lt; 2:
                crop_x1 = x - int(w * 0.2)
                crop_y1 = y - int(h * 0.25)
                crop_x2 = x + w + int(w * 0.2)</code></pre><h3>After Change</h3><pre><code class='java'>
            if crop_x2 - crop_x1 &lt; 4 or crop_y2 - crop_y1 &lt; 4:
                continue

            start_pp<a id="change"> = </a><a id="change">time.perf_counter()</a>
            crop = self.preprocess(im, (crop_x1, crop_y1, crop_x2, crop_y2))
            duration_pp += 1000<a id="change"> * </a>(<a id="change">time.perf_counter()</a> - start_pp)
            crops.append(crop)
            crop_info.append((crop_x1, crop_y1, scale_x, scale_y))
            num_crops += 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/emilianavt/openseeface/commit/dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5#diff-0fd2935c2a1fe561051ff2ef9dda8f4c52cc652e8160029708680c2e61fa2cf0L404' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 12145372</div><div id='project'> Project Name: emilianavt/openseeface</div><div id='commit'> Commit Name: dda7dd05198a135fc1e5f6815e51c8f2d50ec8f5</div><div id='time'> Time: 2020-01-26</div><div id='author'> Author: 38952746+emilianavt@users.noreply.github.com</div><div id='file'> File Name: tracker.py</div><div id='m_class'> M Class Name: Tracker</div><div id='n_method'> N Class Name: Tracker</div><div id='m_method'> M Method Name: predict(3)</div><div id='n_method'> N Method Name: predict(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tracker.py</div><div id='n_file'> N File Name: tracker.py</div><div id='m_start'> M Start Line: 409</div><div id='m_end'> M End Line: 515</div><div id='n_start'> N Start Line: 397</div><div id='n_end'> N End Line: 542</div><BR>