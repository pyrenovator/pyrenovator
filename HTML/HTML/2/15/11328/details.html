<html><h3>Pattern ID :11328
</h3><img src='38482072.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    :return: Dictionary, where the keys are image indices within
        a batch and the values are the mean score per detection
    
    <a id="change">mean_scores_per_image</a> = <a id="change">{}</a>
    for score_idx, <a id="change">score</a> in <a id="change">enumerate(</a>scores<a id="change">)</a>:
        _check_valid_score(score)
        <a id="change">mean_scores_per_image[str(score_idx)]</a> = (
            0.0<a id="change"> if </a><a id="change">score == [None] else </a>numpy.mean(score)
        )

    return mean_scores_per_image</code></pre><h3>After Change</h3><pre><code class='java'>
    :return: BatchResult object, that contains the mean scores
        per detection in the batch
    
    <a id="change">batch_result</a> = <a id="change">BatchResult()</a>
    for <a id="change">score</a> in scores:
        _check_valid_score(score)
        <a id="change">batch_result.append(</a>0.0<a id="change"> if </a><a id="change">score == [None] else </a>numpy.mean(score)<a id="change">)</a>

    return batch_result

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 11</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/9b6170723c84e3c97088a67c73b0a2ad7ac9ad12#diff-f20f3f17678dab4657700405424e600f8079dae462f899eca39e037e74f9a061L189' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38482072</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: 9b6170723c84e3c97088a67c73b0a2ad7ac9ad12</div><div id='time'> Time: 2023-01-24</div><div id='author'> Author: 97082108+dbogunowicz@users.noreply.github.com</div><div id='file'> File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mean_score_per_detection(1)</div><div id='n_method'> N Method Name: mean_score_per_detection(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='n_file'> N File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_start'> M Start Line: 197</div><div id='m_end'> M End Line: 202</div><div id='n_start'> N Start Line: 189</div><div id='n_end'> N End Line: 192</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
             }
    

    <a id="change">number_objects_per_image</a> = <a id="change">{}</a>
    for detection_idx, <a id="change">detection</a> in <a id="change">enumerate(</a>detected_classes<a id="change">)</a>:
        _check_valid_detection(detection)
        <a id="change">number_objects_per_image[str(detection_idx)]</a> = (
            0<a id="change"> if </a><a id="change">detection == [None] else </a>len(detection)
        )
    return number_objects_per_image
</code></pre><h3>After Change</h3><pre><code class='java'>
        detections per sample in the batch
    

    <a id="change">batch_result</a> = <a id="change">BatchResult()</a>
    for <a id="change">detection</a> in detected_classes:
        _check_valid_detection(detection)
        <a id="change">batch_result.append(</a>0<a id="change"> if </a><a id="change">detection == [None] else </a>len(detection)<a id="change">)</a>
    return batch_result


def mean_score_per_detection(scores: List[List[Union[None, float]]]) -&gt; BatchResult:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/9b6170723c84e3c97088a67c73b0a2ad7ac9ad12#diff-f20f3f17678dab4657700405424e600f8079dae462f899eca39e037e74f9a061L149' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38482067</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: 9b6170723c84e3c97088a67c73b0a2ad7ac9ad12</div><div id='time'> Time: 2023-01-24</div><div id='author'> Author: 97082108+dbogunowicz@users.noreply.github.com</div><div id='file'> File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: number_detected_objects(1)</div><div id='n_method'> N Method Name: number_detected_objects(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='n_file'> N File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_start'> M Start Line: 172</div><div id='m_end'> M End Line: 177</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 171</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    :return: Dictionary, where the keys are image indices within
        a batch and the values are the standard deviation of scores per detection
    
    <a id="change">std_scores_per_image</a> = <a id="change">{}</a>
    for score_idx, <a id="change">score</a> in <a id="change">enumerate(</a>scores<a id="change">)</a>:
        _check_valid_score(score)
        <a id="change">std_scores_per_image[str(score_idx)]</a> = (
            0.0<a id="change"> if </a><a id="change">score == [None] else </a>numpy.std(score)
        )

    return std_scores_per_image</code></pre><h3>After Change</h3><pre><code class='java'>
    :return: BatchResult object, that contains the standard
        deviation of scores per detection in the batch
    
    <a id="change">batch_result</a> = <a id="change">BatchResult()</a>
    for <a id="change">score</a> in scores:
        _check_valid_score(score)
        <a id="change">batch_result.append(</a>0.0<a id="change"> if </a><a id="change">score == [None] else </a>numpy.std(score)<a id="change">)</a>

    return batch_result

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/deepsparse/commit/9b6170723c84e3c97088a67c73b0a2ad7ac9ad12#diff-f20f3f17678dab4657700405424e600f8079dae462f899eca39e037e74f9a061L207' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38482070</div><div id='project'> Project Name: neuralmagic/deepsparse</div><div id='commit'> Commit Name: 9b6170723c84e3c97088a67c73b0a2ad7ac9ad12</div><div id='time'> Time: 2023-01-24</div><div id='author'> Author: 97082108+dbogunowicz@users.noreply.github.com</div><div id='file'> File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: std_score_per_detection(1)</div><div id='n_method'> N Method Name: std_score_per_detection(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='n_file'> N File Name: src/deepsparse/loggers/metric_functions/computer_vision/built_ins.py</div><div id='m_start'> M Start Line: 221</div><div id='m_end'> M End Line: 226</div><div id='n_start'> N Start Line: 211</div><div id='n_end'> N End Line: 214</div><BR>