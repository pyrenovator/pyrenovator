<html><h3>Pattern ID :37386
</h3><img src='107652714.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    depth = -1
    alpha = 1.
    ops = augmix_ops(magnitude=severity, hparams=hparams)
    <a id="change">return </a>AugMixAugment(ops, alpha, width, depth)
</code></pre><h3>After Change</h3><pre><code class='java'>
    config = config_str.split(&quot-&quot)
    assert config[0] == &quotaugmix&quot
    config = config[1:]
    <a id="change">for </a>c in config<a id="change">:
        </a>cs = re.split(r&quot(\d.*)&quot, c)
        <a id="change">if </a><a id="change">len(cs) &lt; 2</a>:
            <a id="change">continue</a>
        key<a id="change">, val = </a>cs[:2]
        if key == &quotmstd&quot:
            &#47&#47 noise param injected via hparams for now
            hparams.setdefault(&quotmagnitude_std&quot, <a id="change">float(</a>val<a id="change">)</a>)
        elif key == &quotm&quot:
            magnitude<a id="change"> = </a>int(val)
        elif key == &quotw&quot:
            width = int(val)
        elif <a id="change"></a>key == &quotd&quot:
            depth<a id="change"> = </a>int(val)
        elif key == &quota&quot:
            alpha<a id="change"> = </a>float(val)
        else:
            assert False, &quotUnknown AugMix config section&quot
    ops = augmix_ops(magnitude=magnitude, hparams=hparams)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 13</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/feng-lab/pytorch-image-models/commit/3afc2a4dc0db55919a897f8e2af8aeb315b10703#diff-23a97a9d4cbcc2c12c2847538d4804c17dad7a3ae867d989609f4be850f9ffadL711' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107652714</div><div id='project'> Project Name: feng-lab/pytorch-image-models</div><div id='commit'> Commit Name: 3afc2a4dc0db55919a897f8e2af8aeb315b10703</div><div id='time'> Time: 2019-12-20</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/data/auto_augment.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: augment_and_mix_transform(2)</div><div id='n_method'> N Method Name: augment_and_mix_transform(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/data/auto_augment.py</div><div id='n_file'> N File Name: timm/data/auto_augment.py</div><div id='m_start'> M Start Line: 711</div><div id='m_end'> M End Line: 715</div><div id='n_start'> N Start Line: 771</div><div id='n_end'> N End Line: 793</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    depth = -1
    alpha = 1.
    ops = augmix_ops(magnitude=severity, hparams=hparams)
    <a id="change">return </a>AugMixAugment(ops, alpha, width, depth)
</code></pre><h3>After Change</h3><pre><code class='java'>
    config = config_str.split(&quot-&quot)
    assert config[0] == &quotaugmix&quot
    config = config[1:]
    <a id="change">for </a><a id="change">c</a> in config<a id="change">:
        </a>cs = re.split(r&quot(\d.*)&quot, c)
        <a id="change">if </a><a id="change">len(cs) &lt; 2</a>:
            <a id="change">continue</a>
        key<a id="change">, val = </a>cs[:2]
        if key == &quotmstd&quot:
            &#47&#47 noise param injected via hparams for now
            hparams.setdefault(&quotmagnitude_std&quot, <a id="change">float(</a>val<a id="change">)</a>)
        elif key == &quotm&quot:
            magnitude<a id="change"> = </a>int(val)
        elif <a id="change"></a>key == &quotw&quot:
            width<a id="change"> = </a>int(val)
        elif key == &quotd&quot:
            depth<a id="change"> = </a>int(val)
        elif key == &quota&quot:
            alpha = float(val)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alvinwan/nbdt-pytorch-image-models/commit/3afc2a4dc0db55919a897f8e2af8aeb315b10703#diff-23a97a9d4cbcc2c12c2847538d4804c17dad7a3ae867d989609f4be850f9ffadL697' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107653226</div><div id='project'> Project Name: alvinwan/nbdt-pytorch-image-models</div><div id='commit'> Commit Name: 3afc2a4dc0db55919a897f8e2af8aeb315b10703</div><div id='time'> Time: 2019-12-20</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/data/auto_augment.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: augment_and_mix_transform(2)</div><div id='n_method'> N Method Name: augment_and_mix_transform(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/data/auto_augment.py</div><div id='n_file'> N File Name: timm/data/auto_augment.py</div><div id='m_start'> M Start Line: 711</div><div id='m_end'> M End Line: 715</div><div id='n_start'> N Start Line: 771</div><div id='n_end'> N End Line: 793</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                loss = F.cross_entropy(self.model(_X), t, **kwargs)
                return loss if target_idx else -loss
            loss_fn = _loss_fn
        <a id="change">return </a>self.optimize(_input, loss_fn=loss_fn, target=target, **kwargs)

    def early_stop_check(self, X, target, loss_fn=None, **kwargs):
        if not self.stop_threshold:</code></pre><h3>After Change</h3><pre><code class='java'>
        correct = 0
        total = 0
        total_iter = 0
        <a id="change">for </a>i, <a id="change">data</a> in enumerate(self.dataset.loader[&quottest&quot])<a id="change">:
            </a>if total &gt;= 100:
                break
            _input, _label = self.model.remove_misclassify(data)
            <a id="change">if </a><a id="change">len(_label) == 0</a>:
                <a id="change">continue</a>
            adv_input<a id="change">, _iter = </a>self.craft_example(_input)

            total<a id="change"> += </a>1
            <a id="change">if </a>_iter:
                correct<a id="change"> += </a>1
                total_iter<a id="change"> += </a>_iter
            print(&quot{} / {}&quot.format(correct, total))
            print(&quotcurrent iter: &quot, _iter)
            print(&quotsucc rate: &quot, <a id="change">float(</a>correct<a id="change">)</a> / total)
            if correct &gt; 0:
                print(&quotavg  iter: &quot, float(total_iter) / correct)
            print(&quot-------------------------------------------------&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/5afae72db24844f2ecd29293bee298401d857ba4#diff-9b1c8cf135ff67c52b23b4930f0b097e77ada581a3654403b29951686d9cbd08L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107653232</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 5afae72db24844f2ecd29293bee298401d857ba4</div><div id='time'> Time: 2020-07-01</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/attack/adv/pgd.py</div><div id='m_class'> M Class Name: PGD</div><div id='n_method'> N Class Name: PGD</div><div id='m_method'> M Method Name: attack(1)</div><div id='n_method'> N Method Name: attack(5)</div><div id='m_parent_class'> M Parent Class: PGD_Optimizer,Attack</div><div id='n_parent_class'> N Parent Class: PGD_Optimizer,Attack</div><div id='m_file'> M File Name: trojanzoo/attack/adv/pgd.py</div><div id='n_file'> N File Name: trojanzoo/attack/adv/pgd.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 53</div><BR>