<html><h3>Pattern ID :18059
</h3><img src='59187847.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    <a id="change">train.to_csv(</a>(<a id="change">Path(</a>args.prepared_data<a id="change">)</a><a id="change"> / "train.csv"</a>)<a id="change">)</a>
    val.to_csv((Path(args.prepared_data) / "val.csv"))
    test.to_csv((Path(args.prepared_data) / "test.csv"))

</code></pre><h3>After Change</h3><pre><code class='java'>
    print(arr)

    data = pd.read_csv((Path(args.raw_data) / &quottaxi-data.csv&quot))
    data<a id="change"> = data[NUMERIC_COLS + CAT_NOM_COLS + CAT_ORD_COLS + [TARGET_COL]]</a>

    &#47&#47 ------------- Split Data ------------- &#47&#47
    &#47&#47 -------------------------------------- &#47&#47

    &#47&#47 Split data into train, val and test datasets

    random_data = np.random.rand(len(data))

    msk_train = random_data &lt; 0.7
    msk_val = (random_data &gt;= 0.7) & (random_data &lt; 0.85)
    msk_test = random_data &gt;= 0.85

    train = data[msk_train]
    val = data[msk_val]
    test = data[msk_test]

    mlflow.log_metric(&quottrain size&quot, train.shape[0])
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    train.to_parquet((Path(args.train_data) / "train.parquet"))
    val.to_parquet((Path(args.val_data) / "eval.parquet"))
    <a id="change">test.to_parquet(</a>(<a id="change">Path(</a>args.test_data<a id="change">)</a><a id="change"> / "test.parquet"</a>)<a id="change">)</a>


if __name__ == "__main__":
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 13</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/azure/mlops-project-template/commit/689dc1372eef03c5ad6b15ea738271619ca29186#diff-26b13b82e78fd10b83c2b1a7ba31ad2c553153afe74612f22ff2997bcb8dd866L51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59187847</div><div id='project'> Project Name: azure/mlops-project-template</div><div id='commit'> Commit Name: 689dc1372eef03c5ad6b15ea738271619ca29186</div><div id='time'> Time: 2022-07-04</div><div id='author'> Author: maggiemhanna@gmail.com</div><div id='file'> File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='n_file'> N File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    <a id="change">train.to_csv(</a>(<a id="change">Path(</a>args.prepared_data<a id="change">)</a><a id="change"> / "train.csv"</a>)<a id="change">)</a>
    val.to_csv((Path(args.prepared_data) / "val.csv"))
    test.to_csv((Path(args.prepared_data) / "test.csv"))

</code></pre><h3>After Change</h3><pre><code class='java'>
    arr = os.listdir(args.raw_data)
    print(arr)

    <a id="change">data</a> = pd.read_csv((Path(args.raw_data) / &quottaxi-data.csv&quot))
    data<a id="change"> = </a><a id="change">data[NUMERIC_COLS + CAT_NOM_COLS + CAT_ORD_COLS + [TARGET_COL]]</a>

    &#47&#47 ------------- Split Data ------------- &#47&#47
    &#47&#47 -------------------------------------- &#47&#47

    &#47&#47 Split data into train, val and test datasets

    random_data = np.random.rand(len(data))

    msk_train = random_data &lt; 0.7
    msk_val = (random_data &gt;= 0.7) & (random_data &lt; 0.85)
    msk_test = random_data &gt;= 0.85

    train = data[msk_train]
    val = data[msk_val]
    test = data[msk_test]

    mlflow.log_metric(&quottrain size&quot, train.shape[0])
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    train.to_parquet((Path(args.train_data) / "train.parquet"))
    val.to_parquet((Path(args.val_data) / "eval.parquet"))
    <a id="change">test.to_parquet(</a>(<a id="change">Path(</a>args.test_data<a id="change">)</a><a id="change"> / "test.parquet"</a>)<a id="change">)</a>


if __name__ == "__main__":
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/azure/mlops-project-template/commit/689dc1372eef03c5ad6b15ea738271619ca29186#diff-26b13b82e78fd10b83c2b1a7ba31ad2c553153afe74612f22ff2997bcb8dd866L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59187846</div><div id='project'> Project Name: azure/mlops-project-template</div><div id='commit'> Commit Name: 689dc1372eef03c5ad6b15ea738271619ca29186</div><div id='time'> Time: 2022-07-04</div><div id='author'> Author: maggiemhanna@gmail.com</div><div id='file'> File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='n_file'> N File Name: classical/aml-cli-v2/data-science/src/prep/prep.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    train.to_csv((Path(args.prepared_data) / "train.csv"))
    val.to_csv((Path(args.prepared_data) / "val.csv"))
    <a id="change">test.to_csv(</a>(<a id="change">Path(</a>args.prepared_data<a id="change">)</a><a id="change"> / "test.csv"</a>)<a id="change">)</a>

    if (args.enable_monitoring.lower == &quottrue&quot or args.enable_monitoring == &quot1&quot or args.enable_monitoring.lower == &quotyes&quot):
        log_training_data(data, args.table_name)
</code></pre><h3>After Change</h3><pre><code class='java'>
    arr = os.listdir(args.raw_data)
    print(arr)

    <a id="change">data</a> = pd.read_csv((Path(args.raw_data) / &quottaxi-data.csv&quot))
    data<a id="change"> = </a><a id="change">data[NUMERIC_COLS + CAT_NOM_COLS + CAT_ORD_COLS + [TARGET_COL]]</a>

    &#47&#47 ------------- Split Data ------------- &#47&#47
    &#47&#47 -------------------------------------- &#47&#47

    &#47&#47 Split data into train, val and test datasets

    random_data = np.random.rand(len(data))

    msk_train = random_data &lt; 0.7
    msk_val = (random_data &gt;= 0.7) & (random_data &lt; 0.85)
    msk_test = random_data &gt;= 0.85

    train = data[msk_train]
    val = data[msk_val]
    test = data[msk_test]

    mlflow.log_metric(&quottrain size&quot, train.shape[0])
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    <a id="change">train.to_parquet(</a>(<a id="change">Path(</a>args.train_data<a id="change">)</a><a id="change"> / "train.parquet"</a>)<a id="change">)</a>
    val.to_parquet((Path(args.val_data) / "val.parquet"))
    test.to_parquet((Path(args.test_data) / "test.parquet"))

    if (args.enable_monitoring.lower == &quottrue&quot or args.enable_monitoring == &quot1&quot or args.enable_monitoring.lower == &quotyes&quot):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/azure/mlops-project-template/commit/8bd6f11bb9b974942c487be9f250a4cc855fe227#diff-cfe014db13d45f03b527a9f402af09ed405b7f62e6659a94493932a913345c37L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59187845</div><div id='project'> Project Name: azure/mlops-project-template</div><div id='commit'> Commit Name: 8bd6f11bb9b974942c487be9f250a4cc855fe227</div><div id='time'> Time: 2022-11-14</div><div id='author'> Author: 8880364+cindyweng@users.noreply.github.com</div><div id='file'> File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='n_file'> N File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    train.to_csv((Path(args.prepared_data) / "train.csv"))
    val.to_csv((Path(args.prepared_data) / "val.csv"))
    <a id="change">test.to_csv(</a>(<a id="change">Path(</a>args.prepared_data<a id="change">)</a><a id="change"> / "test.csv"</a>)<a id="change">)</a>

    if (args.enable_monitoring.lower == &quottrue&quot or args.enable_monitoring == &quot1&quot or args.enable_monitoring.lower == &quotyes&quot):
        log_training_data(data, args.table_name)
</code></pre><h3>After Change</h3><pre><code class='java'>
    arr = os.listdir(args.raw_data)
    print(arr)

    <a id="change">data</a> = pd.read_csv((Path(args.raw_data) / &quottaxi-data.csv&quot))
    data<a id="change"> = </a><a id="change">data[NUMERIC_COLS + CAT_NOM_COLS + CAT_ORD_COLS + [TARGET_COL]]</a>

    &#47&#47 ------------- Split Data ------------- &#47&#47
    &#47&#47 -------------------------------------- &#47&#47

    &#47&#47 Split data into train, val and test datasets

    random_data = np.random.rand(len(data))

    msk_train = random_data &lt; 0.7
    msk_val = (random_data &gt;= 0.7) & (random_data &lt; 0.85)
    msk_test = random_data &gt;= 0.85

    train = data[msk_train]
    val = data[msk_val]
    test = data[msk_test]

    mlflow.log_metric(&quottrain size&quot, train.shape[0])
    mlflow.log_metric(&quotval size&quot, val.shape[0])
    mlflow.log_metric(&quottest size&quot, test.shape[0])

    <a id="change">train.to_parquet(</a>(<a id="change">Path(</a>args.train_data<a id="change">)</a><a id="change"> / "train.parquet"</a>)<a id="change">)</a>
    val.to_parquet((Path(args.val_data) / "val.parquet"))
    test.to_parquet((Path(args.test_data) / "test.parquet"))

    if (args.enable_monitoring.lower == &quottrue&quot or args.enable_monitoring == &quot1&quot or args.enable_monitoring.lower == &quotyes&quot):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/azure/mlops-project-template/commit/e4910d82941b11b64f2c8efe79516dd6d22f0884#diff-cfe014db13d45f03b527a9f402af09ed405b7f62e6659a94493932a913345c37L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59187849</div><div id='project'> Project Name: azure/mlops-project-template</div><div id='commit'> Commit Name: e4910d82941b11b64f2c8efe79516dd6d22f0884</div><div id='time'> Time: 2022-11-09</div><div id='author'> Author: 8880364+cindyweng@users.noreply.github.com</div><div id='file'> File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='n_file'> N File Name: classical/aml-cli-v2/data-science/src/prep.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 102</div><BR>