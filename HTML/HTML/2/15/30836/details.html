<html><h3>Pattern ID :30836
</h3><img src='90791275.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">for client_idx</a> in <a id="change">range(</a>client_number<a id="change">):
        </a>dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local
    return (
        train_data_num,
        test_data_num,</code></pre><h3>After Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">if args.process_id == 0</a>:  &#47&#47 server
        <a id="change">pass</a>
    else:
        client_idx<a id="change"> = </a><a id="change">int(</a>args.process_id<a id="change">)</a><a id="change"> - 1</a>
        dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local

    return (
        train_data_num,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 12</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/ab508f657f7f318a161d5024254a07af2b458500#diff-c7cce2c6a032aa05864b536e0263677d330a575d223c30ffb0f222b86daece11L313' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90791275</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: ab508f657f7f318a161d5024254a07af2b458500</div><div id='time'> Time: 2022-07-19</div><div id='author'> Author: bj.yan.pa@qq.com</div><div id='file'> File Name: python/app/fedcv/image_classification/data/cifar10/data_loader.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_partition_data_cifar10(8)</div><div id='n_method'> N Method Name: load_partition_data_cifar10(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/app/fedcv/image_classification/data/cifar10/data_loader.py</div><div id='n_file'> N File Name: python/app/fedcv/image_classification/data/cifar10/data_loader.py</div><div id='m_start'> M Start Line: 332</div><div id='m_end'> M End Line: 365</div><div id='n_start'> N Start Line: 313</div><div id='n_end'> N End Line: 371</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">for client_idx</a> in <a id="change">range(</a>client_number<a id="change">):
        </a>dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local
    return (
        train_data_num,
        test_data_num,</code></pre><h3>After Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">if args.process_id == 0</a>:
        <a id="change">pass</a>
    else:
        client_idx<a id="change"> = </a><a id="change">int(</a>args.process_id<a id="change">)</a><a id="change"> - 1</a>
        dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local
    return (
        train_data_num,
        test_data_num,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/ab508f657f7f318a161d5024254a07af2b458500#diff-3dcec579111757cb2aabb1f09dc13c172ce78833b83a62a224805f6d37f2a8e6L312' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90791293</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: ab508f657f7f318a161d5024254a07af2b458500</div><div id='time'> Time: 2022-07-19</div><div id='author'> Author: bj.yan.pa@qq.com</div><div id='file'> File Name: python/app/fedcv/image_classification/data/cifar100/data_loader.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_partition_data_cifar100(7)</div><div id='n_method'> N Method Name: load_partition_data_cifar100(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/app/fedcv/image_classification/data/cifar100/data_loader.py</div><div id='n_file'> N File Name: python/app/fedcv/image_classification/data/cifar100/data_loader.py</div><div id='m_start'> M Start Line: 326</div><div id='m_end'> M End Line: 359</div><div id='n_start'> N Start Line: 313</div><div id='n_end'> N End Line: 372</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    test_data_num = test_dataloader_global.dataset.data_size

    <a id="change">for i</a> in <a id="change">range(</a>client_number<a id="change">):
        &#47&#47 if (i + 1) != args.rank:
        &#47&#47     train_dataset_dict[i] = None
        &#47&#47     train_data_num_dict[i] = None
        &#47&#47     train_data_loader_dict[i] = None
        &#47&#47     test_data_loader_dict[i] = None
        &#47&#47     continue

        </a>logging.info(f"net_dataidx_map trainer: {net_dataidx_map[i]}")
        dataloader<a id="change">, dataset = </a>create_dataloader(
            train_path,
            imgsz,
            batch_size,
            gs,
            args,
            hyp=hyp,
            rect=True,
            augment=True,
            net_dataidx_map=net_dataidx_map[i],
            workers=args.worker_num,
        )
        testloader<a id="change"> = </a>create_dataloader(
            test_path,
            imgsz_test,
            total_batch_size,</code></pre><h3>After Change</h3><pre><code class='java'>
    train_dataloader_global = None
    test_dataloader_global = None

    <a id="change">if args.process_id == 0</a>:  &#47&#47 server
        <a id="change">pass</a>
    else:
        client_idx<a id="change"> = </a><a id="change">int(</a>args.process_id<a id="change">)</a><a id="change"> - 1</a>

        logging.info(f"net_dataidx_map trainer: {net_dataidx_map[client_idx]}")
        dataloader<a id="change">, dataset = </a>create_dataloader(
            train_path,
            imgsz,
            batch_size,
            gs,
            args,
            hyp=hyp,
            rect=True,
            augment=True,
            net_dataidx_map=net_dataidx_map[client_idx],
            workers=args.worker_num,
        )
        testloader<a id="change"> = </a>create_dataloader(
            test_path,
            imgsz_test,
            total_batch_size,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/f78b32af8a7f6f106437a4e0a0aa71f170543910#diff-45ac3350ef6145f3d26a34282ab0cf7523668ffe488f79ddbd1f319b9fbc638eL93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90791265</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: f78b32af8a7f6f106437a4e0a0aa71f170543910</div><div id='time'> Time: 2022-07-19</div><div id='author'> Author: bj.yan.pa@qq.com</div><div id='file'> File Name: python/app/fedcv/object_detection/data/data_loader.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_partition_data_coco(3)</div><div id='n_method'> N Method Name: load_partition_data_coco(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/app/fedcv/object_detection/data/data_loader.py</div><div id='n_file'> N File Name: python/app/fedcv/object_detection/data/data_loader.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 199</div><div id='n_start'> N Start Line: 162</div><div id='n_end'> N End Line: 208</div><BR>