<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">for client_idx</a> in <a id="change">range(</a>client_number<a id="change">):
        </a>dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local
    return (
        train_data_num,
        test_data_num,</code></pre><h3>After Change</h3><pre><code class='java'>
    train_data_local_dict = dict()
    test_data_local_dict = dict()

    <a id="change">if args.process_id == 0</a>:  &#47&#47 server
        <a id="change">pass</a>
    else:
        client_idx<a id="change"> = </a><a id="change">int(</a>args.process_id<a id="change">)</a><a id="change"> - 1</a>
        dataidxs = net_dataidx_map[client_idx]
        local_data_num = len(dataidxs)
        data_local_num_dict[client_idx] = local_data_num
        logging.info(
            "client_idx = %d, local_sample_number = %d" % (client_idx, local_data_num)
        )

        &#47&#47 training batch size = 64; algorithms batch size = 32
        train_data_local, test_data_local = get_dataloader(
            dataset, data_dir, batch_size, batch_size, dataidxs
        )
        logging.info(
            "client_idx = %d, batch_num_train_local = %d, batch_num_test_local = %d"
            % (client_idx, len(train_data_local), len(test_data_local))
        )
        train_data_local_dict[client_idx]<a id="change"> = </a>train_data_local
        test_data_local_dict[client_idx]<a id="change"> = </a>test_data_local

    return (
        train_data_num,</code></pre>