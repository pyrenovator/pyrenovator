<html><h3>Pattern ID :12104
</h3><img src='40828452.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    metric = isc_features_to_metric(
        features,
        kwargs[&quotisc_splits&quot],
        <a id="change">kwargs[&quotshuffle_on&quot]</a>,
        <a id="change">kwargs[&quotrng_seed&quot]</a>,
    )
    return metric
</code></pre><h3>After Change</h3><pre><code class='java'>
    features = featuresdict[feat_layer_name]
    metric = isc_features_to_metric(
        features,
        <a id="change">get_kwarg(&quotisc_splits&quot</a>, <a id="change">kwargs</a><a id="change">)</a>,
        <a id="change">get_kwarg(&quotsamples_shuffle&quot</a>, <a id="change">kwargs</a><a id="change">)</a>,
        <a id="change">get_kwarg(&quotrng_seed&quot</a>, <a id="change">kwargs</a><a id="change">)</a>,
    )
    return metric
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/toshas/torch-fidelity/commit/717fd082e01f8e6f40ae82b24760205d752bd812#diff-c5ccaf2ca25d7f4b03662931a0cf2dee79fb54a75e5ded2371452b185d9728ccL40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40828452</div><div id='project'> Project Name: toshas/torch-fidelity</div><div id='commit'> Commit Name: 717fd082e01f8e6f40ae82b24760205d752bd812</div><div id='time'> Time: 2020-04-28</div><div id='author'> Author: anton.obukhov@vision.ee.ethz.ch</div><div id='file'> File Name: torch_fidelity/metric_isc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: isc_featuresdict_to_metric(2)</div><div id='n_method'> N Method Name: isc_featuresdict_to_metric(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_fidelity/metric_isc.py</div><div id='n_file'> N File Name: torch_fidelity/metric_isc.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def calculate_kid(input_1, input_2, **kwargs):
    feat_layer_name = <a id="change">kwargs[&quotfeature_layer_kid&quot]</a>
    feat_extractor = create_feature_extractor(
        <a id="change">kwargs[&quotfeature_extractor&quot]</a>,
        [feat_layer_name],
        **kwargs
    )</code></pre><h3>After Change</h3><pre><code class='java'>


def calculate_kid(input_1, input_2, **kwargs):
    feat_layer_name = <a id="change">get_kwarg(&quotfeature_layer_kid&quot</a>, kwargs<a id="change">)</a>
    feat_extractor = create_feature_extractor(
        <a id="change">get_kwarg(&quotfeature_extractor&quot</a>, kwargs<a id="change">)</a>,
        [feat_layer_name],
        **kwargs
    )

    cacheable_input1_name = get_input_cacheable_name(input_1, get_kwarg(&quotcache_input1_name&quot, kwargs))
    cacheable_input2_name = get_input_cacheable_name(input_2, <a id="change">get_kwarg(&quotcache_input2_name&quot</a>, kwargs<a id="change">)</a>)

    featuresdict_1 = extract_featuresdict_from_input_cached(input_1, cacheable_input1_name, feat_extractor, **kwargs)
    featuresdict_2 = extract_featuresdict_from_input_cached(input_2, cacheable_input2_name, feat_extractor, **kwargs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/toshas/torch-fidelity/commit/717fd082e01f8e6f40ae82b24760205d752bd812#diff-648d3fdbc21590d005c274947dc7674c545352a273cc29dfc03d7571e17ad56aL101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40828453</div><div id='project'> Project Name: toshas/torch-fidelity</div><div id='commit'> Commit Name: 717fd082e01f8e6f40ae82b24760205d752bd812</div><div id='time'> Time: 2020-04-28</div><div id='author'> Author: anton.obukhov@vision.ee.ethz.ch</div><div id='file'> File Name: torch_fidelity/metric_kid.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calculate_kid(2)</div><div id='n_method'> N Method Name: calculate_kid(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_fidelity/metric_kid.py</div><div id='n_file'> N File Name: torch_fidelity/metric_kid.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 115</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    for i in tqdm(range(kid_subsets)):
        f1 = features_1[rng.choice(len(features_1), kid_subset_size, replace=False)]
        f2 = features_2[rng.choice(len(features_2), kid_subset_size, replace=False)]
        o = polynomial_mmd(f1, f2, <a id="change">kwargs[&quotkid_degree&quot]</a>, <a id="change">kwargs[&quotkid_gamma&quot]</a>, kwargs[&quotkid_coef0&quot])
        mmds[i] = o

    return {</code></pre><h3>After Change</h3><pre><code class='java'>
    features_1 = features_1.cpu().numpy()
    features_2 = features_2.cpu().numpy()

    kid_subsets = <a id="change">get_kwarg(&quotkid_subsets&quot</a>, kwargs<a id="change">)</a>
    kid_subset_size = <a id="change">get_kwarg(&quotkid_subset_size&quot</a>, kwargs<a id="change">)</a>

    mmds = np.zeros(kid_subsets)
    rng = np.random.RandomState(<a id="change">get_kwarg(&quotrng_seed&quot</a>, kwargs<a id="change">)</a>)

    for i in tqdm(range(kid_subsets)):
        f1 = features_1[rng.choice(len(features_1), kid_subset_size, replace=False)]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/toshas/torch-fidelity/commit/717fd082e01f8e6f40ae82b24760205d752bd812#diff-648d3fdbc21590d005c274947dc7674c545352a273cc29dfc03d7571e17ad56aL68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40828450</div><div id='project'> Project Name: toshas/torch-fidelity</div><div id='commit'> Commit Name: 717fd082e01f8e6f40ae82b24760205d752bd812</div><div id='time'> Time: 2020-04-28</div><div id='author'> Author: anton.obukhov@vision.ee.ethz.ch</div><div id='file'> File Name: torch_fidelity/metric_kid.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: kid_features_to_metric(2)</div><div id='n_method'> N Method Name: kid_features_to_metric(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_fidelity/metric_kid.py</div><div id='n_file'> N File Name: torch_fidelity/metric_kid.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def calculate_isc(input, **kwargs):
    feat_layer_name = <a id="change">kwargs[&quotfeature_layer_isc&quot]</a>
    feat_extractor = create_feature_extractor(
        <a id="change">kwargs[&quotfeature_extractor&quot]</a>,
        [feat_layer_name],
        **kwargs
    )</code></pre><h3>After Change</h3><pre><code class='java'>


def calculate_isc(input1, **kwargs):
    feat_layer_name = <a id="change">get_kwarg(&quotfeature_layer_isc&quot</a>, kwargs<a id="change">)</a>
    feat_extractor = create_feature_extractor(
        <a id="change">get_kwarg(&quotfeature_extractor&quot</a>, kwargs<a id="change">)</a>,
        [feat_layer_name],
        **kwargs
    )
    cacheable_input1_name = get_input_cacheable_name(input1, <a id="change">get_kwarg(&quotcache_input1_name&quot</a>, kwargs<a id="change">)</a>)
    metric = isc_input_to_metric(input1, cacheable_input1_name, feat_extractor, feat_layer_name, **kwargs)
    return metric
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/toshas/torch-fidelity/commit/717fd082e01f8e6f40ae82b24760205d752bd812#diff-c5ccaf2ca25d7f4b03662931a0cf2dee79fb54a75e5ded2371452b185d9728ccL52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40828451</div><div id='project'> Project Name: toshas/torch-fidelity</div><div id='commit'> Commit Name: 717fd082e01f8e6f40ae82b24760205d752bd812</div><div id='time'> Time: 2020-04-28</div><div id='author'> Author: anton.obukhov@vision.ee.ethz.ch</div><div id='file'> File Name: torch_fidelity/metric_isc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calculate_isc(1)</div><div id='n_method'> N Method Name: calculate_isc(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_fidelity/metric_isc.py</div><div id='n_file'> N File Name: torch_fidelity/metric_isc.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 62</div><BR>