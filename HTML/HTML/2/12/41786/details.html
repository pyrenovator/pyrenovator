<html><h3>Pattern ID :41786
</h3><img src='117192845.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def main():
    <a id="change">parser = </a><a id="change">argparse.ArgumentParser()</a>
    <a id="change">parser.add_argument(
        "--model-base-dir"</a>,
        <a id="change">"-m"</a><a id="change">,
        type=str,
        default=None,
        help="Model directory containing checkpoints and config.",
    )</a>
    <a id="change">parser.add_argument(
        "noisy_audio_files"</a><a id="change">,
        type=str,
        nargs="+",
        help="List of noise files to mix with the clean speech file.",
    )</a>
    <a id="change">parser.add_argument(
        </a>"--pf"<a id="change">,
        help="Postfilter that slightly overattenuates very noisy sections.",
        action="store_true",
    )</a>
    parser.add_argument("--output-dir", "-o", type=str, default=None)
    parser.add_argument(
        "--compensate-delay",
        "-d",
        action="store_true",
        help="Add some paddig to compensate the delay introduced by the real-time STFT/ISTFT implementation.",
    )
    args<a id="change"> = parser</a><a id="change">.parse_args()</a>
    if args.model_base_dir is None:
        args.model_base_dir = os.path.join(
            os.path.dirname(df.__file__), os.pardir, "pretrained_models", "DeepFilterNet"
        )</code></pre><h3>After Change</h3><pre><code class='java'>
        args.model_base_dir = os.path.join(
            os.path.dirname(df.__file__), os.pardir, "pretrained_models", "DeepFilterNet"
        )
        <a id="change">if </a>args.logging:
            print(f"Using default model at {args.model_base_dir}")
    if not os.path.isdir(args.model_base_dir):
        raise NotADirectoryError("Base directory not found at {}".format(args.model_base_dir))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rikorose/deepfilternet/commit/c515acc34d20ab3d45e2cd5ccc43e5d3ae324979#diff-cd543d34940b89ec27dfbeeb9cc4d3e9ef2ef1877d1d9191d7cf3b41035e4f9fL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117192845</div><div id='project'> Project Name: rikorose/deepfilternet</div><div id='commit'> Commit Name: c515acc34d20ab3d45e2cd5ccc43e5d3ae324979</div><div id='time'> Time: 2021-12-07</div><div id='author'> Author: GIShanshin@sberbank.ru</div><div id='file'> File Name: DeepFilterNet/df/enhance.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: DeepFilterNet/df/enhance.py</div><div id='n_file'> N File Name: DeepFilterNet/df/enhance.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def main():
    <a id="change">parser = </a><a id="change">argparse.ArgumentParser(
        description="Please provide a config file and port.")</a>
    <a id="change">parser.add_argument(
        "config"</a><a id="change">, help="A config file for nodes. The same format of on-prem provider section at top level.")</a>
    <a id="change">parser.add_argument(
        "--bind-address"</a><a id="change">,
        type=str,
        required=False,
        help="The address to bind. Bind to the address resolved from hostname if not specified.")</a>
    <a id="change">parser.add_argument(
        "--port"</a><a id="change">,
        type=int,
        required=False,
        help="The port on which the Cloud Simulator listens. Default: {}".format(DEFAULT_CLOUD_SIMULATOR_PORT))</a>
    args = <a id="change">parser.parse_args()</a>
    bind_address = args.bind_address
    port<a id="change"> = </a>args.port
    if bind_address is None:
        bind_address = socket.gethostbyname(socket.gethostname())
    if port is None:</code></pre><h3>After Change</h3><pre><code class='java'>


def main(args):
    <a id="change">if </a>args.reload:
        reload_config(
            args.config, args.bind_address, args.port)
    else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/9dcbc4e4895c090ae228a27e604a55cbb97f96a4#diff-1b34137874148aaf3c300a7ff16eb422b18aacecc8f408f9f7d04629e109aae1L111' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117192847</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: 9dcbc4e4895c090ae228a27e604a55cbb97f96a4</div><div id='time'> Time: 2023-05-19</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/providers/onprem/service/cloudtik_cloud_simulator.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/cloudtik/providers/onprem/service/cloudtik_cloud_simulator.py</div><div id='n_file'> N File Name: python/cloudtik/providers/onprem/service/cloudtik_cloud_simulator.py</div><div id='m_start'> M Start Line: 112</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

class Predictor(cog.Predictor):
    def setup(self):
        <a id="change">parser = </a><a id="change">argparse.ArgumentParser()</a>

        parser.add_argument("--upscale", type=int, default=2)
        parser.add_argument("--arch", type=str, default="clean")
        <a id="change">parser.add_argument("--channel"</a><a id="change">, type=int, default=2)</a>
        parser.add_argument(
            "--model_path",
            type=str,
            default="experiments/pretrained_models/GFPGANCleanv1-NoCE-C2.pth",
        )
        parser.add_argument("--bg_upsampler", type=str, default="realesrgan")
        parser.add_argument("--bg_tile", type=int, default=400)
        <a id="change">parser.add_argument("--test_path"</a><a id="change">, type=str, default="inputs/whole_imgs")</a>
        parser.add_argument(
            "--suffix", type=str, default=None, help="Suffix of the restored faces"
        )
        parser.add_argument("--only_center_face", action="store_true")
        <a id="change">parser.add_argument("--aligned"</a><a id="change">, action="store_true")</a>
        parser.add_argument("--paste_back", action="store_false")
        parser.add_argument("--save_root", type=str, default="results")

        self.args<a id="change"> = </a><a id="change">parser.parse_args(
            </a>["--upscale", "2", "--test_path", "cog_temp", "--save_root", "results"]<a id="change">
        )</a>
        os.makedirs(self.args.test_path, exist_ok=True)
        &#47&#47 background upsampler
        if self.args.bg_upsampler == "realesrgan":
            if not torch.cuda.is_available():  &#47&#47 CPU</code></pre><h3>After Change</h3><pre><code class='java'>
        if not os.path.exists(&quotrealesr-general-x4v3.pth&quot):
            os.system(
                &quotwget https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.5.0/realesr-general-x4v3.pth -P .&quot)
        <a id="change">if </a>not os.path.exists(&quotGFPGANv1.2.pth&quot):
            os.system(&quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.2.pth -P .&quot)
        if not os.path.exists(&quotGFPGANv1.3.pth&quot):
            os.system(&quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.pth -P .&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencentarc/gfpgan/commit/3e27784b1b4eb008d06c04dbbaf6bdde34c4da84#diff-73c1982d8a085dc10fda2ac7b6f202ae3ff9530ee6a15991c5339051eb10a49aL22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117192853</div><div id='project'> Project Name: tencentarc/gfpgan</div><div id='commit'> Commit Name: 3e27784b1b4eb008d06c04dbbaf6bdde34c4da84</div><div id='time'> Time: 2022-08-31</div><div id='author'> Author: wxt1994@126.com</div><div id='file'> File Name: predict.py</div><div id='m_class'> M Class Name: Predictor</div><div id='n_method'> N Class Name: Predictor</div><div id='m_method'> M Method Name: setup(1)</div><div id='n_method'> N Method Name: setup(1)</div><div id='m_parent_class'> M Parent Class: BasePredictor</div><div id='n_parent_class'> N Parent Class: cog.Predictor</div><div id='m_file'> M File Name: predict.py</div><div id='n_file'> N File Name: predict.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def main():
    <a id="change">parser = </a><a id="change">argparse.ArgumentParser()</a>
    <a id="change">parser.add_argument(
        "--model-base-dir"</a>,
        "-m"<a id="change">,
        type=str,
        default=None,
        help="Model directory containing checkpoints and config.",
    )</a>
    <a id="change">parser.add_argument(
        "noisy_audio_files"</a><a id="change">,
        type=str,
        nargs="+",
        help="List of noise files to mix with the clean speech file.",
    )</a>
    <a id="change">parser.add_argument(
        "--pf"</a><a id="change">,
        help="Postfilter that slightly overattenuates very noisy sections.",
        action="store_true",
    )</a>
    parser.add_argument("--output-dir", "-o", type=str, default=None)
    parser.add_argument(
        "--compensate-delay",
        "-d",
        action="store_true",
        help="Add some paddig to compensate the delay introduced by the real-time STFT/ISTFT implementation.",
    )
    args<a id="change"> = </a><a id="change">parser.parse_args()</a>
    if args.model_base_dir is None:
        args.model_base_dir = os.path.join(
            os.path.dirname(df.__file__), os.pardir, "pretrained_models", "DeepFilterNet"
        )</code></pre><h3>After Change</h3><pre><code class='java'>
        args.model_base_dir = os.path.join(
            os.path.dirname(df.__file__), os.pardir, "pretrained_models", "DeepFilterNet"
        )
        <a id="change">if </a>args.logging:
            print(f"Using default model at {args.model_base_dir}")
    if not os.path.isdir(args.model_base_dir):
        raise NotADirectoryError("Base directory not found at {}".format(args.model_base_dir))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rikorose/deepfilternet/commit/c515acc34d20ab3d45e2cd5ccc43e5d3ae324979#diff-cd543d34940b89ec27dfbeeb9cc4d3e9ef2ef1877d1d9191d7cf3b41035e4f9fL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117192854</div><div id='project'> Project Name: rikorose/deepfilternet</div><div id='commit'> Commit Name: c515acc34d20ab3d45e2cd5ccc43e5d3ae324979</div><div id='time'> Time: 2021-12-07</div><div id='author'> Author: GIShanshin@sberbank.ru</div><div id='file'> File Name: DeepFilterNet/df/enhance.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: DeepFilterNet/df/enhance.py</div><div id='n_file'> N File Name: DeepFilterNet/df/enhance.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 32</div><BR>