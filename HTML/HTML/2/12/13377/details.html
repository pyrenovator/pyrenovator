<html><h3>Pattern ID :13377
</h3><img src='45133872.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    evaluator = SingleCarlaEvaluator(cfg.eval, evaluate_env, policy.eval_mode)
    replay_buffer = NaiveReplayBuffer(cfg.policy.other.replay_buffer, tb_logger)

    learner._instance_name<a id="change"> = </a>cfg<a id="change">.exp_name + &quot_&quot + time.ctime()</a><a id="change">.replace(&quot &quot, &quot_&quot).replace(&quot:&quot</a>, <a id="change">&quot_&quot</a><a id="change">)</a>
    learner.call_hook(&quotbefore_run&quot)

    new_data = collector.collect(n_sample=10000, train_iter=learner.train_iter)
    replay_buffer.push(new_data, cur_collector_envstep=collector.envstep)</code></pre><h3>After Change</h3><pre><code class='java'>
    )
    tcp_list = parse_carla_tcp(cfg.server)
    collector_env_num, evaluator_env_num = cfg.env.collector_env_num, cfg.env.evaluator_env_num
    <a id="change">assert </a>len(tcp_list) &gt;= collector_env_num + evaluator_env_num, \
        "Carla server not enough! Need {} servers but only found {}.".format(
            collector_env_num + evaluator_env_num, len(tcp_list)
    )</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/opendilab/di-drive/commit/140d1a26bbba0681936f8f15167f38b1a06288ea#diff-25e88a1417c8839f312f23a0252c366ee1e751c44bcf835801e2521c60c71f6cL122' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45133872</div><div id='project'> Project Name: opendilab/di-drive</div><div id='commit'> Commit Name: 140d1a26bbba0681936f8f15167f38b1a06288ea</div><div id='time'> Time: 2021-09-19</div><div id='author'> Author: sissure@qq.com</div><div id='file'> File Name: demo/simple_rl/sac_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: demo/simple_rl/sac_train.py</div><div id='n_file'> N File Name: demo/simple_rl/sac_train.py</div><div id='m_start'> M Start Line: 122</div><div id='m_end'> M End Line: 168</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 177</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    eps_cfg = cfg.policy.other.eps
    epsilon_greedy = get_epsilon_greedy_fn(eps_cfg.start, eps_cfg.end, eps_cfg.decay, eps_cfg.type)

    learner._instance_name<a id="change"> = </a>cfg<a id="change">.exp_name + &quot_&quot + time.ctime()</a><a id="change">.replace(&quot &quot, &quot_&quot).replace(&quot:&quot</a>, <a id="change">&quot_&quot</a><a id="change">)</a>
    learner.call_hook(&quotbefore_run&quot)
    eps = epsilon_greedy(learner.train_iter)
    new_data = collector.collect(n_sample=10000, train_iter=learner.train_iter, policy_kwargs={&quoteps&quot: eps})
    replay_buffer.push(new_data, cur_collector_envstep=collector.envstep)</code></pre><h3>After Change</h3><pre><code class='java'>
    )
    tcp_list = parse_carla_tcp(cfg.server)
    collector_env_num, evaluator_env_num = cfg.env.collector_env_num, cfg.env.evaluator_env_num
    <a id="change">assert </a>len(tcp_list) &gt;= collector_env_num + evaluator_env_num, \
        "Carla server not enough! Need {} servers but only found {}.".format(
            collector_env_num + evaluator_env_num, len(tcp_list)
    )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendilab/di-drive/commit/140d1a26bbba0681936f8f15167f38b1a06288ea#diff-60ee3b7e7b3720129b1a9b4b2976a03b88abe308b85920e48f6c17682b68fd2bL131' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45133874</div><div id='project'> Project Name: opendilab/di-drive</div><div id='commit'> Commit Name: 140d1a26bbba0681936f8f15167f38b1a06288ea</div><div id='time'> Time: 2021-09-19</div><div id='author'> Author: sissure@qq.com</div><div id='file'> File Name: demo/simple_rl/dqn_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: demo/simple_rl/dqn_train.py</div><div id='n_file'> N File Name: demo/simple_rl/dqn_train.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 184</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 193</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    evaluator = SingleCarlaEvaluator(cfg.eval, evaluate_env, policy.eval_mode)
    replay_buffer = NaiveReplayBuffer(cfg.policy.other.replay_buffer, tb_logger)

    learner._instance_name<a id="change"> = </a>cfg<a id="change">.exp_name + &quot_&quot + time.ctime()</a><a id="change">.replace(&quot &quot, &quot_&quot).replace(&quot:&quot</a>, <a id="change">&quot_&quot</a><a id="change">)</a>
    learner.call_hook(&quotbefore_run&quot)

    new_data = collector.collect(n_sample=10000, train_iter=learner.train_iter)
    replay_buffer.push(new_data, cur_collector_envstep=collector.envstep)</code></pre><h3>After Change</h3><pre><code class='java'>
    )
    tcp_list = parse_carla_tcp(cfg.server)
    collector_env_num, evaluator_env_num = cfg.env.collector_env_num, cfg.env.evaluator_env_num
    <a id="change">assert </a>len(tcp_list) &gt;= collector_env_num + evaluator_env_num, \
        "Carla server not enough! Need {} servers but only found {}.".format(
            collector_env_num + evaluator_env_num, len(tcp_list)
    )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendilab/di-drive/commit/140d1a26bbba0681936f8f15167f38b1a06288ea#diff-deaba84a0f039a1bf09e142ddfa189fbc340e05faaf37e85f7e1e3744e9960e7L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45133878</div><div id='project'> Project Name: opendilab/di-drive</div><div id='commit'> Commit Name: 140d1a26bbba0681936f8f15167f38b1a06288ea</div><div id='time'> Time: 2021-09-19</div><div id='author'> Author: sissure@qq.com</div><div id='file'> File Name: demo/simple_rl/td3_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: demo/simple_rl/td3_train.py</div><div id='n_file'> N File Name: demo/simple_rl/td3_train.py</div><div id='m_start'> M Start Line: 116</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 169</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    evaluator = SingleCarlaEvaluator(cfg.eval, evaluate_env, policy.eval_mode)
    replay_buffer = NaiveReplayBuffer(cfg.policy.other.replay_buffer, tb_logger)

    learner._instance_name<a id="change"> = </a>cfg<a id="change">.exp_name + &quot_&quot + time.ctime()</a><a id="change">.replace(&quot &quot, &quot_&quot).replace(&quot:&quot</a>, <a id="change">&quot_&quot</a><a id="change">)</a>
    learner.call_hook(&quotbefore_run&quot)
    new_data = collector.collect(n_sample=10000, train_iter=learner.train_iter)
    replay_buffer.push(new_data, cur_collector_envstep=collector.envstep)
</code></pre><h3>After Change</h3><pre><code class='java'>
    )
    tcp_list = parse_carla_tcp(cfg.server)
    collector_env_num, evaluator_env_num = cfg.env.collector_env_num, cfg.env.evaluator_env_num
    <a id="change">assert </a>len(tcp_list) &gt;= collector_env_num + evaluator_env_num, \
        "Carla server not enough! Need {} servers but only found {}.".format(
            collector_env_num + evaluator_env_num, len(tcp_list)
    )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendilab/di-drive/commit/140d1a26bbba0681936f8f15167f38b1a06288ea#diff-db9a7c8caabf825b8915ba39182f24937b95c86894acad7f768b706233be08dcL116' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45133880</div><div id='project'> Project Name: opendilab/di-drive</div><div id='commit'> Commit Name: 140d1a26bbba0681936f8f15167f38b1a06288ea</div><div id='time'> Time: 2021-09-19</div><div id='author'> Author: sissure@qq.com</div><div id='file'> File Name: demo/simple_rl/ddpg_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(2)</div><div id='n_method'> N Method Name: main(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: demo/simple_rl/ddpg_train.py</div><div id='n_file'> N File Name: demo/simple_rl/ddpg_train.py</div><div id='m_start'> M Start Line: 117</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 170</div><BR>