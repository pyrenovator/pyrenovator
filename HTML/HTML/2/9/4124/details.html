<html><h3>Pattern ID :4124
</h3><img src='15304153.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &quotsocial_subscriptions&quot: MSocialSubscription.objects.count(),
        }

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "feeds"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 15</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-c57c36bbc37ce5dc9656868bbd817f63af993dd367e92df5d756c5a9d85a2743L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304153</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_feeds.py</div><div id='m_class'> M Class Name: Feeds</div><div id='n_method'> N Class Name: Feeds</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_feeds.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_feeds.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 38</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotstories&quot: MStory.objects.count(),
            &quotstarred_stories&quot: MStarredStory.objects.count(),
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "stories"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-f53b5613c8b12060fd4b1f681d9cfb7bfdb39e85a2d05ff8d93a844f3f7c96f2L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304152</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_stories.py</div><div id='m_class'> M Class Name: Stories</div><div id='n_method'> N Class Name: Stories</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_stories.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_stories.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 13</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 21</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        data = {
            &quotfeed_success&quot: statistics[&quotfeeds_fetched&quot],
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "errors"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-595614cc24deb655e9e2974cf669f0bd817cb31d34a3c58bcf006eb2ac207439L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304155</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_errors.py</div><div id='m_class'> M Class Name: Errors</div><div id='n_method'> N Class Name: Errors</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_errors.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_errors.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 13</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 21</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotpremium&quot: Profile.objects.filter(is_premium=True).count(),
            &quotqueued&quot: RNewUserQueue.user_count(),
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "users"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-59c88dcb6a3e5928261345cbb8dc61dcd547e1d6242062b5b9c39232ac05ce1cL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304154</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_users.py</div><div id='m_class'> M Class Name: Users</div><div id='n_method'> N Class Name: Users</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_users.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_users.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def get(self, request):
        data = dict((("_%s" % s[&quot_id&quot], s[&quotfeeds&quot]) for s in self.stats))
        
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>
    
    @property
    def stats(self):        
        stats = settings.MONGOANALYTICSDB.nbanalytics.feed_fetches.aggregate([{</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "task_codes"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>
    
    @property
    def stats(self):        
        stats = settings.MONGOANALYTICSDB.nbanalytics.feed_fetches.aggregate([{</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-8f29cf647b14ddf3c01ebcd188afa6733fb0cbaa702a03cf1de04a71371fcb79L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304157</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_tasks_codes.py</div><div id='m_class'> M Class Name: TasksCodes</div><div id='n_method'> N Class Name: TasksCodes</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_tasks_codes.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_tasks_codes.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 11</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 18</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotfeed_loadtimes_avg_hour&quot: MStatistics.get(&quotlatest_avg_time_taken&quot),
            &quotfeeds_loaded_hour&quot: MStatistics.get(&quotlatest_sites_loaded&quot),
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "load_times"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-928ad0f28df8a1718e75533b9215c90f1b3cfdb9e2b12a2c3756de3f87b8835eL6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304156</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_loadtimes.py</div><div id='m_class'> M Class Name: LoadTimes</div><div id='n_method'> N Class Name: LoadTimes</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_loadtimes.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_loadtimes.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 13</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 21</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if self.total:
            data[&quottotal&quot] = self.total[0][&quotfeeds&quot]

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

    
    @property
    def stats(self):</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "task_servers"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

    
    @property
    def stats(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-0d6312bbc051068501f2cc4c5750ec5ee600857b502f483bb0db39235919b674L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304158</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_tasks_servers.py</div><div id='m_class'> M Class Name: TasksServers</div><div id='n_method'> N Class Name: TasksServers</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_tasks_servers.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_tasks_servers.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 14</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 21</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotcelery_work_queue&quot: r.llen("work_queue"),
            &quotcelery_search_queue&quot: r.llen("search_indexer"),
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "updates"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-cb0e46235f5a12a90fd92ab066148c99263366ae3cf8c9d65649a8e797d920fcL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304145</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_updates.py</div><div id='m_class'> M Class Name: Updates</div><div id='n_method'> N Class Name: Updates</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_updates.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_updates.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 23</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if self.total:
            data[&quottotal&quot] = self.total[0][&quotfeeds&quot]

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>
    
    @property
    def stats(self):
        stats = settings.MONGOANALYTICSDB.nbanalytics.page_loads.aggregate([{</code></pre><h3>After Change</h3><pre><code class='java'>
            data[&quottotal&quot] = self.total[0][&quotfeeds&quot]
        chart_name = "app_servers"
        chart_type = "histogram"
        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a> 
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>
    
    @property
    def stats(self):
        stats = settings.MONGOANALYTICSDB.nbanalytics.page_loads.aggregate([{</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-81a6ed13745c85129c79be0ad2adcbb7854cef0a21a56dba7ed102da56c26857L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304144</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_app_servers.py</div><div id='m_class'> M Class Name: AppServers</div><div id='n_method'> N Class Name: AppServers</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_app_servers.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_app_servers.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 13</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 19</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotactive_feeds&quot: active_feeds,
            &quotpush_feeds&quot: push_feeds,
        }
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>


</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "feed_counts"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>


</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-bb41b38b970261f35297abd985ead894a0ffeded50770749107e4baaadd6776eL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304147</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_feed_counts.py</div><div id='m_class'> M Class Name: FeedCounts</div><div id='n_method'> N Class Name: FeedCounts</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_feed_counts.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_feed_counts.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 56</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quottask_redis_avg&quot: MStatistics.get(&quotlatest_task_redis_avg&quot),
        }

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "db_times"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-a0974e7e38b7bded433de4e032f56664890c912e85037bf3baeed94c0c201255L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304146</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_dbtimes.py</div><div id='m_class'> M Class Name: DbTimes</div><div id='n_method'> N Class Name: DbTimes</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_dbtimes.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_dbtimes.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def get(self, request):
        servers = dict((("%s" % s[&quot_id&quot], s[&quotpage_load&quot]) for s in self.stats))
        data = servers
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>
    
    @property
    def stats(self):
</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "app_times"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>
    
    @property
    def stats(self):
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-68a6f0e4ce7060495bdd956e1755bca090bf2abc112eeb8688e01df2f5ad8dc1L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304149</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_app_times.py</div><div id='m_class'> M Class Name: AppTimes</div><div id='n_method'> N Class Name: AppTimes</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_app_times.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_app_times.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 11</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 19</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def get(self, request):
        data = dict((("%s" % s[&quot_id&quot], s[&quottotal&quot]) for s in self.stats))

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

    
    @property
    def stats(self):</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "task_times"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

    
    @property
    def stats(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-1f112967e88fdac6e5adc23aa3821aa6c9f2ea8c72de25796f33e2d07b598c35L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304148</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_tasks_times.py</div><div id='m_class'> M Class Name: TasksTimes</div><div id='n_method'> N Class Name: TasksTimes</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_tasks_times.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_tasks_times.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 19</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quottitles&quot: MClassifierTitle.objects.count(),
        }

        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>

</code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "classifiers"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-d1d48fa36b9f402c8bdf276d04318ad0b591d38c74cfa18e17b990d5f2d3e31bL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304151</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_classifiers.py</div><div id='m_class'> M Class Name: Classifiers</div><div id='n_method'> N Class Name: Classifiers</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_classifiers.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_classifiers.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 16</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def get(self, request):
        data =self.stats
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, <a id="change">{</a>"data": data<a id="change">}</a><a id="change">)</a>
    
    @property
    def stats(self):
        </code></pre><h3>After Change</h3><pre><code class='java'>
        chart_name = "task_pipeline"
        chart_type = "histogram"

        context<a id="change"> = </a><a id="change">{
            </a>"data": data,
            "chart_name": chart_name,
            "chart_type": chart_type<a id="change">,
        }</a>
        <a id="change">return </a><a id="change">render(</a>request, <a id="change">&quotmonitor/prometheus_data.html&quot</a>, context<a id="change">)</a>
    
    @property
    def stats(self):
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/9cbad888c77d2fa74313d38a803037b253dd9b24#diff-ec9006b9a14c47e9377bc71690421bb086cfb116973127f1aeaebc9702ae00c5L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 15304150</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: 9cbad888c77d2fa74313d38a803037b253dd9b24</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: jonathanamath@gmail.com</div><div id='file'> File Name: apps/monitor/views/newsblur_tasks_pipeline.py</div><div id='m_class'> M Class Name: TasksPipeline</div><div id='n_method'> N Class Name: TasksPipeline</div><div id='m_method'> M Method Name: get(2)</div><div id='n_method'> N Method Name: get(2)</div><div id='m_parent_class'> M Parent Class: View</div><div id='n_parent_class'> N Parent Class: View</div><div id='m_file'> M File Name: apps/monitor/views/newsblur_tasks_pipeline.py</div><div id='n_file'> N File Name: apps/monitor/views/newsblur_tasks_pipeline.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 11</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 19</div><BR>