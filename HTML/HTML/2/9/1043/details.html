<html><h3>Pattern ID :1043
</h3><img src='5252816.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 If requested, add a 1/2PSF border around the convolution window to get rid of edge effects
        if "border" in self.psf_mode:
            psf_border_int = (
                int(psf_image.window.shape[0]/(2*working_image.pixelscale)+1)<a id="change">,
                int(psf_image.window.shape[1]/(2*working_image.pixelscale)+1)</a>,
            )
            psf_border = (
                psf_border_int[0]*working_image.pixelscale,</code></pre><h3>After Change</h3><pre><code class='java'>
            convolution = direct_convolve(working_image[working_window].data, psf_image.data)
        elif "fft" in self.psf_mode:
            convolution = fft_convolve(working_image[working_window].data, psf_image.data)
        elif <a id="change">max(psf_image.data.shape) &lt; 20 or max(working_image[working_window].data.shape) &lt; 100</a>:
            convolution<a id="change"> = </a>direct_convolve(working_image[working_window].data, psf_image.data)
        else:
            convolution<a id="change"> = </a>fft_convolve(working_image[working_window].data, psf_image.data)
            
        &#47&#47 Cut the 1/2PSF border from the data
        if "window" in self.psf_mode:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/94b98c7b3f8d932c5b369e9fce696b13bb07b9c0#diff-f48e7e4f4617c56a91cecf87400e1b8c67ec5491c53dceae61328526ff99ebfeL164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5252816</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: 94b98c7b3f8d932c5b369e9fce696b13bb07b9c0</div><div id='time'> Time: 2022-09-09</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/models/model_object.py</div><div id='m_class'> M Class Name: BaseModel</div><div id='n_method'> N Class Name: BaseModel</div><div id='m_method'> M Method Name: convolve_psf(3)</div><div id='n_method'> N Method Name: convolve_psf(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: autoprof/models/model_object.py</div><div id='n_file'> N File Name: autoprof/models/model_object.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 198</div><div id='n_start'> N Start Line: 173</div><div id='n_end'> N End Line: 194</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        points_lvl = torch.log2(
            points_stride).int()  &#47&#47 [3...,4...,5...,6...,7...]
        lvl_min, lvl_max = points_lvl.min(), points_lvl.max()
        num_gts, num_points = gt_bboxes.shape[0]<a id="change">, points.shape[0]</a>

        &#47&#47 assign gt box
        gt_bboxes_xy = (gt_bboxes[:, :2] + gt_bboxes[:, 2:]) / 2
        gt_bboxes_wh = (gt_bboxes[:, 2:] - gt_bboxes[:, :2]).clamp(min=1e-6)</code></pre><h3>After Change</h3><pre><code class='java'>
        num_points = points.shape[0]
        num_gts = gt_bboxes.shape[0]

        <a id="change">if num_gts == 0</a><a id="change"> or num_points == 0</a>:
            &#47&#47 If no truth assign everything to the background
            assigned_gt_inds<a id="change"> = </a>points.new_full((num_points, ),
                                               0,
                                               dtype=torch.long)
            if gt_labels is None:
                assigned_labels<a id="change"> = </a>None
            else:
                assigned_labels = points.new_zeros((num_points, ),
                                                   dtype=torch.long)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/b69667001f250a54a37129a000a8d5160e047239#diff-d6cb38b54ccbc7b6432bd8c6fe8599f1eb577fab627d70e0a2a5e2ac9f091e1bL22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5252944</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: b69667001f250a54a37129a000a8d5160e047239</div><div id='time'> Time: 2019-12-24</div><div id='author'> Author: erotemic@gmail.com</div><div id='file'> File Name: mmdet/core/bbox/assigners/point_assigner.py</div><div id='m_class'> M Class Name: PointAssigner</div><div id='n_method'> N Class Name: PointAssigner</div><div id='m_method'> M Method Name: assign(5)</div><div id='n_method'> N Method Name: assign(5)</div><div id='m_parent_class'> M Parent Class: BaseAssigner</div><div id='n_parent_class'> N Parent Class: BaseAssigner</div><div id='m_file'> M File Name: mmdet/core/bbox/assigners/point_assigner.py</div><div id='n_file'> N File Name: mmdet/core/bbox/assigners/point_assigner.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        with open(ann_file, &quotw&quot) as f:
            for (image_path, mask_path) in segm_list.values():
                f.write(&quot/%s %s\n&quot % (
                    image_path.replace(&quot\\&quot, &quot/&quot)<a id="change">,
                    mask_path.replace(&quot\\&quot, &quot/&quot)</a>)
                )

    def save_label_map(self):</code></pre><h3>After Change</h3><pre><code class='java'>
            for (image_path, mask_path) in segm_list.values():
                image_path = &quot/&quot + image_path.replace(&quot\\&quot, &quot/&quot)
                mask_path = mask_path.replace(&quot\\&quot, &quot/&quot)
                <a id="change">if 1</a><a id="change"> &lt; len(image_path.split()) or 1 &lt; len(mask_path.split())</a>:
                    image_path<a id="change"> = </a>&quot\"&quot + image_path + &quot\"&quot
                    mask_path<a id="change"> = </a>&quot\"&quot + mask_path + &quot\"&quot
                f.write(&quot%s %s\n&quot % (image_path, mask_path))

    def save_label_map(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/ef12d30458ba594e1a8114c0f5f103e00e04ec8d#diff-08f515e98f845195309fa3aa0c6e7bfb58bf9a492587b3c03287b6d2c19e2476L262' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5252976</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: ef12d30458ba594e1a8114c0f5f103e00e04ec8d</div><div id='time'> Time: 2021-03-17</div><div id='author'> Author: anastasia.yasakova@intel.com</div><div id='file'> File Name: datumaro/plugins/camvid_format.py</div><div id='m_class'> M Class Name: CamvidConverter</div><div id='n_method'> N Class Name: CamvidConverter</div><div id='m_method'> M Method Name: save_segm_lists(3)</div><div id='n_method'> N Method Name: save_segm_lists(3)</div><div id='m_parent_class'> M Parent Class: Converter</div><div id='n_parent_class'> N Parent Class: Converter</div><div id='m_file'> M File Name: datumaro/plugins/camvid_format.py</div><div id='n_file'> N File Name: datumaro/plugins/camvid_format.py</div><div id='m_start'> M Start Line: 269</div><div id='m_end'> M End Line: 271</div><div id='n_start'> N Start Line: 278</div><div id='n_end'> N End Line: 283</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.criterion = piqa.psnr.PSNR().to(device)

    def forward(self, pred, target):
        pred<a id="change">, target</a> = self.reshape_clamp(pred, target)
        return -self.criterion(pred, target)

    @classmethod</code></pre><h3>After Change</h3><pre><code class='java'>
        self.criterion = nn.MSELoss(reduction="none").to(device)

    def forward(self, pred, target):
        <a id="change">if pred.ndim != 5</a><a id="change"> or target.ndim != 5</a>:
            raise ValueError(f"{self.NAME} expects 5-D inputs!")
        b<a id="change">, t, _, _, _ = </a>pred.shape
        mses<a id="change"> = </a>self.criterion(pred, target).mean(dim=(-1, -2, -3))  &#47&#47 [b, t]
        psnr_losses = torch.log10(mses) * 10
        return psnr_losses.mean(dim=1).mean(dim=0)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ais-bonn/vp-suite/commit/53b39ddc910a9d2b6f8ccea38f192b169eb6cbee#diff-f0fdb707adaa223dc1f120a91674669b66713e39de2b27319511e3868847ca73L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5252932</div><div id='project'> Project Name: ais-bonn/vp-suite</div><div id='commit'> Commit Name: 53b39ddc910a9d2b6f8ccea38f192b169eb6cbee</div><div id='time'> Time: 2022-02-24</div><div id='author'> Author: boltres@ais.uni-bonn.de</div><div id='file'> File Name: vp_suite/measure/image_wise.py</div><div id='m_class'> M Class Name: PSNR</div><div id='n_method'> N Class Name: PSNR</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: BaseMeasure</div><div id='n_parent_class'> N Parent Class: BaseMeasure</div><div id='m_file'> M File Name: vp_suite/measure/image_wise.py</div><div id='n_file'> N File Name: vp_suite/measure/image_wise.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for (i, line) in enumerate(lines):
            if i == 0:
                continue
            guid = "%s-%s" % ("train"<a id="change">, i</a>)
            text_a = line[0]
            text_b = line[1]
            label = "contradiction" if line[2] == "contradictory" else line[2]</code></pre><h3>After Change</h3><pre><code class='java'>
            guid = "%s-%s" % (line[0], "train")
            text_a = line[4]
            text_b = line[5]
            <a id="change">if len(text_a) &lt; 5</a><a id="change"> or len(text_b) &lt; 5</a>:
                continue
            label<a id="change"> = </a>line[3]
            assert isinstance(text_a, str), f"Training input {text_a} is not a string"
            assert isinstance(text_b, str), f"Training input {text_b} is not a string"
            assert isinstance(label, str), f"Training label {label} is not a string"
            example<a id="change"> = </a>InputExample(guid=guid, text_a=text_a, text_b=text_b, label=label)
            if i &lt; 10:
                print(example)
            examples.append(example)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/persiannlp/parsinlu/commit/7397e7e1aeb26010dc1d232f9a1e289bf5dc0458#diff-b54d2dd7878ddc4516dec262cc48c4242b248dc86cb708916302c2dcf198cb8eL14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5252956</div><div id='project'> Project Name: persiannlp/parsinlu</div><div id='commit'> Commit Name: 7397e7e1aeb26010dc1d232f9a1e289bf5dc0458</div><div id='time'> Time: 2020-10-01</div><div id='author'> Author: danielk@allenai.org</div><div id='file'> File Name: src/processors/entailment.py</div><div id='m_class'> M Class Name: TEProcessor</div><div id='n_method'> N Class Name: TEProcessor</div><div id='m_method'> M Method Name: get_train_examples(2)</div><div id='n_method'> N Method Name: get_train_examples(2)</div><div id='m_parent_class'> M Parent Class: DataProcessor</div><div id='n_parent_class'> N Parent Class: DataProcessor</div><div id='m_file'> M File Name: src/processors/entailment.py</div><div id='n_file'> N File Name: src/processors/entailment.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 29</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 32</div><BR>