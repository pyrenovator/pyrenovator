<html><h3>Pattern ID :31647
</h3><img src='92288928.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    cancel_event, handle_queue, runtime_thread = _create_runtime(args)

    &#47&#47 no connection registered yet
    <a id="change">with pytest</a><a id="change">.raises(RpcError):
        </a>GrpcConnectionPool.send_request_sync(
            _create_test_data_message(), f&quot{args.host}:{args.port}&quot
        )

    _add_worker(args, &quotip1&quot)
    &#47&#47 after adding a connection, sending should work
    result = GrpcConnectionPool.send_request_sync(
        _create_test_data_message(), f&quot{args.host}:{args.port}&quot
    )
    assert result

    _remove_worker(args, &quotip1&quot)
    &#47&#47 after removing the connection again, sending does not work anymore
    <a id="change">with pytest</a><a id="change">.raises(RpcError):
        </a>GrpcConnectionPool.send_request_sync(
            _create_test_data_message(), f&quot{args.host}:{args.port}&quot
        )
</code></pre><h3>After Change</h3><pre><code class='java'>
    resp = GrpcConnectionPool.send_request_sync(
        _create_test_data_message(), f&quot{args.host}:{args.port}&quot
    )
    <a id="change">assert </a>resp.status.code == resp.status.ERROR

    _add_worker(args, &quotip1&quot)
    &#47&#47 after adding a connection, sending should work</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/e92e26cc7af3e494cbbd82721d787a1f34e10f09#diff-46388b1e5294ec63024b9aee270cfacdcb1ed75ef72f566884814cfd0f788106L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92288928</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: e92e26cc7af3e494cbbd82721d787a1f34e10f09</div><div id='time'> Time: 2022-04-21</div><div id='author'> Author: 44071807+JohannesMessner@users.noreply.github.com</div><div id='file'> File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_control_message_processing(0)</div><div id='n_method'> N Method Name: test_control_message_processing(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='n_file'> N File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 71</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    ds = FunctionDataset(_get_data)

    <a id="change">with pytest</a><a id="change">.raises(ValueError):
        </a>ds._append([1])
        ds._append([1])

    <a id="change">with </a><a id="change">pytest.raises(ValueError):
        </a>ds._append([1, 1])


def test_extend_nonContingousIds_valid():</code></pre><h3>After Change</h3><pre><code class='java'>
    ds._append(&quota&quot)
    ds._append(&quota&quot)

    <a id="change">assert</a>(ds._ids[0] == &quota&quot)
    assert(ds._ids[1] == &quota&quot)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lukashedegaard/datasetops/commit/515c8f61057190805faaf58edc5887be999de099#diff-ff53a5022df3fa633ef5013d119797a16fdf35064c5828d836cd9acf26be84d8L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92288929</div><div id='project'> Project Name: lukashedegaard/datasetops</div><div id='commit'> Commit Name: 515c8f61057190805faaf58edc5887be999de099</div><div id='time'> Time: 2020-03-13</div><div id='author'> Author: clegaard@outlook.com</div><div id='file'> File Name: tests/mldatasets/datasets/test_FunctionDataset.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_append_identicalIds_throwsValueError(0)</div><div id='n_method'> N Method Name: test_append_identicalIds_throwsValueError(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/mldatasets/datasets/test_FunctionDataset.py</div><div id='n_file'> N File Name: tests/mldatasets/datasets/test_FunctionDataset.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 33</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ],
)
def test_check_workspace_without_workspace(user):
    <a id="change">with </a><a id="change">pytest.raises(BadRequestError):
        </a>user.check_workspace("")

    <a id="change">with pytest</a><a id="change">.raises(BadRequestError):
        </a>user.check_workspace(None)
</code></pre><h3>After Change</h3><pre><code class='java'>
)
def test_check_workspace_without_workspace(user):
    assert user.check_workspace("") == user.username
    <a id="change">assert </a>user.check_workspace(None) == user.username
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/recognai/rubrix/commit/8551dc59d56bb5780af0ecef023e10c4f35d396d#diff-e114c2daa751b19afeb2d87d540eaeda5a78fd3d57a3d50a5fb7b014591f6736L118' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92288930</div><div id='project'> Project Name: recognai/rubrix</div><div id='commit'> Commit Name: 8551dc59d56bb5780af0ecef023e10c4f35d396d</div><div id='time'> Time: 2023-03-08</div><div id='author'> Author: francis@argilla.io</div><div id='file'> File Name: tests/server/security/test_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_check_workspace_without_workspace(1)</div><div id='n_method'> N Method Name: test_check_workspace_without_workspace(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/server/security/test_model.py</div><div id='n_file'> N File Name: tests/server/security/test_model.py</div><div id='m_start'> M Start Line: 119</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 120</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    cancel_event, handle_queue, runtime_thread = _create_runtime(args)

    &#47&#47 no connection registered yet
    <a id="change">with </a><a id="change">pytest.raises(RpcError):
        </a>GrpcConnectionPool.send_request_sync(
            _create_test_data_message(), f&quot{args.host}:{args.port}&quot
        )

    _add_worker(args, &quotip1&quot)
    &#47&#47 after adding a connection, sending should work
    result = GrpcConnectionPool.send_request_sync(
        _create_test_data_message(), f&quot{args.host}:{args.port}&quot
    )
    assert result

    _remove_worker(args, &quotip1&quot)
    &#47&#47 after removing the connection again, sending does not work anymore
    <a id="change">with pytest</a><a id="change">.raises(RpcError):
        </a>GrpcConnectionPool.send_request_sync(
            _create_test_data_message(), f&quot{args.host}:{args.port}&quot
        )
</code></pre><h3>After Change</h3><pre><code class='java'>
    resp = GrpcConnectionPool.send_request_sync(
        _create_test_data_message(), f&quot{args.host}:{args.port}&quot
    )
    <a id="change">assert </a>resp.status.code == resp.status.ERROR

    _add_worker(args, &quotip1&quot)
    &#47&#47 after adding a connection, sending should work</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/e92e26cc7af3e494cbbd82721d787a1f34e10f09#diff-46388b1e5294ec63024b9aee270cfacdcb1ed75ef72f566884814cfd0f788106L47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 92288934</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: e92e26cc7af3e494cbbd82721d787a1f34e10f09</div><div id='time'> Time: 2022-04-21</div><div id='author'> Author: 44071807+JohannesMessner@users.noreply.github.com</div><div id='file'> File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_control_message_processing(0)</div><div id='n_method'> N Method Name: test_control_message_processing(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='n_file'> N File Name: tests/unit/serve/runtimes/head/test_head_runtime.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 71</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 69</div><BR>