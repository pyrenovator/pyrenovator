<html><h3>Pattern ID :39550
</h3><img src='112633878.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def test_various_special_cases():
    &#47&#47 0d object ndarray
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    a = np.array(0, dtype=object)
    <a id="change">h5save(</a>f.name, a<a id="change">)</a>
    a_ = h5load(f.name)
    ok_(a == a_)
    &#47&#47 slice
    h5save(f.name, slice(2,5,3))
    sl<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    ok_(sl == slice(2,5,3))

def test_class_oldstyle():
    &#47&#47 AttributeError: CustomOld instance has no attribute &quot__reduce__&quot</code></pre><h3>After Change</h3><pre><code class='java'>
def test_various_special_cases(fname):
    &#47&#47 0d object ndarray
    a = np.array(0, dtype=object)
    <a id="change">h5save(fname</a>, a<a id="change">)</a>
    a_<a id="change"> = </a><a id="change">h5load(fname</a><a id="change">)</a>
    ok_(a == a_)
    &#47&#47 slice
    h5save(fname, slice(2,5,3))
    sl = h5load(fname)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633878</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_various_special_cases(1)</div><div id='n_method'> N Method Name: test_various_special_cases(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 136</div><div id='m_end'> M End Line: 143</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_various_special_cases():
    &#47&#47 0d object ndarray
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    a = np.array(0, dtype=object)
    <a id="change">h5save(</a>f.name, a<a id="change">)</a>
    a_ = h5load(f.name)
    ok_(a == a_)
    &#47&#47 slice
    h5save(f.name, slice(2,5,3))
    sl<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    ok_(sl == slice(2,5,3))

def test_class_oldstyle():
    &#47&#47 AttributeError: CustomOld instance has no attribute &quot__reduce__&quot</code></pre><h3>After Change</h3><pre><code class='java'>
def test_various_special_cases(fname):
    &#47&#47 0d object ndarray
    a = np.array(0, dtype=object)
    <a id="change">h5save(</a>fname, a<a id="change">)</a>
    a_ = h5load(fname)
    ok_(a == a_)
    &#47&#47 slice
    h5save(fname, slice(2,5,3))
    sl<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    ok_(sl == slice(2,5,3))


@with_tempfile()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633876</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_various_special_cases(1)</div><div id='n_method'> N Method Name: test_various_special_cases(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 136</div><div id='m_end'> M End Line: 143</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert_equal(bm_rl.get_space(), &quotboxy&quot)

def test_store_metaclass_types():
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    from mvpa2.kernels.base import Kernel
    allowedtype=Kernel
    <a id="change">h5save(</a>f.name, allowedtype<a id="change">)</a>
    lkrn<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    assert_equal(lkrn, Kernel)
    assert_equal(lkrn.__metaclass__, Kernel.__metaclass__)

def test_state_setter_getter():</code></pre><h3>After Change</h3><pre><code class='java'>
def test_store_metaclass_types(fname):
    from mvpa2.kernels.base import Kernel
    allowedtype=Kernel
    <a id="change">h5save(</a>fname, allowedtype<a id="change">)</a>
    lkrn<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    assert_equal(lkrn, Kernel)
    assert_equal(lkrn.__metaclass__, Kernel.__metaclass__)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL217' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633872</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_store_metaclass_types(1)</div><div id='n_method'> N Method Name: test_store_metaclass_types(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 218</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 223</div><div id='n_end'> N End Line: 227</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    obj = range(2)
    obj.append(HDFDemo())
    obj.append(obj)
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    <a id="change">h5save(</a>f.name, obj<a id="change">)</a>
    lobj<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    assert_equal(obj[:2], lobj[:2])
    assert_equal(type(obj[2]), type(lobj[2]))
    ok_(obj[3] is obj)
    ok_(lobj[3] is lobj)</code></pre><h3>After Change</h3><pre><code class='java'>
    obj = range(2)
    obj.append(HDFDemo())
    obj.append(obj)
    <a id="change">h5save(</a>fname, obj<a id="change">)</a>
    lobj<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    assert_equal(obj[:2], lobj[:2])
    assert_equal(type(obj[2]), type(lobj[2]))
    ok_(obj[3] is obj)
    ok_(lobj[3] is lobj)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633873</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_recursion(1)</div><div id='n_method'> N Method Name: test_recursion(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 178</div><div id='n_end'> N End Line: 183</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 make sure the presence of custom __setstate__, __getstate__ methods
    &#47&#47 is honored -- numpy&quots RNGs have it
    from numpy.random.mtrand import RandomState
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    r = RandomState()
    <a id="change">h5save(</a>f.name, r<a id="change">)</a>
    rl<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    rl_state = rl.get_state()
    for i, v in enumerate(r.get_state()):
        assert_array_equal(v, rl_state[i])
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 is honored -- numpy&quots RNGs have it
    from numpy.random.mtrand import RandomState
    r = RandomState()
    <a id="change">h5save(</a>fname, r<a id="change">)</a>
    rl<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    rl_state = rl.get_state()
    for i, v in enumerate(r.get_state()):
        assert_array_equal(v, rl_state[i])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL226' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633871</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_state_setter_getter(1)</div><div id='n_method'> N Method Name: test_state_setter_getter(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 230</div><div id='m_end'> M End Line: 233</div><div id='n_start'> N Start Line: 233</div><div id='n_end'> N End Line: 239</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 setting will only survive a svae/load cycle if the state is correctly
    &#47&#47 handle for custom reduce iplementations.
    bm = BoxcarMapper([0], 1, space=&quotboxy&quot)
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    <a id="change">h5save(</a>f.name, bm<a id="change">)</a>
    bm_rl<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    assert_equal(bm_rl.get_space(), &quotboxy&quot)

def test_store_metaclass_types():
    f = tempfile.NamedTemporaryFile()</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 setting will only survive a svae/load cycle if the state is correctly
    &#47&#47 handle for custom reduce iplementations.
    bm = BoxcarMapper([0], 1, space=&quotboxy&quot)
    <a id="change">h5save(</a>fname, bm<a id="change">)</a>
    bm_rl<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    assert_equal(bm_rl.get_space(), &quotboxy&quot)


@with_tempfile()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL207' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633868</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_state_cycle_with_custom_reduce(1)</div><div id='n_method'> N Method Name: test_state_cycle_with_custom_reduce(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 211</div><div id='m_end'> M End Line: 214</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 218</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ds = load_example_fmri_dataset()
    &#47&#47 add a mapper with a function ptr inside
    ds = ds.get_mapped(mean_sample())
    f<a id="change"> = </a><a id="change">tempfile.NamedTemporaryFile()</a>
    <a id="change">h5save(</a>f.name, ds<a id="change">)</a>
    ds_loaded<a id="change"> = </a><a id="change">h5load(</a>f.name<a id="change">)</a>
    fresh = load_example_fmri_dataset().O
    &#47&#47 check that the reconstruction function pointer in the FxMapper points
    &#47&#47 to the right one
    assert_array_equal(ds_loaded.a.mapper.forward(fresh),</code></pre><h3>After Change</h3><pre><code class='java'>
    ds = load_example_fmri_dataset()
    &#47&#47 add a mapper with a function ptr inside
    ds = ds.get_mapped(mean_sample())
    <a id="change">h5save(</a>fname, ds<a id="change">)</a>
    ds_loaded<a id="change"> = </a><a id="change">h5load(</a>fname<a id="change">)</a>
    fresh = load_example_fmri_dataset().O
    &#47&#47 check that the reconstruction function pointer in the FxMapper points
    &#47&#47 to the right one
    assert_array_equal(ds_loaded.a.mapper.forward(fresh),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/4d4c72a075fe7950f6ac04c139b3a9f493aae23e#diff-2c517d35dac88461ea97cf7611255065d8dfb09890fc3731f95cc9257256c0aeL120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 112633867</div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 4d4c72a075fe7950f6ac04c139b3a9f493aae23e</div><div id='time'> Time: 2017-11-02</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa2/tests/test_hdf5.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_function_ptrs(1)</div><div id='n_method'> N Method Name: test_function_ptrs(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mvpa2/tests/test_hdf5.py</div><div id='n_file'> N File Name: mvpa2/tests/test_hdf5.py</div><div id='m_start'> M Start Line: 124</div><div id='m_end'> M End Line: 127</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 125</div><BR>