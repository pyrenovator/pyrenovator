<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            ipts_jac_trace_approx.append(torch.mean(torch.stack(trace_jv)))  &#47&#47 Get averaged jacobian trace approximation
        outputs_jacobians_approx.append(ipts_jac_trace_approx)  &#47&#47 Get mean of jacobians of all model&quots outputs

    <a id="change">return _normalize_weights(</a>torch.mean(torch.Tensor(outputs_jacobians_approx), dim=0), all_outputs_indices, alpha<a id="change">)</a>


def _normalize_weights(jacobians_traces: torch.Tensor,
                       all_outputs_indices: List[int],</code></pre><h3>After Change</h3><pre><code class='java'>
        outputs_jacobians_approx.append(ipts_jac_trace_approx)

    mean_per_point = torch.mean(torch.Tensor(outputs_jacobians_approx), dim=0)  &#47&#47 Get mean of jacobians of all model&quots outputs
    <a id="change">if norm_weights</a>:
        <a id="change">return </a><a id="change">_normalize_weights(mean_per_point</a>, all_outputs_indices, alpha<a id="change">)</a>
    else:
        <a id="change">return mean_per_point</a>


def _normalize_weights(jacobians_traces: torch.Tensor,
                       all_outputs_indices: List[int],</code></pre>