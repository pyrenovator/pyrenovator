<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    pred_keys = [result[&quotpred_key&quot] for result in results[0]]
    ret = []
    for i, pred_key in enumerate(pred_keys):
      metrics_list<a id="change"> = </a><a id="change">[result[i][&quotmetrics&quot] for result in results]</a>
      costs = [self.get_cost(metrics_for_threshold, config)
               for metrics_for_threshold in metrics_list]
      best_idx = np.argmin(costs)
      &#47&#47 Divide best index by 100 to get threshold value between 0 and 1.
      single_threshold<a id="change"> = </a>best_idx / 100
      faceted_thresholds = {}
      for facet_key in config.facets:
        faceted_thresholds[facet_key] = {</code></pre><h3>After Change</h3><pre><code class='java'>
          types.MulticlassPreds, field_spec).parent:
        pred_keys.append(pred_key)

    indexed_outputs = <a id="change">{
        ex[&quotid&quot]: output for (ex, output) in zip(indexed_inputs, model_outputs)
    }</a>

    &#47&#47 Try all margins for thresholds from 0 to 1, by hundreths.
    margins_to_try = [
        self.threshold_to_margin(t) for t in np.linspace(0, 1, 101)]</code></pre>