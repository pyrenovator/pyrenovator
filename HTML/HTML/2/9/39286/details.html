<html><h3>Pattern ID :39286
</h3><img src='111521892.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_path: str = <a id="change">os.path.join(args["model_repository"]</a>, <a id="change">args["model_version"])</a>
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        &#47&#47 more variables in https://github.com/triton-inference-server/python_backend/blob/main/src/python.cc
        model_config = AutoConfig.from_pretrained(current_path)
        target_model = args["model_name"].replace("_generate", "_model")</code></pre><h3>After Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_path: str = <a id="change">str(Path(args["model_repository"]</a><a id="change">).parent.absolute())</a>
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        &#47&#47 more variables in https://github.com/triton-inference-server/python_backend/blob/main/src/python.cc
        model_config = AutoConfig.from_pretrained(current_path)
        target_model = args["model_name"].replace("_generate", "_model")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 8</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/els-rd/triton_transformers/commit/d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed#diff-1095676403e971e2db708ce3f2ce73c13efe03eb4a18440cf5b9999aa569d644L73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111521892</div><div id='project'> Project Name: els-rd/triton_transformers</div><div id='commit'> Commit Name: d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: pommedeterresautee@users.noreply.github.com</div><div id='file'> File Name: src/transformer_deploy/utils/generative_model.py</div><div id='m_class'> M Class Name: TritonPythonModel</div><div id='n_method'> N Class Name: TritonPythonModel</div><div id='m_method'> M Method Name: initialize(2)</div><div id='n_method'> N Method Name: initialize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/transformer_deploy/utils/generative_model.py</div><div id='n_file'> N File Name: src/transformer_deploy/utils/generative_model.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 73</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        :param args: arguments from Triton config file
        
        &#47&#47 more variables in https://github.com/triton-inference-server/python_backend/blob/main/src/python.cc
        path: str = <a id="change">os.path.join(args["model_repository"]</a>, <a id="change">args["model_version"])</a>
        self.tokenizer = AutoTokenizer.from_pretrained(path)

    def execute(self, requests) -&gt; "List[List[pb_utils.Tensor]]":
        </code></pre><h3>After Change</h3><pre><code class='java'>
        
        &#47&#47 more variables in https://github.com/triton-inference-server/python_backend/blob/main/src/python.cc

        path: str = <a id="change">str(Path(args["model_repository"]</a><a id="change">).parent.absolute())</a>
        self.tokenizer = AutoTokenizer.from_pretrained(path)

    def execute(self, requests) -&gt; "List[List[pb_utils.Tensor]]":
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/els-rd/triton_transformers/commit/d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed#diff-4de93947d9fb0855b75681cd2108a10c7c254c6830ac2210112f3224915744a2L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111521889</div><div id='project'> Project Name: els-rd/triton_transformers</div><div id='commit'> Commit Name: d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: pommedeterresautee@users.noreply.github.com</div><div id='file'> File Name: src/transformer_deploy/utils/python_tokenizer.py</div><div id='m_class'> M Class Name: TritonPythonModel</div><div id='n_method'> N Class Name: TritonPythonModel</div><div id='m_method'> M Method Name: initialize(2)</div><div id='n_method'> N Method Name: initialize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/transformer_deploy/utils/python_tokenizer.py</div><div id='n_file'> N File Name: src/transformer_deploy/utils/python_tokenizer.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 45</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_name: str = <a id="change">os.path.join(args["model_repository"]</a>, <a id="change">args["model_version"])</a>
        target_model = args["model_name"].replace("_inference", "_model")
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        self.model = BertForQuestionAnswering(model_name=current_name, model_path=target_model)
        self.model.to(device=self.device)</code></pre><h3>After Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_name: str = <a id="change">str(Path(args["model_repository"]</a><a id="change">).parent.absolute())</a>
        target_model = args["model_name"].replace("_inference", "_model")
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        self.model = BertForQuestionAnswering(model_name=current_name, model_path=target_model)
        self.model.to(device=self.device)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/els-rd/triton_transformers/commit/d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed#diff-49375e4b6e1bbcc2d00c8eca5f9a5fbd9887bd1264c3789066c9b5fa6b361bd6L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111521888</div><div id='project'> Project Name: els-rd/triton_transformers</div><div id='commit'> Commit Name: d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: pommedeterresautee@users.noreply.github.com</div><div id='file'> File Name: src/transformer_deploy/utils/question_answering.py</div><div id='m_class'> M Class Name: TritonPythonModel</div><div id='n_method'> N Class Name: TritonPythonModel</div><div id='m_method'> M Method Name: initialize(2)</div><div id='n_method'> N Method Name: initialize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/transformer_deploy/utils/question_answering.py</div><div id='n_file'> N File Name: src/transformer_deploy/utils/question_answering.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 91</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_name: str = <a id="change">os.path.join(args["model_repository"]</a>, <a id="change">args["model_version"])</a>
        target_model = args["model_name"].replace("_inference", "_model")
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        self.model = BertForTokenClassification(model_name=current_name, model_path=target_model)
        self.model.to(device=self.device)</code></pre><h3>After Change</h3><pre><code class='java'>
        Initialize the tokenization process
        :param args: arguments from Triton config file
        
        current_name: str = <a id="change">str(Path(args["model_repository"]</a><a id="change">).parent.absolute())</a>
        target_model = args["model_name"].replace("_inference", "_model")
        self.device = "cpu" if args["model_instance_kind"] == "CPU" else "cuda"
        self.model = BertForTokenClassification(model_name=current_name, model_path=target_model)
        self.model.to(device=self.device)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/els-rd/triton_transformers/commit/d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed#diff-feab2e648e912f7af3eb6d63b1ea0f7ef9939eab16451ca2b5deb859bba6e27bL83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111521890</div><div id='project'> Project Name: els-rd/triton_transformers</div><div id='commit'> Commit Name: d99e08e7aa6cde2ed79a89b81c6b3e1f7d5672ed</div><div id='time'> Time: 2022-08-05</div><div id='author'> Author: pommedeterresautee@users.noreply.github.com</div><div id='file'> File Name: src/transformer_deploy/utils/token_classifier.py</div><div id='m_class'> M Class Name: TritonPythonModel</div><div id='n_method'> N Class Name: TritonPythonModel</div><div id='m_method'> M Method Name: initialize(2)</div><div id='n_method'> N Method Name: initialize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/transformer_deploy/utils/token_classifier.py</div><div id='n_file'> N File Name: src/transformer_deploy/utils/token_classifier.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 88</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 88</div><BR>