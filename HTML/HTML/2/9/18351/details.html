<html><h3>Pattern ID :18351
</h3><img src='60058132.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

                for i, f in enumerate(docs):
                    if f.name == doc.name:
                        <a id="change">docs[i] = </a>f

                dataset_field_docs.save()
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            docs = parent_docs
            for k in keys:
                <a id="change">for </a>f in docs<a id="change">:
                    </a><a id="change">if k == f.name</a>:
                        field = f
                        docs = field.fields
                        <a id="change">break</a>

            field.fields<a id="change"> = </a>list(updated_docs.values())

        dataset_field_docs.save()
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852#diff-b4e92a2491c17c73053ef81d1f4550849068f80a672bdb4c89ec7fa52439f7b0L278' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60058132</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852</div><div id='time'> Time: 2022-04-04</div><div id='author'> Author: ben@voxel51.com</div><div id='file'> File Name: fiftyone/core/odm/mixins.py</div><div id='m_class'> M Class Name: DatasetMixin</div><div id='n_method'> N Class Name: DatasetMixin</div><div id='m_method'> M Method Name: merge_field_schema(4)</div><div id='n_method'> N Method Name: merge_field_schema(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fiftyone/core/odm/mixins.py</div><div id='n_file'> N File Name: fiftyone/core/odm/mixins.py</div><div id='m_start'> M Start Line: 278</div><div id='m_end'> M End Line: 320</div><div id='n_start'> N Start Line: 280</div><div id='n_end'> N End Line: 327</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            params[key] = get_node_attr(param_node)

    &#47&#47 Convert F.Conv2D arguments to nn.Conv2D arguments
    <a id="change">kwargs</a> = {}
    for index, key in {3: &quotstride&quot, 4: &quotpadding&quot, 5: &quotdilation&quot, 6: &quotgroups&quot}.items():
        if n_args &gt; index:
            <a id="change">kwargs[key] = </a>node.args[index]
        elif key in node.kwargs:
            kwargs[key] = node.kwargs[key]
</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 If weight or bias is from activation of another layer, use dynamic_conv2d
    use_dynamic_conv2d = False
    <a id="change">for </a>key, <a id="change">param</a> in params.items()<a id="change">:
        </a><a id="change">if param.op != &quotget_attr&quot</a>:
            use_dynamic_conv2d<a id="change"> = </a>True
            <a id="change">break</a>

    if use_dynamic_conv2d:
        module = elementwise_ops.DynamicConv2d(**kwargs)
    else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/8955d43ef86a32a36a94d23718ed8504dffe0705#diff-19754c1004a62cf144e512394ebfa2b635a2568cf62e36abebc4b16be8b471a8L124' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60058165</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: 8955d43ef86a32a36a94d23718ed8504dffe0705</div><div id='time'> Time: 2022-07-14</div><div id='author'> Author: quic_kyuykim@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/src/python/aimet_torch/model_preparer.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: conv2d_create_module(1)</div><div id='n_method'> N Method Name: conv2d_create_module(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingExtensions/torch/src/python/aimet_torch/model_preparer.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/src/python/aimet_torch/model_preparer.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 166</div><div id='n_start'> N Start Line: 151</div><div id='n_end'> N End Line: 185</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                setattr(cls, field_name, _schema[field_name])
                cls._declare_field(field, field_name)
                dataset_field_docs = cls._dataset_doc()[cls._fields_attr()]
                <a id="change">docs</a> = dataset_field_docs

                for k in keys:
                    for f in docs:
                        if k == f.name:
                            docs = f.fields
                            break

                for i, f in enumerate(docs):
                    if f.name == doc.name:
                        <a id="change">docs[i] = </a>f

                dataset_field_docs.save()
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            docs = parent_docs
            for k in keys:
                <a id="change">for </a><a id="change">f</a> in docs<a id="change">:
                    </a><a id="change">if k == f.name</a>:
                        field = f
                        docs<a id="change"> = </a>field.fields
                        <a id="change">break</a>

            field.fields = list(updated_docs.values())

        dataset_field_docs.save()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852#diff-b4e92a2491c17c73053ef81d1f4550849068f80a672bdb4c89ec7fa52439f7b0L257' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60058160</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: e9fbeb57e709499a6d69bd4c54fa77e5e8b1a852</div><div id='time'> Time: 2022-04-04</div><div id='author'> Author: ben@voxel51.com</div><div id='file'> File Name: fiftyone/core/odm/mixins.py</div><div id='m_class'> M Class Name: DatasetMixin</div><div id='n_method'> N Class Name: DatasetMixin</div><div id='m_method'> M Method Name: merge_field_schema(4)</div><div id='n_method'> N Method Name: merge_field_schema(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fiftyone/core/odm/mixins.py</div><div id='n_file'> N File Name: fiftyone/core/odm/mixins.py</div><div id='m_start'> M Start Line: 278</div><div id='m_end'> M End Line: 320</div><div id='n_start'> N Start Line: 280</div><div id='n_end'> N End Line: 327</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            super()._prepare()

        def _get_feed_dict(self, index):
            <a id="change">feed_dict</a> = super()._get_feed_dict(index)
            user_id, time = self.data[&quotuser_id&quot][index], self.data[&quottime&quot][index]
            history_item, history_time = feed_dict[&quothistory_items&quot], feed_dict[&quothistory_times&quot]

            &#47&#47 Collect information related to the target item:
            &#47&#47 - category id
            &#47&#47 - time intervals w.r.t. recent relational interactions (-1 if not existing)
            category_id = [self.item2cate[x] for x in feed_dict[&quotitem_id&quot]]
            relational_interval = list()
            for i, target_item in enumerate(feed_dict[&quotitem_id&quot]):
                interval = np.ones(self.model.relation_num, dtype=float) * -1
                &#47&#47 reserve the first dimension for the repeat consumption interval
                &#47&#47 for j in range(len(history_item))[::-1]:
                &#47&#47     if history_item[j] == target_item:
                &#47&#47         interval[0] = (time - history_time[j]) / self.model.time_scalar
                &#47&#47         break
                &#47&#47 the rest for relational intervals
                for r_idx in range(1, self.model.relation_num):
                    for j in range(len(history_item))[::-1]:
                        if (history_item[j], r_idx, target_item) in self.corpus.triplet_set:
                            interval[r_idx] = (time - history_time[j]) / self.model.time_scalar
                            break
                relational_interval.append(interval)

            <a id="change">feed_dict[&quotuser_id&quot] = </a>user_id
            feed_dict[&quotcategory_id&quot] = np.array(category_id)
            feed_dict[&quotrelational_interval&quot] = np.array(relational_interval, dtype=np.float32)
            return feed_dict</code></pre><h3>After Change</h3><pre><code class='java'>
            for i, target_item in enumerate(feed_dict[&quotitem_id&quot]):
                interval = np.ones(self.model.relation_num, dtype=float) * -1  &#47&#47 -1 if not existing
                &#47&#47 the first dimension for re-consuming time gaps
                <a id="change">for </a><a id="change">j</a> in range(len(history_item))[::-1]<a id="change">:
                    </a><a id="change">if history_item[j] == target_item</a>:
                        interval[0]<a id="change"> = </a>(time - history_time[j]) / self.model.time_scalar
                        <a id="change">break</a>
                &#47&#47 the rest for relational time intervals
                for r_idx in range(1, self.model.relation_num):
                    for j in range(len(history_item))[::-1]:
                        if (history_item[j], r_idx, target_item) in self.corpus.triplet_set:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuwangcy/rechorus/commit/921472ff6f3ec55f2df913475748fa3da1ea73b7#diff-e52f3ded4d3681645d921d8851a29c0fffd108d3cf602d41ef292c7e25a37c39L89' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60058175</div><div id='project'> Project Name: thuwangcy/rechorus</div><div id='commit'> Commit Name: 921472ff6f3ec55f2df913475748fa3da1ea73b7</div><div id='time'> Time: 2021-02-25</div><div id='author'> Author: THUwangcy@gmail.com</div><div id='file'> File Name: src/models/sequential/SLRCPlus.py</div><div id='m_class'> M Class Name: Dataset</div><div id='n_method'> N Class Name: Dataset</div><div id='m_method'> M Method Name: _get_feed_dict(2)</div><div id='n_method'> N Method Name: _get_feed_dict(2)</div><div id='m_parent_class'> M Parent Class: SequentialModel.Dataset</div><div id='n_parent_class'> N Parent Class: SequentialModel.Dataset</div><div id='m_file'> M File Name: src/models/sequential/SLRCPlus.py</div><div id='n_file'> N File Name: src/models/sequential/SLRCPlus.py</div><div id='m_start'> M Start Line: 90</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 107</div><BR>