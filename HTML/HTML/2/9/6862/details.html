<html><h3>Pattern ID :6862
</h3><img src='23245457.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Trim everything to the actual max length, to remove extra padding.
    max_tokens = tf.reduce_max(
        tf.reduce_sum(encoded_input["attention_mask"], axis=1))
    encoded_input<a id="change"> = </a><a id="change">{k: v[:, :max_tokens] for k, v in encoded_input.items()}</a>
    return encoded_input

  def _make_dataset(self, inputs: Iterable[JsonDict]) -&gt; tf.data.Dataset:
    Make a tf.data.Dataset from inputs in LIT format.</code></pre><h3>After Change</h3><pre><code class='java'>
        config=model_config)

  def _preprocess(self, inputs: Iterable[JsonDict]) -&gt; Dict[str, tf.Tensor]:
    <a id="change">if </a>self.config.text_b_name:
      segments = [(ex[self.config.text_a_name], ex[self.config.text_b_name])
                  for ex in inputs]
    else:
      segments = <a id="change">[ex[self.config.text_a_name] for ex in inputs]</a>
    encoded_input = self.tokenizer.batch_encode_plus(
        segments,
        return_tensors="tf",
        add_special_tokens=True,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/fae47012f76e181c16aee5a75350ed24a53fa00c#diff-e9738981ca69ee985ed55cb9983308dd610d201e39bb3fa101ff0d50851ec091L88' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23245457</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: fae47012f76e181c16aee5a75350ed24a53fa00c</div><div id='time'> Time: 2021-01-11</div><div id='author'> Author: iftenney@google.com</div><div id='file'> File Name: lit_nlp/examples/models/glue_models.py</div><div id='m_class'> M Class Name: GlueModel</div><div id='n_method'> N Class Name: GlueModel</div><div id='m_method'> M Method Name: _preprocess(2)</div><div id='n_method'> N Method Name: _preprocess(2)</div><div id='m_parent_class'> M Parent Class: lit_model.Model</div><div id='n_parent_class'> N Parent Class: lit_model.Model</div><div id='m_file'> M File Name: lit_nlp/examples/models/glue_models.py</div><div id='n_file'> N File Name: lit_nlp/examples/models/glue_models.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 93</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        save = torch.load(load_path)   
        save_model = save[&quotmodel&quot]                  
        model_dict = self.state_dict()
        state_dict<a id="change"> = </a><a id="change">{k:v for k, v in save_model.items()}</a>
        model_dict.update(state_dict)
        self.load_state_dict(model_dict)
        if not opt is None:
            opt.load_state_dict(save[&quotoptimizer&quot])</code></pre><h3>After Change</h3><pre><code class='java'>
            from apex import amp
            amp.load_state_dict(save[&quotamp&quot])
        print("NeRF Model loaded from &quot%s&quot"%(load_path))
        <a id="change">if </a>not other_stuff is None:
            return <a id="change">[save[k] for k in other_stuff]</a>

    def forward(self, pts:torch.Tensor, encoded_pt:torch.Tensor = None) -&gt; torch.Tensor:
        if not encoded_pt is None:
            encoded_x = encoded_pt.view(pts.shape[0], pts.shape[1], self.position_dims)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/enigmatisms/nerf/commit/6540170a567b47e4c9f65c604c10931ad96d9be5#diff-897a048870ecd0bb721718d01966c8294ffbea27ff0403dfc03cf778a1f4b0abL69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23245454</div><div id='project'> Project Name: enigmatisms/nerf</div><div id='commit'> Commit Name: 6540170a567b47e4c9f65c604c10931ad96d9be5</div><div id='time'> Time: 2022-07-10</div><div id='author'> Author: 984041003@qq.com</div><div id='file'> File Name: py/addtional.py</div><div id='m_class'> M Class Name: ProposalNetwork</div><div id='n_method'> N Class Name: ProposalNetwork</div><div id='m_method'> M Method Name: loadFromFile(4)</div><div id='n_method'> N Method Name: loadFromFile(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: py/addtional.py</div><div id='n_file'> N File Name: py/addtional.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        save = torch.load(load_path)   
        save_model = save[&quotmodel&quot]                  
        model_dict = self.state_dict()
        state_dict<a id="change"> = </a><a id="change">{k:v for k, v in save_model.items()}</a>
        model_dict.update(state_dict)
        self.load_state_dict(model_dict)
        if not opt is None:
            opt.load_state_dict(save[&quotoptimizer&quot])</code></pre><h3>After Change</h3><pre><code class='java'>
            from apex import amp
            amp.load_state_dict(save[&quotamp&quot])
        print("NeRF Model loaded from &quot%s&quot"%(load_path))
        <a id="change">if </a>not other_stuff is None:
            return <a id="change">[save[k] for k in other_stuff]</a>


    &#47&#47 for coarse network, input is obtained by sampling, sampling result is (ray_num, point_num, 9), (depth) (ray_num, point_num)
    def forward(self, pts:torch.Tensor, encoded_pt:torch.Tensor = None) -&gt; torch.Tensor:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/enigmatisms/nerf/commit/6540170a567b47e4c9f65c604c10931ad96d9be5#diff-39058aa66f7ed8b96557d25eec21ee323770aeca16d72128a7af59ee1bf4efaaL54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23245455</div><div id='project'> Project Name: enigmatisms/nerf</div><div id='commit'> Commit Name: 6540170a567b47e4c9f65c604c10931ad96d9be5</div><div id='time'> Time: 2022-07-10</div><div id='author'> Author: 984041003@qq.com</div><div id='file'> File Name: py/model.py</div><div id='m_class'> M Class Name: NeRF</div><div id='n_method'> N Class Name: NeRF</div><div id='m_method'> M Method Name: loadFromFile(5)</div><div id='n_method'> N Method Name: loadFromFile(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: py/model.py</div><div id='n_file'> N File Name: py/model.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 71</div><BR>