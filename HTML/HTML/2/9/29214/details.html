<html><h3>Pattern ID :29214
</h3><img src='85929566.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.filtered_classes[label][random_index, :, :].numpy() / 255, mode="L"
        )
        &#47&#47 get random angles of rotation
        rot_a<a id="change">, rot_b = </a><a id="change">torch.rand(2) * 90 - 45</a>
        x_a_rotate = transforms.functional.rotate(
            x_a, rot_a.item(), interpolation=InterpolationMode.BILINEAR
        )
        x_b_rotate = transforms.functional.rotate(</code></pre><h3>After Change</h3><pre><code class='java'>
        x_a = self.transform(x_a)
        &#47&#47 get random index of image with same class
        random_index = np.random.choice(self.filtered_nums[label])
        x_b = self.transform(<a id="change">self.dataset[random_index][0]</a>)
        if self.flatten:
            x_a = torch.flatten(x_a)
            x_b = torch.flatten(x_b)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/a7d5f6e5f6cc29059f96035a8dfad4eee058bf32#diff-40542ed57c07443e7a4f7e13c9b912da42d270fb937370e7cb3e010ca606cb06L180' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 85929566</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: a7d5f6e5f6cc29059f96035a8dfad4eee058bf32</div><div id='time'> Time: 2021-11-17</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/data/toy.py</div><div id='m_class'> M Class Name: Tangled_MNIST_Dataset</div><div id='n_method'> N Class Name: Tangled_MNIST_Dataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: cca_zoo/data/toy.py</div><div id='n_file'> N File Name: cca_zoo/data/toy.py</div><div id='m_start'> M Start Line: 180</div><div id='m_end'> M End Line: 202</div><div id='n_start'> N Start Line: 180</div><div id='n_end'> N End Line: 188</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 init random coords
    best_stress = float("Inf") * torch.ones(batch, device = device).type(dtype)
    best_3d_coords<a id="change"> = 2</a><a id="change">*torch.rand(batch, N, 3, device = device).type(dtype) - 1</a>
    &#47&#47 iterative updates:
    for i in range(iters):
        &#47&#47 compute distance matrix of coords and stress
        dist_mat = torch.cdist(best_3d_coords, best_3d_coords, p=2).clone()</code></pre><h3>After Change</h3><pre><code class='java'>
        if verbose &gt;= 2:
            print(&quotit: %d, stress %s&quot % (i, stress))
        &#47&#47 update metrics if relative improvement above tolerance
        if (<a id="change">his[-1]</a> - stress / dis).mean() &lt;= tol:
            if verbose:
                print(&quotbreaking at iteration %d with stress %s&quot % (i,
                                                                   stress / dis))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/alphafold2/commit/bc8963412e0b2798b1b8de533b52342543c7b8e0#diff-f9b2e05be1f80257f9a80ec7cc1290e3337a54fcc62aeee31b23a4cb827f12efL636' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 85929565</div><div id='project'> Project Name: lucidrains/alphafold2</div><div id='commit'> Commit Name: bc8963412e0b2798b1b8de533b52342543c7b8e0</div><div id='time'> Time: 2021-04-25</div><div id='author'> Author: ericalcaide1@gmail.com</div><div id='file'> File Name: alphafold2_pytorch/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mds_torch(6)</div><div id='n_method'> N Method Name: mds_torch(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: alphafold2_pytorch/utils.py</div><div id='n_file'> N File Name: alphafold2_pytorch/utils.py</div><div id='m_start'> M Start Line: 653</div><div id='m_end'> M End Line: 695</div><div id='n_start'> N Start Line: 649</div><div id='n_end'> N End Line: 692</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def __getitem__(self, idx):
        x_a = self.a_transform(self.data[idx].numpy() / 255)
        rot_a = <a id="change">torch.rand(1) * 90 - 45</a>
        x_a<a id="change"> = </a>transforms.functional.rotate(
            x_a, rot_a.item(), interpolation=InterpolationMode.BILINEAR
        )
        x_a = self.base_transform(x_a)</code></pre><h3>After Change</h3><pre><code class='java'>
        x_a = self.a_transform(x_a)
        &#47&#47 get random index of image with same class
        random_index = np.random.choice(self.filtered_nums[label])
        x_b = self.b_transform(<a id="change">self.dataset[random_index][0]</a>)
        if self.flatten:
            x_a = torch.flatten(x_a)
            x_b = torch.flatten(x_b)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/a7d5f6e5f6cc29059f96035a8dfad4eee058bf32#diff-40542ed57c07443e7a4f7e13c9b912da42d270fb937370e7cb3e010ca606cb06L122' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 85929564</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: a7d5f6e5f6cc29059f96035a8dfad4eee058bf32</div><div id='time'> Time: 2021-11-17</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/data/toy.py</div><div id='m_class'> M Class Name: Noisy_MNIST_Dataset</div><div id='n_method'> N Class Name: Noisy_MNIST_Dataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: cca_zoo/data/toy.py</div><div id='n_file'> N File Name: cca_zoo/data/toy.py</div><div id='m_start'> M Start Line: 123</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 136</div><BR>