<html><h3>Pattern ID :41752
</h3><img src='117055578.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 TODO: WHY NOT:
    &#47&#47 TODO: parameters = [param.data.view(-1) for param in model.parameters()]  &#47&#47 vectorize each model parameter
    &#47&#47 TODO: m_parameters = torch.cat(parameters)
    <a id="change">if cuda</a>:
        m_parameter<a id="change"> = </a><a id="change">torch.Tensor([0]).cuda()</a>

    else:
        m_parameter = torch.Tensor([0])
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    Squash model parameters or gradients into a single tensor.
    
    parameters<a id="change"> = </a>[param.data.view(-1) for param in model.parameters()
                  ]  &#47&#47 vectorize each model parameter
    m_parameters = torch.cat(parameters)

    <a id="change">if </a><a id="change">cuda</a>:
        m_parameters<a id="change"> = </a><a id="change">m_parameters.cuda()</a>

    return m_parameters

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/12925dd3ac83f8a9e1fbd4ed32fb3ec602217a77#diff-3f9658bd0898d77d8d23be9f67b244ede72a902b683904801797bba2c7b6793fL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117055578</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 12925dd3ac83f8a9e1fbd4ed32fb3ec602217a77</div><div id='time'> Time: 2021-04-09</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/utils/serialization.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: ravel_model_params(2)</div><div id='n_method'> N Method Name: ravel_model_params(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fedlab_core/utils/serialization.py</div><div id='n_file'> N File Name: fedlab_core/utils/serialization.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 15</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ner_score = self.get_ner_score(output_lstm)
        &#47&#47 print("hello0")
        &#47&#47 下面是使用CFR
        crf_model<a id="change"> = </a>CRF(self.num_token_type, batch_first=True)
        <a id="change">if USE_CUDA</a>:
            crf_model<a id="change"> = </a><a id="change">crf_model.cuda()</a>
        if not is_test:
            log_likelihood = crf_model(ner_score, data_item[&quottoken_type_list&quot].to(torch.int64),
                                       mask=data_item[&quotmask_tokens&quot])
            loss_ner = -log_likelihood</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 print("hello0")
        &#47&#47 下面是使用CFR
        
        <a id="change">if </a>USE_CUDA:
            self.crf_model<a id="change"> = </a><a id="change">self.crf_model.cuda()</a>
        if not is_test:
            log_likelihood = self.crf_model(ner_score, data_item[&quottoken_type_list&quot].to(torch.int64),
                                       mask=data_item[&quotmask_tokens&quot])
            loss_ner = -log_likelihood</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mangonihao/multiheadjointentityrelationextraction_simple/commit/3a8d46652627013ee302506e87489ee75fea8ae9#diff-11eebc726596bfe963ef6f272a32530164721eb5c2c8e1df5102b38a690f4f92L104' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117055583</div><div id='project'> Project Name: mangonihao/multiheadjointentityrelationextraction_simple</div><div id='commit'> Commit Name: 3a8d46652627013ee302506e87489ee75fea8ae9</div><div id='time'> Time: 2021-03-08</div><div id='author'> Author: 2075419247@qq.com</div><div id='file'> File Name: modules/joint_model.py</div><div id='m_class'> M Class Name: JointModel</div><div id='n_method'> N Class Name: JointModel</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: modules/joint_model.py</div><div id='n_file'> N File Name: modules/joint_model.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 130</div><div id='n_end'> N End Line: 165</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if pre_resampler is not None:
            x = pre_resampler(x)
        
        mixture<a id="change"> = </a>x

        <a id="change">if use_cuda</a>:
            mixture<a id="change"> = </a><a id="change">mixture.cuda()</a>

        with torch.no_grad():
            mixture = mixture.unsqueeze(dim=1)
</code></pre><h3>After Change</h3><pre><code class='java'>
        if pre_resampler is not None:
            x = pre_resampler(x)

        <a id="change">if </a><a id="change">use_cuda</a>:
            x<a id="change"> = </a><a id="change">x.cuda()</a>

        with torch.no_grad():
            mixture = x.view(1, 1, *x.size())
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/4da9b027efa0810791b500d4243ba17d40ef219a#diff-6ffdb9a8aa97cd4f250fde1c0271233b2eae4e4ebbe795c37d8899f37cabfad3L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117055581</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 4da9b027efa0810791b500d4243ba17d40ef219a</div><div id='time'> Time: 2021-09-24</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/tutorials/conv-tasnet/src/adhoc_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: separate_by_conv_tasnet(3)</div><div id='n_method'> N Method Name: separate_by_conv_tasnet(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/tutorials/conv-tasnet/src/adhoc_utils.py</div><div id='n_file'> N File Name: egs/tutorials/conv-tasnet/src/adhoc_utils.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 63</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 61</div><BR>