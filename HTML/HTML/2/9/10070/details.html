<html><h3>Pattern ID :10070
</h3><img src='35818122.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.best_mu_stds = None

        else:
            <a id="change">restore_model(self.model</a>, args.model_output_dir<a id="change">)</a>
        
    def train(self, args, data):     
        best_model = None
        wait = 0</code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):
        
        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]
        
        if args.train:
            self.best_mu_stds = None

        else:
            model_file<a id="change"> = </a><a id="change">os.path.join(</a>args.model_output_dir, <a id="change">&quotpytorch_model.bin&quot</a><a id="change">)</a>
            <a id="change">self.model.load_state_dict(</a><a id="change">torch.load(</a>model_file<a id="change">))</a>
            <a id="change">self.model.to(</a>self.device<a id="change">)</a>
        
    def train(self, args, data):     
        best_model = None
        wait = 0</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/thuiar/textoir/commit/97df425f7d7a2802842581e0a4f62efb9f4f77a6#diff-3667f773f61e476458b700245d5e1e17a21b936c99c216104845e28779171a88L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35818122</div><div id='project'> Project Name: thuiar/textoir</div><div id='commit'> Commit Name: 97df425f7d7a2802842581e0a4f62efb9f4f77a6</div><div id='time'> Time: 2021-06-04</div><div id='author'> Author: zhang-hl20@mails.tsinghua.edu.cn</div><div id='file'> File Name: open_intent_detection/methods/DOC/manager.py</div><div id='m_class'> M Class Name: DOCManager</div><div id='n_method'> N Class Name: DOCManager</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: open_intent_detection/methods/DOC/manager.py</div><div id='n_file'> N File Name: open_intent_detection/methods/DOC/manager.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):

        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]

        if args.train:

            self.best_features = None

        else:
            
            <a id="change">restore_model(</a>self.model, args.model_output_dir<a id="change">)</a>
            self.best_features = np.load(os.path.join(args.method_output_dir, &quotfeatures.npy&quot))

    def train(self, args, data):     
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):

        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]

        if args.train:

            self.best_features = None

        else:
            
            model_file<a id="change"> = </a><a id="change">os.path.join(</a>args.model_output_dir, <a id="change">&quotpytorch_model.bin&quot</a><a id="change">)</a>
            <a id="change">self.model.load_state_dict(</a><a id="change">torch.load(</a>model_file<a id="change">))</a>
            <a id="change">self.model.to(</a>self.device<a id="change">)</a>
            
            self.best_features = np.load(os.path.join(args.method_output_dir, &quotfeatures.npy&quot))

    def train(self, args, data):     </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuiar/textoir/commit/97df425f7d7a2802842581e0a4f62efb9f4f77a6#diff-616d05eaa62d552a944d2a449522f5328a8b4fe7433e20413f74ed7cae3d705fL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35818123</div><div id='project'> Project Name: thuiar/textoir</div><div id='commit'> Commit Name: 97df425f7d7a2802842581e0a4f62efb9f4f77a6</div><div id='time'> Time: 2021-06-04</div><div id='author'> Author: zhang-hl20@mails.tsinghua.edu.cn</div><div id='file'> File Name: open_intent_detection/methods/DeepUnk/manager.py</div><div id='m_class'> M Class Name: DeepUnkManager</div><div id='n_method'> N Class Name: DeepUnkManager</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: open_intent_detection/methods/DeepUnk/manager.py</div><div id='n_file'> N File Name: open_intent_detection/methods/DeepUnk/manager.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):

        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]
        
        if not args.train:
            <a id="change">restore_model(</a>self.model, args.model_output_dir<a id="change">)</a>


    def get_outputs(self, args, data, dataloader, get_feats = False):
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):

        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]
        
        if not args.train:

            model_file<a id="change"> = </a><a id="change">os.path.join(</a>args.model_output_dir, <a id="change">&quotpytorch_model.bin&quot</a><a id="change">)</a>
            <a id="change">self.model.load_state_dict(</a><a id="change">torch.load(</a>model_file<a id="change">))</a>
            <a id="change">self.model.to(</a>self.device<a id="change">)</a>


    def get_outputs(self, args, data, dataloader, get_feats = False):
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuiar/textoir/commit/97df425f7d7a2802842581e0a4f62efb9f4f77a6#diff-0e57f78ef6de499e28a6ada7f1a986bcd2b5b9a19a0852177c7dcb13c5eb7276L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35818124</div><div id='project'> Project Name: thuiar/textoir</div><div id='commit'> Commit Name: 97df425f7d7a2802842581e0a4f62efb9f4f77a6</div><div id='time'> Time: 2021-06-04</div><div id='author'> Author: zhang-hl20@mails.tsinghua.edu.cn</div><div id='file'> File Name: open_intent_detection/methods/MSP/manager.py</div><div id='m_class'> M Class Name: MSPManager</div><div id='n_method'> N Class Name: MSPManager</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: open_intent_detection/methods/MSP/manager.py</div><div id='n_file'> N File Name: open_intent_detection/methods/MSP/manager.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 39</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):
        
        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]

        if args.train:
            self.weibull_model = None
            
        else:
            <a id="change">restore_model(</a>self.model, args.model_output_dir<a id="change">)</a>


    def train(self, args, data):     
        </code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, args, data, model):
        
        <a id="change">self.model</a> = model.model 
        self.optimizer = model.optimizer
        self.device = model.device

        self.data = data 
        self.train_dataloader = data.dataloader.train_labeled_loader
        self.eval_dataloader = data.dataloader.eval_loader 
        self.test_dataloader = data.dataloader.test_loader

        self.loss_fct = loss_map[args.loss_fct]

        if args.train:
            self.weibull_model = None
            
        else:
            model_file<a id="change"> = </a><a id="change">os.path.join(</a>args.model_output_dir, <a id="change">&quotpytorch_model.bin&quot</a><a id="change">)</a>
            <a id="change">self.model.load_state_dict(</a><a id="change">torch.load(</a>model_file<a id="change">))</a>
            <a id="change">self.model.to(</a>self.device<a id="change">)</a>


    def train(self, args, data):     
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuiar/textoir/commit/97df425f7d7a2802842581e0a4f62efb9f4f77a6#diff-d8a7f9ea4be51df74fb46a2ccd22325ea045766395d13af14475ceac634bd9bbL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35818125</div><div id='project'> Project Name: thuiar/textoir</div><div id='commit'> Commit Name: 97df425f7d7a2802842581e0a4f62efb9f4f77a6</div><div id='time'> Time: 2021-06-04</div><div id='author'> Author: zhang-hl20@mails.tsinghua.edu.cn</div><div id='file'> File Name: open_intent_detection/methods/OpenMax/manager.py</div><div id='m_class'> M Class Name: OpenMaxManager</div><div id='n_method'> N Class Name: OpenMaxManager</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: open_intent_detection/methods/OpenMax/manager.py</div><div id='n_file'> N File Name: open_intent_detection/methods/OpenMax/manager.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 41</div><BR>