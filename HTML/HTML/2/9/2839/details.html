<html><h3>Pattern ID :2839
</h3><img src='11282717.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            A :obj:`list` of floats: Some similarity measure between `source_sentence` and each sentence from `sentences`.
        
        &#47&#47 IMPLEMENT_THIS
        <a id="change">raise </a>NotImplementedError(
            "Please implement SentenceSimilarityPipeline __call__ function"
        )
</code></pre><h3>After Change</h3><pre><code class='java'>
        source_sentence = inputs["source_sentence"]
        source_doc = self.model(source_sentence)

        <a id="change">similarities</a><a id="change"> = </a><a id="change">[]</a>
        <a id="change">for </a>sentence in inputs["sentences"]<a id="change">:
            </a>search_doc<a id="change"> = </a>self.model(sentence)
            <a id="change">similarities.append(</a>source_doc.similarity(search_doc)<a id="change">)</a>

        <a id="change">return similarities</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/huggingface_hub/commit/75e3d92b04b05c46924cfc334d12ae236a5d2a6a#diff-0c061c48ef67c2a2ae8be0ad302468e982fd1113ea028b44ce144e4668ff2d6eL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11282717</div><div id='project'> Project Name: huggingface/huggingface_hub</div><div id='commit'> Commit Name: 75e3d92b04b05c46924cfc334d12ae236a5d2a6a</div><div id='time'> Time: 2021-10-15</div><div id='author'> Author: 60084015+devpramod@users.noreply.github.com</div><div id='file'> File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='m_class'> M Class Name: SentenceSimilarityPipeline</div><div id='n_method'> N Class Name: SentenceSimilarityPipeline</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: Pipeline</div><div id='n_parent_class'> N Parent Class: Pipeline</div><div id='m_file'> M File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='n_file'> N File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def get_one_sample(self, rxn_smi: str) -&gt; List[sparse_fp]:
        indirectly set by self.set__get_one_sample_fp_func()
        <a id="change">raise </a>RuntimeError(&quotThis should never be executed!&quot)
        pass 

    def get_one_sample_count(self, rxn_smi: str) -&gt; List[sparse_fp]:</code></pre><h3>After Change</h3><pre><code class='java'>
                rxn_smi, self.fp_type, self.smi_to_fp_dict, self.mol_fps)
            pos_rxn_fp = make_rxn_fp(rcts_fp, prod_fp, self.rxn_type)

            <a id="change">neg_rxn_fps</a><a id="change"> = </a><a id="change">[]</a>
            <a id="change">for i</a> in range(self.num_neg)<a id="change">:
                </a>neg_rxn_fp = pos_rxn_fp.copy()
                rdm_bit_idxs = random.sample(range(pos_rxn_fp.shape[-1]), k=self.num_bits)
                for bit_idx in rdm_bit_idxs:
                    if self.fp_type == "count":
                        neg_rxn_fp[0, bit_idx] += self.increment_bits
                    elif self.fp_type == "bit":
                        neg_rxn_fp[0, bit_idx]<a id="change"> = </a>random.choice([-1, 0, 1])
                <a id="change">neg_rxn_fps.append(</a>neg_rxn_fp<a id="change">)</a>

            <a id="change">return </a>neg_rxn_fps
        else:
            raise ValueError(f"return_type {self.return_type} not supported for Bit Augmentor!")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/coleygroup/rxn-ebm/commit/98a06e3339135985ba0e940c6a448faf78cf95cd#diff-d653ce6759afb72ae1e3cb64bbb52d4b18c54b024d5388703bfe1981f96f824dL423' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11282712</div><div id='project'> Project Name: coleygroup/rxn-ebm</div><div id='commit'> Commit Name: 98a06e3339135985ba0e940c6a448faf78cf95cd</div><div id='time'> Time: 2020-12-14</div><div id='author'> Author: siriuself1103@gmail.com</div><div id='file'> File Name: rxnebm/data/augmentors.py</div><div id='m_class'> M Class Name: Bit</div><div id='n_method'> N Class Name: Bit</div><div id='m_method'> M Method Name: get_one_sample(2)</div><div id='n_method'> N Method Name: get_one_sample(2)</div><div id='m_parent_class'> M Parent Class: Augmentor</div><div id='n_parent_class'> N Parent Class: Augmentor</div><div id='m_file'> M File Name: rxnebm/data/augmentors.py</div><div id='n_file'> N File Name: rxnebm/data/augmentors.py</div><div id='m_start'> M Start Line: 425</div><div id='m_end'> M End Line: 426</div><div id='n_start'> N Start Line: 426</div><div id='n_end'> N End Line: 445</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        len is equal to the batch size, the second len is equal to the top_k and the third len is equal to the respective
        number of classes for the child FC.
        
        <a id="change">raise </a>NotImplementedError()


class FlowDictDecorator(nn.Module):</code></pre><h3>After Change</h3><pre><code class='java'>
        
        n = len(features)
        parent_indices = parent_flow_dict.activated.argsort(dim=1)[:, :self.top_k]
        <a id="change">res</a><a id="change"> = </a><a id="change">[]</a>
        <a id="change">for i</a> in range(n)<a id="change">:
            </a>res_for_parent<a id="change"> = </a>[]
            for parent_index in parent_indices[i]:
                res_for_parent.append(self.fcs[parent_index](features[i:i+1]))
            <a id="change">res.append(</a>res_for_parent<a id="change">)</a>
        <a id="change">return </a>res


class FlowDictDecorator(nn.Module):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hristo-vrigazov/dnn.cool/commit/3782b44e17cff0a1bc35747df9fe88b4bfac72c3#diff-53cd98664c00edca1974faacafa1f6aafcb5756b740af3a59b935bb20d6a1442L60' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11282708</div><div id='project'> Project Name: hristo-vrigazov/dnn.cool</div><div id='commit'> Commit Name: 3782b44e17cff0a1bc35747df9fe88b4bfac72c3</div><div id='time'> Time: 2020-06-28</div><div id='author'> Author: hvrigazov@gmail.com</div><div id='file'> File Name: dnn_cool/modules.py</div><div id='m_class'> M Class Name: NestedFC</div><div id='n_method'> N Class Name: NestedFC</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: dnn_cool/modules.py</div><div id='n_file'> N File Name: dnn_cool/modules.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 70</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    

    def encode(self, data, *args, **kwargs):
        <a id="change">raise </a>NotImplementedError

    
</code></pre><h3>After Change</h3><pre><code class='java'>
        vector times the number of the chroma frames
        
        from librosa.feature import chroma_cqt
        <a id="change">embeds</a><a id="change"> = </a><a id="change">[]</a>
        <a id="change">for chunk_data</a> in data<a id="change">:
            </a>chromagrams<a id="change"> = </a>chroma_cqt(y=chunk_data, sr=self.input_sample_rate, n_chroma=12, hop_length=self.hop_length)
            <a id="change">embeds.append(</a>chromagrams.flatten()<a id="change">)</a>
        <a id="change">return </a>embeds
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina-hub/commit/f2de5efe0366c1d2b429fffa4cb95c77b67a34b1#diff-32bec3c8a3217bcc7235b0f5030a72ac9441085a369f20037c0dc5fb4fe18ef7L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11282706</div><div id='project'> Project Name: jina-ai/jina-hub</div><div id='commit'> Commit Name: f2de5efe0366c1d2b429fffa4cb95c77b67a34b1</div><div id='time'> Time: 2020-08-26</div><div id='author'> Author: yue.liu@jina.ai</div><div id='file'> File Name: encoders/audio/ChromaPitchEncoder/__init__.py</div><div id='m_class'> M Class Name: ChromaPitchEncoder</div><div id='n_method'> N Class Name: ChromaPitchEncoder</div><div id='m_method'> M Method Name: encode(2)</div><div id='n_method'> N Method Name: encode(2)</div><div id='m_parent_class'> M Parent Class: BaseAudioEncoder</div><div id='n_parent_class'> N Parent Class: BaseEncoder</div><div id='m_file'> M File Name: encoders/audio/ChromaPitchEncoder/__init__.py</div><div id='n_file'> N File Name: encoders/audio/ChromaPitchEncoder/__init__.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 16</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 41</div><BR>