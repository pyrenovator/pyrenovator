<html><h3>Pattern ID :12978
</h3><img src='43760939.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])
def test_zip_0_gate(rate):
    &#47&#47 if gate is 0 ZIP is Poisson
    zip_ = ZeroInflatedPoisson(<a id="change">torch.zeros(1</a><a id="change">)</a>, torch.tensor(rate))
    pois = Poisson(torch.tensor(rate))
    s = pois.sample((20,))
    zip_prob<a id="change"> = </a><a id="change">zip_.log_prob(</a>s<a id="change">)</a>
    pois_prob = pois.log_prob(s)
    <a id="change">assert_close(</a>zip_prob, pois_prob<a id="change">, atol=1e-06)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre><h3>After Change</h3><pre><code class='java'>
def test_zip_0_gate(rate):
    &#47&#47 if gate is 0 ZIP is Poisson
    zip1 = ZeroInflatedPoisson(torch.tensor(rate), gate=torch.zeros(1))
    zip2<a id="change"> = </a>ZeroInflatedPoisson(torch.tensor(rate), gate_logits=torch.tensor(-99.9))
    pois = Poisson(torch.tensor(rate))
    s = pois.sample((20,))
    zip1_prob = zip1.log_prob(s)
    zip2_prob<a id="change"> = </a><a id="change">zip2.log_prob(</a>s<a id="change">)</a>
    pois_prob = pois.log_prob(s)
    assert_close(zip1_prob, pois_prob, atol=1e-05)
    <a id="change">assert_close(</a>zip2_prob, pois_prob<a id="change">, atol=1e-05)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/zalandoresearch/pytorch-ts/commit/7415a1525643181bda8ff5ee7eb3da74cea91d6c#diff-9a13148c6b27135df71012e27f95a03d81be2d0102afd42461eb08991a569f3cL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43760939</div><div id='project'> Project Name: zalandoresearch/pytorch-ts</div><div id='commit'> Commit Name: 7415a1525643181bda8ff5ee7eb3da74cea91d6c</div><div id='time'> Time: 2020-10-19</div><div id='author'> Author: kashif.rasul@gmail.com</div><div id='file'> File Name: test/distributions/test_zero_inflated.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_zip_0_gate(1)</div><div id='n_method'> N Method Name: test_zip_0_gate(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/distributions/test_zero_inflated.py</div><div id='n_file'> N File Name: test/distributions/test_zero_inflated.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])
def test_zip_0_gate(rate):
    &#47&#47 if gate is 0 ZIP is Poisson
    zip1<a id="change"> = </a>ZeroInflatedPoisson(torch.tensor(rate), gate=torch.zeros(1))
    zip2 = ZeroInflatedPoisson(torch.tensor(rate), gate_logits=torch.tensor(-99.9))
    pois = Poisson(torch.tensor(rate))
    s = pois.sample((20,))
    zip1_prob<a id="change"> = </a><a id="change">zip1.log_prob(</a>s<a id="change">)</a>
    zip2_prob = zip2.log_prob(s)
    pois_prob = pois.log_prob(s)
    <a id="change">assert_close(</a>zip1_prob, pois_prob<a id="change">, atol=1e-05)</a>
    assert_close(zip2_prob, pois_prob, atol=1e-05)


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])</code></pre><h3>After Change</h3><pre><code class='java'>
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])
def test_zip_0_gate(rate):
    &#47&#47 if gate is 0 ZIP is Poisson
    zip_ = ZeroInflatedPoisson(<a id="change">torch.zeros(1</a><a id="change">)</a>, torch.tensor(rate))
    pois = Poisson(torch.tensor(rate))
    s = pois.sample((20,))
    zip_prob<a id="change"> = </a><a id="change">zip_.log_prob(</a>s<a id="change">)</a>
    pois_prob = pois.log_prob(s)
    <a id="change">assert_close(</a>zip_prob, pois_prob<a id="change">, atol=1e-06)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("rate", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zalandoresearch/pytorch-ts/commit/149a35a7f83a17309636e668d7d591e295a2e732#diff-9a13148c6b27135df71012e27f95a03d81be2d0102afd42461eb08991a569f3cL37' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43760938</div><div id='project'> Project Name: zalandoresearch/pytorch-ts</div><div id='commit'> Commit Name: 149a35a7f83a17309636e668d7d591e295a2e732</div><div id='time'> Time: 2020-10-21</div><div id='author'> Author: kashif.rasul@gmail.com</div><div id='file'> File Name: test/distributions/test_zero_inflated.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_zip_0_gate(1)</div><div id='n_method'> N Method Name: test_zip_0_gate(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/distributions/test_zero_inflated.py</div><div id='n_file'> N File Name: test/distributions/test_zero_inflated.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
@pytest.mark.parametrize("probs", [0.1, 0.5, 0.9])
def test_zinb_0_gate(total_count, probs):
    &#47&#47 if gate is 0 ZINB is NegativeBinomial
    zinb1<a id="change"> = </a>ZeroInflatedNegativeBinomial(
        total_count=torch.tensor(total_count),
        gate=torch.zeros(1),
        probs=torch.tensor(probs),
    )
    zinb2 = ZeroInflatedNegativeBinomial(
        total_count=torch.tensor(total_count),
        gate_logits=torch.tensor(-99.9),
        probs=torch.tensor(probs),
    )
    neg_bin = NegativeBinomial(torch.tensor(total_count), probs=torch.tensor(probs))
    s = neg_bin.sample((20,))
    zinb1_prob<a id="change"> = </a><a id="change">zinb1.log_prob(</a>s<a id="change">)</a>
    zinb2_prob = zinb2.log_prob(s)
    neg_bin_prob = neg_bin.log_prob(s)
    <a id="change">assert_close(</a>zinb1_prob, neg_bin_prob<a id="change">, atol=1e-05)</a>
    assert_close(zinb2_prob, neg_bin_prob, atol=1e-05)


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])</code></pre><h3>After Change</h3><pre><code class='java'>
def test_zinb_0_gate(total_count, probs):
    &#47&#47 if gate is 0 ZINB is NegativeBinomial
    zinb_ = ZeroInflatedNegativeBinomial(
        <a id="change">torch.zeros(1</a><a id="change">)</a>, total_count=torch.tensor(total_count), probs=torch.tensor(probs)
    )
    neg_bin = NegativeBinomial(torch.tensor(total_count), probs=torch.tensor(probs))
    s = neg_bin.sample((20,))
    zinb_prob<a id="change"> = </a><a id="change">zinb_.log_prob(</a>s<a id="change">)</a>
    neg_bin_prob = neg_bin.log_prob(s)
    <a id="change">assert_close(</a>zinb_prob, neg_bin_prob<a id="change">, atol=1e-06)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("total_count", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zalandoresearch/pytorch-ts/commit/149a35a7f83a17309636e668d7d591e295a2e732#diff-9a13148c6b27135df71012e27f95a03d81be2d0102afd42461eb08991a569f3cL66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43760937</div><div id='project'> Project Name: zalandoresearch/pytorch-ts</div><div id='commit'> Commit Name: 149a35a7f83a17309636e668d7d591e295a2e732</div><div id='time'> Time: 2020-10-21</div><div id='author'> Author: kashif.rasul@gmail.com</div><div id='file'> File Name: test/distributions/test_zero_inflated.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_zinb_0_gate(2)</div><div id='n_method'> N Method Name: test_zinb_0_gate(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/distributions/test_zero_inflated.py</div><div id='n_file'> N File Name: test/distributions/test_zero_inflated.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 72</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_zinb_0_gate(total_count, probs):
    &#47&#47 if gate is 0 ZINB is NegativeBinomial
    zinb_ = ZeroInflatedNegativeBinomial(
        <a id="change">torch.zeros(1</a><a id="change">)</a>, total_count=torch.tensor(total_count), probs=torch.tensor(probs)
    )
    neg_bin = NegativeBinomial(torch.tensor(total_count), probs=torch.tensor(probs))
    s = neg_bin.sample((20,))
    zinb_prob<a id="change"> = </a><a id="change">zinb_.log_prob(</a>s<a id="change">)</a>
    neg_bin_prob = neg_bin.log_prob(s)
    <a id="change">assert_close(</a>zinb_prob, neg_bin_prob<a id="change">, atol=1e-06)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("total_count", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre><h3>After Change</h3><pre><code class='java'>
        gate=torch.zeros(1),
        probs=torch.tensor(probs),
    )
    zinb2<a id="change"> = </a>ZeroInflatedNegativeBinomial(
        total_count=torch.tensor(total_count),
        gate_logits=torch.tensor(-99.9),
        probs=torch.tensor(probs),
    )
    neg_bin = NegativeBinomial(torch.tensor(total_count), probs=torch.tensor(probs))
    s = neg_bin.sample((20,))
    zinb1_prob = zinb1.log_prob(s)
    zinb2_prob<a id="change"> = </a><a id="change">zinb2.log_prob(</a>s<a id="change">)</a>
    neg_bin_prob = neg_bin.log_prob(s)
    assert_close(zinb1_prob, neg_bin_prob, atol=1e-05)
    <a id="change">assert_close(</a>zinb2_prob, neg_bin_prob<a id="change">, atol=1e-05)</a>


@pytest.mark.parametrize("gate", [0.0, 0.25, 0.5, 0.75, 1.0])
@pytest.mark.parametrize("total_count", [0.1, 0.5, 0.9, 1.0, 1.1, 2.0, 10.0])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zalandoresearch/pytorch-ts/commit/7415a1525643181bda8ff5ee7eb3da74cea91d6c#diff-9a13148c6b27135df71012e27f95a03d81be2d0102afd42461eb08991a569f3cL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43760936</div><div id='project'> Project Name: zalandoresearch/pytorch-ts</div><div id='commit'> Commit Name: 7415a1525643181bda8ff5ee7eb3da74cea91d6c</div><div id='time'> Time: 2020-10-19</div><div id='author'> Author: kashif.rasul@gmail.com</div><div id='file'> File Name: test/distributions/test_zero_inflated.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_zinb_0_gate(2)</div><div id='n_method'> N Method Name: test_zinb_0_gate(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/distributions/test_zero_inflated.py</div><div id='n_file'> N File Name: test/distributions/test_zero_inflated.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 84</div><BR>