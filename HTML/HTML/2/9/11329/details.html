<html><h3>Pattern ID :11329
</h3><img src='38485579.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    try:
        for img in downscaled_images:
            <a id="change">if "_resized" in img</a>:
                result_path = (img.replace("_resized.png","") + 
                                "_"  + AI_model +
                                "_x" + str(upscale_factor) + 
                                ".png")
            else:
                result_path<a id="change"> = </a>(img<a id="change">.replace(".png","") + 
                            "_"  + </a><a id="change">AI_model +
                            </a>"_x" +<a id="change"> str(upscale_factor) + 
                            </a>".png")

            &#47&#47 1.5) calculating best slice number
            img_tmp = cv2.imread(img)</code></pre><h3>After Change</h3><pre><code class='java'>
            tiles = slice_image(img, num_tiles)

            &#47&#47 4) upscale each tiles
            <a id="change">with torch</a><a id="change">.no_grad():
                </a>for tile in tiles:
                    tile_adapted  = adapt_image_for_deeplearning(tile.filename)
                    tile_adapted  = tile_adapted.to(device, non_blocking = True)
                    tile_upscaled = model(tile_adapted)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/djdefrag/qualityscaler/commit/66cef0855cfbe41b27938a88cd316575f61f5507#diff-84f2858c19a17bc7224331c82c8eb4a2050df894e2e6f84183ecec96e1e47024L364' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38485579</div><div id='project'> Project Name: djdefrag/qualityscaler</div><div id='commit'> Commit Name: 66cef0855cfbe41b27938a88cd316575f61f5507</div><div id='time'> Time: 2022-05-04</div><div id='author'> Author: jjluca96@gmail.com</div><div id='file'> File Name: QualityScaler.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: torch_AI_upscale_multiple_images(4)</div><div id='n_method'> N Method Name: torch_AI_upscale_multiple_images(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: QualityScaler.py</div><div id='n_file'> N File Name: QualityScaler.py</div><div id='m_start'> M Start Line: 563</div><div id='m_end'> M End Line: 616</div><div id='n_start'> N Start Line: 364</div><div id='n_end'> N End Line: 414</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    try:
        for img in downscaled_images:
            <a id="change">if "_resized" in img</a>:
                result_path = (img.replace("_resized.png","") + 
                                "_"  + AI_model +
                                "_x" + str(upscale_factor) + 
                                ".png")
            else:
                result_path<a id="change"> = </a>(img.replace(".png","")<a id="change"> + 
                            </a>"_"  + AI_model +<a id="change">
                            "_x" + </a><a id="change">str(upscale_factor) + 
                            </a>".png")
            
            &#47&#47 1.5) calculating best slice number
            img_tmp = cv2.imread(img)</code></pre><h3>After Change</h3><pre><code class='java'>
            tiles = slice_image(img, num_tiles)

            &#47&#47 4) upscale each tiles
            <a id="change">with torch</a><a id="change">.no_grad():
                </a>for tile in tiles:
                    tile_adapted  = adapt_image_for_deeplearning(tile.filename)
                    tile_adapted  = tile_adapted.to(device, non_blocking = True)
                    tile_upscaled = model(tile_adapted)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/djdefrag/qualityscaler/commit/66cef0855cfbe41b27938a88cd316575f61f5507#diff-84f2858c19a17bc7224331c82c8eb4a2050df894e2e6f84183ecec96e1e47024L617' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38485515</div><div id='project'> Project Name: djdefrag/qualityscaler</div><div id='commit'> Commit Name: 66cef0855cfbe41b27938a88cd316575f61f5507</div><div id='time'> Time: 2022-05-04</div><div id='author'> Author: jjluca96@gmail.com</div><div id='file'> File Name: QualityScaler.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: torch_AI_upscale_video_frames(4)</div><div id='n_method'> N Method Name: torch_AI_upscale_video_frames(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: QualityScaler.py</div><div id='n_file'> N File Name: QualityScaler.py</div><div id='m_start'> M Start Line: 620</div><div id='m_end'> M End Line: 673</div><div id='n_start'> N Start Line: 416</div><div id='n_end'> N End Line: 465</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @staticmethod
    def forward(ctx, x1, x2, mask, f1, f2, x3=None, f3=None):
        <a id="change">if x3 is None</a>:
            inter1 = x2<a id="change"> + </a>f1(x2, x2, mask)
            inter2 = x1<a id="change"> + </a>f2(x3, inter1, mask)
            inter3<a id="change"> = </a>x2<a id="change"> + </a>f3(inter2)
            return inter2, inter3
        inter1 = x1 + f1(x2)
        inter2 = x2 + f2(inter1)</code></pre><h3>After Change</h3><pre><code class='java'>
        function, x1, x2, mask = args
        ctx.function = function
        ctx.mask = mask
        <a id="change">with torch</a><a id="change">.no_grad():
            </a>y1, y2 = ctx.function(x1, x2, mask)
        Reversible.outputs = (y1, y2)
        return y1, y2
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rick-mccoy/reformer-pytorch/commit/4da6d0fcb3ce7e616d2e8cc9195b5b21dfd431cb#diff-e3774f35f62b92bb1d53bca86868831d64cd22450484b63085497e63bb739c16L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 38485461</div><div id='project'> Project Name: rick-mccoy/reformer-pytorch</div><div id='commit'> Commit Name: 4da6d0fcb3ce7e616d2e8cc9195b5b21dfd431cb</div><div id='time'> Time: 2020-01-10</div><div id='author'> Author: rickmccoy3141@gmail.com</div><div id='file'> File Name: model/reversible.py</div><div id='m_class'> M Class Name: Reversible</div><div id='n_method'> N Class Name: Reversible</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(8)</div><div id='m_parent_class'> M Parent Class: Function</div><div id='n_parent_class'> N Parent Class: Function</div><div id='m_file'> M File Name: model/reversible.py</div><div id='n_file'> N File Name: model/reversible.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 20</div><BR>