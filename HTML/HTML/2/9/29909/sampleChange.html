<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    index = -1
    annotations = json.loads(nlp.annotate(all_text))

    <a id="change">for </a>x in annotations[&quotsentences&quot]<a id="change">:
        </a>for y in x[&quotentitymentions&quot]:
            token_length<a id="change"> = </a>len(y[&quottext&quot].split(&quot &quot))
            if y[&quotner&quot] == &quotDATE&quot:
                dates.append(y[&quottext&quot])
                index<a id="change"> = </a>len(all_text[:y[&quotcharacterOffsetEnd&quot]].split(&quot &quot))
                if token_length &lt; 2:
                    indices.append([index - 1])
                else:</code></pre><h3>After Change</h3><pre><code class='java'>
        text_len = len(text)
        index = len(all_text[:idx].strip().split(&quot &quot))

        replaced_text = &quot &quot.join(<a id="change">[&quot*&quot*len(i) for i in text.split(&quot &quot)]</a>)

        indices.append(list(range(index, index + token_length)))

        index += token_length
        all_text<a id="change"> = </a>all_text[:idx + text_len].replace(text, replaced_text) + all_text[idx + text_len:]

    for date_indices in indices:
        date = &quot&quot</code></pre>