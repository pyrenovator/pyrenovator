<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        _reserve_storage_percentage(self._topology, 0.40)

        sharding_options = self._enumerator.run(module=module, sharders=sharders)
        <a id="change">self._calculator.run(sharding_options=sharding_options)</a>
        sharding_plan = self._placer.run(sharding_options=sharding_options)
        self._stats.run(
            sharding_plan=sharding_plan,
            topology=self._topology,</code></pre><h3>After Change</h3><pre><code class='java'>

        for proposer in self._proposers:
            proposal = proposer.propose()
            <a id="change">while proposal</a><a id="change">:
                </a>self._num_proposals += 1
                try:
                    plan = self._partitioner.partition(
                        proposal=proposal,
                        storage_constraint=storage_constraint,
                    )
                    self._num_plans += 1
                    perf_rating<a id="change"> = </a>self._perf_model.rate(plan=plan)
                    <a id="change">if perf_rating &lt; best_perf_rating</a>:
                        best_perf_rating = perf_rating
                        best_plan<a id="change"> = </a>plan
                    proposer.feedback(
                        partitionable=True, plan=plan, perf_rating=perf_rating
                    )</code></pre>