<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Standard input procedure: check the inputs and obtain the
        &#47&#47 embeddings.
        embeddings<a id="change"> = </a><a id="change">super().run_query(</a>query, word_embedding,
                                       lost_vocabulary_threshold<a id="change">)</a>

        &#47&#47 if there is lost_vocabulary_threshold the allowed limit, return the
        &#47&#47  default value (nan)
        if embeddings is None:</code></pre><h3>After Change</h3><pre><code class='java'>
            the normalized distribution of probabilities.
        
        &#47&#47 checks the types of the provided arguments (only the defaults).
        <a id="change">super().run_query(</a>query, <a id="change">word_embedding_model</a>, lost_vocabulary_threshold,
                          preprocessor_options, secondary_preprocessor_options,
                          warn_not_found_words, *<a id="change">args, **kwargs)</a>

        &#47&#47 transforming query words into embeddings
        <a id="change">embeddings = word_embedding_model</a><a id="change">.get_embeddings_from_query(
            query=query,
            lost_vocabulary_threshold=lost_vocabulary_threshold,
            preprocessor_options=preprocessor_options,
            secondary_preprocessor_options=secondary_preprocessor_options,
            warn_not_found_words=warn_not_found_words)</a>

        &#47&#47 if there is any/some set has less words than the allowed limit,
        &#47&#47 return the default value (nan)
        if embeddings is None:
            return {
                &quotquery_name&quot: query.query_name_,
                &quotresult&quot: np.nan,
                &quotkl-divergence&quot: np.nan,
                &quotscore&quot: np.nan,
                &quotnegative_sentiment_probabilities&quot: {},
                &quotnegative_sentiment_distribution&quot: <a id="change">{}</a>
            }

        &#47&#47 get the target and attribute embeddings
        target_embeddings<a id="change"> = embeddings[&quottarget_embeddings&quot]</a>
        attribute_embeddings<a id="change"> = embeddings[&quotattribute_embeddings&quot]</a>
        &#47&#47 create the arrays that will contain the scores for each iteration
        calculated_divergences = []
        calculated_negative_sentiment_probabilities = []
        scores = []</code></pre>