<html><h3>Pattern ID :22419
</h3><img src='70936143.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        metric_function = accuracy
    elif metric_lower == "mse":
        metric_function = MSE_loss_agg
    elif <a id="change">(metric_name).lower() == "cel"</a>:
        metric_function<a id="change"> = </a>cel
    elif (metric_name).lower() == "classification_accuracy":
        metric_function = classification_accuracy
    elif (metric_lower == "hd95") or (metric_lower == "hausdorff95"):</code></pre><h3>After Change</h3><pre><code class='java'>
        metric_function = accuracy
    elif metric_lower == "mse":
        metric_function = MSE_loss_agg
    elif <a id="change">(metric_name).lower() == "cel"</a>:
        metric_function<a id="change"> = </a>cel
    elif <a id="change">(metric_name).lower() == "f1_score"</a>:
        metric_function<a id="change"> = </a>F1_score
    elif (metric_name).lower() == "classification_accuracy":
        metric_function = classification_accuracy
    elif (metric_lower == "hd95") or (metric_lower == "hausdorff95"):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 12</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/cbica/gandlf/commit/730749403c3eb38bcae28469b3cc94e23cc7dcc1#diff-e8e9d1aecc57d03523e91ca58b5b79b0c557a8abb59e324ba3a85e65db05a6d3L251' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70936143</div><div id='project'> Project Name: cbica/gandlf</div><div id='commit'> Commit Name: 730749403c3eb38bcae28469b3cc94e23cc7dcc1</div><div id='time'> Time: 2021-07-29</div><div id='author'> Author: orhunguley@gmail.com</div><div id='file'> File Name: GANDLF/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fetch_metric(1)</div><div id='n_method'> N Method Name: fetch_metric(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/metrics.py</div><div id='n_file'> N File Name: GANDLF/metrics.py</div><div id='m_start'> M Start Line: 251</div><div id='m_end'> M End Line: 270</div><div id='n_start'> N Start Line: 260</div><div id='n_end'> N End Line: 283</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    if (metric_name).lower() == "dice":
        metric_function = multi_class_dice
    elif <a id="change">(metric_name).lower() == "acc"</a>:
        metric_function<a id="change"> = </a>accuracy
    else:
        print("Metric was undefined")
        metric_function = identity</code></pre><h3>After Change</h3><pre><code class='java'>
    
    if (metric_name).lower() == "dice":
        metric_function = multi_class_dice
    elif <a id="change">(metric_name).lower() == "accuracy"</a>:
        metric_function<a id="change"> = </a>accuracy
    elif <a id="change">(metric_name).lower() == "mse"</a>:
        metric_function<a id="change"> = </a>MSE_loss_agg
    else:
        print("Metric was undefined")
        metric_function = identity</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mlcommons/gandlf/commit/a56d8dc681270fe2304ff205908f73ca552d5f79#diff-e8e9d1aecc57d03523e91ca58b5b79b0c557a8abb59e324ba3a85e65db05a6d3L123' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70936146</div><div id='project'> Project Name: mlcommons/gandlf</div><div id='commit'> Commit Name: a56d8dc681270fe2304ff205908f73ca552d5f79</div><div id='time'> Time: 2021-03-16</div><div id='author'> Author: sid.cre8er@gmail.com</div><div id='file'> File Name: GANDLF/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: fetch_metric(1)</div><div id='n_method'> N Method Name: fetch_metric(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/metrics.py</div><div id='n_file'> N File Name: GANDLF/metrics.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 140</div><div id='n_start'> N Start Line: 173</div><div id='n_end'> N End Line: 176</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def optimizer_lookup(params, optim_name, step_size, scheduler=None, warmup=0, max_iterations=10_000):
    if optim_name.lower() == "adam":
        optimizer = torch.optim.Adam(params, lr=step_size)
    elif <a id="change">optim_name.lower() == "adam-safe"</a>:
        optimizer<a id="change"> = </a>torch.optim.Adam(params, lr=step_size, betas=(0.5, 0.99), eps=1e-4)
    elif optim_name.lower() == "momgd":
        optimizer = torch.optim.SGD(params, lr=step_size, momentum=0.9, nesterov=True)
    elif optim_name.lower() == "gd":</code></pre><h3>After Change</h3><pre><code class='java'>
def optimizer_lookup(params, optim_name, step_size, scheduler=None, warmup=0, max_iterations=10_000):
    if optim_name.lower() == "adam":
        optimizer = torch.optim.Adam(params, lr=step_size)
    elif <a id="change">optim_name.lower() == "adam-safe"</a>:
        optimizer<a id="change"> = </a>torch.optim.Adam(params, lr=step_size, betas=(0.5, 0.99), eps=1e-4)
    elif <a id="change">optim_name.lower() == "bert-adam"</a>:
        &#47&#47 This is "almost" bert adam see more discussion at https://github.com/huggingface/transformers/issues/420
        optimizer<a id="change"> = </a>torch.optim.AdamW(params, lr=step_size, betas=(0.9, 0.999), eps=1e-6, weight_decay=0.01)
    elif optim_name.lower() == "momgd":
        optimizer = torch.optim.SGD(params, lr=step_size, momentum=0.9, nesterov=True)
    elif optim_name.lower() == "gd":</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jonasgeiping/breaching/commit/2c1e247941c9003e64ddebeb364230117d2d0f4d#diff-a20e7ac11858755363bb7023e80946db3cb582dae840860854bb2442ef6e7687L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70936147</div><div id='project'> Project Name: jonasgeiping/breaching</div><div id='commit'> Commit Name: 2c1e247941c9003e64ddebeb364230117d2d0f4d</div><div id='time'> Time: 2022-01-07</div><div id='author'> Author: jonas.geiping@googlemail.com</div><div id='file'> File Name: breaching/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: optimizer_lookup(6)</div><div id='n_method'> N Method Name: optimizer_lookup(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: breaching/common.py</div><div id='n_file'> N File Name: breaching/common.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 11</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 14</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def optimizer_lookup(params, optim_name, step_size, scheduler=None, warmup=0, max_iterations=10_000):
    <a id="change">if </a><a id="change">optim_name.lower() == "adam"</a>:
        optimizer<a id="change"> = </a>torch.optim.Adam(params, lr=step_size)
    elif optim_name.lower() == "momgd":
        optimizer = torch.optim.SGD(params, lr=step_size, momentum=0.9, nesterov=True)
    elif optim_name.lower() == "gd":</code></pre><h3>After Change</h3><pre><code class='java'>


def optimizer_lookup(params, optim_name, step_size, scheduler=None, warmup=0, max_iterations=10_000):
    <a id="change">if </a><a id="change">optim_name.lower() == "adam"</a>:
        optimizer<a id="change"> = </a>torch.optim.Adam(params, lr=step_size)
    elif <a id="change">optim_name.lower() == "adam-safe"</a>:
        optimizer<a id="change"> = </a>torch.optim.Adam(params, lr=step_size, betas=(0.5, 0.99), eps=1e-4)
    elif optim_name.lower() == "momgd":
        optimizer = torch.optim.SGD(params, lr=step_size, momentum=0.9, nesterov=True)
    elif optim_name.lower() == "gd":</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jonasgeiping/breaching/commit/a7c5739ff46e2e55212bfa1601c16979c03b27b0#diff-a20e7ac11858755363bb7023e80946db3cb582dae840860854bb2442ef6e7687L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70936144</div><div id='project'> Project Name: jonasgeiping/breaching</div><div id='commit'> Commit Name: a7c5739ff46e2e55212bfa1601c16979c03b27b0</div><div id='time'> Time: 2021-12-14</div><div id='author'> Author: jonas.geiping@googlemail.com</div><div id='file'> File Name: breaching/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: optimizer_lookup(6)</div><div id='n_method'> N Method Name: optimizer_lookup(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: breaching/common.py</div><div id='n_file'> N File Name: breaching/common.py</div><div id='m_start'> M Start Line: 8</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 21</div><BR>