<html><h3>Pattern ID :2727
</h3><img src='11018203.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.eps = eps

        self.affine = affine
        <a id="change">if self.affine</a>:
            self.weight<a id="change"> = </a><a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">)</a>
            self.bias<a id="change"> = </a><a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a>

    def execute(self, x):
        N = x.shape[0]
        C = self.num_channels</code></pre><h3>After Change</h3><pre><code class='java'>
        self.eps = eps

        self.affine = affine
        self.weight = <a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">) if affine</a><a id="change"> else </a>1.0
        self.bias = <a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a><a id="change"> if affine</a><a id="change"> else </a>0.0

    def execute(self, x):
        N = x.shape[0]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/79579b4a30434d43d79821469eb5501bf5a5063e#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L428' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11018203</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 79579b4a30434d43d79821469eb5501bf5a5063e</div><div id='time'> Time: 2020-11-25</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: GroupNorm</div><div id='n_method'> N Class Name: GroupNorm</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 473</div><div id='m_end'> M End Line: 478</div><div id='n_start'> N Start Line: 428</div><div id='n_end'> N End Line: 429</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.num_channels = num_channels
        self.eps = eps

        <a id="change">self.affine</a> = affine
        <a id="change">if self.affine</a>:
            self.weight<a id="change"> = </a><a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">)</a>
            self.bias<a id="change"> = </a><a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a>

    def execute(self, x):
        N = x.shape[0]
        C = self.num_channels</code></pre><h3>After Change</h3><pre><code class='java'>
        self.eps = eps

        self.affine = affine
        self.weight = <a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">) if affine</a><a id="change"> else </a>1.0
        self.bias = <a id="change">init.constant(</a>(num_channels,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a><a id="change"> if affine</a><a id="change"> else </a>0.0

    def execute(self, x):
        N = x.shape[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/79579b4a30434d43d79821469eb5501bf5a5063e#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L468' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11018204</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 79579b4a30434d43d79821469eb5501bf5a5063e</div><div id='time'> Time: 2020-11-25</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: GroupNorm</div><div id='n_method'> N Class Name: GroupNorm</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 473</div><div id='m_end'> M End Line: 478</div><div id='n_start'> N Start Line: 428</div><div id='n_end'> N End Line: 429</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            normalized_shape = (normalized_shape,)
        self.normalized_shape = tuple(normalized_shape)
        self.eps = eps
        <a id="change">self.elementwise_affine</a> = elementwise_affine
        <a id="change">if self.elementwise_affine</a>:
            self.weight<a id="change"> = </a><a id="change">init.constant(</a>normalized_shape, <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">)</a>
            self.bias<a id="change"> = </a><a id="change">init.constant(</a>normalized_shape, <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a>

    def execute(self,x):
        dims = [-i for i in range(len(self.normalized_shape), 0, -1)]
        mean = jt.mean(x,dims=dims,keepdims=1)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.normalized_shape = tuple(normalized_shape)
        self.eps = eps
        self.elementwise_affine = elementwise_affine
        self.weight = <a id="change">init.constant(</a>normalized_shape, <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">) if elementwise_affine</a><a id="change"> else </a>1.0
        self.bias = <a id="change">init.constant(</a>normalized_shape, <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a><a id="change"> if elementwise_affine</a><a id="change"> else </a>0.0

    def execute(self, x):
        dims = [-i for i in range(len(self.normalized_shape), 0, -1)]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/79579b4a30434d43d79821469eb5501bf5a5063e#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L445' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11018205</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 79579b4a30434d43d79821469eb5501bf5a5063e</div><div id='time'> Time: 2020-11-25</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: LayerNorm</div><div id='n_method'> N Class Name: LayerNorm</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 446</div><div id='m_end'> M End Line: 456</div><div id='n_start'> N Start Line: 402</div><div id='n_end'> N End Line: 407</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.eps = eps
        self.momentum = momentum
        self.affine = affine
        <a id="change">if affine</a>:
            self.weight<a id="change"> = </a><a id="change">init.constant(</a>(num_features,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">)</a>
            self.bias<a id="change"> = </a><a id="change">init.constant(</a>(num_features,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a>
        self.running_mean = init.constant((num_features,), "float32", 0.0).stop_grad()
        self.running_var = init.constant((num_features,), "float32", 1.0).stop_grad()

    def execute(self, x):</code></pre><h3>After Change</h3><pre><code class='java'>
        self.eps = eps
        self.momentum = momentum
        self.affine = affine
        self.weight = <a id="change">init.constant(</a>(num_features,), <a id="change">"float32"</a>, <a id="change">1.0</a><a id="change">) if affine</a><a id="change"> else </a>1.0
        self.bias = <a id="change">init.constant(</a>(num_features,), <a id="change">"float32"</a>, <a id="change">0.0</a><a id="change">)</a><a id="change"> if affine</a><a id="change"> else </a>0.0
        self.running_mean = init.constant((num_features,), "float32", 0.0).stop_grad()
        self.running_var = init.constant((num_features,), "float32", 1.0).stop_grad()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/79579b4a30434d43d79821469eb5501bf5a5063e#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L336' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11018206</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 79579b4a30434d43d79821469eb5501bf5a5063e</div><div id='time'> Time: 2020-11-25</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: BatchNorm</div><div id='n_method'> N Class Name: BatchNorm</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 343</div><div id='m_end'> M End Line: 346</div><div id='n_start'> N Start Line: 343</div><div id='n_end'> N End Line: 344</div><BR>