<html><h3>Pattern ID :31047
</h3><img src='91147407.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    with_parts = casted.map(lambda doc: _add_full_part(doc))
    assert "entities" in with_parts.column_names
    assert "parts" in with_parts.column_names
    doc0<a id="change"> = </a><a id="change">with_parts[0]</a>
    assert set(doc0) == {"entities", "parts"}
    assert doc0.entities == conll2003_test_split[0].entities

    part0 = doc0.parts[0]</code></pre><h3>After Change</h3><pre><code class='java'>

def test_cast_document_type(dataset_train):
    casted = dataset_train.cast_document_type(CoNLL2002WithPartsDocument)
    doc0_orig<a id="change"> = </a><a id="change">_get_doc(</a>dataset_train<a id="change">)</a>
    with_parts = casted.map(lambda doc: _add_full_part(doc))
    assert "entities" in with_parts.column_names
    assert "parts" in with_parts.column_names
    doc0 = _get_doc(with_parts)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/christophalt/pytorch-ie/commit/acfe5ef1a4a600eab2e01e310b9bdb19b33045e8#diff-656acad975f80ac2d616b13aad9e6f53fb9a2857462aeb7e4c73b85f4aa8ffbcL64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91147407</div><div id='project'> Project Name: christophalt/pytorch-ie</div><div id='commit'> Commit Name: acfe5ef1a4a600eab2e01e310b9bdb19b33045e8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: ArneBinder@users.noreply.github.com</div><div id='file'> File Name: tests/data/test_dataset_casting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_cast_document_type(1)</div><div id='n_method'> N Method Name: test_cast_document_type(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataset_casting.py</div><div id='n_file'> N File Name: tests/data/test_dataset_casting.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 just add "parts" to have another field to swap "entities" with
    casted = conll2003_test_split.cast_document_type(CoNLL2002WithPartsDocument)
    with_parts = casted.map(lambda doc: _add_full_part(doc))
    doc_with_parts<a id="change"> = </a><a id="change">with_parts[0]</a>

    swapped = with_parts.cast_document_type(
        DocumentWithPartsAndEntitiesSwapped,
        field_mapping={"entities": "parts", "parts": "entities"},</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 just add "parts" to have another field to swap "entities" with
    casted = dataset_train.cast_document_type(CoNLL2002WithPartsDocument)
    with_parts = casted.map(lambda doc: _add_full_part(doc))
    doc_with_parts<a id="change"> = </a><a id="change">_get_doc(</a>with_parts<a id="change">)</a>

    swapped = with_parts.cast_document_type(
        DocumentWithPartsAndEntitiesSwapped,
        field_mapping={"entities": "parts", "parts": "entities"},</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/christophalt/pytorch-ie/commit/acfe5ef1a4a600eab2e01e310b9bdb19b33045e8#diff-656acad975f80ac2d616b13aad9e6f53fb9a2857462aeb7e4c73b85f4aa8ffbcL172' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91147405</div><div id='project'> Project Name: christophalt/pytorch-ie</div><div id='commit'> Commit Name: acfe5ef1a4a600eab2e01e310b9bdb19b33045e8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: ArneBinder@users.noreply.github.com</div><div id='file'> File Name: tests/data/test_dataset_casting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_cast_document_type_swap_fields(1)</div><div id='n_method'> N Method Name: test_cast_document_type_swap_fields(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataset_casting.py</div><div id='n_file'> N File Name: tests/data/test_dataset_casting.py</div><div id='m_start'> M Start Line: 174</div><div id='m_end'> M End Line: 184</div><div id='n_start'> N Start Line: 186</div><div id='n_end'> N End Line: 202</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert "parts" in casted.column_names
    assert "ents" in casted.column_names

    doc_casted<a id="change"> = </a><a id="change">casted[0]</a>
    assert set(doc_casted) == {"parts", "ents"}

    with pytest.raises(
        ValueError,</code></pre><h3>After Change</h3><pre><code class='java'>
    assert "parts" in casted.column_names
    assert "ents" in casted.column_names

    doc_casted<a id="change"> = </a><a id="change">_get_doc(</a>casted<a id="change">)</a>
    assert set(doc_casted) == {"parts", "ents"}

    with pytest.raises(
        ValueError,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/christophalt/pytorch-ie/commit/acfe5ef1a4a600eab2e01e310b9bdb19b33045e8#diff-656acad975f80ac2d616b13aad9e6f53fb9a2857462aeb7e4c73b85f4aa8ffbcL135' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91147402</div><div id='project'> Project Name: christophalt/pytorch-ie</div><div id='commit'> Commit Name: acfe5ef1a4a600eab2e01e310b9bdb19b33045e8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: ArneBinder@users.noreply.github.com</div><div id='file'> File Name: tests/data/test_dataset_casting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_cast_document_type_recover_field_wrong(1)</div><div id='n_method'> N Method Name: test_cast_document_type_recover_field_wrong(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataset_casting.py</div><div id='n_file'> N File Name: tests/data/test_dataset_casting.py</div><div id='m_start'> M Start Line: 136</div><div id='m_end'> M End Line: 143</div><div id='n_start'> N Start Line: 149</div><div id='n_end'> N End Line: 155</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    with_parts = casted.map(lambda doc: _add_full_part(doc))
    assert "ents" in with_parts.column_names
    assert "parts" in with_parts.column_names
    doc0<a id="change"> = </a><a id="change">with_parts[0]</a>
    assert set(doc0) == {"ents", "parts"}
    assert doc0.ents == conll2003_test_split[0].entities

    part0 = doc0.parts[0]</code></pre><h3>After Change</h3><pre><code class='java'>


def test_cast_document_type_rename_field(dataset_train):
    doc0_orig<a id="change"> = </a><a id="change">_get_doc(</a>dataset_train<a id="change">)</a>
    casted = dataset_train.cast_document_type(
        DocumentWithEntsAndParts, field_mapping={"entities": "ents"}
    )
    with_parts = casted.map(lambda doc: _add_full_part(doc))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/christophalt/pytorch-ie/commit/acfe5ef1a4a600eab2e01e310b9bdb19b33045e8#diff-656acad975f80ac2d616b13aad9e6f53fb9a2857462aeb7e4c73b85f4aa8ffbcL155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91147417</div><div id='project'> Project Name: christophalt/pytorch-ie</div><div id='commit'> Commit Name: acfe5ef1a4a600eab2e01e310b9bdb19b33045e8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: ArneBinder@users.noreply.github.com</div><div id='file'> File Name: tests/data/test_dataset_casting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_cast_document_type_rename_field(1)</div><div id='n_method'> N Method Name: test_cast_document_type_rename_field(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataset_casting.py</div><div id='n_file'> N File Name: tests/data/test_dataset_casting.py</div><div id='m_start'> M Start Line: 159</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 175</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    with_partitions = casted.map(lambda doc: _add_full_part(doc))
    assert "entities" not in with_partitions.column_names
    assert "parts" in with_partitions.column_names
    doc0<a id="change"> = </a><a id="change">with_partitions[0]</a>
    assert set(doc0) == {"parts"}

    part0 = doc0.parts[0]
    assert isinstance(part0, Span)</code></pre><h3>After Change</h3><pre><code class='java'>
    with_partitions = casted.map(lambda doc: _add_full_part(doc))
    assert "entities" not in with_partitions.column_names
    assert "parts" in with_partitions.column_names
    doc0<a id="change"> = </a><a id="change">_get_doc(</a>with_partitions<a id="change">)</a>
    assert set(doc0) == {"parts"}

    part0 = doc0.parts[0]
    assert isinstance(part0, Span)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/christophalt/pytorch-ie/commit/acfe5ef1a4a600eab2e01e310b9bdb19b33045e8#diff-656acad975f80ac2d616b13aad9e6f53fb9a2857462aeb7e4c73b85f4aa8ffbcL77' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91147410</div><div id='project'> Project Name: christophalt/pytorch-ie</div><div id='commit'> Commit Name: acfe5ef1a4a600eab2e01e310b9bdb19b33045e8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: ArneBinder@users.noreply.github.com</div><div id='file'> File Name: tests/data/test_dataset_casting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_cast_document_type_remove_field(1)</div><div id='n_method'> N Method Name: test_cast_document_type_remove_field(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/data/test_dataset_casting.py</div><div id='n_file'> N File Name: tests/data/test_dataset_casting.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 93</div><div id='n_start'> N Start Line: 90</div><div id='n_end'> N End Line: 106</div><BR>