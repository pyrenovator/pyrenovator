<html><h3>Pattern ID :5719
</h3><img src='20052592.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 after merging, proposals will be rescaled to the original image size
        merged_proposals = [
            merge_aug_proposals(proposals, img_meta, rpn_test_cfg)
            for proposals, img_meta in <a id="change">zip(</a>aug_proposals, img_metas<a id="change">)</a>
        ]
        return merged_proposals

</code></pre><h3>After Change</h3><pre><code class='java'>
        aug_img_metas = []
        for i in range(imgs_per_gpu):
            aug_img_meta = []
            for j in <a id="change">range(len(img_metas</a><a id="change">)</a><a id="change">)</a>:
                aug_img_meta.append(<a id="change">img_metas[j]</a>[i])
            aug_img_metas.append(aug_img_meta)
        &#47&#47 after merging, proposals will be rescaled to the original image size
        merged_proposals = [</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/f18561b57802ae158634765ef1a85c9972bc6af8#diff-2edb8c7e9c6fee08d6eb4f04153b3d92064d83d27799017ddf84c6efe896b405L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20052592</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: f18561b57802ae158634765ef1a85c9972bc6af8</div><div id='time'> Time: 2019-06-12</div><div id='author'> Author: 40189936+sty-yyj@users.noreply.github.com</div><div id='file'> File Name: mmdet/models/detectors/test_mixins.py</div><div id='m_class'> M Class Name: RPNTestMixin</div><div id='n_method'> N Class Name: RPNTestMixin</div><div id='m_method'> M Method Name: aug_test_rpn(4)</div><div id='n_method'> N Method Name: aug_test_rpn(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: mmdet/models/detectors/test_mixins.py</div><div id='n_file'> N File Name: mmdet/models/detectors/test_mixins.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        torch.arange(shape[2], dtype=torch.float32, device=device)]
    )

    for idx,x,y,var_x,var_y in <a id="change">zip(</a>indices, center_x, center_y, var_w, var_h<a id="change">)</a>:
        radius_sq = (x - grid_x)**2/(2*var_x) + (y - grid_y)**2/(2*var_y)
        gaussian_kernel = torch.exp(-radius_sq)
        gaussian_kernel[y, x] = 1           &#47&#47 force the center to be 1</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    &#47&#47 iterate over the detections
    for d in <a id="change">range(len(</a>centers<a id="change">)</a><a id="change">)</a>:
        x = <a id="change">centers[d]</a>[0]
        y = centers[d][1]
        idx = indices[d]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gau-nernst/centernet-lightning/commit/ec606be569e9df24f7e5c15bef3581b86a63d881#diff-d857e20eeda9fb83f657b66ce7803981392c78a43e2379e592ad209cf612656eL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20052589</div><div id='project'> Project Name: gau-nernst/centernet-lightning</div><div id='commit'> Commit Name: ec606be569e9df24f7e5c15bef3581b86a63d881</div><div id='time'> Time: 2021-05-31</div><div id='author'> Author: gau.nernst@yahoo.com.sg</div><div id='file'> File Name: losses.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: render_target_heatmap(7)</div><div id='n_method'> N Method Name: render_target_heatmap(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: losses.py</div><div id='n_file'> N File Name: losses.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def align_layer_names_multi_stage(target_names, tail_align_dict={}, full_name_align_dict={}, tail_split_position=2, specific_match_func=None):
    if isinstance(tail_split_position, int):
        tail_align_dict, full_name_align_dict, tail_split_position = [tail_align_dict], [full_name_align_dict], [tail_split_position]
    for ii, jj, kk in <a id="change">zip(</a>tail_align_dict, full_name_align_dict, tail_split_position<a id="change">)</a>:
        target_names = match_layer_names_with_torch(target_names, ii, jj, kk)

    if specific_match_func is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
        tail_align_dict, full_name_align_dict, tail_split_position = [tail_align_dict], [full_name_align_dict], [tail_split_position]
    full_name_align_dict = full_name_align_dict if isinstance(full_name_align_dict, (list, tuple)) else [full_name_align_dict]
    &#47&#47 for ii, jj, kk in zip(tail_align_dict, full_name_align_dict, tail_split_position):
    for idx in <a id="change">range(</a>max(<a id="change">len(</a>tail_split_position<a id="change">)</a>, len(full_name_align_dict))<a id="change">)</a>:
        cur_tail = tail_align_dict[idx] if idx &lt; len(tail_align_dict) else {}
        cur_full = full_name_align_dict[idx] if idx &lt; len(full_name_align_dict) else {}
        cur_split = <a id="change">tail_split_position[idx]</a> if idx &lt; len(tail_split_position) else tail_split_position[-1]
        print("&gt;&gt;&gt;&gt; tail_align_dict:", cur_tail)
        print("&gt;&gt;&gt;&gt; full_name_align_dict:", cur_full)
        print("&gt;&gt;&gt;&gt; tail_split_position:", cur_split)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/e6caa341b219ff7aabd1f12311014d1df5a70118#diff-37028f58f90dc39d0ed1f23dec40bd7e001ad2d587c2dd6ddd16655aaec34d38L132' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20052588</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: e6caa341b219ff7aabd1f12311014d1df5a70118</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: keras_cv_attention_models/download_and_load.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: align_layer_names_multi_stage(5)</div><div id='n_method'> N Method Name: align_layer_names_multi_stage(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: keras_cv_attention_models/download_and_load.py</div><div id='n_file'> N File Name: keras_cv_attention_models/download_and_load.py</div><div id='m_start'> M Start Line: 135</div><div id='m_end'> M End Line: 138</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 146</div><BR>