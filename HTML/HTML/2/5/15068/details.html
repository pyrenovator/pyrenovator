<html><h3>Pattern ID :15068
</h3><img src='50596228.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
&#47&#47 TODO
@pytest.mark.parametrize("building", [True, False])
def test_chunks_obj(re_data_demo, building):
    <a id="change">pass</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    assert (chunks_obj.span_size_ids+1).tolist() == [e-s for l, s, e in chunks_obj.chunks]
    assert chunks_obj.attr_label_ids.size(0) == len(chunks_obj.chunks)
    
    attributes_retr<a id="change"> = </a><a id="change">[]</a>
    <a id="change">for </a>chunk, attr_label_ids in zip(chunks_obj.chunks, chunks_obj.attr_label_ids)<a id="change">:
        </a>attr_labels = [attr_decoder_config.idx2attr_label[i] for i, l in enumerate(attr_label_ids.tolist()) if l &gt; 0]
        if attr_decoder_config.attr_none_label not in attr_labels:
            <a id="change">attributes_retr.extend(</a>[(attr_label, chunk) for attr_label in attr_labels]<a id="change">)</a>
    assert set(attributes_retr) == set(attributes)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/syuoni/eznlp/commit/720e1016b6ed33e5079f434dbb78da1f76d2631b#diff-760fb8f420606f94e08312fccc7c17045ae8f95201c4f8353acd505d7a560d81L88' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 50596228</div><div id='project'> Project Name: syuoni/eznlp</div><div id='commit'> Commit Name: 720e1016b6ed33e5079f434dbb78da1f76d2631b</div><div id='time'> Time: 2021-06-15</div><div id='author'> Author: enwei.zhu@outlook.com</div><div id='file'> File Name: tests/model/test_span_attr_classification.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_chunks_obj(2)</div><div id='n_method'> N Method Name: test_chunks_obj(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/model/test_span_attr_classification.py</div><div id='n_file'> N File Name: tests/model/test_span_attr_classification.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 88</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 112</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @abstractmethod
    def mutate_parents(self, parents:List[ArchWithMetaData])-&gt;List[ArchWithMetaData]:
        <a id="change">pass</a>


    @abstractmethod
    def crossover_parents(self, parents:List[ArchWithMetaData])-&gt;List[ArchWithMetaData]:</code></pre><h3>After Change</h3><pre><code class='java'>
    @overrides
    def mutate_parents(self, parents:List[ArchWithMetaData])-&gt;List[ArchWithMetaData]:
        &quot&quot&quot Using the nearest neighbors as mutations&quot&quot&quot
        mutations<a id="change"> = </a><a id="change">[]</a>
        <a id="change">for </a>p in parents<a id="change">:
            </a>nbrs = self.search_space.get_neighbors(p)
            <a id="change">mutations.extend(</a>nbrs<a id="change">)</a>

        &#47&#47 TODO: there will be a lot of neighbors
        &#47&#47 so might want to downsample them
        return mutations</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/d6d8055abff8dcc78c04360f846e0af2d8e2b29e#diff-e9816881d2a8bcaf04c19278e0fdfd1b4427623db94b761e1f485b55c14140a0L133' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 50596226</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: d6d8055abff8dcc78c04360f846e0af2d8e2b29e</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: dedey@microsoft.com</div><div id='file'> File Name: archai/algos/evolution_pareto_natsbench/evolution_pareto_search_natsbench_tss.py</div><div id='m_class'> M Class Name: EvolutionParetoSearchNatsbenchTSS</div><div id='n_method'> N Class Name: EvolutionParetoSearchNatsbenchTSS</div><div id='m_method'> M Method Name: mutate_parents(2)</div><div id='n_method'> N Method Name: mutate_parents(2)</div><div id='m_parent_class'> M Parent Class: EvolutionParetoSearch</div><div id='n_parent_class'> N Parent Class: EvolutionParetoSearch</div><div id='m_file'> M File Name: archai/algos/evolution_pareto_natsbench/evolution_pareto_search_natsbench_tss.py</div><div id='n_file'> N File Name: archai/algos/evolution_pareto_natsbench/evolution_pareto_search_natsbench_tss.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 134</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 142</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @abstractmethod
    def encode(self, documents):
        <a id="change">pass</a>

    def batch(self, documents):
        length = len(documents)
        for idx in range(0, length, self.batch_size):</code></pre><h3>After Change</h3><pre><code class='java'>
        if as_generator:
            return self._encode(documents, fit_model)
        else:
            embeddings<a id="change"> = </a><a id="change">[]</a>
            <a id="change">for </a>embedding_batch in self._encode(documents, fit_model)<a id="change">:
                </a><a id="change">embeddings.extend(</a>embedding_batch<a id="change">)</a>
            return embeddings

    def batch(self, documents):
        length = len(documents)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/code-kern-ai/embedders/commit/6e8b8ed153f00b9e1319b43fcbf295244daa14a5#diff-08f2584af321c2fe01fed1933d5d9028f6c3d29ec2e4f3404884b4b095b04b63L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 50596227</div><div id='project'> Project Name: code-kern-ai/embedders</div><div id='commit'> Commit Name: 6e8b8ed153f00b9e1319b43fcbf295244daa14a5</div><div id='time'> Time: 2022-04-27</div><div id='author'> Author: johanneshotter@MBPvonJohannes.fritz.box</div><div id='file'> File Name: embedders/__init__.py</div><div id='m_class'> M Class Name: Embedder</div><div id='n_method'> N Class Name: Embedder</div><div id='m_method'> M Method Name: encode(4)</div><div id='n_method'> N Method Name: encode(2)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: embedders/__init__.py</div><div id='n_file'> N File Name: embedders/__init__.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 12</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 24</div><BR>