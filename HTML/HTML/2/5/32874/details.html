<html><h3>Pattern ID :32874
</h3><img src='95409950.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                regex = (r&quot[\w\d_]+\(&quot +
                         &quot, &quot.join([r&quot[\w\d_]+=(.+)&quot]*num) +
                         r&quot\)&quot)
                grp = re.findall(regex, <a id="change">got.replace(&quot\n&quot</a>, <a id="change">&quot &quot</a><a id="change">)</a>)
                if <a id="change">len(grp) &gt; 1</a>:  &#47&#47 no more than one for now
                    return False
                &#47&#47 fold it back to a tuple
                got_again = &quot(&quot + &quot, &quot.join(grp[0]) + &quot)&quot</code></pre><h3>After Change</h3><pre><code class='java'>
                s_got = ", ".join(s_got[1:-1].split())
                return self.check_output(s_want, s_got, optionflags)

            if <a id="change">"=" not in want and "=" not in got</a>:
                &#47&#47 if we&quotre here, want and got cannot be eval-ed (hence cannot
                &#47&#47 be converted to numpy objects), they are not namedtuples
                &#47&#47 (those must have at least one &quot=&quot sign).</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/scipy/scipy/commit/f18feb7154c0670665fd6ccbd383c0a50d1f6b78#diff-d98852198ab865147e09ce446580029ee74ec5c8078b3b382b9d94a15547b545L605' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95409950</div><div id='project'> Project Name: scipy/scipy</div><div id='commit'> Commit Name: f18feb7154c0670665fd6ccbd383c0a50d1f6b78</div><div id='time'> Time: 2021-06-24</div><div id='author'> Author: evgeny.burovskiy@gmail.com</div><div id='file'> File Name: tools/refguide_check.py</div><div id='m_class'> M Class Name: Checker</div><div id='n_method'> N Class Name: Checker</div><div id='m_method'> M Method Name: check_output(4)</div><div id='n_method'> N Method Name: check_output(4)</div><div id='m_parent_class'> M Parent Class: doctest.OutputChecker</div><div id='n_parent_class'> N Parent Class: doctest.OutputChecker</div><div id='m_file'> M File Name: tools/refguide_check.py</div><div id='n_file'> N File Name: tools/refguide_check.py</div><div id='m_start'> M Start Line: 605</div><div id='m_end'> M End Line: 615</div><div id='n_start'> N Start Line: 614</div><div id='n_end'> N End Line: 631</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    if k_mode == "min"
                    else -self.lexico_objectives["targets"][k_metric]
                )
                if <a id="change">(
                    result[k_metric]
                    &lt; max(
                        [
                            self._f_best[k_metric]
                            + self.lexico_objectives["tolerances"][k_metric]
                            if not isinstance(
                                self.lexico_objectives["tolerances"][k_metric], str
                            )
                            else self._f_best[k_metric]
                            * (
                                1
                                + 0.01
                                * float(
                                    self.lexico_objectives["tolerances"][
                                        k_metric
                                    ].replace("%", "")
                                )
                            ),
                            k_target,
                        ]
                    )
                )</a> and (
                    self.best_obj[k_metric]
                    &lt; max(
                        [</code></pre><h3>After Change</h3><pre><code class='java'>
                            )
                        )
                    )
                if <a id="change">(result[k_metric] &lt; max([tolerance_bound, k_target])) and (
                    self.best_obj[k_metric]
                    &lt; max(
                        [
                            tolerance_bound,
                            k_target,
                        ]
                    )
                )</a>:
                    continue
                elif result[k_metric] &lt; self.best_obj[k_metric]:
                    return True</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/flaml/commit/3a68da87742c040bbd1321bf435c57d4ccd3be43#diff-1423e55b97c759a26c74012d09e33bb8008e30a17d0a8e3f3d71b9202ee5086cL401' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95409944</div><div id='project'> Project Name: microsoft/flaml</div><div id='commit'> Commit Name: 3a68da87742c040bbd1321bf435c57d4ccd3be43</div><div id='time'> Time: 2023-01-17</div><div id='author'> Author: shaokunzhang529@gmail.com</div><div id='file'> File Name: flaml/tune/searcher/flow2.py</div><div id='m_class'> M Class Name: FLOW2</div><div id='n_method'> N Class Name: FLOW2</div><div id='m_method'> M Method Name: lexico_compare(2)</div><div id='n_method'> N Method Name: lexico_compare(2)</div><div id='m_parent_class'> M Parent Class: Searcher</div><div id='n_parent_class'> N Parent Class: Searcher</div><div id='m_file'> M File Name: flaml/tune/searcher/flow2.py</div><div id='n_file'> N File Name: flaml/tune/searcher/flow2.py</div><div id='m_start'> M Start Line: 412</div><div id='m_end'> M End Line: 464</div><div id='n_start'> N Start Line: 417</div><div id='n_end'> N End Line: 450</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def select_device(device=&quot&quot, batch_size=0, newline=True):
    &#47&#47 device = None or &quotcpu&quot or 0 or &quot0&quot or &quot0,1,2,3&quot
    s = f&quotYOLOv5 ðŸš€ {git_describe() or file_date()} Python-{platform.python_version()} flow-{flow.__version__} &quot
    device = <a id="change">str(device).strip().lower().replace(&quotcuda:&quot, &quot&quot).replace(&quotnone&quot</a>, <a id="change">&quot&quot</a><a id="change">)</a>  &#47&#47 to string, &quotcuda:0&quot to &quot0&quot
    cpu = device == &quotcpu&quot
    mps = <a id="change">device == &quotmps&quot</a>  &#47&#47 Apple Metal Performance Shaders (MPS)
    if cpu or mps:
        os.environ[&quotCUDA_VISIBLE_DEVICES&quot] = &quot-1&quot  &#47&#47 force flow.cuda.is_available() = False
    elif device:  &#47&#47 non-cpu device requested</code></pre><h3>After Change</h3><pre><code class='java'>
        os.environ[&quotCUDA_VISIBLE_DEVICES&quot] = device  &#47&#47 set environment variable
        assert with_cuda(), f&quotCUDA unavailable, invalid device {device} requested&quot  &#47&#47 check availability

    cuda = <a id="change">not cpu and with_cuda()</a>
    if cuda:
        devices = device.split(&quot,&quot) if device else &quot0&quot  &#47&#47 range(torch.cuda.device_count())  &#47&#47 i.e. 0,1,6,7
        n = len(devices)  &#47&#47 device count
        if n &gt; 1 and batch_size &gt; 0:  &#47&#47 check batch_size is divisible by device_count</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oneflow-inc/one-yolov5/commit/4f0088a5e5c32f67560514fcff66884e515f7138#diff-887acdc86b965c7bd7350cbe9458a749d11766e0a2551c353cf8a1f56caa7a75L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95409939</div><div id='project'> Project Name: oneflow-inc/one-yolov5</div><div id='commit'> Commit Name: 4f0088a5e5c32f67560514fcff66884e515f7138</div><div id='time'> Time: 2022-07-31</div><div id='author'> Author: ccsuwen@gmail.com</div><div id='file'> File Name: utils/flow_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: select_device(3)</div><div id='n_method'> N Method Name: select_device(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/flow_utils.py</div><div id='n_file'> N File Name: utils/flow_utils.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 66</div><BR>