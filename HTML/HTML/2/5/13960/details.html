<html><h3>Pattern ID :13960
</h3><img src='46447744.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        env: ShardingEnv,
        device: Optional[torch.device] = None,
    ) -&gt; None:
        <a id="change">super().__init__(</a>module, table_name_to_parameter_sharding, env, None, device<a id="change">)</a>

    &#47&#47 pyre-ignore [3]
    def input_dist(
        self, ctx: ShardedModuleContext, features: KeyedJaggedTensor</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._output_dists<a id="change">: nn.ModuleList[nn.Module] = nn</a><a id="change">.ModuleList()</a>
        self._embedding_names: List[str] = []
        self._embedding_dims: List[int] = []

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._input_dists: nn.ModuleList[nn.Module] = <a id="change">nn.ModuleList()</a>
        self._feature_splits: List[int] = []
        self._features_order: List[int] = []

        &#47&#47 forward pass flow control</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pytorch/torchrec/commit/cfc6c1ddab783b6f085f0d329bf9c7a933a10540#diff-47054702d9b60e19832807f14dfe91b0ec48fff611d6737d4535160cb1dfcf13L57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46447744</div><div id='project'> Project Name: pytorch/torchrec</div><div id='commit'> Commit Name: cfc6c1ddab783b6f085f0d329bf9c7a933a10540</div><div id='time'> Time: 2022-02-12</div><div id='author'> Author: xingl@fb.com</div><div id='file'> File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='m_class'> M Class Name: ShardedQuantEmbeddingBagCollection</div><div id='n_method'> N Class Name: ShardedQuantEmbeddingBagCollection</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Subscript</div><div id='n_parent_class'> N Parent Class: Subscript</div><div id='m_file'> M File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='n_file'> N File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 116</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        env: ShardingEnv,
        device: Optional[torch.device] = None,
    ) -&gt; None:
        <a id="change">super().__init__(</a>module, table_name_to_parameter_sharding, env, None, device<a id="change">)</a>

    &#47&#47 pyre-ignore [3]
    def input_dist(
        self, ctx: ShardedModuleContext, features: KeyedJaggedTensor</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._output_dists: nn.ModuleList[nn.Module] = <a id="change">nn.ModuleList()</a>
        self._embedding_names: List[str] = []
        self._embedding_dims: List[int] = []

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._input_dists<a id="change">: nn.ModuleList[nn.Module] = </a><a id="change">nn.ModuleList()</a>
        self._feature_splits: List[int] = []
        self._features_order: List[int] = []

        &#47&#47 forward pass flow control</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/torchrec/commit/cfc6c1ddab783b6f085f0d329bf9c7a933a10540#diff-47054702d9b60e19832807f14dfe91b0ec48fff611d6737d4535160cb1dfcf13L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46447745</div><div id='project'> Project Name: pytorch/torchrec</div><div id='commit'> Commit Name: cfc6c1ddab783b6f085f0d329bf9c7a933a10540</div><div id='time'> Time: 2022-02-12</div><div id='author'> Author: xingl@fb.com</div><div id='file'> File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='m_class'> M Class Name: ShardedQuantEmbeddingBagCollection</div><div id='n_method'> N Class Name: ShardedQuantEmbeddingBagCollection</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Subscript</div><div id='n_parent_class'> N Parent Class: Subscript</div><div id='m_file'> M File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='n_file'> N File Name: torchrec/distributed/quant_embeddingbag.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 116</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
class MultiScaleSpectralDiscriminator(MultiScaleDiscriminator):

    def __init__(self, multiscale_stft, n_discriminators, convnet) -&gt; None:
        <a id="change">super().__init__(</a>n_discriminators, convnet<a id="change">)</a>
        self.multiscale_stft = multiscale_stft()

    def forward(self, x):
        scales = self.multiscale_stft(x)</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self, scales: Sequence[int],
                 convnet: Callable[[], nn.Module]) -&gt; None:
        super().__init__()
        self.specs = <a id="change">nn.ModuleList(</a>[spectrogram(n) for n in scales]<a id="change">)</a>
        self.nets<a id="change"> = </a><a id="change">nn.ModuleList(</a>[convnet() for _ in scales]<a id="change">)</a>

    def forward(self, x):
        features = []
        for spec, net in zip(self.specs, self.nets):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/caillonantoine/rave/commit/8d57b8a03b8c56aaa74f04d780018a9fb3922fab#diff-56f55292a5f21eb639ed0fb489a3af5371d9a631180b5a76fdb22fe1e3907f25L122' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46447746</div><div id='project'> Project Name: caillonantoine/rave</div><div id='commit'> Commit Name: 8d57b8a03b8c56aaa74f04d780018a9fb3922fab</div><div id='time'> Time: 2022-12-10</div><div id='author'> Author: caillon@ircam.fr</div><div id='file'> File Name: rave/discriminator.py</div><div id='m_class'> M Class Name: MultiScaleSpectralDiscriminator</div><div id='n_method'> N Class Name: MultiScaleSpectralDiscriminator</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: MultiScaleDiscriminator</div><div id='m_file'> M File Name: rave/discriminator.py</div><div id='n_file'> N File Name: rave/discriminator.py</div><div id='m_start'> M Start Line: 122</div><div id='m_end'> M End Line: 124</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 139</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        fused_params: Optional[Dict[str, Any]] = None,
        device: Optional[torch.device] = None,
    ) -&gt; None:
        <a id="change">super().__init__(
            </a>module, table_name_to_parameter_sharding, env, fused_params, device<a id="change">
        )</a>
        &#47&#47 Get all fused optimizers and combine them.
        optims = []
        for lookup in self._lookups:
            for _, module in lookup.named_modules():</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._output_dists<a id="change">: nn.ModuleList[nn.Module] = </a><a id="change">nn.ModuleList()</a>
        self._embedding_names: List[str] = []
        self._embedding_dims: List[int] = []

        &#47&#47 pyre-fixme[24]: Non-generic type `nn.modules.container.ModuleList` cannot
        &#47&#47  take parameters.
        self._input_dists: nn.ModuleList[nn.Module] = <a id="change">nn.ModuleList()</a>
        self._feature_splits: List[int] = []
        self._features_order: List[int] = []

        &#47&#47 forward pass flow control</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/torchrec/commit/cfc6c1ddab783b6f085f0d329bf9c7a933a10540#diff-fd51ff8537ea74d205ade3b58e7acd1832ae6fc5d8f549719407f53f6ccdfa9cL508' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 46447747</div><div id='project'> Project Name: pytorch/torchrec</div><div id='commit'> Commit Name: cfc6c1ddab783b6f085f0d329bf9c7a933a10540</div><div id='time'> Time: 2022-02-12</div><div id='author'> Author: xingl@fb.com</div><div id='file'> File Name: torchrec/distributed/embeddingbag.py</div><div id='m_class'> M Class Name: ShardedEmbeddingBagCollection</div><div id='n_method'> N Class Name: ShardedEmbeddingBagCollection</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: FusedOptimizerModule,Subscript</div><div id='n_parent_class'> N Parent Class: FusedOptimizerModule,Subscript</div><div id='m_file'> M File Name: torchrec/distributed/embeddingbag.py</div><div id='n_file'> N File Name: torchrec/distributed/embeddingbag.py</div><div id='m_start'> M Start Line: 516</div><div id='m_end'> M End Line: 518</div><div id='n_start'> N Start Line: 254</div><div id='n_end'> N End Line: 286</div><BR>