<html><h3>Pattern ID :21882
</h3><img src='69692902.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                create_inverse_triples=inverse_triples,
            ).training
            for entity_restriction in (None, example_entity_restriction):
                <a id="change">for </a>relation_restriction in (None, example_relation_restriction)<a id="change">:
                    &#47&#47 apply restriction
                    </a>restricted_triples_factory = original_triples_factory.new_with_restriction(
                        entities=entity_restriction,
                        relations=relation_restriction,
                    )
                    &#47&#47 check that the triples factory is returned as is, if and only if no restriction is to apply
                    no_restriction_to_apply = entity_restriction is None and relation_restriction is None
                    equal_factory_object = id(restricted_triples_factory) == id(original_triples_factory)
                    assert no_restriction_to_apply == equal_factory_object

                    &#47&#47 check that inverse_triples is correctly carried over
                    assert (
                        original_triples_factory.create_inverse_triples
                        == restricted_triples_factory.create_inverse_triples
                    )

                    &#47&#47 verify that the label-to-ID mapping has not been changed
                    assert original_triples_factory.entity_to_id == restricted_triples_factory.entity_to_id
                    assert original_triples_factory.relation_to_id == restricted_triples_factory.relation_to_id

                    &#47&#47 verify that triples have been filtered
                    if entity_restriction is not None:
                        present_entities<a id="change"> = </a><a id="change">set(restricted_triples_factory.triples[:, 0]).union(
                            </a>restricted_triples_factory.triples[:, 2]<a id="change">
                        )</a>
                        assert set(entity_restriction).issuperset(present_entities)

                    if relation_restriction is not None:
                        present_relations = set(restricted_triples_factory.triples[:, 1])</code></pre><h3>After Change</h3><pre><code class='java'>
                (entity_restriction, invert_entity_selection),
                (relation_restriction, invert_relation_selection),
            ) in itt.product(
                ((None, None)<a id="change">, (entity_restriction, False), (entity_restriction, True)</a>),
                ((None, None), (relation_restriction, False), (relation_restriction, True)),
            ):
                with self.subTest(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/3b986a0c52cedc6b5b0d1384260d59edb6d3f567#diff-17bd3794bceaa81288084d001d6f5cfebc6977a6e37bbce03177ab031f90ba54L139' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69692902</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 3b986a0c52cedc6b5b0d1384260d59edb6d3f567</div><div id='time'> Time: 2022-01-01</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: tests/test_triples_factory.py</div><div id='m_class'> M Class Name: TestTriplesFactory</div><div id='n_method'> N Class Name: TestTriplesFactory</div><div id='m_method'> M Method Name: test_new_with_restriction(1)</div><div id='n_method'> N Method Name: test_new_with_restriction(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_triples_factory.py</div><div id='n_file'> N File Name: tests/test_triples_factory.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 186</div><div id='n_start'> N Start Line: 190</div><div id='n_end'> N End Line: 225</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                create_inverse_triples=inverse_triples,
            ).training
            for entity_restriction in (None, example_entity_restriction):
                <a id="change">for </a><a id="change">relation_restriction</a> in (None, example_relation_restriction)<a id="change">:
                    &#47&#47 apply restriction
                    </a>restricted_triples_factory = original_triples_factory.new_with_restriction(
                        entities=entity_restriction,
                        relations=relation_restriction,
                    )
                    &#47&#47 check that the triples factory is returned as is, if and only if no restriction is to apply
                    no_restriction_to_apply = entity_restriction is None and relation_restriction is None
                    equal_factory_object = id(restricted_triples_factory) == id(original_triples_factory)
                    assert no_restriction_to_apply == equal_factory_object

                    &#47&#47 check that inverse_triples is correctly carried over
                    assert (
                        original_triples_factory.create_inverse_triples
                        == restricted_triples_factory.create_inverse_triples
                    )

                    &#47&#47 verify that the label-to-ID mapping has not been changed
                    assert original_triples_factory.entity_to_id == restricted_triples_factory.entity_to_id
                    assert original_triples_factory.relation_to_id == restricted_triples_factory.relation_to_id

                    &#47&#47 verify that triples have been filtered
                    if entity_restriction is not None:
                        present_entities<a id="change"> = </a><a id="change">set(restricted_triples_factory.triples[:, 0]).union(
                            </a>restricted_triples_factory.triples[:, 2]<a id="change">
                        )</a>
                        assert set(entity_restriction).issuperset(present_entities)

                    if relation_restriction is not None:
                        present_relations = set(restricted_triples_factory.triples[:, 1])</code></pre><h3>After Change</h3><pre><code class='java'>
                (relation_restriction, invert_relation_selection),
            ) in itt.product(
                ((None, None), (entity_restriction, False), (entity_restriction, True)),
                ((None, None)<a id="change">, (relation_restriction, False), (relation_restriction, True)</a>),
            ):
                with self.subTest(
                    entity_restriction=entity_restriction,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/3b986a0c52cedc6b5b0d1384260d59edb6d3f567#diff-17bd3794bceaa81288084d001d6f5cfebc6977a6e37bbce03177ab031f90ba54L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69692900</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 3b986a0c52cedc6b5b0d1384260d59edb6d3f567</div><div id='time'> Time: 2022-01-01</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: tests/test_triples_factory.py</div><div id='m_class'> M Class Name: TestTriplesFactory</div><div id='n_method'> N Class Name: TestTriplesFactory</div><div id='m_method'> M Method Name: test_new_with_restriction(1)</div><div id='n_method'> N Method Name: test_new_with_restriction(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_triples_factory.py</div><div id='n_file'> N File Name: tests/test_triples_factory.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 186</div><div id='n_start'> N Start Line: 190</div><div id='n_end'> N End Line: 225</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Solve our system of equations if it is nonempty.
    if match and equations:
        symbols: Set[Symbol] = set()
        <a id="change">for </a><a id="change">equation</a> in equations<a id="change">:
            </a>symbols<a id="change"> = </a><a id="change">symbols.union(</a>equation.free_symbols<a id="change">)</a>
        solutions: List[Dict[Symbol, int]] = solvers.solve(
            equations, symbols, dict=True
        )
</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Solve our system of equations if it is nonempty.
    if match:
        match<a id="change">, _, _</a> = astasolver(equations)

    return match, equations
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/langfield/asta/commit/171a15d8bee0cd6168df61b7b40326251b5cc9c8#diff-c16aaea90f9e9b50261c039b38c212f4e56ebc6825f1b82d88662e7c6f603dbdL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69692906</div><div id='project'> Project Name: langfield/asta</div><div id='commit'> Commit Name: 171a15d8bee0cd6168df61b7b40326251b5cc9c8</div><div id='time'> Time: 2020-03-26</div><div id='author'> Author: 35980963+langfield@users.noreply.github.com</div><div id='file'> File Name: asta/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: shapecheck(2)</div><div id='n_method'> N Method Name: shapecheck(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: asta/utils.py</div><div id='n_file'> N File Name: asta/utils.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 165</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 157</div><BR>