<html><h3>Pattern ID :23627
</h3><img src='73836647.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        post_process_function=post_processing_function,
        tokenizer=tokenizer)

    output_dir<a id="change"> = </a><a id="change">os.path.join(</a>model_args.model_name_or_path, <a id="change">"compress"</a><a id="change">)</a>
    if not os.path.exists(output_dir):
        os.makedirs(output_dir)

    prune = True
    compress_config = CompressConfig(quantization_config=PTQConfig(
        algo_list=[&quothist&quot, &quotmse&quot], batch_size_list=[4, 8, 16]))
    <a id="change">trainer.compress(</a>output_dir<a id="change">,
                     pruning=prune,
                     quantization=True,
                     compress_config=compress_config)</a>


if __name__ == "__main__":
    main()</code></pre><h3>After Change</h3><pre><code class='java'>

    compression_args.print_config()

    <a id="change">trainer.compress()</a>


if __name__ == "__main__":
    main()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/4c54f6d3e210afb184c453f7c732ad2920298de5#diff-529944942d8a5ab163e9266adf3817f130849fbe761c495fef9deb9bf9249e00L128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73836647</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 4c54f6d3e210afb184c453f7c732ad2920298de5</div><div id='time'> Time: 2022-08-10</div><div id='author'> Author: 709153940@qq.com</div><div id='file'> File Name: model_zoo/ernie-3.0/compress_qa.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_zoo/ernie-3.0/compress_qa.py</div><div id='n_file'> N File Name: model_zoo/ernie-3.0/compress_qa.py</div><div id='m_start'> M Start Line: 152</div><div id='m_end'> M End Line: 172</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                      tokenizer=tokenizer,
                      criterion=criterion)

    output_dir<a id="change"> = </a><a id="change">os.path.join(</a>model_args.model_name_or_path, <a id="change">"compress"</a><a id="change">)</a>
    if not os.path.exists(output_dir):
        os.makedirs(output_dir)

    compress_config = CompressConfig(quantization_config=PTQConfig(
        algo_list=[&quothist&quot, &quotmse&quot], batch_size_list=[4, 8, 16]))

    <a id="change">trainer.compress(</a>output_dir<a id="change">,
                     pruning=True,
                     quantization=True,
                     compress_config=compress_config)</a>


if __name__ == "__main__":
    main()</code></pre><h3>After Change</h3><pre><code class='java'>
    if not os.path.exists(compression_args.output_dir):
        os.makedirs(compression_args.output_dir)

    <a id="change">trainer.compress()</a>


if __name__ == "__main__":
    main()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/4c54f6d3e210afb184c453f7c732ad2920298de5#diff-dffd182e85e4914edfef2b6d1a3bc684aeaf7482c0997fca6f079815681173fdL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73836648</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 4c54f6d3e210afb184c453f7c732ad2920298de5</div><div id='time'> Time: 2022-08-10</div><div id='author'> Author: 709153940@qq.com</div><div id='file'> File Name: model_zoo/ernie-3.0/compress_seq_cls.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_zoo/ernie-3.0/compress_seq_cls.py</div><div id='n_file'> N File Name: model_zoo/ernie-3.0/compress_seq_cls.py</div><div id='m_start'> M Start Line: 101</div><div id='m_end'> M End Line: 119</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 99</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                      eval_dataset=eval_dataset,
                      tokenizer=tokenizer)

    output_dir<a id="change"> = </a><a id="change">os.path.join(</a>model_args.model_name_or_path, <a id="change">"compress"</a><a id="change">)</a>

    if not os.path.exists(output_dir):
        os.makedirs(output_dir)

    compress_config = CompressConfig(quantization_config=PTQConfig(
        algo_list=[&quothist&quot, &quotmse&quot], batch_size_list=[4, 8, 16]))

    <a id="change">trainer.compress(</a>output_dir<a id="change">,
                     pruning=True,
                     quantization=True,
                     compress_config=compress_config)</a>


if __name__ == "__main__":
    main()</code></pre><h3>After Change</h3><pre><code class='java'>

    compression_args.print_config()

    <a id="change">trainer.compress()</a>


if __name__ == "__main__":
    main()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/4c54f6d3e210afb184c453f7c732ad2920298de5#diff-f5859940b6ec147c4921f882d28cfd32a3144219a61eed501c412cf454fa35a0L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73836649</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 4c54f6d3e210afb184c453f7c732ad2920298de5</div><div id='time'> Time: 2022-08-10</div><div id='author'> Author: 709153940@qq.com</div><div id='file'> File Name: model_zoo/ernie-3.0/compress_token_cls.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_zoo/ernie-3.0/compress_token_cls.py</div><div id='n_file'> N File Name: model_zoo/ernie-3.0/compress_token_cls.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 147</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 156</div><BR>