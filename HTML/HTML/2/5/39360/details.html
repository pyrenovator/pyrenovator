<html><h3>Pattern ID :39360
</h3><img src='111665725.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Look for files that end in "_sparse.npy" since this processing is
    &#47&#47 only applied to sparse data.
    input_files = <a id="change">list(
        </a><a id="change">map(
            </a>lambda f: os.path.join(input_dir, f),
            list(filter(lambda f: f.endswith("_sparse.npy"), os.listdir(input_dir)))<a id="change">,
        )
    )</a>
    if not input_files:
        raise ValueError(
            f"There are no files that end with &quot_sparse.npy&quot in this directory: {input_dir}"
        )</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Look for files that end in "_sparse.npy" since this processing is
    &#47&#47 only applied to sparse data.

    input_files = <a id="change">[os.path.join(input_dir, f"day_{i}_sparse.npy") for i in range(DAYS)]</a>

    if not input_files:
        raise ValueError(
            f"There are no files that end with &quot_sparse.npy&quot in this directory: {input_dir}"</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/facebookresearch/torchrec/commit/e55a49c8dbb8a1ad7aed736120559013ce4f3fad#diff-3574bb24d20eb031ad59cf632dd80ff1a5fc787dbb01d4b7fe66694adc1bba5fL59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111665725</div><div id='project'> Project Name: facebookresearch/torchrec</div><div id='commit'> Commit Name: e55a49c8dbb8a1ad7aed736120559013ce4f3fad</div><div id='time'> Time: 2022-08-29</div><div id='author'> Author: samiw1@fb.com</div><div id='file'> File Name: torchrec/datasets/scripts/contiguous_preproc_criteo.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchrec/datasets/scripts/contiguous_preproc_criteo.py</div><div id='n_file'> N File Name: torchrec/datasets/scripts/contiguous_preproc_criteo.py</div><div id='m_start'> M Start Line: 59</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        scores = np.array([[l["score"] for l in output] for output in labels])
        e_x = scores[:, 0] * -1 + scores[:, 1] * 0 + scores[:, 2] * 1
        argmax = np.argmax(scores, axis=-1)
        argmax = <a id="change">list(
            </a><a id="change">map(</a>lambda index: self.label_mapping[f"LABEL_{index}"], argmax.tolist()<a id="change">)
        )</a>
        e_x[e_x == 0] += eps

        if not highlight:
            updates = [</code></pre><h3>After Change</h3><pre><code class='java'>
        ]

        max_scores = scores.values[np.argmax(scores.values, axis=-1)]
        updates = <a id="change">[
            {
                "sentiment": idxmax[index],
                "score": max_scores[index],
                "overall_sentiment": e_x[index],
                "highlight_chunk_": shap_documents[index],
            }
            for index in range(len(texts))
        ]</a>
        return updates

    @property
    def explainer(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/relevanceai/relevanceai/commit/c225defd0c9959aedb55ab759e97cc1c3493b0b7#diff-efebedd8004be51ea3a97fe83dbaad9ac7335c6aba52b505d4581fa81762821eL99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111665723</div><div id='project'> Project Name: relevanceai/relevanceai</div><div id='commit'> Commit Name: c225defd0c9959aedb55ab759e97cc1c3493b0b7</div><div id='time'> Time: 2022-09-07</div><div id='author'> Author: joseph.twin@relevance.ai</div><div id='file'> File Name: relevanceai/operations_new/sentiment/transform.py</div><div id='m_class'> M Class Name: SentimentTransform</div><div id='n_method'> N Class Name: SentimentTransform</div><div id='m_method'> M Method Name: analyze_sentiment(7)</div><div id='n_method'> N Method Name: analyze_sentiment(7)</div><div id='m_parent_class'> M Parent Class: TransformBase</div><div id='n_parent_class'> N Parent Class: TransformBase</div><div id='m_file'> M File Name: relevanceai/operations_new/sentiment/transform.py</div><div id='n_file'> N File Name: relevanceai/operations_new/sentiment/transform.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 146</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 162</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Get grid points
        points = anp.meshgrid(*grid_1d)
        self.points = anp.stack(
            <a id="change">list(</a><a id="change">map(</a>anp.ravel, points<a id="change">))</a>, axis=1, like=integration_domain
        )

        logger.info("Integration grid created.")</code></pre><h3>After Change</h3><pre><code class='java'>
                )
            )
        self.h = anp.stack(
            <a id="change">[grid_1d[dim][1] - grid_1d[dim][0] for dim in range(self._dim)]</a>,
            like=integration_domain,
        )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/1ff2889e38ac59d0af372eb22797ee9dad666b8d#diff-2b3ef6a74bc21eda8fdbba5ea4408a68e6843694c145c2d539ef10c7a041676fL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111665721</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: 1ff2889e38ac59d0af372eb22797ee9dad666b8d</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/integration/integration_grid.py</div><div id='m_class'> M Class Name: IntegrationGrid</div><div id='n_method'> N Class Name: IntegrationGrid</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/integration/integration_grid.py</div><div id='n_file'> N File Name: torchquad/integration/integration_grid.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 73</div><BR>