<html><h3>Pattern ID :10643
</h3><img src='36874896.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def train_model(model, dataset_nums, device):

    &#47&#47 TODO train on all dataset nums in dataset_nums
    dataset_num = <a id="change">dataset_nums[0]</a>
    val_proportion = 0.25
    seed = 42

    model = model.to(device)</code></pre><h3>After Change</h3><pre><code class='java'>

    if not os.path.exists(_CURRENT + &quot/models&quot):
        os.mkdir(_CURRENT + &quot/models&quot)
    timestamp<a id="change"> = </a><a id="change">datetime.now().strftime("%m-%d-%Y_%H-%M-%S"</a><a id="change">)</a>
    PATH = _CURRENT + f&quot/models/CNN_Transformer_{timestamp}.pth&quot
    torch.save(model.state_dict(), PATH)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/xushenlz/parksim/commit/701696aefdeb77cedae8a71c4ed9802dfd1d7041#diff-eb8479c83c2a5e66383b5e5f8606c512312d69ae256ca7f2d95cc34388e23ac2L76' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36874896</div><div id='project'> Project Name: xushenlz/parksim</div><div id='commit'> Commit Name: 701696aefdeb77cedae8a71c4ed9802dfd1d7041</div><div id='time'> Time: 2022-03-04</div><div id='author'> Author: mattlacayo@berkeley.edu</div><div id='file'> File Name: python/parksim/trajectory_predict/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_model(5)</div><div id='n_method'> N Method Name: train_model(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/parksim/trajectory_predict/train.py</div><div id='n_file'> N File Name: python/parksim/trajectory_predict/train.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 109</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                additional_pipeline_args=pipeline.additional_pipeline_args,
                component_config=component_config,  &#47&#47 type: ignore[arg-type]
            )
            <a id="change">component_impl_map[tfx_component]</a> = current_airflow_component
            for upstream_node in tfx_component.upstream_nodes:
                assert (
                    upstream_node in component_impl_map</code></pre><h3>After Change</h3><pre><code class='java'>
        c = compiler.Compiler()
        pipeline = c.compile(pipeline)

        run_name<a id="change"> = </a>run_name or <a id="change">datetime.now().strftime("%d_%h_%y-%H_%M_%S_%f"</a><a id="change">)</a>
        &#47&#47 Substitute the runtime parameter to be a concrete run_id
        runtime_parameter_utils.substitute_runtime_parameter(
            pipeline,
            {</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/0a1aa402ac079c78c519ca67af89fd722f18592f#diff-deb3d607f142f81fe99fda991bd3176f92c18cdd596ac9f866d8505c22501a24L74' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36874886</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 0a1aa402ac079c78c519ca67af89fd722f18592f</div><div id='time'> Time: 2021-11-29</div><div id='author'> Author: michael.schuster.ffb@googlemail.com</div><div id='file'> File Name: src/zenml/integrations/airflow/orchestrators/airflow_dag_runner.py</div><div id='m_class'> M Class Name: AirflowDagRunner</div><div id='n_method'> N Class Name: AirflowDagRunner</div><div id='m_method'> M Method Name: run(3)</div><div id='n_method'> N Method Name: run(2)</div><div id='m_parent_class'> M Parent Class: tfx_runner.TfxRunner</div><div id='n_parent_class'> N Parent Class: tfx_runner.TfxRunner</div><div id='m_file'> M File Name: src/zenml/integrations/airflow/orchestrators/airflow_dag_runner.py</div><div id='n_file'> N File Name: src/zenml/integrations/airflow/orchestrators/airflow_dag_runner.py</div><div id='m_start'> M Start Line: 106</div><div id='m_end'> M End Line: 133</div><div id='n_start'> N Start Line: 79</div><div id='n_end'> N End Line: 158</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    writer.writeheader()

            with open(file_path, "a", newline="") as csvfile:
                field_names = list(<a id="change">object_dict[0]</a>.keys())
                writer = csv.DictWriter(csvfile, fieldnames=field_names)
                writer.writerows(object_dict)
</code></pre><h3>After Change</h3><pre><code class='java'>
        Args: objects_list: A list of dictionary where each dictionary stores information of an object (person) in a
        frame. frame_number: current frame number file_path: log file path
        
        now = <a id="change">datetime.now()</a>
        current_time<a id="change"> = </a><a id="change">now.strftime("%Y-%m-%d %H:%M:%S"</a><a id="change">)</a>
        file_exists = os.path.isfile(file_path)
        with open(file_path, "a") as csvfile:
            headers = ["Timestamp", "DetectedObjects"]
            writer = csv.DictWriter(csvfile, fieldnames=headers)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralet/smart-social-distancing/commit/9f483c8d68c875799eb3fd0ef3f0ea0894f37912#diff-86bafb917077c7ee560882a998e3606b0e91a0f2546355536a11366e2f3e6187L82' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 36874885</div><div id='project'> Project Name: neuralet/smart-social-distancing</div><div id='commit'> Commit Name: 9f483c8d68c875799eb3fd0ef3f0ea0894f37912</div><div id='time'> Time: 2020-04-16</div><div id='author'> Author: mehraliangit@gmail.com</div><div id='file'> File Name: libs/loggers/csv_logger.py</div><div id='m_class'> M Class Name: Logger</div><div id='n_method'> N Class Name: Logger</div><div id='m_method'> M Method Name: log_objects(3)</div><div id='n_method'> N Method Name: log_objects(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: libs/loggers/csv_logger.py</div><div id='n_file'> N File Name: libs/loggers/csv_logger.py</div><div id='m_start'> M Start Line: 90</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 94</div><div id='n_end'> N End Line: 107</div><BR>