<html><h3>Pattern ID :31849
</h3><img src='93104476.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    er = torch.exp(-bas_exp * R)

    &#47&#47 computes the grad
    if any(x in derivative for x in <a id="change">[1</a>, <a id="change">2</a>]):
        bexp_er = bas_exp * er
        nabla_er = -(bexp_er).unsqueeze(-1) * \
            xyz / R.unsqueeze(-1)</code></pre><h3>After Change</h3><pre><code class='java'>
        nabla_er = -(bexp_er).unsqueeze(-1) * \
            xyz / R.unsqueeze(-1)

    <a id="change">return </a><a id="change">return_required_data(</a>derivative, _kernel,
                                _first_derivative_kernel,
                                _second_derivative_kernel,
                                _mixed_second_derivative_kernel<a id="change">)</a>


def return_required_data(derivative, _kernel,
                         _first_derivative_kernel,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/78e57094877a1af52aeeb64b00aaac2d9ac104fa#diff-4c7dd13d5df672dbbbc2d5d2c1b843b5aef71480871592a2d8a1dc36de789c64L302' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93104476</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 78e57094877a1af52aeeb64b00aaac2d9ac104fa</div><div id='time'> Time: 2021-05-07</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: radial_slater_pure(7)</div><div id='n_method'> N Method Name: radial_slater_pure(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='n_file'> N File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_start'> M Start Line: 302</div><div id='m_end'> M End Line: 335</div><div id='n_start'> N Start Line: 309</div><div id='n_end'> N End Line: 354</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    er = torch.exp(-bas_exp * R)

    &#47&#47 computes the grad
    if any(x in derivative for x in <a id="change">[1</a>, <a id="change">2</a>]):
        Rnm2 = R**(bas_n - 2)
        nRnm2 = bas_n * Rnm2
        bexp_er = bas_exp * er</code></pre><h3>After Change</h3><pre><code class='java'>
        nabla_er = -(bexp_er).unsqueeze(-1) * \
            xyz / R.unsqueeze(-1)

    <a id="change">return </a><a id="change">return_required_data(</a>derivative, _kernel,
                                _first_derivative_kernel,
                                _second_derivative_kernel,
                                _mixed_second_derivative_kernel<a id="change">)</a>


def radial_gaussian(R, bas_n, bas_exp, xyz=None, derivative=[0],
                    sum_grad=True, sum_hess=True):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/60293f06c1eb184e8f8cd14320628f7562da33f7#diff-4c7dd13d5df672dbbbc2d5d2c1b843b5aef71480871592a2d8a1dc36de789c64L5' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93104477</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 60293f06c1eb184e8f8cd14320628f7562da33f7</div><div id='time'> Time: 2021-05-06</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: radial_slater(7)</div><div id='n_method'> N Method Name: radial_slater(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='n_file'> N File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 109</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    er = torch.exp(-bas_exp * R2)

    &#47&#47 computes the grads
    if any(x in derivative for x in <a id="change">[1</a>, <a id="change">2</a>]):

        Rnm2 = R**(bas_n - 2)
        nRnm2 = bas_n * Rnm2</code></pre><h3>After Change</h3><pre><code class='java'>
        nabla_rn = (nRnm2).unsqueeze(-1) * xyz
        nabla_er = -2 * (bexp_er).unsqueeze(-1) * xyz

    <a id="change">return </a><a id="change">return_required_data(</a>derivative, _kernel,
                                _first_derivative_kernel,
                                _second_derivative_kernel,
                                _mixed_second_derivative_kernel<a id="change">)</a>


def radial_gaussian_pure(R, bas_n, bas_exp, xyz=None, derivative=[0],
                         sum_grad=True, sum_hess=True):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/e4f5013c3386624246d5b0dc63d14e5e4cc5dc9d#diff-4c7dd13d5df672dbbbc2d5d2c1b843b5aef71480871592a2d8a1dc36de789c64L113' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93104472</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: e4f5013c3386624246d5b0dc63d14e5e4cc5dc9d</div><div id='time'> Time: 2021-05-07</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: radial_gaussian(7)</div><div id='n_method'> N Method Name: radial_gaussian(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='n_file'> N File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 192</div><div id='n_start'> N Start Line: 137</div><div id='n_end'> N End Line: 211</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    er = torch.exp(-bas_exp * R2)

    &#47&#47 computes the grads
    if any(x in derivative for x in <a id="change">[1</a>, <a id="change">2</a>]):

        bexp_er = bas_exp * er
        nabla_er = -2 * (bexp_er).unsqueeze(-1) * xyz</code></pre><h3>After Change</h3><pre><code class='java'>
        bexp_er = bas_exp * er
        nabla_er = -2 * (bexp_er).unsqueeze(-1) * xyz

    <a id="change">return </a><a id="change">return_required_data(</a>derivative, _kernel,
                                _first_derivative_kernel,
                                _second_derivative_kernel,
                                _mixed_second_derivative_kernel<a id="change">)</a>


def radial_slater_pure(R, bas_n, bas_exp, xyz=None, derivative=0,
                       sum_grad=True, sum_hess=True):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/78e57094877a1af52aeeb64b00aaac2d9ac104fa#diff-4c7dd13d5df672dbbbc2d5d2c1b843b5aef71480871592a2d8a1dc36de789c64L214' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 93104475</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 78e57094877a1af52aeeb64b00aaac2d9ac104fa</div><div id='time'> Time: 2021-05-07</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: radial_gaussian_pure(7)</div><div id='n_method'> N Method Name: radial_gaussian_pure(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='n_file'> N File Name: qmctorch/wavefunction/orbitals/radial_functions.py</div><div id='m_start'> M Start Line: 240</div><div id='m_end'> M End Line: 273</div><div id='n_start'> N Start Line: 237</div><div id='n_end'> N End Line: 280</div><BR>