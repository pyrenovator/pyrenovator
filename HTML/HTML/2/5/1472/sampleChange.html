<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    poison_cluster_index = self.analyze_by_size(cluster_pred)
                    return poison_cluster_index
                else:
                    <a id="change">raise </a><a id="change">ValueError("SC score too low, the sample should be contained in one cluster."</a><a id="change">)</a>     
            else:
                raise ValueError(self.clustering_method + " clustering method not supported.")
</code></pre><h3>After Change</h3><pre><code class='java'>
                            cur_label_feature_map.append(list(zip_label[j])[2])
                            cur_label_cluster_pred.append(list(zip_label[j])[1])
                    cur_label_feature_map = torch.cat(cur_label_feature_map)
                    cur_label_cluster_pred<a id="change"> = </a><a id="change">torch.cat(</a>cur_label_cluster_pred<a id="change">)</a>
                    kmeans_model = KMeans(n_clusters=self.nb_clusters).fit(cur_label_feature_map)
                    sc_score = silhouette_score(cur_label_feature_map, kmeans_model.labels_, metric=&quoteuclidean&quot) 
                    if sc_score &gt; score_threshold:
                        poison_cluster_index = self.analyze_by_size(cur_label_cluster_pred)</code></pre>