<html><h3>Pattern ID :26919
</h3><img src='80264136.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        self._call_hook(&quotbefore_stage&quot)

        val_cfg = self.cur_stage.get(&quotvalidation&quot, <a id="change">dict(interval=0)</a>)
        while self.epoch_in_stage &lt; self.cur_stage[&quotepochs&quot]:
            self.train_epoch(**kwargs)
            if val_cfg[&quotinterval&quot] &gt; 0 and self.epoch_in_stage &gt; val_cfg.get(</code></pre><h3>After Change</h3><pre><code class='java'>
        val_cfg = self.cur_stage.get(&quotvalidation&quot, None)
        while self.epoch_in_stage &lt; self.cur_stage[&quotepochs&quot]:
            self.train_epoch(**kwargs)
            <a id="change">if &quotval&quot</a><a id="change"> in self.data_loaders and val_cfg is not None</a>:
                interval = val_cfg.get(&quotinterval&quot, 0)
                offset = val_cfg.get(&quotoffset&quot, 0)
                epoch = self.epoch_in_stage</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/cea16d9b3f10494843ffc75760637cd327188da6#diff-f301e71f1b206fb014cc7b05cf40d35bbf2feac02ca56ff77c6fbc81583978acL287' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80264136</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: cea16d9b3f10494843ffc75760637cd327188da6</div><div id='time'> Time: 2020-10-22</div><div id='author'> Author: yeliudev@outlook.com</div><div id='file'> File Name: nncore/engine/engine.py</div><div id='m_class'> M Class Name: Engine</div><div id='n_method'> N Class Name: Engine</div><div id='m_method'> M Method Name: run_stage(1)</div><div id='n_method'> N Method Name: run_stage(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: nncore/engine/engine.py</div><div id='n_file'> N File Name: nncore/engine/engine.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 295</div><div id='n_start'> N Start Line: 299</div><div id='n_end'> N End Line: 309</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        [torch.randint(0, len(choices), (N,)) for choices in SCHEMA.values()], dim=-1
    )
    experiment_response = torch.rand(N)  &#47&#47 FIXME run the model
    return <a id="change">dict(
        experiment_batch_id=experiment_batch_id,
        experiment_sequences=experiment_sequences,
        experiment_response=experiment_response,
    )</a>


def main():
    raise NotImplementedError("TODO")</code></pre><h3>After Change</h3><pre><code class='java'>
    truth = truth = {
        name: site["value"].detach()
        for name, site in trace.nodes.items()
        if <a id="change">site["type"] == "sample" and not site["is_observed"]</a>
        if type(site["fn"]).__name__ != "_Subsample"
        if name != "batch_response"  &#47&#47 shape varies in time
    }
    experiment["response"] = trace.nodes["response"]["value"].detach()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pyro-ppl/pyroed/commit/95e3deb9d0f74decbc393bdcb4f8c426f85f339a#diff-6a6e57c6fff6087e2cac547e260c49d313fd40975812f8f9b936c5df06233b15L128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80264134</div><div id='project'> Project Name: pyro-ppl/pyroed</div><div id='commit'> Commit Name: 95e3deb9d0f74decbc393bdcb4f8c426f85f339a</div><div id='time'> Time: 2021-09-29</div><div id='author'> Author: fritz.obermeyer@gmail.com</div><div id='file'> File Name: example.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: generate_fake_data(2)</div><div id='n_method'> N Method Name: generate_fake_data(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: example.py</div><div id='n_file'> N File Name: example.py</div><div id='m_start'> M Start Line: 129</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        self.stage_names = [i[&quotmodule&quot] for i in self.feature_info]
        self._out_encoder_channels = [i[&quotnum_chs&quot] for i in self.feature_info]
        hooks = [<a id="change">dict(module=name, type=&quotforward&quot)</a> for name in self.stage_names]
        self.feature_hooks = FeatureHooks(hooks, self.named_modules())

    def forward_features(self, x: Tensor) -&gt; List[Tensor]:</code></pre><h3>After Change</h3><pre><code class='java'>
        self.stage_names = [h[&quotmodule&quot] for h in self.feature_info]
        self._out_encoder_channels = [h[&quotnum_chs&quot] for h in self.feature_info]
        for h in self.feature_info:
            <a id="change">if &quothook_type&quot</a><a id="change"> in h and not h[&quothook_type&quot]</a>:
                del h[&quothook_type&quot]
        self.feature_hooks = FeatureHooks(self.feature_info, self.named_modules())
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eora-ai/torchok/commit/699b108975dcec2bbf17a16dfa49cac147e2dfa3#diff-09b56ad9fbbbff53e85b491a68937938d62150686206ab6275a12c900678be18L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 80264135</div><div id='project'> Project Name: eora-ai/torchok</div><div id='commit'> Commit Name: 699b108975dcec2bbf17a16dfa49cac147e2dfa3</div><div id='time'> Time: 2022-07-29</div><div id='author'> Author: shulz134700@gmail.com</div><div id='file'> File Name: torchok/models/backbones/base_backbone.py</div><div id='m_class'> M Class Name: BaseBackbone</div><div id='n_method'> N Class Name: BaseBackbone</div><div id='m_method'> M Method Name: create_hooks(1)</div><div id='n_method'> N Method Name: create_hooks(1)</div><div id='m_parent_class'> M Parent Class: BaseModel,ABC</div><div id='n_parent_class'> N Parent Class: BaseModel,ABC</div><div id='m_file'> M File Name: torchok/models/backbones/base_backbone.py</div><div id='n_file'> N File Name: torchok/models/backbones/base_backbone.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 21</div><BR>