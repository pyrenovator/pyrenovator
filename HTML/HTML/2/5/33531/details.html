<html><h3>Pattern ID :33531
</h3><img src='96562113.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if rank in (0, 1):
            group = world.create_rpc_group("group", ["0", "1"])
            buffer = DistributedBuffer(5, group)
            begin<a id="change"> = </a><a id="change">time()</a>
            while <a id="change">time()</a><a id="change"> - </a>begin &lt; 2:
                buffer.append(data)
                sleep(0.01)
            assert buffer.size() == 5</code></pre><h3>After Change</h3><pre><code class='java'>
        if rank in (0, 1):
            group = world.create_rpc_group("group", ["0", "1"])
            buffer = DistributedBuffer(5, group)
            <a id="change">for </a>i in range(5)<a id="change">:
                </a>buffer.append(data)
            sleep(5)
        else:
            sleep(2)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/iffix/machin/commit/06c011b221c021488960edfeeca79581fd5e37b4#diff-4b86e9fcd3c0ae3852067d1d5e46fc63bbbda5efbc0b4b3955a4bea83de91193L95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96562113</div><div id='project'> Project Name: iffix/machin</div><div id='commit'> Commit Name: 06c011b221c021488960edfeeca79581fd5e37b4</div><div id='time'> Time: 2020-07-15</div><div id='author'> Author: hanhanmumuqq@163.com</div><div id='file'> File Name: test/frame/buffers/test_buffer_d.py</div><div id='m_class'> M Class Name: TestDistributedBuffer</div><div id='n_method'> N Class Name: TestDistributedBuffer</div><div id='m_method'> M Method Name: test_append_clear(1)</div><div id='n_method'> N Method Name: test_append_clear(1)</div><div id='m_parent_class'> M Parent Class: WorldTestBase</div><div id='n_parent_class'> N Parent Class: WorldTestBase</div><div id='m_file'> M File Name: test/frame/buffers/test_buffer_d.py</div><div id='n_file'> N File Name: test/frame/buffers/test_buffer_d.py</div><div id='m_start'> M Start Line: 97</div><div id='m_end'> M End Line: 110</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 103</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            accept = w &lt;= w_accept
            print(time() - t)
            print(&quotupdate&quot)
            t<a id="change"> = </a><a id="change">time()</a>
            z = torch.where(accept.unsqueeze(1), z_, z)
            log_det_ = log_p - log_p_ + log_p_diff
            log_det = torch.where(accept, log_det + log_det_, log_det)
            print(<a id="change">time() - </a>t)
        return z, log_det

    def inverse(self, z):</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, z):
        num_samples = len(z)
        log_det = torch.zeros(num_samples, dtype=z.dtype, device=z.device)
        <a id="change">for </a>i in range(self.steps)<a id="change">:
            </a>w = torch.rand(num_samples, dtype=z.dtype, device=z.device)
            z_, log_p_diff = self.proposal(z)
            log_p = self.dist.log_prob(z)
            log_p_ = self.dist.log_prob(z_)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vincentstimper/normalizing-flows/commit/150a31952c354500b3b4af74c5b3c23a2fd0e1ca#diff-ca97ae4afa3c21e9869fc142d8ffe6e668eac9bf3092e7c6beeac1e43ae4bcc4L337' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96562112</div><div id='project'> Project Name: vincentstimper/normalizing-flows</div><div id='commit'> Commit Name: 150a31952c354500b3b4af74c5b3c23a2fd0e1ca</div><div id='time'> Time: 2020-05-09</div><div id='author'> Author: vincent.stimper@gmail.com</div><div id='file'> File Name: normflow/flows.py</div><div id='m_class'> M Class Name: MetropolisHastings</div><div id='n_method'> N Class Name: MetropolisHastings</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: Flow</div><div id='n_parent_class'> N Parent Class: Flow</div><div id='m_file'> M File Name: normflow/flows.py</div><div id='n_file'> N File Name: normflow/flows.py</div><div id='m_start'> M Start Line: 341</div><div id='m_end'> M End Line: 367</div><div id='n_start'> N Start Line: 340</div><div id='n_end'> N End Line: 351</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if rank in (0, 1):
            group = world.create_rpc_group("group", ["0", "1"])
            buffer = DistributedBuffer("buffer", group, 5)
            begin<a id="change"> = </a><a id="change">time()</a>
            while <a id="change">time()</a><a id="change"> - </a>begin &lt; 5:
                buffer.append(data)
                sleep(0.01)
            assert buffer.size() == 5</code></pre><h3>After Change</h3><pre><code class='java'>
            group = world.create_rpc_group("group", ["0", "1"])
            buffer = DistributedBufferImpl("buffer", group, 5)
            if rank == 0:
                <a id="change">for </a>_ in range(5)<a id="change">:
                    </a>buffer.append(data)
                assert buffer.size() == 5
            sleep(5)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/iffix/machin/commit/9f238e7da2fee833f98db13e778d7a59275676c3#diff-4b86e9fcd3c0ae3852067d1d5e46fc63bbbda5efbc0b4b3955a4bea83de91193L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96562050</div><div id='project'> Project Name: iffix/machin</div><div id='commit'> Commit Name: 9f238e7da2fee833f98db13e778d7a59275676c3</div><div id='time'> Time: 2020-07-18</div><div id='author'> Author: hanhanmumuqq@163.com</div><div id='file'> File Name: test/frame/buffers/test_buffer_d.py</div><div id='m_class'> M Class Name: TestDistributedBuffer</div><div id='n_method'> N Class Name: TestDistributedBuffer</div><div id='m_method'> M Method Name: test_append_size(1)</div><div id='n_method'> N Method Name: test_append_size(1)</div><div id='m_parent_class'> M Parent Class: WorldTestBase</div><div id='n_parent_class'> N Parent Class: WorldTestBase</div><div id='m_file'> M File Name: test/frame/buffers/test_buffer_d.py</div><div id='n_file'> N File Name: test/frame/buffers/test_buffer_d.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 59</div><div id='n_end'> N End Line: 81</div><BR>