<html><h3>Pattern ID :9860
</h3><img src='35344331.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        os.chdir("../") &#47&#47 back to the original directory

        <a id="change">print(</a><a id="change">"Loss: {:.3f}, PESQ: {:.3f}".format(</a>test_loss, test_pesq<a id="change">))</a>
        print("Evaluation of PESQ returns error {} times.".format(n_pesq_error))

class AnchoredAttractorTrainer(AttractorTrainer):
    def __init__(self, model, loader, criterion, optimizer, args):</code></pre><h3>After Change</h3><pre><code class='java'>
                sources = torch.istft(sources, n_fft=self.fft_size, hop_length=self.hop_size, normalized=self.normalize, window=self.window, length=T) &#47&#47 -&gt; (n_sources, T)
                estimated_sources = torch.istft(estimated_sources, n_fft=self.fft_size, hop_length=self.hop_size, normalized=self.normalize, window=self.window, length=T) &#47&#47 -&gt; (n_sources, T)
                
                repeated_mixture<a id="change"> = </a><a id="change">torch.tile(</a>mixture, (self.n_sources, 1)<a id="change">)</a>
                result_estimated = bss_eval_sources(
                    reference_sources=sources.numpy(),
                    estimated_sources=estimated_sources.numpy()
                )</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/df9cdaaad920a180e767526b968ade8b822355f2#diff-d5cb03ca8f1fcaf1e8bc22f5deab4b6231d44a4eba914490ae1f21298075470dL562' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35344331</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: df9cdaaad920a180e767526b968ade8b822355f2</div><div id='time'> Time: 2021-08-09</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_class'> M Class Name: AttractorTester</div><div id='n_method'> N Class Name: AttractorTester</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: TesterBase</div><div id='n_parent_class'> N Parent Class: TesterBase</div><div id='m_file'> M File Name: egs/wsj0-mix/common/src/driver.py</div><div id='n_file'> N File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_start'> M Start Line: 564</div><div id='m_end'> M End Line: 683</div><div id='n_start'> N Start Line: 562</div><div id='n_end'> N End Line: 706</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        test_loss_improvement /= n_test
        test_pesq /= n_test
            
        <a id="change">print(</a><a id="change">"Loss: {:.3f}, loss improvement: {:3f}, PESQ: {:.3f}".format(</a>test_loss, test_loss_improvement, test_pesq<a id="change">))</a>

class AttractorTrainer(Trainer):
    def __init__(self, model, loader, criterion, optimizer, args):
        self.train_loader, self.valid_loader = loader[&quottrain&quot], loader[&quotvalid&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
                perm_idx = perm_idx[0] &#47&#47 -&gt; (n_sources,)
                segment_IDs = segment_IDs[0] &#47&#47 -&gt; (n_sources,)

                repeated_mixture<a id="change"> = </a><a id="change">np.tile(</a>mixture<a id="change">, reps=(self.n_sources, 1))</a>
                result_estimated = bss_eval_sources(
                    reference_sources=sources,
                    estimated_sources=estimated_sources
                )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/db6ae4406ffc1e5f0b6e7a5930544a09ba8b5106#diff-b61b98e7733d0396b3b1f77244617744f6ae8cc0f81d894ba9279b12993aed7aL242' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35344330</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: db6ae4406ffc1e5f0b6e7a5930544a09ba8b5106</div><div id='time'> Time: 2021-01-15</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/librispeech/common/src/driver.py</div><div id='m_class'> M Class Name: Tester</div><div id='n_method'> N Class Name: Tester</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/librispeech/common/src/driver.py</div><div id='n_file'> N File Name: egs/librispeech/common/src/driver.py</div><div id='m_start'> M Start Line: 245</div><div id='m_end'> M End Line: 328</div><div id='n_start'> N Start Line: 246</div><div id='n_end'> N End Line: 354</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        test_loss_improvement /= n_test
        test_pesq /= n_test
            
        <a id="change">print(</a><a id="change">"Loss: {:.3f}, loss improvement: {:3f}, PESQ: {:.3f}".format(</a>test_loss, test_loss_improvement, test_pesq<a id="change">))</a>

class AttractorTrainer(Trainer):
    def __init__(self, model, loader, criterion, optimizer, args):
        self.train_loader, self.valid_loader = loader[&quottrain&quot], loader[&quotvalid&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
                perm_idx = perm_idx[0] &#47&#47 -&gt; (n_sources,)
                segment_IDs = segment_IDs[0] &#47&#47 -&gt; &lt;str&gt;

                repeated_mixture<a id="change"> = </a><a id="change">np.tile(</a>mixture<a id="change">, reps=(self.n_sources, 1))</a>
                result_estimated = bss_eval_sources(
                    reference_sources=sources,
                    estimated_sources=estimated_sources
                )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/82aafe87b019c0358712296c8b8b3da8a296d1ba#diff-d5cb03ca8f1fcaf1e8bc22f5deab4b6231d44a4eba914490ae1f21298075470dL249' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35344328</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 82aafe87b019c0358712296c8b8b3da8a296d1ba</div><div id='time'> Time: 2021-01-15</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_class'> M Class Name: Tester</div><div id='n_method'> N Class Name: Tester</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/wsj0-mix/common/src/driver.py</div><div id='n_file'> N File Name: egs/wsj0-mix/common/src/driver.py</div><div id='m_start'> M Start Line: 252</div><div id='m_end'> M End Line: 336</div><div id='n_start'> N Start Line: 253</div><div id='n_end'> N End Line: 360</div><BR>