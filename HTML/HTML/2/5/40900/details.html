<html><h3>Pattern ID :40900
</h3><img src='115284415.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            for i, c in enumerate(data.columns)
            if not f"$P{i + 1}{channel_suffix}" in meta
        ]
    elif not all(<a id="change">c in data.columns</a> for c in obs_names):
        <a id="change">log.warning(
            </a>f"The following observations were not found: {&quot, &quot.join([c for c in obs_names if not c in data.columns])}"<a id="change">
        )</a>
        obs_names = [c for c in obs_names if c in data.columns]

    var_names = [c for c in data.columns if not c in obs_names]
</code></pre><h3>After Change</h3><pre><code class='java'>
    names = pd.Series(
        [meta.get(f"$P{i + 1}{channel_suffix}") for i in range(data.shape[1])]
    )
    fallback_names<a id="change"> = </a><a id="change">[meta[f"$P{i + 1}N"] for i in range(data.shape[1])]</a>
    data.columns = np.where(names.isna() | names.duplicated(False), fallback_names, names)

    exclude_markers = _check_exlude_markers(data, exclude_markers)
    is_marker = data.columns.str.lower().str.contains(marker_regex) & ~np.isin(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mics-lab/scyan/commit/a2fbb2c2dddae7f51221c97c797bb2a097afefb7#diff-895cf6698662a6ce85a114453e7415d231fc150606e24ac63425801af265547cL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115284415</div><div id='project'> Project Name: mics-lab/scyan</div><div id='commit'> Commit Name: a2fbb2c2dddae7f51221c97c797bb2a097afefb7</div><div id='time'> Time: 2023-03-09</div><div id='author'> Author: quentin.blampey@student.ecp.fr</div><div id='file'> File Name: scyan/_io.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: read_fcs(4)</div><div id='n_method'> N Method Name: read_fcs(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scyan/_io.py</div><div id='n_file'> N File Name: scyan/_io.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 55</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        error_flag = True
                    out_str = out_str + this_symbol_sequence + &quot &quot

                if <a id="change">idx != len(fp_label_dict[uttname])</a>:
                    <a id="change">logging.warning(</a>&quot{} length mismatch, length: {} &quot.format(
                        idx, len(fp_label_dict[uttname]))<a id="change">)</a>

                if not error_flag:
                    f_out.write(out_str.strip() + &quot\n&quot)
        f_out.close()</code></pre><h3>After Change</h3><pre><code class='java'>
                            break
                    i += 4
                else:
                    fp<a id="change"> = </a><a id="change">[
                        &quotN&quot for _ in range(
                            len(prosody_lines[i].strip().split(&quot\t&quot)
                                [0].replace(&quot/ &quot, &quot&quot).replace(&quot. &quot, &quot&quot).split(
                                    &quot &quot)))
                    ]</a>
                    i += 1
                fp_label_dict[idx] = fp

        fpadd_metafile = os.path.join(voice_output_dir, &quotfpadd_metafile.txt&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/modelscope/modelscope/commit/453ff1dae37a87cd2ca93f5639e7941396375e10#diff-bec4233b91eefcdd736970600ba47683007b64b533e394b9f1921d47b832f669L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115284418</div><div id='project'> Project Name: modelscope/modelscope</div><div id='commit'> Commit Name: 453ff1dae37a87cd2ca93f5639e7941396375e10</div><div id='time'> Time: 2023-01-09</div><div id='author'> Author: jiaqi.sjq@alibaba-inc.com</div><div id='file'> File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='m_class'> M Class Name: FpProcessor</div><div id='n_method'> N Class Name: FpProcessor</div><div id='m_method'> M Method Name: addfp(4)</div><div id='n_method'> N Method Name: addfp(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='n_file'> N File Name: modelscope/models/audio/tts/kantts/preprocess/fp_processor.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 83</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    pred_key_to_explain = str(config[EXPLAIN_KEY])
    sample_size = int(config[SAMPLE_KEY]) if config[SAMPLE_KEY] else 0

    if not pred_key_to_explain or <a id="change">pred_key_to_explain not in output_feats</a>:
      <a id="change">logging.warning(</a>&quotSHAP requires an output field to explain.&quot<a id="change">)</a>
      return None

    random_baseline = dataset.sample(1).examples
    background = pd.DataFrame(random_baseline)</code></pre><h3>After Change</h3><pre><code class='java'>
      raise ValueError(&quotSHAP requires a prediction field to explain. Could not &quot
                       f&quotfind {pred_key} in spec, {str(model.output_spec())}.&quot)

    input_feats = <a id="change">[key for key in model.input_spec() if key in dataset.spec()]</a>

    example_data = inputs or dataset.examples
    examples: pd.DataFrame = pd.DataFrame(example_data)[input_feats]
    sample_size = int(config.get(SAMPLE_KEY, 0))
    if sample_size and len(examples) &gt; sample_size:
      inputs_to_use: pd.DataFrame = examples.sample(sample_size)
    else:
      inputs_to_use: pd.DataFrame = examples

    random_baseline = dataset.sample(1).examples
    background<a id="change"> = </a>pd.DataFrame(random_baseline)[input_feats]

    def prediction_fn(examples):
      dict_examples: list[JsonDict] = [{</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/13110812e9d3ed5eeefe6267dddf940522e3685c#diff-6f37f6762d295a38ae02d08cb302f701c130ffaf330e95533d87ef7e73d28ee8L97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115284417</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: 13110812e9d3ed5eeefe6267dddf940522e3685c</div><div id='time'> Time: 2022-11-21</div><div id='author'> Author: ryanmullins@google.com</div><div id='file'> File Name: lit_nlp/components/shap_explainer.py</div><div id='m_class'> M Class Name: TabularShapExplainer</div><div id='n_method'> N Class Name: TabularShapExplainer</div><div id='m_method'> M Method Name: run(6)</div><div id='n_method'> N Method Name: run(6)</div><div id='m_parent_class'> M Parent Class: lit_components.Interpreter</div><div id='n_parent_class'> N Parent Class: lit_components.Interpreter</div><div id='m_file'> M File Name: lit_nlp/components/shap_explainer.py</div><div id='n_file'> N File Name: lit_nlp/components/shap_explainer.py</div><div id='m_start'> M Start Line: 124</div><div id='m_end'> M End Line: 174</div><div id='n_start'> N Start Line: 124</div><div id='n_end'> N End Line: 178</div><BR>