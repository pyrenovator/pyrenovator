<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        assert mode == "train" and tokenized_cap is not None
        batch_size = video.shape[0]
        cap_len<a id="change"> = </a><a id="change">len(</a>tokenized_cap[&quotinput_ids&quot]<a id="change">)</a>

        &#47&#47 Encode the video
        &#47&#47 [N,T,H,W,C] -&gt; [batch_size, channel, temporal_dim, height, width]
        video = rearrange(video, &quotn t h w c -&gt; n c t h w&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
                cls_count += torch.sum((current_word == cls_id).to(dtype=torch.int))
                if cls_count &gt;= batch_size:
                    break
            words = <a id="change">torch.stack(words).transpose(0</a>, <a id="change">1</a><a id="change">)</a>.squeeze_()
            return words

</code></pre>