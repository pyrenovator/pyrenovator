<html><h3>Pattern ID :4978
</h3><img src='17416201.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if context.with_display:
            n_samples = label.groupby(label).count()
        else:
            n_samples<a id="change"> = </a>dict(zip(classes, [None] * <a id="change">len(</a>classes<a id="change">)</a>))
        for scorer in scorers:
            scorer_value = scorer(model, dataset)
            if isinstance(scorer_value, Number):</code></pre><h3>After Change</h3><pre><code class='java'>
                    results.extend(
                        [[class_name, scorer.name, class_score]
                         for class_score, class_name in zip(scorer_value, context.classes)])
            results_df = <a id="change">pd.DataFrame(</a>results<a id="change">, columns=[&quotClass&quot, &quotMetric&quot, &quotValue&quot])</a>

            if context.with_display:
                label = cast(pd.Series, dataset.label_col)
                n_samples = label.groupby(label).count()
                display_df = results_df.copy()
                display_df[&quotNumber of samples&quot]<a id="change"> = </a>display_df[&quotClass&quot].apply(n_samples.get)
                display<a id="change"> = </a>[display_df]

        return CheckResult(results_df, header=&quotSingle Dataset Performance&quot, display=display)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/0450488b486ef22abc8cefa9a020f6b00f13f57b#diff-8165eb885e51007a7df06ca1e0cfefec35511fdaeef4043c0016005c08d5d278L61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17416201</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 0450488b486ef22abc8cefa9a020f6b00f13f57b</div><div id='time'> Time: 2022-10-23</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: deepchecks/tabular/checks/model_evaluation/single_dataset_performance.py</div><div id='m_class'> M Class Name: SingleDatasetPerformance</div><div id='n_method'> N Class Name: SingleDatasetPerformance</div><div id='m_method'> M Method Name: run_logic(3)</div><div id='n_method'> N Method Name: run_logic(3)</div><div id='m_parent_class'> M Parent Class: SingleDatasetCheck,ReduceMetricClassMixin</div><div id='n_parent_class'> N Parent Class: SingleDatasetCheck,ReduceMetricClassMixin</div><div id='m_file'> M File Name: deepchecks/tabular/checks/model_evaluation/single_dataset_performance.py</div><div id='n_file'> N File Name: deepchecks/tabular/checks/model_evaluation/single_dataset_performance.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 92</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
	df = io.loadmat(os.path.join(path,&quotqm7b.mat&quot))

	targets = ["E_PBE0", "E_max_EINDO", "I_max_ZINDO", "HOMO_ZINDO", "LUMO_ZINDO", "E_1st_ZINDO", "IP_ZINDO", "EA_ZINDO", "HOMO_PBE0", "LUMO_PBE0", "HOMO_GW", "LUMO_GW", "alpha_PBE0", "alpha_SCS"]
	targets_index = list(range(<a id="change">len(</a>targets<a id="change">)</a>))
	targets2index<a id="change"> = </a>dict(zip(targets, targets_index))	
	y = df[&quotT&quot].T[targets2index[target]]
	
	drugs = df[&quotX&quot]</code></pre><h3>After Change</h3><pre><code class='java'>

	targets = ["E_PBE0", "E_max_EINDO", "I_max_ZINDO", "HOMO_ZINDO", "LUMO_ZINDO", "E_1st_ZINDO", "IP_ZINDO", "EA_ZINDO", "HOMO_PBE0", "LUMO_PBE0", "HOMO_GW", "LUMO_GW", "alpha_PBE0", "alpha_SCS"]
	import pandas as pd
	df<a id="change"> = </a><a id="change">pd.DataFrame()</a>
	df[&quotX&quot] = pd.Series([i for i in inx[&quotX&quot]])
	df = pd.concat([df, pd.DataFrame(inx[&quotT&quot], columns = targets)], axis = 1)
	df[&quotID&quot]<a id="change"> = </a>[&quotDrug &quot + str(i+1) for i in range(len(df))]
	df.to_pickle(&quot/Users/kexinhuang/Desktop/qm7b.pkl&quot)

def QM8_9():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mims-harvard/tdc/commit/77a6e4386efd75bd5d14443ee59d04cdfb98e3cc#diff-579c6125b5c3fca2c843ab9b6d8fc34263fbfcabbd55e6d404fcbadbcb699b63L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17416185</div><div id='project'> Project Name: mims-harvard/tdc</div><div id='commit'> Commit Name: 77a6e4386efd75bd5d14443ee59d04cdfb98e3cc</div><div id='time'> Time: 2020-11-06</div><div id='author'> Author: kexinhuang@hsph.harvard.edu</div><div id='file'> File Name: data_process/QM_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: QM7_process(3)</div><div id='n_method'> N Method Name: QM7_process(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data_process/QM_utils.py</div><div id='n_file'> N File Name: data_process/QM_utils.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            new_inter[label_field][act_inter_num: act_inter_num + pos_num] = 1

            used_item_id[uid] = self.sampler.used_item_id[self.phase][uid]
            used_num<a id="change"> = </a><a id="change">len(</a>used_item_id[uid]<a id="change">)</a>
            neg_num = tot_item_num - used_num
            neg_end = new_inter_num + pos_num + neg_num
            pos_len_list.append(pos_num)
            user_idx_list.append(slice(new_inter_num, neg_end))</code></pre><h3>After Change</h3><pre><code class='java'>
            user_idx_list.append(slice(new_inter_num, neg_end))
            new_inter_num += pos_num + neg_num

        users<a id="change"> = </a><a id="change">pd.DataFrame(</a>{uid_field: users}<a id="change">)</a>
        users<a id="change"> = </a>self._dataframe_to_interaction(self.join(users))

        return users, pos_idx, used_idx, pos_len_list, user_idx_list
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/a137aa3d249a3246d7cbc1f748604ba4aec12a8f#diff-f41d5d93e76efa5638a691f8947c424c58ec3f51b884fc0d235ddd324dd574f2L334' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17416206</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: a137aa3d249a3246d7cbc1f748604ba4aec12a8f</div><div id='time'> Time: 2020-08-04</div><div id='author'> Author: houyupeng@ruc.edu.cn</div><div id='file'> File Name: data/dataloader.py</div><div id='m_class'> M Class Name: GeneralFullDataLoader</div><div id='n_method'> N Class Name: GeneralFullDataLoader</div><div id='m_method'> M Method Name: _neg_sampling(2)</div><div id='n_method'> N Method Name: _neg_sampling(2)</div><div id='m_parent_class'> M Parent Class: GeneralGroupedDataLoader</div><div id='n_parent_class'> N Parent Class: GeneralGroupedDataLoader</div><div id='m_file'> M File Name: data/dataloader.py</div><div id='n_file'> N File Name: data/dataloader.py</div><div id='m_start'> M Start Line: 335</div><div id='m_end'> M End Line: 368</div><div id='n_start'> N Start Line: 335</div><div id='n_end'> N End Line: 369</div><BR>