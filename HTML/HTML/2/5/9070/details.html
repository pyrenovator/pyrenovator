<html><h3>Pattern ID :9070
</h3><img src='32959636.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    for i in range(repeat):
        score = 0
        done = False
        state<a id="change"> = </a>env.reset()
        while not done:
            prob = brain.get_action(torch.from_numpy(state).float())
            dist = Categorical(prob)
            action<a id="change"> = </a><a id="change">dist.sample()</a>.item()
            next_state<a id="change">, reward, done, _ = </a>env.step(action)

            state = next_state
</code></pre><h3>After Change</h3><pre><code class='java'>
    score_lst = []
    for i in range(repeat):
        score = 0
        score<a id="change">, _, _</a> = run_env(env, brain)
        score_lst.append(score)
    return sum(score_lst)/repeat</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/seolhokim/distributedrl-pytorch-ray/commit/b004ce43129b395f16997797c46dfa75a62dabc9#diff-9653b8c2ce917a6134298b00c8b3f7d4b7c4dc473a752303f37a870392742127L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32959636</div><div id='project'> Project Name: seolhokim/distributedrl-pytorch-ray</div><div id='commit'> Commit Name: b004ce43129b395f16997797c46dfa75a62dabc9</div><div id='time'> Time: 2021-06-03</div><div id='author'> Author: kilmya1@naver.com</div><div id='file'> File Name: utils/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_agent(3)</div><div id='n_method'> N Method Name: test_agent(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/utils.py</div><div id='n_file'> N File Name: utils/utils.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 72</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        p, h = self.forward(state, hidden)
        action_mean = self.actor(p)

        cov_mat<a id="change"> = </a>torch.diag(self.action_var).to(device)

        dist = MultivariateNormal(action_mean, cov_mat)
        action<a id="change"> = </a><a id="change">dist.sample()</a>
        action_logprob<a id="change"> = </a>dist.log_prob(action)

        if test:
            return action_mean, action_logprob, h</code></pre><h3>After Change</h3><pre><code class='java'>
        p, h = self.forward(state, hidden)
        action = self.actor(p)

        return action<a id="change">, h</a>

    def evaluate(self, state, action, hidden):
        p, h = self.forward(state, hidden)
        action_mean = self.actor(p)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/antoinetheb/rnn-rl/commit/98950acf2dc010916e579839c4240f4411b8f542#diff-65ed63b1d5a2453dd7a01909599a53c8b34e5e4aeb47da236467cebb1223a1abL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32959664</div><div id='project'> Project Name: antoinetheb/rnn-rl</div><div id='commit'> Commit Name: 98950acf2dc010916e579839c4240f4411b8f542</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: antoine.theberge@usherbrooke.ca</div><div id='file'> File Name: algos/PPO.py</div><div id='m_class'> M Class Name: ActorCritic</div><div id='n_method'> N Class Name: ActorCritic</div><div id='m_method'> M Method Name: act(3)</div><div id='n_method'> N Method Name: act(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: algos/PPO.py</div><div id='n_file'> N File Name: algos/PPO.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                             gt_bboxes, gt_bboxes_ignore,
                                             gt_labels)

        bbox_sampler<a id="change"> = </a>PseudoSampler()
        sampling_result<a id="change"> = </a><a id="change">bbox_sampler.sample(</a>assign_result, anchors,
                                              gt_bboxes<a id="change">)</a>

        num_valid_anchors = anchors.shape[0]
        bbox_targets = torch.zeros_like(anchors)
        bbox_weights = torch.zeros_like(anchors)
        labels = anchors.new_full((num_valid_anchors,),
                                  self.num_classes,
                                  dtype=torch.long)
        label_weights = anchors.new_zeros(num_valid_anchors, dtype=torch.float)

        pos_inds<a id="change"> = </a>sampling_result.pos_inds
        neg_inds = sampling_result.neg_inds
        if len(pos_inds) &gt; 0:
            pos_bbox_targets = sampling_result.pos_gt_bboxes</code></pre><h3>After Change</h3><pre><code class='java'>
                                             gt_bboxes, gt_bboxes_ignore,
                                             gt_labels)

        pos_inds<a id="change">, neg_inds, pos_gt_bboxes, pos_assigned_gt_inds</a> = \
            self.sample(assign_result, gt_bboxes)

        num_valid_anchors = anchors.shape[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rangilyu/nanodet/commit/d422abc2b7162f42226d6aa9380208dec552fd38#diff-cb8fefbc2e4aded162b7aa797dfeb67e40e976b50b0e32f854a03879a1d64a6cL497' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 32959645</div><div id='project'> Project Name: rangilyu/nanodet</div><div id='commit'> Commit Name: d422abc2b7162f42226d6aa9380208dec552fd38</div><div id='time'> Time: 2021-02-18</div><div id='author'> Author: lyuchqi@gmail.com</div><div id='file'> File Name: nanodet/model/head/gfl_head.py</div><div id='m_class'> M Class Name: GFLHead</div><div id='n_method'> N Class Name: GFLHead</div><div id='m_method'> M Method Name: gfl_target_single(8)</div><div id='n_method'> N Method Name: gfl_target_single(10)</div><div id='m_parent_class'> M Parent Class: AnchorHead</div><div id='n_parent_class'> N Parent Class: AnchorHead</div><div id='m_file'> M File Name: nanodet/model/head/gfl_head.py</div><div id='n_file'> N File Name: nanodet/model/head/gfl_head.py</div><div id='m_start'> M Start Line: 504</div><div id='m_end'> M End Line: 553</div><div id='n_start'> N Start Line: 501</div><div id='n_end'> N End Line: 535</div><BR>