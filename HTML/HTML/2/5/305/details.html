<html><h3>Pattern ID :305
</h3><img src='2116289.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    scores = {}

    for idx, app in enumerate(appliances):
        <a id="change">if </a>len(y_pred.shape) == 3:
            app_pred = y_pred[:, :, idx].flatten()
            app_real = y_real[:, :, idx].flatten()
        else:
            app_pred<a id="change"> = </a>y_pred[:, idx].flatten()
            app_real = <a id="change">y_real[:, idx]</a>.flatten()

        &#47&#47 MSE and RMSE
        app_mse = mean_squared_error(app_real, app_pred)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Initialize dict
    scores = {}

    for app, values in <a id="change">dict_pred["appliance"].items()</a>:
        app_real = values[key_real]
        app_pred = values[key_pred]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uca-datalab/nilm-thresholding/commit/b0e823bdda4d77d17539b35c3b91e84c1a8f776e#diff-196a1e713dfb78059bc5c80024a4089b165e14e60114349f1c1b0d5322b916ccL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2116289</div><div id='project'> Project Name: uca-datalab/nilm-thresholding</div><div id='commit'> Commit Name: b0e823bdda4d77d17539b35c3b91e84c1a8f776e</div><div id='time'> Time: 2021-05-04</div><div id='author'> Author: danipg1409@gmail.com</div><div id='file'> File Name: nilm_thresholding/utils/scores.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: regression_scores_dict(3)</div><div id='n_method'> N Method Name: regression_scores_dict(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nilm_thresholding/utils/scores.py</div><div id='n_file'> N File Name: nilm_thresholding/utils/scores.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    classes_set = set(classes_to_show.keys())
    &#47&#47 iterate and sample
    for (sample_base, sample_aug) in zip(baseline_sampler, aug_sampler):
        <a id="change">if </a>not classes_set:
            break

        batch = original_dataset.to_batch(sample_base, sample_aug)
        batch_label: torch.Tensor = original_dataset.batch_to_labels(batch)
        images: List[np.ndarray] = original_dataset.batch_to_images(batch)
        base_label: torch.Tensor = batch_label[0]
        aug_label: torch.Tensor = batch_label[1]
        if original_dataset.task_type == TaskType.OBJECT_DETECTION:
            &#47&#47 Classes are the first item in the label
            all_classes_in_label<a id="change"> = </a>set(
                <a id="change">base_label[:, 0]</a>.tolist() if len(base_label) &gt; 0 else []
            )
            &#47&#47 If not relevant classes continue
            intersect = all_classes_in_label.intersection(classes_set)</code></pre><h3>After Change</h3><pre><code class='java'>
    }

    &#47&#47 Sorting classes by diff value
    classes = [k for k, v in sorted(<a id="change">classes_to_show.items()</a>, key=lambda item: item[1])]
    samples = []

    for class_id in classes:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/ac91e11609d100edd098f4ad1a989a33163b7a87#diff-6e45c52f7ed481fc49a62cbed9c40274daa7f4411f09c44a2565c0e66adc21d1L331' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2116309</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: ac91e11609d100edd098f4ad1a989a33163b7a87</div><div id='time'> Time: 2022-03-16</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: deepchecks/vision/checks/performance/robustness_report.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_random_image_pairs_from_dataset(3)</div><div id='n_method'> N Method Name: get_random_image_pairs_from_dataset(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/vision/checks/performance/robustness_report.py</div><div id='n_file'> N File Name: deepchecks/vision/checks/performance/robustness_report.py</div><div id='m_start'> M Start Line: 343</div><div id='m_end'> M End Line: 394</div><div id='n_start'> N Start Line: 335</div><div id='n_end'> N End Line: 368</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        variables = self.objective.optim_vars
        for i in range(self.objective.trajectory_len):
            <a id="change">if </a>values_dict is None:
                <a id="change">trajectory[:, :pose_numel, i]</a> = variables[f"pose_{i}"].tensor.clone()
                trajectory[:, pose_numel:, i]<a id="change"> = </a>variables[f"vel_{i}"].tensor.clone()
            else:
                trajectory[:, :pose_numel, i] = values_dict[f"pose_{i}"]
                trajectory[:, pose_numel:, i] = values_dict[f"vel_{i}"]</code></pre><h3>After Change</h3><pre><code class='java'>
        )
        if values_dict is None:
            values_dict = {
                k: t.tensor.clone() for (k, t) in <a id="change">self.objective.optim_vars.items()</a>
            }
        for i in range(self.objective.trajectory_len):
            trajectory[:, :pose_numel, i] = values_dict[f"pose_{i}"]
            if f"vel_{i}" in values_dict:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/facebookresearch/theseus/commit/21c777044d5c1f431e45f24abc80e051a1226b7a#diff-b719125442af4e86f50c88aed9d727aee4bdb04e56f0205dc453cdbdfed9f58eL400' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2116316</div><div id='project'> Project Name: facebookresearch/theseus</div><div id='commit'> Commit Name: 21c777044d5c1f431e45f24abc80e051a1226b7a</div><div id='time'> Time: 2023-02-24</div><div id='author'> Author: 4759586+luisenp@users.noreply.github.com</div><div id='file'> File Name: theseus/utils/examples/motion_planning/motion_planner.py</div><div id='m_class'> M Class Name: MotionPlanner</div><div id='n_method'> N Class Name: MotionPlanner</div><div id='m_method'> M Method Name: get_trajectory(3)</div><div id='n_method'> N Method Name: get_trajectory(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: theseus/utils/examples/motion_planning/motion_planner.py</div><div id='n_file'> N File Name: theseus/utils/examples/motion_planning/motion_planner.py</div><div id='m_start'> M Start Line: 408</div><div id='m_end'> M End Line: 424</div><div id='n_start'> N Start Line: 418</div><div id='n_end'> N End Line: 426</div><BR>