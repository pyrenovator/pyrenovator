<html><h3>Pattern ID :18815
</h3><img src='61102288.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    z = np.random.normal(0, 1, m)

    up = <a id="change">np.random.rand(</a>N, 1<a id="change">)</a>
    if sparse_variables_1 &gt; 0:
        if sparse_variables_1 &lt; 1:
            sparse_variables_1 = np.ceil(sparse_variables_1 * N).astype(&quotint&quot)
        up[np.random.choice(np.arange(N), N - sparse_variables_1, replace=False)] = 0
    vp = np.random.rand(M, 1)
    if sparse_variables_2 &gt; 0:
        if sparse_variables_2 &lt; 1:
            sparse_variables_2 = np.ceil(sparse_variables_2 * M).astype(&quotint&quot)
        vp[np.random.choice(np.arange(M), M - sparse_variables_2, replace=False)] = 0
    gaussian_x = np.random.normal(0, eps, (m, N))
    gaussian_y = np.random.normal(0, eps, (m, M))

    X<a id="change"> = </a>np.outer(z, up)
    Y = np.outer(z, vp)

    X += gaussian_x</code></pre><h3>After Change</h3><pre><code class='java'>
    z = np.random.normal(0, 1, n)
    views = []
    true_features = []
    <a id="change">for </a>p, <a id="change">sparsity</a> in zip(view_features, view_sparsity)<a id="change">:
        </a>weights = np.random.rand(p, 1)
        if sparsity &gt; 0:
            if sparsity &lt; 1:
                sparsity = np.ceil(sparsity * p).astype(&quotint&quot)
            weights[np.random.choice(np.arange(p), p - sparsity, replace=False)] = 0

        gaussian_x = np.random.normal(0, eps, (n, p))
        view = np.outer(z, weights)
        view<a id="change"> += </a>gaussian_x
        views.append(view)
        true_features.append(weights)
    return views, true_features</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/6e0c61ce1ab34a95c67f794aefa73814ef633df0#diff-530930897d76d92962b08f6b999b56ba19208433ee58e0c9b3aa3b0d86255bf2L98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61102288</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: 6e0c61ce1ab34a95c67f794aefa73814ef633df0</div><div id='time'> Time: 2021-04-27</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: generate_simple_data(4)</div><div id='n_method'> N Method Name: generate_simple_data(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cca_zoo/data.py</div><div id='n_file'> N File Name: cca_zoo/data.py</div><div id='m_start'> M Start Line: 327</div><div id='m_end'> M End Line: 361</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 123</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        loader = self.dataset.get_dataloader(mode=&quottrain&quot, batch_size=self.class_sample_num, classes=_class,
                                            shuffle=True, num_workers=0, pin_memory=False, drop_last=True)
        _input, _label = next(iter(loader))
        noisy<a id="change"> = </a><a id="change">torch.rand(</a>input.shape<a id="change">)</a>
        

        &#47&#47 generator
        generator = Generator(self.dataset.num_classes, self.mark.mark.shape[0])</code></pre><h3>After Change</h3><pre><code class='java'>
            loss.backward()
            optimizer.step()

        <a id="change">for param</a> in generator.parameters()<a id="change">:
            </a>param.requires_grad<a id="change"> = </a>False

        trigger = generator(noisy, label)
        pert_loss = self.pert_loss(trigger)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/477b65f0fa762dd196ae51eddad9eda79706ebaa#diff-e6b472ae6e53034412b9b470b73f251685627f4f3e7a4c9719aed27f46810ce2L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61102290</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 477b65f0fa762dd196ae51eddad9eda79706ebaa</div><div id='time'> Time: 2020-07-10</div><div id='author'> Author: zxx5113@lrs-twang01.ist.psu.edu</div><div id='file'> File Name: trojanzoo/defense/backdoor/deepinspect.py</div><div id='m_class'> M Class Name: DeepInspect</div><div id='n_method'> N Class Name: DeepInspect</div><div id='m_method'> M Method Name: cgan(2)</div><div id='n_method'> N Method Name: cgan(2)</div><div id='m_parent_class'> M Parent Class: Defense_Backdoor</div><div id='n_parent_class'> N Parent Class: Defense_Backdoor</div><div id='m_file'> M File Name: trojanzoo/defense/backdoor/deepinspect.py</div><div id='n_file'> N File Name: trojanzoo/defense/backdoor/deepinspect.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                node_feature=node_feature,
            )
        else:
            node_feature<a id="change"> = </a><a id="change">torch.rand(</a>[1, ]<a id="change">)</a>
            node_type = "n2"
            node_label = 1
            G.add_node(
                i,</code></pre><h3>After Change</h3><pre><code class='java'>
    num_node = 20
    node_label_options = [0, 1, 2, 3]
    edge_label_options = [0, 1, 2]
    <a id="change">for i</a> in range(num_node)<a id="change">:
        </a>node_feature = torch.rand([1, ])
        if i &lt; 10:
            node_type = "n1"
        else:
            node_type = "n2"
        node_label<a id="change"> = </a>random.choice(node_label_options)
        G.add_node(
            i,
            node_type=node_type,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/snap-stanford/deepsnap/commit/d77a281f4444a1ce0c9e3bd60c8f33f4469c0e5f#diff-9e08e8c7769db7b58089fd7659d75ca96df40bb7b5d50299d3a30abd54da9ad6L431' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61102285</div><div id='project'> Project Name: snap-stanford/deepsnap</div><div id='commit'> Commit Name: d77a281f4444a1ce0c9e3bd60c8f33f4469c0e5f</div><div id='time'> Time: 2020-12-17</div><div id='author'> Author: xhe17@stanford.edu</div><div id='file'> File Name: tests/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: generate_dense_hete_dataset(1)</div><div id='n_method'> N Method Name: generate_dense_hete_dataset(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/utils.py</div><div id='n_file'> N File Name: tests/utils.py</div><div id='m_start'> M Start Line: 432</div><div id='m_end'> M End Line: 485</div><div id='n_start'> N Start Line: 417</div><div id='n_end'> N End Line: 463</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    torch.backends.cudnn.deterministic = True

    data<a id="change"> = </a><a id="change">torch.rand(</a>2, 3, 224, 224<a id="change">)</a>

    for model_cls in MODEL_LIST:
        if model_cls in RANDOMIZED_MODELS:
            &#47&#47 remove the impact of randomicity</code></pre><h3>After Change</h3><pre><code class='java'>

            assert len(transformed_out) == len(transformed_non_fx_out)

            <a id="change">for key</a> in transformed_out.keys()<a id="change">:
                </a>fx_val<a id="change"> = </a>transformed_out[key]
                non_fx_val = transformed_non_fx_out[key]
                assert torch.allclose(
                    fx_val,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hpcaitech/colossalai/commit/a674c6334846aa4af71703961d68907e8d0611b2#diff-5a6663c4257c6858e673f03749560f077ee49f9bc1c0b9b54830f6b978727452L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61102286</div><div id='project'> Project Name: hpcaitech/colossalai</div><div id='commit'> Commit Name: a674c6334846aa4af71703961d68907e8d0611b2</div><div id='time'> Time: 2023-03-14</div><div id='author'> Author: somerlee.9@gmail.com</div><div id='file'> File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_torchvision_models(0)</div><div id='n_method'> N Method Name: test_torchvision_models(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='n_file'> N File Name: tests/test_fx/test_tracer/test_torchvision_model/test_torchvision_model.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 8</div><div id='n_end'> N End Line: 42</div><BR>