<html><h3>Pattern ID :30076
</h3><img src='89238291.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            hids = self.kg_feat[self.head_entity_field].values
            tids = self.kg_feat[self.tail_entity_field].values

            <a id="change">if </a>value_field is None:
                data = np.ones(<a id="change">len(</a>self.kg_feat<a id="change">)</a>)
            else:
                if value_field not in self.field2source:
                    raise ValueError(&quotvalue_field [{}] not exist.&quot.format(value_field))</code></pre><h3>After Change</h3><pre><code class='java'>
        elif form in [&quotdgl&quot, &quotpyg&quot]:
            return self._create_graph(*args)
        else:
            <a id="change">raise </a><a id="change">NotImplementedError(&quotkg graph format [{}] has not been implemented.&quot</a><a id="change">)</a>

    def _create_ckg_sparse_matrix(self, form=&quotcoo&quot, show_relation=False):
        user_num = self.user_num
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/99520bd0ce125867d14c0bc57c3414e484b9c125#diff-1b5255bd2257e1b85f62533b85b549035713df4082ea4c175034665cf444afc0L188' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 89238291</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 99520bd0ce125867d14c0bc57c3414e484b9c125</div><div id='time'> Time: 2020-09-23</div><div id='author'> Author: houyupeng@ruc.edu.cn</div><div id='file'> File Name: recbox/data/dataset/kg_dataset.py</div><div id='m_class'> M Class Name: KnowledgeBasedDataset</div><div id='n_method'> N Class Name: KnowledgeBasedDataset</div><div id='m_method'> M Method Name: kg_graph(3)</div><div id='n_method'> N Method Name: kg_graph(3)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: recbox/data/dataset/kg_dataset.py</div><div id='n_file'> N File Name: recbox/data/dataset/kg_dataset.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 221</div><div id='n_start'> N Start Line: 188</div><div id='n_end'> N End Line: 196</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @property
    def end_index(self) -&gt; Union[int, None]:
        <a id="change">if </a>len(self) == 0:
            return None
        return None if <a id="change">len(</a>self<a id="change">)</a> == 0 else self.start_index + len(self) - 1

    def write(self, data_array: Union[List, np.ndarray, Tuple], index: int = None):
        Write data_array to FeatureStorage starting from index.</code></pre><h3>After Change</h3><pre><code class='java'>

        If the data(storage) does not exist, return None
        
        <a id="change">raise </a><a id="change">NotImplementedError("Subclass of FeatureStorage must implement `end_index` method"</a><a id="change">)</a>

    def clear(self) -&gt; None:
        raise NotImplementedError("Subclass of FeatureStorage must implement `clear` method")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/5da33562ddae7f78439d211269232b40f5231857#diff-f65772de27f08c0dd47f7caff3c841d93a0808e109fe9da244ee9c414424cf6aL258' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 89238293</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 5da33562ddae7f78439d211269232b40f5231857</div><div id='time'> Time: 2021-05-25</div><div id='author'> Author: zhu.pengrong@foxmail.com</div><div id='file'> File Name: qlib/data/storage/storage.py</div><div id='m_class'> M Class Name: FeatureStorage</div><div id='n_method'> N Class Name: FeatureStorage</div><div id='m_method'> M Method Name: end_index(1)</div><div id='n_method'> N Method Name: end_index(1)</div><div id='m_parent_class'> M Parent Class: BaseStorage</div><div id='n_parent_class'> N Parent Class: BaseStorage</div><div id='m_file'> M File Name: qlib/data/storage/storage.py</div><div id='n_file'> N File Name: qlib/data/storage/storage.py</div><div id='m_start'> M Start Line: 259</div><div id='m_end'> M End Line: 261</div><div id='n_start'> N Start Line: 299</div><div id='n_end'> N End Line: 299</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    path = urlpath.split("::")[0]
    &#47&#47 remove "dl=1" query param: https://foo.bar/train.json.gz?dl=1 -&gt; https://foo.bar/train.json.gz
    suf = "?dl=1"
    <a id="change">if </a>path.endswith(suf):
        path = path[: -<a id="change">len(</a>suf<a id="change">)</a>]

    &#47&#47 Get extension: https://foo.bar/train.json.gz -&gt; gz
    extension = path.split(".")[-1]</code></pre><h3>After Change</h3><pre><code class='java'>
        pass
    elif extension in COMPRESSION_EXTENSION_TO_PROTOCOL:
        return COMPRESSION_EXTENSION_TO_PROTOCOL[extension]
    <a id="change">raise </a><a id="change">NotImplementedError(f"Extraction protocol &quot{extension}&quot for file at &quot{urlpath}&quot is not implemented yet"</a><a id="change">)</a>


def xopen(file, mode="r", *args, **kwargs):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/492fb1640cc311ac1eda4be4ed3ea08341a1decb#diff-4c0de8006f7290eb614aea915a81e7f9dd9d42eda88ff80f2d13cdfe976a60ebL140' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 89238299</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 492fb1640cc311ac1eda4be4ed3ea08341a1decb</div><div id='time'> Time: 2021-10-04</div><div id='author'> Author: 8515462+albertvillanova@users.noreply.github.com</div><div id='file'> File Name: src/datasets/utils/streaming_download_manager.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_extraction_protocol(1)</div><div id='n_method'> N Method Name: _get_extraction_protocol(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/utils/streaming_download_manager.py</div><div id='n_file'> N File Name: src/datasets/utils/streaming_download_manager.py</div><div id='m_start'> M Start Line: 142</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 153</div><BR>