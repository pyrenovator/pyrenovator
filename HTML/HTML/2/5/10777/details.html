<html><h3>Pattern ID :10777
</h3><img src='37158764.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        speech = torch.transpose(torch.Tensor(self.feature_list[index][2]), 0, 1).to(self.device)
        speech_len = torch.LongTensor([self.feature_list[index][3]]).to(self.device)
        if self.spemb:
            spemb = <a id="change">torch.Tensor(self.feature_list[index][4]).to(</a>self.device<a id="change">)</a>
            return text<a id="change">, text_len, speech, speech_len, spemb</a>
        return text, text_len, speech, speech_len

    def __len__(self):
        return len(self.feature_list)</code></pre><h3>After Change</h3><pre><code class='java'>
    def __getitem__(self, index):
        transcript = self.path_to_transcript_dict[self.key_list[index]]
        path = self.key_list[index]
        wave<a id="change">, sr = </a>sf.read(<a id="change">os.path.join("Corpora/CSS10/"</a>, path<a id="change">)</a>)
        if self.ap is None:
            self.ap = AudioPreprocessor(input_sr=sr, output_sr=16000, melspec_buckets=80, hop_length=256, n_fft=1024)
        text = self.tf.string_to_tensor(transcript).long()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/1e192df888be8f1dc1c20971132b31fe73153b7d#diff-0965ad6e3a8f04afe3a358a7558e203eaa1f244ad6e8e6fbfe73f8a2052b8cb1L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37158764</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: 1e192df888be8f1dc1c20971132b31fe73153b7d</div><div id='time'> Time: 2021-02-22</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: TransformerTTS/TransformerTTSDataset.py</div><div id='m_class'> M Class Name: TransformerTTSDataset</div><div id='n_method'> N Class Name: TransformerTTSDataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: TransformerTTS/TransformerTTSDataset.py</div><div id='n_file'> N File Name: TransformerTTS/TransformerTTSDataset.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.n_relation = self.config[&quotn_relation&quot]

        entity_edges, word_edges = side_data
        self.entity_edges, self.word_edges = [<a id="change">ele.to(</a>self.device<a id="change">)</a> for ele in entity_edges]<a id="change">, word_edges.to(self.device)</a>

        self.build_model()

    def build_model(self, pretrained_embedding=None):</code></pre><h3>After Change</h3><pre><code class='java'>
        self.n_positions = self.opt[&quotn_positions&quot]
        self.response_truncate = self.opt.get(&quotresponse_truncate&quot, 20)
        &#47&#47 copy mask
        dpath<a id="change"> = </a><a id="change">os.path.join(</a>DATA_PATH, <a id="change">"kgsf"</a><a id="change">)</a>
        dfile = DownloadableFile(&quot1zrszs2EcNlim3l7O0BH6XbalLMeUcMFv&quot, &quotredial.zip&quot,
                                 &quotf627841644a184079acde1b0185e3a223945061c3a591f4bc0d7f62e7263f548&quot,
                                 from_google=True)
        build(dpath, dfile)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/crslab/commit/7170808360daa341d8a6e8e9fc80446ff85670e0#diff-74ac1bb9f94ce15dc2f3c84c6dfc615e4f6f9efe6ff22da3d6a72ee2000bfcecL33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37158765</div><div id='project'> Project Name: rucaibox/crslab</div><div id='commit'> Commit Name: 7170808360daa341d8a6e8e9fc80446ff85670e0</div><div id='time'> Time: 2020-12-01</div><div id='author'> Author: wxl1999@foxmail.com</div><div id='file'> File Name: crslab/model/kgsf_model.py</div><div id='m_class'> M Class Name: KGSFModel</div><div id='n_method'> N Class Name: KGSFModel</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: BaseModel</div><div id='n_parent_class'> N Parent Class: BaseModel</div><div id='m_file'> M File Name: crslab/model/kgsf_model.py</div><div id='n_file'> N File Name: crslab/model/kgsf_model.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 63</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    with torch.no_grad():
        for i, (data, target) in enumerate(tqdm(data_loader)):
            data, target = data.to(device)<a id="change">, target.to(device)</a>
            output = model(data)

            &#47&#47
            &#47&#47 save sample images, or do something with output here</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47    total_metrics[i] += metric(output, target) * batch_size

    df = pd.DataFrame({&quotimage_id&quot: image_id, &quotlabel&quot: label})
    out_csv<a id="change"> = </a><a id="change">os.path.join(</a>args.out_dir, <a id="change">&quottest_pred.csv&quot</a><a id="change">)</a>
    df.to_csv(out_csv, index=False)
    logger.debug(&quotdone.&quot)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeperlearner/pytorch-template/commit/49ac2e7c4e18177db31ae741c8dfd7cdbf5ca0f0#diff-3665d65394f4f58a56a256ad6dd8621c68118d90fe56a19387e251c19cec2d2eL13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37158763</div><div id='project'> Project Name: deeperlearner/pytorch-template</div><div id='commit'> Commit Name: 49ac2e7c4e18177db31ae741c8dfd7cdbf5ca0f0</div><div id='time'> Time: 2020-11-11</div><div id='author'> Author: b04202035@g.ntu.edu.tw</div><div id='file'> File Name: test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test.py</div><div id='n_file'> N File Name: test.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 76</div><BR>