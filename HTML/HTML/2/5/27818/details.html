<html><h3>Pattern ID :27818
</h3><img src='82662865.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        k.start()
        time.sleep(0.1)  &#47&#47 avoid simulator bugs
    stat = StatCounter()
    <a id="change">try:
        &#47&#47 TODO test for size q and handle proper exceptions
        </a>for _ in tqdm(range(nr_eval), **get_tqdm_kwargs()):
            r = q.get()
            stat.feed(r)
        logger.info("Waiting for all the workers to finish the last run...")
        for k in threads:
            k.stop()
        for k in threads:
            k.join()
        while q.qsize():
            r = q.get()
            stat.feed(r)
    <a id="change">except </a>Exception as ex:
        traceback.print_exc() &#47&#47 exactly traces the exception to what line it occurred and prints the entire trace of it.
        <a id="change">logger.exception("Eval"</a><a id="change">)</a>
    finally:
        if stat.count &gt; 0:
            return (stat.average, stat.max)
        return (0, 0)</code></pre><h3>After Change</h3><pre><code class='java'>

    if stat.count &gt; 0:
        return (stat.average, stat.max, dist_stat.average, dist_stat.max)
    <a id="change">return </a>(0, 0, 0, 0)

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/2d903de1af7d2b239a1b5ccee77d05befee8db86#diff-9e75b6ab37db31b4f864bf6757547c800f820c0a4722148fa78e6ff735dc4be3L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82662865</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 2d903de1af7d2b239a1b5ccee77d05befee8db86</div><div id='time'> Time: 2017-11-01</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_with_funcs(4)</div><div id='n_method'> N Method Name: eval_with_funcs(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='n_file'> N File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 124</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        k.start()
        time.sleep(0.1)  &#47&#47 avoid simulator bugs
    stat = StatCounter()
    <a id="change">try:
        &#47&#47 TODO test for size q and handle proper exceptions
        </a>for _ in tqdm(range(nr_eval), **get_tqdm_kwargs()):
            r = q.get()
            stat.feed(r)
        logger.info("Waiting for all the workers to finish the last run...")
        for k in threads:
            k.stop()
        for k in threads:
            k.join()
        while q.qsize():
            r = q.get()
            stat.feed(r)
    <a id="change">except </a>Exception as ex:
        traceback.print_exc() &#47&#47 exactly traces the exception to what line it occurred and prints the entire trace of it.
        <a id="change">logger.exception("Eval"</a><a id="change">)</a>
    finally:
        if stat.count &gt; 0:
            return (stat.average, stat.max)
        return (0, 0)</code></pre><h3>After Change</h3><pre><code class='java'>

    if stat.count &gt; 0:
        return (stat.average, stat.max, dist_stat.average, dist_stat.max)
    <a id="change">return </a>(0, 0, 0, 0)

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/249c649721c645c497311bacc239a3d6a448851e#diff-f837bfb74f16363c790f9607a284c91e63c956876ec5199b90a6d9c590ab672aL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82662867</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 249c649721c645c497311bacc239a3d6a448851e</div><div id='time'> Time: 2018-01-09</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_with_funcs(4)</div><div id='n_method'> N Method Name: eval_with_funcs(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='n_file'> N File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 124</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        request_message = json.dumps(request).encode()
        cloud_simulator_endpoint = "http://" + self.cloud_simulator_address

        <a id="change">try:
            </a>import requests  &#47&#47 `requests` is not part of stdlib.
            from requests.exceptions import ConnectionError

            r = requests.get(
                cloud_simulator_endpoint,
                data=request_message,
                headers=headers,
                timeout=None,
            )
        except (RemoteDisconnected, ConnectionError):
            logger.exception("Could not connect to: " +
                             cloud_simulator_endpoint +
                             ". Did you launched the Cloud Simulator by running python cloudtik_cloud_simulator.py" +
                             " --ips &lt;list_of_node_ips&gt; --port &lt;PORT&gt;?")
            raise
        <a id="change">except </a>ImportError:
            <a id="change">logger.exception(
                "Not all dependencies were found. Please "
                "update your install command."</a><a id="change">)</a>
            raise

        response = r.json()
        return response</code></pre><h3>After Change</h3><pre><code class='java'>
        self.cloud_simulator_address = provider_config["cloud_simulator_address"]

    def _get_http_response(self, request):
        <a id="change">return </a>_get_http_response_from_simulator(self.cloud_simulator_address, request)

    def non_terminated_nodes(self, tag_filters):
        &#47&#47 Only get the non terminated nodes associated with this cluster name.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/b01ee541c658343d92f1e0ebc77f3b3e510d66e0#diff-f9cfebcc1b19a9cc61a719a3b838fcb08729de2286ef788dab134d41c69bea1cL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82662866</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: b01ee541c658343d92f1e0ebc77f3b3e510d66e0</div><div id='time'> Time: 2022-04-23</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/providers/_private/local/cloud_simulator_node_provider.py</div><div id='m_class'> M Class Name: CloudSimulatorNodeProvider</div><div id='n_method'> N Class Name: CloudSimulatorNodeProvider</div><div id='m_method'> M Method Name: _get_http_response(2)</div><div id='n_method'> N Method Name: _get_http_response(2)</div><div id='m_parent_class'> M Parent Class: NodeProvider</div><div id='n_parent_class'> N Parent Class: NodeProvider</div><div id='m_file'> M File Name: python/cloudtik/providers/_private/local/cloud_simulator_node_provider.py</div><div id='n_file'> N File Name: python/cloudtik/providers/_private/local/cloud_simulator_node_provider.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 61</div><BR>