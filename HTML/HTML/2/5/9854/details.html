<html><h3>Pattern ID :9854
</h3><img src='35300699.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 constraint on background size.
        loss_sz_con = torch.tensor([0.])
        bsz<a id="change"> = </a><a id="change">float(</a>scores_pos.shape[0]<a id="change">)</a>
        if self.use_size_const:
            loss_sz_con = self.size_const(masks_pred=masks_pred) / bsz
            total_loss = total_loss + loss_sz_con
</code></pre><h3>After Change</h3><pre><code class='java'>
                cams=None
                ):

        <a id="change">if self.dataset_name == constants.GLAS</a>:
            return self.forward_glas(
                scores_pos=scores_pos,
                sc_cl_se=sc_cl_se,
                labels=labels,
                masks_pred=masks_pred,
                scores_neg=scores_neg
            )

        if self.dataset_name == constants.CAMELYON16P512:
            return self.f_camelyon16(
                scores_pos=scores_pos,
                sc_cl_se=sc_cl_se,
                labels=labels,
                masks_pred=masks_pred,
                scores_neg=scores_neg,
                cams=cams
            )

        <a id="change">raise </a>NotImplementedError

    def __str__(self):
        return "{}()".format(self.__class__.__name__,)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sbelharbi/deep-wsl-histo-min-max-uncertainty/commit/8af2e1a0370e2defdb7fb3f0930777daafaa5e2f#diff-15826de0403bd1b0033a16198a3253fcfe6feea537fe9478946efe9a9a3ceb0aL186' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35300699</div><div id='project'> Project Name: sbelharbi/deep-wsl-histo-min-max-uncertainty</div><div id='commit'> Commit Name: 8af2e1a0370e2defdb7fb3f0930777daafaa5e2f</div><div id='time'> Time: 2021-12-19</div><div id='author'> Author: soufiane.belharbi@gmail.com</div><div id='file'> File Name: deepmil/criteria.py</div><div id='m_class'> M Class Name: TrainLoss</div><div id='n_method'> N Class Name: TrainLoss</div><div id='m_method'> M Method Name: forward(7)</div><div id='n_method'> N Method Name: forward(6)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: deepmil/criteria.py</div><div id='n_file'> N File Name: deepmil/criteria.py</div><div id='m_start'> M Start Line: 186</div><div id='m_end'> M End Line: 209</div><div id='n_start'> N Start Line: 398</div><div id='n_end'> N End Line: 420</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @staticmethod
    def get_sigma(X):
        npoints = torch.tensor(<a id="change">float(</a>len(X)<a id="change">)</a>)
        nsqrt<a id="change"> = </a>npoints**(1./X.shape[1]) - 1.
        delta = (X.max(0).values - X.min(0).values) / nsqrt
        return delta.expand(X.size())
</code></pre><h3>After Change</h3><pre><code class='java'>

        if isinstance(self.sigma_method,float):
            return self.get_sigma_ones(self.centers, s=self.sigma_method)
        elif <a id="change">self.sigma_method == &quot1d&quot</a>:
            return self.get_sigma_1d(self.centers)
        elif self.sigma_method == &quotmean&quot:
            return self.get_sigma_average(self.centers)
        else:
            <a id="change">raise </a>ValueError(self.sigma_method, &quot not a correct option for sigma&quot)

    @staticmethod
    def get_sigma_average(X):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/157db4eaa87f1f692ae29b423ac3cb8bcb8873f9#diff-0f891af57afb115ffddc9a1a93baac483839a2011946a7dd032026efd55d150fL92' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35300703</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 157db4eaa87f1f692ae29b423ac3cb8bcb8873f9</div><div id='time'> Time: 2019-06-17</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: pyCHAMP/wavefunction/rbf.py</div><div id='m_class'> M Class Name: RBF</div><div id='n_method'> N Class Name: RBF</div><div id='m_method'> M Method Name: get_sigma(1)</div><div id='n_method'> N Method Name: get_sigma(1)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: pyCHAMP/wavefunction/rbf.py</div><div id='n_file'> N File Name: pyCHAMP/wavefunction/rbf.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 101</div><div id='n_end'> N End Line: 110</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

                    &#47&#47 exlude distances with matched edges from further consideration
                    dist_matrix[row, :] = float(&quotinf&quot)
                    dist_matrix[:, col]<a id="change"> = </a><a id="change">float(</a>&quotinf&quot<a id="change">)</a>
                
                print(match)
                rearranged_pattern = torch.stack([gt_patterns[pattern_idx][i] for i in match]).to(predicted_patterns.device)
                </code></pre><h3>After Change</h3><pre><code class='java'>

                &#47&#47 find optimal assginment, see https://pypi.org/project/munkres/1.0.9/
                indexes = assignment_solver.compute(dist_matrix)
                <a id="change">if len(indexes) != gt_len</a>:
                    <a id="change">raise </a>RuntimeError("ComposedPatternLoss::Error:: Failed to match panel order" )

                &#47&#47 Gather the GT in requested order
                match = [-1] * gt_len</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maria-korosteleva/garment-pattern-estimation/commit/99ab8d47fced9d447b88c94f6d20c0ffcef9da30#diff-66aae7ec57f079963bb4847ebb79bfda4004ba832ee23e11911a14908193967cL789' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35300689</div><div id='project'> Project Name: maria-korosteleva/garment-pattern-estimation</div><div id='commit'> Commit Name: 99ab8d47fced9d447b88c94f6d20c0ffcef9da30</div><div id='time'> Time: 2021-04-28</div><div id='author'> Author: mariako@kaist.ac.kr</div><div id='file'> File Name: nn/metrics.py</div><div id='m_class'> M Class Name: ComposedPatternLoss</div><div id='n_method'> N Class Name: ComposedPatternLoss</div><div id='m_method'> M Method Name: _panel_order_match(3)</div><div id='n_method'> N Method Name: _panel_order_match(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nn/metrics.py</div><div id='n_file'> N File Name: nn/metrics.py</div><div id='m_start'> M Start Line: 798</div><div id='m_end'> M End Line: 828</div><div id='n_start'> N Start Line: 822</div><div id='n_end'> N End Line: 845</div><BR>