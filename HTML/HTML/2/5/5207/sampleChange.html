<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if self._heatmap_publisher is not None and self._heatmap_publisher.get_num_connections() &gt; 0:
                heatmap_np = prediction.numpy()
                heatmap_o = self._colors[heatmap_np]
                heatmap_o = <a id="change">cv2.resize(</a>np.uint8(heatmap_o), (960<a id="change">, 720</a>)<a id="change">)</a>
                self._heatmap_publisher.publish(self._bridge.to_ros_image(Image(heatmap_o), encoding=&quotbgr8&quot))

        except Exception:
            rospy.logwarn(&quotFailed to generate prediction.&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
                self.heatmap_publisher.publish(self.bridge.to_ros_image(heatmap))

            &#47&#47 Publish heatmap color visualization blended with the input image and a class color legend
            if <a id="change">self.visualization_publisher is not None</a>:
                heatmap_colors = Image(self.colors[heatmap.numpy()])
                image = Image(<a id="change">cv2.resize(</a>image.convert("channels_last", "bgr"), (960<a id="change">, 720</a>)<a id="change">)</a>)
                alpha = 0.4  &#47&#47 1.0 means full input image, 0.0 means full heatmap
                beta = (1.0 - alpha)
                image_blended = cv2.addWeighted(image.opencv(), alpha, heatmap_colors.opencv(), beta, 0.0)</code></pre>