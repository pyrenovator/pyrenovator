<html><h3>Pattern ID :18168
</h3><img src='59581912.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        self.start_epoch = chkpt[&quotepoch&quot] + 1
        self.best_mAP = chkpt[&quotbest_mAP&quot]
        <a id="change">del chkpt</a>

        
    def __load_resume_weights(self):
</code></pre><h3>After Change</h3><pre><code class='java'>
        
    def __load_best_weights(self):
        best_weight = os.path.join(log_dir,"checkpoints", "best.pt")
        last_weight<a id="change"> = </a><a id="change">os.path.join(</a>log_dir,"checkpoints", <a id="change">"last.pt"</a><a id="change">)</a>    
        shutil.copy2(best_weight,
                     best_weight.replace("best.pt","best_before_fine_tune.pt"))
        last_chkpt<a id="change"> = </a>torch.load(last_weight, map_location=self.device)
        best_chkpt = torch.load(best_weight, map_location=self.device)
        self.yolov4.load_state_dict(best_chkpt)
        self.start_epoch = last_chkpt[&quotepoch&quot] + 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jingtianyilong/yolov4-pytorch/commit/9205889f12f82c8789044c657158bf974407d3ea#diff-ed183d67207df065a11e1289f19d34cc2abbc5448dea952683cfe9728c342b95L88' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59581912</div><div id='project'> Project Name: jingtianyilong/yolov4-pytorch</div><div id='commit'> Commit Name: 9205889f12f82c8789044c657158bf974407d3ea</div><div id='time'> Time: 2020-11-30</div><div id='author'> Author: zijie.guo@daimler.com</div><div id='file'> File Name: train.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: __load_best_weights(1)</div><div id='n_method'> N Method Name: __load_best_weights(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: train.py</div><div id='n_file'> N File Name: train.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 96</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    env.close()

    &#47&#47 Free memory
    <a id="change">del model</a>


if __name__ == &quot__main__&quot:
    represent_ex.observers.append(FileStorageObserver(&quotrep_learning_runs&quot))</code></pre><h3>After Change</h3><pre><code class='java'>
    model.learn(data)

    encoder_checkpoint = model.encoder_checkpoints_path
    all_checkpoints<a id="change"> = </a>glob(<a id="change">os.path.join(</a>encoder_checkpoint, <a id="change">&quot*&quot</a><a id="change">)</a>)
    latest_checkpoint<a id="change"> = </a>max(all_checkpoints, key=os.path.getctime)
    encoder_feature_extractor_kwargs = {&quotfeatures_dim&quot: representation_dim, &quotencoder_path&quot: latest_checkpoint}
    policy_kwargs = {&quotfeatures_extractor_class&quot: EncoderFeatureExtractor,
                     &quotfeatures_extractor_kwargs&quot: encoder_feature_extractor_kwargs }</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/671643185bd4527637c941cb87f3a5757aeabf3f#diff-e45f957dafb5047571db8ab3ad7ce91080ff7fb9cfd765ce1f676eaa2d0ecf45L47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59581908</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 671643185bd4527637c941cb87f3a5757aeabf3f</div><div id='time'> Time: 2020-07-23</div><div id='author'> Author: codywild@berkeley.edu</div><div id='file'> File Name: run_rep_learner.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(10)</div><div id='n_method'> N Method Name: run(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: run_rep_learner.py</div><div id='n_file'> N File Name: run_rep_learner.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 93</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 85</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    env.close()

    &#47&#47 Free memory
    <a id="change">del model</a>


if __name__ == &quot__main__&quot:
    represent_ex.observers.append(FileStorageObserver(&quotrep_learning_runs&quot))</code></pre><h3>After Change</h3><pre><code class='java'>
    model.learn(data)

    encoder_checkpoint = model.encoder_checkpoints_path
    all_checkpoints<a id="change"> = </a>glob(<a id="change">os.path.join(</a>encoder_checkpoint, <a id="change">&quot*&quot</a><a id="change">)</a>)
    latest_checkpoint<a id="change"> = </a>max(all_checkpoints, key=os.path.getctime)
    encoder_feature_extractor_kwargs = {&quotfeatures_dim&quot: representation_dim, &quotencoder_path&quot: latest_checkpoint}
    policy_kwargs = {&quotfeatures_extractor_class&quot: EncoderFeatureExtractor,
                     &quotfeatures_extractor_kwargs&quot: encoder_feature_extractor_kwargs }</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/a420017d1108a541747d380ef73b88de4393f51e#diff-e45f957dafb5047571db8ab3ad7ce91080ff7fb9cfd765ce1f676eaa2d0ecf45L47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59581911</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: a420017d1108a541747d380ef73b88de4393f51e</div><div id='time'> Time: 2020-07-23</div><div id='author'> Author: codywild@berkeley.edu</div><div id='file'> File Name: run_rep_learner.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(10)</div><div id='n_method'> N Method Name: run(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: run_rep_learner.py</div><div id='n_file'> N File Name: run_rep_learner.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 93</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 85</div><BR>