<html><h3>Pattern ID :23327
</h3><img src='73483077.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Image
    t1 = time_sync()
    im = <a id="change">cv2.cvtColor(</a>cv2.imread(file), cv2.COLOR_BGR2RGB<a id="change">)</a>
    im<a id="change"> = transforms(im).unsqueeze(0</a><a id="change">)</a>.to(device)
    im = im.half() if model.fp16 else im.float()
    t2 = time_sync()
    dt[0] += t2 - t1</code></pre><h3>After Change</h3><pre><code class='java'>
    model = DetectMultiBackend(weights, device=device, dnn=dnn, fp16=half)
    model.warmup(imgsz=(1, 3, imgsz, imgsz))  &#47&#47 warmup
    dataset = LoadImages(source, img_size=imgsz, transforms=classify_transforms(imgsz))
    <a id="change">for </a>path, im, im0s, vid_cap, s in dataset<a id="change">:
        &#47&#47 Image
        </a>t1 = time_sync()
        im = im.unsqueeze(0).to(device)
        im = im.half() if model.fp16 else im.float()
        t2 = time_sync()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ultralytics/yolov5/commit/64e0757edffc6b2e927e16c8e2aa26439aceb4ce#diff-b59588df76eca837ad0c0dcee1e81768a4c23e883b01a10f48261f605b8945abL38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73483077</div><div id='project'> Project Name: ultralytics/yolov5</div><div id='commit'> Commit Name: 64e0757edffc6b2e927e16c8e2aa26439aceb4ce</div><div id='time'> Time: 2022-08-17</div><div id='author'> Author: ayush.chaurarsia@gmail.com</div><div id='file'> File Name: classify/predict.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(9)</div><div id='n_method'> N Method Name: run(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: classify/predict.py</div><div id='n_file'> N File Name: classify/predict.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Returns:

        
        image = <a id="change">cv2.cvtColor(</a>image, cv2.COLOR_RGB2BGR<a id="change">)</a>
        image<a id="change"> = torch.from_numpy((image / 255).transpose(2, 0, 1)).unsqueeze(0</a><a id="change">)</a>.float()
        if prev_mask is None:
            mask = torch.zeros_like(image[:, :1, :, :])
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, rgb_np_img, clicks, img_md5):
        input_point = []
        input_label = []
        <a id="change">for </a>click in clicks<a id="change">:
            </a>x = click[0]
            y = click[1]
            input_point.append([x, y])
            input_label.append(click[2])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sanster/lama-cleaner/commit/a6aec566d963e67c17c0871dca1c89d26e1cdcaa#diff-61737126f3aec82fbe64cf47a5738476c24d85c0333ea7fde5f05f892bb00864L232' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73483079</div><div id='project'> Project Name: sanster/lama-cleaner</div><div id='commit'> Commit Name: a6aec566d963e67c17c0871dca1c89d26e1cdcaa</div><div id='time'> Time: 2023-04-06</div><div id='author'> Author: cwq1913@gmail.com</div><div id='file'> File Name: lama_cleaner/plugins/interactive_seg.py</div><div id='m_class'> M Class Name: InteractiveSeg</div><div id='n_method'> N Class Name: InteractiveSeg</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: BasePlugin</div><div id='n_parent_class'> N Parent Class: BasePlugin</div><div id='m_file'> M File Name: lama_cleaner/plugins/interactive_seg.py</div><div id='n_file'> N File Name: lama_cleaner/plugins/interactive_seg.py</div><div id='m_start'> M Start Line: 242</div><div id='m_end'> M End Line: 264</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            image = jpeg4py.JPEG(file).decode()
        except Exception as ex:
            image = cv2.imread(file)
        image = <a id="change">cv2.cvtColor(</a>image, cv2.COLOR_RGB2GRAY<a id="change">)</a>
        lbp = local_binary_pattern(image, 8, 1)
        feat = np.histogram(lbp, 128)[0]
        feat<a id="change"> = torch.tensor(feat).unsqueeze(0</a><a id="change">)</a>.cuda()
        if isinstance(file_feats, dict) is True:
            file_feats = feat
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
    lbp_loader = torch.utils.data.DataLoader(lbp_set, batch_size=8, shuffle=False, num_workers=cpu_count() / 2)
    &#47&#47 lbp_loader = torch.utils.data.DataLoader(lbp_set, batch_size=8, shuffle=False, num_workers=0)

    <a id="change">for </a>feat in tqdm(lbp_loader)<a id="change">:
        </a>if isinstance(file_feats, dict) is True:
            file_feats = feat
        else:
            file_feats = torch.cat((file_feats, feat), 0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leoluopy/groupfacepytorch/commit/80355d53f4d903f1ad03a00c50127ece75ccc56c#diff-e2b054a4371e1ec7f3d6441681e31ec5fa1e22a181e51148fc976bdb9775df95L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73483081</div><div id='project'> Project Name: leoluopy/groupfacepytorch</div><div id='commit'> Commit Name: 80355d53f4d903f1ad03a00c50127ece75ccc56c</div><div id='time'> Time: 2021-02-03</div><div id='author'> Author: lpy1990fff</div><div id='file'> File Name: cluster_ims.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: GetAllFilesFeat(1)</div><div id='n_method'> N Method Name: GetAllFilesFeat(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cluster_ims.py</div><div id='n_file'> N File Name: cluster_ims.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 53</div><BR>