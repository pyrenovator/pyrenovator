<html><h3>Pattern ID :25464
</h3><img src='77674219.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Step 1. Fuse biases of pruned channels in the previous module into the current module
    with no_forward_hooks(module):
        padding_mode = getattr(module, &quotpadding_mode&quot, None)
        <a id="change">if </a><a id="change">hasattr(</a>module, <a id="change">&quotpadding_mode&quot</a><a id="change">)</a>:
            module.padding_mode<a id="change"> = </a>&quotreflect&quot
        
        biases = module(input)
        for output_channel in biases[0]:</code></pre><h3>After Change</h3><pre><code class='java'>
    for output_channel in output[0]:
        assert torch.unique(output_channel).shape[0] == 1

    <a id="change">pass</a>

@torch.no_grad()
def __propagate_bias(model: nn.Module, x) -&gt; nn.Module:
    handles = []</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/eidoslab/simplify/commit/341d11979a9b1a59676fd37580e8eda06b056183#diff-c7b0136b5c0f9fa15f6567eb4e996bcb5f2133119a8925b2eb0941f99ca8dbd4L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674219</div><div id='project'> Project Name: eidoslab/simplify</div><div id='commit'> Commit Name: 341d11979a9b1a59676fd37580e8eda06b056183</div><div id='time'> Time: 2021-05-19</div><div id='author'> Author: carlo.alberto.barbano@outlook.com</div><div id='file'> File Name: simplify.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: propagate_biases_hook(3)</div><div id='n_method'> N Method Name: propagate_biases_hook(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: simplify.py</div><div id='n_file'> N File Name: simplify.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            context[&quotprocess_start_cpu_time_us&quot] = _rusage_cpu_time(rusage_thread)

    def on_trace_stop(self, proto, context, options):
        <a id="change">if </a>not OS_WIN and <a id="change">hasattr(</a>resource, <a id="change">&quotRUSAGE_THREAD&quot</a><a id="change">)</a>:
            rusage_thread = resource.getrusage(resource.RUSAGE_THREAD)
            stop_cpu_time_us = _rusage_cpu_time(rusage_thread)

            if &quotprocess_start_cpu_time_us&quot in context:
                start_cpu_time_us<a id="change"> = </a>context[&quotprocess_start_cpu_time_us&quot]
                if start_cpu_time_us and stop_cpu_time_us:
                    proto.trace_info.thread_cpu_time_us = max(0, stop_cpu_time_us - start_cpu_time_us)
</code></pre><h3>After Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, proto, context, options):
        <a id="change">pass</a>

    def on_trace_read(self, proto, context, options):
        if not OS_WIN:
            rusage_self = resource.getrusage(resource.RUSAGE_SELF)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/b52adf7a5ea82cd58c4aea9548b8102d6dbb5f56#diff-afe10ffa3c574edf6baf35a3a4287be88b150f60f374ab36bda14af04f597224L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674227</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: b52adf7a5ea82cd58c4aea9548b8102d6dbb5f56</div><div id='time'> Time: 2023-04-16</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/process_recorder.py</div><div id='m_class'> M Class Name: ProcessRecorder</div><div id='n_method'> N Class Name: ProcessRecorder</div><div id='m_method'> M Method Name: on_trace_stop(4)</div><div id='n_method'> N Method Name: on_trace_stop(4)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/process_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/process_recorder.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 43</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self._last_cpu_time_us = None

    def on_trace_start(self, proto, context, options):
        <a id="change">if </a>not OS_WIN and <a id="change">hasattr(</a>resource, <a id="change">&quotRUSAGE_THREAD&quot</a><a id="change">)</a>:
            rusage_thread<a id="change"> = </a>resource.getrusage(resource.RUSAGE_THREAD)
            context[&quotprocess_start_cpu_time_us&quot] = _rusage_cpu_time(rusage_thread)

    def on_trace_stop(self, proto, context, options):</code></pre><h3>After Change</h3><pre><code class='java'>
        self._last_cpu_time_us = None

    def on_trace_start(self, proto, context, options):
        <a id="change">pass</a>

    def on_trace_stop(self, proto, context, options):
        pass
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/b52adf7a5ea82cd58c4aea9548b8102d6dbb5f56#diff-afe10ffa3c574edf6baf35a3a4287be88b150f60f374ab36bda14af04f597224L39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674231</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: b52adf7a5ea82cd58c4aea9548b8102d6dbb5f56</div><div id='time'> Time: 2023-04-16</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/process_recorder.py</div><div id='m_class'> M Class Name: ProcessRecorder</div><div id='n_method'> N Class Name: ProcessRecorder</div><div id='m_method'> M Method Name: on_trace_start(4)</div><div id='n_method'> N Method Name: on_trace_start(4)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/process_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/process_recorder.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                model.interpret()
            else:

                <a id="change">if </a><a id="change">hasattr(</a>model, <a id="change">&quotTemporalFusionTransformer_attentions&quot</a><a id="change">)</a>:
                    atten_components<a id="change"> = </a>self.tft_attention_components()

        elif self.model.category == &quotML&quot:
            use_xgb = False</code></pre><h3>After Change</h3><pre><code class='java'>
            if hasattr(model, &quotinterpret&quot) and not model.__class__.__name__ == "Model":
                model.interpret()
            else:
                <a id="change">pass</a>
                &#47&#47if hasattr(model, &quotTemporalFusionTransformer_attentions&quot):
                &#47&#47    atten_components = self.tft_attention_components()

        elif self.model.category == &quotML&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/atrcheema/ai4water/commit/b23a06b45327d5eba2b9d53953bc4d2f551e72d7#diff-9202406152292c40976d71cc35be57646a83408ac665aa169b076e5c4fbf3757L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674221</div><div id='project'> Project Name: atrcheema/ai4water</div><div id='commit'> Commit Name: b23a06b45327d5eba2b9d53953bc4d2f551e72d7</div><div id='time'> Time: 2022-06-23</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: ai4water/postprocessing/interpret/_main.py</div><div id='m_class'> M Class Name: Interpret</div><div id='n_method'> N Class Name: Interpret</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: Plot</div><div id='n_parent_class'> N Parent Class: Plot</div><div id='m_file'> M File Name: ai4water/postprocessing/interpret/_main.py</div><div id='n_file'> N File Name: ai4water/postprocessing/interpret/_main.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        indices = self._get_indices(indices)
        &#47&#47 Different seed per environment
        <a id="change">if </a>not <a id="change">hasattr(</a>seed, <a id="change">&quotlen&quot</a><a id="change">)</a>:
            seed<a id="change"> = </a>[seed + i for i in range(len(indices))]
        assert len(seed) == len(indices)
        return [self.env_method(&quotseed&quot, seed[i], indices=i) for i in indices]
</code></pre><h3>After Change</h3><pre><code class='java'>
        :return: (List[Union[None, int]]) Returns a list containing the seeds for each individual env.
            Note that all list elements may be None, if the env does not return anything when being seeded.
        
        <a id="change">pass</a>

    @property
    def unwrapped(self):
        if isinstance(self, VecEnvWrapper):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/8046a247197c6529ac1331a04b4a63fc0c901a99#diff-fbbbeff0096dec393a26abdfb588b08aede5e15e5b9a0e7ff4f5ea45fc031896L149' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674220</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 8046a247197c6529ac1331a04b4a63fc0c901a99</div><div id='time'> Time: 2020-05-07</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: stable_baselines3/common/vec_env/base_vec_env.py</div><div id='m_class'> M Class Name: VecEnv</div><div id='n_method'> N Class Name: VecEnv</div><div id='m_method'> M Method Name: seed(2)</div><div id='n_method'> N Method Name: seed(3)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: stable_baselines3/common/vec_env/base_vec_env.py</div><div id='n_file'> N File Name: stable_baselines3/common/vec_env/base_vec_env.py</div><div id='m_start'> M Start Line: 149</div><div id='m_end'> M End Line: 159</div><div id='n_start'> N Start Line: 195</div><div id='n_end'> N End Line: 204</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        seen: Dict[int, Optional[Tensor]] = {}
        for _, module in self.named_modules():
            <a id="change">if </a><a id="change">hasattr(</a>module, <a id="change">&quotreorder_incremental_state&quot</a><a id="change">)</a>:
                if id(module) not in seen and module is not self:
                    seen[id(module)]<a id="change"> = </a>None
                    result = module.reorder_incremental_state(incremental_state, new_order)
                    if result is not None:
                        incremental_state = result</code></pre><h3>After Change</h3><pre><code class='java'>
        previous time step. A typical use case is beam search, where the input
        order changes between time steps based on the selection of beams.
        
        <a id="change">pass</a>

    def reorder_incremental_state_scripting(
        self,
        incremental_state: Dict[str, Dict[str, Optional[Tensor]]],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/d0ccc3e02e1a9015d05cade8dfc61896948275c7#diff-da17be07eee2758ca2463744f7832b9cec239b6ccf63dc4dc1bc4714602ad576L64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77674223</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: d0ccc3e02e1a9015d05cade8dfc61896948275c7</div><div id='time'> Time: 2020-06-22</div><div id='author'> Author: myleott@fb.com</div><div id='file'> File Name: fairseq/models/fairseq_incremental_decoder.py</div><div id='m_class'> M Class Name: FairseqIncrementalDecoder</div><div id='n_method'> N Class Name: FairseqIncrementalDecoder</div><div id='m_method'> M Method Name: reorder_incremental_state(3)</div><div id='n_method'> N Method Name: reorder_incremental_state(3)</div><div id='m_parent_class'> M Parent Class: FairseqDecoder</div><div id='n_parent_class'> N Parent Class: FairseqDecoder</div><div id='m_file'> M File Name: fairseq/models/fairseq_incremental_decoder.py</div><div id='n_file'> N File Name: fairseq/models/fairseq_incremental_decoder.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 81</div><div id='n_end'> N End Line: 81</div><BR>