<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
    def __add__(self, other):
        if isinstance(other, AP_Image):
            base = other.origin<a id="change"> - </a>self.origin
            end = base + other.data.shape
            return AP_Image(self.data[<a id="change">base[0]</a>:end[0],base[1]:end[1]] + other.data, pixelscale = self.pixelscale, zeropoint = self.zeropoint, rotation = self.rotation, note = self.note, origin = other.origin)
        else:
            return AP_Image(self.data + other, pixelscale = self.pixelscale, zeropoint = self.zeropoint, rotation = self.rotation, note = self.note, origin = self.origin)
</code></pre><h3>After Change</h3><pre><code class='java'>
        if isinstance(other, AP_Image):
            if self.pixelscale != other.pixelscale:
                raise IndexError("Cannot add images with different pixelscale!")
            <a id="change">if </a><a id="change">np.any(</a>self.origin + self.data.shape &lt; other.origin<a id="change">)</a> or np.any(other.origin + other.data.shape &lt; self.origin):
                <a id="change">raise </a>IndexError("images have no overlap, cannot add!")
            return AP_Image(self.data[other.window.get_indices(self)] + other.data[self.window.get_indices(other)],
                            pixelscale = self.pixelscale, zeropoint = self.zeropoint, rotation = self.rotation, note = self.note, origin = (max(self.origin[0], other.origin[0]), max(self.origin[1], other.origin[1])))
        else:</code></pre>