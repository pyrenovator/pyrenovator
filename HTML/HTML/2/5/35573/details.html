<html><h3>Pattern ID :35573
</h3><img src='101442522.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        torch.set_num_threads(torch_num_threads)

    logging.basicConfig(level=logging.INFO)
    <a id="change">imitation_logger.configure(</a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>

    &#47&#47 setup environment & dataset
    webdatasets, combined_meta = auto.load_wds_datasets(
        configs=dataset_configs)</code></pre><h3>After Change</h3><pre><code class='java'>
            torch.set_num_threads(torch_num_threads)

        logging.basicConfig(level=logging.INFO)
        logger<a id="change"> = </a><a id="change">im_logger_module.configure(
            </a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
        exit_stack.push(contextlib.closing(logger))

        &#47&#47 setup environment & dataset
        webdatasets, combined_meta = auto.load_wds_datasets(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/6e3180187669e77e866faf847c41ac19c66e67e5#diff-85e6dfcecb4f7bb11eda0f3c08b89808cf7f28a3eaf145199d43441864816161L120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101442522</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 6e3180187669e77e866faf847c41ac19c66e67e5</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/run_rep_learner.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(17)</div><div id='n_method'> N Method Name: run(17)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/run_rep_learner.py</div><div id='n_file'> N File Name: src/il_representations/scripts/run_rep_learner.py</div><div id='m_start'> M Start Line: 120</div><div id='m_end'> M End Line: 211</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 218</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 FIXME(sam): I used this hack from run_rep_learner.py, but I don&quott
    &#47&#47 actually know the right way to write log files continuously in Sacred.
    log_dir = os.path.abspath(il_train_ex.observers[0].dir)
    <a id="change">imitation_logger.configure(</a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
    if torch_num_threads is not None:
        th.set_num_threads(torch_num_threads)

    with contextlib.closing(auto_env.load_vec_env()) as venv:</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 FIXME(sam): I used this hack from run_rep_learner.py, but I don&quott
    &#47&#47 actually know the right way to write log files continuously in Sacred.
    log_dir = os.path.abspath(il_train_ex.observers[0].dir)
    logger<a id="change"> = </a><a id="change">im_logger_module.configure(</a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
    if torch_num_threads is not None:
        th.set_num_threads(torch_num_threads)

    with contextlib.closing(auto_env.load_vec_env()) as venv:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/eb079fe77816d5e82d7a1c024dc70cb4cc4cae0a#diff-b8a30b79d4b477ae4ff3f89cb23e1e0d8475a5ef44d82945f1ab0d152531016cL553' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101442515</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: eb079fe77816d5e82d7a1c024dc70cb4cc4cae0a</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/il_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(7)</div><div id='n_method'> N Method Name: train(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/il_train.py</div><div id='n_file'> N File Name: src/il_representations/scripts/il_train.py</div><div id='m_start'> M Start Line: 562</div><div id='m_end'> M End Line: 563</div><div id='n_start'> N Start Line: 555</div><div id='n_end'> N End Line: 556</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 FIXME(sam): this is not idiomatic way to do logging (as in il_train.py)
    logging.basicConfig(level=logging.INFO)
    log_dir = il_test_ex.observers[0].dir
    <a id="change">imitation_logger.configure(</a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
    if torch_num_threads is not None:
        th.set_num_threads(torch_num_threads)

    if policy_path is None:</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 FIXME(sam): this is not idiomatic way to do logging (as in il_train.py)
    logging.basicConfig(level=logging.INFO)
    log_dir = il_test_ex.observers[0].dir
    logger<a id="change"> = </a><a id="change">im_logger_module.configure(</a>log_dir,
                                        <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
    if torch_num_threads is not None:
        th.set_num_threads(torch_num_threads)

    if policy_path is None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/6e3180187669e77e866faf847c41ac19c66e67e5#diff-dc7527b6cd1e8b2b69d1a8d52c0cd97f56232cceac340e65b9dba2ef1140b1e4L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101442519</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 6e3180187669e77e866faf847c41ac19c66e67e5</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/il_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(12)</div><div id='n_method'> N Method Name: run(12)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/il_test.py</div><div id='n_file'> N File Name: src/il_representations/scripts/il_test.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    logging.basicConfig(level=logging.INFO)
    &#47&#47 `imitation` logging
    log_dir = os.path.abspath(train_ex.observers[0].dir)
    <a id="change">im_log.configure(</a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
    if torch_num_threads is not None:
        torch.set_num_threads(torch_num_threads)
    device = get_device(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
        venv = auto_env.load_vec_env()
        exit_stack.push(closing(venv))

        logger<a id="change"> = </a><a id="change">im_logger_module.configure(
            </a>log_dir, <a id="change">[</a>"stdout", "csv", "tensorboard"<a id="change"></a>]<a id="change">)</a>
        exit_stack.push(closing(logger))

        &#47&#47 set up obs encoder shared between IL and repL
        obs_encoder_cls = get_obs_encoder_cls(obs_encoder_cls,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/c70b75d86e1b9d4c9e6868e6e613cbf4babca18a#diff-6de259d3daa21721031b575d5e3de855328cc290141ba7edb7908c4fc94f8b45L423' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 101442518</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: c70b75d86e1b9d4c9e6868e6e613cbf4babca18a</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/scripts/joint_training.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(15)</div><div id='n_method'> N Method Name: train(15)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/il_representations/scripts/joint_training.py</div><div id='n_file'> N File Name: src/il_representations/scripts/joint_training.py</div><div id='m_start'> M Start Line: 432</div><div id='m_end'> M End Line: 433</div><div id='n_start'> N Start Line: 433</div><div id='n_end'> N End Line: 445</div><BR>