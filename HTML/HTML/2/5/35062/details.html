<html><h3>Pattern ID :35062
</h3><img src='100125920.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47---------------------------------------------------------&#47&#47
        &#47&#47   添加上batch_size维度
        &#47&#47---------------------------------------------------------&#47&#47
        image_data  = <a id="change">np.expand_dims(</a>np.transpose(np.array(image_data, dtype=&quotfloat32&quot), (2, 0, 1)), <a id="change">0</a><a id="change">) / </a>255. 

        with torch.no_grad():
            images = torch.from_numpy(image_data)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47---------------------------------------------------------&#47&#47
        &#47&#47   添加上batch_size维度
        &#47&#47---------------------------------------------------------&#47&#47
        image_data  = <a id="change">np.expand_dims(</a>np.transpose(preprocess_input(np.array(image_data, np.float32)), (2, 0, 1)), <a id="change">0</a><a id="change">)</a>

        with torch.no_grad():
            images = torch.from_numpy(image_data)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bubbliiiing/deeplabv3-plus-pytorch/commit/13e1b6b36db1327007845f05268a5c12c3e2c4a5#diff-2f684718962427189978adb6c1b7eff212c9352faff9b0e11d0b7c8cbfea7521L179' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100125920</div><div id='project'> Project Name: bubbliiiing/deeplabv3-plus-pytorch</div><div id='commit'> Commit Name: 13e1b6b36db1327007845f05268a5c12c3e2c4a5</div><div id='time'> Time: 2021-09-04</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: deeplab.py</div><div id='m_class'> M Class Name: DeeplabV3</div><div id='n_method'> N Class Name: DeeplabV3</div><div id='m_method'> M Method Name: get_FPS(3)</div><div id='n_method'> N Method Name: get_FPS(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: deeplab.py</div><div id='n_file'> N File Name: deeplab.py</div><div id='m_start'> M Start Line: 180</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 179</div><div id='n_end'> N End Line: 179</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
  prediction = prediction.detach().cpu().numpy()

  conf_mask = (prediction[:,:,4] &gt; confidence)
  conf_mask = <a id="change">np.expand_dims(</a>conf_mask, <a id="change">2</a><a id="change">)</a>
  prediction = prediction<a id="change"> * </a>conf_mask

  def numpy_max(input, dim):
    &#47&#47 Input -&gt; tensor (10x8)</code></pre><h3>After Change</h3><pre><code class='java'>
  coco_labels = coco_labels.decode(&quotutf-8&quot).split(&quot\n&quot)
  prediction = prediction.detach().cpu().numpy()
  conf_mask = (prediction[:,:,4] &gt; confidence)
  prediction *= <a id="change">np.expand_dims(</a>conf_mask, <a id="change">2</a><a id="change">)</a>
  labels = []
  &#47&#47 Iterate over batches
  for img_pred in prediction:
    max_conf = np.amax(img_pred[:,5:5+num_classes], axis=1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/0f58c4c64869d44a74a08a6d5d1362d509740d1a#diff-fa4f93fe1b23b0a55fc6356e6ac5579192c42d3caddfc245ed43ef93b86f14e2L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100125918</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: 0f58c4c64869d44a74a08a6d5d1362d509740d1a</div><div id='time'> Time: 2023-02-26</div><div id='author'> Author: 39754370+jla524@users.noreply.github.com</div><div id='file'> File Name: examples/yolov3.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: show_labels(3)</div><div id='n_method'> N Method Name: show_labels(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/yolov3.py</div><div id='n_file'> N File Name: examples/yolov3.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 36</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47---------------------------------------------------------&#47&#47
        &#47&#47   添加上batch_size维度
        &#47&#47---------------------------------------------------------&#47&#47
        image_data  = <a id="change">np.expand_dims(</a>np.transpose(np.array(image_data, dtype=&quotfloat32&quot), (2, 0, 1)), <a id="change">0</a><a id="change">) / </a>255. 

        with torch.no_grad():
            images = torch.from_numpy(image_data)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47---------------------------------------------------------&#47&#47
        &#47&#47   添加上batch_size维度
        &#47&#47---------------------------------------------------------&#47&#47
        image_data  = <a id="change">np.expand_dims(</a>np.transpose(preprocess_input(np.array(image_data, np.float32)), (2, 0, 1)), <a id="change">0</a><a id="change">)</a>

        with torch.no_grad():
            images = torch.from_numpy(image_data)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bubbliiiing/deeplabv3-plus-pytorch/commit/13e1b6b36db1327007845f05268a5c12c3e2c4a5#diff-2f684718962427189978adb6c1b7eff212c9352faff9b0e11d0b7c8cbfea7521L102' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100125917</div><div id='project'> Project Name: bubbliiiing/deeplabv3-plus-pytorch</div><div id='commit'> Commit Name: 13e1b6b36db1327007845f05268a5c12c3e2c4a5</div><div id='time'> Time: 2021-09-04</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: deeplab.py</div><div id='m_class'> M Class Name: DeeplabV3</div><div id='n_method'> N Class Name: DeeplabV3</div><div id='m_method'> M Method Name: detect_image(2)</div><div id='n_method'> N Method Name: detect_image(2)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: deeplab.py</div><div id='n_file'> N File Name: deeplab.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 122</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @ignore_warnings(category=ConvergenceWarning)
    def _elastic_solver(self, X, y, view_index):
        self.weights[view_index] = <a id="change">np.expand_dims(
            </a>self.regressors[view_index].fit(X, y.ravel()).coef_, <a id="change">1</a><a id="change">
        )</a>
        self.weights[view_index] /= np.linalg.norm(
            self.views[view_index]<a id="change"> @ </a>self.weights[view_index]
        ) / np.sqrt(self.n)

    def _objective(self):</code></pre><h3>After Change</h3><pre><code class='java'>

    @ignore_warnings(category=ConvergenceWarning)
    def _elastic_solver(self, X, y, view_index):
        return <a id="change">np.expand_dims(
            </a>self.regressors[view_index].fit(X, y.ravel()).coef_, <a id="change">1</a><a id="change">
        )</a>

    def _objective(self):
        views = len(self.views)
        c = np.array(self.c)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jameschapman19/cca_zoo/commit/06c5cd6a8e9a7253e13919a5d8180b33ac15a885#diff-b837b0d4ef9f4ee1f130a60570a871d579abd21ce2f656839cf5848c903a5725L403' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100125916</div><div id='project'> Project Name: jameschapman19/cca_zoo</div><div id='commit'> Commit Name: 06c5cd6a8e9a7253e13919a5d8180b33ac15a885</div><div id='time'> Time: 2021-11-17</div><div id='author'> Author: james.chapman.19@ucl.ac.uk</div><div id='file'> File Name: cca_zoo/models/innerloop.py</div><div id='m_class'> M Class Name: ElasticInnerLoop</div><div id='n_method'> N Class Name: ElasticInnerLoop</div><div id='m_method'> M Method Name: _elastic_solver(4)</div><div id='n_method'> N Method Name: _elastic_solver(4)</div><div id='m_parent_class'> M Parent Class: PLSInnerLoop</div><div id='n_parent_class'> N Parent Class: PLSInnerLoop</div><div id='m_file'> M File Name: cca_zoo/models/innerloop.py</div><div id='n_file'> N File Name: cca_zoo/models/innerloop.py</div><div id='m_start'> M Start Line: 404</div><div id='m_end'> M End Line: 409</div><div id='n_start'> N Start Line: 360</div><div id='n_end'> N End Line: 362</div><BR>