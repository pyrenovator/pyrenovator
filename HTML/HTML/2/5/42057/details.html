<html><h3>Pattern ID :42057
</h3><img src='117763286.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.out_shape = out_shape

        &#47&#47 Separate scopes matrices for height and width
        <a id="change">self.register_buffer("scopes_h"</a>, _make_scopes(in_shape[0], out_shape[0], num_repetitions)<a id="change">)</a>
        self.register_buffer("scopes_w", _make_scopes(in_shape[1], out_shape[1], num_repetitions))

    def forward(self, x: torch.Tensor, marginalized_scopes: List[int]):
        &#47&#47 Forward through base leaf</code></pre><h3>After Change</h3><pre><code class='java'>
            for o in range(out_features):
                low = o * cardinality
                high = (o + 1) * cardinality
                <a id="change">if o == out_features - 1</a>:
                    high<a id="change"> = </a>self.in_features
                scopes[idxs[low:high], o, r] = 1

        self.register_buffer("scopes", scopes)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/braun-steven/simple-einet/commit/a4eb63bd492b9a22102ddc82e107efac0bdf04ee#diff-0e167804f5443ae4e51928b2569dfa157205f2b3fd2aa197779a9ef67fb370e5L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117763286</div><div id='project'> Project Name: braun-steven/simple-einet</div><div id='commit'> Commit Name: a4eb63bd492b9a22102ddc82e107efac0bdf04ee</div><div id='time'> Time: 2022-01-07</div><div id='author'> Author: steven.lang.mz@gmail.com</div><div id='file'> File Name: simple_einet/factorized_leaf_layer.py</div><div id='m_class'> M Class Name: FactorizedLeaf</div><div id='n_method'> N Class Name: FactorizedLeaf</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: AbstractLayer</div><div id='n_parent_class'> N Parent Class: AbstractLayer</div><div id='m_file'> M File Name: simple_einet/factorized_leaf_layer.py</div><div id='n_file'> N File Name: simple_einet/factorized_leaf_layer.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.membrane_reset = membrane_reset

        &#47&#47 Blank parameter place holders
        <a id="change">self.register_buffer("state"</a>, torch.zeros(1)<a id="change">)</a>
        self.register_buffer("activations", torch.zeros(1))
        self.spikes_number = None
        self.batch_size = batch_size
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, *args, batch_size=1, **kwargs):
        super().__init__(*args, **kwargs)
        <a id="change">if batch_size is None</a>:
            self.batch_size<a id="change"> = </a>1
        else:
            self.batch_size = batch_size
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/synsense/sinabs/commit/f6598a7d9508a9a61097383579981bb26d5b3a2e#diff-63b28851f3bca65f50b74d1721940d0bc83b15339678ac1374d29e218416df4bL14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117763287</div><div id='project'> Project Name: synsense/sinabs</div><div id='commit'> Commit Name: f6598a7d9508a9a61097383579981bb26d5b3a2e</div><div id='time'> Time: 2021-05-18</div><div id='author'> Author: sadique.sheik@synsense.ai</div><div id='file'> File Name: sinabs/layers/iaf_bptt.py</div><div id='m_class'> M Class Name: SpikingLayer</div><div id='n_method'> N Class Name: SpikingLayer</div><div id='m_method'> M Method Name: __init__(1)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: IAF</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: sinabs/layers/iaf_bptt.py</div><div id='n_file'> N File Name: sinabs/layers/iaf_bptt.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 153</div><div id='n_end'> N End Line: 160</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, dataset=None):
        super(ZBL, self).__init__(atomwise=False)
        cutoff_distance = 10.0
        <a id="change">self.register_buffer("atomic_number"</a>, dataset.atomic_number<a id="change">)</a>
        self.distance = Distance(0, cutoff_distance, max_num_neighbors=100)
        self.cutoff = CosineCutoff(cutoff_upper=cutoff_distance)
        self.distance_scale = dataset.distance_scale*1.88973e10  &#47&#47 convert to Bohr units
        self.energy_scale = dataset.energy_scale  &#47&#47 convert to Joules</code></pre><h3>After Change</h3><pre><code class='java'>
    
    def __init__(self, cutoff_distance, max_num_neighbors, atomic_number=None, distance_scale=None, energy_scale=None, dataset=None):
        super(ZBL, self).__init__(atomwise=False)
        <a id="change">if atomic_number is None</a>:
            atomic_number<a id="change"> = </a>dataset.atomic_number
        if distance_scale is None:
            distance_scale = dataset.distance_scale
        if energy_scale is None:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/c63a1a39c3f65705cdd6e6bd1592abfc32ca4757#diff-a1b01a259c5d134d91aef2971ff29d54e0c4c6d369cafe98afc2d9d56c4ef2c5L96' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117763289</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: c63a1a39c3f65705cdd6e6bd1592abfc32ca4757</div><div id='time'> Time: 2022-10-06</div><div id='author'> Author: peastman@stanford.edu</div><div id='file'> File Name: torchmdnet/priors.py</div><div id='m_class'> M Class Name: ZBL</div><div id='n_method'> N Class Name: ZBL</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: BasePrior</div><div id='n_parent_class'> N Parent Class: BasePrior</div><div id='m_file'> M File Name: torchmdnet/priors.py</div><div id='n_file'> N File Name: torchmdnet/priors.py</div><div id='m_start'> M Start Line: 96</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 111</div><BR>