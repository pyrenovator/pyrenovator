<html><h3>Pattern ID :41878
</h3><img src='117373146.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def l2_normalize(d):
    norm<a id="change"> = </a>torch.norm(d, p=2, dim=1, keepdim=True)
    norm<a id="change"> = </a>d<a id="change"> / </a>norm
    norm[<a id="change">torch.isnan(</a>norm<a id="change">)</a>] = 0.
    return norm

</code></pre><h3>After Change</h3><pre><code class='java'>


def l2_normalize(d):
    <a id="change">return </a>F.normalize(d, p=2, dim=1)


def get_normalized_vector(d):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/edisonleeeee/graphgallery/commit/68c0e08ed92b45916e17c0f3b6b515e39ad8bef5#diff-9c70f63f71963c745219b5945e8e24d8b64896a877946cb0be094ad519863962L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117373146</div><div id='project'> Project Name: edisonleeeee/graphgallery</div><div id='commit'> Commit Name: 68c0e08ed92b45916e17c0f3b6b515e39ad8bef5</div><div id='time'> Time: 2021-05-29</div><div id='author'> Author: cnljt@outlook.com</div><div id='file'> File Name: graphgallery/nn/models/pytorch/BVAT/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: l2_normalize(1)</div><div id='n_method'> N Method Name: l2_normalize(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: graphgallery/nn/models/pytorch/BVAT/utils.py</div><div id='n_file'> N File Name: graphgallery/nn/models/pytorch/BVAT/utils.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 9</div><div id='n_start'> N Start Line: 6</div><div id='n_end'> N End Line: 6</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            rmse_cost = loss[0](hypothesis, Y_train)
            &#47&#47 neg_cost = 0
            &quot&quot&quot STFT Loss &quot&quot&quot
            stft_cost<a id="change"> = </a>loss[1](hypothesis, Y_train)
            &quot&quot&quotDBP Loss&quot&quot&quot
            &#47&#47 d_cost = loss[0](pred_d, d.view(-1, 1))
            &quot&quot&quotSBP Loss&quot&quot&quot
            &#47&#47 s_cost = loss[0](pred_s, s.view(-1, 1))
            &quot&quot&quotFFT Loss&quot&quot&quot
            &#47&#47 fft_cost = loss_fft(hypothesis, Y_train)

            &quot&quot&quotTotal Loss&quot&quot&quot
            cost<a id="change"> = </a>rmse_cost<a id="change"> + </a>stft_cost &#47&#47  + d_cost + s_cost
            &#47&#47 cost = fft_cost
            cost.backward()
            optimizer.step()

            if not <a id="change">np.isnan(</a>cost.__float__()<a id="change">)</a>:
                train_cost_sum += cost.__float__()
                train_neg_cost_sum += rmse_cost.__float__()
                train_stft_cost_sum += stft_cost.__float__()</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47            "Train Negative Pearson Loss": neg_cost,  &#47&#47 },step=epoch)
        &#47&#47            "Train Systolic Loss": s_cost,
        &#47&#47            "Train Diastolic Loss": d_cost}, step=epoch)
    <a id="change">return </a>total_cost.__float__()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tvs-ai/pytorch_rppgs/commit/79fa5ea2fc22ff76197fc5272382574b54608880#diff-64e9a5687b54194d93aed5d9d7bcc254ca6ae240c237175daba59412c7b41518L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117373147</div><div id='project'> Project Name: tvs-ai/pytorch_rppgs</div><div id='commit'> Commit Name: 79fa5ea2fc22ff76197fc5272382574b54608880</div><div id='time'> Time: 2023-01-02</div><div id='author'> Author: forownsake@gmail.com</div><div id='file'> File Name: vid2bp/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(7)</div><div id='n_method'> N Method Name: train(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vid2bp/train.py</div><div id='n_file'> N File Name: vid2bp/train.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def l2_normalize(d):
    norm<a id="change"> = </a>torch.norm(d, p=2, dim=1, keepdim=True)
    norm<a id="change"> = </a>d<a id="change"> / </a>norm
    norm[<a id="change">torch.isnan(</a>norm<a id="change">)</a>] = 0.
    return norm
</code></pre><h3>After Change</h3><pre><code class='java'>


def l2_normalize(d):
    <a id="change">return </a>F.normalize(d, p=2, dim=1)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/edisonleeeee/graphgallery/commit/68c0e08ed92b45916e17c0f3b6b515e39ad8bef5#diff-b15574f45115873c02cd82273f0a3b84a9d294d97d09d9b046836af4bdd13d0eL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117373153</div><div id='project'> Project Name: edisonleeeee/graphgallery</div><div id='commit'> Commit Name: 68c0e08ed92b45916e17c0f3b6b515e39ad8bef5</div><div id='time'> Time: 2021-05-29</div><div id='author'> Author: cnljt@outlook.com</div><div id='file'> File Name: graphgallery/nn/models/pytorch/GraphAT/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: l2_normalize(1)</div><div id='n_method'> N Method Name: l2_normalize(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: graphgallery/nn/models/pytorch/GraphAT/utils.py</div><div id='n_file'> N File Name: graphgallery/nn/models/pytorch/GraphAT/utils.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 29</div><BR>