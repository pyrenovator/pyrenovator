<html><h3>Pattern ID :119
</h3><img src='1259266.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if isinstance(v, (list, tuple)):
                self._pb_body.ClearField(k)
                getattr(self._pb_body, k).extend(v)
            elif <a id="change"></a>isinstance(v, dict):
                self._pb_body.ClearField(k)
                getattr(self._pb_body, k).update(v)
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
                            score_to_add = item
                        elif isinstance(item, jina_pb2.NamedScoreProto):
                            score_to_add = NamedScore(item)
                        elif <a id="change"></a>isinstance(item, dict):
                            score_to_add = NamedScore(**item)
                        else:
                            <a id="change">raise </a><a id="change">AttributeError(</a>f&quot{item} is not recognized.&quot<a id="change">)</a>
                        scores_to_add.append(score_to_add)

                    for score_to_add in scores_to_add:
                        s = self._pb_body.operands.add()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/18bde5866e42118f91bc2e0a48ce0c94a6d659f1#diff-fd5cad15b62d20eb491bad1e751092234a3c04487ff84cf819938e3926c8dc25L84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1259266</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 18bde5866e42118f91bc2e0a48ce0c94a6d659f1</div><div id='time'> Time: 2021-02-24</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/types/score/__init__.py</div><div id='m_class'> M Class Name: NamedScore</div><div id='n_method'> N Class Name: NamedScore</div><div id='m_method'> M Method Name: set_attrs(1)</div><div id='n_method'> N Method Name: set_attrs(1)</div><div id='m_parent_class'> M Parent Class: ProtoTypeMixin</div><div id='n_parent_class'> N Parent Class: ProtoTypeMixin</div><div id='m_file'> M File Name: jina/types/score/__init__.py</div><div id='n_file'> N File Name: jina/types/score/__init__.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 126</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                        raise IndexError(f"Could not find relation kind &quot{relation_kind}&quot")

        &#47&#47 remove previous relational types
        <a id="change">if </a>self.input_relation_kinds:
            self.input_relation_kinds[0].cpu().detach()
            self.input_relation_kinds.pop()
            torch.cuda.empty_cache()</code></pre><h3>After Change</h3><pre><code class='java'>
                        token_idx for token_idx, token_span in enumerate(token_mappings)
                        if max(0, min(token_span[1], word_i_span[1]) - max(token_span[0], word_i_span[0])) &gt; 0 &#47&#47 check for word/token overlaps
                    ]
                    for word_j_span, <a id="change">relation_kind</a> in word_relations.items():
                        <a id="change">if </a>relation_kind not in self.relational_kind_to_index:
                            <a id="change">raise </a><a id="change">AttributeError(
                                </a>f"relation of type &quot{relation_kind}&quot not found, "
                                f"RATransformer was initialized with these relation types: {list(self.relational_kind_to_index)}"<a id="change">
                            )</a>
                        for token_j_idx, token_span in enumerate(token_mappings):
                            if max(0, min(token_span[1], word_j_span[1]) - max(token_span[0], word_j_span[0])) &gt; 0: &#47&#47 check for word/token overlaps
                                for token_i_idx in word_i_token_ids:
                                    try:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/joaolages/ratransformers/commit/305da93b6938bf34d7d0433dd77360e1660df48c#diff-f18d42174dd6ac7632bfaa6eae4cb9a524e9429517cc0385e8b4f3fc70f34ff8L99' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1259271</div><div id='project'> Project Name: joaolages/ratransformers</div><div id='commit'> Commit Name: 305da93b6938bf34d7d0433dd77360e1660df48c</div><div id='time'> Time: 2022-12-11</div><div id='author'> Author: joaop.glages@gmail.com</div><div id='file'> File Name: src/ratransformers/__init__.py</div><div id='m_class'> M Class Name: RATransformer</div><div id='n_method'> N Class Name: RATransformer</div><div id='m_method'> M Method Name: get_new_input_relation_kinds(3)</div><div id='n_method'> N Method Name: get_new_input_relation_kinds(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/ratransformers/__init__.py</div><div id='n_file'> N File Name: src/ratransformers/__init__.py</div><div id='m_start'> M Start Line: 134</div><div id='m_end'> M End Line: 144</div><div id='n_start'> N Start Line: 165</div><div id='n_end'> N End Line: 181</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                :class:`fiftyone.core.samples.SampleCollection` being operated
                upon
        
        <a id="change">if </a>not field_names:
            return

        if sample_collection is None:</code></pre><h3>After Change</h3><pre><code class='java'>
                :class:`fiftyone.core.samples.SampleCollection` being operated
                upon
        
        for <a id="change">field_name</a> in field_names:
            &#47&#47 pylint: disable=no-member
            <a id="change">if </a>field_name not in cls._fields:
                <a id="change">raise </a><a id="change">AttributeError(
                    </a>"%s field &quot%s&quot does not exist"
                    % (cls._doc_name(), field_name)<a id="change">
                )</a>

        if sample_collection is None:
            cls._clear_fields_simple(field_names)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/c05873b2521e3dc21a6c9201ae94081fd0754b85#diff-b4e92a2491c17c73053ef81d1f4550849068f80a672bdb4c89ec7fa52439f7b0L435' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1259270</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: c05873b2521e3dc21a6c9201ae94081fd0754b85</div><div id='time'> Time: 2022-07-06</div><div id='author'> Author: brimoor@umich.edu</div><div id='file'> File Name: fiftyone/core/odm/mixins.py</div><div id='m_class'> M Class Name: DatasetMixin</div><div id='n_method'> N Class Name: DatasetMixin</div><div id='m_method'> M Method Name: _clear_fields(3)</div><div id='n_method'> N Method Name: _clear_fields(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: fiftyone/core/odm/mixins.py</div><div id='n_file'> N File Name: fiftyone/core/odm/mixins.py</div><div id='m_start'> M Start Line: 444</div><div id='m_end'> M End Line: 447</div><div id='n_start'> N Start Line: 433</div><div id='n_end'> N End Line: 441</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if isinstance(v, (list, tuple)):
                self._pb_body.ClearField(k)
                getattr(self._pb_body, k).extend(v)
            elif <a id="change"></a>isinstance(v, dict):
                self._pb_body.ClearField(k)
                getattr(self._pb_body, k).update(v)
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
                self._pb_body.ClearField(k)
                if k == &quotoperands&quot:
                    scores_to_add = []
                    for <a id="change">item</a> in v:
                        if isinstance(item, NamedScore):
                            score_to_add = item
                        elif <a id="change"></a>isinstance(item, jina_pb2.NamedScoreProto):
                            score_to_add = NamedScore(item)
                        elif isinstance(item, dict):
                            score_to_add = NamedScore(**item)
                        else:
                            <a id="change">raise </a><a id="change">AttributeError(</a>f&quot{item} is not recognized.&quot<a id="change">)</a>
                        scores_to_add.append(score_to_add)

                    for score_to_add in scores_to_add:
                        s = self._pb_body.operands.add()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/18bde5866e42118f91bc2e0a48ce0c94a6d659f1#diff-fd5cad15b62d20eb491bad1e751092234a3c04487ff84cf819938e3926c8dc25L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1259269</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 18bde5866e42118f91bc2e0a48ce0c94a6d659f1</div><div id='time'> Time: 2021-02-24</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/types/score/__init__.py</div><div id='m_class'> M Class Name: NamedScore</div><div id='n_method'> N Class Name: NamedScore</div><div id='m_method'> M Method Name: set_attrs(1)</div><div id='n_method'> N Method Name: set_attrs(1)</div><div id='m_parent_class'> M Parent Class: ProtoTypeMixin</div><div id='n_parent_class'> N Parent Class: ProtoTypeMixin</div><div id='m_file'> M File Name: jina/types/score/__init__.py</div><div id='n_file'> N File Name: jina/types/score/__init__.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 126</div><BR>