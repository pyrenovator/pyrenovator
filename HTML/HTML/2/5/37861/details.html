<html><h3>Pattern ID :37861
</h3><img src='108595883.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return decoded_preds
    
    correct, total = 0, 0
    <a id="change">for </a>i in range(len(decoded_preds))<a id="change">:
        </a>pred = decoded_preds[i]
        label = decoded_labels[i]
        for key in pred:
            <a id="change">if key in label</a> and pred[key] == label[key]:
                correct += 1
        total += len(label)
    total = 1e-10 if total == 0 else total </code></pre><h3>After Change</h3><pre><code class='java'>
                                                                training_args.true_types,
                                                                training_args.pred_types)
    pos_labels = list(training_args.id2role.values())
    <a id="change">pos_labels.remove(</a>training_args.id2role[0]<a id="change">)</a>
    micro_f1 = f1_score(final_labels, final_preds, labels=pos_labels, average="micro") * 100.0
    return {"micro_f1": micro_f1}

    &#47&#47 if "return_decoded_preds" in kwargs and kwargs["return_decoded_preds"]:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/thu-keg/omnievent/commit/16615dd3b3b08bc6a7d3a7e658469e9c3ef58003#diff-c401add59b28a47361b10eb1ffae4bd238b671225cf9a1b8e754124048d8353cL25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108595883</div><div id='project'> Project Name: thu-keg/omnievent</div><div id='commit'> Commit Name: 16615dd3b3b08bc6a7d3a7e658469e9c3ef58003</div><div id='time'> Time: 2022-06-06</div><div id='author'> Author: penghao20170136@163.com</div><div id='file'> File Name: src/OpenEE/evaluation/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_seq_F1(2)</div><div id='n_method'> N Method Name: compute_seq_F1(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/OpenEE/evaluation/metric.py</div><div id='n_file'> N File Name: src/OpenEE/evaluation/metric.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    for _ in range(edge_type_num):
        &#47&#47 Move edge types from other_edge_types_list to candidate_edge_types_list.
        idx_to_rm = []
        <a id="change">for </a>idx, <a id="change">et</a> in enumerate(other_edge_types_list)<a id="change">:
            </a>et_tuple = EdgeTypeStr2Tuple(et)
            <a id="change">if len(set(et_tuple) & explored_node_type_set) &gt; 0</a>:
                candidate_edge_types_list.append(et)
                idx_to_rm.append(idx)
        &#47&#47 Since pop() will change the index of following elements,</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Move edge types from candidate_edge_types_list to chosen_edge_types_list.
        new_edge_type = random.choice(candidate_edge_types_list)
        chosen_edge_types_list.append(new_edge_type)
        <a id="change">candidate_edge_types_list.remove(</a>new_edge_type<a id="change">)</a>
        explored_node_type_set |= set(EdgeTypeStr2Tuple(new_edge_type))

    return tuple(sorted(chosen_edge_types_list))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pku-dair/sgl/commit/1cbfe98f8ad063ca939a918243cbb2772807e21a#diff-a42813c7bb6f36db6c7dc4df3f1fb029e01d435597a169b5c1ae027c2d0ae0e3L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108595882</div><div id='project'> Project Name: pku-dair/sgl</div><div id='commit'> Commit Name: 1cbfe98f8ad063ca939a918243cbb2772807e21a</div><div id='time'> Time: 2022-04-21</div><div id='author'> Author: 82886739+ZhenbangYou@users.noreply.github.com</div><div id='file'> File Name: dataset/choose_edge_type.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: ChooseEdgeType(3)</div><div id='n_method'> N Method Name: ChooseEdgeType(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dataset/choose_edge_type.py</div><div id='n_file'> N File Name: dataset/choose_edge_type.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return decoded_preds
    
    correct, total = 0, 0
    <a id="change">for i</a> in range(len(decoded_preds))<a id="change">:
        </a>pred = decoded_preds[i]
        label = decoded_labels[i]
        for key in pred:
            <a id="change">if </a>key in label and <a id="change">pred[key] == label[key]</a>:
                correct += 1
        total += len(label)
    total = 1e-10 if total == 0 else total </code></pre><h3>After Change</h3><pre><code class='java'>
                                                                training_args.true_types,
                                                                training_args.pred_types)
    pos_labels = list(training_args.id2role.values())
    <a id="change">pos_labels.remove(</a>training_args.id2role[0]<a id="change">)</a>
    micro_f1 = f1_score(final_labels, final_preds, labels=pos_labels, average="micro") * 100.0
    return {"micro_f1": micro_f1}

    &#47&#47 if "return_decoded_preds" in kwargs and kwargs["return_decoded_preds"]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thu-keg/omnievent/commit/16615dd3b3b08bc6a7d3a7e658469e9c3ef58003#diff-c401add59b28a47361b10eb1ffae4bd238b671225cf9a1b8e754124048d8353cL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108595884</div><div id='project'> Project Name: thu-keg/omnievent</div><div id='commit'> Commit Name: 16615dd3b3b08bc6a7d3a7e658469e9c3ef58003</div><div id='time'> Time: 2022-06-06</div><div id='author'> Author: penghao20170136@163.com</div><div id='file'> File Name: src/OpenEE/evaluation/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_seq_F1(2)</div><div id='n_method'> N Method Name: compute_seq_F1(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/OpenEE/evaluation/metric.py</div><div id='n_file'> N File Name: src/OpenEE/evaluation/metric.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        with torch.no_grad():
            for name, module in model.named_modules():
                if isinstance(module, nn.Conv2d):
                    <a id="change">for </a>n, <a id="change">p</a> in module.named_parameters()<a id="change">:
                        if n == "weight_orig"</a>:
                            p.grad.mul_(module.weight_mask)
                        if n == "bias":
                            p.grad.mul_(module.weight_mask[:, 0, 0, 0])</code></pre><h3>After Change</h3><pre><code class='java'>
                    remaining_neurons += ch_sum[ch_sum != 0].shape[0]

                    if config.simplify:
                        <a id="change">prune.remove(</a>module, &quotweight&quot<a id="change">)</a>
                    
            print(f"The current model has {(remaining_neurons / total_neurons) * 100} % of the original neurons")
            
            if config.simplify:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eidoslab/simplify/commit/e3cef5125238684e5bce46c85ed1ed762abd377e#diff-41474220006d3f313aca51ff34722bbf4cb675023f4106ffd78a318ae920faccL40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108595889</div><div id='project'> Project Name: eidoslab/simplify</div><div id='commit'> Commit Name: e3cef5125238684e5bce46c85ed1ed762abd377e</div><div id='time'> Time: 2021-07-01</div><div id='author'> Author: carlo.alberto.barbano@outlook.com</div><div id='file'> File Name: training/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: training/train.py</div><div id='n_file'> N File Name: training/train.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 129</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 147</div><BR>