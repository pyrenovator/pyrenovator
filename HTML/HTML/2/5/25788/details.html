<html><h3>Pattern ID :25788
</h3><img src='78046864.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    test_idx = th.nonzero(test_mask, as_tuple=False).squeeze()
    labels = hg.nodes[category].data.pop(&quotlabels&quot)
    &#47&#47 get target category id
    node_ids<a id="change"> = </a><a id="change">th.arange(</a>g.number_of_nodes()<a id="change">)</a>
    category_id = len(hg.ntypes)
    for i, ntype in enumerate(hg.ntypes):
        if ntype == category:
            category_id = i</code></pre><h3>After Change</h3><pre><code class='java'>
    train_idx = th.nonzero(train_mask, as_tuple=False).squeeze()
    test_idx = th.nonzero(test_mask, as_tuple=False).squeeze()

    <a id="change">if </a>&quotlabels&quot in hg.nodes[category].data:
        labels = hg.nodes[category].data.pop(&quotlabels&quot)
    elif &quotlabel&quot in hg.nodes[category].data:
        labels<a id="change"> = </a><a id="change">hg.nodes[category].data.pop(&quotlabel&quot).to(</a>&quotcpu&quot<a id="change">)</a>
    else:
        raise ValueError(&quotlabel in not in the hg.nodes[category].data&quot)
    &#47&#47 &#47&#47 get target category id
    &#47&#47 node_ids = th.arange(g.number_of_nodes())</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bupt-gamma/openhgnn/commit/53a92ea661a399ff03b8b65598ff8f3b50f2ac0f#diff-d15d8307a7b79d182284d3a8633e53887f753518f3c9cae961b312da597f8c3bL16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78046864</div><div id='project'> Project Name: bupt-gamma/openhgnn</div><div id='commit'> Commit Name: 53a92ea661a399ff03b8b65598ff8f3b50f2ac0f</div><div id='time'> Time: 2021-04-08</div><div id='author'> Author: theheavenszhao@outlook.com</div><div id='file'> File Name: openhgnn/utils/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_idx(2)</div><div id='n_method'> N Method Name: get_idx(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: openhgnn/utils/utils.py</div><div id='n_file'> N File Name: openhgnn/utils/utils.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 39</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.ndown = mol.ndown
        self.nelec = self.nup+self.ndown

        self.index_up<a id="change"> = </a><a id="change">torch.arange(</a>self.nup<a id="change">)</a>
        self.index_down = torch.arange(self.nup, self.nup+self.ndown)

        self.orb_proj = OrbitalProjector(configs, mol)
</code></pre><h3>After Change</h3><pre><code class='java'>

        self.orb_proj = OrbitalProjector(configs, mol)

        <a id="change">if </a>cuda:
            self.device = torch.device(&quotcuda&quot)
            self.orb_proj.Pup = self.orb_proj.Pup.to(self.device)
            self.orb_proj.Pdown<a id="change"> = </a><a id="change">self.orb_proj.Pdown.to(</a>self.device<a id="change">)</a>

    def forward(self, MO, d2MO, dJdMO=None, d2JMO=None,
                return_local_energy=False):
        &quot&quot&quot Compute the kinetic energy using the trace trick</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/e3b85a877f912f7399fbe2cb38ab5ef04a2f0701#diff-a465387e34d541ea42be6f2ed5187c15baf47f75df50afc89d1e26914ccc1b36L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78046859</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: e3b85a877f912f7399fbe2cb38ab5ef04a2f0701</div><div id='time'> Time: 2019-12-20</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='m_class'> M Class Name: KineticPooling</div><div id='n_method'> N Class Name: KineticPooling</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='n_file'> N File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 37</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.nup = mol.nup
        self.ndown = mol.ndown

        self.index_up<a id="change"> = </a><a id="change">torch.arange(</a>self.nup<a id="change">)</a>
        self.index_down = torch.arange(self.nup, self.nup+self.ndown)

        self.orb_proj = OrbitalProjector(configs, mol)
</code></pre><h3>After Change</h3><pre><code class='java'>

        self.orb_proj = OrbitalProjector(configs, mol)

        <a id="change">if </a>cuda:
            self.device = torch.device(&quotcuda&quot)
            self.orb_proj.Pup = self.orb_proj.Pup.to(self.device)
            self.orb_proj.Pdown<a id="change"> = </a><a id="change">self.orb_proj.Pdown.to(</a>self.device<a id="change">)</a>

    def forward(self, input):
        &quot&quot&quot Compute the product of spin up/down determinants
        Args:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/9303d61fd31a69835f1c8361a88d84fe44d5eebd#diff-fb41d9382a95bc945db6e4eb1f1893a9eab8a8e273648cb7bf0b316c84ce14e7L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78046856</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 9303d61fd31a69835f1c8361a88d84fe44d5eebd</div><div id='time'> Time: 2019-12-20</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: deepqmc/wavefunction/slater_pooling.py</div><div id='m_class'> M Class Name: SlaterPooling</div><div id='n_method'> N Class Name: SlaterPooling</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: deepqmc/wavefunction/slater_pooling.py</div><div id='n_file'> N File Name: deepqmc/wavefunction/slater_pooling.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 45</div><div id='n_end'> N End Line: 62</div><BR>