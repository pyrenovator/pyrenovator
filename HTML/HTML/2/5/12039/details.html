<html><h3>Pattern ID :12039
</h3><img src='40706237.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        split_point = int(len(base_tr_dataset) * (1 - self.val_split))
        np.random.shuffle(idxs)

        tr_subset<a id="change"> = </a><a id="change">Subset(</a>base_tr_dataset, idxs[:split_point]<a id="change">)</a>
        val_subset = Subset(base_tr_dataset, idxs[split_point:])

        return tr_subset, val_subset
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Performs train-validation split
        split_point = int(len(tr_dataset) * (1 - self.val_split))

        tr_subset = <a id="change">Subset(
            </a>tr_dataset, <a id="change">list(</a><a id="change">range(</a>split_point<a id="change">))</a><a id="change">
        )</a>

        val_subset = Subset(
            val_dataset, list(range(split_point, len(tr_dataset)))
        )</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/d1dd0a59dc86ff271b12e111596b7cbefa2675d3#diff-1a409eb88a4648592a5218e6beb5944cd9ee21f0f0e45436550e25b13cc4a96fL89' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40706237</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: d1dd0a59dc86ff271b12e111596b7cbefa2675d3</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: pierokauffmann@gmail.com</div><div id='file'> File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='m_class'> M Class Name: MultiTensorpackLmdbImageProvider</div><div id='n_method'> N Class Name: MultiTensorpackLmdbImageProvider</div><div id='m_method'> M Method Name: get_train_val_datasets(3)</div><div id='n_method'> N Method Name: get_train_val_datasets(3)</div><div id='m_parent_class'> M Parent Class: DatasetProvider</div><div id='n_parent_class'> N Parent Class: DatasetProvider</div><div id='m_file'> M File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='n_file'> N File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 102</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if dataset == &quotcifar&quot:
        my_dataset = CIFAR10(root=data_dir, train=(split == &quottrain&quot), download=True)
    elif dataset == &quotimagenet&quot:
        my_dataset = <a id="change">Subset(</a>ImageFolder(root=data_dir), <a id="change">list(</a><a id="change">range(</a>200<a id="change">))</a><a id="change">)</a>
    else:
        raise ValueError(&quotUnrecognized dataset&quot, dataset)

    writer = DatasetWriter(len(my_dataset), write_path, {</code></pre><h3>After Change</h3><pre><code class='java'>
    else:
        raise ValueError(&quotUnrecognized dataset&quot, dataset)
    
    if subset &gt; 0: my_dataset<a id="change"> = </a><a id="change">Subset(</a>my_dataset, range(subset)<a id="change">)</a>

    writer = DatasetWriter(len(my_dataset), write_path, {
        &quotimage&quot: RGBImageField(write_mode=&quotsmart&quot, 
                            &#47&#47    smart_factor=2, </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/libffcv/ffcv/commit/5597cf10332101650d868781ad52f4db8d10c6df#diff-faf70c9975c008cc91bb4be00de32469b5cd9ab2ee2d7418b244be857484908eL33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40706248</div><div id='project'> Project Name: libffcv/ffcv</div><div id='commit'> Commit Name: 5597cf10332101650d868781ad52f4db8d10c6df</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: ailyas@mit.edu</div><div id='file'> File Name: scripts/write_image_datasets.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(9)</div><div id='n_method'> N Method Name: main(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/write_image_datasets.py</div><div id='n_file'> N File Name: scripts/write_image_datasets.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Performs train-validation split
        split_point = int(len(tr_dataset) * (1 - self.val_split))

        tr_subset = <a id="change">Subset(
            </a>tr_dataset, <a id="change">list(</a><a id="change">range(</a>split_point<a id="change">))</a><a id="change">
        )</a>

        val_subset = Subset(
            val_dataset, list(range(split_point, len(tr_dataset)))
        )</code></pre><h3>After Change</h3><pre><code class='java'>
            tr_dataset, indices[:split_point]
        )

        val_subset<a id="change"> = </a><a id="change">Subset(
            </a>val_dataset, indices[split_point:]<a id="change">
        )</a>

        assert len(tr_subset) + len(val_subset) == len(tr_dataset)
        assert len(set(tr_subset.indices).intersection(set(val_subset.indices))) == 0  
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/ac5423e894f49dd34a27c9a0adcfabb9f58da4d6#diff-1a409eb88a4648592a5218e6beb5944cd9ee21f0f0e45436550e25b13cc4a96fL85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40706241</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: ac5423e894f49dd34a27c9a0adcfabb9f58da4d6</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: pierokauffmann@gmail.com</div><div id='file'> File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='m_class'> M Class Name: MultiTensorpackLmdbImageProvider</div><div id='n_method'> N Class Name: MultiTensorpackLmdbImageProvider</div><div id='m_method'> M Method Name: get_train_val_datasets(3)</div><div id='n_method'> N Method Name: get_train_val_datasets(3)</div><div id='m_parent_class'> M Parent Class: DatasetProvider</div><div id='n_parent_class'> N Parent Class: DatasetProvider</div><div id='m_file'> M File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='n_file'> N File Name: archai/datasets/providers/multi_lmdb_image_provider.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 110</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 111</div><BR>