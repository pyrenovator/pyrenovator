<html><h3>Pattern ID :6079
</h3><img src='21076033.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        + run[&quotio_var&quot][&quotsave_subfolder_name&quot] + &quot_&quot + str(i)
        if not os.path.exists(run[&quotio_var&quot][&quotsave_dir&quot]):
            os.makedirs(run[&quotio_var&quot][&quotsave_dir&quot])
        <a id="change">if not os.path.exists(run[&quotio_var&quot][&quotsave_dir&quot] + run[&quotio_var&quot][&quotsave_folder_name&quot])</a>:
            <a id="change">os.makedirs(</a>run[&quotio_var&quot][&quotsave_dir&quot] + run[&quotio_var&quot][&quotsave_folder_name&quot]<a id="change">)</a>
        if not os.path.exists(direct): 
            os.makedirs(direct)
        nms_model = cv.ximgproc.createStructuredEdgeDetection(run[&quotio_var&quot][&quotnms_model&quot])</code></pre><h3>After Change</h3><pre><code class='java'>
        criterion = torch.nn.CrossEntropyLoss()

        &#47&#47 Learning Rate Search
        if <a id="change">run[&quotextra_options&quot][&quotlr_mode&quot] and idx == 0</a>:
            ut.lr_tool(net=net, criterion=criterion, original_optimizer=optimizer, 
                       train_data_loader=train_data_loader, gpu_id=run[&quottrain&quot][&quotgpu&quot],
                       direct=direct, start_lr=0.0000001, end_lr=10, step_size=50, gamma=10)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nikosefth/im2rbte/commit/5e180415e0ef01e4d60a3bba6f6652dfc827a233#diff-823f305c0123237b5ca0163a36935fd3030b16ef8305884b51414f627d879368L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21076033</div><div id='project'> Project Name: nikosefth/im2rbte</div><div id='commit'> Commit Name: 5e180415e0ef01e4d60a3bba6f6652dfc827a233</div><div id='time'> Time: 2022-05-19</div><div id='author'> Author: nikos.efth@hotmail.com</div><div id='file'> File Name: method.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_test(0)</div><div id='n_method'> N Method Name: train_test(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: method.py</div><div id='n_file'> N File Name: method.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 93</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 99</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if global_step % args.save_freq == 0:
                cur_save_dir = os.path.join(args.save_dir, "model_%d" % global_step)
                
                <a id="change">if not os.path.exists(cur_save_dir)</a>:
                    <a id="change">os.makedirs(</a>cur_save_dir<a id="change">)</a>
                
                if local_rank == 0:
                    model.module.save_pretrained(cur_save_dir)
                    print(f&quotModel has saved at {cur_save_dir}.&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
                    ))
                    tic_train = time.time()

            if <a id="change">global_step % args.save_freq == 0 and local_rank == 0</a>:
                cur_save_dir = os.path.join(args.save_dir, "model_%d" % global_step)
                model.module.save_pretrained(cur_save_dir)
                print(f&quotModel has saved at {cur_save_dir}.&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/harderthenharder/transformers_tasks/commit/c02dd1fdaf981bc861753814ec42ef06f078567a#diff-24116351c07b35bfd9cf5eef75d871611e35abb3854f19f0f6d7a5b5373343e3L179' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21076032</div><div id='project'> Project Name: harderthenharder/transformers_tasks</div><div id='commit'> Commit Name: c02dd1fdaf981bc861753814ec42ef06f078567a</div><div id='time'> Time: 2023-04-05</div><div id='author'> Author: 1414463123@qq.com</div><div id='file'> File Name: LLM/finetune/train_multi_gpu.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: LLM/finetune/train_multi_gpu.py</div><div id='n_file'> N File Name: LLM/finetune/train_multi_gpu.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 312</div><div id='n_start'> N Start Line: 282</div><div id='n_end'> N End Line: 292</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        frame.ParseFromString(bytearray(data.numpy()))

        if archive is None:
            <a id="change">if not os.path.exists(output_path)</a>:
                <a id="change">os.makedirs(</a>output_path<a id="change">)</a>
            archive = zipfile.ZipFile(os.path.join(output_path, frame.context.name + ".zip"), "w")

        save_timestamp(frame, idx, archive)
        save_image(frame, idx, archive)</code></pre><h3>After Change</h3><pre><code class='java'>
        save_pose(frame, idx, archive)
    save_context(frame, idx, archive) &#47&#47 save metadata at last

    if <a id="change">archive is not None and zip_output</a>:
        archive.close()
    if delele_input: &#47&#47 delete intermediate file
        os.remove(input_file)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cmpute/d3d/commit/fdf61d38e9f0cace486322e8928201f374ab8979#diff-357db998920693013467b6c06668ac640527369e2aa65e44356e99b75d084389L234' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 21076036</div><div id='project'> Project Name: cmpute/d3d</div><div id='commit'> Commit Name: fdf61d38e9f0cace486322e8928201f374ab8979</div><div id='time'> Time: 2020-12-13</div><div id='author'> Author: cmpute@qq.com</div><div id='file'> File Name: d3d/dataset/waymo/converter.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: convert_tfrecord(5)</div><div id='n_method'> N Method Name: convert_tfrecord(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: d3d/dataset/waymo/converter.py</div><div id='n_file'> N File Name: d3d/dataset/waymo/converter.py</div><div id='m_start'> M Start Line: 235</div><div id='m_end'> M End Line: 259</div><div id='n_start'> N Start Line: 247</div><div id='n_end'> N End Line: 275</div><BR>