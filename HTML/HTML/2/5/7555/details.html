<html><h3>Pattern ID :7555
</h3><img src='25080414.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    if _gp not in freq:
                        raise ValueError(f"freq(={freq}) missing group(={_gp})")
                if len(set(freq.values())) == 1:
                    self.freq = <a id="change">list(freq.values())[0]</a>
                else:
                    assert self.sample_config, f"freq(={self.freq}), sample_config cannot be None/empty"
                    assert isinstance(self.sample_config, dict), f"sample_config(={self.sample_config}) must be dict"
                    assert (</code></pre><h3>After Change</h3><pre><code class='java'>
        self.freq = freq

        &#47&#47 sample
        self.sample_config = sample_config<a id="change"> if sample_config is not None</a><a id="change"> else </a>{}
        self.sample_benchmark = sample_benchmark
        self.can_sample = False
        super().__init__(config)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/3605cd7b96d0e689c7b7b334ac1a7bffc7245d95#diff-c17be8ba7f036fc45e8b9f7be6555a77ebc4456632b6062f7d2fb280fb7d025bL184' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 25080414</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 3605cd7b96d0e689c7b7b334ac1a7bffc7245d95</div><div id='time'> Time: 2021-09-07</div><div id='author'> Author: zhu.pengrong@foxmail.com</div><div id='file'> File Name: qlib/data/dataset/loader.py</div><div id='m_class'> M Class Name: QlibDataLoader</div><div id='n_method'> N Class Name: QlibDataLoader</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: DLWParser</div><div id='n_parent_class'> N Parent Class: DLWParser</div><div id='m_file'> M File Name: qlib/data/dataset/loader.py</div><div id='n_file'> N File Name: qlib/data/dataset/loader.py</div><div id='m_start'> M Start Line: 184</div><div id='m_end'> M End Line: 205</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 202</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            mapping = metric_params.mapping
            log_name = metric_params.log_name if metric_params.log_name is not None else metric_params.name
            if log_name in added_log_names:
                mapping_values = list(<a id="change">mapping.values()</a>)
                log_name += + &quot_&quot + mapping_values[0] + &quot_&quot + <a id="change">mapping_values[1]</a>
            else:
                added_log_names.add(log_name)

            metrics.append(MetricWithUtils(metric=metric, mapping=mapping, log_name=log_name))</code></pre><h3>After Change</h3><pre><code class='java'>
                continue
            metric = METRICS.get(metric_params.name)(**metric_params.params)
            mapping = metric_params.mapping
            prefix = &quot&quot<a id="change"> if metric_params.log_prefix is None</a><a id="change"> else </a>metric_params.log_prefix + &quot_&quot
            log_name = prefix + metric_params.name
            if log_name in added_log_names:
                &#47&#47 If prefix not set.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eora-ai/torchok/commit/e8f0ac156b30fb07321c91bf711a530c6ee900d2#diff-7455508f96fab95aee3143a9cf2993cbd82fe0e2daf7958b4772abf4bbdbb83aL106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 25080412</div><div id='project'> Project Name: eora-ai/torchok</div><div id='commit'> Commit Name: e8f0ac156b30fb07321c91bf711a530c6ee900d2</div><div id='time'> Time: 2022-05-05</div><div id='author'> Author: rashit.bayazitov.1995@gmail.com</div><div id='file'> File Name: src/metrics/metric_manager.py</div><div id='m_class'> M Class Name: MetricManager</div><div id='n_method'> N Class Name: MetricManager</div><div id='m_method'> M Method Name: __get_phase_metrics(3)</div><div id='n_method'> N Method Name: __get_phase_metrics(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/metrics/metric_manager.py</div><div id='n_file'> N File Name: src/metrics/metric_manager.py</div><div id='m_start'> M Start Line: 117</div><div id='m_end'> M End Line: 127</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 135</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if isinstance(self._student_inputs, Tensor)
            else self._student_inputs[0].device
            if isinstance(self._student_inputs, Iterable)
            else <a id="change">[
                tens.device
                for tens in self._student_inputs.values()
                if isinstance(tens, Tensor)
            ][0]</a>
        )
        self._teacher.to(target_device)

        teacher_outputs = tensors_module_forward(</code></pre><h3>After Change</h3><pre><code class='java'>
            self._hardness * teacher_loss
        )
        global_step = kwargs.get("global_step")
        global_step = epoch * steps_per_epoch<a id="change"> if global_step is None</a><a id="change"> else </a>global_step
        _log_losses(self.loggers, global_step, loss, teacher_loss, distillation_loss)
        return distillation_loss
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/sparseml/commit/6a4767337b993070bc55cc0bac99c076ab84cb47#diff-37a1d70c58e00289a182955989f1d34a7b14be0cae1ced43409e44cb36926904L217' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 25080413</div><div id='project'> Project Name: neuralmagic/sparseml</div><div id='commit'> Commit Name: 6a4767337b993070bc55cc0bac99c076ab84cb47</div><div id='time'> Time: 2021-10-07</div><div id='author'> Author: tuan@neuralmagic.com</div><div id='file'> File Name: src/sparseml/pytorch/optim/modifier_distillation.py</div><div id='m_class'> M Class Name: DistillationModifier</div><div id='n_method'> N Class Name: DistillationModifier</div><div id='m_method'> M Method Name: loss_update(8)</div><div id='n_method'> N Method Name: loss_update(6)</div><div id='m_parent_class'> M Parent Class: ScheduledModifier</div><div id='n_parent_class'> N Parent Class: ScheduledModifier</div><div id='m_file'> M File Name: src/sparseml/pytorch/optim/modifier_distillation.py</div><div id='n_file'> N File Name: src/sparseml/pytorch/optim/modifier_distillation.py</div><div id='m_start'> M Start Line: 241</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 225</div><div id='n_end'> N End Line: 290</div><BR>