<html><h3>Pattern ID :12164
</h3><img src='41039686.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for output_channel in biases[0]:
            assert torch.unique(output_channel).shape[0] == 1

        <a id="change">if </a><a id="change">hasattr(</a>module, <a id="change">&quotpadding_mode&quot</a><a id="change">)</a>:
            module.padding_mode = padding_mode

    biases = biases[0, :, 0, 0] if isinstance(module, nn.Conv2d) else biases[0, :] &#47&#47 This are the new biases for this module</code></pre><h3>After Change</h3><pre><code class='java'>
        module.__class__ = ConvB
        setattr(module, &quotbf&quot, bias_feature_maps)
    
    elif <a id="change">isinstance(</a>module, nn.Linear<a id="change">)</a>:
        if getattr(module, &quotbias&quot, None) is not None:      
            module.bias.copy_(bias_feature_maps)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/eidoslab/simplify/commit/341d11979a9b1a59676fd37580e8eda06b056183#diff-c7b0136b5c0f9fa15f6567eb4e996bcb5f2133119a8925b2eb0941f99ca8dbd4L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41039686</div><div id='project'> Project Name: eidoslab/simplify</div><div id='commit'> Commit Name: 341d11979a9b1a59676fd37580e8eda06b056183</div><div id='time'> Time: 2021-05-19</div><div id='author'> Author: carlo.alberto.barbano@outlook.com</div><div id='file'> File Name: simplify.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: propagate_biases_hook(3)</div><div id='n_method'> N Method Name: propagate_biases_hook(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: simplify.py</div><div id='n_file'> N File Name: simplify.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def _applyfcn(obj, name, attrfcn, itemfcn):
    if name.startswith("["):
        key = ast.literal_eval(name[1:-1])
        <a id="change">if </a>not <a id="change">hasattr(</a>obj, <a id="change">"keys"</a><a id="change">)</a>:
            raise TypeError("The parameter with [] must be a dictionary")
        return itemfcn(obj, key)
    else:</code></pre><h3>After Change</h3><pre><code class='java'>
        key = ast.literal_eval(name[1:-1])
        if isinstance(obj, dict):
            return dictfcn(obj, key)
        elif <a id="change">isinstance(</a>obj, list<a id="change">)</a>:
            return listfcn(obj, key)
        else:
            raise TypeError("The parameter with [] must be either a dictionary or a list")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xitorch/xitorch/commit/8fa85ddfd7591816b72d9c83fc19e9c1926e6373#diff-72299f50b3ebcb06d77c4c49c5e5dfa5c3e34c34436ece0aed0c92559d42d293L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41039687</div><div id='project'> Project Name: xitorch/xitorch</div><div id='commit'> Commit Name: 8fa85ddfd7591816b72d9c83fc19e9c1926e6373</div><div id='time'> Time: 2020-08-13</div><div id='author'> Author: firman.kasim@gmail.com</div><div id='file'> File Name: lintorch/utils/attr.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _applyfcn(5)</div><div id='n_method'> N Method Name: _applyfcn(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lintorch/utils/attr.py</div><div id='n_file'> N File Name: lintorch/utils/attr.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.iteration_num = 0
        self.median = None

        <a id="change">if </a><a id="change">hasattr(</a>config, <a id="change">"pretraining_round_num"</a><a id="change">)</a> and isinstance(
            config.pretraining_round_num, int
        ):
            self.pretraining_round_number = config.pretraining_round_num</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 ----------------- params for normal distribution ----------------- &#47&#47
        self.upper_bound = 0
        &#47&#47 self.bound_param = 1  &#47&#47 values outside mu +- sigma are outliers
        <a id="change">if </a>hasattr(config, "bound_param") and <a id="change">isinstance(
            </a>config.bound_param, float<a id="change">
        )</a>:
            self.bound_param = config.bound_param
        else:
            self.bound_param = 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/9eea2148a0bf84dde93cdea7db3d90921f4800f9#diff-70cf382fe695f6a8a80eeceb699773854944cd2ed6df4f50fde94cb85acba11fL21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41039684</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 9eea2148a0bf84dde93cdea7db3d90921f4800f9</div><div id='time'> Time: 2022-10-31</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/security/defense/three_sigma_krum_defense.py</div><div id='m_class'> M Class Name: ThreeSigmaKrumDefense</div><div id='n_method'> N Class Name: ThreeSigmaKrumDefense</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: BaseDefenseMethod</div><div id='n_parent_class'> N Parent Class: BaseDefenseMethod</div><div id='m_file'> M File Name: python/fedml/core/security/defense/three_sigma_krum_defense.py</div><div id='n_file'> N File Name: python/fedml/core/security/defense/three_sigma_krum_defense.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 53</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    
    
    for name, module in model.named_modules():
        <a id="change">if </a><a id="change">hasattr(</a>module, <a id="change">&quotweight&quot</a><a id="change">)</a>:
            &#47&#47 If not pinned_in: remove input channels corresponding to previous removed output channels
            &#47&#47 If not pinned_in: remove zeroed input channels
            &#47&#47 If not pinned_out: remove zeroed output channels</code></pre><h3>After Change</h3><pre><code class='java'>

    handles = []
    for name, module in model.named_modules():
        <a id="change">if </a>not <a id="change">isinstance(</a>module, (nn.ReLU, nn.Linear, nn.Conv2d)<a id="change">)</a>:
            continue
    
        if len(list(module.parameters())) == 0:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eidoslab/simplify/commit/de4a98b1310aa194a2ed49678260685fb5002a35#diff-c7b0136b5c0f9fa15f6567eb4e996bcb5f2133119a8925b2eb0941f99ca8dbd4L89' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41039690</div><div id='project'> Project Name: eidoslab/simplify</div><div id='commit'> Commit Name: de4a98b1310aa194a2ed49678260685fb5002a35</div><div id='time'> Time: 2021-05-20</div><div id='author'> Author: carlo.alberto.barbano@outlook.com</div><div id='file'> File Name: simplify.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: __remove_zeroed(2)</div><div id='n_method'> N Method Name: __remove_zeroed(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: simplify.py</div><div id='n_file'> N File Name: simplify.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 154</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def default_node_text(sym: SymbolicData) -&gt; str:
    if isinstance(sym, SymbolicTensor):
        return str(tuple(sym.shape))
    elif <a id="change">hasattr(</a>sym, <a id="change">"__len__"</a><a id="change">)</a>:
        return f"{type(sym.v).__name__}({len(sym)})"
    else:
        return type(sym.v).__name__</code></pre><h3>After Change</h3><pre><code class='java'>
    if isinstance(sym, SymbolicTensor):
        return str(tuple(sym.v.shape))
    &#47&#47 mypy hates the next line for some reason
    <a id="change">if </a><a id="change">isinstance(</a>sym.v, Callable<a id="change">)</a>:  &#47&#47 type: ignore
        return "callable"
    if hasattr(sym.v, "__len__"):
        return f"{type(sym.v).__name__}({len(sym.v)})"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gahaalt/pytorch-functional/commit/05efff575e7e2340ddc306442d2211d7f4939893#diff-7f2736422463242f7eb4126db70afa2ab7d499a5d2f1ba51c6e618c7a956739dL71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41039688</div><div id='project'> Project Name: gahaalt/pytorch-functional</div><div id='commit'> Commit Name: 05efff575e7e2340ddc306442d2211d7f4939893</div><div id='time'> Time: 2022-11-03</div><div id='author'> Author: sjmikler@gmail.com</div><div id='file'> File Name: pytorch_symbolic/graph_algorithms.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: default_node_text(1)</div><div id='n_method'> N Method Name: default_node_text(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pytorch_symbolic/graph_algorithms.py</div><div id='n_file'> N File Name: pytorch_symbolic/graph_algorithms.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 79</div><BR>