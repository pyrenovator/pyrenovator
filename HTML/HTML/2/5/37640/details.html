<html><h3>Pattern ID :37640
</h3><img src='108169762.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    psnr, ssim = cal_psnr_and_ssim(sr_image, hr_image)

    return psnr<a id="change">, ssim</a>


def main() -&gt; None:
    &#47&#47 Create a super-resolution experiment result folder.</code></pre><h3>After Change</h3><pre><code class='java'>

    if sr_image.shape != hr_image.shape:
        warnings.warn("Image size not equal! Possible errors in the calculation of the spectrum!")
    <a id="change">if sr_image.shape[0] != sr_image.shape[1]</a>:
        <a id="change">warnings.warn("Image width and height is not equal! Possible errors in the calculation of the spectrum!"</a><a id="change">)</a>

    psnr, ssim = cal_psnr_and_ssim(sr_image, hr_image)
    spectrum = cal_spectrum(sr_image, hr_image)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lornatang/srgan-pytorch/commit/08a73cd532f7a2d3eb7b7df6d260bac917492bca#diff-58b7fc05c0526d9a9b3c0b50dda416fcbf0a654e696da4b6df82cbb5a6b2dcfcL68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108169762</div><div id='project'> Project Name: lornatang/srgan-pytorch</div><div id='commit'> Commit Name: 08a73cd532f7a2d3eb7b7df6d260bac917492bca</div><div id='time'> Time: 2021-09-02</div><div id='author'> Author: liuchangyu1111@gmail.com</div><div id='file'> File Name: validate.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: image_quality_assessment(2)</div><div id='n_method'> N Method Name: image_quality_assessment(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: validate.py</div><div id='n_file'> N File Name: validate.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 136</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            degree = adj_matrix.getnnz(axis=1)
            self_weight = torch.tensor(1.0 / (degree + 1)).to(x)
            att_score_norm = torch.cat([att_score_norm, self_weight])
            edge_index<a id="change">, _</a> = add_self_loops(edge_index)

        att_score_norm = att_score_norm.exp()
</code></pre><h3>After Change</h3><pre><code class='java'>

    def forward(self, x, edge_index, edge_weight=None):
        
        <a id="change">if edge_weight is not None</a>:
            <a id="change">warnings.warn("`edge_weight` is supported in GNNGUARD "
                          "and will be ignored for computation."</a><a id="change">)</a>

        row, col = edge_index
        A, B = x[row], x[col]
        att_score = F.cosine_similarity(A, B)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/edisonleeeee/graphwar/commit/ab086596136fa03b6152723efe2d64bdfb5548a9#diff-4db14e1ea5915249d7f334ec760bb5d984631a024f0cd349706ef01035658947L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108169761</div><div id='project'> Project Name: edisonleeeee/graphwar</div><div id='commit'> Commit Name: ab086596136fa03b6152723efe2d64bdfb5548a9</div><div id='time'> Time: 2022-11-15</div><div id='author'> Author: cnljt@outlook.com</div><div id='file'> File Name: greatx/defense/gnnguard.py</div><div id='m_class'> M Class Name: GNNGUARD</div><div id='n_method'> N Class Name: GNNGUARD</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: greatx/defense/gnnguard.py</div><div id='n_file'> N File Name: greatx/defense/gnnguard.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        durations = np.full(event_times_in_ms.shape, 4)
        &#47&#47 Label information for this dataset
        &#47&#47 have to add 1 as class labels start from 1, not 0 (due to matlab)
        event_desc = dict([(i + 1<a id="change">, c</a>) for i, c in enumerate(all_class_names)])
        descriptions = [event_desc[y] for y in event_classes]
        annots = mne.Annotations(event_times_in_sec, durations, descriptions)
        cnt.set_annotations(annots)</code></pre><h3>After Change</h3><pre><code class='java'>
            event_i_classes = np.argmax(y, axis=1)

        &#47&#47 4 second trials for High-Gamma dataset, otherwise how to know?
        <a id="change">if all_class_names == [&quotRight Hand&quot, &quotLeft Hand&quot, &quotRest&quot, &quotFeet&quot]</a>:
            durations = np.full(event_times_in_ms.shape, 4)
        else:
            <a id="change">warnings.warn("Unknown event durations set to 0"</a><a id="change">)</a>
            durations = np.full(event_times_in_ms.shape, 0)

        &#47&#47 Label information for this dataset
        descriptions = [all_class_names[y] for y in event_i_classes]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/braindecode/braindecode/commit/6565c17f875088ed149dc8984b3a747ec1c2fb72#diff-8ad72d10e5b9d8fa69cad3f9c6494022af3c44ff2f864fcb250f914f98da9028L161' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108169754</div><div id='project'> Project Name: braindecode/braindecode</div><div id='commit'> Commit Name: 6565c17f875088ed149dc8984b3a747ec1c2fb72</div><div id='time'> Time: 2021-08-12</div><div id='author'> Author: robintibor@gmail.com</div><div id='file'> File Name: braindecode/datasets/bbci.py</div><div id='m_class'> M Class Name: BBCIDataset</div><div id='n_method'> N Class Name: BBCIDataset</div><div id='m_method'> M Method Name: _add_markers(2)</div><div id='n_method'> N Method Name: _add_markers(2)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: braindecode/datasets/bbci.py</div><div id='n_file'> N File Name: braindecode/datasets/bbci.py</div><div id='m_start'> M Start Line: 218</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 224</div><div id='n_end'> N End Line: 243</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for ann in anns:
            ann[&quotvalid_area&quot] = meta[&quotvalid_area&quot]

        return image<a id="change">, anns, meta</a>

    def center_pad(self, image, anns):
        w, h = image.size
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.target_size = target_size

    def __call__(self, image, anns, meta, mask_miss=None):
        <a id="change">if mask_miss is not None</a>:
            <a id="change">warnings.warn(&quotmask_miss transformation is not implemented&quot</a><a id="change">)</a>
        image = PIL.Image.fromarray(image)
        meta = copy.deepcopy(meta)
        anns = copy.deepcopy(anns)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hellojialee/offsetguided/commit/d5e2d5aa3ec9afb8ed5fe99acea5a7020d39da96#diff-b845b3c3b6fd53bd85068cb9980679ed089c02d35d9bea9ec4a067468a10352bL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108169755</div><div id='project'> Project Name: hellojialee/offsetguided</div><div id='commit'> Commit Name: d5e2d5aa3ec9afb8ed5fe99acea5a7020d39da96</div><div id='time'> Time: 2020-08-08</div><div id='author'> Author: ustclijia@gmail.com</div><div id='file'> File Name: transforms/pad.py</div><div id='m_class'> M Class Name: CenterPad</div><div id='n_method'> N Class Name: CenterPad</div><div id='m_method'> M Method Name: __call__(5)</div><div id='n_method'> N Method Name: __call__(4)</div><div id='m_parent_class'> M Parent Class: Preprocess</div><div id='n_parent_class'> N Parent Class: Preprocess</div><div id='m_file'> M File Name: transforms/pad.py</div><div id='n_file'> N File Name: transforms/pad.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 33</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def load_model(self, filename: str):
        
        model = torch.load(filename, lambda storage, loc: storage)
        model_cls<a id="change">, model_kwargs</a> = model[&quothyper_parameters&quot][&quotmodel_class&quot], \
                                  model[&quothyper_parameters&quot][&quotmodel_kwargs&quot]
        assert model_cls == self.model_cls
        for k, v in model_kwargs.items():</code></pre><h3>After Change</h3><pre><code class='java'>
        
        storage = torch.load(filename, lambda storage, loc: storage)
        &#47&#47 if predictor.model has been instantiated inside predictor
        <a id="change">if self.model_cls is not None</a>:
            model_cls = storage[&quothyper_parameters&quot][&quotmodel_class&quot]
            model_kwargs = storage[&quothyper_parameters&quot][&quotmodel_kwargs&quot]
            &#47&#47 check model class and hyperparameters are the same
            assert model_cls == self.model_cls
            if model_kwargs is not None:
                for k, v in model_kwargs.items():
                    assert v == self.model_kwargs[k]
        else:
            <a id="change">logger.warn("Predictor with already instantiated model is loading "
                        f"a state_dict from {filename}. Cannot check if model "
                        "hyperparameters are the same."</a><a id="change">)</a>
        self.load_state_dict(storage[&quotstate_dict&quot])

    @property
    def is_tsl_model(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/e5286075918147e85b3df42b851ab9bf0ceb2c19#diff-88df35c8ea79a00baf9cb5e8d4f5666192184ee737f7abd53d8dc3fe90816170L108' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108169759</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: e5286075918147e85b3df42b851ab9bf0ceb2c19</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: ivan.marisca@hotmail.it</div><div id='file'> File Name: tsl/engines/predictor.py</div><div id='m_class'> M Class Name: Predictor</div><div id='n_method'> N Class Name: Predictor</div><div id='m_method'> M Method Name: load_model(2)</div><div id='n_method'> N Method Name: load_model(2)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: tsl/engines/predictor.py</div><div id='n_file'> N File Name: tsl/engines/predictor.py</div><div id='m_start'> M Start Line: 110</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 131</div><BR>