<html><h3>Pattern ID :34566
</h3><img src='99410765.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if self.neg_sample_args[&quotstrategy&quot] == &quotby&quot:
            pos_len_list = self.uid2items_num[uid_list]
            user_len_list = pos_len_list * self.times
            cur_data.set_additional_info(list(pos_len_list), <a id="change">list(</a>user_len_list<a id="change">)</a>)
        self.pr += self.step
        return cur_data
</code></pre><h3>After Change</h3><pre><code class='java'>
            positive_i = torch.cat((positive_i, self.dataset[index][self.iid_field]), 0)

        cur_data = cat_interactions(data_list)
        idx_list<a id="change"> = </a>torch.from_numpy(<a id="change">np.array(</a>idx_list<a id="change">)</a>)
        positive_u = torch.from_numpy(<a id="change">np.array(</a>positive_u<a id="change">)</a>)

        self.pr += self.step
        </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/a3596a230c1b34f77b50d21460d63996206cd55a#diff-c052dea1f8aad195c52d1137acfdac3f1b025dd939e309f5841d956bab717492L121' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99410765</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: a3596a230c1b34f77b50d21460d63996206cd55a</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: 2017202006@ruc.edu.cn</div><div id='file'> File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_class'> M Class Name: NegSampleEvalDataLoader</div><div id='n_method'> N Class Name: NegSampleEvalDataLoader</div><div id='m_method'> M Method Name: _next_batch_data(1)</div><div id='n_method'> N Method Name: _next_batch_data(1)</div><div id='m_parent_class'> M Parent Class: NegSampleDataLoader</div><div id='n_parent_class'> N Parent Class: NegSampleDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/general_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_start'> M Start Line: 121</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 140</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for idx, scheme in self._split_scheme.items():
            &#47&#47 fill in indices with the training/test groups
            tr_indices = list(scheme[TimeSeriesSplitSchemeNames.TRAIN_IDX.value])
            tt_indices = <a id="change">list(</a>scheme[TimeSeriesSplitSchemeNames.TEST_IDX.value]<a id="change">)</a>

            indices = tr_indices + tt_indices
            tr_color = [(QualitativePalette[&quotBar5&quot].value)[2]] * len(tr_indices)
            tt_color = [(QualitativePalette[&quotBar5&quot].value)[1]] * len(tt_indices)</code></pre><h3>After Change</h3><pre><code class='java'>
            )
            tt_len.append(self.forecast_len)

        tr_start<a id="change"> = </a><a id="change">np.array(</a>tr_start<a id="change">)</a>
        tr_len = <a id="change">np.array(</a>tr_len<a id="change">)</a>
        ax.barh(yticks, tr_start, align=&quotcenter&quot, height=.5, color=&quotwhite&quot, alpha=0)
        ax.barh(yticks, tr_len, align=&quotcenter&quot, height=.5, left=tr_start, color=OrbitPal.blue.value, label=&quottrain&quot)
        ax.barh(yticks, tt_len, align=&quotcenter&quot, height=.5, left=tr_start + tr_len, color=OrbitPal.orange.value, label=&quottest&quot)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uber/orbit/commit/9b8570a11ca7a205c6bd3bd9711633d3b6815619#diff-61c4e0a5b7b289c6ddb6d2495b259a662de66b264eafbf6c7f69c1065fcadc38L164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99410798</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 9b8570a11ca7a205c6bd3bd9711633d3b6815619</div><div id='time'> Time: 2021-07-27</div><div id='author'> Author: edwinng@uber.com</div><div id='file'> File Name: orbit/diagnostics/backtest.py</div><div id='m_class'> M Class Name: TimeSeriesSplitter</div><div id='n_method'> N Class Name: TimeSeriesSplitter</div><div id='m_method'> M Method Name: plot(3)</div><div id='n_method'> N Method Name: plot(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: orbit/diagnostics/backtest.py</div><div id='n_file'> N File Name: orbit/diagnostics/backtest.py</div><div id='m_start'> M Start Line: 167</div><div id='m_end'> M End Line: 197</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 194</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if self.neg_sample_args[&quotstrategy&quot] == &quotby&quot:
            pos_len_list = self.uid2items_num[uid_list]
            user_len_list = pos_len_list * self.times
            cur_data.set_additional_info(list(pos_len_list), <a id="change">list(</a>user_len_list<a id="change">)</a>)
        self.pr += self.step
        return cur_data
</code></pre><h3>After Change</h3><pre><code class='java'>
            positive_i = torch.cat((positive_i, self.dataset[index][self.iid_field]), 0)

        cur_data = cat_interactions(data_list)
        idx_list = torch.from_numpy(<a id="change">np.array(</a>idx_list<a id="change">)</a>)
        positive_u<a id="change"> = </a>torch.from_numpy(<a id="change">np.array(</a>positive_u<a id="change">)</a>)

        self.pr += self.step
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/a3596a230c1b34f77b50d21460d63996206cd55a#diff-c052dea1f8aad195c52d1137acfdac3f1b025dd939e309f5841d956bab717492L120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99410763</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: a3596a230c1b34f77b50d21460d63996206cd55a</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: 2017202006@ruc.edu.cn</div><div id='file'> File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_class'> M Class Name: NegSampleEvalDataLoader</div><div id='n_method'> N Class Name: NegSampleEvalDataLoader</div><div id='m_method'> M Method Name: _next_batch_data(1)</div><div id='n_method'> N Method Name: _next_batch_data(1)</div><div id='m_parent_class'> M Parent Class: NegSampleDataLoader</div><div id='n_parent_class'> N Parent Class: NegSampleDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/general_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_start'> M Start Line: 121</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 140</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        if os.path.isfile(file):
            print("data already exists! appending to the data.")
            training_data = <a id="change">list(</a>np.load(file, allow_pickle=True)<a id="change">)</a>
        else:
            print("new data created!")
            training_data = []
</code></pre><h3>After Change</h3><pre><code class='java'>
        if not os.path.exists(file):
            print("new data created!")
            os.mkdir(file)
            training_data_X = <a id="change">np.array(</a>[]<a id="change">)</a>
            training_data_Y<a id="change"> = </a><a id="change">np.array(</a>[]<a id="change">)</a>

        else:
            print("data already exists! appending to the data.")
            training_data_X = np.load(file + f"\\{name}X.npy", allow_pickle=True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/edilgin/deepforspeed/commit/58dec078c61e574d0e219e6d4946ec04348b3f94#diff-a1ba74e31d98adc698c54c475fe89c40e16c47972bfa66bbdafabf308000bd25L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 99410784</div><div id='project'> Project Name: edilgin/deepforspeed</div><div id='commit'> Commit Name: 58dec078c61e574d0e219e6d4946ec04348b3f94</div><div id='time'> Time: 2022-02-16</div><div id='author'> Author: fehimornek@gmail.com</div><div id='file'> File Name: createData.py</div><div id='m_class'> M Class Name: CreateData</div><div id='n_method'> N Class Name: CreateData</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: createData.py</div><div id='n_file'> N File Name: createData.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 98</div><BR>