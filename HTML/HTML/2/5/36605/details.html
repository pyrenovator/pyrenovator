<html><h3>Pattern ID :36605
</h3><img src='104177927.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        observations = self.vector_tasks.next_task()
        batch = batch_observations(observations)

        <a id="change">for </a>sensor in rollouts.observations<a id="change">:
            rollouts.observations[sensor][0].copy_(</a>batch[sensor]<a id="change">)</a>

    def train(self, rollouts):
        self.initialize_rollouts(rollouts)
</code></pre><h3>After Change</h3><pre><code class='java'>
        observations = self.vector_tasks.next_task()
        batch = batch_observations(observations)

        <a id="change">rollouts.insert_initial_observations(</a>batch<a id="change">)</a>

    def train(self, rollouts):
        self.initialize_rollouts(rollouts)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/9a848168ef34802cd3d1f1831d330747b3054e4d#diff-8f5bf720a80a4913f8c876005730914b873c5b458dba881a99dcb04b54de373fL188' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 104177927</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: 9a848168ef34802cd3d1f1831d330747b3054e4d</div><div id='time'> Time: 2020-01-20</div><div id='author'> Author: lucaw@allenai.org</div><div id='file'> File Name: onpolicy_sync/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: initialize_rollouts(2)</div><div id='n_method'> N Method Name: initialize_rollouts(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: onpolicy_sync/trainer.py</div><div id='n_file'> N File Name: onpolicy_sync/trainer.py</div><div id='m_start'> M Start Line: 188</div><div id='m_end'> M End Line: 193</div><div id='n_start'> N Start Line: 199</div><div id='n_end'> N End Line: 201</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ):
        assert len(args) == 0

        <a id="change">for </a><a id="change">sensor</a> in observations<a id="change">:
            </a>if sensor not in self.observations:
                &#47&#47 noinspection PyTypeChecker
                self.observations[sensor] = (
                    torch.zeros_like(<a id="change">observations[sensor]</a>)
                    .unsqueeze(0)
                    .repeat(self.num_steps + 1)
                    .to(self.actions.get_device())
                )
            <a id="change">self.observations[sensor][self.step + 1].copy_(</a>observations[sensor]<a id="change">)</a>

        self.recurrent_hidden_states[self.step + 1].copy_(recurrent_hidden_states)
        self.actions[self.step].copy_(actions)
        self.prev_actions[self.step + 1].copy_(actions)</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(args) == 0

        &#47&#47 self.insert_observations(observations)
        <a id="change">self.insert_initial_observations(</a>observations<a id="change">, time_step=self.step + 1)</a>

        self.recurrent_hidden_states[self.step + 1].copy_(recurrent_hidden_states)
        self.actions[self.step].copy_(actions)
        self.prev_actions[self.step + 1].copy_(actions)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/164000127b2c520e1559214a9fa7967091c4d4f3#diff-c53cbb265d9f2f405c2870f412f24300d4ff733c9b2147723fbe4e4b4f9823d8L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 104177926</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: 164000127b2c520e1559214a9fa7967091c4d4f3</div><div id='time'> Time: 2020-03-02</div><div id='author'> Author: jordis@allenai.org</div><div id='file'> File Name: onpolicy_sync/storage.py</div><div id='m_class'> M Class Name: RolloutStorage</div><div id='n_method'> N Class Name: RolloutStorage</div><div id='m_method'> M Method Name: insert(0)</div><div id='n_method'> N Method Name: insert(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: onpolicy_sync/storage.py</div><div id='n_file'> N File Name: onpolicy_sync/storage.py</div><div id='m_start'> M Start Line: 96</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 132</div><div id='n_end'> N End Line: 132</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ):
        assert len(args) == 0

        <a id="change">for </a><a id="change">sensor</a> in observations<a id="change">:
            </a>if sensor not in self.observations:
                &#47&#47 noinspection PyTypeChecker
                self.observations[sensor] = (
                    torch.zeros_like(<a id="change">observations[sensor]</a>)
                    .unsqueeze(0)
                    .repeat(self.num_steps + 1)
                    .to(self.actions.get_device())
                )
            <a id="change">self.observations[sensor][self.step + 1].copy_(</a>observations[sensor]<a id="change">)</a>

        self.recurrent_hidden_states[self.step + 1].copy_(recurrent_hidden_states)
        self.actions[self.step].copy_(actions)
        self.prev_actions[self.step + 1].copy_(actions)</code></pre><h3>After Change</h3><pre><code class='java'>
        assert len(args) == 0

        &#47&#47 self.insert_observations(observations)
        <a id="change">self.insert_initial_observations(</a>observations<a id="change">, time_step=self.step + 1)</a>

        self.recurrent_hidden_states[self.step + 1].copy_(recurrent_hidden_states)
        self.actions[self.step].copy_(actions)
        self.prev_actions[self.step + 1].copy_(actions)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/d26ed0f5d440a30b8f2886bac5eaebbdd23c235f#diff-c53cbb265d9f2f405c2870f412f24300d4ff733c9b2147723fbe4e4b4f9823d8L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 104177928</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: d26ed0f5d440a30b8f2886bac5eaebbdd23c235f</div><div id='time'> Time: 2020-03-27</div><div id='author'> Author: jordis@allenai.org</div><div id='file'> File Name: onpolicy_sync/storage.py</div><div id='m_class'> M Class Name: RolloutStorage</div><div id='n_method'> N Class Name: RolloutStorage</div><div id='m_method'> M Method Name: insert(0)</div><div id='n_method'> N Method Name: insert(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: onpolicy_sync/storage.py</div><div id='n_file'> N File Name: onpolicy_sync/storage.py</div><div id='m_start'> M Start Line: 96</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 136</div><div id='n_end'> N End Line: 136</div><BR>