<html><h3>Pattern ID :12114
</h3><img src='40994487.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    If an URL is passed, it is returned as is.
    
    data_files_ignore = FILES_TO_IGNORE
    <a id="change">if </a>is_relative_path(pattern):
        glob_iter<a id="change"> = </a>list(Path(base_path).rglob(pattern))
    else:
        glob_iter = [Path(filepath) for filepath in glob.glob(pattern)]
</code></pre><h3>After Change</h3><pre><code class='java'>
    It also supports absolute paths in patterns.
    If an URL is passed, it is returned as is.
    
    pattern = <a id="change">os.path.join(</a>base_path, pattern<a id="change">)</a>
    data_files_ignore = FILES_TO_IGNORE
    fs = LocalFileSystem()
    glob_iter<a id="change"> = </a>[PurePath(filepath) for filepath in <a id="change">fs.glob(</a>pattern<a id="change">)</a> if fs.isfile(filepath)]
    matched_paths = [
        Path(filepath).resolve()
        for filepath in glob_iter</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/1406a04c3e911cec2680d8bc513653e0cafcaaa4#diff-91caec97636b809598fec1569ab59f5d020440565f4152a80ac339493afae50eL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40994487</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 1406a04c3e911cec2680d8bc513653e0cafcaaa4</div><div id='time'> Time: 2021-11-23</div><div id='author'> Author: boris.dayma@gmail.com</div><div id='file'> File Name: src/datasets/data_files.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _resolve_single_pattern_locally(3)</div><div id='n_method'> N Method Name: _resolve_single_pattern_locally(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/data_files.py</div><div id='n_file'> N File Name: src/datasets/data_files.py</div><div id='m_start'> M Start Line: 115</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 120</div><div id='n_end'> N End Line: 126</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        _download_generation_model(path_t5_encoder_tarball)

    &#47&#47 Checks if decoder is already expanded
    <a id="change">if </a>not path_t5_decoder.exists():
        path_t5_decoder_tarball<a id="change"> = </a>_models_path.joinpath(&quott5-decoder-with-lm-head.tar.gz&quot)
        _download_generation_model(path_t5_decoder_tarball)

    &#47&#47 Loading the models</code></pre><h3>After Change</h3><pre><code class='java'>
    try:
        decoder_sess, encoder_sess = _handle_creation_of_sessions()
    except:
        filelist<a id="change"> = </a><a id="change">glob.glob(os.path.join(</a>_models_path, "*"<a id="change">)</a><a id="change">)</a>
        for f in filelist:
            os.remove(f)
        decoder_sess, encoder_sess = _handle_creation_of_sessions()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/abelriboulot/onnxt5/commit/ad046015912df713e3512bd5598b44422a58a1af#diff-0eb7e77dc4d6ede6ed7879f6f14bd519a3f697b31fd5a994967c3d5004686932L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40994493</div><div id='project'> Project Name: abelriboulot/onnxt5</div><div id='commit'> Commit Name: ad046015912df713e3512bd5598b44422a58a1af</div><div id='time'> Time: 2020-08-12</div><div id='author'> Author: abel@kta.io</div><div id='file'> File Name: onnxt5/api.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_encoder_decoder_tokenizer(0)</div><div id='n_method'> N Method Name: get_encoder_decoder_tokenizer(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: onnxt5/api.py</div><div id='n_file'> N File Name: onnxt5/api.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 id of speaker 1 is 019 utterance id is o031a
        &#47&#47 id of speaker 2 is 01v utterance id is 01vo030q
        s1_id = Path(s1_wav).stem.split("_")[0][:3]
        <a id="change">if </a>s1_id not in spk_hashtable.keys():
            spk_hashtable[s1_id]<a id="change"> = </a>[s1_wav]
        else:
            spk_hashtable[s1_id].append(s1_wav)
</code></pre><h3>After Change</h3><pre><code class='java'>

def build_spk_hashtable(hparams):

    wsj0_utterances<a id="change"> = </a><a id="change">glob.glob(
        os.path.join(</a>hparams["wsj0_tr"], "**/*.wav"<a id="change">)</a><a id="change">, recursive=True
    )</a>

    spk_hashtable = {}
    for utt in wsj0_utterances:
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/e716f99a82f8dc90125ddfe0aae214209fa8cc2f#diff-701c0c78c50c407c8c552e20d140dd5a69c30adca30a40a3e152adbdaf78502eL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40994494</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: e716f99a82f8dc90125ddfe0aae214209fa8cc2f</div><div id='time'> Time: 2021-01-18</div><div id='author'> Author: cornellsamuele@gmail.com</div><div id='file'> File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: build_spk_hashtable(1)</div><div id='n_method'> N Method Name: build_spk_hashtable(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='n_file'> N File Name: recipes/WSJ2Mix/separation/dynamic_mixing.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 21</div><BR>