<html><h3>Pattern ID :14633
</h3><img src='47988456.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    Returns:
        df: pd.DataFrame, normalized
    
    <a id="change">for </a>name in df.columns<a id="change">:
        </a>if name not in data_params.keys():
            raise ValueError(<a id="change">"Unexpected column {} in data".format(name</a><a id="change">)</a>)
        new_name = name
        if name == "ds":
            new_name = "t"</code></pre><h3>After Change</h3><pre><code class='java'>
                "Local normalization will be implemented in the future - list of data_params may break the code"
            )
            df_list_norm = list()
            for df, df_data_params in <a id="change">zip(</a>df_list, data_params<a id="change">)</a>:
                df_list_norm.append(single_normalization(df, df_data_params))
            df = df_list_norm
        else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/d07b79568ef37904de81ba00248764233fbaa8c8#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L139' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47988456</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: d07b79568ef37904de81ba00248764233fbaa8c8</div><div id='time'> Time: 2021-10-07</div><div id='author'> Author: ourownstory@users.noreply.github.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: normalize(3)</div><div id='n_method'> N Method Name: normalize(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 253</div><div id='n_end'> N End Line: 286</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            bleu_dict[&quotself-bleu-{}-avg&quot.format(n_gram)] = []

        results = self._self_bleu(generate_corpus=generate_corpus)
        <a id="change">for </a><a id="change">n_gram</a> in self.n_grams<a id="change">:
            </a>bleu_dict[<a id="change">&quotself-bleu-{}&quot.format(</a>n_gram<a id="change">)</a>].append(np.array(results[&quotself-bleu-{}&quot.format(n_gram)]).mean())
            bleu_dict[&quotself-bleu-{}-avg&quot.format(n_gram)].append(
                np.array(results[&quotself-bleu-{}-avg&quot.format(n_gram)]).mean()
            )</code></pre><h3>After Change</h3><pre><code class='java'>
        for i, gen in enumerate(generate_corpus):
            generate_corpus[i] = word_tokenize(gen)
        
        self_bleu = SelfBLEU(generate_corpus, dict(<a id="change">zip(</a>self.ngrams, self.ngram_weights<a id="change">)</a>))
        scores = self_bleu.get_score()
        for ngram in self.ngrams:
            results[ngram] = [s * 100 for s in scores[ngram]]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/77528d404f00a41f10850cdfc9676d40c1362f46#diff-744a49a2d0487c98e251d334aa8cc1f92985f5e77b6f8caf4740113a4c678a27L57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47988457</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: 77528d404f00a41f10850cdfc9676d40c1362f46</div><div id='time'> Time: 2022-07-13</div><div id='author'> Author: 1020139164@qq.com</div><div id='file'> File Name: textbox/evaluator/selfbleu_evaluator.py</div><div id='m_class'> M Class Name: SelfBleuEvaluator</div><div id='n_method'> N Class Name: SelfBleuEvaluator</div><div id='m_method'> M Method Name: _calc_metrics_info(3)</div><div id='n_method'> N Method Name: _calc_metrics_info(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: textbox/evaluator/selfbleu_evaluator.py</div><div id='n_file'> N File Name: textbox/evaluator/selfbleu_evaluator.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 80</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    df_split = get_splitted_SemValBuildings202110(df, train_frac=train_frac)
    df_split = create_full_filepath_column(df_split, lasfiles_dir)
    file_not_found_index_list = []
    <a id="change">for </a><a id="change">filepath</a> in df_split.file_path<a id="change">:
        </a>if not osp.exists(filepath):
            log.warning(
                <a id="change">"file specified but not found, removing {0} from the list (index {1})".format(
                    </a>filepath, df_split.index[df_split["file_path"] == filepath].tolist()<a id="change">
                )</a>
            )
            file_not_found_index_list += df_split.index[
                df_split["file_path"] == filepath
            ].tolist()</code></pre><h3>After Change</h3><pre><code class='java'>
    df = get_metadata_df_from_shapefile(shapefile_filepath)
    df_split = get_splitted_SemValBuildings202110(df, train_frac=train_frac)
    df_split = add_column_with_all_subtiles(df_split, lasfiles_dir)
    for file, filepath in <a id="change">zip(</a>df_split["file"], df_split[SPLIT_LAS_DIR_COLN]<a id="change">)</a>:
        if not filepath:
            log.warning(f"No subtile found for tile {file}")
    df_split = df_split[df_split[SPLIT_LAS_DIR_COLN].apply(lambda x: len(x) &gt; 0)]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ignf/lidar-deep-segmentation/commit/0466beed3e911fab0a0fe2c6450c06fdb5e2134c#diff-5516eed2476b59a1bb5be130d51750dfe3f97341360be8d0e92583695bbf43c1L132' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47988453</div><div id='project'> Project Name: ignf/lidar-deep-segmentation</div><div id='commit'> Commit Name: 0466beed3e911fab0a0fe2c6450c06fdb5e2134c</div><div id='time'> Time: 2021-12-14</div><div id='author'> Author: charles.gaydon@gmail.com</div><div id='file'> File Name: semantic_val/datamodules/datasets/SemValBuildings202110.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: make_datasplit_csv(4)</div><div id='n_method'> N Method Name: make_datasplit_csv(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: semantic_val/datamodules/datasets/SemValBuildings202110.py</div><div id='n_file'> N File Name: semantic_val/datamodules/datasets/SemValBuildings202110.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 150</div><div id='n_start'> N Start Line: 124</div><div id='n_end'> N End Line: 128</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    print (&quot&quot)
    print (&quotClass Frequency: &quot)
    print (&quot{0:2s} {1:3s}&quot.format(&quotClass&quot, &quotNumber of instances&quot))
    <a id="change">for </a>key, <a id="change">value</a> in label_stats.items()<a id="change">:
        </a>print(<a id="change">&quot{0:2d} {1:3s} {2:4d}&quot.format(</a>key, &quot&quot,value<a id="change">)</a>)

    class_names = list(dataset.class_to_idx.keys())+[&quotTotal Instances&quot]
    class_idx = list(dataset.class_to_idx.values())</code></pre><h3>After Change</h3><pre><code class='java'>
    class_names = list(dataset.class_to_idx.keys())+[&quotTotal Instances&quot]
    class_idx = list(dataset.class_to_idx.values())
    num_instances = list(label_stats.values())+[len(dataset)]
    output = pd.DataFrame(list(<a id="change">zip(</a>class_names, class_idx, num_instances<a id="change">)</a>), columns=[&quotClasses&quot, &quotClass Idx&quot, &quotNumber of Instances&quot])
    return output

def show_metrics(source, fig_size=(15,5)):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/radtorch/radtorch/commit/0e208558b37a1d7aff4f1b0abee99366091ef7a5#diff-ea0c5d78e98f3b87371717beabaf20a4c1a834cd943d71bad1e08f7fc9e04250L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47988454</div><div id='project'> Project Name: radtorch/radtorch</div><div id='commit'> Commit Name: 0e208558b37a1d7aff4f1b0abee99366091ef7a5</div><div id='time'> Time: 2020-03-07</div><div id='author'> Author: elbanan@users.noreply.github.com</div><div id='file'> File Name: radtorch/visutils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: show_dataset_info(1)</div><div id='n_method'> N Method Name: show_dataset_info(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: radtorch/visutils.py</div><div id='n_file'> N File Name: radtorch/visutils.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 81</div><div id='n_end'> N End Line: 84</div><BR>