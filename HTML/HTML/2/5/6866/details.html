<html><h3>Pattern ID :6866
</h3><img src='23247074.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        sqrt_alpha_prod = self.alphas_cumprod[timestep] ** 0.5
        sqrt_alpha_prod = sqrt_alpha_prod.flatten()
        while len(sqrt_alpha_prod.shape) &lt; <a id="change">len(</a>original_samples.shape<a id="change">)</a>:
            sqrt_alpha_prod<a id="change"> = </a>sqrt_alpha_prod.unsqueeze(-1)

        sqrt_one_minus_alpha_prod = (1 - self.alphas_cumprod[timestep]) ** 0.5
        sqrt_one_minus_alpha_prod = sqrt_one_minus_alpha_prod.flatten()</code></pre><h3>After Change</h3><pre><code class='java'>
        assert 0 &lt;= i &lt; self.steps

        &#47&#47 eq 4
        return latents<a id="change"> * self.ᾱ[i].sqrt() + </a>eps * self.ϖ[i].sqrt()

    def __len__(self) -&gt; int:
        return self.steps</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tfernd/sd-fused/commit/4e29f2889a4c47e86930e976912fa12ac53185f7#diff-fdc833560554707759195356813eb041412d9c58d0cfe05e1a402bd3755e3017L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23247074</div><div id='project'> Project Name: tfernd/sd-fused</div><div id='commit'> Commit Name: 4e29f2889a4c47e86930e976912fa12ac53185f7</div><div id='time'> Time: 2022-10-05</div><div id='author'> Author: ThalesFDFernandes@gmai.com</div><div id='file'> File Name: sd/scheduler/ddim.py</div><div id='m_class'> M Class Name: DDIMScheduler</div><div id='n_method'> N Class Name: DDIMScheduler</div><div id='m_method'> M Method Name: add_noise(4)</div><div id='n_method'> N Method Name: add_noise(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sd/scheduler/ddim.py</div><div id='n_file'> N File Name: sd/scheduler/ddim.py</div><div id='m_start'> M Start Line: 150</div><div id='m_end'> M End Line: 171</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                 np.min(self.eigenvalues))

        &#47&#47 TODO: test that this is the same as below.
        for i in range(<a id="change">len(</a>self.C<a id="change">)</a>):
            for j in range(i + 1):
                self.invsqrt[i, j] = self.invsqrt[j, i]<a id="change"> = </a>sum(
                    self.eigenbasis[i, k] * self.eigenbasis[j, k] /
                    self.eigenvalues[k]**0.5 for k in range(len(self.C)))
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47              self.eigenbasis[i, k] * self.eigenbasis[j, k] /
        &#47&#47              self.eigenvalues[k]**0.5 for k in range(len(self.C)))

        self.invsqrt = (self.eigenbasis<a id="change"> *
                        </a>(1 / <a id="change">np.sqrt(</a>self.eigenvalues<a id="change">)</a>))<a id="change"> @ </a>self.eigenbasis.T


class CMAEvolutionStrategy:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/icaros-usc/pyribs/commit/48126dc23a06a7b7a62c325e608c68cb2f87e766#diff-72d6ee27f255605dc59c9cf7b5a1f7207f97a35b0e7bd06c6d3c0fa8b751d809L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23247094</div><div id='project'> Project Name: icaros-usc/pyribs</div><div id='commit'> Commit Name: 48126dc23a06a7b7a62c325e608c68cb2f87e766</div><div id='time'> Time: 2021-01-20</div><div id='author'> Author: bryon@btjanaka.net</div><div id='file'> File Name: ribs/emitters/opt/_cma_es.py</div><div id='m_class'> M Class Name: DecompMatrix</div><div id='n_method'> N Class Name: DecompMatrix</div><div id='m_method'> M Method Name: update_eigensystem(1)</div><div id='n_method'> N Method Name: update_eigensystem(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ribs/emitters/opt/_cma_es.py</div><div id='n_file'> N File Name: ribs/emitters/opt/_cma_es.py</div><div id='m_start'> M Start Line: 16</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                 np.min(self.eigenvalues))

        &#47&#47 TODO: test that this is the same as below.
        for i in range(<a id="change">len(</a>self.C<a id="change">)</a>):
            for j in range(i + 1):
                self.invsqrt[i, j] = self.invsqrt[j, i]<a id="change"> = </a>sum(
                    self.eigenbasis[i, k] * self.eigenbasis[j, k] /
                    self.eigenvalues[k]**0.5 for k in range(len(self.C)))
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47              self.eigenbasis[i, k] * self.eigenbasis[j, k] /
        &#47&#47              self.eigenvalues[k]**0.5 for k in range(len(self.C)))

        self.invsqrt = (self.eigenbasis<a id="change"> *
                        </a>(1 / <a id="change">np.sqrt(</a>self.eigenvalues<a id="change">)</a>))<a id="change"> @ </a>self.eigenbasis.T


class CMAEvolutionStrategy:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/icaros-usc/pyribs/commit/8e09469f7e8968d6a566b285848ac398f4da760b#diff-72d6ee27f255605dc59c9cf7b5a1f7207f97a35b0e7bd06c6d3c0fa8b751d809L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23247055</div><div id='project'> Project Name: icaros-usc/pyribs</div><div id='commit'> Commit Name: 8e09469f7e8968d6a566b285848ac398f4da760b</div><div id='time'> Time: 2021-01-19</div><div id='author'> Author: bryon@btjanaka.net</div><div id='file'> File Name: ribs/emitters/opt/_cma_es.py</div><div id='m_class'> M Class Name: DecompMatrix</div><div id='n_method'> N Class Name: DecompMatrix</div><div id='m_method'> M Method Name: update_eigensystem(1)</div><div id='n_method'> N Method Name: update_eigensystem(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ribs/emitters/opt/_cma_es.py</div><div id='n_file'> N File Name: ribs/emitters/opt/_cma_es.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 32</div><BR>