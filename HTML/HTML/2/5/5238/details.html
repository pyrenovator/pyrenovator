<html><h3>Pattern ID :5238
</h3><img src='18581859.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            num_samples += predictions.size(0)

        &#47&#47 Set to 0 the gradient of pruned neurons
        <a id="change">with torch.no_grad()</a><a id="change">:
            </a>for name, module in model.named_modules():
                if isinstance(module, nn.Conv2d):
                    for n, p in module.named_parameters():
                        if n == "weight_orig":</code></pre><h3>After Change</h3><pre><code class='java'>
            print(f"The current model has {(remaining_neurons / total_neurons) * 100} % of the original neurons")
            
            if config.simplify:
                <a id="change">print("Simplifying model"</a><a id="change">)</a>
                model = model.to("cpu")
                propagate.propagate_bias(model, torch.zeros(1, 3, 224, 224), pinned_out)
                remove_zeroed(model, torch.ones(1, 3, 224, 224), pinned_out)
                model = model.to(device)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/eidoslab/simplify/commit/e3cef5125238684e5bce46c85ed1ed762abd377e#diff-41474220006d3f313aca51ff34722bbf4cb675023f4106ffd78a318ae920faccL49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 18581859</div><div id='project'> Project Name: eidoslab/simplify</div><div id='commit'> Commit Name: e3cef5125238684e5bce46c85ed1ed762abd377e</div><div id='time'> Time: 2021-07-01</div><div id='author'> Author: carlo.alberto.barbano@outlook.com</div><div id='file'> File Name: training/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: training/train.py</div><div id='n_file'> N File Name: training/train.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 129</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 147</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            self.update_J_Broyden(h, self.prev_Y[0], self.current_Y)

        <a id="change">with torch.no_grad()</a><a id="change">:
            </a>self.update_hess()
            self.update_grad(self.current_Y)
        self.iteration += 1
    </code></pre><h3>After Change</h3><pre><code class='java'>
            print("full jac")
        else:
            self.update_J_Broyden(h, self.prev_Y[0], self.current_Y)
            <a id="change">print("Broyden jac"</a><a id="change">)</a>

        self.update_hess()
        self.update_grad(self.current_Y)
        self.iteration += 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/edac78536835e4e35ffd761462ea1607fd4fdbcc#diff-52615ad08cfc1cfad1befd14d3c383d34ae33d73e933e1359265221e8731fb61L83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 18581858</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: edac78536835e4e35ffd761462ea1607fd4fdbcc</div><div id='time'> Time: 2022-12-07</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/fit/lm.py</div><div id='m_class'> M Class Name: LM</div><div id='n_method'> N Class Name: LM</div><div id='m_method'> M Method Name: step(2)</div><div id='n_method'> N Method Name: step(2)</div><div id='m_parent_class'> M Parent Class: BaseOptimizer</div><div id='n_parent_class'> N Parent Class: BaseOptimizer</div><div id='m_file'> M File Name: autoprof/fit/lm.py</div><div id='n_file'> N File Name: autoprof/fit/lm.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 87</div><div id='n_end'> N End Line: 160</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            ts = time()
            if (batchi + 1) % self.config[&quotprint_rate&quot] == 0:
                print(&quotEval Batch {}: {:.2}s&quot.format(batchi, np.mean(time_used[-self.config[&quotprint_rate&quot]:])))
            <a id="change">with torch.no_grad()</a><a id="change">:
                </a>out = self.model(batch)
            if batchi in self.vis_batches:
                self.vis(batchi, batch, out)
            loss, dict_loss = self.model.loss(out[&quotsrc&quot], out[&quottgt&quot], out[&quotmatch_weights&quot], out[&quotkeypoint_ints&quot], out[&quotscores&quot], batch)</code></pre><h3>After Change</h3><pre><code class='java'>
                out = self.model(batch)
            except RuntimeError as e:
                print(e)
                <a id="change">print(&quotWARNING: exception encountered... skipping this batch.&quot</a><a id="change">)</a>
                continue
            if batchi in self.vis_batches:
                self.vis(batchi, batch, out)
            loss, dict_loss = self.model.loss(out[&quotsrc&quot], out[&quottgt&quot], out[&quotmatch_weights&quot], out[&quotkeypoint_ints&quot], out[&quotscores&quot], batch)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/utiasasrl/hero_radar_odometry/commit/8d350142346975f4786cb80a06d94b6d92cdef5d#diff-d14138d7ad34288a6b2a27e794b8ca54d88f18290df43dfdc7f47fea93c9c682L174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 18581857</div><div id='project'> Project Name: utiasasrl/hero_radar_odometry</div><div id='commit'> Commit Name: 8d350142346975f4786cb80a06d94b6d92cdef5d</div><div id='time'> Time: 2021-02-11</div><div id='author'> Author: keenburn2004@gmail.com</div><div id='file'> File Name: utils/monitor.py</div><div id='m_class'> M Class Name: SteamMonitor</div><div id='n_method'> N Class Name: SteamMonitor</div><div id='m_method'> M Method Name: validation(1)</div><div id='n_method'> N Method Name: validation(1)</div><div id='m_parent_class'> M Parent Class: MonitorBase</div><div id='n_parent_class'> N Parent Class: MonitorBase</div><div id='m_file'> M File Name: utils/monitor.py</div><div id='n_file'> N File Name: utils/monitor.py</div><div id='m_start'> M Start Line: 177</div><div id='m_end'> M End Line: 233</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 236</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def model_image(fig, ax, model, image = None, showcbar = True, **kwargs):

    if image is None:
        <a id="change">with torch.no_grad()</a><a id="change">:
            </a>model.sample(model.model_image)
        image = model.model_image.data.detach().cpu().numpy()

    imshow_kwargs = {</code></pre><h3>After Change</h3><pre><code class='java'>
            if isinstance(M,models.Sky_Model):
                try:
                    sky_level = (10**(M["sky"].value)*model.target.pixelscale**2).detach().cpu().item()
                    <a id="change">print("subtracting sky level: "</a>, sky_level<a id="change">)</a>
                    break
                except Exception as e:
                    print(e)
    im = ax.imshow(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/53be3d025f16413cb88735d0e934f1282bd41a02#diff-8ab9ba0d1d7ca33f2ad8e5a6cd36ac08ebe74c1fc5b0cbfa4652db41f25fa1eeL44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 18581862</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: 53be3d025f16413cb88735d0e934f1282bd41a02</div><div id='time'> Time: 2022-12-12</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/plots/image.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: model_image(5)</div><div id='n_method'> N Method Name: model_image(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: autoprof/plots/image.py</div><div id='n_file'> N File Name: autoprof/plots/image.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &#47&#47     x_adv, perturb = pgd_attack.perturb(x_real, x_real, c_trg_list[0])

            for c_trg in c_trg_list:
                <a id="change">with torch.no_grad()</a><a id="change">:
                    </a>gen_noattack, gen_noattack_feats = self.G(x_real, c_trg)
                &#47&#47 Attack
                x_adv, perturb = pgd_attack.perturb(x_real, black, c_trg)
                &#47&#47 x_adv = x_real + perturb</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 11 layers + output
            &#47&#47 layer_num_orig = 11

            <a id="change">print(&quotLayer&quot</a>, layer_num_orig<a id="change">)</a>
            for i, (x_real, c_org) in enumerate(data_loader):
                &#47&#47 Black image
                black = np.zeros((1,3,256,256))
                black = torch.FloatTensor(black).to(self.device)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/natanielruiz/disrupting-deepfakes/commit/572a2bff955b18f76e8ba2cbc181036fed2f7b18#diff-b700ed60ba32817f1933c49049485378be754d9c9f56fc1fd510f39fe9ce0ee0L572' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 18581860</div><div id='project'> Project Name: natanielruiz/disrupting-deepfakes</div><div id='commit'> Commit Name: 572a2bff955b18f76e8ba2cbc181036fed2f7b18</div><div id='time'> Time: 2019-12-24</div><div id='author'> Author: nruiz@Nataniels-MacBook-Pro.local</div><div id='file'> File Name: stargan/solver.py</div><div id='m_class'> M Class Name: Solver</div><div id='n_method'> N Class Name: Solver</div><div id='m_method'> M Method Name: test_attack(1)</div><div id='n_method'> N Method Name: test_attack(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: stargan/solver.py</div><div id='n_file'> N File Name: stargan/solver.py</div><div id='m_start'> M Start Line: 576</div><div id='m_end'> M End Line: 655</div><div id='n_start'> N Start Line: 660</div><div id='n_end'> N End Line: 743</div><BR>