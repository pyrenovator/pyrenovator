<html><h3>Pattern ID :41810
</h3><img src='117231864.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Default return value. Erring on the side of caution here by
        &#47&#47 being super verbose.
        <a id="change">return </a>[([]<a id="change">, []</a>)]
</code></pre><h3>After Change</h3><pre><code class='java'>
            print(&quotinfinite_pairs =&quot, infinite_pairs)

            &#47&#47 &quotPair off&quot all the indices
            max_index = <a id="change">torch.argmax(</a>x<a id="change">)</a>
            fake_destroyers<a id="change"> = </a>torch.empty_like(infinite_pairs).fill_(max_index)

            infinite_pairs = torch.stack(
                (infinite_pairs<a id="change">, fake_destroyers</a>), 1
            )

            print(&quotinfinite pairs, fixed =&quot, infinite_pairs)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aidos-lab/pytorch-topological/commit/0dd25924d9fd7691de14281351dcee1edd8cfc26#diff-55e452f337a40ea32b5684b3ef902cea8be96c3dfbf8d1bf1649e99874c84074L74' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117231864</div><div id='project'> Project Name: aidos-lab/pytorch-topological</div><div id='commit'> Commit Name: 0dd25924d9fd7691de14281351dcee1edd8cfc26</div><div id='time'> Time: 2021-12-21</div><div id='author'> Author: bastian@rieck.me</div><div id='file'> File Name: torch_topological/nn/cubical.py</div><div id='m_class'> M Class Name: Cubical</div><div id='n_method'> N Class Name: Cubical</div><div id='m_method'> M Method Name: _extract_generators_and_diagrams(4)</div><div id='n_method'> N Method Name: _extract_generators_and_diagrams(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: torch_topological/nn/cubical.py</div><div id='n_file'> N File Name: torch_topological/nn/cubical.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 119</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            l1_loss = 0.0
        &#47&#47 return class_loss + object_loss + l1_loss + bbox_loss * self.bbox_loss_weight
        <a id="change">return </a>class_loss<a id="change">, bbox_loss, object_loss, l1_loss</a>

    def __call_single__(self, inputs):
        bbox_labels_true, bbox_labels_pred = inputs[0], inputs[1]
        return tf.cond(</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 return class_loss + object_loss + l1_loss + bbox_loss * self.bbox_loss_weight

        num_valid_anchors = tf.cast(tf.shape(bboxes_pred)[0], bboxes_pred.dtype)
        class_acc<a id="change"> = </a>tf.reduce_mean(tf.cast(tf.argmax(labels_true, axis=-1) == <a id="change">tf.argmax(</a>labels_pred<a id="change">, axis=-1)</a>, "float32"))
        return class_loss<a id="change">, bbox_loss, object_loss, l1_loss, num_valid_anchors, class_acc</a>

    def __call_single__(self, inputs):
        bbox_labels_true, bbox_labels_pred = inputs[0], inputs[1]
        return tf.cond(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/dd60502794650a642528945d59ba636f6c7ff080#diff-21fe082da37c1e144dee249540395645116791e1ed13db472e98b369ac523bf3L157' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117231866</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: dd60502794650a642528945d59ba636f6c7ff080</div><div id='time'> Time: 2022-03-07</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: keras_cv_attention_models/coco/losses.py</div><div id='m_class'> M Class Name: AnchorFreeLoss</div><div id='n_method'> N Class Name: AnchorFreeLoss</div><div id='m_method'> M Method Name: __valid_call_single__(3)</div><div id='n_method'> N Method Name: __valid_call_single__(3)</div><div id='m_parent_class'> M Parent Class: tf.keras.losses.Loss</div><div id='n_parent_class'> N Parent Class: tf.keras.losses.Loss</div><div id='m_file'> M File Name: keras_cv_attention_models/coco/losses.py</div><div id='n_file'> N File Name: keras_cv_attention_models/coco/losses.py</div><div id='m_start'> M Start Line: 162</div><div id='m_end'> M End Line: 173</div><div id='n_start'> N Start Line: 177</div><div id='n_end'> N End Line: 188</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        loss = self.forward_loss(imgs1, pred)
        &#47&#47 result = self.unpatchify(pred)
        result = self.late_fusion(pred, trans_matrices, num_agent_tensor, batch_size)
        <a id="change">return </a>loss<a id="change">, result, mask, pred</a>



def amo_individual_bev_multi_mae_vit_base_patch8_dec512d8b(**kwargs):</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 loss = self.forward_loss(imgs1, pred)
        loss = self.forward_bce_loss(imgs1, pred)
        &#47&#47 result = self.unpatchify(pred)
        ind_result<a id="change"> = </a><a id="change">torch.argmax(</a>torch.softmax(pred, dim=1)<a id="change">, dim=1)</a>
        result = self.late_fusion(ind_result, trans_matrices, num_agent_tensor, batch_size)
        &#47&#47 print(result.size())
        &#47&#47 ind_result = self.unpatchify(pred)
        return loss<a id="change">, result, mask, ind_result</a>



def amo_individual_bev_multi_mae_vit_base_patch8_dec512d8b(**kwargs):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/coperception/star/commit/5c651e50aec4838fb97747b609563649b465444f#diff-a884c48041b9c06e41c73eb2c54e9b945061acd65915e9fd5c4ff7d8c4c65061L946' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117231862</div><div id='project'> Project Name: coperception/star</div><div id='commit'> Commit Name: 5c651e50aec4838fb97747b609563649b465444f</div><div id='time'> Time: 2022-06-06</div><div id='author'> Author: 954742885@qq.com</div><div id='file'> File Name: coperception/models/transformers/multiagent_mae.py</div><div id='m_class'> M Class Name: AmortizedIndivMMAEViT</div><div id='n_method'> N Class Name: AmortizedIndivMMAEViT</div><div id='m_method'> M Method Name: forward(8)</div><div id='n_method'> N Method Name: forward(8)</div><div id='m_parent_class'> M Parent Class: MultiAgentMaskedAutoencoderViT</div><div id='n_parent_class'> N Parent Class: MultiAgentMaskedAutoencoderViT</div><div id='m_file'> M File Name: coperception/models/transformers/multiagent_mae.py</div><div id='n_file'> N File Name: coperception/models/transformers/multiagent_mae.py</div><div id='m_start'> M Start Line: 956</div><div id='m_end'> M End Line: 960</div><div id='n_start'> N Start Line: 984</div><div id='n_end'> N End Line: 992</div><BR>