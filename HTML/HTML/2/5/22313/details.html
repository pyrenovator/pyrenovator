<html><h3>Pattern ID :22313
</h3><img src='70397442.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                              "source2":{(0,1):"LABEL3", (2,6):"LABEL2"},
                              "source4":{(0,2):"LABEL2"}}
    doc.user_data["agg_spans"] = {"source3":{(7,9):"LABEL2", (1,4):"LABEL1"}}
    doc.user_data["agg_probs"] = {"source3":{7:{"B-LABEL2":0.7}, 8:<a id="change">{</a>"I-LABEL2":0.6<a id="change">}</a>, 
                                                    1:{"B-LABEL1":0.9}, 2:{"I-LABEL1":0.55}, 3:{"I-LABEL1":0.85}}}
                                  
    assert set(utils.get_spans(doc, ["source1", "source2"]).keys()) == {(0,2), (2,6)}</code></pre><h3>After Change</h3><pre><code class='java'>
    doc.spans["source2"] = [Span(doc, 0, 1, label="LABEL3"),
                            Span(doc, 2, 6, label="LABEL2")]
    doc.spans["source4"] = [Span(doc, 0, 2, label="LABEL2")]
    doc.spans["source3"] = <a id="change">[</a>Span(doc, 7, 9, label="LABEL2"),
                            <a id="change">Span(</a>doc, <a id="change">1</a>, <a id="change">4</a><a id="change">, label="LABEL1")</a>]
             
    assert set((span.start, span.end) for span in 
               utils.get_spans(doc, ["source1", "source2"]))  == {(0,2), (2,6)}                   </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/norskregnesentral/skweak/commit/b76b17284329e1ff3ff0d6f47d4695557d3cd72d#diff-33c13e0b177bacd2f02e29bcb8aea5b49e7ce34901fd8f41fefb65defba1bd33L51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70397442</div><div id='project'> Project Name: norskregnesentral/skweak</div><div id='commit'> Commit Name: b76b17284329e1ff3ff0d6f47d4695557d3cd72d</div><div id='time'> Time: 2021-04-18</div><div id='author'> Author: plison@nr.no</div><div id='file'> File Name: tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_get_spans(1)</div><div id='n_method'> N Method Name: test_get_spans(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_utils.py</div><div id='n_file'> N File Name: tests/test_utils.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 64</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_docbins(nlp_small, temp_file="data/temporary_test.docbin"):
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    doc2 = nlp_small("He is working on various NLP topics.")
    doc.user_data["spans"] = <a id="change">{</a>"test":{(0,2):"PERSON"}<a id="change">}</a>
    utils.docbin_writer([doc, doc2], temp_file)
    doc3, doc4 = list(utils.docbin_reader(temp_file, "en_core_web_sm"))
    assert doc.text == doc3.text 
    assert doc2.text == doc4.text </code></pre><h3>After Change</h3><pre><code class='java'>
def test_docbins(nlp_small, temp_file="data/temporary_test.docbin"):
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    doc2 = nlp_small("He is working on various NLP topics.")
    doc.spans["test"] = <a id="change">[</a><a id="change">Span(</a>doc, <a id="change">0</a>, <a id="change">2</a><a id="change">, label="PERSON")</a>]
    utils.docbin_writer([doc, doc2], temp_file)
    doc3, doc4 = list(utils.docbin_reader(temp_file, "en_core_web_sm"))
    assert doc.text == doc3.text </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/norskregnesentral/skweak/commit/b76b17284329e1ff3ff0d6f47d4695557d3cd72d#diff-33c13e0b177bacd2f02e29bcb8aea5b49e7ce34901fd8f41fefb65defba1bd33L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70397282</div><div id='project'> Project Name: norskregnesentral/skweak</div><div id='commit'> Commit Name: b76b17284329e1ff3ff0d6f47d4695557d3cd72d</div><div id='time'> Time: 2021-04-18</div><div id='author'> Author: plison@nr.no</div><div id='file'> File Name: tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_docbins(2)</div><div id='n_method'> N Method Name: test_docbins(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_utils.py</div><div id='n_file'> N File Name: tests/test_utils.py</div><div id='m_start'> M Start Line: 81</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 85</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    assert doc.ents[0].text=="Pierre Lison"
    assert doc.ents[0].label_=="PERSON"
    doc.user_data["spans"] = {"test":<a id="change">{</a>(6, 9):"RESEARCH_ORG"<a id="change">}</a>}
    doc = utils.replace_ner_spans(doc, "test")
    assert doc.ents[0].text=="Norwegian Computing Center"
    assert doc.ents[0].label_=="RESEARCH_ORG"</code></pre><h3>After Change</h3><pre><code class='java'>
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    assert doc.ents[0].text=="Pierre Lison"
    assert doc.ents[0].label_=="PERSON"
    doc.spans["test"] = <a id="change">[</a><a id="change">Span(</a>doc, <a id="change">6</a>, <a id="change">9</a><a id="change">, label="RESEARCH_ORG")</a>]
    doc = utils.replace_ner_spans(doc, "test")
    assert doc.ents[0].text=="Norwegian Computing Center"
    assert doc.ents[0].label_=="RESEARCH_ORG"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/norskregnesentral/skweak/commit/b76b17284329e1ff3ff0d6f47d4695557d3cd72d#diff-33c13e0b177bacd2f02e29bcb8aea5b49e7ce34901fd8f41fefb65defba1bd33L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70397440</div><div id='project'> Project Name: norskregnesentral/skweak</div><div id='commit'> Commit Name: b76b17284329e1ff3ff0d6f47d4695557d3cd72d</div><div id='time'> Time: 2021-04-18</div><div id='author'> Author: plison@nr.no</div><div id='file'> File Name: tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_replace_ner(1)</div><div id='n_method'> N Method Name: test_replace_ner(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_utils.py</div><div id='n_file'> N File Name: tests/test_utils.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    doc2 = nlp_small("He is working on various NLP topics.")
    doc.user_data["spans"] = {"test":{(6, 9):"RESEARCH_ORG"}}
    doc2.user_data["spans"] = <a id="change">{</a>"test":{}<a id="change">}</a>
    
    utils.json_writer([doc, doc2], temp_file, source="test")
    fd = open(temp_file, "r")
    assert "I-RESEARCH_ORG" in fd.read()</code></pre><h3>After Change</h3><pre><code class='java'>
    
    doc = nlp_small("Pierre Lison is working at the Norwegian Computing Center.")
    doc2 = nlp_small("He is working on various NLP topics.")
    doc.spans["test"] = <a id="change">[</a><a id="change">Span(</a>doc, <a id="change">6</a>, <a id="change">9</a><a id="change">, label="RESEARCH_ORG")</a>]
    doc2.spans["test"] = []
    
    utils.json_writer([doc, doc2], temp_file, source="test")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/norskregnesentral/skweak/commit/b76b17284329e1ff3ff0d6f47d4695557d3cd72d#diff-33c13e0b177bacd2f02e29bcb8aea5b49e7ce34901fd8f41fefb65defba1bd33L92' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 70397450</div><div id='project'> Project Name: norskregnesentral/skweak</div><div id='commit'> Commit Name: b76b17284329e1ff3ff0d6f47d4695557d3cd72d</div><div id='time'> Time: 2021-04-18</div><div id='author'> Author: plison@nr.no</div><div id='file'> File Name: tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_json(2)</div><div id='n_method'> N Method Name: test_json(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_utils.py</div><div id='n_file'> N File Name: tests/test_utils.py</div><div id='m_start'> M Start Line: 99</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 101</div><div id='n_end'> N End Line: 104</div><BR>