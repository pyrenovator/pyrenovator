<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        B_pred = self.nnls_reg2(H_profile)

        criterion = nn.MSELoss()
        model_score<a id="change"> = </a><a id="change">criterion(B_pred, B).item()</a>
        return model_score
</code></pre><h3>After Change</h3><pre><code class='java'>
        print(pred.shape)
        print(true_prop.shape)
        pred = pred/torch.sum(pred, 1, keepdims=True).clamp(min=1e-6)
        true_prop = true_prop/<a id="change">torch.sum(</a>true_prop, 1<a id="change">, keepdims=True)</a>.clamp(min=1e-6)
        loss = ((pred - true_prop)**2).mean()
        
        return <a id="change">loss.detach().item()</a>

</code></pre>