<html><h3>Pattern ID :4537
</h3><img src='16483931.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    args_train.n_epochs = 0
    with pytest.raises(ValueError):
        _start_prediction_or_training(args_train)
    <a id="change">Path(existing_file).unlink()</a>
    args_confidence = deepcopy(args)
    args_confidence.confidence_threshold = 0
    with pytest.raises(ValueError):
        _start_prediction_or_training(args_confidence)</code></pre><h3>After Change</h3><pre><code class='java'>
    args_train.n_epochs = 0
    with pytest.raises(ValueError):
        _start_prediction_or_training(args_train)
    <a id="change">try:
        </a><a id="change">Path(existing_file).unlink()</a>
    <a id="change">except </a>PermissionError:
        <a id="change">pass</a>
    args_confidence = deepcopy(args)
    args_confidence.confidence_threshold = 0
    with pytest.raises(ValueError):
        _start_prediction_or_training(args_confidence)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/df2296f9efe5cf935a8fce489eb8f1304099b8db#diff-308a7a17f33cf1d97634f98515c227dba6ea2f74f1e56d93dbf89dba095b2113L144' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483931</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: df2296f9efe5cf935a8fce489eb8f1304099b8db</div><div id='time'> Time: 2020-06-15</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/tests/test_cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_args_sanity_check(0)</div><div id='n_method'> N Method Name: test_args_sanity_check(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/tests/test_cli.py</div><div id='n_file'> N File Name: deepnog/tests/test_cli.py</div><div id='m_start'> M Start Line: 144</div><div id='m_end'> M End Line: 144</div><div id='n_start'> N Start Line: 150</div><div id='n_end'> N End Line: 154</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    symlink_path.mkdir(parents=True)

                symlink = symlink_path / f&quot{self._args.namespace}_{repo_name}&quot
                <a id="change">symlink.unlink(missing_ok=True)</a>
                packages = [package_name]
                symlink.symlink_to(path)
                os.chdir(str(pypi_path))
                if not self._args.user:</code></pre><h3>After Change</h3><pre><code class='java'>
                    symlink_path.mkdir(parents=True)

                symlink = symlink_path / f&quot{self._args.namespace}_{repo_name}&quot
                <a id="change">try:
                    </a><a id="change">symlink.unlink()</a>
                <a id="change">except </a>FileNotFoundError:
                    <a id="change">pass</a>
                packages = [package_name]
                symlink.symlink_to(path)
                os.chdir(str(pypi_path))
                if not self._args.user:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/37b1be51e4429401d2fa8f5d1a2ae9729fb12108#diff-c916df0ace0068a5460e2f33db043418c40616579d5e1f76c72bb3bf44ade9fcL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483930</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: 37b1be51e4429401d2fa8f5d1a2ae9729fb12108</div><div id='time'> Time: 2022-04-20</div><div id='author'> Author: 81822489+filip-halt@users.noreply.github.com</div><div id='file'> File Name: towhee/command/develop.py</div><div id='m_class'> M Class Name: SetupCommand</div><div id='n_method'> N Class Name: SetupCommand</div><div id='m_method'> M Method Name: __call__(1)</div><div id='n_method'> N Method Name: __call__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: towhee/command/develop.py</div><div id='n_file'> N File Name: towhee/command/develop.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 64</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                assert k in model
            np.testing.assert_equal(model[&quotclasses&quot], np.array([&quot28H52&quot, &quot99A99&quot, &quotZYX12&quot]))
            assert model[&quotmodel_state_dict&quot][&quotclassification1.weight&quot].shape == (3, 1200)
            <a id="change">f.unlink()</a>
        else:
            assert False, f&quotUnexpected file in output dir: {f}&quot

    try:</code></pre><h3>After Change</h3><pre><code class='java'>
                assert k in model
            np.testing.assert_equal(model[&quotclasses&quot], np.array([&quot28H52&quot, &quot99A99&quot, &quotZYX12&quot]))
            assert model[&quotmodel_state_dict&quot][&quotclassification1.weight&quot].shape == (3, 1200)
            <a id="change">try:
                </a><a id="change">f.unlink()</a>
            <a id="change">except </a>PermissionError:
                <a id="change">pass</a>
        else:
            assert False, f&quotUnexpected file in output dir: {f}&quot

    try:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/df2296f9efe5cf935a8fce489eb8f1304099b8db#diff-308a7a17f33cf1d97634f98515c227dba6ea2f74f1e56d93dbf89dba095b2113L154' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483929</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: df2296f9efe5cf935a8fce489eb8f1304099b8db</div><div id='time'> Time: 2020-06-15</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/tests/test_cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_training_cmd_line_invocation(0)</div><div id='n_method'> N Method Name: test_training_cmd_line_invocation(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/tests/test_cli.py</div><div id='n_file'> N File Name: deepnog/tests/test_cli.py</div><div id='m_start'> M Start Line: 167</div><div id='m_end'> M End Line: 195</div><div id='n_start'> N Start Line: 176</div><div id='n_end'> N End Line: 215</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                new_path = cache_path / &quothub&quot / new_dir / file

                if pipe[&quotoverwrite&quot]:
                    <a id="change">Path.unlink(</a>new_path<a id="change">, missing_ok=True)</a>

                if new_path.is_file():
                    &#47&#47 TODO: filip-halt
                    &#47&#47 Error logging.</code></pre><h3>After Change</h3><pre><code class='java'>
                new_path = cache_path / &quothub&quot / new_dir / file

                if pipe[&quotoverwrite&quot]:
                    <a id="change">try:
                        </a><a id="change">Path.unlink(</a>new_path<a id="change">)</a>
                    <a id="change">except </a>FileNotFoundError:
                        <a id="change">pass</a>

                if new_path.is_file():
                    &#47&#47 TODO: filip-halt
                    &#47&#47 Error logging.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/37b1be51e4429401d2fa8f5d1a2ae9729fb12108#diff-5c6bee0d796aaae08baedfebaa724c6f150734daab8a849492701bc867bfbf08L247' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483928</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: 37b1be51e4429401d2fa8f5d1a2ae9729fb12108</div><div id='time'> Time: 2022-04-20</div><div id='author'> Author: 81822489+filip-halt@users.noreply.github.com</div><div id='file'> File Name: towhee/hub/file_manager.py</div><div id='m_class'> M Class Name: FileManager</div><div id='n_method'> N Class Name: FileManager</div><div id='m_method'> M Method Name: _cache_locals(1)</div><div id='n_method'> N Method Name: _cache_locals(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: towhee/hub/file_manager.py</div><div id='n_file'> N File Name: towhee/hub/file_manager.py</div><div id='m_start'> M Start Line: 257</div><div id='m_end'> M End Line: 257</div><div id='n_start'> N Start Line: 257</div><div id='n_end'> N End Line: 262</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    outfile = Path(outfile)
    assert outfile.is_file(), (f&quotStdout of call:\n{proc.stdout}\n\n&quot
                               f&quotStderr of call:\n{proc.stderr}&quot)
    <a id="change">outfile.unlink()</a>

    &#47&#47 Using output to stdout
    proc = subprocess.run([&quotdeepnog&quot, &quotinfer&quot,
                           f&quot{TEST_FILE_SHORT}&quot,</code></pre><h3>After Change</h3><pre><code class='java'>
    outfile = Path(outfile)
    assert outfile.is_file(), (f&quotStdout of call:\n{proc.stdout}\n\n&quot
                               f&quotStderr of call:\n{proc.stderr}&quot)
    <a id="change">try:
        </a><a id="change">outfile.unlink()</a>
    <a id="change">except </a>PermissionError:
        <a id="change">pass</a>

    &#47&#47 Using output to stdout
    proc = subprocess.run([&quotdeepnog&quot, &quotinfer&quot,
                           f&quot{TEST_FILE_SHORT}&quot,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/df2296f9efe5cf935a8fce489eb8f1304099b8db#diff-308a7a17f33cf1d97634f98515c227dba6ea2f74f1e56d93dbf89dba095b2113L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483927</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: df2296f9efe5cf935a8fce489eb8f1304099b8db</div><div id='time'> Time: 2020-06-15</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/tests/test_cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_inference_cmd_line_invocation(1)</div><div id='n_method'> N Method Name: test_inference_cmd_line_invocation(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/tests/test_cli.py</div><div id='n_file'> N File Name: deepnog/tests/test_cli.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 64</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                            ))
def test_main_and_argparsing(mock_args):  &#47&#47 noqa
    main()
    <a id="change">Path(&quotout.mock.2&quot).unlink()</a>


def test_args_sanity_check():
    _, existing_file = tempfile.mkstemp()</code></pre><h3>After Change</h3><pre><code class='java'>
                                            ))
def test_main_and_argparsing(mock_args):  &#47&#47 noqa
    main()
    <a id="change">try:
        </a><a id="change">Path(&quotout.mock.2&quot).unlink()</a>
    <a id="change">except </a>PermissionError:
        <a id="change">pass</a>


def test_args_sanity_check():
    _, existing_file = tempfile.mkstemp()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/df2296f9efe5cf935a8fce489eb8f1304099b8db#diff-308a7a17f33cf1d97634f98515c227dba6ea2f74f1e56d93dbf89dba095b2113L112' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16483926</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: df2296f9efe5cf935a8fce489eb8f1304099b8db</div><div id='time'> Time: 2020-06-15</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/tests/test_cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_main_and_argparsing(1)</div><div id='n_method'> N Method Name: test_main_and_argparsing(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/tests/test_cli.py</div><div id='n_file'> N File Name: deepnog/tests/test_cli.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 114</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 122</div><BR>