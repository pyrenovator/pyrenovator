<html><h3>Pattern ID :2482
</h3><img src='10461086.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def add_ldp_noise(self, grad):
        if self.dp_type == "ldp":
            grad = self.compute_randomized_gradient(grad)
        <a id="change">return </a>grad
</code></pre><h3>After Change</h3><pre><code class='java'>

    def add_ldp_noise(self, grads):
        new_grads = []
        <a id="change">for </a>i in range(len(grads))<a id="change">:
            </a>list = []
            for x in grads[i]:
                y<a id="change"> = </a><a id="change">self.compute_new_grad(</a>x<a id="change">)</a>
                list.append(y)
            new_grads.append(tuple(list))
        return new_grads
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/5fb148443b0d3730bd81d4f7bae7ff5ef1e7af99#diff-d8c697391d6e851625e6f6d14b1e864b9e529ba4329b6bb4e81b947d01332214L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10461086</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 5fb148443b0d3730bd81d4f7bae7ff5ef1e7af99</div><div id='time'> Time: 2022-08-24</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_class'> M Class Name: FedMLDifferentialPrivacy</div><div id='n_method'> N Class Name: FedMLDifferentialPrivacy</div><div id='m_method'> M Method Name: add_ldp_noise(2)</div><div id='n_method'> N Method Name: add_ldp_noise(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='n_file'> N File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def add_ldp_noise(self, grad):
        if self.dp_type == "ldp":
            grad = self.compute_randomized_gradient(grad)
        <a id="change">return </a>grad
</code></pre><h3>After Change</h3><pre><code class='java'>

    def add_ldp_noise(self, grads):
        new_grads = []
        <a id="change">for </a><a id="change">i</a> in range(len(grads))<a id="change">:
            </a>list = []
            for x in grads[i]:
                y<a id="change"> = </a><a id="change">self.compute_new_grad(</a>x<a id="change">)</a>
                list.append(y)
            new_grads.append(tuple(list))
        return new_grads
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/f0311511ae2dd0d0fbce85f20e38131e3460516d#diff-d8c697391d6e851625e6f6d14b1e864b9e529ba4329b6bb4e81b947d01332214L57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10461084</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: f0311511ae2dd0d0fbce85f20e38131e3460516d</div><div id='time'> Time: 2022-08-24</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_class'> M Class Name: FedMLDifferentialPrivacy</div><div id='n_method'> N Class Name: FedMLDifferentialPrivacy</div><div id='m_method'> M Method Name: add_ldp_noise(2)</div><div id='n_method'> N Method Name: add_ldp_noise(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='n_file'> N File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def add_cdp_noise(self, avg_param):
        if self.dp_type == "cdp":
            avg_param = self.compute_randomized_gradient(avg_param)
        <a id="change">return </a>avg_param

    def add_ldp_noise(self, grad):
        if self.dp_type == "ldp":</code></pre><h3>After Change</h3><pre><code class='java'>
    def add_cdp_noise(self, avg_param):
        new_grad = dict()
        &#47&#47 print(f"grad={avg_param}")
        <a id="change">for </a><a id="change">k</a> in avg_param.keys()<a id="change">:
            </a>new_grad[k]<a id="change"> = </a><a id="change">self.compute_new_grad(</a>avg_param[k]<a id="change">)</a>
        return new_grad

    def add_ldp_noise(self, grads):
        new_grads = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/5fb148443b0d3730bd81d4f7bae7ff5ef1e7af99#diff-d8c697391d6e851625e6f6d14b1e864b9e529ba4329b6bb4e81b947d01332214L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10461082</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 5fb148443b0d3730bd81d4f7bae7ff5ef1e7af99</div><div id='time'> Time: 2022-08-24</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_class'> M Class Name: FedMLDifferentialPrivacy</div><div id='n_method'> N Class Name: FedMLDifferentialPrivacy</div><div id='m_method'> M Method Name: add_cdp_noise(2)</div><div id='n_method'> N Method Name: add_cdp_noise(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='n_file'> N File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def add_cdp_noise(self, avg_param):
        if self.dp_type == "cdp":
            avg_param = self.compute_randomized_gradient(avg_param)
        <a id="change">return </a>avg_param

    def add_ldp_noise(self, grad):
        if self.dp_type == "ldp":</code></pre><h3>After Change</h3><pre><code class='java'>
    def add_cdp_noise(self, avg_param):
        new_grad = dict()
        &#47&#47 print(f"grad={avg_param}")
        <a id="change">for </a><a id="change">k</a> in avg_param.keys()<a id="change">:
            </a>new_grad[k]<a id="change"> = </a><a id="change">self.compute_new_grad(</a>avg_param[k]<a id="change">)</a>
        return new_grad

    def add_ldp_noise(self, grads):
        new_grads = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/f0311511ae2dd0d0fbce85f20e38131e3460516d#diff-d8c697391d6e851625e6f6d14b1e864b9e529ba4329b6bb4e81b947d01332214L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10461081</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: f0311511ae2dd0d0fbce85f20e38131e3460516d</div><div id='time'> Time: 2022-08-24</div><div id='author'> Author: sshan0731@hotmail.com</div><div id='file'> File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_class'> M Class Name: FedMLDifferentialPrivacy</div><div id='n_method'> N Class Name: FedMLDifferentialPrivacy</div><div id='m_method'> M Method Name: add_cdp_noise(2)</div><div id='n_method'> N Method Name: add_cdp_noise(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='n_file'> N File Name: python/fedml/core/dp/fed_privacy_mechanism.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 68</div><BR>