<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if op == MovementOps.PERMUTE and arg == tuple(range(len(self.shape))): return self
    if op == MovementOps.SHRINK and arg == tuple((0,i) for i in self.shape): return self
    if op == MovementOps.PAD and arg == tuple((0,0) for _ in self.shape): return self
    if op == MovementOps.FLIP and <a id="change">all(</a>s<a id="change"> == 1 or i not in arg for i,s in enumerate(self.shape))</a>: return self

    &#47&#47 two ops in a row is one op
    if op in [MovementOps.RESHAPE, MovementOps.EXPAND, MovementOps.SHRINK] and self.realized is None and self.op.op == op:</code></pre><h3>After Change</h3><pre><code class='java'>
  def movement_op(self:LazyBuffer, op:MovementOps, arg) -&gt; LazyBuffer:
    &#47&#47 TODO: look into why that copy is needed
    arg = tuple(copy(arg))
    local_st<a id="change"> = </a>ShapeTracker(self.shape).movement_op(op, arg)

    &#47&#47 instant nops
    if <a id="change">local_st.contiguous and self.shape == local_st.shape</a>:
      return self

    &#47&#47 two ops in a row is one op</code></pre>