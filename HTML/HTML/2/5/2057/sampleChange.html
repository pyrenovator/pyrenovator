<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    triples_manp_subjs = np.concatenate([permuted_subjects, relations, objects], axis=1)
    triples_manp_objs = np.concatenate([permuted_objects, relations, objects], axis=1)
    manipulated_triples = <a id="change">np.random.permutation(</a>np.concatenate([triples_manp_subjs, triples_manp_objs], axis=0)<a id="change">)</a>

    if ratio_of_negative_triples != None:
        num_neg_triples = int(num_pos_triples * ratio_of_negative_triples)
</code></pre><h3>After Change</h3><pre><code class='java'>
    assert (ratio_of_negative_triples is not None)

    num_pos_triples = pos_triples.shape[0]
    num_subj_corrupt<a id="change"> = </a>num_pos_triples<a id="change"> // 2</a>

    subjects = pos_triples[:, 0:1]
    objects = pos_triples[:, 2:3]
    relations = pos_triples[:, 1:2]
    permuted_subjects = np.random.permutation(subjects)
    permuted_objects = np.random.permutation(objects)

    triples_manp_subjs = np.concatenate(
        [permuted_subjects[:num_subj_corrupt, :], relations[:num_subj_corrupt, :], objects[:num_subj_corrupt, :]],
        axis=1)
    triples_manp_objs = np.concatenate(
        [subjects[num_subj_corrupt:, :], relations[num_subj_corrupt:, :], permuted_objects[<a id="change">num_subj_corrupt</a>:, :]],
        axis=1)
    neg_triples = np.concatenate([triples_manp_subjs, triples_manp_objs], axis=0)
</code></pre>