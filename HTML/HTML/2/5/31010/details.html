<html><h3>Pattern ID :31010
</h3><img src='91068817.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            ntp_time = ntp_time.replace(tzinfo=timezone.utc).timestamp()
            return ntp_time
        except Exception as e:
            <a id="change">pass</a>

        return None

</code></pre><h3>After Change</h3><pre><code class='java'>
            MLOpsProfilerEvent._ntp_offset = MLOpsUtils.get_ntp_offset()

        if MLOpsProfilerEvent._ntp_offset is not None:
            ntp_time_seconds<a id="change"> = </a><a id="change">time.time() + </a>MLOpsProfilerEvent._ntp_offset
            <a id="change">return </a>ntp_time_seconds

        return time.time()
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/dc5010194dc1651e6a9dc58f6deee5fe633b71f5#diff-c73a1a30fde7fd9aadc820a01a11450f42b3e2d56afe666cf5752d8a82731eb1L114' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91068817</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: dc5010194dc1651e6a9dc58f6deee5fe633b71f5</div><div id='time'> Time: 2023-03-24</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='m_class'> M Class Name: MLOpsProfilerEvent</div><div id='n_method'> N Class Name: MLOpsProfilerEvent</div><div id='m_method'> M Method Name: get_ntp_time(0)</div><div id='n_method'> N Method Name: get_ntp_time(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='n_file'> N File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 114</div><div id='n_end'> N End Line: 121</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        obs must be a list of numpy arrays
        
        print(f"obs: {self.drone_int.read_obs()}")
        <a id="change">pass</a>
        &#47&#47 return obs, rew, done

    def get_observation_space(self):
        </code></pre><h3>After Change</h3><pre><code class='java'>
        self.drone_int.update()
        obs = self.drone_int.read_obs()
        &#47&#47 print(f"obs:{obs}")
        o<a id="change"> = </a>[np.array([obs[0], obs[1], obs[2], self.target, <a id="change">time.time() - </a>obs[4]], dtype=np.float32), ]
        r = - np.float32(abs(self.target - obs[0]))
        d = (r &gt;= -1)
        <a id="change">return </a>o, r, d

    def get_observation_space(self):
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/trackmania-rl/tmrl/commit/cd4eb35420d67250b9c25e3bee29a31bb406aa28#diff-46af771659f80bf2faa3da70b704616ada5d7d10f33ac9097db39920f65b3fc2L449' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91068819</div><div id='project'> Project Name: trackmania-rl/tmrl</div><div id='commit'> Commit Name: cd4eb35420d67250b9c25e3bee29a31bb406aa28</div><div id='time'> Time: 2020-11-04</div><div id='author'> Author: yann.bouteiller@hotmail.fr</div><div id='file'> File Name: agents-rt/agents/custom/custom_gym_interfaces.py</div><div id='m_class'> M Class Name: CogniflyInterfaceTask1</div><div id='n_method'> N Class Name: CogniflyInterfaceTask1</div><div id='m_method'> M Method Name: get_obs_rew_done(1)</div><div id='n_method'> N Method Name: get_obs_rew_done(1)</div><div id='m_parent_class'> M Parent Class: RealTimeGymInterface</div><div id='n_parent_class'> N Parent Class: RealTimeGymInterface</div><div id='m_file'> M File Name: agents-rt/agents/custom/custom_gym_interfaces.py</div><div id='n_file'> N File Name: agents-rt/agents/custom/custom_gym_interfaces.py</div><div id='m_start'> M Start Line: 454</div><div id='m_end'> M End Line: 455</div><div id='n_start'> N Start Line: 459</div><div id='n_end'> N End Line: 465</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            ntp_time = ntp_time.replace(tzinfo=timezone.utc).timestamp()
            return ntp_time
        except Exception as e:
            <a id="change">pass</a>

        return None

</code></pre><h3>After Change</h3><pre><code class='java'>
            MLOpsProfilerEvent._ntp_offset = MLOpsUtils.get_ntp_offset()

        if MLOpsProfilerEvent._ntp_offset is not None:
            ntp_time_seconds<a id="change"> = </a><a id="change">time.time() + </a>MLOpsProfilerEvent._ntp_offset
            <a id="change">return </a>ntp_time_seconds

        return time.time()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/61def35fad1e5351019fa7516c6adc8b3941e123#diff-c73a1a30fde7fd9aadc820a01a11450f42b3e2d56afe666cf5752d8a82731eb1L110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 91068818</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 61def35fad1e5351019fa7516c6adc8b3941e123</div><div id='time'> Time: 2023-03-24</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='m_class'> M Class Name: MLOpsProfilerEvent</div><div id='n_method'> N Class Name: MLOpsProfilerEvent</div><div id='m_method'> M Method Name: get_ntp_time(0)</div><div id='n_method'> N Method Name: get_ntp_time(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='n_file'> N File Name: python/fedml/core/mlops/mlops_profiler_event.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 114</div><div id='n_end'> N End Line: 121</div><BR>