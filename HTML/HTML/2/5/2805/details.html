<html><h3>Pattern ID :2805
</h3><img src='11226347.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            for feature_name in emb_config.feature_names:
                keys.append(feature_name)

                values = <a id="change">features[feature_name]</a>.values()
                offsets = <a id="change">features[feature_name]</a>.offsets()
                weights = features[feature_name].weights_or_none()
                pooled_embeddings.append(
                    emb_module(</code></pre><h3>After Change</h3><pre><code class='java'>
    ) -&gt; KeyedTensor:
        pooled_embeddings: List[Tensor] = []
        length_per_key: List[int] = []
        feature_dict<a id="change"> = </a><a id="change">features.to_dict()</a>
        for emb_config, emb_module in zip(
            self._embedding_bag_configs, self.embedding_bags
        ):
            for feature_name in emb_config.feature_names:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pytorch/torchrec/commit/bb09cecc27d93a503bf3c32c84934bb5f6e0115e#diff-30aabdcc064c9c3eee50a1dfb7ca08d561f2c524858be4eee22357c7e2befe70L165' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11226347</div><div id='project'> Project Name: pytorch/torchrec</div><div id='commit'> Commit Name: bb09cecc27d93a503bf3c32c84934bb5f6e0115e</div><div id='time'> Time: 2022-02-14</div><div id='author'> Author: xingl@fb.com</div><div id='file'> File Name: torchrec/quant/embedding_modules.py</div><div id='m_class'> M Class Name: EmbeddingBagCollection</div><div id='n_method'> N Class Name: EmbeddingBagCollection</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: EmbeddingBagCollectionInterface</div><div id='n_parent_class'> N Parent Class: EmbeddingBagCollectionInterface</div><div id='m_file'> M File Name: torchrec/quant/embedding_modules.py</div><div id='n_file'> N File Name: torchrec/quant/embedding_modules.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 176</div><div id='n_start'> N Start Line: 186</div><div id='n_end'> N End Line: 193</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            for feature_name in emb_config.feature_names:
                keys.append(feature_name)

                values = <a id="change">features[feature_name]</a>.values()
                offsets = <a id="change">features[feature_name]</a>.offsets()
                weights = features[feature_name].weights_or_none()
                pooled_embeddings.append(
                    emb_module(</code></pre><h3>After Change</h3><pre><code class='java'>
    ) -&gt; KeyedTensor:
        pooled_embeddings: List[Tensor] = []
        length_per_key: List[int] = []
        feature_dict<a id="change"> = </a><a id="change">features.to_dict()</a>
        for emb_config, emb_module in zip(
            self._embedding_bag_configs, self.embedding_bags
        ):
            for feature_name in emb_config.feature_names:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/facebookresearch/torchrec/commit/bb09cecc27d93a503bf3c32c84934bb5f6e0115e#diff-30aabdcc064c9c3eee50a1dfb7ca08d561f2c524858be4eee22357c7e2befe70L161' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11226344</div><div id='project'> Project Name: facebookresearch/torchrec</div><div id='commit'> Commit Name: bb09cecc27d93a503bf3c32c84934bb5f6e0115e</div><div id='time'> Time: 2022-02-14</div><div id='author'> Author: xingl@fb.com</div><div id='file'> File Name: torchrec/quant/embedding_modules.py</div><div id='m_class'> M Class Name: EmbeddingBagCollection</div><div id='n_method'> N Class Name: EmbeddingBagCollection</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: EmbeddingBagCollectionInterface</div><div id='n_parent_class'> N Parent Class: EmbeddingBagCollectionInterface</div><div id='m_file'> M File Name: torchrec/quant/embedding_modules.py</div><div id='n_file'> N File Name: torchrec/quant/embedding_modules.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 176</div><div id='n_start'> N Start Line: 186</div><div id='n_end'> N End Line: 193</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.token_config = TokenConfig.from_file(token_config_file)
        kwargs["bos_token"] = self.token_config.bos_token
        kwargs["eos_token"] = self.token_config.eos_token
        <a id="change">kwargs["unk_token"]</a> = self.token_config.unk_token
        kwargs["sep_token"] = self.token_config.sep_token
        kwargs["pad_token"] = self.token_config.pad_token
        kwargs["cls_token"] = self.token_config.cls_token
        <a id="change">kwargs["mask_token"]</a> = self.token_config.mask_token

        super().__init__(*args, tokenizer_file=tokenizer_file, **kwargs)
</code></pre><h3>After Change</h3><pre><code class='java'>
        

        token_config = TokenConfig.from_file(token_config_file)
        token_config_dict<a id="change"> = </a><a id="change">token_config.to_dict()</a>

        super().__init__(*args, tokenizer_file=tokenizer_file, **token_config_dict, **kwargs)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/archai/commit/073c6a933f57f89573ecd70485fa989fef183a50#diff-2cce8504b413f7bde50776095f4de67073a4f21114945cd145d5a3c5251ee9f7L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11226351</div><div id='project'> Project Name: microsoft/archai</div><div id='commit'> Commit Name: 073c6a933f57f89573ecd70485fa989fef183a50</div><div id='time'> Time: 2022-12-16</div><div id='author'> Author: gth.rosa@uol.com.br</div><div id='file'> File Name: archai/nlp/datasets/hf_datasets/tokenizer_utils/pre_trained_tokenizer.py</div><div id='m_class'> M Class Name: ArchaiPreTrainedTokenizerFast</div><div id='n_method'> N Class Name: ArchaiPreTrainedTokenizerFast</div><div id='m_method'> M Method Name: __init__(1)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: PreTrainedTokenizerFast</div><div id='n_parent_class'> N Parent Class: PreTrainedTokenizerFast</div><div id='m_file'> M File Name: archai/nlp/datasets/hf_datasets/tokenizer_utils/pre_trained_tokenizer.py</div><div id='n_file'> N File Name: archai/nlp/datasets/hf_datasets/tokenizer_utils/pre_trained_tokenizer.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 28</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        lines = self.aggregate_metrics_file.read_text().splitlines()[1:]
        result: List[Tuple[str, float]] = []
        for line in lines:
            <a id="change">split</a> = line.split(sep=",")
            result.append((<a id="change">split[0]</a>, float(<a id="change">split[1]</a>)))
        return result
</code></pre><h3>After Change</h3><pre><code class='java'>
            return dict()
        df = pd.read_csv(self.aggregate_metrics_file)
        pivot = df.pivot(index=COL_GPU, columns=COL_METRIC, values=COL_VALUE)
        result<a id="change"> = </a>{index: <a id="change">series.to_dict()</a> for index, series in pivot.iterrows()}
        return result
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/innereye-deeplearning/commit/7def8a1076a983417d9cbf6ab2a589a2427776cf#diff-0c7ece750c275f20b4e5c8fff828811a3b3ea16c61cbf409add02960f6870deeL207' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11226350</div><div id='project'> Project Name: microsoft/innereye-deeplearning</div><div id='commit'> Commit Name: 7def8a1076a983417d9cbf6ab2a589a2427776cf</div><div id='time'> Time: 2021-02-18</div><div id='author'> Author: antonsc@microsoft.com</div><div id='file'> File Name: InnerEye/Common/resource_monitor.py</div><div id='m_class'> M Class Name: ResourceMonitor</div><div id='n_method'> N Class Name: ResourceMonitor</div><div id='m_method'> M Method Name: read_aggregate_metrics(1)</div><div id='n_method'> N Method Name: read_aggregate_metrics(1)</div><div id='m_parent_class'> M Parent Class: Process</div><div id='n_parent_class'> N Parent Class: Process</div><div id='m_file'> M File Name: InnerEye/Common/resource_monitor.py</div><div id='n_file'> N File Name: InnerEye/Common/resource_monitor.py</div><div id='m_start'> M Start Line: 213</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 230</div><div id='n_end'> N End Line: 233</div><BR>