<html><h3>Pattern ID :15851
</h3><img src='53613779.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            img /= 255.0
            img -= np.array([0.485, 0.456, 0.406]).reshape(3, 1, 1)
            img /= np.array([0.229, 0.224, 0.225]).reshape(3, 1, 1)
        <a id="change">return </a>img<a id="change">, np.zeros((1, 5))</a>


class MosaicTransform:
    def __init__(self, degrees=10.0, translate=0.1, mosaic_scale=(0.5, 1.5), mixup_scale=(0.5, 1.5),</code></pre><h3>After Change</h3><pre><code class='java'>
        labels = targets[:, 4].copy()

        boxes = xyxy2cxcywh(boxes)
        labels = <a id="change">np.expand_dims(</a>labels, 1<a id="change">)</a>
        targets_t<a id="change"> = </a>np.hstack((labels, boxes))
        padded_labels = np.zeros((self.max_labels, 5))
        padded_labels[range(len(targets_t))[:self.max_labels]] = targets_t[:self.max_labels]
        <a id="change">return </a>img, padded_labels


class MosaicTransform:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/iywie/pl_yolo/commit/e9ae43597f7f54ee3c00a38e634801550aa0f8ba#diff-b936973991345425252e8d0262626a3ce64ab7692fff5155e7ce45a11d52a68bL82' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53613779</div><div id='project'> Project Name: iywie/pl_yolo</div><div id='commit'> Commit Name: e9ae43597f7f54ee3c00a38e634801550aa0f8ba</div><div id='time'> Time: 2022-02-20</div><div id='author'> Author: zhouyw96@outlook.com</div><div id='file'> File Name: data/data_augments.py</div><div id='m_class'> M Class Name: ValTransform</div><div id='n_method'> N Class Name: ValTransform</div><div id='m_method'> M Method Name: __call__(4)</div><div id='n_method'> N Method Name: __call__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data/data_augments.py</div><div id='n_file'> N File Name: data/data_augments.py</div><div id='m_start'> M Start Line: 82</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 96</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            indx = t &gt;= t_s
            k_t[indx] += deltas[s]
            m_t[indx] += gammas[s]
    <a id="change">return </a>k_t * t + m_t


def make_future_dataframe(history_dates, periods, freq=&quotD&quot, include_history=True):</code></pre><h3>After Change</h3><pre><code class='java'>
    past_changepoint = np.expand_dims(t, 1) &gt;= np.expand_dims(changepoints_t, 0)
    segment_id = np.sum(past_changepoint, axis=1) - 1

    k_t<a id="change"> = </a>np.ones((len(t), 1)) * <a id="change">np.expand_dims(</a>k, 0<a id="change">)</a>
    m_t = np.ones((len(t)<a id="change">, 1</a>)) * np.expand_dims(m, 0)
    k_t = np.squeeze(k_t[np.arange(len(t)), segment_id])
    m_t = np.squeeze(m_t[np.arange(len(t)), segment_id])

    trend = k_t * t + m_t
    <a id="change">return </a>trend


def piecewise_linear_prophet(t, k, m, deltas=None, changepoints_t=None):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/8dcdd6a5e564ef4412c327d2550025a5647b63a6#diff-db4a8b618706896edff44e14aab2b54e151fb6c58d2c3664bf6a9f10b814c9d8L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53613782</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 8dcdd6a5e564ef4412c327d2550025a5647b63a6</div><div id='time'> Time: 2020-05-22</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: code/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: piecewise_linear(4)</div><div id='n_method'> N Method Name: piecewise_linear(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: code/utils.py</div><div id='n_file'> N File Name: code/utils.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        box[:, 3] -= box[:, 1]
        return box

    ret = coco_mask.iou(to_xywh(box_a), to_xywh(box_b), np.zeros((len(box_b)<a id="change"></a>,), dtype=np.bool))  &#47&#47 type: ignore
    &#47&#47 can accelerate even more, if using float32
    <a id="change">return </a>ret.astype("float32")


@dataclass</code></pre><h3>After Change</h3><pre><code class='java'>
    intersect = intersection(boxes1, boxes2)
    area1 = area(boxes1)
    area2 = area(boxes2)
    union<a id="change"> = </a>np.expand_dims(area1, axis=1) + <a id="change">np.expand_dims(
        </a>area2<a id="change">, axis=0)</a> - intersect

    <a id="change">return </a>intersect / union


def iou(boxes1: npt.NDArray[float32], boxes2: npt.NDArray[float32]) -&gt; npt.NDArray[float32]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepdoctection/deepdoctection/commit/39d5a9efc3b8ede6bcfc63bab84e757b6f394ce1#diff-b5d811fed20bb3e88e42c53e36824e9d69e618684cea9910d28b4434bc299a05L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53613781</div><div id='project'> Project Name: deepdoctection/deepdoctection</div><div id='commit'> Commit Name: 39d5a9efc3b8ede6bcfc63bab84e757b6f394ce1</div><div id='time'> Time: 2022-05-30</div><div id='author'> Author: jm@drjanismeyer.de</div><div id='file'> File Name: deepdoctection/datapoint/box.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: np_iou(2)</div><div id='n_method'> N Method Name: np_iou(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepdoctection/datapoint/box.py</div><div id='n_file'> N File Name: deepdoctection/datapoint/box.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 112</div><div id='n_end'> N End Line: 118</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        masks = [
            np.array(Image.fromarray(m).resize((width, height), Image.NEAREST)) for m in masks
        ]
        <a id="change">return </a>frames<a id="change">, masks</a>


class RandomCrop(object):
    def __init__(self, parameters):</code></pre><h3>After Change</h3><pre><code class='java'>
        frames = [
            np.array(Image.fromarray(f).resize((width, height), Image.BILINEAR)) for f in frames
        ]
        depths<a id="change"> = </a>[
            <a id="change">np.expand_dims(</a>np.array(
                Image.fromarray(d.squeeze()).resize((width, height), Image.BILINEAR))<a id="change">,
                           axis=2)</a> for d in depths
        ]
        masks = [
            np.array(Image.fromarray(m).resize((width, height), Image.NEAREST)) for m in masks
        ]
        <a id="change">return </a>frames, depths, masks


class RandomCrop(object):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hzxie/rmnet/commit/f2f1bb1173f92817fb43222e870a07e61add9c76#diff-3efe411aae83ca6f8fbe39cad323bd91176b302fc6f4c2f234b04d812442b4bbL135' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53613786</div><div id='project'> Project Name: hzxie/rmnet</div><div id='commit'> Commit Name: f2f1bb1173f92817fb43222e870a07e61add9c76</div><div id='time'> Time: 2020-05-08</div><div id='author'> Author: root@haozhexie.com</div><div id='file'> File Name: utils/data_transforms.py</div><div id='m_class'> M Class Name: Resize</div><div id='n_method'> N Class Name: Resize</div><div id='m_method'> M Method Name: __call__(4)</div><div id='n_method'> N Method Name: __call__(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: utils/data_transforms.py</div><div id='n_file'> N File Name: utils/data_transforms.py</div><div id='m_start'> M Start Line: 148</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 131</div><div id='n_end'> N End Line: 155</div><BR>