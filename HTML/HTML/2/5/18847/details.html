<html><h3>Pattern ID :18847
</h3><img src='61118324.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    w = (leading + norm_w.max(-1))[np.newaxis]

    modalities = np.split(signal, signal.shape[-1], -1)
    colormaps = <a id="change">[plt.cm.get_cmap(name)(np.linspace(0, 1., int(256 / len(modalities)))) for name in CMAPS][
                :len(modalities)]</a>
    colors = np.concatenate(colormaps, 0)
    mycolormap = mcolors.LinearSegmentedColormap.from_list(&quotmycolormap&quot, colors)

    ax.imshow(w,</code></pre><h3>After Change</h3><pre><code class='java'>
              interpolation=&quotbilinear&quot)

    &#47&#47 impose modalities on the background in corresponding colormaps
    <a id="change">for </a>i in range(n_mod)<a id="change">:
        </a>y<a id="change"> = </a>modalities[i]  &#47&#47 modality signals
        c = colormaps[i].mean(0)  &#47&#47 mean color for the corresponding colormap
        ax.plot(t, y.squeeze(-1), linewidth=1.5, c=c)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kolaszko/haptic_transformer/commit/b78cf689b18ea6854d17e5ed972b867313e8c086#diff-15bb97bc6ad29ac4b074bd849c915f9abdabee19ea470f25e7f650f7379943f6L18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61118324</div><div id='project'> Project Name: kolaszko/haptic_transformer</div><div id='commit'> Commit Name: b78cf689b18ea6854d17e5ed972b867313e8c086</div><div id='time'> Time: 2021-12-02</div><div id='author'> Author: michalbednarek.e@gmail.com</div><div id='file'> File Name: utils/analysis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: impose(3)</div><div id='n_method'> N Method Name: impose(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/analysis.py</div><div id='n_file'> N File Name: utils/analysis.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    w = (leading + norm_w.max(-1))[np.newaxis]

    modalities = np.split(signal, signal.shape[-1], -1)
    colormaps = <a id="change">[plt.cm.get_cmap(name)(np.linspace(0, 1., int(256 / len(modalities)))) for name in CMAPS][
                :len(modalities)]</a>
    colors = np.concatenate(colormaps, 0)
    mycolormap = mcolors.LinearSegmentedColormap.from_list(&quotmycolormap&quot, colors)

    ax.imshow(w,</code></pre><h3>After Change</h3><pre><code class='java'>
              interpolation=&quotbilinear&quot)

    &#47&#47 impose modalities on the background in corresponding colormaps
    <a id="change">for i</a> in range(n_mod)<a id="change">:
        </a>y = modalities[i]  &#47&#47 modality signals
        c<a id="change"> = </a>colormaps[i].mean(0)  &#47&#47 mean color for the corresponding colormap
        ax.plot(t, y.squeeze(-1), linewidth=1.5, c=c)

    &#47&#47 save a figure to the numpy array</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kolaszko/haptic_transformer/commit/b78cf689b18ea6854d17e5ed972b867313e8c086#diff-15bb97bc6ad29ac4b074bd849c915f9abdabee19ea470f25e7f650f7379943f6L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61118325</div><div id='project'> Project Name: kolaszko/haptic_transformer</div><div id='commit'> Commit Name: b78cf689b18ea6854d17e5ed972b867313e8c086</div><div id='time'> Time: 2021-12-02</div><div id='author'> Author: michalbednarek.e@gmail.com</div><div id='file'> File Name: utils/analysis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: impose(3)</div><div id='n_method'> N Method Name: impose(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/analysis.py</div><div id='n_file'> N File Name: utils/analysis.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        and jdx &lt;= len(tokens)
                    ):
                        current_mention = current_mention.strip()
                        current_mention = <a id="change">current_mention[len(current_token) :]</a>
                        jdx += 1
                        if jdx &lt; len(tokens):
                            current_token = tokens[jdx]
</code></pre><h3>After Change</h3><pre><code class='java'>
    ):
        Validates entities in terms of offset spans
        if annotation:
            <a id="change">for entity</a> in annotation.entities<a id="change">:
                </a>mention = self.text[entity.start : entity.end]
                assert len(mention) &gt; 0, f"Empty offset defined for entity {entity}"

                token_start = self.char_id2token_id(entity.start)
                token_end = self.char_id2token_id(entity.end - 1)

                assert not (
                    token_start is None or token_end is None
                ), f"Provided entity span {self.text[entity.start: entity.end]} is not aligned with provided tokens."
                "Some entity chars could be reference characters out of tokens"

                span_start<a id="change">, _ = </a>self.token_span(token_start)
                _, span_end = self.token_span(token_end)

                assert (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/recognai/rubrix/commit/37207bc5ae3c148369c6d34b297ef92744a7ef14#diff-8f0bc1e93daa5f38723f86cf5fdbff65673ecc702748a112e8a05980b84b905dL127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61118336</div><div id='project'> Project Name: recognai/rubrix</div><div id='commit'> Commit Name: 37207bc5ae3c148369c6d34b297ef92744a7ef14</div><div id='time'> Time: 2022-01-31</div><div id='author'> Author: francisco@recogn.ai</div><div id='file'> File Name: src/rubrix/server/tasks/token_classification/api/model.py</div><div id='m_class'> M Class Name: CreationTokenClassificationRecord</div><div id='n_method'> N Class Name: CreationTokenClassificationRecord</div><div id='m_method'> M Method Name: check_annotation(2)</div><div id='n_method'> N Method Name: check_annotation(3)</div><div id='m_parent_class'> M Parent Class: Subscript</div><div id='n_parent_class'> N Parent Class: Subscript</div><div id='m_file'> M File Name: src/rubrix/server/tasks/token_classification/api/model.py</div><div id='n_file'> N File Name: src/rubrix/server/tasks/token_classification/api/model.py</div><div id='m_start'> M Start Line: 129</div><div id='m_end'> M End Line: 163</div><div id='n_start'> N Start Line: 186</div><div id='n_end'> N End Line: 210</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                if first_stage:
                    first_stage = False
                    self.memory_context.end_batch(b_ix)
        return tuple(<a id="change">x[:len(batch_indices)]</a> for x in args)

    def __next__(self):
        result = self.output_queue.get()</code></pre><h3>After Change</h3><pre><code class='java'>
                }
            }

            <a id="change">for </a>stage_code, <a id="change">define_outputs</a> in code<a id="change">:
                </a>results = stage_code(**args)
                for node_id, result in zip(define_outputs, results):
                    args[f&quotresult_{node_id}&quot]<a id="change"> = </a>result
                pass

            result = tuple(args[f&quotresult_{x}&quot] for x in outputs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/libffcv/ffcv/commit/f8baf227d1243d4207c082d8ea11b89b5a73da32#diff-d1c1d17dd7f942f4223cf450209bcd6a3979e50b67e9c881848b09da0845f7ffL110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61118322</div><div id='project'> Project Name: libffcv/ffcv</div><div id='commit'> Commit Name: f8baf227d1243d4207c082d8ea11b89b5a73da32</div><div id='time'> Time: 2022-02-08</div><div id='author'> Author: leclerc@mit.edu</div><div id='file'> File Name: ffcv/loader/epoch_iterator.py</div><div id='m_class'> M Class Name: EpochIterator</div><div id='n_method'> N Class Name: EpochIterator</div><div id='m_method'> M Method Name: run_pipeline(5)</div><div id='n_method'> N Method Name: run_pipeline(5)</div><div id='m_parent_class'> M Parent Class: Thread</div><div id='n_parent_class'> N Parent Class: Thread</div><div id='m_file'> M File Name: ffcv/loader/epoch_iterator.py</div><div id='n_file'> N File Name: ffcv/loader/epoch_iterator.py</div><div id='m_start'> M Start Line: 113</div><div id='m_end'> M End Line: 142</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 140</div><BR>