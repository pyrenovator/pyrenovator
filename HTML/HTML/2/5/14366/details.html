<html><h3>Pattern ID :14366
</h3><img src='47437827.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                continue
            for gpu in cuda.gpus:
                cpu_only = False
                <a id="change">if </a>gpu.id in measurement.gpus_used(
                ) and <a id="change">gpu.id not in seen_gpus</a>:
                    seen_gpus.add(gpu.id)
                    gpu_names.append((gpu.name).decode(&quotascii&quot))
                    with gpu:
                        mems = cuda.current_context().get_memory_info()
                        &#47&#47 convert bytes to GB
                        <a id="change">max_memories.append(</a>round(mems.total / (2**30), 1)<a id="change">)</a>

        return cpu_only, &quot,&quot.join(gpu_names), &quot,&quot.join(
            [str(x) + &quot GB&quot for x in max_memories])
</code></pre><h3>After Change</h3><pre><code class='java'>
        for measurement in measurements:
            for gpu_uuid, gpu_info in self._gpu_info.items():
                if gpu_uuid in measurement.gpus_used():
                    gpu_name<a id="change"> = </a><a id="change">(gpu_info[&quotname&quot]).decode(</a>&quotascii&quot<a id="change">)</a>
                    max_memory = round(gpu_info[&quottotal_memory&quot] / (2**30), 1)
                    if gpu_name not in gpu_dict:
                        gpu_dict[gpu_name] = max_memory
        return gpu_dict</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/50f878682c545b5bbb3cb1abceda327d9872d800#diff-e1e671f5efb3fce4c537ae741fff3a1b5ae9cbc21ac5a6be4ed5a705742a97cbL506' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47437827</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: 50f878682c545b5bbb3cb1abceda327d9872d800</div><div id='time'> Time: 2021-06-10</div><div id='author'> Author: asramesh@nvidia.com</div><div id='file'> File Name: model_analyzer/reports/report_manager.py</div><div id='m_class'> M Class Name: ReportManager</div><div id='n_method'> N Class Name: ReportManager</div><div id='m_method'> M Method Name: _get_gpu_stats(2)</div><div id='n_method'> N Method Name: _get_gpu_stats(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model_analyzer/reports/report_manager.py</div><div id='n_file'> N File Name: model_analyzer/reports/report_manager.py</div><div id='m_start'> M Start Line: 506</div><div id='m_end'> M End Line: 526</div><div id='n_start'> N Start Line: 588</div><div id='n_end'> N End Line: 596</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        encodings = []
        for encoding_idx, encoder_layer in enumerate(self.encoder):
            <a id="change">if len(encodings) == 0</a>:
                encodings.append(encoder_layer(input))
            else:
                <a id="change">encodings.append(</a>encoder_layer(encodings[-1])<a id="change">)</a>

        encodings.reverse()

        x = encodings[0]</code></pre><h3>After Change</h3><pre><code class='java'>
        x = self.fc_decoder_input(z)
        x = x.view(encodings[-1].size(0), encodings[-1].size(1), encodings[-1].size(2), encodings[-1].size(3))

        x<a id="change"> = </a><a id="change">self.decode(</a>x, encodings<a id="change">)</a>

        output = {ChannelEnum.RECONSTRUCTED_ELEVATION_MAP: x.squeeze(),
                  "mu": mu,
                  "log_var": log_var}</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mstoelzle/solving-occlusion/commit/50a17123640029da44d7dc18e2a70ff81e559020#diff-92f1053492ca4105a02f5f1e98c77dc2fa34c8fe635471c556f24e089f7da87fL52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47437825</div><div id='project'> Project Name: mstoelzle/solving-occlusion</div><div id='commit'> Commit Name: 50a17123640029da44d7dc18e2a70ff81e559020</div><div id='time'> Time: 2020-11-05</div><div id='author'> Author: maximilian@stoelzle.ch</div><div id='file'> File Name: src/learning/models/vae/unet_vae.py</div><div id='m_class'> M Class Name: UNetVAE</div><div id='n_method'> N Class Name: UNetVAE</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: BaseVAE</div><div id='n_parent_class'> N Parent Class: BaseVAE</div><div id='m_file'> M File Name: src/learning/models/vae/unet_vae.py</div><div id='n_file'> N File Name: src/learning/models/vae/unet_vae.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 90</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    )
                word_id_index_start = i
                offset_start, offset_end = frame_offsets[i]
            <a id="change">if i == len(frame_word_ids) - 1</a> and word_id is not None:
                &#47&#47 if checking the last word in a frame, if word_id is not None, add it
                <a id="change">all_words.append(
                    </a>TokenizedWord(
                        token_offsets=frame_offsets[word_id_index_start : i + 1],
                        token_confidences=predictions[word_id_index_start : i + 1],
                        token_ids=frame_token_ids[word_id_index_start : i + 1],
                        tokens=frame_tokens[word_id_index_start : i + 1],
                        word_char_start=offset_start,
                        word_char_end=offset_end,
                        word_id=word_id,
                    )<a id="change">
                )</a>

            _, offset_end = frame_offsets[i]
            prev_word_id = word_id
</code></pre><h3>After Change</h3><pre><code class='java'>
        for i, word_id in enumerate(frame_word_ids):
            if word_id is not None:
                if word_id != prev_word_id:
                    word.decoded<a id="change"> = </a><a id="change">self.tokeniser.decode(</a>word.token_ids<a id="change">)</a>
                    &#47&#47 new word
                    all_words.append(word)
                    word = TokenizedWord()
                    word.id2label = self.config.id2label</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/bda13d8abaf79e4eddc793a9d3b4df897aea2853#diff-4f70f364a824447b60bf464f7b67ae2d963527c6e03e36a792bdf2ad67949174L98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47437829</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: bda13d8abaf79e4eddc793a9d3b4df897aea2853</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/steps/ner/hf_token_classification.py</div><div id='m_class'> M Class Name: TransformersModelForTokenClassificationNerStep</div><div id='n_method'> N Class Name: TransformersModelForTokenClassificationNerStep</div><div id='m_method'> M Method Name: frame_to_tok_word(6)</div><div id='n_method'> N Method Name: frame_to_tok_word(6)</div><div id='m_parent_class'> M Parent Class: BaseStep</div><div id='n_parent_class'> N Parent Class: BaseStep</div><div id='m_file'> M File Name: kazu/steps/ner/hf_token_classification.py</div><div id='n_file'> N File Name: kazu/steps/ner/hf_token_classification.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 178</div><div id='n_start'> N Start Line: 127</div><div id='n_end'> N End Line: 154</div><BR>