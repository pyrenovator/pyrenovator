<html><h3>Pattern ID :41688
</h3><img src='116968025.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    searchspace = NDSSearchSpace(
        "/Users/jackturner/work/nds/data/ResNet.json", searchspace="ResNet"
    )
    data = torch.rand((<a id="change">1</a><a id="change">, 3, 32, 32</a>))
    for _ in range(10):
        model = searchspace.sample_random_architecture()
        y, _ = model(data)</code></pre><h3>After Change</h3><pre><code class='java'>


def test_proxy_naswot():
    device = torch.device("cuda:0"<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>"cpu")
    
    searchspace = NDSSearchSpace(
        search_space_loc, searchspace="ResNet"</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jack-willturner/gymnastics/commit/4fc66122fd76c42dbed118821adf774e57ce55c6#diff-2e0e326d8664727970a3d25f946f7a8d7765050f09f575df7b3895e7af6d4c03L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116968025</div><div id='project'> Project Name: jack-willturner/gymnastics</div><div id='commit'> Commit Name: 4fc66122fd76c42dbed118821adf774e57ce55c6</div><div id='time'> Time: 2021-08-07</div><div id='author'> Author: jackwilliamturner@icloud.com</div><div id='file'> File Name: test/test_proxy_naswot.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_proxy_naswot(0)</div><div id='n_method'> N Method Name: test_proxy_naswot(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_proxy_naswot.py</div><div id='n_file'> N File Name: test/test_proxy_naswot.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 32</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if torch.is_tensor(class_1):
                return torch.cat((class_1, class_2), dim=1)
            else:
                return np.array(list(zip(class_1, class_2))).reshape((<a id="change">-1</a><a id="change">, 2</a>))

        elif self._backend == "tensorflow":
            return self._model.predict(input)</code></pre><h3>After Change</h3><pre><code class='java'>

        if self._backend == "pytorch":
            &#47&#47 Keep model and input on the same device
            device = "cuda"<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>"cpu"
            self._model = self._model.to(device)

            if isinstance(input, pd.DataFrame):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/9b4d02120789794e885d4e47da522e1a1c17ed99#diff-2d9dd771c79c24fa5f5bc54bc3c0ce601efbc22310f84f594d35c8605a5640b3L233' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116968040</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 9b4d02120789794e885d4e47da522e1a1c17ed99</div><div id='time'> Time: 2021-05-27</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/models/catalog/catalog.py</div><div id='m_class'> M Class Name: MLModelCatalog</div><div id='n_method'> N Class Name: MLModelCatalog</div><div id='m_method'> M Method Name: predict_proba(2)</div><div id='n_method'> N Method Name: predict_proba(2)</div><div id='m_parent_class'> M Parent Class: MLModel</div><div id='n_parent_class'> N Parent Class: MLModel</div><div id='m_file'> M File Name: carla/models/catalog/catalog.py</div><div id='n_file'> N File Name: carla/models/catalog/catalog.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 266</div><div id='n_start'> N Start Line: 235</div><div id='n_end'> N End Line: 258</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        eval_fn_ret             = lambda x : None
        &#47&#47 These must have the right dimensions for computations to be 
        &#47&#47 done even if there are no such constraints
        c                   = np.zeros((<a id="change">0</a><a id="change">,1</a>))
        c_grad              = np.zeros((len(x0),0))
        c_grad_norms        = 0
        tv                  = 0</code></pre><h3>After Change</h3><pre><code class='java'>

def setupConstraint( x0, c_fn, eval_fn, inequality_constraint, prescaling_threshold):

    device = torch.device(&quotcuda&quot<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>&quotcpu&quot)

    n = len(x0)
                            </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sun-umn/pygranso/commit/24295bb6c5576938b870e69d8e83a6077cbeb199#diff-a09be081461e988c9f1ae817bb3ed48cc5b60bae638d70f81ae880b4bc7224c4L128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116968041</div><div id='project'> Project Name: sun-umn/pygranso</div><div id='commit'> Commit Name: 24295bb6c5576938b870e69d8e83a6077cbeb199</div><div id='time'> Time: 2021-09-08</div><div id='author'> Author: 52502144+Buyun-Liang@users.noreply.github.com</div><div id='file'> File Name: private/makePenaltyFunction.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: setupConstraint(5)</div><div id='n_method'> N Method Name: setupConstraint(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private/makePenaltyFunction.py</div><div id='n_file'> N File Name: private/makePenaltyFunction.py</div><div id='m_start'> M Start Line: 147</div><div id='m_end'> M End Line: 168</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 174</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    (64, 128, 128), (192, 128, 128), (0, 64, 0), (128, 64, 0), (0, 192, 0), (128, 192, 0), (0, 64, 128), (128, 64, 12)]
        else:
            &#47&#47 画框设置不同的颜色
            hsv_tuples = [(x / self.num_classes<a id="change">, 1., 1.</a>)
                        for x in range(self.num_classes)]
            self.colors = list(map(lambda x: colorsys.hsv_to_rgb(*x), hsv_tuples))
            self.colors = list(</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47-------------------------------&#47&#47
        self.net    = pspnet(num_classes=self.num_classes, downsample_factor=self.downsample_factor, pretrained=False, backbone=self.backbone, aux_branch=False)
        
        device      = torch.device(&quotcuda&quot<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>&quotcpu&quot)
        self.net.load_state_dict(torch.load(self.model_path, map_location=device), strict=False)
        self.net    = self.net.eval()
        print(&quot{} model, and classes loaded.&quot.format(self.model_path))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bubbliiiing/pspnet-pytorch/commit/45cb37376cd329f953cb649830de848c0fb0feaf#diff-38a768d1c578b2d27db7acc9725657cc253c28ac0a10247f4d5e51be1b897004L66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116968031</div><div id='project'> Project Name: bubbliiiing/pspnet-pytorch</div><div id='commit'> Commit Name: 45cb37376cd329f953cb649830de848c0fb0feaf</div><div id='time'> Time: 2021-11-09</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: pspnet.py</div><div id='m_class'> M Class Name: PSPNet</div><div id='n_method'> N Class Name: PSPNet</div><div id='m_method'> M Method Name: generate(1)</div><div id='n_method'> N Method Name: generate(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: pspnet.py</div><div id='n_file'> N File Name: pspnet.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 94</div><BR>