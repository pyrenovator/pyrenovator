<html><h3>Pattern ID :1965
</h3><img src='8757588.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if not bidirectional:
            raise NotImplementedError()

        idx_i<a id="change">, idx_j, S = </a>primitive_neighbor_list(
            "ijS",
            pbc.detach().cpu().numpy(),
            <a id="change">cell.detach().cpu().numpy()</a>,
            pos.detach().cpu().numpy(),
            cutoff,
        )</code></pre><h3>After Change</h3><pre><code class='java'>
        if not bidirectional:
            raise NotImplementedError()

        <a id="change">try:
            </a>edge_index, S = calc_neighbor_by_pymatgen(pos, cell, pbc, cutoff)
        except Exception:
            &#47&#47 This is slower.
            edge_index, S = calc_neighbor_by_ase(pos, cell, pbc, cutoff)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pfnet-research/torch-dftd/commit/010c36b6d4aaceb3d614318121e910b9134663a4#diff-b7d2f2dd76c964ee21cc70cf4731c7a3ebb19e63b5388a67cb018d9e66e507f4L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8757588</div><div id='project'> Project Name: pfnet-research/torch-dftd</div><div id='commit'> Commit Name: 010c36b6d4aaceb3d614318121e910b9134663a4</div><div id='time'> Time: 2021-07-04</div><div id='author'> Author: acc1ssnn9terias@gmail.com</div><div id='file'> File Name: torch_dftd/functions/edge_extraction.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calc_edge_index(5)</div><div id='n_method'> N Method Name: calc_edge_index(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_dftd/functions/edge_extraction.py</div><div id='n_file'> N File Name: torch_dftd/functions/edge_extraction.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 113</div><div id='n_end'> N End Line: 119</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                allparams = []
                for R in reps:
                    assert not R is None
                    allparams<a id="change"> += </a>list(<a id="change">R.detach().cpu().numpy()</a>.flatten())
            except AssertionError:
                self.model.initialize()
                keys, reps = self.model.get_parameters_representation()</code></pre><h3>After Change</h3><pre><code class='java'>
        self.verbose = kwargs.get("verbose", 0)
        
        if initial_state is None: 
            <a id="change">try:
                </a>initial_state = self.model.get_parameter_vector(as_representation = True)
            except AssertionError:
                self.model.initialize()
                initial_state = self.model.get_parameter_vector(as_representation = True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/57d8bbdc0ace0549981a2a01aadc0d4b41f95187#diff-b41611a4953e0811fd3895610e7ccaa41bccc7930d49de83866c4cfa73de0304L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8757591</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: 57d8bbdc0ace0549981a2a01aadc0d4b41f95187</div><div id='time'> Time: 2022-12-19</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/fit/base.py</div><div id='m_class'> M Class Name: BaseOptimizer</div><div id='n_method'> N Class Name: BaseOptimizer</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: autoprof/fit/base.py</div><div id='n_file'> N File Name: autoprof/fit/base.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                keys, reps = self.model.get_parameters_representation()
                allparams = []
                for R in reps:
                    allparams<a id="change"> += </a>list(<a id="change">R.detach().cpu().numpy()</a>.flatten())
            initial_state = torch.tensor(allparams, dtype = self.model.dtype, device = self.model.device)
        else:
            initial_state = torch.as_tensor(initial_state, dtype = self.model.dtype, device = self.model.device)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.verbose = kwargs.get("verbose", 0)
        
        if initial_state is None: 
            <a id="change">try:
                </a>initial_state = self.model.get_parameter_vector(as_representation = True)
            except AssertionError:
                self.model.initialize()
                initial_state = self.model.get_parameter_vector(as_representation = True)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/b0ebffcdadfa09287cf1150f37cf9aaf98413298#diff-5590ad6405925f6d2d4577ae97088ad959a90b04f6e12c93b2424a3c7c48c149L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8757581</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: b0ebffcdadfa09287cf1150f37cf9aaf98413298</div><div id='time'> Time: 2022-12-19</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: build/lib/autoprof/fit/base.py</div><div id='m_class'> M Class Name: BaseOptimizer</div><div id='n_method'> N Class Name: BaseOptimizer</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: build/lib/autoprof/fit/base.py</div><div id='n_file'> N File Name: build/lib/autoprof/fit/base.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 30</div><BR>