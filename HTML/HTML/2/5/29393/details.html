<html><h3>Pattern ID :29393
</h3><img src='87032784.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            pbar = tqdm.tqdm(unit=&quotimgs&quot, total=len(sample_ids))

        &#47&#47 download images
        <a id="change">for </a>sample_id, <a id="change">filename</a> in zip(sample_ids, filenames)<a id="change">:
            </a>read_url<a id="change"> = </a>self._samples_api.get_sample_image_read_url_by_id(
                self.dataset_id, 
                sample_id,
                type="full",</code></pre><h3>After Change</h3><pre><code class='java'>
        downloadables = zip(sample_ids, filenames)

        &#47&#47 handle the case where len(sample_ids) &lt; max_workers
        max_workers = <a id="change">min(</a>len(sample_ids), max_workers<a id="change">)</a>
        max_workers<a id="change"> = </a>max(max_workers, 1)

        if verbose:
            print(f&quotDownloading {bcolors.OKGREEN}{len(sample_ids)}{bcolors.ENDC} images (with {bcolors.OKGREEN}{max_workers}{bcolors.ENDC} workers):&quot, flush=True)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lightly-ai/lightly/commit/42a1a66d19d6f9962210e779d4114edef01d1767#diff-20cb7e92edbcbc524792c473cf5953f053759f900af1e1c1154405d0bde491ceL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87032784</div><div id='project'> Project Name: lightly-ai/lightly</div><div id='commit'> Commit Name: 42a1a66d19d6f9962210e779d4114edef01d1767</div><div id='time'> Time: 2022-07-27</div><div id='author'> Author: jeremy@lightly.ai</div><div id='file'> File Name: lightly/api/api_workflow_download_dataset.py</div><div id='m_class'> M Class Name: _DownloadDatasetMixin</div><div id='n_method'> N Class Name: _DownloadDatasetMixin</div><div id='m_method'> M Method Name: download_dataset(5)</div><div id='n_method'> N Method Name: download_dataset(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lightly/api/api_workflow_download_dataset.py</div><div id='n_file'> N File Name: lightly/api/api_workflow_download_dataset.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 108</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 153</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        input_text_field = input_spec[input_token_field].parent  &#47&#47 pytype: disable=attribute-error
        counterfactual = copy.deepcopy(example)
        modified_tokens = copy.copy(tokens)
        <a id="change">for j</a> in token_idxs<a id="change">:
          </a>modified_tokens[j]<a id="change"> = </a>replacement_tokens[j]
        counterfactual[input_token_field] = modified_tokens
        &#47&#47 TODO(iftenney, bastings): call a model-provided detokenizer here?
        &#47&#47 Though in general tokenization isn&quott invertible and it&quots possible for</code></pre><h3>After Change</h3><pre><code class='java'>
      if drop_tokens:
        &#47&#47 Update max_flips so that it is at most len(tokens) - 1 (we don&quott
        &#47&#47 want to drop all tokens!)
        max_flips<a id="change"> = </a><a id="change">min(</a>len(tokens)-1, max_flips<a id="change">)</a>
      else:
        &#47&#47 Identify replacement tokens.
        &#47&#47 We take a dot product of each input token gradient (grads) with the
        &#47&#47 embedding table (embed) and pick the argmin embedding.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pair-code/lit/commit/27c7f5991315e90e674c71ec2bea7afbe35eb138#diff-41eb7113846ed4c4535652386dad9255695323df8ef1054ac4d7a17fb493d925L100' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87032771</div><div id='project'> Project Name: pair-code/lit</div><div id='commit'> Commit Name: 27c7f5991315e90e674c71ec2bea7afbe35eb138</div><div id='time'> Time: 2021-04-21</div><div id='author'> Author: ataly@google.com</div><div id='file'> File Name: lit_nlp/components/hotflip.py</div><div id='m_class'> M Class Name: HotFlip</div><div id='n_method'> N Class Name: HotFlip</div><div id='m_method'> M Method Name: generate(5)</div><div id='n_method'> N Method Name: generate(5)</div><div id='m_parent_class'> M Parent Class: lit_components.Generator</div><div id='n_parent_class'> N Parent Class: lit_components.Generator</div><div id='m_file'> M File Name: lit_nlp/components/hotflip.py</div><div id='n_file'> N File Name: lit_nlp/components/hotflip.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 225</div><div id='n_start'> N Start Line: 122</div><div id='n_end'> N End Line: 249</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            )

            while response.get("records"):
                <a id="change">for record</a> in response["records"]<a id="change">:
                    </a>yield record
                    yield_fields<a id="change"> += </a>1
                    if limit and limit &lt;= yield_fields:
                        return
</code></pre><h3>After Change</h3><pre><code class='java'>
            request["next_idx"] = id_from

        with api_compatibility(self, min_version="1.2.0"):
            request_limit = <a id="change">min(</a>limit, batch_size<a id="change">)</a>
            response = self.http_client.post(
                url.format(limit=request_limit),
                json=request,
            )

            while response.get("records"):
                yield from response["records"]
                limit<a id="change"> -= </a>request_limit
                if limit &lt;= 0:
                    return
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/recognai/rubrix/commit/f5834a5408051bf1fa60d42aede6b325dc07fdbd#diff-719e1e0841a617c55a90b5c05893d61d23b5727ac2e744cb4468e6044235bb2eL151' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87032759</div><div id='project'> Project Name: recognai/rubrix</div><div id='commit'> Commit Name: f5834a5408051bf1fa60d42aede6b325dc07fdbd</div><div id='time'> Time: 2023-03-01</div><div id='author'> Author: 37621491+tomaarsen@users.noreply.github.com</div><div id='file'> File Name: src/argilla/client/apis/datasets.py</div><div id='m_class'> M Class Name: Datasets</div><div id='n_method'> N Class Name: Datasets</div><div id='m_method'> M Method Name: scan(5)</div><div id='n_method'> N Method Name: scan(5)</div><div id='m_parent_class'> M Parent Class: AbstractApi</div><div id='n_parent_class'> N Parent Class: AbstractApi</div><div id='m_file'> M File Name: src/argilla/client/apis/datasets.py</div><div id='n_file'> N File Name: src/argilla/client/apis/datasets.py</div><div id='m_start'> M Start Line: 178</div><div id='m_end'> M End Line: 206</div><div id='n_start'> N Start Line: 177</div><div id='n_end'> N End Line: 208</div><BR>