<html><h3>Pattern ID :7547
</h3><img src='24908317.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            emb = embedding_dict[embedding_name](X[:, lookup_idx[0]:lookup_idx[1]].long())
            group_embedding_dict[fc.group_name].append(emb)
    if to_list:
        return <a id="change">list(</a>chain.from_iterable(<a id="change">group_embedding_dict.values()</a>)<a id="change">)</a>
    return group_embedding_dict


def varlen_embedding_lookup(X, embedding_dict, feature_index, varlen_sparse_feature_columns):</code></pre><h3>After Change</h3><pre><code class='java'>

    multi = False
    if len(return_feat_list) == 0:
        return_feat_list_flat<a id="change"> = </a><a id="change">[fc.name for fc in sparse_feature_columns]</a>
    elif isinstance(return_feat_list[0], (list, tuple)):
        &#47&#47 嵌套一层
        return_feat_list_flat = [j for i in return_feat_list for j in i]
        multi = True</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tongjilibo/rec4torch/commit/17a7e83039863c750d6142e4a8f40412c5b8ab1a#diff-814aa7f3cca5d8707dd6877dfe5b1b02fb08e903477edd878fd2a52b05a0f9a9L164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24908317</div><div id='project'> Project Name: tongjilibo/rec4torch</div><div id='commit'> Commit Name: 17a7e83039863c750d6142e4a8f40412c5b8ab1a</div><div id='time'> Time: 2022-10-02</div><div id='author'> Author: tongjilibo@163.com</div><div id='file'> File Name: rec4torch/inputs.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: embedding_lookup(5)</div><div id='n_method'> N Method Name: embedding_lookup(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rec4torch/inputs.py</div><div id='n_file'> N File Name: rec4torch/inputs.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 179</div><div id='n_start'> N Start Line: 171</div><div id='n_end'> N End Line: 196</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    :return:
    
    doc_section_to_text_map = documents_to_document_section_text_map(docs)
    batch_encodings = tokenizer(<a id="change">list(</a><a id="change">doc_section_to_text_map.values())</a>)
    return batch_encodings, list(doc_section_to_text_map.keys())

</code></pre><h3>After Change</h3><pre><code class='java'>
    :return:
    
    id_section_map = documents_to_id_section_map(docs)
    strings = <a id="change">[section.text for section in id_section_map.values()]</a>

    batch_encodings<a id="change"> = </a>tokenizer(
        strings,
        stride=stride,
        max_length=max_length,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/6d3b478711b45c3afe0cbf978e7a51942d53e0c2#diff-09e98109421c3cb1e7150e2396b31d07503b6c23682596a5b11807e15893eef3L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24908311</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 6d3b478711b45c3afe0cbf978e7a51942d53e0c2</div><div id='time'> Time: 2021-11-16</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: azner/utils/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: documents_to_document_section_batch_encodings_map(4)</div><div id='n_method'> N Method Name: documents_to_document_section_batch_encodings_map(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: azner/utils/utils.py</div><div id='n_file'> N File Name: azner/utils/utils.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                 img_info[&quotfile_name&quot]) + &quot\n&quot)

        with open(img_txt_path_debug, &quotw&quot) as f:
            for img_info in <a id="change">list(</a><a id="change">coco.imgs.values())</a>[:128]:
                f.write(osp.join(data[&quotpath&quot], &quotimages&quot,
                                 &quot{}&quot.format(split if is_coco else &quot&quot),
                                 img_info[&quotfile_name&quot]) + &quot\n&quot)</code></pre><h3>After Change</h3><pre><code class='java'>

    splits = [osp.splitext(osp.split(data[s])[-1])[0] for s in [&quottrain&quot, &quotval&quot, &quottest&quot] if s in data]
    annotations = [osp.join(data[&quotpath&quot], data[&quot{}_annotations&quot.format(s)]) for s in [&quottrain&quot, &quotval&quot, &quottest&quot] if s in data]
    test_split<a id="change"> = </a><a id="change">[0 if s in [&quottrain&quot, &quotval&quot] else 1 for s in [&quottrain&quot, &quotval&quot, &quottest&quot] if s in data]</a>
    img_txt_dir = osp.join(data[&quotpath&quot], data[&quotlabels&quot], &quotimg_txt&quot)
    os.makedirs(img_txt_dir, exist_ok=True)

    for split, annot, is_test in zip(splits, annotations, test_split):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wmcnally/kapao/commit/885d30c862e338d4f9b261fad6b923981e6abf18#diff-f10cd31724bb5abb110239c2bffda1f03e4f24d96b1b04130be39c9247d83404L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24908327</div><div id='project'> Project Name: wmcnally/kapao</div><div id='commit'> Commit Name: 885d30c862e338d4f9b261fad6b923981e6abf18</div><div id='time'> Time: 2021-10-27</div><div id='author'> Author: wmcnally@uwaterloo.ca</div><div id='file'> File Name: utils/labels.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: write_kp_labels(1)</div><div id='n_method'> N Method Name: write_kp_labels(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/labels.py</div><div id='n_file'> N File Name: utils/labels.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 95</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 86</div><BR>