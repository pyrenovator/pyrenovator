<html><h3>Pattern ID :33047
</h3><img src='95551639.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        labels, outputs = test_step(x)
        metric.update_state(labels, outputs)

    <a id="change">return </a><a id="change">metric.result()</a>


def run(config):
    strategy = get_distribution_strategy(config)</code></pre><h3>After Change</h3><pre><code class='java'>

    logger.info(&quotEvaluating predictions...&quot)
    timer.tic()
    result<a id="change"> = </a><a id="change">metric.result()</a>
    timer.toc(average=False)
    logger.info(&quotTotal time: {:.3f} sec&quot.format(timer.total_time))

    <a id="change">return </a>result


def run(config):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/openvinotoolkit/nncf/commit/3b6847c25ecc2709775ded86736f1730e61ee20e#diff-5ad07626bfe9639510f3540fc86fbf20e65312951c75b6423f03dbe58a9a0ebaL225' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95551639</div><div id='project'> Project Name: openvinotoolkit/nncf</div><div id='commit'> Commit Name: 3b6847c25ecc2709775ded86736f1730e61ee20e</div><div id='time'> Time: 2021-02-04</div><div id='author'> Author: andrey.churkin@intel.com</div><div id='file'> File Name: beta/examples/tensorflow/object_detection/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: evaluate(5)</div><div id='n_method'> N Method Name: evaluate(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: beta/examples/tensorflow/object_detection/main.py</div><div id='n_file'> N File Name: beta/examples/tensorflow/object_detection/main.py</div><div id='m_start'> M Start Line: 225</div><div id='m_end'> M End Line: 229</div><div id='n_start'> N Start Line: 226</div><div id='n_end'> N End Line: 251</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        labels, outputs = test_step(x)
        metric.update_state(labels, outputs)

    <a id="change">return </a><a id="change">metric.result()</a>


def create_test_step_fn(strategy, model, predict_post_process_fn):
    Creates a distributed test step</code></pre><h3>After Change</h3><pre><code class='java'>

    logger.info(&quotEvaluating predictions...&quot)
    timer.tic()
    result<a id="change"> = </a><a id="change">metric.result()</a>
    timer.toc(average=False)
    logger.info(&quotTotal time: {:.3f} sec&quot.format(timer.total_time))

    <a id="change">return </a>result


def create_test_step_fn(strategy, model, predict_post_process_fn):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/nncf/commit/3b6847c25ecc2709775ded86736f1730e61ee20e#diff-e696b3f298992fc4471d1d5349f09160ce9884af11b3888e880206a62eceae10L119' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95551640</div><div id='project'> Project Name: openvinotoolkit/nncf</div><div id='commit'> Commit Name: 3b6847c25ecc2709775ded86736f1730e61ee20e</div><div id='time'> Time: 2021-02-04</div><div id='author'> Author: andrey.churkin@intel.com</div><div id='file'> File Name: beta/examples/tensorflow/segmentation/evaluation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: evaluate(5)</div><div id='n_method'> N Method Name: evaluate(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: beta/examples/tensorflow/segmentation/evaluation.py</div><div id='n_file'> N File Name: beta/examples/tensorflow/segmentation/evaluation.py</div><div id='m_start'> M Start Line: 121</div><div id='m_end'> M End Line: 125</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 144</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for name, param in self.model.named_parameters():
            self.writer.add_histogram(name, param, bins=&quotauto&quot)

        <a id="change">return </a><a id="change">self.valid_metrics.result()</a>

    def _progress(self, batch_idx):
        ratio = &quot[{}/{} ({:.0f}%)]&quot
        return ratio.format(batch_idx, self.len_epoch, 100.0 * batch_idx / self.len_epoch)</code></pre><h3>After Change</h3><pre><code class='java'>
        for name, param in self.model.named_parameters():
            self.writer.add_histogram(name, param, bins=&quotauto&quot)

        valid_log<a id="change"> = </a><a id="change">self.valid_metrics.result()</a>

        <a id="change">return </a>valid_log

    def _progress(self, batch_idx):
        ratio = &quot[{}/{} ({:.0f}%)]&quot</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeperlearner/pytorch-template/commit/662aa3e639fc5ff861fc47d269afc1fcd379973d#diff-0564ece5aadc13d5923043addc422a8058c6d96026493e84652cedc2f1bdca99L95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 95551641</div><div id='project'> Project Name: deeperlearner/pytorch-template</div><div id='commit'> Commit Name: 662aa3e639fc5ff861fc47d269afc1fcd379973d</div><div id='time'> Time: 2021-01-31</div><div id='author'> Author: b04202035@g.ntu.edu.tw</div><div id='file'> File Name: trainer/trainer.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: _valid_epoch(2)</div><div id='n_method'> N Method Name: _valid_epoch(2)</div><div id='m_parent_class'> M Parent Class: BaseTrainer</div><div id='n_parent_class'> N Parent Class: BaseTrainer</div><div id='m_file'> M File Name: trainer/trainer.py</div><div id='n_file'> N File Name: trainer/trainer.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 121</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 134</div><BR>