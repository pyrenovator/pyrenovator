<html><h3>Pattern ID :6995
</h3><img src='23318243.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">pass</a>

    def on_trace_read(self, signal, context):
        if self._framework:
            signal.frameworks.append(self._framework)</code></pre><h3>After Change</h3><pre><code class='java'>
            for device in range(torch.cuda.device_count()):
                if &quotpytorch_mem_stats&quot in context and device in context[&quotpytorch_mem_stats&quot]: 
                    start_mem_stats = context[&quotpytorch_mem_stats&quot][device]
                    stop_mem_stats<a id="change"> = </a>_read_mem_stats(device)

                    mem_diff = _compute_diff(start_mem_stats, stop_mem_stats)
                    mem_alloc = signal.alloc_summary.add()
                    mem_alloc.allocator_type = signals_pb2.MemoryAllocation.AllocatorType.PYTORCH_CUDA_ALLOCATOR
                    mem_alloc.device_idx = device
                    mem_alloc.allocated_size = mem_diff.get(&quotallocated_size&quot, 0)
                    mem_alloc.reserved_size = mem_diff.get(&quotreserved_size&quot, 0)
                    mem_alloc.freed_size = mem_diff.get(&quotfreed_size&quot, 0)
                    mem_alloc.num_allocations = mem_diff.get(&quotnum_allocations&quot, 0)
                    mem_alloc.num_alloc_retries = mem_diff.get(&quotnum_alloc_retries&quot, 0)
                    mem_alloc.num_ooms<a id="change"> = </a><a id="change">mem_diff.get(&quotnum_ooms&quot</a>, 0<a id="change">)</a>

    def on_trace_read(self, signal, context, options):
        if self._framework:
            signal.frameworks.append(self._framework)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/18a83003466c6c3354f87c6a1ba283c01df72ab2#diff-ab9ea5224e48195b9e989ac26125cf52bfea2904ad9958bca54a8ffcb4864bf6L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23318243</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: 18a83003466c6c3354f87c6a1ba283c01df72ab2</div><div id='time'> Time: 2022-12-27</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='m_class'> M Class Name: PyTorchRecorder</div><div id='n_method'> N Class Name: PyTorchRecorder</div><div id='m_method'> M Method Name: on_trace_stop(4)</div><div id='n_method'> N Method Name: on_trace_stop(3)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 63</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    video_f.release(st_video=True)

    <a id="change">pass</a>

  def sampling_yaw_web(self,
                       cfg,
                       outdir,</code></pre><h3>After Change</h3><pre><code class='java'>
      load_G_cfg = list(load_G_cfg.values())[0]
      G = build_model(load_G_cfg.G_cfg).cuda()
      Checkpointer(G).load_state_dict_from_file(network_pkl)
      cfg<a id="change"> = </a>load_G_cfg

    H = W = img_size
    cam_cfg<a id="change"> = </a><a id="change">cfg.get(&quotcam_cfg&quot</a>, {}<a id="change">)</a>
    cam_param = cam_params.CamParams.from_config(H0=H, W0=W, **cam_cfg).cuda()

    intr = cam_param(mode=&quotget_intrinsic&quot)
    rays_o, rays_d, select_inds = cam_param.get_rays_random_pose(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/peterouzh/cips-3d/commit/d596a9bf9455c28ed0cbf758071f239b70a397a4#diff-197b0950b9e59ae8498afdaa8d2db45ced1c9e05e8e1aa8a5108f6d00dab839bL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23318247</div><div id='project'> Project Name: peterouzh/cips-3d</div><div id='commit'> Commit Name: d596a9bf9455c28ed0cbf758071f239b70a397a4</div><div id='time'> Time: 2022-02-28</div><div id='author'> Author: zhoupengcv@sjtu.edu.cn</div><div id='file'> File Name: exp/cips3d_inversion/models/st_web.py</div><div id='m_class'> M Class Name: STModel</div><div id='n_method'> N Class Name: STModel</div><div id='m_method'> M Method Name: interpolate_z_web(4)</div><div id='n_method'> N Method Name: interpolate_z_web(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: exp/cips3d_inversion/models/st_web.py</div><div id='n_file'> N File Name: exp/cips3d_inversion/models/st_web.py</div><div id='m_start'> M Start Line: 69</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 181</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    example = next(mongo_processor.get_training_examples(intent["name"], self.bot))
                    suggested_intents.append(example[&quottext&quot])
                except Exception:
                    <a id="change">pass</a>
            dispatcher.utter_message(buttons=suggested_intents)
            bot_response = suggested_intents
        else:
            dispatcher.utter_template(DEFAULT_NLU_FALLBACK_UTTERANCE_NAME, tracker)</code></pre><h3>After Change</h3><pre><code class='java'>
        
        status = "SUCCESS"
        exception = None
        action_config<a id="change"> = </a>self.retrieve_config()
        intent_ranking = tracker.latest_message.get("intent_ranking")
        num_text_recommendations = action_config[&quotnum_text_recommendations&quot]
        trigger_rules<a id="change"> = </a><a id="change">action_config.get(&quottrigger_rules&quot</a><a id="change">)</a>
        suggested_intents = []
        if num_text_recommendations and intent_ranking:
            mongo_processor = MongoProcessor()
            for intent in intent_ranking[1: 1+num_text_recommendations]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/digiteinfotech/kairon/commit/92f604f4aaa1b0a5d2db14ba64fe8a48af0ad71d#diff-e283cba789cbc1c9e60bc095040af8330fced3d3bdfe03e419b881e1974a35baL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23318230</div><div id='project'> Project Name: digiteinfotech/kairon</div><div id='commit'> Commit Name: 92f604f4aaa1b0a5d2db14ba64fe8a48af0ad71d</div><div id='time'> Time: 2022-09-22</div><div id='author'> Author: pandey.udit867@gmail.com</div><div id='file'> File Name: kairon/actions/definitions/two_stage_fallback.py</div><div id='m_class'> M Class Name: ActionTwoStageFallback</div><div id='n_method'> N Class Name: ActionTwoStageFallback</div><div id='m_method'> M Method Name: execute(3)</div><div id='n_method'> N Method Name: execute(3)</div><div id='m_parent_class'> M Parent Class: ActionsBase</div><div id='n_parent_class'> N Parent Class: ActionsBase</div><div id='m_file'> M File Name: kairon/actions/definitions/two_stage_fallback.py</div><div id='n_file'> N File Name: kairon/actions/definitions/two_stage_fallback.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 71</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    video_f.release(st_video=True)

    <a id="change">pass</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
      load_G_cfg = list(load_G_cfg.values())[0]
      G = build_model(load_G_cfg.G_cfg).cuda()
      Checkpointer(G).load_state_dict_from_file(network_pkl)
      cfg<a id="change"> = </a>load_G_cfg

    H = W = img_size
    cam_cfg<a id="change"> = </a><a id="change">cfg.get(&quotcam_cfg&quot</a>, {}<a id="change">)</a>
    cam_param = cam_params.CamParams.from_config(H0=H, W0=W, **cam_cfg).cuda()
    intr = cam_param(mode=&quotget_intrinsic&quot)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/peterouzh/cips-3d/commit/06410e5eeed2a2ba5f07ad4de9b0cc8efb634b87#diff-197b0950b9e59ae8498afdaa8d2db45ced1c9e05e8e1aa8a5108f6d00dab839bL157' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23318245</div><div id='project'> Project Name: peterouzh/cips-3d</div><div id='commit'> Commit Name: 06410e5eeed2a2ba5f07ad4de9b0cc8efb634b87</div><div id='time'> Time: 2022-02-22</div><div id='author'> Author: zhoupengcv@sjtu.edu.cn</div><div id='file'> File Name: exp/cips3d_inversion/models/st_web.py</div><div id='m_class'> M Class Name: STModel</div><div id='n_method'> N Class Name: STModel</div><div id='m_method'> M Method Name: sampling_yaw_web(4)</div><div id='n_method'> N Method Name: sampling_yaw_web(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: exp/cips3d_inversion/models/st_web.py</div><div id='n_file'> N File Name: exp/cips3d_inversion/models/st_web.py</div><div id='m_start'> M Start Line: 250</div><div id='m_end'> M End Line: 250</div><div id='n_start'> N Start Line: 207</div><div id='n_end'> N End Line: 252</div><BR>