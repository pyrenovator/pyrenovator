<html><h3>Pattern ID :18161
</h3><img src='59579737.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

@mark_slow
def test_predict():
    module = <a id="change">Wav2Vec2Module(list(</a>ascii_lowercase<a id="change">)</a><a id="change">)</a>
    fake_input = torch.randn(1, 16000)
    fake_transcription = module.predict(fake_input)
    assert isinstance(fake_transcription, list)
    assert len(fake_transcription) == 1</code></pre><h3>After Change</h3><pre><code class='java'>

@mark_slow
def test_predict():
    module = <a id="change">Wav2Vec2Module(</a><a id="change">TextTransformConfig(list(</a>ascii_lowercase<a id="change">)</a><a id="change">))</a>
    fake_input = torch.randn(1, 16000)
    fake_transcription = module.predict(fake_input)
    assert isinstance(fake_transcription, list)
    assert len(fake_transcription) == 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/59e320de9d8d359704c0d1092f6a6b662ac662d3#diff-95cc988d62693f49dfd6c15e3bdf7bd944ad2cff9e52029f412991efc7c3b91cL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59579737</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: 59e320de9d8d359704c0d1092f6a6b662ac662d3</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_predict(0)</div><div id='n_method'> N Method Name: test_predict(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/wav2vec/test_module_w2v.py</div><div id='n_file'> N File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_quantized_script_module():
    &#47&#47 TODO: check why the quantized model is creating different predictions
    &#47&#47 I&quotm not sure if that&quots expected or a bug
    module = <a id="change">Wav2Vec2Module(list(</a>ascii_lowercase<a id="change">)</a><a id="change">)</a>
    module.eval()
    torchaudio_module = Wav2Vec2Scriptable(module, quantized=True)
    torchaudio_module.eval()
</code></pre><h3>After Change</h3><pre><code class='java'>
def test_quantized_script_module():
    &#47&#47 TODO: check why the quantized model is creating different predictions
    &#47&#47 I&quotm not sure if that&quots expected or a bug
    module = <a id="change">Wav2Vec2Module(</a><a id="change">TextTransformConfig(list(</a>ascii_lowercase<a id="change">)</a><a id="change">))</a>
    module.eval()
    torchaudio_module = Wav2Vec2Scriptable(module, quantized=True)
    torchaudio_module.eval()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/59e320de9d8d359704c0d1092f6a6b662ac662d3#diff-95cc988d62693f49dfd6c15e3bdf7bd944ad2cff9e52029f412991efc7c3b91cL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59579736</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: 59e320de9d8d359704c0d1092f6a6b662ac662d3</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_quantized_script_module(0)</div><div id='n_method'> N Method Name: test_quantized_script_module(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/wav2vec/test_module_w2v.py</div><div id='n_file'> N File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
@mark_slow
@requirescuda
def test_dev_run_train(sample_manifest):
    module = <a id="change">Wav2Vec2Module(list(</a>ascii_lowercase<a id="change">)</a><a id="change">)</a>
    data = ManifestDatamodule(
        train_manifest=sample_manifest,
        val_manifest=sample_manifest,
        test_manifest=sample_manifest,</code></pre><h3>After Change</h3><pre><code class='java'>
@mark_slow
@requirescuda
def test_dev_run_train(sample_manifest):
    module = <a id="change">Wav2Vec2Module(</a><a id="change">TextTransformConfig(list(</a>ascii_lowercase<a id="change">)</a><a id="change">))</a>
    data = ManifestDatamodule(
        train_manifest=sample_manifest,
        val_manifest=sample_manifest,
        test_manifest=sample_manifest,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/59e320de9d8d359704c0d1092f6a6b662ac662d3#diff-95cc988d62693f49dfd6c15e3bdf7bd944ad2cff9e52029f412991efc7c3b91cL20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59579738</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: 59e320de9d8d359704c0d1092f6a6b662ac662d3</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_dev_run_train(1)</div><div id='n_method'> N Method Name: test_dev_run_train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/wav2vec/test_module_w2v.py</div><div id='n_file'> N File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

@mark_slow
def test_script_module():
    module = <a id="change">Wav2Vec2Module(list(</a>ascii_lowercase<a id="change">)</a><a id="change">)</a>
    module.eval()
    torchaudio_module = Wav2Vec2Scriptable(module)
    torchaudio_module.eval()
    scripted = torch.jit.script(torchaudio_module)</code></pre><h3>After Change</h3><pre><code class='java'>

@mark_slow
def test_script_module():
    module = <a id="change">Wav2Vec2Module(</a><a id="change">TextTransformConfig(list(</a>ascii_lowercase<a id="change">)</a><a id="change">))</a>
    module.eval()
    torchaudio_module = Wav2Vec2Scriptable(module)
    torchaudio_module.eval()
    scripted = torch.jit.script(torchaudio_module)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/59e320de9d8d359704c0d1092f6a6b662ac662d3#diff-95cc988d62693f49dfd6c15e3bdf7bd944ad2cff9e52029f412991efc7c3b91cL45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 59579735</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: 59e320de9d8d359704c0d1092f6a6b662ac662d3</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_script_module(0)</div><div id='n_method'> N Method Name: test_script_module(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/wav2vec/test_module_w2v.py</div><div id='n_file'> N File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 50</div><BR>