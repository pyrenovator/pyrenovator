<html><h3>Pattern ID :28590
</h3><img src='84458794.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        MLOpsRuntimeLogDaemon.get_instance(self.args).stop_log_processor(run_id, self.edge_id)

    def callback_exit_train_with_exception(self, topic, payload):
        <a id="change">logging.info("callback_exit_train_with_exception: topic = %s, payload = %s"</a><a id="change"> % </a>(topic<a id="change">, payload</a>)<a id="change">)</a>

        request_json = json.loads(payload)
        run_id = request_json["runId"]
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 logging.info("callback_exit_train_with_exception: topic = %s, payload = %s" % (topic, payload))

        request_json = json.loads(payload)
        run_id<a id="change"> = </a><a id="change">request_json.get("runId"</a>, <a id="change">None</a><a id="change">)</a>
        <a id="change">if run_id is None</a>:
            run_id<a id="change"> = request_json.get("id"</a>, <a id="change">None</a><a id="change">)</a>

        if run_id is None:
            return
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/a2213d311ab9100ba0f0a223492a6187e064b9c6#diff-e80d580c8c52b12fe048ba58db4ca171ad8dccec37aa7c8fad24e42431a5e803L636' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84458794</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: a2213d311ab9100ba0f0a223492a6187e064b9c6</div><div id='time'> Time: 2023-02-09</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_class'> M Class Name: FedMLClientRunner</div><div id='n_method'> N Class Name: FedMLClientRunner</div><div id='m_method'> M Method Name: callback_exit_train_with_exception(3)</div><div id='n_method'> N Method Name: callback_exit_train_with_exception(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_start'> M Start Line: 636</div><div id='m_end'> M End Line: 639</div><div id='n_start'> N Start Line: 642</div><div id='n_end'> N End Line: 650</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ClientConstants.save_run_process(self.process.pid)

    def callback_stop_train(self, topic, payload):
        <a id="change">logging.info("callback_stop_train: topic = %s, payload = %s"</a><a id="change"> % </a>(topic<a id="change">, payload</a>)<a id="change">)</a>

        request_json = json.loads(payload)
        run_id = request_json["runId"]
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 logging.info("callback_stop_train: topic = %s, payload = %s" % (topic, payload))

        request_json = json.loads(payload)
        run_id<a id="change"> = </a><a id="change">request_json.get("runId"</a>, None<a id="change">)</a>
        <a id="change">if run_id is None</a>:
            run_id<a id="change"> = request_json.get("id"</a>, None<a id="change">)</a>

        &#47&#47 logging.info("Stop run with multiprocessing...")

        &#47&#47 Stop cross-silo server with multi processing mode</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/49f336bad8e74c6926b5affc6ac5689090566f48#diff-e80d580c8c52b12fe048ba58db4ca171ad8dccec37aa7c8fad24e42431a5e803L596' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84458795</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 49f336bad8e74c6926b5affc6ac5689090566f48</div><div id='time'> Time: 2023-02-08</div><div id='author'> Author: alex.gpt.llm@gmail.com</div><div id='file'> File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_class'> M Class Name: FedMLClientRunner</div><div id='n_method'> N Class Name: FedMLClientRunner</div><div id='m_method'> M Method Name: callback_stop_train(3)</div><div id='n_method'> N Method Name: callback_stop_train(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_start'> M Start Line: 597</div><div id='m_end'> M End Line: 602</div><div id='n_start'> N Start Line: 610</div><div id='n_end'> N End Line: 618</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ClientConstants.save_run_process(self.process.pid)

    def callback_stop_train(self, topic, payload):
        <a id="change">logging.info("callback_stop_train: topic = %s, payload = %s"</a><a id="change"> % </a>(topic<a id="change">, payload</a>)<a id="change">)</a>

        request_json = json.loads(payload)
        run_id = request_json["runId"]
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 logging.info("callback_stop_train: topic = %s, payload = %s" % (topic, payload))

        request_json = json.loads(payload)
        run_id<a id="change"> = </a><a id="change">request_json.get("runId"</a>, None<a id="change">)</a>
        <a id="change">if run_id is None</a>:
            run_id<a id="change"> = request_json.get("id"</a>, None<a id="change">)</a>

        &#47&#47 logging.info("Stop run with multiprocessing...")

        &#47&#47 Stop cross-silo server with multi processing mode</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/b2b7a436e00a85b62fb849c310e88b1c929cae01#diff-e80d580c8c52b12fe048ba58db4ca171ad8dccec37aa7c8fad24e42431a5e803L596' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84458796</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: b2b7a436e00a85b62fb849c310e88b1c929cae01</div><div id='time'> Time: 2023-02-08</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_class'> M Class Name: FedMLClientRunner</div><div id='n_method'> N Class Name: FedMLClientRunner</div><div id='m_method'> M Method Name: callback_stop_train(3)</div><div id='n_method'> N Method Name: callback_stop_train(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_start'> M Start Line: 597</div><div id='m_end'> M End Line: 602</div><div id='n_start'> N Start Line: 610</div><div id='n_end'> N End Line: 618</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        MLOpsRuntimeLogDaemon.get_instance(self.args).stop_log_processor(run_id, self.edge_id)

    def callback_exit_train_with_exception(self, topic, payload):
        <a id="change">logging.info("callback_exit_train_with_exception: topic = %s, payload = %s"</a><a id="change"> % </a>(topic<a id="change">, payload</a>)<a id="change">)</a>

        request_json = json.loads(payload)
        run_id = request_json["runId"]
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 logging.info("callback_exit_train_with_exception: topic = %s, payload = %s" % (topic, payload))

        request_json = json.loads(payload)
        run_id<a id="change"> = </a><a id="change">request_json.get("runId"</a>, None<a id="change">)</a>
        <a id="change">if run_id is None</a>:
            run_id<a id="change"> = request_json.get("id"</a>, None<a id="change">)</a>

        if run_id is None:
            return
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/37094f5e0a2758b13f8e7b581746645a72042303#diff-e80d580c8c52b12fe048ba58db4ca171ad8dccec37aa7c8fad24e42431a5e803L635' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84458797</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 37094f5e0a2758b13f8e7b581746645a72042303</div><div id='time'> Time: 2023-02-09</div><div id='author'> Author: alexliang.kh@gmail.com</div><div id='file'> File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_class'> M Class Name: FedMLClientRunner</div><div id='n_method'> N Class Name: FedMLClientRunner</div><div id='m_method'> M Method Name: callback_exit_train_with_exception(3)</div><div id='n_method'> N Method Name: callback_exit_train_with_exception(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='n_file'> N File Name: python/fedml/cli/edge_deployment/client_runner.py</div><div id='m_start'> M Start Line: 636</div><div id='m_end'> M End Line: 639</div><div id='n_start'> N Start Line: 642</div><div id='n_end'> N End Line: 650</div><BR>