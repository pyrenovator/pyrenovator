<html><h3>Pattern ID :12620
</h3><img src='42871182.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return input

    def random_vertical_offset(self, transform_config: dict, input: np.array, channel: ChannelEnum = None) -&gt; np.array:
        <a id="change">if </a><a id="change">channel is None or channel.value in transform_config["apply_to"]</a>:
            min, max = transform_config["min"], transform_config["max"]

            if self.deterministic:
                offset = self.rng.uniform(low=min, high=max)
            else:
                offset = np.random.uniform(low=min, high=max)

            if channel is ChannelEnum.PARAMS:
                transformed_input = input.clone()
                transformed_input[3] = offset + transformed_input[3]
            else:
                transformed_input = offset + input

            return transformed_input

        <a id="change">return </a>input
</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            offset = np.random.uniform(low=min, high=max)

        <a id="change">for </a>channel, <a id="change">value</a> in <a id="change">data.items():
            if </a><a id="change">channel.value in transform_config["apply_to"]</a>:
                if channel is ChannelEnum.PARAMS:
                    transformed_value = value.clone()
                    transformed_value[3] = offset + transformed_value[3]
                else:
                    transformed_value = offset + value

                data[channel] = transformed_value

        <a id="change">return </a>data
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 12</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mstoelzle/solving-occlusion/commit/16789db20a95b30d2b206f7bce3d8517e19bbe1e#diff-2fdeaffe0a410d245767b8558dbd226bfa2303c80cf4bc29ce9c79f1e90c1840L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42871182</div><div id='project'> Project Name: mstoelzle/solving-occlusion</div><div id='commit'> Commit Name: 16789db20a95b30d2b206f7bce3d8517e19bbe1e</div><div id='time'> Time: 2020-10-24</div><div id='author'> Author: maximilian@stoelzle.ch</div><div id='file'> File Name: src/datasets/transforms.py</div><div id='m_class'> M Class Name: Transformer</div><div id='n_method'> N Class Name: Transformer</div><div id='m_method'> M Method Name: random_vertical_offset(3)</div><div id='n_method'> N Method Name: random_vertical_offset(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/transforms.py</div><div id='n_file'> N File Name: src/datasets/transforms.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return input

    def random_vertical_scale(self, transform_config: dict, input: np.array, channel: ChannelEnum = None) -&gt; np.array:
        <a id="change">if </a><a id="change">channel is None or channel.value in transform_config["apply_to"]</a>:
            min, max = transform_config["min"], transform_config["max"]

            if self.deterministic:
                scale = self.rng.uniform(low=min, high=max)
            else:
                scale = np.random.uniform(low=min, high=max)

            if channel is ChannelEnum.PARAMS:
                transformed_input = input.clone()
                transformed_input[3] = scale * transformed_input[3]
            else:
                transformed_input = scale * input

            <a id="change">return </a>transformed_input

        return input
</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            scale = np.random.uniform(low=min, high=max)

        <a id="change">for </a>channel, <a id="change">value</a> in <a id="change">data.items():
            if </a><a id="change">channel.value in transform_config["apply_to"]</a>:
                if channel is ChannelEnum.PARAMS:
                    transformed_value = value.clone()
                    transformed_value[3] = scale * transformed_value[3]
                else:
                    transformed_value = scale * value

                data[channel] = transformed_value

        <a id="change">return </a>data

    def random_vertical_offset(self, transform_config: dict,
                               data: Dict[ChannelEnum, torch.Tensor]) -&gt; Dict[ChannelEnum, torch.Tensor]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mstoelzle/solving-occlusion/commit/16789db20a95b30d2b206f7bce3d8517e19bbe1e#diff-2fdeaffe0a410d245767b8558dbd226bfa2303c80cf4bc29ce9c79f1e90c1840L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42871183</div><div id='project'> Project Name: mstoelzle/solving-occlusion</div><div id='commit'> Commit Name: 16789db20a95b30d2b206f7bce3d8517e19bbe1e</div><div id='time'> Time: 2020-10-24</div><div id='author'> Author: maximilian@stoelzle.ch</div><div id='file'> File Name: src/datasets/transforms.py</div><div id='m_class'> M Class Name: Transformer</div><div id='n_method'> N Class Name: Transformer</div><div id='m_method'> M Method Name: random_vertical_scale(3)</div><div id='n_method'> N Method Name: random_vertical_scale(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/transforms.py</div><div id='n_file'> N File Name: src/datasets/transforms.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 73</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return transformed_input

    def random_noise(self, transform_config: dict, input: np.array, channel: ChannelEnum = None) -&gt; np.array:
        <a id="change">if </a><a id="change">channel is None or channel.value in transform_config["apply_to"]</a>:
            stdev = transform_config["stdev"]

            if self.deterministic:
                noise = self.rng.normal(loc=0, scale=stdev, size=tuple(input.size()))
            else:
                noise = np.random.normal(loc=0, scale=stdev, size=tuple(input.size()))

            noise = input.new_tensor(noise, dtype=input.dtype)

            transformed_input = input + noise
            return transformed_input

        <a id="change">return </a>input

    def random_vertical_scale(self, transform_config: dict, input: np.array, channel: ChannelEnum = None) -&gt; np.array:
        if channel is None or channel.value in transform_config["apply_to"]:</code></pre><h3>After Change</h3><pre><code class='java'>
        stdev = transform_config["stdev"]

        noise = None
        <a id="change">for </a>channel, <a id="change">value</a> in <a id="change">data.items():
            if </a><a id="change">channel.value in transform_config["apply_to"]</a>:
                if noise is None:
                    if self.deterministic:
                        noise_value = self.rng.normal(loc=0, scale=stdev, size=tuple(value.size()))
                    else:
                        noise_value = np.random.normal(loc=0, scale=stdev, size=tuple(value.size()))
                    noise = value.new_tensor(noise_value, dtype=value.dtype)

                transformed_value = value + noise

                data[channel] = transformed_value

        <a id="change">return </a>data

    def random_vertical_scale(self, transform_config: dict,
                              data: Dict[ChannelEnum, torch.Tensor]) -&gt; Dict[ChannelEnum, torch.Tensor]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mstoelzle/solving-occlusion/commit/16789db20a95b30d2b206f7bce3d8517e19bbe1e#diff-2fdeaffe0a410d245767b8558dbd226bfa2303c80cf4bc29ce9c79f1e90c1840L33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42871186</div><div id='project'> Project Name: mstoelzle/solving-occlusion</div><div id='commit'> Commit Name: 16789db20a95b30d2b206f7bce3d8517e19bbe1e</div><div id='time'> Time: 2020-10-24</div><div id='author'> Author: maximilian@stoelzle.ch</div><div id='file'> File Name: src/datasets/transforms.py</div><div id='m_class'> M Class Name: Transformer</div><div id='n_method'> N Class Name: Transformer</div><div id='m_method'> M Method Name: random_noise(3)</div><div id='n_method'> N Method Name: random_noise(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/transforms.py</div><div id='n_file'> N File Name: src/datasets/transforms.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 52</div><BR>