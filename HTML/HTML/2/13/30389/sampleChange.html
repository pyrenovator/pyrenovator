<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            &#47&#47 Normalize advantage (not present in the original implementation)
            if self.normalize_advantage:
                advantages = (rollout_data.advantages<a id="change"> - </a><a id="change">rollout_data.advantages.mean()</a>)<a id="change"> / </a>(<a id="change">rollout_data.advantages.std() + 1e-8</a>)

            &#47&#47 Policy gradient loss
            policy_loss = -(advantages * log_prob).mean()</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 Normalize advantage (not present in the original implementation)
            advantages = rollout_data.advantages
            if self.normalize_advantage:
                advantages<a id="change"> = </a>(advantages<a id="change"> - advantages.mean()</a>)<a id="change"> / </a>(<a id="change">advantages.std() + 1e-8</a>)

            &#47&#47 Policy gradient loss
            policy_loss = -(advantages * log_prob).mean()</code></pre>