<html><h3>Pattern ID :4424
</h3><img src='16215701.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return pred, self.loss(pred.float(), Y.long())

    def training_step(self, batch, batch_nb):
        pred<a id="change">, loss</a> = self.forward(batch, self.network)
        self.train_avg_loss += loss.mean()
        self.train_avg_cnt += 1
</code></pre><h3>After Change</h3><pre><code class='java'>
        return pred

    def training_step(self, batch, batch_nb):
        pred = <a id="change">self.forward(batch</a><a id="change">[0])</a> &#47&#47 == self(batch[0])
        Y<a id="change"> = batch[1]</a>
        loss<a id="change"> = self</a><a id="change">.loss(pred.float()</a>, <a id="change">Y.long()</a><a id="change">)</a>
        self.train_avg_loss += loss.mean()
        self.train_avg_cnt += 1

        if self.get_curidx(batch_nb) % self.train_log_interval == 0:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/davinnovation/pytorch-boilerplate/commit/f7d820e157d566ac50f3e8341db429891d5e0245#diff-a083f1abf87ce1375709c5853cd52690867824ec49bc7e7761cbbcd811197ed1L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16215701</div><div id='project'> Project Name: davinnovation/pytorch-boilerplate</div><div id='commit'> Commit Name: f7d820e157d566ac50f3e8341db429891d5e0245</div><div id='time'> Time: 2020-07-19</div><div id='author'> Author: davinnovation@gmail.com</div><div id='file'> File Name: flashlight/runner/pl.py</div><div id='m_class'> M Class Name: PL</div><div id='n_method'> N Class Name: PL</div><div id='m_method'> M Method Name: training_step(3)</div><div id='n_method'> N Method Name: training_step(3)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: flashlight/runner/pl.py</div><div id='n_file'> N File Name: flashlight/runner/pl.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 34</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            torch.cuda.empty_cache()

    def validation_step(self, batch, batch_nb):  &#47&#47 optional
        pred<a id="change">, loss</a> = self.forward(batch, self.network)

        return {"val_loss": loss}
</code></pre><h3>After Change</h3><pre><code class='java'>
            torch.cuda.empty_cache()

    def validation_step(self, batch, batch_nb):  &#47&#47 optional
        pred = <a id="change">self.forward(</a><a id="change">batch[0])</a>
        Y<a id="change"> = batch[1]</a>
        loss<a id="change"> = </a><a id="change">self.loss(pred.float()</a>, <a id="change">Y.long()</a><a id="change">)</a>
        
        return {"val_loss": loss}

    def validation_epoch_end(self, outputs):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/davinnovation/pytorch-boilerplate/commit/f7d820e157d566ac50f3e8341db429891d5e0245#diff-a083f1abf87ce1375709c5853cd52690867824ec49bc7e7761cbbcd811197ed1L61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16215700</div><div id='project'> Project Name: davinnovation/pytorch-boilerplate</div><div id='commit'> Commit Name: f7d820e157d566ac50f3e8341db429891d5e0245</div><div id='time'> Time: 2020-07-19</div><div id='author'> Author: davinnovation@gmail.com</div><div id='file'> File Name: flashlight/runner/pl.py</div><div id='m_class'> M Class Name: PL</div><div id='n_method'> N Class Name: PL</div><div id='m_method'> M Method Name: validation_step(3)</div><div id='n_method'> N Method Name: validation_step(3)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: flashlight/runner/pl.py</div><div id='n_file'> N File Name: flashlight/runner/pl.py</div><div id='m_start'> M Start Line: 62</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 63</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return {"val_loss": avg_loss, "log": logs, "progress_bar": logs}

    def test_step(self, batch, batch_nb):  &#47&#47 optional
        pred<a id="change">, loss</a> = self.forward(batch, self.network)

        return {"test_loss": loss}
</code></pre><h3>After Change</h3><pre><code class='java'>
        return {"val_loss": avg_loss, "log": logs, "progress_bar": logs}

    def test_step(self, batch, batch_nb):  &#47&#47 optional
        pred = <a id="change">self.forward(</a><a id="change">batch[0])</a>
        Y<a id="change"> = batch[1]</a>
        loss<a id="change"> = </a><a id="change">self.loss(pred.float()</a>, <a id="change">Y.long()</a><a id="change">)</a>

        return {"test_loss": loss}

    def test_epoch_end(self, outputs):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/davinnovation/pytorch-boilerplate/commit/f7d820e157d566ac50f3e8341db429891d5e0245#diff-a083f1abf87ce1375709c5853cd52690867824ec49bc7e7761cbbcd811197ed1L72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 16215699</div><div id='project'> Project Name: davinnovation/pytorch-boilerplate</div><div id='commit'> Commit Name: f7d820e157d566ac50f3e8341db429891d5e0245</div><div id='time'> Time: 2020-07-19</div><div id='author'> Author: davinnovation@gmail.com</div><div id='file'> File Name: flashlight/runner/pl.py</div><div id='m_class'> M Class Name: PL</div><div id='n_method'> N Class Name: PL</div><div id='m_method'> M Method Name: test_step(3)</div><div id='n_method'> N Method Name: test_step(3)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: flashlight/runner/pl.py</div><div id='n_file'> N File Name: flashlight/runner/pl.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 75</div><BR>