<html><h3>Pattern ID :34287
</h3><img src='98266633.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def _build_path_config(self):
        path_config_dict = {}
        dir=os.path.dirname(os.path.realpath(__file__))
        root=<a id="change">os.getcwd()</a>
        <a id="change">path_config_dict[&quotroot&quot]=</a>root
        model_name = self.config_dict[&quotmodel&quot]
        dataset_name = self.config_dict[&quotdataset&quot]
        if model_name == None:</code></pre><h3>After Change</h3><pre><code class='java'>
                                                               "../properties/dataset/{}.json".format(dataset_name))
        path_config_dict["dataset_dir"] = "dataset/{}".format(dataset_name)

        <a id="change">path_config_dict["checkpoint_file"] = </a>&quotcheckpoint/&quot + &quot{}-{}.pth&quot.format(model_name, dataset_name)
        <a id="change">path_config_dict["trained_model_dir"] = </a>&quottrained_model/&quot + &quot{}-{}&quot.format(model_name, dataset_name)
        path_config_dict["log_file"] = &quotlog/&quot + &quot{}-{}.log&quot.format(model_name, dataset_name)
        <a id="change">path_config_dict["output_dir"]</a> = &quotresult/{}-{}&quot.format(model_name,dataset_name)
        <a id="change">path_config_dict["checkpoint_dir"]</a> = &quotcheckpoint/&quot + &quot{}-{}&quot.format(model_name, dataset_name)

        self.path_config_dict = path_config_dict
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lyh-yf/mwptoolkit/commit/5bd2c2734c80f88c3144c7975750f174e39120e2#diff-581365caab4708fd0afd1c5a32468d0d911e3fcaf488b69d3bc85a11003dbe30L219' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98266633</div><div id='project'> Project Name: lyh-yf/mwptoolkit</div><div id='commit'> Commit Name: 5bd2c2734c80f88c3144c7975750f174e39120e2</div><div id='time'> Time: 2022-04-08</div><div id='author'> Author: yifan2250@gmail.com</div><div id='file'> File Name: mwptoolkit/config/configuration.py</div><div id='m_class'> M Class Name: Config</div><div id='n_method'> N Class Name: Config</div><div id='m_method'> M Method Name: _build_path_config(1)</div><div id='n_method'> N Method Name: _build_path_config(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: mwptoolkit/config/configuration.py</div><div id='n_file'> N File Name: mwptoolkit/config/configuration.py</div><div id='m_start'> M Start Line: 219</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 222</div><div id='n_end'> N End Line: 255</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def _build_path_config(self):
        path_config_dict = {}
        dir=os.path.dirname(os.path.realpath(__file__))
        root<a id="change">=</a><a id="change">os.getcwd()</a>
        <a id="change">path_config_dict[&quotroot&quot]</a>=root
        model_name = self.config_dict[&quotmodel&quot]
        dataset_name = self.config_dict[&quotdataset&quot]
        if model_name == None:</code></pre><h3>After Change</h3><pre><code class='java'>
                                                                                                          dataset_name))
        path_config_dict["dataset_config_file"] = os.path.join(dir,
                                                               "../properties/dataset/{}.json".format(dataset_name))
        <a id="change">path_config_dict["dataset_dir"]</a> = "dataset/{}".format(dataset_name)

        <a id="change">path_config_dict["checkpoint_file"] = </a>&quotcheckpoint/&quot + &quot{}-{}.pth&quot.format(model_name, dataset_name)
        <a id="change">path_config_dict["trained_model_dir"] = </a>&quottrained_model/&quot + &quot{}-{}&quot.format(model_name, dataset_name)
        path_config_dict["log_file"] = &quotlog/&quot + &quot{}-{}.log&quot.format(model_name, dataset_name)
        <a id="change">path_config_dict["output_dir"]</a> = &quotresult/{}-{}&quot.format(model_name,dataset_name)
        <a id="change">path_config_dict["checkpoint_dir"]</a> = &quotcheckpoint/&quot + &quot{}-{}&quot.format(model_name, dataset_name)

        self.path_config_dict = path_config_dict
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lyh-yf/mwptoolkit/commit/5bd2c2734c80f88c3144c7975750f174e39120e2#diff-581365caab4708fd0afd1c5a32468d0d911e3fcaf488b69d3bc85a11003dbe30L218' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98266616</div><div id='project'> Project Name: lyh-yf/mwptoolkit</div><div id='commit'> Commit Name: 5bd2c2734c80f88c3144c7975750f174e39120e2</div><div id='time'> Time: 2022-04-08</div><div id='author'> Author: yifan2250@gmail.com</div><div id='file'> File Name: mwptoolkit/config/configuration.py</div><div id='m_class'> M Class Name: Config</div><div id='n_method'> N Class Name: Config</div><div id='m_method'> M Method Name: _build_path_config(1)</div><div id='n_method'> N Method Name: _build_path_config(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: mwptoolkit/config/configuration.py</div><div id='n_file'> N File Name: mwptoolkit/config/configuration.py</div><div id='m_start'> M Start Line: 219</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 222</div><div id='n_end'> N End Line: 255</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    data_config[&quotbatch_size&quot] = batch_size
    data_config[&quotval_size&quot] = 0.2
    data_config[&quotCACHEDATA&quot] = True
    <a id="change">data_config[&quotdata_path&quot] = </a>os.path.join(<a id="change">os.getcwd()</a>, &quotdata.csv&quot)


    data_config[&quotinputs&quot] = [&quottmin&quot, &quottmax&quot, &quotslr&quot, &quotWTEMP(C)&quot, &quotFLOW_OUTcms&quot, &quotSED_OUTtons&quot, &quotNO3_OUTkg&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
    _nn_config[&quotlr&quot] = 0.0001
    _nn_config[&quotoptimizer&quot] = &quotadam&quot
    _nn_config[&quotloss&quot] = &quotmse&quot
    <a id="change">_nn_config[&quotepochs&quot]</a> = 10
    <a id="change">_nn_config[&quotmin_val_loss&quot] = </a>9999
    <a id="change">_nn_config[&quotpatience&quot] = </a>15

    _nn_config[&quotsubsequences&quot] = 3  &#47&#47 used for cnn_lst structure

    _nn_config[&quotlstm_config&quot] = {&quotlstm_units&quot: 64,
                                &quotlstm_act&quot: &quotrelu&quot,
                                &quotdropout&quot: 0.4,
                                &quotrec_dropout&quot: 0.5,
                                }
    _nn_config[&quotcnn_config&quot] = {&quotfilters&quot: 64,
                               &quotkernel_size&quot: 2,
                               &quotactivation&quot: &quotLeakyRelu&quot,
                               &quotmax_pool_size&quot: 2}

    <a id="change">_nn_config[&quotHARHN_config&quot]</a> = {&quotn_conv_lyrs&quot: 3,
                                  &quotenc_units&quot: 64,
                                  &quotdec_units&quot: 64}

    _data_config = dict()
    _data_config[&quotlookback&quot] = 15
    _data_config[&quotbatch_size&quot] = 32
    _data_config[&quotval_fraction&quot] = 0.2
    _data_config[&quotCACHEDATA&quot] = True



    &#47&#47 data_config[&quotinputs&quot] = [&quottmin&quot, &quottmax&quot, &quotslr&quot, &quotWTEMP(C)&quot, &quotFLOW_OUTcms&quot, &quotSED_OUTtons&quot, &quotNO3_OUTkg&quot]
    &#47&#47 data_config[&quotoutputs&quot] = [&quotobs_chla&quot]
    _data_config[&quotinputs&quot] = [&quotcum oprtv time&quot, &quot1st yoib ablyag&quot, &quot2nd nongchog ablyag&quot, &quot2nd nongchogsu yolyang&quot,
                             &quotondo&quot]
    _data_config[&quotoutputs&quot] = [&quotFLUX SFX&quot]

    for key, val in kwargs.items():
        if key in _data_config:
            _data_config[key] = val
        if key in _nn_config:
            <a id="change">_nn_config[key]</a> = val

    _total_intervals = (
        (0, 146,),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/atrcheema/ai4water/commit/1a746afcc453d674d591e5d76b5fbbe90e606a66#diff-807bd5b11dc001837172d03886127ef8b55266c9588220f2897eafe31b735b4eL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98266622</div><div id='project'> Project Name: atrcheema/ai4water</div><div id='commit'> Commit Name: 1a746afcc453d674d591e5d76b5fbbe90e606a66</div><div id='time'> Time: 2020-08-10</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: run_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: make_model(0)</div><div id='n_method'> N Method Name: make_model(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: run_model.py</div><div id='n_file'> N File Name: run_model.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 89</div><div id='n_start'> N Start Line: 14</div><div id='n_end'> N End Line: 96</div><BR>