<html><h3>Pattern ID :27505
</h3><img src='81613549.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if normalization:
        ax.set_title(f&quot{value_col} Time Series Heatmap Normalized Index&quot)

    <a id="change">ax.set_title(</a>f&quot{value_col} (Mean) Time Series Heatmap&quot<a id="change">)</a>

    if path:
        fig.savefig(path)
</code></pre><h3>After Change</h3><pre><code class='java'>
    if normalization:
        df_pivot = (df_pivot - df_pivot.mean()) / df_pivot.std()

    <a id="change">if use_orbit_style</a>:
        <a id="change">with plt.style.context(</a><a id="change">orbit_style):
            </a>fig<a id="change">, ax = plt.subplots(figsize=(fig_width, fig_height))</a>
            ax = sns.heatmap(df_pivot, cmap=palette)

            if normalization:
                <a id="change">ax.set_title(f&quot{value_col} Time Series Heatmap Normalized Index&quot</a><a id="change">)</a>

            ax.set_title(f&quot{value_col} (Mean) Time Series Heatmap&quot)

    else:
        fig, ax = plt.subplots(figsize=(fig_width, fig_height))
        ax = sns.heatmap(df_pivot)

        if normalization:
            ax.set_title(f&quot{value_col} Time Series Heatmap Normalized Index&quot)

        <a id="change">ax.set_title(</a>f&quot{value_col} (Mean) Time Series Heatmap&quot<a id="change">)</a>

    if path:
        fig.savefig(path)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 10</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uber/orbit/commit/18b252e6f30a10a767cb62bf2265402a90277027#diff-5574c690fc22b9c1972aae5ec4fce1d43c64205505420799b3271da913672939L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81613549</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 18b252e6f30a10a767cb62bf2265402a90277027</div><div id='time'> Time: 2021-08-12</div><div id='author'> Author: ariel.jiang@uber.com</div><div id='file'> File Name: orbit/eda/eda_plot.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: ts_heatmap(9)</div><div id='n_method'> N Method Name: ts_heatmap(8)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: orbit/eda/eda_plot.py</div><div id='n_file'> N File Name: orbit/eda/eda_plot.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        rotation=0,
        horizontalalignment=&quotright&quot
    )
    <a id="change">ax.set_title(</a>&quotCorrelation Heatmap&quot<a id="change">)</a>

    if path:
        fig.savefig(path)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 filter out all zero columns
    non_zero_varlist = [i for i in var_list if i not in df.columns[(df == 0).all()]]
    df = df[non_zero_varlist].corr()
    <a id="change">if use_orbit_style</a>:
        <a id="change">with plt.style.context(</a><a id="change">orbit_style):
            </a>fig<a id="change">, ax = plt.subplots(figsize=(fig_width, fig_height))</a>
            ax = sns.heatmap(df, cmap=palette, annot=True, fmt=fmt)
            ax.set_xticklabels(
                ax.get_xticklabels(),
                rotation=45,
                horizontalalignment=&quotright&quot
            )
            ax.set_yticklabels(
                ax.get_yticklabels(),
                rotation=0,
                horizontalalignment=&quotright&quot
            )
            <a id="change">ax.set_title(&quotCorrelation Heatmap&quot</a><a id="change">)</a>

    else:
        fig, ax = plt.subplots(figsize=(fig_width, fig_height))
        ax = sns.heatmap(df, annot=True, fmt=fmt)
        ax.set_xticklabels(
            ax.get_xticklabels(),
            rotation=45,
            horizontalalignment=&quotright&quot
        )
        ax.set_yticklabels(
            ax.get_yticklabels(),
            rotation=0,
            horizontalalignment=&quotright&quot
        )
        <a id="change">ax.set_title(</a>&quotCorrelation Heatmap&quot<a id="change">)</a>

    if path:
        fig.savefig(path)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uber/orbit/commit/18b252e6f30a10a767cb62bf2265402a90277027#diff-5574c690fc22b9c1972aae5ec4fce1d43c64205505420799b3271da913672939L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81613564</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 18b252e6f30a10a767cb62bf2265402a90277027</div><div id='time'> Time: 2021-08-12</div><div id='author'> Author: ariel.jiang@uber.com</div><div id='file'> File Name: orbit/eda/eda_plot.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: correlation_heatmap(8)</div><div id='n_method'> N Method Name: correlation_heatmap(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: orbit/eda/eda_plot.py</div><div id='n_file'> N File Name: orbit/eda/eda_plot.py</div><div id='m_start'> M Start Line: 85</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 131</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    lines, labels = ax.get_legend_handles_labels()
    lines2, labels2 = ax2.get_legend_handles_labels()
    ax2.legend(lines + lines2, labels + labels2, loc=0)
    <a id="change">ax.set_title(</a>f&quot{var1} vs {var2}&quot<a id="change">)</a>
    &#47&#47 ax.grid(False)
    ax2.grid(False)

    if path:</code></pre><h3>After Change</h3><pre><code class='java'>
    one time series plot with dual y axis
    
    df[date_col] = pd.to_datetime(df[date_col])
    <a id="change">if use_orbit_style</a>:
        <a id="change">with plt.style.context(</a><a id="change">orbit_style):
            </a>fig<a id="change">, ax = plt.subplots(figsize=(fig_width, fig_height))</a>
            sns.lineplot(data=df, x=date_col, y=var1, label=var1, color=color1)
            ax.set_ylabel(f&quot{var1}&quot, color=color1)
            ax.tick_params(axis=&quoty&quot, labelcolor=color1)
            ax2 = ax.twinx()
            sns.lineplot(data=df, x=date_col, y=var2, ax=ax2, color=color2, label=var2)
            ax2.set_ylabel(f&quot{var2}&quot, color=color2)
            ax2.tick_params(axis=&quoty&quot, labelcolor=color2)
            lines, labels = ax.get_legend_handles_labels()
            lines2<a id="change">, labels2</a> = ax2.get_legend_handles_labels()
            ax2.legend(lines + lines2, labels + labels2, loc=0)
            <a id="change">ax.set_title(f&quot{var1} vs {var2}&quot</a><a id="change">)</a>
            &#47&#47 ax.grid(False)
            ax2.grid(False)
    else:
        fig, ax = plt.subplots(figsize=(fig_width, fig_height))
        sns.lineplot(data=df, x=date_col, y=var1, label=var1, color=color1)
        ax.set_ylabel(f&quot{var1}&quot, color=color1)
        ax.tick_params(axis=&quoty&quot, labelcolor=color1)
        ax2 = ax.twinx()
        sns.lineplot(data=df, x=date_col, y=var2, ax=ax2, color=color2, label=var2)
        ax2.set_ylabel(f&quot{var2}&quot, color=color2)
        ax2.tick_params(axis=&quoty&quot, labelcolor=color2)
        lines, labels = ax.get_legend_handles_labels()
        lines2, labels2 = ax2.get_legend_handles_labels()
        ax2.legend(lines + lines2, labels + labels2, loc=0)
        <a id="change">ax.set_title(</a>f&quot{var1} vs {var2}&quot<a id="change">)</a>
        &#47&#47 ax.grid(False)
        ax2.grid(False)

    if path:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uber/orbit/commit/18b252e6f30a10a767cb62bf2265402a90277027#diff-5574c690fc22b9c1972aae5ec4fce1d43c64205505420799b3271da913672939L180' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 81613548</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 18b252e6f30a10a767cb62bf2265402a90277027</div><div id='time'> Time: 2021-08-12</div><div id='author'> Author: ariel.jiang@uber.com</div><div id='file'> File Name: orbit/eda/eda_plot.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: dual_axis_ts_plot(10)</div><div id='n_method'> N Method Name: dual_axis_ts_plot(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: orbit/eda/eda_plot.py</div><div id='n_file'> N File Name: orbit/eda/eda_plot.py</div><div id='m_start'> M Start Line: 211</div><div id='m_end'> M End Line: 224</div><div id='n_start'> N Start Line: 214</div><div id='n_end'> N End Line: 275</div><BR>