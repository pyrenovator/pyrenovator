<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            dict: a task(document in collection) after decoding
        
        query = query.copy()
        <a id="change">if "_id"</a><a id="change"> in query</a>:
            <a id="change">query["_id"] = </a><a id="change">ObjectId(query["_id"]</a><a id="change">)</a>
        query.update({"status": status})
        task = self.task_pool.find_one_and_update(
            query, {"$set": {"status": self.STATUS_RUNNING}}, sort=[("priority", pymongo.DESCENDING)]
        )</code></pre><h3>After Change</h3><pre><code class='java'>
            dict: a task(document in collection) after decoding
        
        query = query.copy()
        query<a id="change"> = </a><a id="change">self._decode_query(query</a><a id="change">)</a>
        query.update({"status": status})
        task = self.task_pool.find_one_and_update(
            query, {"$set": {"status": self.STATUS_RUNNING}}, sort=[("priority", pymongo.DESCENDING)]
        )</code></pre>