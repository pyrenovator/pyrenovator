<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        super(BertRelationExtrac, self).__init__()
        
        self.predicate_num = predicate_num 
        config<a id="change"> = ""</a>
        <a id="change">if model_name == "roberta"</a>:
            from bert_seq2seq.model.roberta_model import BertModel, BertConfig, BertPredictionHeadTransform, BertLayerNorm
            config<a id="change"> = </a><a id="change">BertConfig(len(word2ix</a><a id="change">)</a><a id="change">)</a>
            self.bert<a id="change"> = BertModel(</a>config<a id="change">)</a>
            self.layer_norm = BertLayerNorm(config.hidden_size)
            self.layer_norm_cond<a id="change"> = </a>BertLayerNorm(config.hidden_size, conditional=True)
        elif <a id="change">model_name == "bert"</a>:
            from bert_seq2seq.model.bert_model import BertConfig, BertModel, BertPredictionHeadTransform, BertLayerNorm
            config<a id="change"> = </a><a id="change">BertConfig(len(word2ix</a><a id="change">)</a><a id="change">)</a>
            self.bert<a id="change"> = BertModel(</a>config<a id="change">)</a>
            self.layer_norm<a id="change"> = </a>BertLayerNorm(config.hidden_size)
            self.layer_norm_cond = BertLayerNorm(config.hidden_size, conditional=True)
        else :
            <a id="change">raise </a><a id="change">Exception("model_name_err"</a><a id="change">)</a>
        
        self.subject_pred = nn.Linear(config.hidden_size, 2)
        self.activation = nn.Sigmoid()
        self.object_pred = nn.Linear(config.hidden_size, 2 * self.predicate_num)</code></pre><h3>After Change</h3><pre><code class='java'>
    
    
    def __init__(self, word2ix, predicate_num, model_name="roberta"):
        <a id="change">super(BertRelationExtrac, self).__init__(word2ix=word2ix, model_name=model_name)</a>
        
        self.predicate_num = predicate_num
        
        self.subject_pred = nn.Linear(self.config.hidden_size, 2)</code></pre>