<html><h3>Pattern ID :2726
</h3><img src='11016616.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"
    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "True"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "False"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "TRUE"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "true"
    cmd = "python -c &quotimport tensorflow&quot"
    os.system(cmd)
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "XYgg"
    cmd<a id="change"> = </a>"python -c &quotimport tensorflow&quot"
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

    print("Opt-In/Opt-Out Test passed")</code></pre><h3>After Change</h3><pre><code class='java'>
def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"

    <a id="change">for opt_out_value</a> in <a id="change">["True"</a>, <a id="change">"TRUE"</a>, <a id="change">"true"</a>]<a id="change">:
        </a><a id="change">_clean_up_reports()</a>
        os.environ["OPT_OUT_TRACKING"] = opt_out_value
        cmd<a id="change"> = </a>"python -c &quotimport tensorflow&quot"
        <a id="change">os.system(</a>cmd<a id="change">)</a>
        time.sleep(5)
        assert not os.path.exists("/tmp/test_request.txt"), (
            f"URL request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
        <a id="change">assert </a>not os.path.exists("/tmp/test_tag_request.txt"), (
            f"Tag request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 29</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/6a453b5702e0139ba9db6d4ab4c797b6a1fda388#diff-e2121cc1490bd61c704457f224b425dc659e6531da35758e163cf453e05a3da7L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11016616</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 6a453b5702e0139ba9db6d4ab4c797b6a1fda388</div><div id='time'> Time: 2021-03-29</div><div id='author'> Author: 54188298+saimidu@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: opt_in_opt_out_test(0)</div><div id='n_method'> N Method Name: opt_in_opt_out_test(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='n_file'> N File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='m_start'> M Start Line: 7</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"
    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "True"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "False"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "TRUE"
    cmd<a id="change"> = "python -c &quotimport tensorflow&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "true"
    cmd = "python -c &quotimport tensorflow&quot"
    os.system(cmd)
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"] = "XYgg"
    cmd<a id="change"> = </a>"python -c &quotimport tensorflow&quot"
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

    print("Opt-In/Opt-Out Test passed")</code></pre><h3>After Change</h3><pre><code class='java'>
def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"

    <a id="change">for opt_out_value</a> in <a id="change">["True"</a>, <a id="change">"TRUE"</a>, <a id="change">"true"</a>]<a id="change">:
        </a><a id="change">_clean_up_reports()</a>
        os.environ["OPT_OUT_TRACKING"] = opt_out_value
        cmd<a id="change"> = </a>"python -c &quotimport tensorflow&quot"
        <a id="change">os.system(</a>cmd<a id="change">)</a>
        time.sleep(5)
        assert not os.path.exists("/tmp/test_request.txt"), (
            f"URL request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
        <a id="change">assert </a>not os.path.exists("/tmp/test_tag_request.txt"), (
            f"Tag request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/6a453b5702e0139ba9db6d4ab4c797b6a1fda388#diff-e2121cc1490bd61c704457f224b425dc659e6531da35758e163cf453e05a3da7L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11016617</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 6a453b5702e0139ba9db6d4ab4c797b6a1fda388</div><div id='time'> Time: 2021-03-29</div><div id='author'> Author: 54188298+saimidu@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: opt_in_opt_out_test(0)</div><div id='n_method'> N Method Name: opt_in_opt_out_test(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='n_file'> N File Name: test/dlc_tests/container_tests/bin/test_tf_dlc_telemetry_test.py</div><div id='m_start'> M Start Line: 7</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def opt_in_opt_out_test():
    os.environ[&quotTEST_MODE&quot]=&quot1&quot
    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="True"
    cmd<a id="change"> = "python -c &quotimport torch&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="False"
    cmd<a id="change"> = "python -c &quotimport torch&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")


    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="TRUE"
    cmd<a id="change"> = "python -c &quotimport torch&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="true"
    cmd = "python -c &quotimport torch&quot"
    os.system(cmd)
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."


    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="XYgg"
    cmd<a id="change"> = </a>"python -c &quotimport torch&quot"
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

</code></pre><h3>After Change</h3><pre><code class='java'>
def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"

    <a id="change">for opt_out_value</a> in <a id="change">["True"</a>, <a id="change">"TRUE"</a>, <a id="change">"true"</a>]<a id="change">:
        </a><a id="change">_clean_up_reports()</a>
        os.environ["OPT_OUT_TRACKING"] = opt_out_value
        cmd<a id="change"> = </a>"python -c &quotimport torch&quot"
        <a id="change">os.system(</a>cmd<a id="change">)</a>
        time.sleep(5)
        assert not os.path.exists("/tmp/test_request.txt"), (
            f"URL request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
        <a id="change">assert </a>not os.path.exists("/tmp/test_tag_request.txt"), (
            f"Tag request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/6a453b5702e0139ba9db6d4ab4c797b6a1fda388#diff-f5da44f96475a08045e91133d4b66acde841d73d842269e45cb5573661efe005L5' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11016608</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 6a453b5702e0139ba9db6d4ab4c797b6a1fda388</div><div id='time'> Time: 2021-03-29</div><div id='author'> Author: 54188298+saimidu@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/container_tests/bin/pytorch_tests/test_pt_dlc_telemetry_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: opt_in_opt_out_test(0)</div><div id='n_method'> N Method Name: opt_in_opt_out_test(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/container_tests/bin/pytorch_tests/test_pt_dlc_telemetry_test.py</div><div id='n_file'> N File Name: test/dlc_tests/container_tests/bin/pytorch_tests/test_pt_dlc_telemetry_test.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def opt_in_opt_out_test():
    os.environ[&quotTEST_MODE&quot]=&quot1&quot
    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="True"
    cmd<a id="change"> = "python -c &quotimport mxnet&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="False"
    cmd<a id="change"> = "python -c &quotimport mxnet&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="TRUE"
    cmd<a id="change"> = "python -c &quotimport mxnet&quot"</a>
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="true"
    cmd = "python -c &quotimport mxnet&quot"
    os.system(cmd)
    time.sleep(1)
    assert not os.path.exists("/tmp/test_request.txt"), "Test failed on OPT_OUT_TRACKING."

    <a id="change">if os.path.exists("/tmp/test_request.txt"</a><a id="change">)</a>:
        <a id="change">os.system("rm /tmp/test_request.txt"</a><a id="change">)</a>
    os.environ["OPT_OUT_TRACKING"]="XYgg"
    cmd<a id="change"> = </a>"python -c &quotimport mxnet&quot"
    <a id="change">os.system(</a>cmd<a id="change">)</a>
    time.sleep(1)
    assert os.path.exists("/tmp/test_request.txt")

</code></pre><h3>After Change</h3><pre><code class='java'>
def opt_in_opt_out_test():
    os.environ["TEST_MODE"] = "1"

    <a id="change">for opt_out_value</a> in <a id="change">["True"</a>, <a id="change">"TRUE"</a>, <a id="change">"true"</a>]<a id="change">:
        </a><a id="change">_clean_up_reports()</a>
        os.environ["OPT_OUT_TRACKING"] = opt_out_value
        cmd<a id="change"> = </a>"python -c &quotimport mxnet&quot"
        <a id="change">os.system(</a>cmd<a id="change">)</a>
        time.sleep(5)
        assert not os.path.exists("/tmp/test_request.txt"), (
            f"URL request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
        <a id="change">assert </a>not os.path.exists("/tmp/test_tag_request.txt"), (
            f"Tag request placed even though OPT_OUT_TRACKING is {opt_out_value}."
        )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/6a453b5702e0139ba9db6d4ab4c797b6a1fda388#diff-321b087bb199ac4a6c5e2f34b2c96bca5a7111a194c1785c17b09c7a30f48810L5' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 11016628</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 6a453b5702e0139ba9db6d4ab4c797b6a1fda388</div><div id='time'> Time: 2021-03-29</div><div id='author'> Author: 54188298+saimidu@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/container_tests/bin/test_mx_dlc_telemetry_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: opt_in_opt_out_test(0)</div><div id='n_method'> N Method Name: opt_in_opt_out_test(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/container_tests/bin/test_mx_dlc_telemetry_test.py</div><div id='n_file'> N File Name: test/dlc_tests/container_tests/bin/test_mx_dlc_telemetry_test.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 42</div><BR>