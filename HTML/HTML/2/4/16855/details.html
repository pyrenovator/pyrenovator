<html><h3>Pattern ID :16855
</h3><img src='56337691.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for other in others:
            acc = acc._merge_one(other)

        <a id="change">return </a>acc


&#47&#47&#47&#47&#47&#47 utils</code></pre><h3>After Change</h3><pre><code class='java'>
                    acc = x
            return acc

        <a id="change">try:
            </a>flats<a id="change">, treedefs = </a>zip(*[jax.tree_flatten(m) for m in modules])
            flat_out = jax.tree_util.tree_map(merge_fn, *flats)
            module<a id="change"> = </a>jax.tree_unflatten(treedefs[0], flat_out)
        finally:
            LOCAL.is_merging = old_merging
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/cgarciae/treex/commit/940e81d23384c4f7d72cbf40694942176210a401#diff-b8a15969887aa759fe004454b4ef4aa181282e31792cb8a9f2f88706e14910beL164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56337691</div><div id='project'> Project Name: cgarciae/treex</div><div id='commit'> Commit Name: 940e81d23384c4f7d72cbf40694942176210a401</div><div id='time'> Time: 2021-08-17</div><div id='author'> Author: cgarcia.e88@gmail.com</div><div id='file'> File Name: treex/base.py</div><div id='m_class'> M Class Name: Module</div><div id='n_method'> N Class Name: Module</div><div id='m_method'> M Method Name: merge(2)</div><div id='n_method'> N Method Name: merge(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: Sliceable</div><div id='m_file'> M File Name: treex/base.py</div><div id='n_file'> N File Name: treex/base.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 170</div><div id='n_start'> N Start Line: 203</div><div id='n_end'> N End Line: 222</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self._reset_step_flags()
        self.validate_stack(stack)

        <a id="change">return </a>stack.deploy_pipeline(
            self, runtime_configuration=runtime_configuration
        )
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Prevent execution of nested pipelines which might lead to unexpected
        &#47&#47 behavior
        constants.SHOULD_PREVENT_PIPELINE_EXECUTION = True
        <a id="change">try:
            </a>return_value<a id="change"> = </a>stack.deploy_pipeline(
                self, runtime_configuration=runtime_configuration
            )
        finally:
            constants.SHOULD_PREVENT_PIPELINE_EXECUTION<a id="change"> = </a>False

        return return_value
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/11f5c89b3bfbc2e755cea5a9418432cf0abe4c7d#diff-6d2d38fb135b148423c6c7c634fded7574bff4566e5e819b46ed0f6f7379d3b3L368' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56337722</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 11f5c89b3bfbc2e755cea5a9418432cf0abe4c7d</div><div id='time'> Time: 2022-08-12</div><div id='author'> Author: schustmi@users.noreply.github.com</div><div id='file'> File Name: src/zenml/pipelines/base_pipeline.py</div><div id='m_class'> M Class Name: BasePipeline</div><div id='n_method'> N Class Name: BasePipeline</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/pipelines/base_pipeline.py</div><div id='n_file'> N File Name: src/zenml/pipelines/base_pipeline.py</div><div id='m_start'> M Start Line: 444</div><div id='m_end'> M End Line: 446</div><div id='n_start'> N Start Line: 446</div><div id='n_end'> N End Line: 454</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self._iter = iter([{key: data[key].numpy() for key in data} for data in calib_dataloader])

    def get_next(self):
        <a id="change">return </a>next(self._iter, None)


class ORTQuantizer:</code></pre><h3>After Change</h3><pre><code class='java'>

    def get_next(self):
        featurized_samples = None
        <a id="change"></a>try:
            if self.batch_size == 1:
                featurized_samples = {key: [value] for key, value in next(self._dataset_iter).items()}
            else:
                featurized_samples<a id="change"> = </a>defaultdict(list)
                for _ in range(self.batch_size):
                    sample<a id="change"> = </a>next(self._dataset_iter)

                    for name, value in sample.items():
                        featurized_samples[name] += [value]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/optimum/commit/8a993de9245ee7cb76f4730d9e0a50f9e76eae3a#diff-3688cadccda29282df1b90910924f7a353b8e9cf4d2e50369484c95ee8e17172L64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56337694</div><div id='project'> Project Name: huggingface/optimum</div><div id='commit'> Commit Name: 8a993de9245ee7cb76f4730d9e0a50f9e76eae3a</div><div id='time'> Time: 2022-03-24</div><div id='author'> Author: mfuntowicz@users.noreply.github.com</div><div id='file'> File Name: optimum/onnxruntime/quantization.py</div><div id='m_class'> M Class Name: ORTCalibrationDataReader</div><div id='n_method'> N Class Name: ORTCalibrationDataReader</div><div id='m_method'> M Method Name: get_next(1)</div><div id='n_method'> N Method Name: get_next(1)</div><div id='m_parent_class'> M Parent Class: CalibrationDataReader</div><div id='n_parent_class'> N Parent Class: CalibrationDataReader</div><div id='m_file'> M File Name: optimum/onnxruntime/quantization.py</div><div id='n_file'> N File Name: optimum/onnxruntime/quantization.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            preprocessors=(self.target_pair_constructor, ),
            **ds_to_loader_kwargs)
        data_iter = repeat_chain_non_empty(dataloader)
        <a id="change">return </a>data_iter

    def learn(self, datasets, batches_per_epoch, n_epochs, *, callbacks=(),
              end_callbacks=(), log_dir, log_interval=100,</code></pre><h3>After Change</h3><pre><code class='java'>
            preprocessors=(self.target_pair_constructor, ),
            **ds_to_loader_kwargs)
        data_iter = None
        <a id="change">try:
            </a>while True:
                num_yielded<a id="change"> = </a>0
                data_iter<a id="change"> = </a>iter(dataloader)
                for batch in data_iter:
                    yield batch
                    num_yielded += 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/humancompatibleai/eirli/commit/92f90933f96ba67e35bb427f11850c4f1117ecfc#diff-da75b71a2421881ac87f16bdedbc66a6eee21a60650cb052fb123cfe1436b72fL279' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56337713</div><div id='project'> Project Name: humancompatibleai/eirli</div><div id='commit'> Commit Name: 92f90933f96ba67e35bb427f11850c4f1117ecfc</div><div id='time'> Time: 2022-03-22</div><div id='author'> Author: sam@qxcv.net</div><div id='file'> File Name: src/il_representations/algos/representation_learner.py</div><div id='m_class'> M Class Name: RepresentationLearner</div><div id='n_method'> N Class Name: RepresentationLearner</div><div id='m_method'> M Method Name: make_data_iter(4)</div><div id='n_method'> N Method Name: make_data_iter(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: src/il_representations/algos/representation_learner.py</div><div id='n_file'> N File Name: src/il_representations/algos/representation_learner.py</div><div id='m_start'> M Start Line: 281</div><div id='m_end'> M End Line: 289</div><div id='n_start'> N Start Line: 296</div><div id='n_end'> N End Line: 320</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

            return x

        <a id="change">return </a>jax.tree_map(init_fn, self)

    def tree_flatten(self):
        annotations = getattr(self.__class__, "__annotations__", {})</code></pre><h3>After Change</h3><pre><code class='java'>
        old_initializing = LOCAL.is_initializing
        LOCAL.is_initializing = True

        <a id="change">try:
            </a>module<a id="change"> = </a>jax.tree_map(init_fn, self)
        finally:
            LOCAL.is_initializing<a id="change"> = </a>old_initializing

        return module
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cgarciae/treex/commit/7ad3951ae9fe4bc5d0073386725c35012d1eabdf#diff-b8a15969887aa759fe004454b4ef4aa181282e31792cb8a9f2f88706e14910beL124' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56337718</div><div id='project'> Project Name: cgarciae/treex</div><div id='commit'> Commit Name: 7ad3951ae9fe4bc5d0073386725c35012d1eabdf</div><div id='time'> Time: 2021-08-19</div><div id='author'> Author: cgarcia.e88@gmail.com</div><div id='file'> File Name: treex/base.py</div><div id='m_class'> M Class Name: Module</div><div id='n_method'> N Class Name: Module</div><div id='m_method'> M Method Name: init(2)</div><div id='n_method'> N Method Name: init(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: treex/base.py</div><div id='n_file'> N File Name: treex/base.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 138</div><div id='n_start'> N Start Line: 154</div><div id='n_end'> N End Line: 162</div><BR>