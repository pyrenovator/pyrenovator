<html><h3>Pattern ID :9686
</h3><img src='34879820.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    result = check.run(mnist_dataset_train, mock_trained_mnist, device=device)
    assert_that(type(result.value[&quotscore&quot]), equal_to(float))
    assert_that(result.value[&quotscore&quot], close_to(0.993, 0.001))
    <a id="change">assert_that(</a>result.conditions_results[0].is_pass<a id="change">)</a>
    assert_that(result.conditions_results[1].is_pass, equal_to(False))

    &#47&#47 params that should raise a warning but still run
    check = SingleDatasetScalarPerformance(Accuracy(), torch.min)</code></pre><h3>After Change</h3><pre><code class='java'>
    result = check.run(mnist_dataset_train, mock_trained_mnist, device=device)
    assert_that(type(result.value[&quotscore&quot]), equal_to(float))
    assert_that(result.value[&quotscore&quot], close_to(0.993, 0.001))
    <a id="change">assert_that(</a>result.conditions_results, <a id="change">has_items(
        </a>equal_condition_result(is_pass=True,
                               details=&quotThe score Precision is 0.99&quot,
                               name=&quotScore is greater than 0.5&quot),
        <a id="change">equal_condition_result(is_pass=False,
                               details=&quotThe score Precision is 0.99&quot,
                               name=&quotScore is less or equal to 0.2&quot)</a><a id="change">)
    )</a>

    &#47&#47 params that should raise a warning but still run
    check = SingleDatasetScalarPerformance(Accuracy(), torch.min)
    with warnings.catch_warnings(record=True) as w:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/8b330001153469ac967c94c3f2bb84c1709fd0a5#diff-f57553c978b911bfc8b85c3a4c5fe5b7bf5097932ea3eef03ae38c6e1ca80b72L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34879820</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 8b330001153469ac967c94c3f2bb84c1709fd0a5</div><div id='time'> Time: 2022-06-12</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: tests/vision/checks/model_evaluation/single_dataset_scalar_performance_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_classification_w_params(3)</div><div id='n_method'> N Method Name: test_classification_w_params(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/checks/model_evaluation/single_dataset_scalar_performance_test.py</div><div id='n_file'> N File Name: tests/vision/checks/model_evaluation/single_dataset_scalar_performance_test.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        .run(coco_train_visiondata, coco_test_visiondata, device=device)
    )

    <a id="change">assert_that(</a>result, all_of(
        is_correct_image_property_drift_result(),
        contains_failed_condition()
    )<a id="change">)</a>


def contains_failed_condition():
    condition_assertion = has_properties({</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    assert_that(result, is_correct_image_property_drift_result())
    <a id="change">assert_that(</a>result.conditions_results, <a id="change">has_items(
        equal_condition_result(is_pass=False,
                               details=&quotEarth Mover\&quots Distance is above the threshold for the next properties:\n&quot
                                       &quotAspect Ratio=0.07;\nBrightness=0.07;\nMean Green Relative Intensity=0.06&quot,
                               name=&quotEarth Mover\&quots Distance &lt; 0.06 for image properties drift&quot)</a><a id="change">)
    )</a>


def is_correct_image_property_drift_result():
    value_assertion = all_of(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/8b330001153469ac967c94c3f2bb84c1709fd0a5#diff-ff3740a66353dc617cb25061aa978d00a6c9f8770b5af879b2bcc91cb57d76faL88' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34879818</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 8b330001153469ac967c94c3f2bb84c1709fd0a5</div><div id='time'> Time: 2022-06-12</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_image_property_drift_fail_condition(3)</div><div id='n_method'> N Method Name: test_image_property_drift_fail_condition(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='n_file'> N File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_start'> M Start Line: 89</div><div id='m_end'> M End Line: 98</div><div id='n_start'> N Start Line: 90</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        .run(coco_train_visiondata, coco_test_visiondata, device=device)
    )

    <a id="change">assert_that(</a>result, all_of(
        is_correct_image_property_drift_result(),
        contains_passed_condition()
    )<a id="change">)</a>


def test_image_property_drift_fail_condition(coco_train_visiondata, coco_test_visiondata, device):
    result = (</code></pre><h3>After Change</h3><pre><code class='java'>
    )

    assert_that(result, is_correct_image_property_drift_result())
    <a id="change">assert_that(</a>result.conditions_results, <a id="change">has_items(
        equal_condition_result(is_pass=True,
                               details=&quotFound property Brightness with largest Earth Mover\&quots Distance score 0.07&quot,
                               name=&quotEarth Mover\&quots Distance &lt; 0.1 for image properties drift&quot)</a><a id="change">)
    )</a>


def test_image_property_drift_fail_condition(coco_train_visiondata, coco_test_visiondata, device):
    result = (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/8b330001153469ac967c94c3f2bb84c1709fd0a5#diff-ff3740a66353dc617cb25061aa978d00a6c9f8770b5af879b2bcc91cb57d76faL75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34879819</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 8b330001153469ac967c94c3f2bb84c1709fd0a5</div><div id='time'> Time: 2022-06-12</div><div id='author'> Author: matan@deepchecks.com</div><div id='file'> File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_image_property_drift_condition(3)</div><div id='n_method'> N Method Name: test_image_property_drift_condition(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='n_file'> N File Name: tests/vision/checks/train_test_validation/image_property_drift_test.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 86</div><BR>