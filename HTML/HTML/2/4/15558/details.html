<html><h3>Pattern ID :15558
</h3><img src='52600098.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, output_type="numpy")["sample"]</a>

        image_slice = image[0, -3:, -3:, -1]

        assert image.shape == (1, 32, 32, 3)</code></pre><h3>After Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, output_type="numpy")</a>.images

        image_slice = image[0, -3:, -3:, -1]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 8</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L655' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600098</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_ddpm_cifar10(1)</div><div id='n_method'> N Method Name: test_ddpm_cifar10(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 655</div><div id='m_end'> M End Line: 655</div><div id='n_start'> N Start Line: 770</div><div id='n_end'> N End Line: 770</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ddim.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        ddpm_images = <a id="change">ddpm(batch_size=4, generator=generator, output_type="numpy")["sample"]</a>

        generator = torch.manual_seed(0)
        ddim_images = ddim(batch_size=4, generator=generator, num_inference_steps=1000, eta=1.0, output_type="numpy")[
            "sample"</code></pre><h3>After Change</h3><pre><code class='java'>
        ddim.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        ddpm_images = <a id="change">ddpm(batch_size=4, generator=generator, output_type="numpy")</a>.images

        generator = torch.manual_seed(0)
        ddim_images = ddim(batch_size=4, generator=generator, num_inference_steps=1000, eta=1.0, output_type="numpy")[</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L869' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600099</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_ddpm_ddim_equality_batched(1)</div><div id='n_method'> N Method Name: test_ddpm_ddim_equality_batched(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 885</div><div id='m_end'> M End Line: 885</div><div id='n_start'> N Start Line: 1000</div><div id='n_end'> N End Line: 1000</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    scheduler = DDPMScheduler(num_train_timesteps=10)

    ddpm = DDPMPipeline(model, scheduler).to(torch_device)
    <a id="change">ddpm(output_type="numpy")["sample"]</a>
    captured = capsys.readouterr()
    assert "10/10" in captured.err, "Progress bar has to be displayed"

    ddpm.set_progress_bar_config(disable=True)</code></pre><h3>After Change</h3><pre><code class='java'>
    scheduler = DDPMScheduler(num_train_timesteps=10)

    ddpm = DDPMPipeline(model, scheduler).to(torch_device)
    <a id="change">ddpm(output_type="numpy")</a>.images
    captured = capsys.readouterr()
    assert "10/10" in captured.err, "Progress bar has to be displayed"
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L57' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600096</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_progress_bar(1)</div><div id='n_method'> N Method Name: test_progress_bar(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 70</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, num_inference_steps=2, output_type="numpy")["sample"]</a>

        image_slice = image[0, -3:, -3:, -1]

        assert image.shape == (1, 32, 32, 3)</code></pre><h3>After Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, num_inference_steps=2, output_type="numpy")</a>.images

        generator = torch.manual_seed(0)
        image_from_tuple = ddpm(generator=generator, num_inference_steps=2, output_type="numpy", return_dict=False)[0]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L190' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600097</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineFastTests</div><div id='n_method'> N Class Name: PipelineFastTests</div><div id='m_method'> M Method Name: test_ddim(1)</div><div id='n_method'> N Method Name: test_ddim(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 199</div><div id='n_start'> N Start Line: 199</div><div id='n_end'> N End Line: 212</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        generator = torch.manual_seed(0)

        image = <a id="change">ddpm(generator=generator, output_type="numpy")["sample"]</a>
        generator = generator.manual_seed(0)
        new_image = ddpm_from_hub(generator=generator, output_type="numpy")["sample"]

        assert np.abs(image - new_image).sum() &lt; 1e-5, "Models don&quott give the same forward pass"</code></pre><h3>After Change</h3><pre><code class='java'>

        generator = torch.manual_seed(0)

        image = <a id="change">ddpm(generator=generator, output_type="numpy")</a>.images
        generator = generator.manual_seed(0)
        new_image = ddpm_from_hub(generator=generator, output_type="numpy").images
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L575' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600100</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_from_pretrained_hub(1)</div><div id='n_method'> N Method Name: test_from_pretrained_hub(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 589</div><div id='m_end'> M End Line: 591</div><div id='n_start'> N Start Line: 704</div><div id='n_end'> N End Line: 706</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ddim.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        ddpm_image = <a id="change">ddpm(generator=generator, output_type="numpy")["sample"]</a>

        generator = torch.manual_seed(0)
        ddim_image = ddim(generator=generator, num_inference_steps=1000, eta=1.0, output_type="numpy")["sample"]
</code></pre><h3>After Change</h3><pre><code class='java'>
        ddim.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        ddpm_image = <a id="change">ddpm(generator=generator, output_type="numpy")</a>.images

        generator = torch.manual_seed(0)
        ddim_image = ddim(generator=generator, num_inference_steps=1000, eta=1.0, output_type="numpy").images</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L845' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600094</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_ddpm_ddim_equality(1)</div><div id='n_method'> N Method Name: test_ddpm_ddim_equality(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 860</div><div id='m_end'> M End Line: 863</div><div id='n_start'> N Start Line: 975</div><div id='n_end'> N End Line: 978</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, output_type="numpy")["sample"]</a>

        image_slice = image[0, -3:, -3:, -1]

        assert image.shape == (1, 256, 256, 3)</code></pre><h3>After Change</h3><pre><code class='java'>
        ddpm.set_progress_bar_config(disable=None)

        generator = torch.manual_seed(0)
        image = <a id="change">ddpm(generator=generator, output_type="numpy")</a>.images

        image_slice = image[0, -3:, -3:, -1]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L664' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600095</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_ddim_lsun(1)</div><div id='n_method'> N Method Name: test_ddim_lsun(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 675</div><div id='m_end'> M End Line: 675</div><div id='n_start'> N Start Line: 790</div><div id='n_end'> N End Line: 790</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        generator = torch.manual_seed(0)

        image = <a id="change">ddpm(generator=generator, output_type="numpy")["sample"]</a>
        generator = generator.manual_seed(0)
        new_image = new_ddpm(generator=generator, output_type="numpy")["sample"]

        assert np.abs(image - new_image).sum() &lt; 1e-5, "Models don&quott give the same forward pass"</code></pre><h3>After Change</h3><pre><code class='java'>

        generator = torch.manual_seed(0)

        image = <a id="change">ddpm(generator=generator, output_type="numpy")</a>.images
        generator = generator.manual_seed(0)
        new_image = new_ddpm(generator=generator, output_type="numpy").images
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/cc59b05635fb9f4affc6b984c4585372aa32efa8#diff-5053985009d18dfbd4317f5bd7ee7e7dcd7957ec0f934a5f9e24dc073b20df36L544' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52600093</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: cc59b05635fb9f4affc6b984c4585372aa32efa8</div><div id='time'> Time: 2022-09-05</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_pipelines.py</div><div id='m_class'> M Class Name: PipelineTesterMixin</div><div id='n_method'> N Class Name: PipelineTesterMixin</div><div id='m_method'> M Method Name: test_from_pretrained_save_pretrained(1)</div><div id='n_method'> N Method Name: test_from_pretrained_save_pretrained(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_pipelines.py</div><div id='n_file'> N File Name: tests/test_pipelines.py</div><div id='m_start'> M Start Line: 568</div><div id='m_end'> M End Line: 570</div><div id='n_start'> N Start Line: 683</div><div id='n_end'> N End Line: 685</div><BR>