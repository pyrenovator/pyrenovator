<html><h3>Pattern ID :41681
</h3><img src='116966873.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        rv = pd.DataFrame(data=data)

        &#47&#47 Re-order columns
        columns = list(TRIPLES_DF_COLUMNS) + <a id="change">sorted(</a>set(rv.columns).difference(TRIPLES_DF_COLUMNS)<a id="change">)</a>
        return rv.loc[:, columns]

    def new_with_restriction(
        self,</code></pre><h3>After Change</h3><pre><code class='java'>
            )

        &#47&#47 Re-order columns
        columns = list(TRIPLES_DF_COLUMNS) + <a id="change">old_col[3:]</a>
        return data.loc[:, columns]

    def new_with_restriction(
        self,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/a2f9ee81f1899e695483c69983cc8159524cbe01#diff-2dce01c3c0b4127bdab5850a84b545299b150d156c01aad24589fa76762c6c72L661' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116966873</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: a2f9ee81f1899e695483c69983cc8159524cbe01</div><div id='time'> Time: 2021-01-21</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: src/pykeen/triples/triples_factory.py</div><div id='m_class'> M Class Name: TriplesFactory</div><div id='n_method'> N Class Name: TriplesFactory</div><div id='m_method'> M Method Name: tensor_to_df(2)</div><div id='n_method'> N Method Name: tensor_to_df(2)</div><div id='m_parent_class'> M Parent Class: CoreTriplesFactory</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/pykeen/triples/triples_factory.py</div><div id='n_file'> N File Name: src/pykeen/triples/triples_factory.py</div><div id='m_start'> M Start Line: 661</div><div id='m_end'> M End Line: 693</div><div id='n_start'> N Start Line: 941</div><div id='n_end'> N End Line: 958</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def main() -&gt; int:
    exclude: List[str] = []
    current_dir = os.path.dirname(os.path.abspath(__file__))
    files = <a id="change">sorted(</a>map(lambda x: x.relative_to(current_dir), Path.cwd().rglob(&quot*.py&quot))<a id="change">)</a>
    files = list(filter(lambda x: not any([str(Path(ele)) in str(x) for ele in exclude]), files))

    return_codes = Parallel(n_jobs=os.cpu_count())(delayed(run_mypy)(file) for file in files)
    if all(v == 0 for v in return_codes):</code></pre><h3>After Change</h3><pre><code class='java'>
    Runs mypy on the files in the argument list, or every *.py file under the current directory if there are none.
    
    current_dir = Path.cwd()
    if <a id="change">sys.argv[1:]</a>:
        file_list = [Path(arg) for arg in sys.argv[1:]]
    else:
        &#47&#47 We don&quott want to check the files in the submodule if any, partly because they should already have</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/innereye-deeplearning/commit/1136e23352ac8b4e93705b96bdac9f08120f8399#diff-344abec58e93ca8213cf166ae9214a8c5e073b5fd2e8e6811a95832c1011e646L18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116966874</div><div id='project'> Project Name: microsoft/innereye-deeplearning</div><div id='commit'> Commit Name: 1136e23352ac8b4e93705b96bdac9f08120f8399</div><div id='time'> Time: 2020-08-14</div><div id='author'> Author: dacart@microsoft.com</div><div id='file'> File Name: mypy_runner.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: mypy_runner.py</div><div id='n_file'> N File Name: mypy_runner.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    posescores = []
    for i in range(len(poses)):
        posescores.append(poses[i].confidence)
    sorted_idx = <a id="change">sorted(</a>range(len(posescores))<a id="change">, key=lambda k: posescores[k])</a>
    for i in range(2):
        selected_poses.append(poses[sorted_idx[i]])

    &quot&quot&quotselected_poses = []</code></pre><h3>After Change</h3><pre><code class='java'>
        s = poses[i].data[:, 0].std() + poses[i].data[:, 1].std()
        energy.append(s)
    energy = np.array(energy)
    index = <a id="change">energy.argsort()[::-1][0:2]</a>
    selected_poses.append(poses[index])
    return selected_poses

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendr-eu/opendr/commit/0e75b1b24edd48326a8dc83a21d64f380b78b28e#diff-2770fa1a48059a841c57d3802775cf69c519fd8d327501c5d8aca9a3708ad8ceL190' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116966875</div><div id='project'> Project Name: opendr-eu/opendr</div><div id='commit'> Commit Name: 0e75b1b24edd48326a8dc83a21d64f380b78b28e</div><div id='time'> Time: 2021-10-02</div><div id='author'> Author: negar.heidari@eng.au.dk</div><div id='file'> File Name: projects/perception/skeleton_based_action_recognition/demos/skeleton_extraction.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: select_2_poses(1)</div><div id='n_method'> N Method Name: select_2_poses(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: projects/perception/skeleton_based_action_recognition/demos/skeleton_extraction.py</div><div id='n_file'> N File Name: projects/perception/skeleton_based_action_recognition/demos/skeleton_extraction.py</div><div id='m_start'> M Start Line: 192</div><div id='m_end'> M End Line: 199</div><div id='n_start'> N Start Line: 192</div><div id='n_end'> N End Line: 198</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        inst_events.extend(note_ons+note_offs)
    if len(inst_events) &lt; 64:
        return
    time, pitch, vel, prog = zip(*<a id="change">sorted(</a>inst_events<a id="change">)</a>)
    delta = torch.FloatTensor([0, *time]).diff(1)
    torch.save(dict(
        time=delta, </code></pre><h3>After Change</h3><pre><code class='java'>
            
        &#47&#47 shorten all notes so they end 2*$margin before next (within pitch)
        for seq in nbp.values():
            for i,n in enumerate(<a id="change">seq[:-1]</a>):
                max_end = seq[i+1].start-2*time_margin
                if n.end &gt; max_end:
                    n.end = max_end</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/intelligent-instruments-lab/iil-python-tools/commit/78c2ab9e98adc304bebc8cff2541364d27d91dab#diff-8af53289ffb9f0e2a971a5b93eff5e24e5fe8ee26ecbc05887330392031aa724L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116966879</div><div id='project'> Project Name: intelligent-instruments-lab/iil-python-tools</div><div id='commit'> Commit Name: 78c2ab9e98adc304bebc8cff2541364d27d91dab</div><div id='time'> Time: 2022-04-15</div><div id='author'> Author: victor.shepardson@gmail.com</div><div id='file'> File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: process(1)</div><div id='n_method'> N Method Name: process(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='n_file'> N File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return stat_info_dict

    def get_text(self):
        unit_num_keys_list = <a id="change">sorted(</a>self._stat_info_record.keys()<a id="change">)</a>
        headers = [&quottype&quot] + [f&quotf{frac_id}_s{side_id}&quot for (frac_id, side_id) in unit_num_keys_list ]
        table_data = []
        game_count_line_data = [&quotgame_count&quot] + [str(int(self._stat_info_record[k][&quotbarracks_lv1&quot].count)) for k in unit_num_keys_list ]
        table_data.append(game_count_line_data)</code></pre><h3>After Change</h3><pre><code class='java'>
        return stat_info_dict

    def get_text(self):
        headers = [<a id="change">item[:5]</a> for item in self.data_keys] + [&quotgame_count&quot]
        table_data = []
        line_data = [f"{self.stat_info_record[k].val:.3f}" for k in self.data_keys] + \
                    [self.stat_info_record[&quotgame_count&quot]]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/opendilab/di-star/commit/7643d10dd2537a0e8226d0ef1e5862cdc44f0bb7#diff-b1210acfe625b32237e761cbd5fcb0bf7758c7fd121f038475059b5dbf53e3ccL78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116966868</div><div id='project'> Project Name: opendilab/di-star</div><div id='commit'> Commit Name: 7643d10dd2537a0e8226d0ef1e5862cdc44f0bb7</div><div id='time'> Time: 2022-08-10</div><div id='author'> Author: zhangshenghan@sensetime.com</div><div id='file'> File Name: distar/ctools/worker/league/unit_num_stat.py</div><div id='m_class'> M Class Name: UnitNumStat</div><div id='n_method'> N Class Name: UnitNumStat</div><div id='m_method'> M Method Name: get_text(1)</div><div id='n_method'> N Method Name: get_text(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: distar/ctools/worker/league/unit_num_stat.py</div><div id='n_file'> N File Name: distar/ctools/worker/league/unit_num_stat.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 128</div><div id='n_end'> N End Line: 134</div><BR>