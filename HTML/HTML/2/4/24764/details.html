<html><h3>Pattern ID :24764
</h3><img src='76621917.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    analysis_opencell.reset_umap()
    opencell_datamgr_vanilla.const_dataset(label_format=&quotindex&quot)
    opencell_datamgr_vanilla.const_dataloader()
    group_annotation = np.tile(<a id="change">np.arange(3).reshape(-1</a>, <a id="change">1</a><a id="change">)</a>, (1, 2)).astype(object)
    group_annotation[:2, 1] = &quotgp0&quot
    group_annotation[2:, 1] = &quotgp1&quot
    with assert_not_raises():</code></pre><h3>After Change</h3><pre><code class='java'>
            show_legend=True,
        )
    assert exists(_file_name)
    <a id="change">assert </a>exists(join(join(analysis_opencell.trainer.savepath_dict[&quotembeddings&quot], &quotembeddings_for_umap.npy&quot)))
    assert output.shape == (len(opencell_datamgr_vanilla.test_loader.dataset.label), 2)
    os.remove(_file_name)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/royerlab/cytoself/commit/fdc5c3f9d381e9a5d2ec581c1006e403ff86b365#diff-c1d49dc86512762fa684b6922d8ebc26a916b52a79b49a4aa62ca2f1ac3864f3L102' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76621917</div><div id='project'> Project Name: royerlab/cytoself</div><div id='commit'> Commit Name: fdc5c3f9d381e9a5d2ec581c1006e403ff86b365</div><div id='time'> Time: 2022-08-18</div><div id='author'> Author: liamiiliil@gmail.com</div><div id='file'> File Name: cytoself/analysis/test/test_analysis_opencell.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_plot_umap_of_embedding_vector_dataloader(3)</div><div id='n_method'> N Method Name: test_plot_umap_of_embedding_vector_dataloader(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: cytoself/analysis/test/test_analysis_opencell.py</div><div id='n_file'> N File Name: cytoself/analysis/test/test_analysis_opencell.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert channels == self.config.C

        &#47&#47 Treat repetitions as additional channels at this point
        x = <a id="change">x.reshape(</a>batch_size, <a id="change">1</a>, channels * repetitions, <a id="change">1</a><a id="change">)</a>

        &#47&#47 Apply C sum node outputs
        x = self.root(x)
</code></pre><h3>After Change</h3><pre><code class='java'>
        x = x.squeeze(1).squeeze(1)

        &#47&#47 Final shape check
        <a id="change">assert </a>x.shape == (batch_size, self.config.num_classes)

        return x
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/braun-steven/simple-einet/commit/6c0a0ca7de9dfbed9f4b0eebd0e015cf76002c2b#diff-b07179cedca4d239e2586e9cb6fff9e541bc16eec55c28d6d2537cfebff90289L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76621922</div><div id='project'> Project Name: braun-steven/simple-einet</div><div id='commit'> Commit Name: 6c0a0ca7de9dfbed9f4b0eebd0e015cf76002c2b</div><div id='time'> Time: 2022-01-05</div><div id='author'> Author: steven.lang.mz@gmail.com</div><div id='file'> File Name: simple_einet/einet.py</div><div id='m_class'> M Class Name: Einet</div><div id='n_method'> N Class Name: Einet</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: simple_einet/einet.py</div><div id='n_file'> N File Name: simple_einet/einet.py</div><div id='m_start'> M Start Line: 131</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 145</div><div id='n_end'> N End Line: 157</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert channels == self.config.C

        &#47&#47 Treat repetitions as additional channels at this point
        x = <a id="change">x.reshape(</a>batch_size, <a id="change">1</a>, channels * repetitions, <a id="change">1</a><a id="change">)</a>

        &#47&#47 Apply C sum node outputs
        x = self.root(x)
</code></pre><h3>After Change</h3><pre><code class='java'>
        if x.dim() == 4:  &#47&#47 [N, C, H, W]
            x = x.view(x.shape[0], self.config.num_channels, -1)

        <a id="change">assert </a>x.dim() == 3
        assert x.shape[1] == self.config.num_channels

        &#47&#47 Apply leaf distributions (replace marginalization indicators with 0.0 first)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/braun-steven/simple-einet/commit/e657fc668bd0f87f5e622a8b2549cd9e8ade437a#diff-b07179cedca4d239e2586e9cb6fff9e541bc16eec55c28d6d2537cfebff90289L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76621919</div><div id='project'> Project Name: braun-steven/simple-einet</div><div id='commit'> Commit Name: e657fc668bd0f87f5e622a8b2549cd9e8ade437a</div><div id='time'> Time: 2022-01-11</div><div id='author'> Author: steven.lang.mz@gmail.com</div><div id='file'> File Name: simple_einet/einet.py</div><div id='m_class'> M Class Name: Einet</div><div id='n_method'> N Class Name: Einet</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: simple_einet/einet.py</div><div id='n_file'> N File Name: simple_einet/einet.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 145</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 150</div><BR>