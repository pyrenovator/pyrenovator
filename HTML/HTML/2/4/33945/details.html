<html><h3>Pattern ID :33945
</h3><img src='97226843.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            
            For each time step in each bar, filter notes such that only the note with highest pitch remains
            
            <a id="change">ic(</a>self.bars[list(self.bars.keys())[0]].number<a id="change">)</a>
            for pnm, bar in self.bars.items():
                notes = sorted(bar.notes, key=lambda n: n.offset)
                if notes:
                    &#47&#47 ic(list(notes[0].pitches))</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47 ic(list(bar))
                &#47&#47 bar.remove(list(notes))
                &#47&#47 ic(list(bar), notes_)
                <a id="change">if </a>notes:
                    ic(list(bar))
                    &#47&#47 bar.show()
                    for note in notes:
                        ic([p.octave for p in note.pitches])
                        &#47&#47 ic(note.pitch.octave)
                        if isinstance(note, m21.chord.Chord):
                            bar.replace(note, chord2note(note))
                    <a id="change">ic(</a><a id="change">list(</a>bar<a id="change">))</a>
                    for note in bar.notes:
                        ic(note.pitch.octave)

                    exit(1)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/stefanheng/symbolic-music-generation/commit/35befeca2a5d6dc5c110916c2501aa41d0feed73#diff-9bddc1ec410935c3b7e65a0e53b587a68e1dda58d8f63e4abcaf788573ad9f27L182' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97226843</div><div id='project'> Project Name: stefanheng/symbolic-music-generation</div><div id='commit'> Commit Name: 35befeca2a5d6dc5c110916c2501aa41d0feed73</div><div id='time'> Time: 2021-11-24</div><div id='author'> Author: 43276957+SpongeBobBang@users.noreply.github.com</div><div id='file'> File Name: melody_extractor.py</div><div id='m_class'> M Class Name: VerticalBar</div><div id='n_method'> N Class Name: VerticalBar</div><div id='m_method'> M Method Name: single(1)</div><div id='n_method'> N Method Name: single(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: melody_extractor.py</div><div id='n_file'> N File Name: melody_extractor.py</div><div id='m_start'> M Start Line: 182</div><div id='m_end'> M End Line: 184</div><div id='n_start'> N Start Line: 188</div><div id='n_end'> N End Line: 232</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    &#47&#47 ic(self.enc, len(self.enc))
                    ic(id_, idxs)
                    for elm in bar:
                        <a id="change">ic(</a>elm, elm.offset, elm.duration<a id="change">)</a>
                for idx in idxs:
                    self.enc[idx].id = id_
            assert all(s.set for s in self.enc)  &#47&#47 Each slot has an id set
            &#47&#47 ic(self.enc)</code></pre><h3>After Change</h3><pre><code class='java'>
            for e in it_bar_elm(bar):
                strt, dur = e.offset, e.duration.quarterLength
                num = n_slots_per_beat*dur + 1
                <a id="change">if </a>bar.number == 73:
                    <a id="change">ic(</a><a id="change">list(</a>bar<a id="change">))</a>
                assert num.is_integer()
                idxs_ = (np.linspace(strt, strt+dur, num=int(num)) * n_slots_per_beat)[:-1]
                idxs = idxs_.astype(int)
                assert np.all(idxs_-idxs == 0)  &#47&#47 Should be integers</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stefanheng/symbolic-music-generation/commit/8d126cbf838b183b5e5d3de6015f90ece225b964#diff-9bddc1ec410935c3b7e65a0e53b587a68e1dda58d8f63e4abcaf788573ad9f27L419' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97226825</div><div id='project'> Project Name: stefanheng/symbolic-music-generation</div><div id='commit'> Commit Name: 8d126cbf838b183b5e5d3de6015f90ece225b964</div><div id='time'> Time: 2021-12-19</div><div id='author'> Author: 43276957+SpongeBobBang@users.noreply.github.com</div><div id='file'> File Name: melody_extractor.py</div><div id='m_class'> M Class Name: BarEnc</div><div id='n_method'> N Class Name: BarEnc</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: melody_extractor.py</div><div id='n_file'> N File Name: melody_extractor.py</div><div id='m_start'> M Start Line: 422</div><div id='m_end'> M End Line: 447</div><div id='n_start'> N Start Line: 424</div><div id='n_end'> N End Line: 439</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                part.replace(bar, vb[pnm_])

        part.partName = f&quot{PROJ_NM}, CH &#47&#471&quot
        <a id="change">ic(</a>list(part.measure(0))<a id="change">)</a>
        &#47&#47 for bar in part[m21.stream.Measure]:
        &#47&#47     tempos = bar[m21.tempo.MetronomeMark]
        &#47&#47     if tempos:
        &#47&#47         &#47&#47 ic(list(tempos))</code></pre><h3>After Change</h3><pre><code class='java'>

        for bar in part[m21.stream.Measure]:
            tempos = bar[m21.tempo.MetronomeMark]
            <a id="change">if </a>tempos:
                &#47&#47 ic(list(tempos))
                <a id="change">ic(</a>bar.number, <a id="change">list(</a>bar<a id="change">))</a>
        part.show()

        if exp == &quotsymbol&quot:
            &#47&#47 Per `music21`, duration is represented in terms of quarter notes</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stefanheng/symbolic-music-generation/commit/be47796a10a3faa674a55ad35f24eed9d6d9fb97#diff-9bddc1ec410935c3b7e65a0e53b587a68e1dda58d8f63e4abcaf788573ad9f27L334' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97226828</div><div id='project'> Project Name: stefanheng/symbolic-music-generation</div><div id='commit'> Commit Name: be47796a10a3faa674a55ad35f24eed9d6d9fb97</div><div id='time'> Time: 2021-11-25</div><div id='author'> Author: 43276957+SpongeBobBang@users.noreply.github.com</div><div id='file'> File Name: melody_extractor.py</div><div id='m_class'> M Class Name: MxlMelodyExtractor</div><div id='n_method'> N Class Name: MxlMelodyExtractor</div><div id='m_method'> M Method Name: bar_with_max_pitch(2)</div><div id='n_method'> N Method Name: bar_with_max_pitch(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: melody_extractor.py</div><div id='n_file'> N File Name: melody_extractor.py</div><div id='m_start'> M Start Line: 379</div><div id='m_end'> M End Line: 379</div><div id='n_start'> N Start Line: 322</div><div id='n_end'> N End Line: 363</div><BR>