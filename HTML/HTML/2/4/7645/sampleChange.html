<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def image_size(cls, datastream):
        datastream = reseekfile.ReseekFile(datastream)
        image = Image.open(datastream)
        <a id="change">return </a>image.size
</code></pre><h3>After Change</h3><pre><code class='java'>
        size = file.headers.get("content-length")
        if size: 
            size = int(size)
        p<a id="change"> = </a>ImageFile.Parser()
        <a id="change">while </a>True<a id="change">:
            </a>data = file.read(1024)
            if not data:
                break
            <a id="change">p.feed(</a>data<a id="change">)</a>
            if p.image:
                return p.image.size
                break
        file.close()</code></pre>