<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        metric += sklearn_metrics.mean_squared_error(y_true_los, y_pred_los)
    elif metrics_strategy == "MAPE":
        metric += sklearn_metrics.mean_absolute_percentage_error(y_true_los, y_pred_los)
    metric<a id="change"> += </a>np.mean(
        <a id="change">np.abs(</a>y_true_outcome - y_pred_outcome<a id="change">)</a>
        * max_visits
        * np.array(list(map(lambda x: sigma_func(x), y_true_los)))
    )
    if verbose:</code></pre><h3>After Change</h3><pre><code class='java'>
    metric = []
    num_records = len(y_pred_outcome)
    for i in range(num_records):
        cur_outcome_pred<a id="change"> = </a><a id="change">y_pred_outcome[i]</a>
        cur_los_pred = y_pred_los[i]
        cur_gt = y_true[i, :]
        cur_outcome_true = cur_gt[0]
        cur_los_true = cur_gt[1]</code></pre>