<html><h3>Pattern ID :21661
</h3><img src='69081647.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 transcription = gt[n][&quottext&quot]
            dontCare = gt[n][&quotignore&quot]

            if not <a id="change">Polygon(</a>points<a id="change">)</a>.is_valid or not Polygon(points).is_simple:
                continue

            gtPol = points</code></pre><h3>After Change</h3><pre><code class='java'>
            dontCare = gt[n][&quotignore&quot]

            &#47&#47 if not Polygon(points).is_valid or not Polygon(points).is_simple:
            if not <a id="change">Polygon(points).buffer(0</a><a id="change">)</a>.is_valid or \
                    not Polygon(points).buffer(0).is_simple:
                continue
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huyhoang17/db_text_minimal/commit/b10f6da1476ae9e05a6f6a41a8838fb448645f50#diff-591e5953443b99e7dde8cf86f73797f5c88879a158bb6e4cb2119085a2e3696bL88' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69081647</div><div id='project'> Project Name: huyhoang17/db_text_minimal</div><div id='commit'> Commit Name: b10f6da1476ae9e05a6f6a41a8838fb448645f50</div><div id='time'> Time: 2020-06-11</div><div id='author'> Author: hoangphan0710@gmail.com</div><div id='file'> File Name: src/iou.py</div><div id='m_class'> M Class Name: DetectionIoUEvaluator</div><div id='n_method'> N Class Name: DetectionIoUEvaluator</div><div id='m_method'> M Method Name: evaluate_image(3)</div><div id='n_method'> N Method Name: evaluate_image(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: src/iou.py</div><div id='n_file'> N File Name: src/iou.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 93</div><div id='n_end'> N End Line: 112</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            poly = np.array(ann[&quotpoly&quot])
            height = max(poly[:, 1]) - min(poly[:, 1])
            width = max(poly[:, 0]) - min(poly[:, 0])
            polygon = <a id="change">Polygon(</a>poly<a id="change">)</a>

            &#47&#47 generate gt and mask
            if polygon.area &lt; 1 or min(
                    height, width) &lt; self.min_text_size or ann[&quottext&quot] == &quot&#47&#47&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
            poly = np.array(ann[&quotpoly&quot])
            height = max(poly[:, 1]) - min(poly[:, 1])
            width = max(poly[:, 0]) - min(poly[:, 0])
            polygon = <a id="change">Polygon(poly).buffer(0</a><a id="change">)</a>

            &#47&#47 generate gt and mask
            if polygon.area &lt; 1 or not polygon.is_valid or min(
                    height, width) &lt; self.min_text_size or ann[&quottext&quot] == &quot&#47&#47&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huyhoang17/db_text_minimal/commit/0ad79f53f5dba41097d5efb9a091646a3ea17f42#diff-4f64d3cf185856bf97e6aafaf27a45ebbd069972dc408794aeecdde63faaf1fdL103' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69081656</div><div id='project'> Project Name: huyhoang17/db_text_minimal</div><div id='commit'> Commit Name: 0ad79f53f5dba41097d5efb9a091646a3ea17f42</div><div id='time'> Time: 2020-06-08</div><div id='author'> Author: hoangphan0710@gmail.com</div><div id='file'> File Name: src/data_loaders.py</div><div id='m_class'> M Class Name: TotalTextDatasetIter</div><div id='n_method'> N Class Name: TotalTextDatasetIter</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: src/data_loaders.py</div><div id='n_file'> N File Name: src/data_loaders.py</div><div id='m_start'> M Start Line: 105</div><div id='m_end'> M End Line: 183</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 205</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for n in range(len(pred)):
            points = pred[n][&quotpoints&quot]

            if not Polygon(points).is_valid or not <a id="change">Polygon(</a>points<a id="change">)</a>.is_simple:
                continue

            detRect = points</code></pre><h3>After Change</h3><pre><code class='java'>

            &#47&#47 if not Polygon(points).is_valid or not Polygon(points).is_simple:
            if not Polygon(points).buffer(0).is_valid or \
                    not <a id="change">Polygon(points).buffer(0</a><a id="change">)</a>.is_simple:
                continue

            detRect = points</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huyhoang17/db_text_minimal/commit/b10f6da1476ae9e05a6f6a41a8838fb448645f50#diff-fa39e75a7b0e2aee8b87adcf6c3d96c52f9ff27caa977b9baa04ba1a790fcf79L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69081654</div><div id='project'> Project Name: huyhoang17/db_text_minimal</div><div id='commit'> Commit Name: b10f6da1476ae9e05a6f6a41a8838fb448645f50</div><div id='time'> Time: 2020-06-11</div><div id='author'> Author: hoangphan0710@gmail.com</div><div id='file'> File Name: src/deteval.py</div><div id='m_class'> M Class Name: DetectionDetEvalEvaluator</div><div id='n_method'> N Class Name: DetectionDetEvalEvaluator</div><div id='m_method'> M Method Name: evaluate_image(3)</div><div id='n_method'> N Method Name: evaluate_image(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: src/deteval.py</div><div id='n_file'> N File Name: src/deteval.py</div><div id='m_start'> M Start Line: 143</div><div id='m_end'> M End Line: 158</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 162</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        img, anns = db_transforms.resize(self.image_size, img, anns)

        anns = [ann for ann in anns if <a id="change">Polygon(</a>ann[&quotpoly&quot]<a id="change">)</a>.is_valid]
        gt = np.zeros((self.image_size, self.image_size),
                      dtype=np.float32)  &#47&#47 batch_gts
        mask = np.ones((self.image_size, self.image_size), dtype=np.float32)</code></pre><h3>After Change</h3><pre><code class='java'>

        img, anns = db_transforms.resize(self.image_size, img, anns)

        anns = [ann for ann in anns if <a id="change">Polygon(ann[&quotpoly&quot]).buffer(0</a><a id="change">)</a>.is_valid]
        gt = np.zeros((self.image_size, self.image_size),
                      dtype=np.float32)  &#47&#47 batch_gts
        mask = np.ones((self.image_size, self.image_size), dtype=np.float32)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huyhoang17/db_text_minimal/commit/7a6bcf012797030c1a6d405f33437f3de7ca557f#diff-4f64d3cf185856bf97e6aafaf27a45ebbd069972dc408794aeecdde63faaf1fdL96' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69081648</div><div id='project'> Project Name: huyhoang17/db_text_minimal</div><div id='commit'> Commit Name: 7a6bcf012797030c1a6d405f33437f3de7ca557f</div><div id='time'> Time: 2020-06-02</div><div id='author'> Author: hoangphan0710@gmail.com</div><div id='file'> File Name: src/data_loaders.py</div><div id='m_class'> M Class Name: TotalTextDatasetIter</div><div id='n_method'> N Class Name: TotalTextDatasetIter</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: src/data_loaders.py</div><div id='n_file'> N File Name: src/data_loaders.py</div><div id='m_start'> M Start Line: 113</div><div id='m_end'> M End Line: 113</div><div id='n_start'> N Start Line: 113</div><div id='n_end'> N End Line: 113</div><BR>