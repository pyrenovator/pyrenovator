<html><h3>Pattern ID :20220
</h3><img src='65916079.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    elif args.opt.lower() == &quotadadelta&quot:
        optimizer = optim.Adadelta(
            parameters, lr=args.lr, weight_decay=weight_decay, eps=args.opt_eps)
    elif <a id="change">args.opt.lower()</a> == &quotrmsprop&quot:
        optimizer = optim.RMSprop(
            parameters, lr=args.lr, alpha=0.9, eps=args.opt_eps,
            momentum=args.momentum, weight_decay=weight_decay)</code></pre><h3>After Change</h3><pre><code class='java'>
    else:
        parameters = model.parameters()

    opt_split = <a id="change">opt_lower.split(&quot_&quot</a><a id="change">)</a>
    opt_lower<a id="change"> = </a>opt_split[-1]
    if opt_lower == &quotsgd&quot:
        optimizer = optim.SGD(
            parameters, lr=args.lr,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/feng-lab/pytorch-image-models/commit/fac58f609a9a96ef1b273e7b7ab8380ba3743f54#diff-27961ee816d5f8e3ea9840ed8bfbf5e9836163a0368d14fb8c1ca2f58369a05fL21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65916079</div><div id='project'> Project Name: feng-lab/pytorch-image-models</div><div id='commit'> Commit Name: fac58f609a9a96ef1b273e7b7ab8380ba3743f54</div><div id='time'> Time: 2019-08-28</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/optim/optim_factory.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: create_optimizer(3)</div><div id='n_method'> N Method Name: create_optimizer(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: timm/optim/optim_factory.py</div><div id='n_file'> N File Name: timm/optim/optim_factory.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 72</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            f"task {task} unsupported for export_transformer_to_onnx. Supported "
            f"tasks include {list(_TASK_TO_CONSTRUCTOR.keys())}"
        )
    auto_model_constructor = _TASK_TO_CONSTRUCTOR[<a id="change">task.lower()</a>]

    if not os.path.isdir(model_path):
        raise ValueError(</code></pre><h3>After Change</h3><pre><code class='java'>
        pipeline, it will look only for &quotmodel.onnx&quot
    :return: path to the exported ONNX file
    
    task<a id="change"> = </a>"-".join(<a id="change">task.lower().split("_"</a><a id="change">)</a>)
    if task not in _TASK_TO_CONSTRUCTOR:
        raise ValueError(
            f"task {task} unsupported for export_transformer_to_onnx. Supported "</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralmagic/sparseml/commit/9fdc4c4cf0bdd4b9cb34e8c7ca7f065f492b5c4f#diff-d3d8274c434e2beb4229ea279576d0e7a7731b703ba045211f91b6c02dd0d026L101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65916089</div><div id='project'> Project Name: neuralmagic/sparseml</div><div id='commit'> Commit Name: 9fdc4c4cf0bdd4b9cb34e8c7ca7f065f492b5c4f</div><div id='time'> Time: 2022-01-19</div><div id='author'> Author: bfineran@users.noreply.github.com</div><div id='file'> File Name: src/sparseml/transformers/utils/export.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: export_transformer_to_onnx(6)</div><div id='n_method'> N Method Name: export_transformer_to_onnx(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/sparseml/transformers/utils/export.py</div><div id='n_file'> N File Name: src/sparseml/transformers/utils/export.py</div><div id='m_start'> M Start Line: 126</div><div id='m_end'> M End Line: 131</div><div id='n_start'> N Start Line: 126</div><div id='n_end'> N End Line: 132</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @staticmethod
    def parse_name(name: str, pretrained_dataset: str = &quotm&quot, layer: int = 50, width_factor: int = 1) -&gt; str:
        name_list = <a id="change">name.lower()</a>.split(&quot-&quot)
        assert name_list[0] == &quotbit&quot
        if len(name_list) != 1:
            for element in name_list[1:]:</code></pre><h3>After Change</h3><pre><code class='java'>
    @staticmethod
    def parse_name(name: str, pretrained_dataset: str = &quotm&quot, layer: int = 50, width_factor: int = 1) -&gt; str:
        full_name_list = name.split(&quot_&quot)
        name_list<a id="change"> = </a><a id="change">full_name_list[0].lower().split(&quot-&quot</a><a id="change">)</a>
        assert name_list[0] == &quotbit&quot, name
        if len(name_list) != 1:
            for element in name_list[1:]:
                if element[0] == &quotr&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/96331dcace5be2d405ccb32ac4b2ca5c7d028e0a#diff-3f8e13546f522657c26e2ee7fa0a44d9136fcb4f75ac17958562051cbf6cc3efL53' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65916091</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 96331dcace5be2d405ccb32ac4b2ca5c7d028e0a</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/normal/bit.py</div><div id='m_class'> M Class Name: BiT</div><div id='n_method'> N Class Name: BiT</div><div id='m_method'> M Method Name: parse_name(4)</div><div id='n_method'> N Method Name: parse_name(4)</div><div id='m_parent_class'> M Parent Class: ImageModel</div><div id='n_parent_class'> N Parent Class: ImageModel</div><div id='m_file'> M File Name: trojanvision/models/normal/bit.py</div><div id='n_file'> N File Name: trojanvision/models/normal/bit.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 71</div><div id='n_end'> N End Line: 85</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        shared_axes.pop(-1 if K.image_data_format() == "channels_last" else 0)
        &#47&#47 print(f"{shared_axes = }")
        return keras.layers.PReLU(shared_axes=shared_axes, alpha_initializer=tf.initializers.Constant(0.25), name=layer_name)(inputs)
    elif <a id="change">activation.lower()</a>.startswith("gelu/app"):
        &#47&#47 gelu/approximate
        return tf.nn.gelu(inputs, approximate=True, name=layer_name)
    elif activation.lower() == ("hard_sigmoid_torch"):</code></pre><h3>After Change</h3><pre><code class='java'>
        return tf.nn.gelu(inputs, approximate=True, name=layer_name)
    elif activation_lower.startswith("leaky_relu/"):
        &#47&#47 leaky_relu with alpha parameter
        alpha<a id="change"> = </a>float(<a id="change">activation_lower.split("/"</a><a id="change">)</a>[-1])
        return keras.layers.LeakyReLU(alpha=alpha, name=layer_name)(inputs)
    elif activation_lower == ("hard_sigmoid_torch"):
        return keras.layers.Activation(activation=hard_sigmoid_torch, name=layer_name)(inputs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/ae27e8ad47d9c5c31e35bb9ffe6d0cce6454e7e2#diff-346aa59a353ab2958ad8559a1c05a8fc850eaead58fd103d6bcb5a5130b699ceL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65916084</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: ae27e8ad47d9c5c31e35bb9ffe6d0cce6454e7e2</div><div id='time'> Time: 2022-12-01</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: keras_cv_attention_models/common_layers.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: activation_by_name(3)</div><div id='n_method'> N Method Name: activation_by_name(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: keras_cv_attention_models/common_layers.py</div><div id='n_file'> N File Name: keras_cv_attention_models/common_layers.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 54</div><div id='n_end'> N End Line: 78</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def get_model_class(name: str) -&gt; str:
    name: str = re.findall(r&quot[A-Za-z]+&quot, name)[0]
    return <a id="change">name.lower()</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
def get_model_class(name: str) -&gt; str:
    model_name: str = re.findall(r&quot[A-Za-z]+&quot, name)[0]
    if model_name[-1].lower() == &quotv&quot:
        model_name<a id="change"> = </a><a id="change">name.split(&quot_&quot</a><a id="change">)</a>[0]
    return model_name.lower()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/7fba343f026aa348ad26244c0b7717292fc8833f#diff-ff750559bfe41165aa7519db53ee38e93b58382848dad1ed2a5e7a9d6752c5c8L77' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 65916086</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 7fba343f026aa348ad26244c0b7717292fc8833f</div><div id='time'> Time: 2021-04-03</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_model_class(1)</div><div id='n_method'> N Method Name: get_model_class(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: trojanvision/models/__init__.py</div><div id='n_file'> N File Name: trojanvision/models/__init__.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 83</div><BR>