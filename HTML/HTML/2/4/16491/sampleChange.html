<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 在data的英文数据长度上遍历下标
        for i in range(len(data.dev_en)):
            &#47&#47 TODO: 打印待翻译的英文句子
            en_sent<a id="change"> = </a><a id="change">" ".join(</a>[data.en_index_dict[w] for w in data.dev_en[i]]<a id="change">)</a>
            print("\n" + en_sent)

            &#47&#47 TODO: 打印对应的中文句子答案</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47 设置attention mask
                src_mask = (src != 0).unsqueeze(-2)
                &#47&#47 用训练好的模型进行decode预测
                decode_result<a id="change"> = </a><a id="change">greedy_decode(model, src, src_mask,
                                              max_len=config.max_len).squeeze()</a>.tolist()
                &#47&#47 模型翻译结果解码
                translation = sp_chn.decode_ids(decode_result)
                trg.append(cn_sent[i])</code></pre>