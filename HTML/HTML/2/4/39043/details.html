<html><h3>Pattern ID :39043
</h3><img src='111193472.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    forecast = m.predict(future)
    fig1 = m.plot(forecast, plotting_backend="plotly")

    <a id="change">if </a>PLOT:
        fig1.show()
</code></pre><h3>After Change</h3><pre><code class='java'>

    m.highlight_nth_step_ahead_of_each_forecast(m.n_forecasts)
    future = m.make_future_dataframe(df, periods=30, n_historic_predictions=100)
    forecast<a id="change"> = </a><a id="change">m.predict(</a>future<a id="change">)</a>
    fig3<a id="change"> = </a>m.plot(forecast, plotting_backend="plotly")
    fig4 = m.plot_components(forecast, plotting_backend="plotly")

    if PLOT:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/f7e09e428690cd39ffd71c90c57a66f7b1c2b648#diff-b8aa68d38b59341f74e2277bc6fde44b917d597363ebfd7bf613743d7098a7caL368' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111193472</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: f7e09e428690cd39ffd71c90c57a66f7b1c2b648</div><div id='time'> Time: 2022-10-18</div><div id='author'> Author: 76744817+LeonieFreisinger@users.noreply.github.com</div><div id='file'> File Name: tests/test_plotting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_plotly_uncertainty(0)</div><div id='n_method'> N Method Name: test_plotly_uncertainty(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_plotting.py</div><div id='n_file'> N File Name: tests/test_plotting.py</div><div id='m_start'> M Start Line: 376</div><div id='m_end'> M End Line: 377</div><div id='n_start'> N Start Line: 368</div><div id='n_end'> N End Line: 392</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Save extracted embeddings
    filename = f"{evaluation_dir}{weights}_embeddings/bbbc021_embeddings"
    <a id="change">if </a>concat and norm:
        filename += f" ({weights}, concat, norm)"
    elif concat:
        filename += f" ({weights}, concat)"</code></pre><h3>After Change</h3><pre><code class='java'>
            yield get_image(x[1])
    ds_test = tf.data.Dataset.from_generator(test_generator, output_types=(tf.float32)).prefetch(buffer_size=tf.data.experimental.AUTOTUNE)

    accum_activations<a id="change"> = </a><a id="change">model.predict(</a>ds_test<a id="change">, batch_size=1, use_multiprocessing=True, workers=32)</a>
    if concat:  &#47&#47 concatenate 3 consecutive 1028-dim feature vectors for 1 image
        proc_activations = []
        for i in range(3, len(accum_activations)+1, 3):
            proc_activations.append(accum_activations[i-3:i].flatten())
        activations = pd.DataFrame(proc_activations)
    else:
        activations<a id="change"> = </a>pd.DataFrame(accum_activations)

    &#47&#47 Save extracted embeddings
    weights_str = check_weights_str(weights)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stan-hua/cytoimagenet/commit/58d66c4cc6eed607192ce85534d29f8f8ca9fee4#diff-202824684bac175f9853e38480cec450ea0e7f2d7d85a167cfb0a2f593213726L126' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111193457</div><div id='project'> Project Name: stan-hua/cytoimagenet</div><div id='commit'> Commit Name: 58d66c4cc6eed607192ce85534d29f8f8ca9fee4</div><div id='time'> Time: 2021-08-23</div><div id='author'> Author: stanley.hua@mail.utoronto.ca</div><div id='file'> File Name: scripts/model_evaluation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: extract_embeddings(4)</div><div id='n_method'> N Method Name: extract_embeddings(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/model_evaluation.py</div><div id='n_file'> N File Name: scripts/model_evaluation.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 176</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            metric = metric_cls()
            calculated_metrics[metric.name] = metric.calculate(y_true, y_pred)

        <a id="change">if </a>criterion:
            total_loss = total_loss / total

        return (calculated_metrics, y_true, y_pred, y_pred_probs, total_loss)</code></pre><h3>After Change</h3><pre><code class='java'>
                inputs = inputs.to(self.device)
                labels = labels.to(self.device)

                outputs<a id="change"> = </a><a id="change">self.predict(</a>inputs<a id="change">)</a>

                &#47&#47 check if outputs is OrderedDict for segmentation
                if isinstance(outputs, collections.Mapping):
                    outputs = outputs["out"]

                if criterion:
                    batch_loss<a id="change"> = </a>criterion(outputs, labels)
                    total_loss += batch_loss.item()*inputs.size(0)

                predicted_probs, predicted = self.get_predicted(outputs)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/biasvariancelabs/aitlas/commit/30b9944f7086274457283b8aeedc50d88e000e54#diff-8c90d9e0305520faf5687b35e4d44d83709cb7e5160a7973610665e9a7133487L169' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111193451</div><div id='project'> Project Name: biasvariancelabs/aitlas</div><div id='commit'> Commit Name: 30b9944f7086274457283b8aeedc50d88e000e54</div><div id='time'> Time: 2020-10-29</div><div id='author'> Author: ivica.dimitrovski@gmail.com</div><div id='file'> File Name: aitlas/base/models.py</div><div id='m_class'> M Class Name: BaseModel</div><div id='n_method'> N Class Name: BaseModel</div><div id='m_method'> M Method Name: evaluate_model(4)</div><div id='n_method'> N Method Name: evaluate_model(4)</div><div id='m_parent_class'> M Parent Class: nn.Module,Configurable</div><div id='n_parent_class'> N Parent Class: nn.Module,Configurable</div><div id='m_file'> M File Name: aitlas/base/models.py</div><div id='n_file'> N File Name: aitlas/base/models.py</div><div id='m_start'> M Start Line: 179</div><div id='m_end'> M End Line: 217</div><div id='n_start'> N Start Line: 176</div><div id='n_end'> N End Line: 225</div><BR>