<html><h3>Pattern ID :20864
</h3><img src='67235232.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 now find all the track filepaths
            track_filepaths = glob.glob(os.path.join(mix_dir, f"{mix_id}_RAW", "*.wav"))

            <a id="change">if len(track_filepaths) &gt; self.max_num_tracks</a>:
                <a id="change">continue</a>

            &#47&#47 check length of each track
            tracks = []
            for tidx, track_filepath in enumerate(track_filepaths):</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 load files into RAM
        while nbytes_loaded &lt; self.buffer_size_gb * 1e9:
            for mix_dir in <a id="change">tqdm(</a>self.mix_dirs<a id="change">)</a>:
                mix_id = os.path.basename(mix_dir)
                mix_filepath = glob.glob(os.path.join(mix_dir, "*.wav"))[0]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/csteinmetz1/automix-toolkit/commit/0fcdce4c33e652710e5c0682499c65bab52b991b#diff-3b5493e29457d0c2fa425a9c7a85b846becf17818150651f5682153839469d49L58' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67235232</div><div id='project'> Project Name: csteinmetz1/automix-toolkit</div><div id='commit'> Commit Name: 0fcdce4c33e652710e5c0682499c65bab52b991b</div><div id='time'> Time: 2022-11-28</div><div id='author'> Author: csteinmetz1@gmail.com</div><div id='file'> File Name: automix/data/medleydb.py</div><div id='m_class'> M Class Name: MedleyDBDataset</div><div id='n_method'> N Class Name: MedleyDBDataset</div><div id='m_method'> M Method Name: reload_buffer(1)</div><div id='n_method'> N Method Name: reload_buffer(1)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: automix/data/medleydb.py</div><div id='n_file'> N File Name: automix/data/medleydb.py</div><div id='m_start'> M Start Line: 58</div><div id='m_end'> M End Line: 108</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 148</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def get_pair_similarity(self):
        self.pair_similarity_dict = dict()
        for mode in self.dvector_list_dict.keys():
            <a id="change">if mode == &quotpair&quot</a>:
                <a id="change">continue</a>
            self.pair_similarity_dict[mode] = self.compute_pair_similarity(self.dvector_list_dict[mode])


    def compute_pair_similarity(self, check_list):</code></pre><h3>After Change</h3><pre><code class='java'>
                    np.save(f&quotnpy/{self.corpus}/{mode}_pair_sim.npy&quot,
                            self.pair_similarity_dict[mode], allow_pickle=True)

        for mode, steps in <a id="change">tqdm(</a>self.mode_step_list<a id="change">, desc=&quotmode&quot)</a>:
            for step in tqdm(steps, leave=False):
                print(f&quotGetting pair similarity of mode: {mode}, step: {step}&quot)
                if os.path.exists(f&quotnpy/{self.corpus}/{mode}_step{step}_pair_sim.npy&quot):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sungfeng-huang/meta-tts/commit/6a1ce9c424e209d80dcbe2301acc41919ccbc7ac#diff-f3f0a41febfcf97cacb01d9ecec0e1766198d7d44d9fe444e854fb995ba3dde5L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67235225</div><div id='project'> Project Name: sungfeng-huang/meta-tts</div><div id='commit'> Commit Name: 6a1ce9c424e209d80dcbe2301acc41919ccbc7ac</div><div id='time'> Time: 2022-02-17</div><div id='author'> Author: f06942045@ntu.edu.tw</div><div id='file'> File Name: evaluation/pair_similarity.py</div><div id='m_class'> M Class Name: PairSimilarity</div><div id='n_method'> N Class Name: PairSimilarity</div><div id='m_method'> M Method Name: get_pair_similarity(1)</div><div id='n_method'> N Method Name: get_pair_similarity(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: evaluation/pair_similarity.py</div><div id='n_file'> N File Name: evaluation/pair_similarity.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 40</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        g.parent.mkdir(parents=True, exist_ok=True)

        tempos = {m.tempo for tr in mid.tracks for m in tr if m.type==&quotset_tempo&quot}
        <a id="change">if len(tempos)!=1</a>:
            <a id="change">continue</a>
        micros_per_beat = tuple(tempos)[0]

        s_per_tick = micros_per_beat / mid.ticks_per_beat / 1e6
</code></pre><h3>After Change</h3><pre><code class='java'>

    with Pool(n_jobs) as pool:
        &#47&#47 p.imap_unordered(ft.partial(process, data_path, dest_path), tqdm(files), 32)
        for _ in <a id="change">tqdm(</a>pool.imap_unordered(process, zip(files, files_out), 32)<a id="change">)</a>:
            pass
       
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/intelligent-instruments-lab/iil-python-tools/commit/dbb5cf68b2b6902addf71a598302850beb1473cf#diff-9d738772070de4df243e741743f664299e8ce7ef188e1d5d6f035c83cce242d9L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67235224</div><div id='project'> Project Name: intelligent-instruments-lab/iil-python-tools</div><div id='commit'> Commit Name: dbb5cf68b2b6902addf71a598302850beb1473cf</div><div id='time'> Time: 2022-02-21</div><div id='author'> Author: victor.shepardson@gmail.com</div><div id='file'> File Name: scripts/lakh_prep.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(3)</div><div id='n_method'> N Method Name: main(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/lakh_prep.py</div><div id='n_file'> N File Name: scripts/lakh_prep.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 56</div><BR>