<html><h3>Pattern ID :26283
</h3><img src='79041524.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.relation_embedding_dim = relation_dim

        &#47&#47 A simple lookup table that stores embeddings of a fixed dictionary and size
        self.relation_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.relation_embedding_dim<a id="change">, max_norm=1)</a>
        self.entity_projections = <a id="change">nn.Embedding(</a>self.num_entities, self.embedding_dim<a id="change">)</a>
        self.relation_projections = nn.Embedding(self.num_relations, self.relation_embedding_dim)

        &#47&#47 FIXME @mehdi what about initialization?
</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.relation_embedding_dim = relation_dim
        self.scoring_fct_norm = scoring_fct_norm</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-82633c5fd9cf81ceab6d43ef0e87ba785afe2843155b79255a06899ab2086e65L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041524</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/trans_d.py</div><div id='m_class'> M Class Name: TransD</div><div id='n_method'> N Class Name: TransD</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/trans_d.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/trans_d.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.entity_embeddings_real = self.entity_embeddings
        self.entity_embeddings_img = nn.Embedding(self.num_entities, self.embedding_dim)
        self.relation_embeddings_real = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim<a id="change">)</a>
        self.relation_embeddings_img = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim<a id="change">)</a>
        self.neg_label = neg_label
        self.regularization_factor = torch.nn.Parameter(torch.Tensor([regularization_factor]))
        self.current_regularization_term = None
</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str =GPU,
                 random_seed: Optional[int] = None,
                 ):
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)

        self.neg_label = neg_label</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-92e99140934adaf8a0cfc88988927738ff6a2fac5611bb50c47fa6b202a813aaL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041556</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/complex.py</div><div id='m_class'> M Class Name: ComplEx</div><div id='n_method'> N Class Name: ComplEx</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/complex.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/complex.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Embeddings
        self.scoring_fct_norm = scoring_fct_norm

        self.left_relation_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim * self.embedding_dim<a id="change">)</a>
        self.right_relation_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim * self.embedding_dim<a id="change">)</a>

        self._initialize()

    def _initialize(self):</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)

        &#47&#47 Embeddings</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-31693468ce8f4163ed07592e01cc06d9c5017a02d66852e7498e4f546281e68dL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041525</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='m_class'> M Class Name: StructuredEmbedding</div><div id='n_method'> N Class Name: StructuredEmbedding</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.embedding_dim = embedding_dim

        &#47&#47 TODO Why padding?
        self.entity_embeddings_real = <a id="change">nn.Embedding(</a>self.num_entities, self.embedding_dim<a id="change">, padding_idx=0)</a>
        self.entity_embeddings_img = nn.Embedding(self.num_entities, self.embedding_dim, padding_idx=0)
        self.relation_embeddings_real = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim<a id="change">, padding_idx=0)</a>
        self.relation_embeddings_img = nn.Embedding(self.num_relations, self.embedding_dim, padding_idx=0)

        self.init()
</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.inp_drop = torch.nn.Dropout(input_dropout)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-c5e869c6fe91fd3f2033b8ad2bfdc7371356b35ed7cf21b3e4bd0cafef8f9f73L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041522</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/complex_cwa.py</div><div id='m_class'> M Class Name: ComplexCWA</div><div id='n_method'> N Class Name: ComplexCWA</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: src/poem/models/unimodal/complex_cwa.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/complex_cwa.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 A simple lookup table that stores embeddings of a fixed dictionary and size
        self.relation_embeddings = nn.Embedding(self.num_relations, self.relation_embedding_dim, max_norm=1)
        self.entity_projections = <a id="change">nn.Embedding(</a>self.num_entities, self.embedding_dim<a id="change">)</a>
        self.relation_projections = <a id="change">nn.Embedding(</a>self.num_relations, self.relation_embedding_dim<a id="change">)</a>

        &#47&#47 FIXME @mehdi what about initialization?

        self.scoring_fct_norm = scoring_fct_norm</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.relation_embedding_dim = relation_dim
        self.scoring_fct_norm = scoring_fct_norm</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-82633c5fd9cf81ceab6d43ef0e87ba785afe2843155b79255a06899ab2086e65L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041523</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/trans_d.py</div><div id='m_class'> M Class Name: TransD</div><div id='n_method'> N Class Name: TransD</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/trans_d.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/trans_d.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super(TransH, self).__init__(num_entities, num_relations, criterion, embedding_dim, preferred_device)

        &#47&#47 A simple lookup table that stores embeddings of a fixed dictionary and size
        self.relation_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim<a id="change">)</a>
        self.normal_vector_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.embedding_dim<a id="change">)</a>
        self.weighting_soft_constraint = soft_weight_constraint

        self.epsilon = nn.Parameter(torch.tensor(0.005, requires_grad=True))
        self.scoring_fct_norm = scoring_fct_norm</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.weighting_soft_constraint = soft_weight_constraint
        self.epsilon = nn.Parameter(torch.tensor(0.005, requires_grad=True))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-87ab5712103752cf76a9c8485bb43be323153016708b4c745ea7187e0cba5410L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041555</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/trans_h.py</div><div id='m_class'> M Class Name: TransH</div><div id='n_method'> N Class Name: TransH</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/trans_h.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/trans_h.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 30</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.relation_embedding_dim = relation_dim

        &#47&#47 max_norm = 1 according to the paper
        self.relation_embeddings = <a id="change">nn.Embedding(</a>self.num_relations, self.relation_embedding_dim<a id="change">,
                                                norm_type=self.relation_embedding_norm_type,
                                                max_norm=self.relation_embedding_max_norm)</a>
        self.projection_matrix_embs = <a id="change">nn.Embedding(</a>self.num_relations, self.relation_embedding_dim * self.embedding_dim<a id="change">)</a>
        self.scoring_fct_norm = scoring_fct_norm

        self._initialize()
</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.relation_embedding_dim = relation_dim
        self.scoring_fct_norm = scoring_fct_norm</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-a10ab784ece2a2ce81f9cd64d1af60d76cb7765d79fc917fdae8aa447e1a2adfL46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79041533</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/trans_r.py</div><div id='m_class'> M Class Name: TransR</div><div id='n_method'> N Class Name: TransR</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/trans_r.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/trans_r.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 63</div><BR>