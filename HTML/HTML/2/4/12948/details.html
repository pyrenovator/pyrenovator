<html><h3>Pattern ID :12948
</h3><img src='43616985.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    )
    args_bs = deepcopy(args)
    args_bs.batch_size = 0
    <a id="change">with </a><a id="change">pytest.raises(ValueError):
        </a>_start_prediction_or_training(args_bs)
    args_out = deepcopy(args)
    args_out.out = existing_file
    with pytest.raises(FileExistsError):</code></pre><h3>After Change</h3><pre><code class='java'>
    _assert_exits(_start_prediction_or_training, args_confidence)

    args_confidence.confidence_threshold = 1.000001
    <a id="change">_assert_exits(</a>_start_prediction_or_training, args_confidence<a id="change">)</a>


def test_training_cmd_line_invocation():
    outdir = tempfile.mkdtemp(prefix=&quotdeepnog_test_&quot)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/81662c22ea9fe0ee79b7d159d52992c0f8172b58#diff-308a7a17f33cf1d97634f98515c227dba6ea2f74f1e56d93dbf89dba095b2113L128' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43616985</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: 81662c22ea9fe0ee79b7d159d52992c0f8172b58</div><div id='time'> Time: 2020-07-07</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/tests/test_cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_args_sanity_check(0)</div><div id='n_method'> N Method Name: test_args_sanity_check(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/tests/test_cli.py</div><div id='n_file'> N File Name: deepnog/tests/test_cli.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 134</div><div id='n_end'> N End Line: 158</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_set_device():
    device = &quottpu&quot
    msg = f&quotUnknown device "{device}". Try "auto".&quot
    <a id="change">with </a><a id="change">pytest.raises(ValueError, match=msg):
        </a>set_device(device)


def test_auto_device():</code></pre><h3>After Change</h3><pre><code class='java'>
def test_set_device(caplog):
    device = &quottpu&quot
    with caplog.at_level(logging.ERROR):
        <a id="change">_assert_exits(</a>set_device, device<a id="change">)</a>
    &#47&#47 FIXME. Currently only the exit status is tested, not the message.
    &#47&#47 msg = f&quotUnknown device "{device}". Try "auto".&quot
    &#47&#47 assert msg in caplog.text
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/03d49fd0c85b4c20a78b9052a5c6d34abf40839a#diff-350e9de3e56fe4a170ceba8043ce75a6b90574c0072dd838b61c75569faf106fL19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43616989</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: 03d49fd0c85b4c20a78b9052a5c6d34abf40839a</div><div id='time'> Time: 2020-08-11</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/utils/tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_set_device(1)</div><div id='n_method'> N Method Name: test_set_device(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/utils/tests/test_utils.py</div><div id='n_file'> N File Name: deepnog/utils/tests/test_utils.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 34</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_gpu_device_unavailable():
    device = &quotgpu&quot
    msg = &quotcould not access any CUDA-enabled GPU&quot
    <a id="change">with </a><a id="change">pytest.raises(RuntimeError, match=msg):
        </a>set_device(device)


@pytest.mark.xfail(reason=("BUG: pytest logging capture does not work. "</code></pre><h3>After Change</h3><pre><code class='java'>
def test_gpu_device_unavailable(caplog):
    device = &quotgpu&quot
    with caplog.at_level(logging.ERROR):
        <a id="change">_assert_exits(</a>set_device, device<a id="change">)</a>
    &#47&#47 FIXME. Currently only the exit status is tested, not the message.
    &#47&#47 msg = &quotcould not access any CUDA-enabled GPU&quot
    &#47&#47 assert msg in caplog.text
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/univiecube/deepnog/commit/03d49fd0c85b4c20a78b9052a5c6d34abf40839a#diff-350e9de3e56fe4a170ceba8043ce75a6b90574c0072dd838b61c75569faf106fL44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 43616980</div><div id='project'> Project Name: univiecube/deepnog</div><div id='commit'> Commit Name: 03d49fd0c85b4c20a78b9052a5c6d34abf40839a</div><div id='time'> Time: 2020-08-11</div><div id='author'> Author: sci@feldbauer.org</div><div id='file'> File Name: deepnog/utils/tests/test_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_gpu_device_unavailable(1)</div><div id='n_method'> N Method Name: test_gpu_device_unavailable(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepnog/utils/tests/test_utils.py</div><div id='n_file'> N File Name: deepnog/utils/tests/test_utils.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 61</div><BR>