<html><h3>Pattern ID :13305
</h3><img src='45086959.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
import torch

def mytanh(x):
    a = <a id="change">x.exp()</a>
    tanh = (a - 1<a id="change">/</a>a)<a id="change"> / </a>(a + 1/a)
    tanh = (1 + tanh) / 2
    return tanh
</code></pre><h3>After Change</h3><pre><code class='java'>

def mytanh(var_in):
    customized tanh activation, output range: (0, 1)
    var_tanh = <a id="change">torch.tanh(</a>var_in<a id="change">)</a>
    var_out = (1 + var_tanh) / 2
    return var_out

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/novartis/scar/commit/d6e8b732665bd1eebb17cb162f84ec03be655765#diff-d26ee6e3d5d829dda3ba465cf2dd51cc43e8b9e2b8f95dbf8b3682eb57ec60deL6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45086959</div><div id='project'> Project Name: novartis/scar</div><div id='commit'> Commit Name: d6e8b732665bd1eebb17cb162f84ec03be655765</div><div id='time'> Time: 2022-04-27</div><div id='author'> Author: 43896555+CaibinSh@users.noreply.github.com</div><div id='file'> File Name: scar/main/_activation_functions.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mytanh(1)</div><div id='n_method'> N Method Name: mytanh(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scar/main/_activation_functions.py</div><div id='n_file'> N File Name: scar/main/_activation_functions.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 9</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 12</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self):
        super().__init__()
    def execute(self, x) :
        return ((jt.exp (x)<a id="change"> - </a><a id="change">jt.exp(</a>-x<a id="change">)</a>)<a id="change"> / </a>(jt.exp(x) + jt.exp (-x)))

class Sigmoid(Module):
    def __init__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self):
        super().__init__()
    def execute(self, x) :
        return <a id="change">x.tanh()</a>

class Sigmoid(Module):
    def __init__(self):
        super().__init__()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/5b7e057f6c62cf2438c448cb2b465b9ef3db5f22#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L369' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45086974</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 5b7e057f6c62cf2438c448cb2b465b9ef3db5f22</div><div id='time'> Time: 2020-04-16</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: Tanh</div><div id='n_method'> N Class Name: Tanh</div><div id='m_method'> M Method Name: execute(2)</div><div id='n_method'> N Method Name: execute(2)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 370</div><div id='m_end'> M End Line: 370</div><div id='n_start'> N Start Line: 370</div><div id='n_end'> N End Line: 370</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self):
        super().__init__()
    def execute(self, x) :
        return ((jt.exp (x)<a id="change"> - </a><a id="change">jt.exp(</a>-x<a id="change">)</a>)<a id="change"> / </a>(jt.exp(x) + jt.exp (-x)))

class Sigmoid(Module):
    def __init__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self):
        super().__init__()
    def execute(self, x) :
        return <a id="change">x.tanh()</a>

class Sigmoid(Module):
    def __init__(self):
        super().__init__()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/7136b48a707fbe6b3ff04f7fec394167a27944a2#diff-6be45073120e073e8b70d1326cf824cd933530478c88feb0997a32f723da35f1L369' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45087021</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 7136b48a707fbe6b3ff04f7fec394167a27944a2</div><div id='time'> Time: 2020-07-23</div><div id='author'> Author: 51511617+Exusial@users.noreply.github.com</div><div id='file'> File Name: python/jittor/nn.py</div><div id='m_class'> M Class Name: Tanh</div><div id='n_method'> N Class Name: Tanh</div><div id='m_method'> M Method Name: execute(2)</div><div id='n_method'> N Method Name: execute(2)</div><div id='m_parent_class'> M Parent Class: Module</div><div id='n_parent_class'> N Parent Class: Module</div><div id='m_file'> M File Name: python/jittor/nn.py</div><div id='n_file'> N File Name: python/jittor/nn.py</div><div id='m_start'> M Start Line: 370</div><div id='m_end'> M End Line: 370</div><div id='n_start'> N Start Line: 553</div><div id='n_end'> N End Line: 553</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 run through model
        s = self.s_net(mu if y is None else torch.cat([y, mu], dim=-1))
        t = self.t_net(mu if y is None else torch.cat([y, mu], dim=-1))
        x = mu<a id="change"> + </a>(1 - self.mask) * (u<a id="change"> * s.exp() + </a>t)  &#47&#47 cf RealNVP eq 7

        log_abs_det_jacobian = (1 - self.mask) * s  &#47&#47 log det dx/du
</code></pre><h3>After Change</h3><pre><code class='java'>
        s = self.s_net(mu if y is None else torch.cat([y, mu], dim=-1))
        t = self.t_net(mu if y is None else torch.cat([y, mu], dim=-1)) * (1 - self.mask)

        log_s = <a id="change">torch.tanh(</a>s<a id="change">)</a> * (1 - self.mask)
        x = u * torch.exp(log_s) + t
        &#47&#47x = mu + (1 - self.mask) * (u * s.exp() + t)  &#47&#47 cf RealNVP eq 7
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zalandoresearch/pytorch-ts/commit/f09153cf5a694e4cf3a7a6471d842b7377557039#diff-66bc9dd41ca17a37e0f700803b344cf802661c34e2a8eb32233df25148d84c76L173' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45087019</div><div id='project'> Project Name: zalandoresearch/pytorch-ts</div><div id='commit'> Commit Name: f09153cf5a694e4cf3a7a6471d842b7377557039</div><div id='time'> Time: 2020-01-21</div><div id='author'> Author: kashif.rasul@gmail.com</div><div id='file'> File Name: pts/modules/flows.py</div><div id='m_class'> M Class Name: LinearMaskedCoupling</div><div id='n_method'> N Class Name: LinearMaskedCoupling</div><div id='m_method'> M Method Name: inverse(3)</div><div id='n_method'> N Method Name: inverse(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: pts/modules/flows.py</div><div id='n_file'> N File Name: pts/modules/flows.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 182</div><div id='n_start'> N Start Line: 182</div><div id='n_end'> N End Line: 190</div><BR>