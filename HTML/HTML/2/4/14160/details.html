<html><h3>Pattern ID :14160
</h3><img src='47211513.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def attempt_download(weights):
    if not <a id="change">Path(</a>weights<a id="change">)</a>.exists():
        &#47&#47 Attempt to download pretrained weights if not found locally
        weights = str(weights).strip().replace("&quot", &quot&quot)
        file = Path(weights).name.lower()</code></pre><h3>After Change</h3><pre><code class='java'>
            tag = response[&quottag_name&quot]  &#47&#47 i.e. &quotv1.0&quot
        except:  &#47&#47 fallback plan
            assets = [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, &quotyolov5l.pt&quot, &quotyolov5x.pt&quot]
            tag = <a id="change">subprocess.check_output(&quotgit tag&quot, shell=True).decode().split()[-1]</a>

        name = file.name
        if name in assets:
            msg = f&quot{file} missing, try downloading from https://github.com/{repo}/releases/&quot</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fcakyon/yolov5-pip/commit/97db72f1868649781b23837f9fe96d450f5f0610#diff-31e3c7f15ad28b1ff8c6b7d806c05261a1c6571b9df52c105000e6b88fc272afL19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47211513</div><div id='project'> Project Name: fcakyon/yolov5-pip</div><div id='commit'> Commit Name: 97db72f1868649781b23837f9fe96d450f5f0610</div><div id='time'> Time: 2021-04-14</div><div id='author'> Author: 34196005+fcakyon@users.noreply.github.com</div><div id='file'> File Name: yolov5/utils/google_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: attempt_download(2)</div><div id='n_method'> N Method Name: attempt_download(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: yolov5/utils/google_utils.py</div><div id='n_file'> N File Name: yolov5/utils/google_utils.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    filename = url.split("/")[-1]
    checkpoint_path = Path(checkpoint_folder) / filename
    with TemporaryDirectory() as extract_path:
        extract_path = <a id="change">Path(</a>extract_path<a id="change">)</a>
        extract_archive(str(checkpoint_path), extract_path)
        encoder, decoder = load_quartznet_weights(
            extract_path / "model_config.yaml", extract_path / "model_weights.ckpt"
        )</code></pre><h3>After Change</h3><pre><code class='java'>
            download_folder=checkpoint_folder,
            resume=True,
        )
    filename = <a id="change">url.split("/")[-1]</a>

    return load_from_nemo(checkpoint_path)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/ad4863cba30a4d14090144ceaaa23010345af00a#diff-e5484c714b138ba786856286f7597080b147e7e10261cd3a134f024e067812eeL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47211514</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: ad4863cba30a4d14090144ceaaa23010345af00a</div><div id='time'> Time: 2021-02-23</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: src/thunder/quartznet/model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_quartznet(2)</div><div id='n_method'> N Method Name: get_quartznet(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/thunder/quartznet/model.py</div><div id='n_file'> N File Name: src/thunder/quartznet/model.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 139</div><div id='n_end'> N End Line: 153</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            os.remove(downloaded_file.name)
            raise Exception(f"Unknown file type {_suffix(url)}.")
        &#47&#47 avoid the case the compressed file is a folder with the same name
        _folder = <a id="change">Path(</a>url<a id="change">)</a>.name.replace(_suffix(url), "")
        if _folder in os.listdir(dst_dir):
            tmp_folder = str(dst_dir).rstrip(os.sep) + "_tmp"
            os.rename(dst_dir, tmp_folder)</code></pre><h3>After Change</h3><pre><code class='java'>
        extract = False
    &#47&#47 for example "https://www.dropbox.com/s/xxx/test%3F.zip??dl=1"
    &#47&#47 produces pure_url = "https://www.dropbox.com/s/xxx/test?.zip"
    pure_url = urllib.parse.unquote(<a id="change">url.split("?")[0]</a>)
    parent_dir = Path(dst_dir).parent
    downloaded_file = tempfile.NamedTemporaryFile(
        dir=parent_dir, suffix=_suffix(pure_url), delete=False</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/aecfc89e750a6f219fd6489de8355bc3a59ecd3d#diff-28a1f80e1354910d6da9a4e3b43aa0e18a51b96c3f6f149e028ae80556173c82L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47211516</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: aecfc89e750a6f219fd6489de8355bc3a59ecd3d</div><div id='time'> Time: 2022-06-08</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: torch_ecg/utils/download.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: http_get(4)</div><div id='n_method'> N Method Name: http_get(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_ecg/utils/download.py</div><div id='n_file'> N File Name: torch_ecg/utils/download.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 95</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 99</div><BR>