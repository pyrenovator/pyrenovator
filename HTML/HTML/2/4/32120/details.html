<html><h3>Pattern ID :32120
</h3><img src='94071771.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 test action probability for given (obs, action) pair
    env = model.get_env()
    obs = <a id="change">env.reset()</a>
    observations = np.array([obs for _ in range(10)])
    observations = np.squeeze(observations)

    &#47&#47actions = np.array([env.action_space.sample() for _ in range(10)])</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 shared items
    new_params = model.get_policy_parameters()
    shared_items = {k: params[k] for k in params if <a id="change">k in new_params and torch.all(torch.eq(params[k], new_params[k]))</a>}
    &#47&#47 Check that at least some actions are chosen different now
    assert not len(shared_items) == len(new_params), "Selected actions did not change " \
                                                     "after changing model parameters."</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/4b6234a1c84384aa3a5c3be377006b1a4f749cb2#diff-f5690fd26a7ac571eb0e8d97f4e145c62c1ff8c6eb6e5b116553c0e307adb1c4L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94071771</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 4b6234a1c84384aa3a5c3be377006b1a4f749cb2</div><div id='time'> Time: 2019-11-21</div><div id='author'> Author: Noah.Dormann@dlr.de</div><div id='file'> File Name: tests/test_save_load.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_save_load(1)</div><div id='n_method'> N Method Name: test_save_load(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_save_load.py</div><div id='n_file'> N File Name: tests/test_save_load.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 28</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        prev_att_w_forward = None
        prev_att_w_location = None
        self.forward_att.reset()
        <a id="change">self.location_att.reset()</a>

        &#47&#47 setup for attention constraint
        if use_att_constraint:
            last_attended_idx = 0</code></pre><h3>After Change</h3><pre><code class='java'>
                prev_out = self.output_activation_fn(outs[-1][:, :, -1])  &#47&#47 (1, odim)
            else:
                prev_out = outs[-1][:, :, -1]  &#47&#47 (1, odim)
            <a id="change">if </a><a id="change">self.cumulate_att_w and prev_att_w is not None</a>:
                prev_att_w = prev_att_w + att_w  &#47&#47 Note: error when use +=
            else:
                prev_att_w = att_w</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/10019cc0757749a84bed3e7c9edf69ef603bf385#diff-09890817e338d073ece7c3562e9071826029d455ae39e08ac3f911b70293b37aL438' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94071770</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: 10019cc0757749a84bed3e7c9edf69ef603bf385</div><div id='time'> Time: 2021-10-14</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: Layers/TacotronDecoder.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: inference(9)</div><div id='n_method'> N Method Name: inference(10)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: Layers/TacotronDecoder.py</div><div id='n_file'> N File Name: Layers/TacotronDecoder.py</div><div id='m_start'> M Start Line: 447</div><div id='m_end'> M End Line: 568</div><div id='n_start'> N Start Line: 479</div><div id='n_end'> N End Line: 534</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        for _ in range(n_episodes):
            done = False
            &#47&#47 Reset environment
            obs = <a id="change">env.reset()</a>
            episode_reward, episode_timesteps = 0.0, 0
            while not done:
                &#47&#47 Select action randomly or according to policy
                if num_timesteps &lt; learning_starts:</code></pre><h3>After Change</h3><pre><code class='java'>
                num_timesteps += 1
                episode_timesteps += 1
                total_steps += 1
                <a id="change">if </a><a id="change">n_steps &gt; 0 and total_steps &gt;= n_steps</a>:
                    break

            if done:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/322399e8fefc9dceed5a13bb389ef374168e32c5#diff-809f42ee33a70ea5bb5bec8c668f97ad0b62b632c5f10368759a86ac15aeb126L218' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94071774</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 322399e8fefc9dceed5a13bb389ef374168e32c5</div><div id='time'> Time: 2019-09-25</div><div id='author'> Author: antonin.raffin@dlr.de</div><div id='file'> File Name: torchy_baselines/common/base_class.py</div><div id='m_class'> M Class Name: BaseRLModel</div><div id='n_method'> N Class Name: BaseRLModel</div><div id='m_method'> M Method Name: collect_rollouts(11)</div><div id='n_method'> N Method Name: collect_rollouts(9)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: torchy_baselines/common/base_class.py</div><div id='n_file'> N File Name: torchy_baselines/common/base_class.py</div><div id='m_start'> M Start Line: 222</div><div id='m_end'> M End Line: 262</div><div id='n_start'> N Start Line: 218</div><div id='n_end'> N End Line: 273</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            Tracking(model,epoch,save_path)
        
        train_loader.reset()
        <a id="change">val_loader.reset()</a>

    logging.info(&quot*&quot*50+&quotDONE&quot+&quot*&quot*50)
    logging.info(&quot\n Best_Epoch: {0}\t&quot
                     &quotBest_Prec1 {prec1:.4f} \t&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    for epoch in range(args.start_epoch+1, args.epochs):
        time_start = datetime.now()
        &#47&#47*warm up
        <a id="change">if </a><a id="change">args.warm_up and epoch &lt;5</a>:
            for param_group in optimizer.param_groups:
                param_group[&quotlr&quot] = args.lr * (epoch+1)/5
        for param_group in optimizer.param_groups:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lmbxmu/rbnn/commit/86657d6f595cb443ec52502b278d191d44415ca9#diff-51e54fa2edf92734ba1c452ae8ba36f0526eba62a804b6908faeb0378308a387L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94071772</div><div id='project'> Project Name: lmbxmu/rbnn</div><div id='commit'> Commit Name: 86657d6f595cb443ec52502b278d191d44415ca9</div><div id='time'> Time: 2020-05-11</div><div id='author'> Author: 791411501@qq.com</div><div id='file'> File Name: imagenet/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: imagenet/main.py</div><div id='n_file'> N File Name: imagenet/main.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 257</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 210</div><BR>