<html><h3>Pattern ID :21726
</h3><img src='69386438.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            loss = loss_fn(output, target)
            batch_size = data.shape[0]
            total_loss += loss.item() * batch_size
            <a id="change">for </a>i, <a id="change">metric</a> in enumerate(metric_fns)<a id="change">:
                </a>total_metrics[i] += <a id="change">metric(</a>output, target<a id="change">)</a> * batch_size


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
    total_metrics = torch.zeros(len(metric_fns))

    image_id = []
    label = <a id="change">[]</a>
    with torch.no_grad():
        logger.debug(&quottesting...&quot)
        for i, (data, target) in enumerate(testloader):
            data = data.to(device)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deeperlearner/pytorch-template/commit/49ac2e7c4e18177db31ae741c8dfd7cdbf5ca0f0#diff-3665d65394f4f58a56a256ad6dd8621c68118d90fe56a19387e251c19cec2d2eL15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69386438</div><div id='project'> Project Name: deeperlearner/pytorch-template</div><div id='commit'> Commit Name: 49ac2e7c4e18177db31ae741c8dfd7cdbf5ca0f0</div><div id='time'> Time: 2020-11-11</div><div id='author'> Author: b04202035@g.ntu.edu.tw</div><div id='file'> File Name: test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test.py</div><div id='n_file'> N File Name: test.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, metrics=[ACC], tb_logdir="../logs/test"):

        self.metrics = []
        <a id="change">for metric</a> in metrics<a id="change">:
            </a>self.metrics.append(<a id="change">metric()</a>)
        self.tb_writer = SummaryWriter(tb_logdir)

        &#47&#47 to be updated</code></pre><h3>After Change</h3><pre><code class='java'>
class EvalProtocol(object):
    def __init__(self, metrics=None, tb_logdir="../logs/test"):
        if metrics is None:
            self.metrics = <a id="change">[</a>ACC()<a id="change"></a>]
        else:
            self.metrics = metrics.copy()
        self.tb_writer = SummaryWriter(tb_logdir)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/continualai/avalanche/commit/dd1864e64d729982bc0aa979ff32adab707cc63f#diff-5b7197cf511ad97cc1b1254efb9ded97bb91ace00f823132e1620d742ef500a4L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69386439</div><div id='project'> Project Name: continualai/avalanche</div><div id='commit'> Commit Name: dd1864e64d729982bc0aa979ff32adab707cc63f</div><div id='time'> Time: 2020-05-19</div><div id='author'> Author: lrzpellegrini@gmail.com</div><div id='file'> File Name: avalanche/evaluation/eval_protocol.py</div><div id='m_class'> M Class Name: EvalProtocol</div><div id='n_method'> N Class Name: EvalProtocol</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: avalanche/evaluation/eval_protocol.py</div><div id='n_file'> N File Name: avalanche/evaluation/eval_protocol.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 29</div><div id='n_end'> N End Line: 33</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            loss = loss_fn(output, target)
            batch_size = data.shape[0]
            total_loss += loss.item() * batch_size
            <a id="change">for </a>i, <a id="change">metric</a> in enumerate(metric_fns)<a id="change">:
                </a>total_metrics[i] += <a id="change">metric(</a>output, target<a id="change">)</a> * batch_size

    n_samples = len(data_loader.sampler)
    log = {&quotloss&quot: total_loss / n_samples}</code></pre><h3>After Change</h3><pre><code class='java'>
                count+=1
            &#47&#47 output voxel dimension : 64
            CE+=cross_entropy(Y_fake,Y)/(64*64*64)
    log = <a id="change">{</a>&quotIOU&quot: IOU / count,&quotCE&quot: CE / count<a id="change">}</a>
    logger.info(log)


if __name__ == &quot__main__&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zxpzhong/3d-recgan-pytorch/commit/63d82c1f333db58fe483cdcf29378a12e2155f6b#diff-3665d65394f4f58a56a256ad6dd8621c68118d90fe56a19387e251c19cec2d2eL11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69386441</div><div id='project'> Project Name: zxpzhong/3d-recgan-pytorch</div><div id='commit'> Commit Name: 63d82c1f333db58fe483cdcf29378a12e2155f6b</div><div id='time'> Time: 2020-06-27</div><div id='author'> Author: zxpzhong@qq.com</div><div id='file'> File Name: test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test.py</div><div id='n_file'> N File Name: test.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 54</div><BR>