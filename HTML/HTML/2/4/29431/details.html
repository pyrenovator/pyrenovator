<html><h3>Pattern ID :29431
</h3><img src='87143264.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                fq = pt.tensor(mol["formal_charges"], dtype=pt.long)
                q = fq.sum()

                for conf in <a id="change">mol["conformations"].values()</a>:

                    &#47&#47 Skip failed calculations
                    if "formation_energy" not in conf:</code></pre><h3>After Change</h3><pre><code class='java'>
            ):

                &#47&#47 Subsample molecules
                <a id="change">if i_mol % self.subsample_molecules != 0</a>:
                    <a id="change">continue</a>

                z = pt.tensor(mol["atomic_numbers"], dtype=pt.long)
                fq = pt.tensor(mol["formal_charges"], dtype=pt.long)
                q = fq.sum()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/torchmd/torchmd-net/commit/d23e6500f2cef1fa56d6c99ce5fdb983f1379bca#diff-56de3e28dd2b438171f4af7de59cc66305304d98e21b24faf4d744698d8c1aa3L72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87143264</div><div id='project'> Project Name: torchmd/torchmd-net</div><div id='commit'> Commit Name: d23e6500f2cef1fa56d6c99ce5fdb983f1379bca</div><div id='time'> Time: 2022-10-28</div><div id='author'> Author: peastman@stanford.edu</div><div id='file'> File Name: torchmdnet/datasets/ace.py</div><div id='m_class'> M Class Name: Ace</div><div id='n_method'> N Class Name: Ace</div><div id='m_method'> M Method Name: sample_iter(2)</div><div id='n_method'> N Method Name: sample_iter(1)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: torchmdnet/datasets/ace.py</div><div id='n_file'> N File Name: torchmdnet/datasets/ace.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 144</div><div id='n_end'> N End Line: 206</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            else:
                grads[name] *= self.weights.get(name, 1)

        full_grad = sum(<a id="change">grads.values()</a>)
        x.backward(full_grad)
</code></pre><h3>After Change</h3><pre><code class='java'>
        norms = {}

        for k, v in losses.items():
            <a id="change">if k in self.deny_list</a>: <a id="change">continue</a>

            grads[k], = torch.autograd.grad(
                v,
                [model_output.get(k, model_output[&quotdefault&quot])],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/acids-ircam/rave/commit/a0219f3a4a320949a4d6535b48644fb6ff05fe7c#diff-788def5022594c1700afddfcd8790ff382aacccfcbbd97ff31af3b5cf6ab32ceL38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87143266</div><div id='project'> Project Name: acids-ircam/rave</div><div id='commit'> Commit Name: a0219f3a4a320949a4d6535b48644fb6ff05fe7c</div><div id='time'> Time: 2022-11-07</div><div id='author'> Author: caillon@ircam.fr</div><div id='file'> File Name: rave/balancer.py</div><div id='m_class'> M Class Name: Balancer</div><div id='n_method'> N Class Name: Balancer</div><div id='m_method'> M Method Name: backward(3)</div><div id='n_method'> N Method Name: backward(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rave/balancer.py</div><div id='n_file'> N File Name: rave/balancer.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 be referenced by name
    nameable_params_in_sig: Set[str] = set(
        p.name
        for p in <a id="change">signature_params.values()</a>
        if p.kind
        in {inspect.Parameter.POSITIONAL_OR_KEYWORD, inspect.Parameter.KEYWORD_ONLY}
    )
</code></pre><h3>After Change</h3><pre><code class='java'>
        _seen: Set[str] = set()

        for n, param in enumerate(signature_params.values()):
            <a id="change">if n + 1 &lt;= len(pos_args)</a>:
                &#47&#47 Positional parameters are populated from "left to right" in the signature.
                &#47&#47 We have already done validation, so we know that positional params aren&quott redundant
                &#47&#47 with named params (including inherited params).
                <a id="change">continue</a>

            if param.name not in nameable_params_in_sig:
                &#47&#47 parameter cannot be specified by name
                continue</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mit-ll-responsible-ai/hydra-zen/commit/ff8d682958131486759a39c6ee5665ba79b2a68e#diff-c0e97c7339086864db548b2180ec10ae784beccf0c28bab07e95b0026b387799L363' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87143263</div><div id='project'> Project Name: mit-ll-responsible-ai/hydra-zen</div><div id='commit'> Commit Name: ff8d682958131486759a39c6ee5665ba79b2a68e</div><div id='time'> Time: 2021-05-11</div><div id='author'> Author: ry26099@mit.edu</div><div id='file'> File Name: src/hydra_zen/structured_configs/_implementations.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: builds(1)</div><div id='n_method'> N Method Name: builds(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/hydra_zen/structured_configs/_implementations.py</div><div id='n_file'> N File Name: src/hydra_zen/structured_configs/_implementations.py</div><div id='m_start'> M Start Line: 670</div><div id='m_end'> M End Line: 842</div><div id='n_start'> N Start Line: 671</div><div id='n_end'> N End Line: 849</div><BR>