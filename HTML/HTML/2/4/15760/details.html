<html><h3>Pattern ID :15760
</h3><img src='53228137.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        batch.append(idx)

    if len(batch) &gt; 0:
        <a id="change">yield </a>batch


def process_bpe_symbol(sentence: str, bpe_symbol: str):</code></pre><h3>After Change</h3><pre><code class='java'>
    max_sentences = max_sentences if max_sentences is not None else sys.maxsize
    bsz_mult = required_batch_size_multiple

    <a id="change">if </a><a id="change">isinstance(</a>indices, types.GeneratorType<a id="change">)</a>:
        indices<a id="change"> = </a>np.fromiter(indices, dtype=np.int64, count=-1)
    return batch_by_size_fast(indices, num_tokens_fn, max_tokens, max_sentences, bsz_mult)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/4fc39538aec5141aa41f5d6d7dc0097e7c0f7b48#diff-fb6fe24870121c1c289bc42823d2d2f41d677688ac7e87b657aac0efa5835dc8L199' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53228137</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: 4fc39538aec5141aa41f5d6d7dc0097e7c0f7b48</div><div id='time'> Time: 2019-08-23</div><div id='author'> Author: namangoyal@learnfair0356.h2.fair</div><div id='file'> File Name: fairseq/data/data_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: batch_by_size(5)</div><div id='n_method'> N Method Name: batch_by_size(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fairseq/data/data_utils.py</div><div id='n_file'> N File Name: fairseq/data/data_utils.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 239</div><div id='n_start'> N Start Line: 203</div><div id='n_end'> N End Line: 209</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                &quotSize of sample &#47&#47{} is invalid (={}) since max_positions={}, &quot
                &quotskip this example with --skip-invalid-size-inputs-valid-test&quot
            ).format(ignored[0], size_fn(ignored[0]), max_positions))
        <a id="change">yield </a>idx

    if len(ignored) &gt; 0:
        print((</code></pre><h3>After Change</h3><pre><code class='java'>
        if hasattr(dataset, &quotsizes&quot) and isinstance(dataset.sizes, np.ndarray):
            ignored = indices[dataset.sizes &gt; max_positions].tolist()
            indices = indices[dataset.sizes &lt;= max_positions]
        elif <a id="change"></a>(
                hasattr(dataset, &quotsizes&quot) and
                <a id="change">isinstance(</a>dataset.sizes, list<a id="change">)</a> and
                len(dataset.sizes) == 1
        ):
            ignored<a id="change"> = </a>indices[dataset.sizes[0] &gt; max_positions].tolist()
            indices = indices[dataset.sizes[0] &lt;= max_positions]
        else:
            indices, ignored = _filter_by_size_dynamic(indices, dataset.size, max_positions)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/108f94bc2aaf32ba1882dc9fd8f014496fe8f0c5#diff-fb6fe24870121c1c289bc42823d2d2f41d677688ac7e87b657aac0efa5835dc8L127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53228125</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: 108f94bc2aaf32ba1882dc9fd8f014496fe8f0c5</div><div id='time'> Time: 2019-08-28</div><div id='author'> Author: namangoyal@devfair0110.h2.fair</div><div id='file'> File Name: fairseq/data/data_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: filter_by_size(4)</div><div id='n_method'> N Method Name: filter_by_size(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fairseq/data/data_utils.py</div><div id='n_file'> N File Name: fairseq/data/data_utils.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 175</div><div id='n_start'> N Start Line: 172</div><div id='n_end'> N End Line: 198</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if img_root is None or (not os.path.exists(img_root)):
        for _ in range(20):
            input = np.random.rand(1, img_size[0], img_size[1], 3).astype(np.float32)
            <a id="change">yield </a>[input]
    else:
        VALID_FORMAT = [&quotjpg&quot, &quotpng&quot]
        for i, fn in enumerate(os.listdir(img_root)):</code></pre><h3>After Change</h3><pre><code class='java'>
from .op_registry import OPERATOR

def representative_dataset_gen(img_root, img_size, mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]):
    <a id="change">if </a><a id="change">isinstance(</a>mean, list<a id="change">)</a>:
        mean<a id="change"> = </a>np.array(mean, dtype=np.float32)
    if isinstance(std, list):
        std = np.array(std, dtype=np.float32)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mpolaris/onnx2tflite/commit/9651425f29b8dd752c8227d74ae868b3d132a75c#diff-68adbb259d1aa3c28ade37122b3492bd910ac10ddfa1596120f5c6dd4f10955aL9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 53228132</div><div id='project'> Project Name: mpolaris/onnx2tflite</div><div id='commit'> Commit Name: 9651425f29b8dd752c8227d74ae868b3d132a75c</div><div id='time'> Time: 2022-04-17</div><div id='author'> Author: 540492239@qq.com</div><div id='file'> File Name: utils/builder.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: representative_dataset_gen(4)</div><div id='n_method'> N Method Name: representative_dataset_gen(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/builder.py</div><div id='n_file'> N File Name: utils/builder.py</div><div id='m_start'> M Start Line: 9</div><div id='m_end'> M End Line: 26</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 41</div><BR>