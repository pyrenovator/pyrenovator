<html><h3>Pattern ID :28317
</h3><img src='83596099.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                return {"height": height, "width": width}

    try:
        return <a id="change">await </a>get_metadata(filepath, is_video)
    except:
        return _default_metadata(is_video)
</code></pre><h3>After Change</h3><pre><code class='java'>
    Returns:
        dict
    
    <a id="change">if is_video</a>:
        info<a id="change"> = </a>await get_stream_info(filepath)
        return {
            "width": info.frame_size[0],
            "height": info.frame_size[1],</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/2e056e4882a943e10e8ea0206698041448958115#diff-8ae4ef3ecc654970bfb7c4a94733fb315b00b5cf36a3c98e0c5199c4435d1c2dL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83596099</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 2e056e4882a943e10e8ea0206698041448958115</div><div id='time'> Time: 2021-11-15</div><div id='author'> Author: brimoor@umich.edu</div><div id='file'> File Name: fiftyone/server/metadata.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: read_metadata(2)</div><div id='n_method'> N Method Name: read_metadata(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: fiftyone/server/metadata.py</div><div id='n_file'> N File Name: fiftyone/server/metadata.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 92</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            )
            view = view.set_field("frames", expr)

        samples = <a id="change">await </a>foo.aggregate(
            foo.get_async_db_conn()[view._dataset._sample_collection_name],
            view._pipeline(attach_frames=True, detach_frames=False),
        ).to_list(len(sample_ids))</code></pre><h3>After Change</h3><pre><code class='java'>
            for label in labels:
                sample_ids.add(label["sample_id"])

        <a id="change">if sample_ids</a>:
            view = fov.make_optimized_select_view(view, sample_ids)
        elif view.media_type == fom.GROUP and not slice:
            view<a id="change"> = </a>view.select_group_slices(_allow_mixed=True)

        if target_labels:
            if labels:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/voxel51/fiftyone/commit/956185efdbc8bbfd9a5a60e2121b21ba141c87e1#diff-1ec477d6e016afa4708255528ddc00e99b2f7e23ec4de4d2d1c92122839ab035L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83596098</div><div id='project'> Project Name: voxel51/fiftyone</div><div id='commit'> Commit Name: 956185efdbc8bbfd9a5a60e2121b21ba141c87e1</div><div id='time'> Time: 2022-09-12</div><div id='author'> Author: ben@voxel51.com</div><div id='file'> File Name: fiftyone/server/routes/tag.py</div><div id='m_class'> M Class Name: Tag</div><div id='n_method'> N Class Name: Tag</div><div id='m_method'> M Method Name: post(3)</div><div id='n_method'> N Method Name: post(3)</div><div id='m_parent_class'> M Parent Class: HTTPEndpoint</div><div id='n_parent_class'> N Parent Class: HTTPEndpoint</div><div id='m_file'> M File Name: fiftyone/server/routes/tag.py</div><div id='n_file'> N File Name: fiftyone/server/routes/tag.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 108</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        bind_addr = f&quot0.0.0.0:{self.args.port}&quot
        self.logger.debug(f&quotStart listening on {bind_addr}&quot)
        self._grpc_server.add_insecure_port(bind_addr)
        <a id="change">await </a>self._grpc_server.start()

    async def async_run_forever(self):
        Block until the GRPC server is terminated</code></pre><h3>After Change</h3><pre><code class='java'>
        
        await self._async_setup_grpc_server()

        <a id="change">if self.metrics_registry</a>:
            from prometheus_client import Summary

            self._summary_time<a id="change"> = </a>Summary(
                &quotreceiving_request_seconds&quot,
                &quotTime spent processing request&quot,
                registry=self.metrics_registry,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/8dc2999a588c46deca60b3f0d5c1b6278a6e165c#diff-f2758da35b18c8f9f84bc8070e045de6dde9f30fe7bd6fde9b6dcec69cd68751L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83596097</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 8dc2999a588c46deca60b3f0d5c1b6278a6e165c</div><div id='time'> Time: 2022-04-08</div><div id='author'> Author: 55492238+samsja@users.noreply.github.com</div><div id='file'> File Name: jina/serve/runtimes/worker/__init__.py</div><div id='m_class'> M Class Name: WorkerRuntime</div><div id='n_method'> N Class Name: WorkerRuntime</div><div id='m_method'> M Method Name: async_setup(1)</div><div id='n_method'> N Method Name: async_setup(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime,ABC</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime,ABC</div><div id='m_file'> M File Name: jina/serve/runtimes/worker/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/worker/__init__.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 53</div><BR>