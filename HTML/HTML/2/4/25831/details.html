<html><h3>Pattern ID :25831
</h3><img src='78195017.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    length = resp.getheader(&quotcontent-length&quot)
    if length:
        length = <a id="change">int(</a>length<a id="change">)</a>
        blocksize<a id="change"> = </a>max(4096, length // 100)
    else:
        blocksize = 1000000  &#47&#47 just made something up
</code></pre><h3>After Change</h3><pre><code class='java'>


def download(url, path):
    file_name = os.path.join(path, <a id="change">url.split("/"</a><a id="change">)</a>[-1])

    if os.path.exists(file_name):
        print(f"Dataset already downloaded at {file_name}.")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/continvvm/continuum/commit/21c44f320830e89c7754209a9c98affafb0932c8#diff-25b5e494ed7669996260965822bf8b7569efb732db0fb1e8b76ad4f54d3bf865L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78195017</div><div id='project'> Project Name: continvvm/continuum</div><div id='commit'> Commit Name: 21c44f320830e89c7754209a9c98affafb0932c8</div><div id='time'> Time: 2020-06-17</div><div id='author'> Author: ar.douillard@gmail.com</div><div id='file'> File Name: continuum/download.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: download(2)</div><div id='n_method'> N Method Name: download(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: continuum/download.py</div><div id='n_file'> N File Name: continuum/download.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 7</div><div id='n_end'> N End Line: 17</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        name_list[2] = name_list[2].upper()
        assert name_list[1] in [&quotS&quot, &quotM&quot, &quotL&quot] and name_list[2] == &quotR&quot, name
        pretrained_dataset = name_list[1]
        layer<a id="change"> = </a><a id="change">int(</a>name_list[3]<a id="change">)</a>
        full_name_list[0] = &quot-&quot.join(name_list)
        return &quot&quot.join(full_name_list), pretrained_dataset, layer

    def get_official_weights(self, **kwargs) -&gt; OrderedDict[str, torch.Tensor]:</code></pre><h3>After Change</h3><pre><code class='java'>
        if len(name_list) != 1:
            for element in name_list[1:]:
                if element[0] == &quotr&quot:
                    sub_list = <a id="change">element[1:].split(&quotx&quot</a><a id="change">)</a>
                    layer = int(sub_list[0])
                    if len(sub_list) == 2:
                        width_factor = int(sub_list[1])
                else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/d1791a5d2011850d8796399912be84c49dd5e788#diff-4c3e42eb0c5012429d8a52fae551eaa3029b50408e5b3f7c99b9e5a17a76698eL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78195000</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: d1791a5d2011850d8796399912be84c49dd5e788</div><div id='time'> Time: 2021-04-06</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/bit.py</div><div id='m_class'> M Class Name: BiT</div><div id='n_method'> N Class Name: BiT</div><div id='m_method'> M Method Name: parse_name(4)</div><div id='n_method'> N Method Name: parse_name(3)</div><div id='m_parent_class'> M Parent Class: ImageModel</div><div id='n_parent_class'> N Parent Class: ImageModel</div><div id='m_file'> M File Name: trojanvision/models/bit.py</div><div id='n_file'> N File Name: trojanvision/models/bit.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 61</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def __init__(self, layer: int = 18, sub_type: str = &quot&quot, **kwargs):
        super().__init__(**kwargs)
        layer<a id="change"> = </a><a id="change">int(</a>layer<a id="change">)</a>
        module_list: list[nn.Module] = []
        if sub_type == &quots&quot:
            from trojanvision.utils.model_archs.resnet_s import ResNetS
            _model = ResNetS(nclasses=self.num_classes)</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self, name: str = &quotresnet18&quot, **kwargs):
        super().__init__(**kwargs)
        module_list: list[nn.Module] = []
        if &quots&quot in <a id="change">name.split(&quot_&quot</a><a id="change">)</a>:
            from trojanvision.utils.model_archs.resnet_s import ResNetS
            _model = ResNetS(nclasses=self.num_classes)
            module_list.append((&quotconv1&quot, _model.conv1))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/2705d914671ac0184e373bd76381fcda1117071e#diff-a771bed1318d4464e1713165b088f0abfc68b89962ca33e8ef4f099119c61f1aL15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78194991</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 2705d914671ac0184e373bd76381fcda1117071e</div><div id='time'> Time: 2021-04-06</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/resnet.py</div><div id='m_class'> M Class Name: _ResNet</div><div id='n_method'> N Class Name: _ResNet</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: _ImageModel</div><div id='n_parent_class'> N Parent Class: _ImageModel</div><div id='m_file'> M File Name: trojanvision/models/resnet.py</div><div id='n_file'> N File Name: trojanvision/models/resnet.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            groups = self.args.val_groups
        assert batch_size % groups == 0
        steps<a id="change"> = </a><a id="change">int(</a>batch_size/groups<a id="change">)</a>
        
        &#47&#47 reshape to be (batch_size; -1)
        context_rnn_state = context_rnn_state.view(batch_size, -1)
        </code></pre><h3>After Change</h3><pre><code class='java'>
            context_rnn_state = torch.cat(context_rnn_state, dim=0)
            
        batch_size = context_rnn_state.size(1)
        groups = len(<a id="change">self.args.train_languages.split(&quot+&quot</a><a id="change">)</a>)
        assert batch_size % groups == 0
        
        &#47&#47 reshape to be (batch_size; -1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/stanford-oval/genienlp/commit/74401aa03f61b2eda08639c114056aaa7f18f8e2#diff-bceffcc02e288dc2e7c5e76149fbb8822d24f0692d947a87423f72f40c70236bL100' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 78195015</div><div id='project'> Project Name: stanford-oval/genienlp</div><div id='commit'> Commit Name: 74401aa03f61b2eda08639c114056aaa7f18f8e2</div><div id='time'> Time: 2020-04-01</div><div id='author'> Author: mehrad@stanford.edu</div><div id='file'> File Name: genienlp/models/general_seq2seq.py</div><div id='m_class'> M Class Name: Seq2Seq</div><div id='n_method'> N Class Name: Seq2Seq</div><div id='m_method'> M Method Name: get_encoder_loss(2)</div><div id='n_method'> N Method Name: get_encoder_loss(2)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: genienlp/models/general_seq2seq.py</div><div id='n_file'> N File Name: genienlp/models/general_seq2seq.py</div><div id='m_start'> M Start Line: 106</div><div id='m_end'> M End Line: 125</div><div id='n_start'> N Start Line: 107</div><div id='n_end'> N End Line: 121</div><BR>