<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        pred_score = sr.load()

    y_test = dataset.prepare("test", col_set="label")
    <a id="change">pred_score</a><a id="change">, y_test, __</a> = drop_nan_by_y_index(pred_score, y_test)
    model_pearsonr = pearsonr(np.ravel(pred_score.values), np.ravel(y_test.values))[0]

    return <a id="change">pred_score</a><a id="change">, {"model_pearsonr": model_pearsonr}, rid</a>


def backtest_analysis(pred, rid):
    backtest and analysis</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 calculate ic and ric
        sar = SigAnaRecord(recorder)
        <a id="change">sar.generate()</a>
        ic = sar.load(sar.get_path("ic.pkl"))
        ric = sar.load(sar.get_path("ric.pkl"))

    return pred_score, {"ic": ic, "ric": ric}, rid</code></pre>