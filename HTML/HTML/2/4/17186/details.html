<html><h3>Pattern ID :17186
</h3><img src='57328607.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self._iter = iter([{key: data[key].numpy() for key in data} for data in calib_dataloader])

    def get_next(self):
        <a id="change">return </a>next(self._iter, None)


class ORTQuantizer:</code></pre><h3>After Change</h3><pre><code class='java'>
    def get_next(self):
        featurized_samples = None
        try:
            <a id="change">if </a>self.batch_size == 1:
                featurized_samples = {key: [value] for key, value in next(self._dataset_iter).items()}
            else:
                featurized_samples = defaultdict(list)
                for _ in range(self.batch_size):
                    sample<a id="change"> = </a><a id="change">next(</a>self._dataset_iter<a id="change">)</a>

                    for name, value in sample.items():
                        featurized_samples[name] += [value]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/optimum/commit/8a993de9245ee7cb76f4730d9e0a50f9e76eae3a#diff-3688cadccda29282df1b90910924f7a353b8e9cf4d2e50369484c95ee8e17172L56' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57328607</div><div id='project'> Project Name: huggingface/optimum</div><div id='commit'> Commit Name: 8a993de9245ee7cb76f4730d9e0a50f9e76eae3a</div><div id='time'> Time: 2022-03-24</div><div id='author'> Author: mfuntowicz@users.noreply.github.com</div><div id='file'> File Name: optimum/onnxruntime/quantization.py</div><div id='m_class'> M Class Name: ORTCalibrationDataReader</div><div id='n_method'> N Class Name: ORTCalibrationDataReader</div><div id='m_method'> M Method Name: get_next(1)</div><div id='n_method'> N Method Name: get_next(1)</div><div id='m_parent_class'> M Parent Class: CalibrationDataReader</div><div id='n_parent_class'> N Parent Class: CalibrationDataReader</div><div id='m_file'> M File Name: optimum/onnxruntime/quantization.py</div><div id='n_file'> N File Name: optimum/onnxruntime/quantization.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 76</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        hits = next(self.losses_iter)
        dummy_1 = {side: {rank_type: 10.0 for rank_type in RANK_TYPES} for side in SIDES}
        dummy_2 = {side: {rank_type: 1.0 for rank_type in RANK_TYPES} for side in SIDES}
        <a id="change">return </a>RankBasedMetricResults.from_dict(
            arithmetic_mean_rank=dummy_1,
            geometric_mean_rank=dummy_1,
            harmonic_mean_rank=dummy_1,</code></pre><h3>After Change</h3><pre><code class='java'>
    def finalize(self) -&gt; MetricResults:  &#47&#47 noqa: D102
        result = RankBasedMetricResults.create_random(self.random_state)
        assert self.values_iter is not None
        <a id="change">if </a>self.key not in result.data:
            raise KeyError(self.key)
        result.data[self.key]<a id="change"> = </a><a id="change">next(</a>self.values_iter<a id="change">)</a>
        return result

    def __repr__(self):  &#47&#47 noqa: D105
        return f"{self.__class__.__name__}(values={self.values})"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/71f0a0d92c997b17c6c171281ea7ffd0e46cc408#diff-748800475c61d5b0bf9591f175094fb7da10cf584892314d85db4bfb2bc73221L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57328599</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 71f0a0d92c997b17c6c171281ea7ffd0e46cc408</div><div id='time'> Time: 2022-03-04</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: tests/mocks.py</div><div id='m_class'> M Class Name: MockEvaluator</div><div id='n_method'> N Class Name: MockEvaluator</div><div id='m_method'> M Method Name: finalize(1)</div><div id='n_method'> N Method Name: finalize(1)</div><div id='m_parent_class'> M Parent Class: Evaluator</div><div id='n_parent_class'> N Parent Class: Evaluator</div><div id='m_file'> M File Name: tests/mocks.py</div><div id='n_file'> N File Name: tests/mocks.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 82</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 67</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        num_label = data[&quotnum_label&quot] if &quotnum_label&quot in data else None
        num_edge_features = data[
            &quotnum_edge_features&quot] if model_config.type == &quotmpnn&quot else None
        <a id="change">return </a>(data[&quottrain&quot].x.shape, num_label, num_edge_features)

    if isinstance(data, dict):
        keys = list(data.keys())</code></pre><h3>After Change</h3><pre><code class='java'>
        num_label = data[&quotnum_label&quot] if &quotnum_label&quot in data else None
        num_edge_features = data[
            &quotnum_edge_features&quot] if model_config.type == &quotmpnn&quot else None
        <a id="change">if </a>model_config.task.startswith(&quotgraph&quot):
            &#47&#47 graph-level task
            data_representative<a id="change"> = </a><a id="change">next(</a>iter(data[&quottrain&quot])<a id="change">)</a>
            return (data_representative.x.shape, num_label, num_edge_features)
        else:
            &#47&#47 node/link-level task
            return (data.x.shape, num_label, num_edge_features)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/federatedscope/commit/aafeaffbb67e5ff5703bd66fc24b4f5760bc32cc#diff-7f772d205f72c859ea25afce61dd724d4a2895654e1cfaf15a586124588258e1L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57328613</div><div id='project'> Project Name: alibaba/federatedscope</div><div id='commit'> Commit Name: aafeaffbb67e5ff5703bd66fc24b4f5760bc32cc</div><div id='time'> Time: 2022-07-19</div><div id='author'> Author: yuexiang.xyx@alibaba-inc.com</div><div id='file'> File Name: federatedscope/core/auxiliaries/model_builder.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_shape_from_data(3)</div><div id='n_method'> N Method Name: get_shape_from_data(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: federatedscope/core/auxiliaries/model_builder.py</div><div id='n_file'> N File Name: federatedscope/core/auxiliaries/model_builder.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 44</div><BR>