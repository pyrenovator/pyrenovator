<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                - originals[:, 1, ...] / originals[:, 2, ...]) ** 2
    br_ratio = (enhances[:, 2, ...] / enhances[:, 0, ...]
                - originals[:, 2, ...] / originals[:, 0, ...]) ** 2
    col_loss<a id="change"> = </a><a id="change">(rg_ratio + gb_ratio + br_ratio).mean()</a>
    return col_loss


def get_kernels(device):</code></pre><h3>After Change</h3><pre><code class='java'>
                     ori_avg[:, 2, ...], ori_avg[:, 0, ...])

    col_loss = rg_loss + gb_loss + br_loss
    <a id="change">if </a>torch.any(<a id="change">torch.isnan(</a>col_loss<a id="change">)</a>).item():
        sys.exit(&quotColor Constancy loss is nan&quot)
    return col_loss
</code></pre>