<html><h3>Pattern ID :2589
</h3><img src='10698370.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 ------- metrics -------
        acc1, acc5 = accuracy_at_k(output, target, top_k=(1, 5))

        metrics<a id="change"> = </a><a id="change">{
            </a>"train_neg_cos_sim": neg_cos_sim,
            "train_class_loss": class_loss,
            "train_acc1": acc1,
            "train_acc5": acc5<a id="change">,
        }</a>
        self.log_dict(metrics, on_epoch=True, sync_dist=True)
        return loss
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 ------- metrics -------
        acc1, acc5 = accuracy_at_k(output, target, top_k=(1, 5))

        z_std<a id="change"> = </a><a id="change">F.normalize(torch.cat((z1, z2), dim=0), dim=1).std(dim=0)</a>.mean()

        metrics = {
            "train_neg_cos_sim": neg_cos_sim,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/vturrisi/contrastive-learning/commit/bfe92b0274d994ff61d921debfb4546343090d3c#diff-b78ddb782c7e08b8ae8c7383e438e561760bb4d2a66d93913d4904453f33ac02L62' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10698370</div><div id='project'> Project Name: vturrisi/contrastive-learning</div><div id='commit'> Commit Name: bfe92b0274d994ff61d921debfb4546343090d3c</div><div id='time'> Time: 2021-03-19</div><div id='author'> Author: vt.turrisi@gmail.com</div><div id='file'> File Name: models/simsiam.py</div><div id='m_class'> M Class Name: SimSiam</div><div id='n_method'> N Class Name: SimSiam</div><div id='m_method'> M Method Name: training_step(3)</div><div id='n_method'> N Method Name: training_step(3)</div><div id='m_parent_class'> M Parent Class: Model</div><div id='n_parent_class'> N Parent Class: Model</div><div id='m_file'> M File Name: models/simsiam.py</div><div id='n_file'> N File Name: models/simsiam.py</div><div id='m_start'> M Start Line: 65</div><div id='m_end'> M End Line: 99</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 93</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        cc = kmeans.cluster_centers_
        &#47&#47 Ensure the lesser value goes first
        cc = np.sort(cc, axis=0)
        centers<a id="change"> += </a><a id="change">[</a>cc<a id="change"></a>]

    centers = np.array(centers)
    mean = centers.mean(axis=2)</code></pre><h3>After Change</h3><pre><code class='java'>
        lab0 = meter[labels == 0]
        lab1 = meter[labels == 1]
        mean += [[lab0.mean(), lab1.mean()]]
        std<a id="change"> += </a>[[<a id="change">lab0.std()</a>, lab1.std()]]

    
        cc = kmeans.cluster_centers_</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uca-datalab/nilm-thresholding/commit/2b24d37855791e9ca50d60b2d7a9443f09a1cc70#diff-34fdf11475c005318d3092873f47af42d695c05c936e42693b17521007361b42L191' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10698362</div><div id='project'> Project Name: uca-datalab/nilm-thresholding</div><div id='commit'> Commit Name: 2b24d37855791e9ca50d60b2d7a9443f09a1cc70</div><div id='time'> Time: 2020-05-12</div><div id='author'> Author: danipg1409@gmail.com</div><div id='file'> File Name: better_nilm/model/preprocessing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_cluster_centroids(1)</div><div id='n_method'> N Method Name: _get_cluster_centroids(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: better_nilm/model/preprocessing.py</div><div id='n_file'> N File Name: better_nilm/model/preprocessing.py</div><div id='m_start'> M Start Line: 212</div><div id='m_end'> M End Line: 229</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 228</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                target = torch.Tensor(target).float()

                if self._is_active(target, threshold=self.threshold):
                    data<a id="change"> = </a><a id="change">{
                        </a>&quotsongID&quot: songID,
                        &quotstart&quot: start,
                        &quotduration&quot: duration<a id="change">
                    }</a>
                    self.json_data.append(data)
    
    def __getitem__(self, idx):
        mixture, sources, _ = super().__getitem__(idx)</code></pre><h3>After Change</h3><pre><code class='java'>
                sources = np.concatenate(sources, axis=0)
                mixture = sources.sum(axis=0)
            
            self.std[songID]<a id="change"> = </a><a id="change">np.std(</a>mixture.mean(axis=0)<a id="change">)</a>
        
        self.samples_per_epoch = samples_per_epoch

    def __getitem__(self, idx):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/b7a22e8f24f8206fc28ef8b7f01f01fcce0a498c#diff-8f1539f8f92a2935319a03c1ee38b31a527ccde3261a84eef37557a3687d73b3L85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10698367</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: b7a22e8f24f8206fc28ef8b7f01f01fcce0a498c</div><div id='time'> Time: 2021-08-10</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='m_class'> M Class Name: WaveTrainDataset</div><div id='n_method'> N Class Name: WaveTrainDataset</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: WaveDataset</div><div id='n_parent_class'> N Parent Class: WaveDataset</div><div id='m_file'> M File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='n_file'> N File Name: egs/musdb18/conv-tasnet/src/adhoc_dataset.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 117</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 98</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        }
    elif dataset == &quotcovertype&quot:
        dataset = fetch_covtype()
        param<a id="change"> = </a><a id="change">{
            </a>&quotobjective&quot: &quotmulti:softmax&quot,
            &quotnum_class&quot: 8,
            &quotsingle_precision_histogram&quot: True<a id="change">
        }</a>

    X = dataset.data
    y = dataset.target
</code></pre><h3>After Change</h3><pre><code class='java'>
            feature_importances_dict[key].append(val)
    
    for fis in feature_importances_dict.values():
        fi_std<a id="change"> = </a><a id="change">np.std(</a>fis<a id="change">)</a>
        print(fi_std)
    
def random_seed(seed, param):
    os.environ[&quotPYTHONHASHSEED&quot] = str(seed) &#47&#47 Python general</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mlf-core/machine_learning_determinism_evaluation/commit/828765d146d64622c9e889320aaf983ce207a2b7#diff-1f572ddafeea64cc1d1cec26cd04a8887d7f225d97ba311dedbd9d2868c98fe7L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10698364</div><div id='project'> Project Name: mlf-core/machine_learning_determinism_evaluation</div><div id='commit'> Commit Name: 828765d146d64622c9e889320aaf983ce207a2b7</div><div id='time'> Time: 2022-06-12</div><div id='author'> Author: lukas.heumos@posteo.net</div><div id='file'> File Name: bin/train_boston_covtype_xgboost.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(5)</div><div id='n_method'> N Method Name: train(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: bin/train_boston_covtype_xgboost.py</div><div id='n_file'> N File Name: bin/train_boston_covtype_xgboost.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 76</div><BR>