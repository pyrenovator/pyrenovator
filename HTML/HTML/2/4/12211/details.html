<html><h3>Pattern ID :12211
</h3><img src='41377631.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 checks
        print("check results")
        for (theirs, ours) in <a id="change">zip(</a>[their_out, their_next_h], [our_out, our_next_h]<a id="change">)</a>:
            theirs = theirs.detach().cpu().numpy()
            ours = ours.detach().cpu().numpy()
            if theirs.shape != ours.shape:</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 checks
        print("check results")
        theirs = their_out.detach().cpu().numpy()
        ours = <a id="change">our_out.detach().cpu().numpy()</a>
        if theirs.shape != ours.shape:
            raise AssertionError(f"Prediction shapes are not equal. "
                                 f"Theirs: {theirs.shape}, ours: {ours.shape}")
        &#47&#47 save_diff_hist(np.abs(theirs - ours), test_id)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ais-bonn/vp-suite/commit/a71498d763c84e72029c5921e390f8dff48fd61d#diff-45a2ebc11f3cb475f5c3614c22590e9db9f054ca016d790066f5e3bbf162cb0aL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41377631</div><div id='project'> Project Name: ais-bonn/vp-suite</div><div id='commit'> Commit Name: a71498d763c84e72029c5921e390f8dff48fd61d</div><div id='time'> Time: 2022-02-11</div><div id='author'> Author: boltres@ais.uni-bonn.de</div><div id='file'> File Name: vp_suite/models/precipitation_nowcasting/_test_impl_match.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compare_implementations(0)</div><div id='n_method'> N Method Name: compare_implementations(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vp_suite/models/precipitation_nowcasting/_test_impl_match.py</div><div id='n_file'> N File Name: vp_suite/models/precipitation_nowcasting/_test_impl_match.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 88</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if torch.is_tensor(class_1):
                return torch.cat((class_1, class_2), dim=1)
            else:
                return np.array(list(<a id="change">zip(</a>class_1, class_2<a id="change">)</a>)).reshape((-1, 2))

        elif self._backend == "tensorflow":
            return self._model.predict(input)</code></pre><h3>After Change</h3><pre><code class='java'>
            if tensor_output:
                return output
            else:
                return <a id="change">output.detach().cpu().numpy()</a>

        elif self._backend == "tensorflow":
            return self._model.predict(input)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/9b4d02120789794e885d4e47da522e1a1c17ed99#diff-2d9dd771c79c24fa5f5bc54bc3c0ce601efbc22310f84f594d35c8605a5640b3L233' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41377630</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 9b4d02120789794e885d4e47da522e1a1c17ed99</div><div id='time'> Time: 2021-05-27</div><div id='author'> Author: sbielawski@web.de</div><div id='file'> File Name: carla/models/catalog/catalog.py</div><div id='m_class'> M Class Name: MLModelCatalog</div><div id='n_method'> N Class Name: MLModelCatalog</div><div id='m_method'> M Method Name: predict_proba(2)</div><div id='n_method'> N Method Name: predict_proba(2)</div><div id='m_parent_class'> M Parent Class: MLModel</div><div id='n_parent_class'> N Parent Class: MLModel</div><div id='m_file'> M File Name: carla/models/catalog/catalog.py</div><div id='n_file'> N File Name: carla/models/catalog/catalog.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 266</div><div id='n_start'> N Start Line: 235</div><div id='n_end'> N End Line: 258</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        with torch.no_grad():
            start = 0
            if self.iteration &gt; 0:
                for P, V in <a id="change">zip(</a>self.model.parameter_order, self.model.parameter_vector_len<a id="change">)</a>:
                    start += V
            self.current_Y = self.model.full_sample(self.current_state + h).view(-1)
            if self.model.target.has_mask: &#47&#47 fixme something to do with the mask is a problem</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47         self.L = self.L_history[-6:][np.argmax(np.abs(self.rho_history[-6:]))] * np.exp(np.random.normal(loc = 0, scale = 1))
        h = self.update_h_v2()
        if self.verbose &gt; 1:
            print("h: ", <a id="change">h.detach().cpu().numpy()</a>)
        
        with torch.no_grad():
            self.current_Y = self.model.full_sample(self.current_state + h).view(-1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/e7f256bf984d720d18daababa4852f2f7a2f4ac1#diff-52615ad08cfc1cfad1befd14d3c383d34ae33d73e933e1359265221e8731fb61L75' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41377628</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: e7f256bf984d720d18daababa4852f2f7a2f4ac1</div><div id='time'> Time: 2022-12-13</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/fit/lm.py</div><div id='m_class'> M Class Name: LM</div><div id='n_method'> N Class Name: LM</div><div id='m_method'> M Method Name: step_method1(2)</div><div id='n_method'> N Method Name: step_method1(2)</div><div id='m_parent_class'> M Parent Class: BaseOptimizer</div><div id='n_parent_class'> N Parent Class: BaseOptimizer</div><div id='m_file'> M File Name: autoprof/fit/lm.py</div><div id='n_file'> N File Name: autoprof/fit/lm.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 161</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 162</div><BR>