<html><h3>Pattern ID :9675
</h3><img src='34875012.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        )

    &#47&#47 Clean up
    <a id="change">for </a>extra_file in extra_files<a id="change">:
        </a>os.remove(extra_file)


if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Run CLI actions - the storage type is read from an
    &#47&#47 environment variable
    print(f"‚è±  Running CLI actions for: {os.environ[&quotMODEL_STORE_STORAGE&quot]}")
    <a id="change">with tempfile</a><a id="change">.TemporaryDirectory() as tmp_dir:
        </a>for model_path in iter_model_files(tmp_dir):
            actions.run_cli_commands(model_path)

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/operatorai/modelstore/commit/7e3dc89a994cf087e292f2b71467198928bcb4fc#diff-2f657522d1058cb465ca9763afee71c501fb86bc2f37d939886053e722ee5b42L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34875012</div><div id='project'> Project Name: operatorai/modelstore</div><div id='commit'> Commit Name: 7e3dc89a994cf087e292f2b71467198928bcb4fc</div><div id='time'> Time: 2022-08-07</div><div id='author'> Author: neal.lathia@gmail.com</div><div id='file'> File Name: workflows/main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: workflows/main.py</div><div id='n_file'> N File Name: workflows/main.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        config_names = self.dataset_tester.prepare_config_names()
        dataset_builder_class_cls = self.dataset_tester.load_builder_cls()

        <a id="change">for </a>config_name in config_names<a id="change">:
            &#47&#47 create config and dataset
            </a>dataset_builder = dataset_builder_class_cls(config_name)

            path_to_dummy_data = self.dataset_tester.download_dummy_data(config_name)
</code></pre><h3>After Change</h3><pre><code class='java'>
        builder_configs = self.dataset_tester.load_all_configs()

        for config in builder_configs:
            <a id="change">with tempfile</a><a id="change">.TemporaryDirectory() as processed_temp_dir, </a>tempfile.TemporaryDirectory() as raw_temp_dir:
                &#47&#47 create config and dataset
                dataset_builder = self.dataset_tester.load_builder(config, data_dir=processed_temp_dir)
                &#47&#47 get version</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/e265044d925d92277f5664628d4fd4cd11dc7ef5#diff-a1bc225bd9a5bade373d1f140e24d09cbbdc97971c2f73bb627daaa803ada002L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34875014</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: e265044d925d92277f5664628d4fd4cd11dc7ef5</div><div id='time'> Time: 2020-04-27</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_dataset_common.py</div><div id='m_class'> M Class Name: DatasetTesterMixin</div><div id='n_method'> N Class Name: DatasetTesterMixin</div><div id='m_method'> M Method Name: test_load_dataset(1)</div><div id='n_method'> N Method Name: test_load_dataset(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_dataset_common.py</div><div id='n_file'> N File Name: tests/test_dataset_common.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 90</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        rouge_dict = {}
        for i in rouge_metrics:
            rouge_dict[i] = []
        <a id="change">for </a>i in range(len(generate_corpus))<a id="change">:
            </a>pred_sent = generate_corpus[i]
            gold_sent = reference_corpus[i]
            result = self.calc_rouge(gen_corpus=[pred_sent], ref_corpus=[gold_sent])
            for key_ in rouge_dict:</code></pre><h3>After Change</h3><pre><code class='java'>
    def _calc_metrics_info(self, generate_corpus, reference_corpus):
        generate_corpus = [self._preprocess(generate_sentence) for generate_sentence in generate_corpus]
        reference_corpus = [self._preprocess(reference_sentence) for reference_sentence in reference_corpus]
        <a id="change">with tempfile</a><a id="change">.TemporaryDirectory() as path:
            </a>generate_path = os.path.join(path, &quotgenerate_corpus.txt&quot)
            reference_path = os.path.join(path, &quotreference_corpus.txt&quot)
            self._write_file(generate_path, generate_corpus)
            self._write_file(reference_path, reference_corpus)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/textbox/commit/ca43fa8706693cd72c9b0a3ad2a6623b7afc7c11#diff-f486c6d1908ed14f11d8f0c69db671b61da7b54430ef8e005a656fdeff2172bdL71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 34875008</div><div id='project'> Project Name: rucaibox/textbox</div><div id='commit'> Commit Name: ca43fa8706693cd72c9b0a3ad2a6623b7afc7c11</div><div id='time'> Time: 2021-04-25</div><div id='author'> Author: 602525931@qq.com</div><div id='file'> File Name: textbox/evaluator/rouge_evaluator.py</div><div id='m_class'> M Class Name: RougeEvaluator</div><div id='n_method'> N Class Name: RougeEvaluator</div><div id='m_method'> M Method Name: _calc_metrics_info(3)</div><div id='n_method'> N Method Name: _calc_metrics_info(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator,Rouge155</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: textbox/evaluator/rouge_evaluator.py</div><div id='n_file'> N File Name: textbox/evaluator/rouge_evaluator.py</div><div id='m_start'> M Start Line: 81</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 101</div><div id='n_end'> N End Line: 118</div><BR>