<html><h3>Pattern ID :38092
</h3><img src='109188434.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            exp_avg_sq = state.get("exp_avg_sq", torch.zeros_like(vector))
            beta2 = param_group["betas"][1]
            eps = param_group["eps"]
            denom = <a id="change">torch.add(
                </a>torch.sqrt(torch.mean(beta2 * exp_avg_sq)), eps<a id="change">
            )</a> / math.sqrt(1 - beta2**step)

            outputs.append(vector / denom)
</code></pre><h3>After Change</h3><pre><code class='java'>
                beta1, beta2 = param_group["betas"]
                eps = param_group["eps"]
                last_grad = state.get("last_grad", torch.zeros_like(vector))
                exp_avg = <a id="change">state.get("exp_avg"</a>, torch.zeros_like(vector)<a id="change">)</a>
                exp_avg_sq = state.get("exp_avg_sq", torch.zeros_like(vector))
                exp_avg_old<a id="change"> = </a>(exp_avg - (1 - beta1) * last_grad) / beta1
                exp_avg_sq_old = (
                    exp_avg_sq - (1 - beta2) * last_grad * last_grad
                ) / beta2</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/leopard-ai/betty/commit/831b8d6a8444a2c09aae0a7d37bb280b7b52ca55#diff-43116a88fc3a7de425c9e2a3a73878231946a17ff7331ac2a5c240f7c3688080L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188434</div><div id='project'> Project Name: leopard-ai/betty</div><div id='commit'> Commit Name: 831b8d6a8444a2c09aae0a7d37bb280b7b52ca55</div><div id='time'> Time: 2023-04-06</div><div id='author'> Author: sangkeuc@andrew.cmu.edu</div><div id='file'> File Name: betty/hypergradient/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: precondition(2)</div><div id='n_method'> N Method Name: precondition(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: betty/hypergradient/utils.py</div><div id='n_file'> N File Name: betty/hypergradient/utils.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        logging.info("local_training")

        params = Params()
        <a id="change">params.add(</a>"whatever_key_as_you_like_1", "any_value"<a id="change">)</a>
        params.add("whatever_key_as_you_like_2", 2)
        return params

</code></pre><h3>After Change</h3><pre><code class='java'>
    def local_training(self):
        logging.info("local_training")
        params = self.get_params()
        model_params<a id="change"> = </a><a id="change">params.get("model_params"</a><a id="change">)</a>
        return params


class Server(FedMLExecutor):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/2868f59b7bd15acfc8e2bb3130c444743e192ce1#diff-27b80a92e3e9bfd2d6770093117925b88db0cb396a06828cdfaf8d56159c5556L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188432</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: 2868f59b7bd15acfc8e2bb3130c444743e192ce1</div><div id='time'> Time: 2022-07-27</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='m_class'> M Class Name: Client</div><div id='n_method'> N Class Name: Client</div><div id='m_method'> M Method Name: local_training(1)</div><div id='n_method'> N Method Name: local_training(1)</div><div id='m_parent_class'> M Parent Class: FedMLExecutor</div><div id='n_parent_class'> N Parent Class: FedMLExecutor</div><div id='m_file'> M File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='n_file'> N File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        logging.info("local_training")

        params = Params()
        <a id="change">params.add(</a>"whatever_key_as_you_like_1", "any_value"<a id="change">)</a>
        params.add("whatever_key_as_you_like_2", 2)
        return params

</code></pre><h3>After Change</h3><pre><code class='java'>
    def local_training(self):
        logging.info("local_training")
        params = self.get_params()
        model_params<a id="change"> = </a><a id="change">params.get("model_params"</a><a id="change">)</a>
        return params


class Server(FedMLExecutor):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/e219d2a74b2d4416e86af232258f8585664a4a78#diff-27b80a92e3e9bfd2d6770093117925b88db0cb396a06828cdfaf8d56159c5556L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188421</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: e219d2a74b2d4416e86af232258f8585664a4a78</div><div id='time'> Time: 2022-07-27</div><div id='author'> Author: chaoyanghe.com@gmail.com</div><div id='file'> File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='m_class'> M Class Name: Client</div><div id='n_method'> N Class Name: Client</div><div id='m_method'> M Method Name: local_training(1)</div><div id='n_method'> N Method Name: local_training(1)</div><div id='m_parent_class'> M Parent Class: FedMLExecutor</div><div id='n_parent_class'> N Parent Class: FedMLExecutor</div><div id='m_file'> M File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='n_file'> N File Name: python/fedml/core/distributed/flow/test_fedml_flow.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.name = loaded[&quotname&quot]
        for key, val in loaded[&quotdict&quot].items():
            self[key] = val
            <a id="change">self.bloom.add(</a>key<a id="change">)</a>

        return self

</code></pre><h3>After Change</h3><pre><code class='java'>
        RETURNS (Table): The loaded table.
        
        loaded = srsly.msgpack_loads(bytes_data)
        data<a id="change"> = </a><a id="change">loaded.get("dict"</a>, {}<a id="change">)</a>
        self.name = loaded["name"]
        self.bloom = BloomFilter().from_bytes(loaded["bloom"])
        self.clear()
        self.update(data)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/bab9976d9ab15dfef77e4a59f0c715d55cbca069#diff-d449932525cb3600acd009d7519f212e49100a17ce1410d9ca04c6e20d9da08dL226' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 109188425</div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: bab9976d9ab15dfef77e4a59f0c715d55cbca069</div><div id='time'> Time: 2019-09-15</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: spacy/lookups.py</div><div id='m_class'> M Class Name: Table</div><div id='n_method'> N Class Name: Table</div><div id='m_method'> M Method Name: from_bytes(2)</div><div id='n_method'> N Method Name: from_bytes(2)</div><div id='m_parent_class'> M Parent Class: OrderedDict</div><div id='n_parent_class'> N Parent Class: OrderedDict</div><div id='m_file'> M File Name: spacy/lookups.py</div><div id='n_file'> N File Name: spacy/lookups.py</div><div id='m_start'> M Start Line: 227</div><div id='m_end'> M End Line: 233</div><div id='n_start'> N Start Line: 245</div><div id='n_end'> N End Line: 250</div><BR>