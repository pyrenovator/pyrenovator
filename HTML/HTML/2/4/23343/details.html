<html><h3>Pattern ID :23343
</h3><img src='73485505.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            start = 0
            for i, label in enumerate(token_label[1 : input_len + 1]):
                label_name = label_list[label]
                if <a id="change">label_name == "O" or label_name.startswith("B-")</a>:
                    if len(words):
                        items.append({"pos": [start, i], "entity": words, "label": tag})
                    if label_name.startswith("B-"):</code></pre><h3>After Change</h3><pre><code class='java'>
            items = []
            input_data = input_datas[batch]
            for i, label in enumerate(token_label):
                if (label_list[label] == "O" or "B-" in label_list[label]) and <a id="change">start &gt;= 0</a>:
                    entity = input_data[start : i - 1]
                    if isinstance(entity, list):
                        entity<a id="change"> = </a><a id="change">"".join(</a>entity<a id="change">)</a>
                    items.append(
                        {
                            "pos": [start, i - 2],
                            "entity": entity,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/47fe71d98378e46e691d4fde7b1ba8ecb144afa4#diff-21c8dd460dff45096ebcb9e97d773c12b0d0aa6c1c99319dd6b701d92c2c9a38L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73485505</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 47fe71d98378e46e691d4fde7b1ba8ecb144afa4</div><div id='time'> Time: 2023-01-05</div><div id='author'> Author: fangzeyang0904@hotmail.com</div><div id='file'> File Name: model_zoo/ernie-3.0/deploy/simple_serving/server_token_cls.py</div><div id='m_class'> M Class Name: NERPostHandler</div><div id='n_method'> N Class Name: NERPostHandler</div><div id='m_method'> M Method Name: process(3)</div><div id='n_method'> N Method Name: process(3)</div><div id='m_parent_class'> M Parent Class: BasePostHandler</div><div id='n_parent_class'> N Parent Class: BasePostHandler</div><div id='m_file'> M File Name: model_zoo/ernie-3.0/deploy/simple_serving/server_token_cls.py</div><div id='n_file'> N File Name: model_zoo/ernie-3.0/deploy/simple_serving/server_token_cls.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        "set the dataloader with .set_loaders(...)"
                    )

            dataset_size = <a id="change">getattr(self, "dali_epoch_size", None) or len(dataloader.dataset)</a>

            dataset_size = self.trainer.limit_train_batches * dataset_size

            num_devices = 1</code></pre><h3>After Change</h3><pre><code class='java'>
        if self._num_training_steps is None:
            try:
                dataset = self.extra_args.get("dataset", None)
                if <a id="change">dataset not in ["cifar10", "cifar100", "stl10"]</a>:
                    folder<a id="change"> = </a><a id="change">os.path.join(</a>self.extra_args["data_dir"], self.extra_args["train_dir"]<a id="change">)</a>
                else:
                    folder = None
                no_labels = self.extra_args.get("no_labels", False)
                data_fraction = self.extra_args.get("data_fraction", -1.0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vturrisi/contrastive-learning/commit/eb07a9c7c2872efb1ae83767f59a67fa616a7652#diff-306471ca72f10d091f7adabfddc03e702f662348314d589d172c5c700eae27abL195' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73485509</div><div id='project'> Project Name: vturrisi/contrastive-learning</div><div id='commit'> Commit Name: eb07a9c7c2872efb1ae83767f59a67fa616a7652</div><div id='time'> Time: 2022-05-02</div><div id='author'> Author: vt.turrisi@gmail.com</div><div id='file'> File Name: solo/methods/linear.py</div><div id='m_class'> M Class Name: LinearModel</div><div id='n_method'> N Class Name: LinearModel</div><div id='m_method'> M Method Name: num_training_steps(1)</div><div id='n_method'> N Method Name: num_training_steps(1)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: solo/methods/linear.py</div><div id='n_file'> N File Name: solo/methods/linear.py</div><div id='m_start'> M Start Line: 199</div><div id='m_end'> M End Line: 208</div><div id='n_start'> N Start Line: 184</div><div id='n_end'> N End Line: 206</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        "set the dataloader with .set_loaders(...)"
                    )

            dataset_size = <a id="change">getattr(self, "dali_epoch_size", None) or len(dataloader.dataset)</a>

            dataset_size = self.trainer.limit_train_batches * dataset_size

            num_devices = 1</code></pre><h3>After Change</h3><pre><code class='java'>
        if self._num_training_steps is None:
            try:
                dataset = self.extra_args.get("dataset", None)
                if <a id="change">dataset not in ["cifar10", "cifar100", "stl10"]</a>:
                    folder<a id="change"> = </a><a id="change">os.path.join(</a>self.extra_args["data_dir"], self.extra_args["train_dir"]<a id="change">)</a>
                else:
                    folder = None
                no_labels = self.extra_args.get("no_labels", False)
                data_fraction = self.extra_args.get("data_fraction", -1.0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vturrisi/contrastive-learning/commit/eb07a9c7c2872efb1ae83767f59a67fa616a7652#diff-bf0f79abb0e767723150e5fe64a4a5935492d2fcf2eb222cfe5f8c901bcd11b0L379' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73485508</div><div id='project'> Project Name: vturrisi/contrastive-learning</div><div id='commit'> Commit Name: eb07a9c7c2872efb1ae83767f59a67fa616a7652</div><div id='time'> Time: 2022-05-02</div><div id='author'> Author: vt.turrisi@gmail.com</div><div id='file'> File Name: solo/methods/base.py</div><div id='m_class'> M Class Name: BaseMethod</div><div id='n_method'> N Class Name: BaseMethod</div><div id='m_method'> M Method Name: num_training_steps(1)</div><div id='n_method'> N Method Name: num_training_steps(1)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: solo/methods/base.py</div><div id='n_file'> N File Name: solo/methods/base.py</div><div id='m_start'> M Start Line: 383</div><div id='m_end'> M End Line: 392</div><div id='n_start'> N Start Line: 362</div><div id='n_end'> N End Line: 384</div><BR>