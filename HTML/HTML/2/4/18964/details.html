<html><h3>Pattern ID :18964
</h3><img src='61673033.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.last_action = np.zeros((self.n_agents, self.n_actions))

        if self.heuristic_ai:
            self.heuristic_targets<a id="change"> = </a><a id="change">[</a>None<a id="change"></a>]<a id="change"> * </a>self.n_agents

        try:
            self._obs = self._controller.observe()</code></pre><h3>After Change</h3><pre><code class='java'>
        Reset the environment. Required after each full episode.
        Returns initial observations and states.
        
        <a id="change">self.env.reset()</a>
        obs_smac_api = self.env.get_obs()
        state_smac_api = self.env.get_state()
        obs_rllib = {}
        for agent_index in range(self.n_agents):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/replicable-marl/marllib/commit/e81669a18cc5035c20a448821ba4889fd5047730#diff-5b8f1b60c81fbd8ec865bcd3b8b24cbd3bdec2a089d8ab7f1566c2f204d56141L41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61673033</div><div id='project'> Project Name: replicable-marl/marllib</div><div id='commit'> Commit Name: e81669a18cc5035c20a448821ba4889fd5047730</div><div id='time'> Time: 2022-04-06</div><div id='author'> Author: hhhusiyi@163.com</div><div id='file'> File Name: SMAC/env/starcraft2_rllib.py</div><div id='m_class'> M Class Name: StarCraft2Env_Rllib</div><div id='n_method'> N Class Name: StarCraft2Env_Rllib</div><div id='m_method'> M Method Name: reset(1)</div><div id='n_method'> N Method Name: reset(1)</div><div id='m_parent_class'> M Parent Class: MultiAgentEnv</div><div id='n_parent_class'> N Parent Class: StarCraft2Env,Rllib_MultiAgentEnv</div><div id='m_file'> M File Name: SMAC/env/starcraft2_rllib.py</div><div id='n_file'> N File Name: SMAC/env/starcraft2_rllib.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    logger.debug("Resetting extra parameters")
    config.EXTRA_PARAMETERS = []
    config.EXTRA_PARAMETERS_DEFAULTS = []
    config.EXTRA_PARAMETERS_DTYPE = <a id="change">[]</a>
    config.NON_SAMPLING_PARAMETERS = (
        config.CORE_PARAMETERS + config.EXTRA_PARAMETERS
    )
    config.NON_SAMPLING_DEFAULTS = (
        config.CORE_PARAMETERS_DEFAULTS + config.EXTRA_PARAMETERS_DEFAULTS
    )
    config.NON_SAMPLING_DEFAULT_DTYPE<a id="change"> = </a>(
        config.CORE_PARAMETERS_DTYPE<a id="change"> + </a>config.EXTRA_PARAMETERS_DTYPE
    )

</code></pre><h3>After Change</h3><pre><code class='java'>
def reset_extra_live_points_parameters():
    Reset the extra live points parameters.
    logger.debug("Resetting extra parameters")
    <a id="change">config.livepoints.reset()</a>


def get_dtype(names, array_dtype=None, non_sampling_parameters=True):
    </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/4f12d91b931bcf487262a8afa2c34bc34719145a#diff-dddc8aa29e23cf678f524b2c7a55e6c2b4e16ba0c4a70eddae924e5197061b09L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61673020</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: 4f12d91b931bcf487262a8afa2c34bc34719145a</div><div id='time'> Time: 2023-02-07</div><div id='author'> Author: m.williams.4@research.gla.ac.uk</div><div id='file'> File Name: nessai/livepoint.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: reset_extra_live_points_parameters(0)</div><div id='n_method'> N Method Name: reset_extra_live_points_parameters(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nessai/livepoint.py</div><div id='n_file'> N File Name: nessai/livepoint.py</div><div id='m_start'> M Start Line: 62</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        :return:
        

        strategy_max_index<a id="change"> = </a>max(
            [
                len(strategies)
                for strategies in namespace_strategy_list.ent_class_strategies.values()
            ]<a id="change">
            + </a><a id="change">[</a>len(namespace_strategy_list.default_strategies)<a id="change"></a>]
        )

        groups = {</code></pre><h3>After Change</h3><pre><code class='java'>
        :param namespace_strategy_execution:
        :return:
        
        <a id="change">namespace_strategy_execution.reset()</a>
        strategy_max_index = namespace_strategy_execution.longest_mapping_strategy_list_size

        groups = {
            k: list(v) for k, v in sort_then_group(ents_needing_mappings, entity_to_entity_key)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/08cbd53257bc5c3db2769582fcb2fe8d8fcec341#diff-03432c3d3b6f2efced6317dd0b9df63e3d3868df53919f019b1f21b585224ea6L146' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61673032</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 08cbd53257bc5c3db2769582fcb2fe8d8fcec341</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: richard.jackson4@astrazeneca.com</div><div id='file'> File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='m_class'> M Class Name: StrategyRunner</div><div id='n_method'> N Class Name: StrategyRunner</div><div id='m_method'> M Method Name: execute_hit_post_processing_strategies(4)</div><div id='n_method'> N Method Name: execute_hit_post_processing_strategies(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='n_file'> N File Name: kazu/steps/linking/post_processing/strategy_runner.py</div><div id='m_start'> M Start Line: 161</div><div id='m_end'> M End Line: 230</div><div id='n_start'> N Start Line: 263</div><div id='n_end'> N End Line: 284</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 aggregated statistics
        self._total_gt = {k: 0 for k in self._classes}
        self._total_dt = {k: [0] * pr_sample_count for k in self._classes}
        self._tp<a id="change"> = </a>{k: <a id="change">[</a>0<a id="change"></a>]<a id="change"> * </a>pr_sample_count for k in self._classes}
        self._fp = {k: [0] * pr_sample_count for k in self._classes}
        self._fn = {k: [0] * pr_sample_count for k in self._classes}
</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            raise ValueError("Unrecognized PR sample type")

        <a id="change">self.reset()</a>

    def reset(self):
        &#47&#47 aggregated statistics
        self._total_gt = {k: 0 for k in self._classes}</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cmpute/d3d/commit/a1505c4ae97fc333dafb3744d78dd6d293d790e6#diff-d6cbee2b917f2fd5ee1c60d5d379a431d9d7c0da329e3d61c9488219cc6886f1L8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61673029</div><div id='project'> Project Name: cmpute/d3d</div><div id='commit'> Commit Name: a1505c4ae97fc333dafb3744d78dd6d293d790e6</div><div id='time'> Time: 2020-05-30</div><div id='author'> Author: cmpute@qq.com</div><div id='file'> File Name: d3d/benchmarks.py</div><div id='m_class'> M Class Name: ObjectBenchmark</div><div id='n_method'> N Class Name: ObjectBenchmark</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: d3d/benchmarks.py</div><div id='n_file'> N File Name: d3d/benchmarks.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            att_w = att_w_location + att_w_forward

            att_ws = att_ws + [att_w]
            att_ws_location = att_ws_location<a id="change"> + </a><a id="change">[</a>att_w_location<a id="change"></a>]
            att_ws_forward = att_ws_forward + [att_w_forward]
            if self.speaker_embedding_projection_size is not None:
                prenet_out = self.prenet(torch.cat([prev_out, speaker_embedding], dim=-1)) if self.prenet is not None else prev_out
            else:
                prenet_out = self.prenet(prev_out) if self.prenet is not None else prev_out
            xs = torch.cat([att_c, prenet_out], dim=1)
            z_list[0], c_list[0] = self.lstm[0](xs, (z_list[0], c_list[0]))
            for i in range(1, len(self.lstm)):
                z_list[i], c_list[i] = self.lstm[i](z_list[i - 1], (z_list[i], c_list[i]))
            zcs = (torch.cat([z_list[-1], att_c], dim=1) if self.use_concate else z_list[-1])
            outs = outs + [self.feat_out(zcs).view(1, self.odim, -1)]  &#47&#47 [(1, odim, r), ...]
            probs = probs + [torch.sigmoid(self.prob_out(zcs))[0]]  &#47&#47 [(r), ...]
            if self.output_activation_fn is not None:
                prev_out = self.output_activation_fn(outs[-1][:, :, -1])  &#47&#47 (1, odim)
            else:
                prev_out = outs[-1][:, :, -1]  &#47&#47 (1, odim)
            if prev_att_w_location is not None:
                prev_att_w_location = prev_att_w_location + att_w_location  &#47&#47 Note: error when use +=
            else:
                prev_att_w_location = att_w_location
            prev_att_w_forward = att_w_forward
            if use_att_constraint:
                last_attended_idx = int(att_w.argmax())

            &#47&#47 check whether to finish generation
            if int(sum(probs[-1] &gt;= threshold)) &gt; 0 or idx &gt;= maxlen:
                &#47&#47 check mininum length
                if idx &lt; minlen:
                    continue
                outs = torch.cat(outs, dim=2)  &#47&#47 (1, odim, L)
                if self.postnet is not None:
                    outs = outs + self.postnet(outs)  &#47&#47 (1, odim, L)
                outs = outs.transpose(2, 1).squeeze(0)  &#47&#47 (L, odim)
                probs = torch.cat(probs, dim=0)
                att_ws = torch.cat(att_ws, dim=0)
                att_ws_forward = torch.cat(att_ws_forward, dim=0)
                att_ws_location<a id="change"> = </a>torch.cat(att_ws_location, dim=0)
                break

        if self.output_activation_fn is not None:</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 initialize attention
        prev_att_w = None
        <a id="change">self.att.reset()</a>

        &#47&#47 setup for attention constraint
        if use_att_constraint:
            last_attended_idx = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/10019cc0757749a84bed3e7c9edf69ef603bf385#diff-09890817e338d073ece7c3562e9071826029d455ae39e08ac3f911b70293b37aL438' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61673024</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: 10019cc0757749a84bed3e7c9edf69ef603bf385</div><div id='time'> Time: 2021-10-14</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: Layers/TacotronDecoder.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: inference(9)</div><div id='n_method'> N Method Name: inference(10)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: Layers/TacotronDecoder.py</div><div id='n_file'> N File Name: Layers/TacotronDecoder.py</div><div id='m_start'> M Start Line: 447</div><div id='m_end'> M End Line: 568</div><div id='n_start'> N Start Line: 479</div><div id='n_end'> N End Line: 534</div><BR>