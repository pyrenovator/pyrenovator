<html><h3>Pattern ID :34932
</h3><img src='100043330.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def _generate_examples(self, archive):
        for i, path in enumerate(Path(archive).glob("**/*")):
            if path.suffix == ".jpg":
                yield i<a id="change">, {"image_file_path": str(path), "image": str(path), "labels": path.parent.name.lower()}</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    def _generate_examples(self, files):
        for i, path in enumerate(files):
            file_name = os.path.basename(path)
            <a id="change">if </a><a id="change">file_name.endswith(".jpg"</a><a id="change">)</a>:
                yield i, {
                    "image_file_path": path,
                    "image": path,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/2cb0523c055dce63df28a397e45282b45b00566f#diff-74deff00a11efdf4e44cf35b3e2777ccd112b3b187286639d07b4cbcb2a07d8cL95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100043330</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 2cb0523c055dce63df28a397e45282b45b00566f</div><div id='time'> Time: 2021-12-28</div><div id='author'> Author: mario@huggingface.co</div><div id='file'> File Name: datasets/beans/beans.py</div><div id='m_class'> M Class Name: Beans</div><div id='n_method'> N Class Name: Beans</div><div id='m_method'> M Method Name: _generate_examples(2)</div><div id='n_method'> N Method Name: _generate_examples(2)</div><div id='m_parent_class'> M Parent Class: datasets.GeneratorBasedBuilder</div><div id='n_parent_class'> N Parent Class: datasets.GeneratorBasedBuilder</div><div id='m_file'> M File Name: datasets/beans/beans.py</div><div id='n_file'> N File Name: datasets/beans/beans.py</div><div id='m_start'> M Start Line: 95</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
      mv = get_child(self, k)
      vnp = v.astype(np.float32)
      vnp = vnp if k != &quot_fc&quot else vnp.T
      vnp = vnp if vnp.shape != <a id="change">()</a> else np.array([vnp])

      if mv.shape == vnp.shape:
        mv.assign(vnp)</code></pre><h3>After Change</h3><pre><code class='java'>

    b0 = fake_torch_load(fetch(model_urls[self.number]))
    for k,v in b0.items():
      <a id="change">if </a><a id="change">k.endswith("num_batches_tracked"</a><a id="change">)</a>: continue
      for cat in [&quot_conv_head&quot, &quot_conv_stem&quot, &quot_depthwise_conv&quot, &quot_expand_conv&quot, &quot_fc&quot, &quot_project_conv&quot, &quot_se_reduce&quot, &quot_se_expand&quot]:
        if cat in k:
          k = k.replace(&quot.bias&quot, &quot_bias&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/b1206bcb18cbfff076b30c880d190ce897186a37#diff-7932d599d2e356ab9483f330e47e9d237ca3c9aed0f13a3f4642d160ec2e57a3L134' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100043329</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: b1206bcb18cbfff076b30c880d190ce897186a37</div><div id='time'> Time: 2023-03-10</div><div id='author'> Author: 72895+geohot@users.noreply.github.com</div><div id='file'> File Name: models/efficientnet.py</div><div id='m_class'> M Class Name: EfficientNet</div><div id='n_method'> N Class Name: EfficientNet</div><div id='m_method'> M Method Name: load_from_pretrained(1)</div><div id='n_method'> N Method Name: load_from_pretrained(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: models/efficientnet.py</div><div id='n_file'> N File Name: models/efficientnet.py</div><div id='m_start'> M Start Line: 148</div><div id='m_end'> M End Line: 158</div><div id='n_start'> N Start Line: 148</div><div id='n_end'> N End Line: 158</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Find metrics that were reduced over the classes and replace the Class Name with None
        is_reduced_metrics = check_result.value.groupby(&quotMetric&quot)[&quotClass Name&quot].nunique() == 1
        reduced_metrics = is_reduced_metrics[is_reduced_metrics].index.to_list()
        check_result.value.loc[check_result.value.Metric.apply(lambda x: x in reduced_metrics)<a id="change">, &quotClass Name&quot</a>] = None

        &#47&#47 Dict keys are format metric_class
        metric_class = check_result.value.loc[:, [&quotMetric&quot, &quotClass Name&quot]].aggregate(lambda x:</code></pre><h3>After Change</h3><pre><code class='java'>
        Return the values of the metrics for the dataset provided in a {metric: value} format.
        result = {row[&quotMetric&quot] + &quot_&quot + str(row[&quotClass Name&quot]): row[&quotValue&quot] for _, row in
                  check_result.value.iterrows()}
        for key in [key for key in result.keys() if <a id="change">key.endswith(&quot_&lt;NA&gt;&quot)</a>]:
            result[key.replace(&quot_&lt;NA&gt;&quot, &quot&quot)] = result.pop(key)
        return result
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/2672ac2b68e5e8f5371a25c308619dd6ab035325#diff-7d32cc419c3c0be01e4ea5668fcc70ac30595756ae32130827338510ad0fb4b6L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100043326</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: 2672ac2b68e5e8f5371a25c308619dd6ab035325</div><div id='time'> Time: 2022-08-02</div><div id='author'> Author: 67195469+Nadav-Barak@users.noreply.github.com</div><div id='file'> File Name: deepchecks/vision/checks/model_evaluation/single_dataset_performance.py</div><div id='m_class'> M Class Name: SingleDatasetPerformance</div><div id='n_method'> N Class Name: SingleDatasetPerformance</div><div id='m_method'> M Method Name: reduce_output(2)</div><div id='n_method'> N Method Name: reduce_output(2)</div><div id='m_parent_class'> M Parent Class: SingleDatasetCheck,ReduceMixin</div><div id='n_parent_class'> N Parent Class: SingleDatasetCheck,ReduceMixin</div><div id='m_file'> M File Name: deepchecks/vision/checks/model_evaluation/single_dataset_performance.py</div><div id='n_file'> N File Name: deepchecks/vision/checks/model_evaluation/single_dataset_performance.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        logger.warning(pretty.separator)
        for k in sorted(record.keys()):
            logger.warning("%s: %g" % (k<a id="change">, record[k]</a>))

    def step(self):
        </code></pre><h3>After Change</h3><pre><code class='java'>
        
        if category.endswith("batch"):
            step_id = self.batch_id
        elif <a id="change">category.endswith("epoch"</a><a id="change">)</a>:
            step_id = self.epoch_id
        self.logger.log(record, step_id=step_id, category=category)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepgraphlearning/torchdrug/commit/29e18eedb406274eed712512808678e48e8e53a9#diff-dc3601d9cb784ec24a932cc3e46d43bc28138a7525e0e0331cc33a933e0a2105L46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100043327</div><div id='project'> Project Name: deepgraphlearning/torchdrug</div><div id='commit'> Commit Name: 29e18eedb406274eed712512808678e48e8e53a9</div><div id='time'> Time: 2022-02-18</div><div id='author'> Author: manangoel1999@gmail.com</div><div id='file'> File Name: torchdrug/core/meter.py</div><div id='m_class'> M Class Name: Meter</div><div id='n_method'> N Class Name: Meter</div><div id='m_method'> M Method Name: log(3)</div><div id='n_method'> N Method Name: log(2)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: torchdrug/core/meter.py</div><div id='n_file'> N File Name: torchdrug/core/meter.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 46</div><BR>