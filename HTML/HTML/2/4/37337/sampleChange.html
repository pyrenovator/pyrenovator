<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    try:
                        ontology_name = self.entity_class_to_ontology_mappings[entity.entity_class]
                        index = self.ontology_index_dict.get(ontology_name, None)
                        <a id="change">if </a>index is not None:
                            metadata_df = index.search(entity.match)
                            for i, row in metadata_df.iterrows():
                                row_dict = <a id="change">row.to_dict()</a>
                                ontology_id = row_dict.pop(IDX)
                                mapping_type<a id="change"> = </a>row_dict.pop(MAPPING_TYPE).tolist()
                                row_dict[NAMESPACE] = self.namespace()
                                new_mapping = Mapping(
                                    source=ontology_name,</code></pre><h3>After Change</h3><pre><code class='java'>
                            fuzzy=self.fuzzy,
                            namespace=self.namespace(),
                        )
                        <a id="change">for </a>mapping in mappings<a id="change">:
                            </a>entity.add_mapping(mapping)
                            self.lookup_cache.update_lookup_cache(entity, mapping)
                    except Exception:
                        doc = find_document_from_entity(docs, entity)</code></pre>