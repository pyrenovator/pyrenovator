<html><h3>Pattern ID :39430
</h3><img src='111914043.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    for i in range(params["model"]["num_classes"]):
        penalty_dict[i], weight_dict[i] = 0, 0

    for label in <a id="change">class_count.keys()</a>:
        weight_dict[label] = class_count[label] / total_count

    for label in class_count.keys():
        penalty_dict[label]<a id="change"> = </a>total_count / class_count[label]

    penalty_sum = np.fromiter(penalty_dict.values(), dtype=np.float64).sum()

    for label in class_count.keys():
        penalty_dict[label]<a id="change"> = </a>penalty_dict[label] / penalty_sum

    return penalty_dict, weight_dict
</code></pre><h3>After Change</h3><pre><code class='java'>

    penalty_sum = np.fromiter(penalty_dict.values(), dtype=np.float64).sum()

    for i in <a id="change">range(</a>params["model"]["num_classes"]<a id="change">)</a>:
        penalty_dict[i] /= penalty_sum

    return penalty_dict, weight_dict</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mlcommons/gandlf/commit/383e27d72c269899166509753b57027f410d1f82#diff-bb94cfa3aa2c4896ffc51250bc8aaa76a69755d33e3ec31c80f29b9c9353119bL238' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111914043</div><div id='project'> Project Name: mlcommons/gandlf</div><div id='commit'> Commit Name: 383e27d72c269899166509753b57027f410d1f82</div><div id='time'> Time: 2022-03-26</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: GANDLF/utils/tensor.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_class_imbalance_weights_classification(2)</div><div id='n_method'> N Method Name: get_class_imbalance_weights_classification(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/utils/tensor.py</div><div id='n_file'> N File Name: GANDLF/utils/tensor.py</div><div id='m_start'> M Start Line: 238</div><div id='m_end'> M End Line: 256</div><div id='n_start'> N Start Line: 238</div><div id='n_end'> N End Line: 253</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    model.num_layers = 4
    model.edge_radial = &quot8x0e&quot
    model.node_attrs = "16x0e"
    num_types<a id="change"> = </a>21

    data.n_train = 50000
    data.n_val = 3009
    data.std = 17.6163 
    data.train_val_split = "random"
    data.shuffle = True
    data.path = "tmp.hdf5"
    data.type_names<a id="change"> = </a>list(<a id="change">ase.atom.atomic_numbers.keys()</a>)[:num_types]
    data.preprocess = []
    if not &quotgcn&quot in spec:
        data.preprocess = [partial(computeEdgeIndex, r_max=model.r_max)]</code></pre><h3>After Change</h3><pre><code class='java'>
    data.std = 25.83
    data.train_val_split = "random"
    data.shuffle = True
    data.path = [f&quot/mnt/vepfs/hb/protein_small/{i}&quot for i in <a id="change">range(</a>8<a id="change">)</a>]
    data.apth = &quot/mnt/vepfs/hb/protein_small/0&quot
    data.preprocess = []
    def float2long(x):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/20171130/equivariant-nn-zoo/commit/f842237cc36b08da67bbff2324d63c1d0ff482b8#diff-6fef5c9ae809a39b4460c9b883094194d19807ec6807f5cbfe0dd785afa4f918L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111914045</div><div id='project'> Project Name: 20171130/equivariant-nn-zoo</div><div id='commit'> Commit Name: f842237cc36b08da67bbff2324d63c1d0ff482b8</div><div id='time'> Time: 2022-07-05</div><div id='author'> Author: hangruibi@outlook.com</div><div id='file'> File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_config(1)</div><div id='n_method'> N Method Name: get_config(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='n_file'> N File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    model.num_layers = 4
    model.edge_radial = &quot8x0e&quot
    model.node_attrs = "16x0e"
    num_types<a id="change"> = </a>21

    data.n_train = 50000
    data.n_val = 3009
    data.std = 17.6163 
    data.train_val_split = "random"
    data.shuffle = True
    data.path = "tmp.hdf5"
    data.type_names<a id="change"> = </a>list(<a id="change">ase.atom.atomic_numbers.keys()</a>)[:num_types]
    data.preprocess = []
    if not &quotgcn&quot in spec:
        data.preprocess = [partial(computeEdgeIndex, r_max=model.r_max)]</code></pre><h3>After Change</h3><pre><code class='java'>
    data.std = 25.83
    data.train_val_split = "random"
    data.shuffle = True
    data.path = [f&quot/mnt/vepfs/hb/protein_small/{i}&quot for i in <a id="change">range(</a>8<a id="change">)</a>]
    data.apth = &quot/mnt/vepfs/hb/protein_small/0&quot
    data.preprocess = []
    def float2long(x):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/20171130/equivariant-nn-zoo/commit/b79fcf96ea180c3d7842f0a01a148180998b1999#diff-6fef5c9ae809a39b4460c9b883094194d19807ec6807f5cbfe0dd785afa4f918L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111914052</div><div id='project'> Project Name: 20171130/equivariant-nn-zoo</div><div id='commit'> Commit Name: b79fcf96ea180c3d7842f0a01a148180998b1999</div><div id='time'> Time: 2022-07-07</div><div id='author'> Author: hangruibi@outlook.com</div><div id='file'> File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_config(1)</div><div id='n_method'> N Method Name: get_config(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='n_file'> N File Name: e3_layers/configs/config_diffusion_protein.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 70</div><BR>