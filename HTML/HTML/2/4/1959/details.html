<html><h3>Pattern ID :1959
</h3><img src='8754461.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def forward(self, **kwargs):
        ft = self.freeze_finetune_updates &lt;= self.num_updates

        <a id="change">with torch.no_grad()</a><a id="change"> if not ft else contextlib.ExitStack():
            </a>res = self.encoder(**kwargs)

            x = res["x"]
            padding_mask = res["padding_mask"]</code></pre><h3>After Change</h3><pre><code class='java'>
        return sample["label"].long()
    
    def forward(self, **kwargs):
        res = <a id="change">super()</a>.forward(**kwargs)

        x = res["x"]
        padding_mask = res["padding_mask"]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jwoo5/fairseq-signals/commit/166a7eef2b0a55898e5f13b105c4ebbe977f5828#diff-9ca898b804bf487762cf2e0751fcbab4490c90305d6935291ea46bb9d9f3dbd4L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8754461</div><div id='project'> Project Name: jwoo5/fairseq-signals</div><div id='commit'> Commit Name: 166a7eef2b0a55898e5f13b105c4ebbe977f5828</div><div id='time'> Time: 2021-10-22</div><div id='author'> Author: ojw0123@korea.ac.kr</div><div id='file'> File Name: fairseq_signals/models/identification/arcface.py</div><div id='m_class'> M Class Name: ArcFaceModel</div><div id='n_method'> N Class Name: ArcFaceModel</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: ConvTransformerFinetuningModel</div><div id='n_parent_class'> N Parent Class: ConvTransformerFinetuningModel</div><div id='m_file'> M File Name: fairseq_signals/models/identification/arcface.py</div><div id='n_file'> N File Name: fairseq_signals/models/identification/arcface.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 54</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def test_torchscript_conversion(self, backbone_name):
        model = BACKBONES.get(backbone_name)(pretrained=False).to(self.device).eval()
        x = torch.rand(2, 3, *model.img_size, device=self.device)
        <a id="change">with torch.no_grad()</a><a id="change">:
            </a>torch.jit.trace(model, x)
        torch.cuda.empty_cache()

</code></pre><h3>After Change</h3><pre><code class='java'>

    @parameterized.expand([&quotswinv2_tiny_window16_256&quot])
    def test_torchscript_conversion(self, backbone_name):
        <a id="change">super()</a>.test_torchscript_conversion(backbone_name)


class TestBeit(AbstractTestBackboneCorrectness, unittest.TestCase):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eora-ai/torchok/commit/e10a30df9d43bb62b3f7d8a7fd0cbf86df746624#diff-e8207a8cc211ee24430ecf639eb860f503e9ae328ffdbdf7d02815e464e6ee82L176' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8754460</div><div id='project'> Project Name: eora-ai/torchok</div><div id='commit'> Commit Name: e10a30df9d43bb62b3f7d8a7fd0cbf86df746624</div><div id='time'> Time: 2022-09-13</div><div id='author'> Author: rashit.bayazitov.1995@gmail.com</div><div id='file'> File Name: tests/additional_tests/models/backbones/test_backbone.py</div><div id='m_class'> M Class Name: TestSwin</div><div id='n_method'> N Class Name: TestSwin</div><div id='m_method'> M Method Name: test_torchscript_conversion(2)</div><div id='n_method'> N Method Name: test_torchscript_conversion(2)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase,AbstractTestBackboneCorrectness</div><div id='n_parent_class'> N Parent Class: unittest.TestCase,AbstractTestBackboneCorrectness</div><div id='m_file'> M File Name: tests/additional_tests/models/backbones/test_backbone.py</div><div id='n_file'> N File Name: tests/additional_tests/models/backbones/test_backbone.py</div><div id='m_start'> M Start Line: 177</div><div id='m_end'> M End Line: 181</div><div id='n_start'> N Start Line: 182</div><div id='n_end'> N End Line: 182</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def forward(self, **kwargs):
        ft = self.freeze_finetune_updates &lt;= self.num_updates

        <a id="change">with torch.no_grad()</a><a id="change"> if not ft else contextlib.ExitStack():
            </a>res = self.encoder(**kwargs)

            x = res["x"]
            padding_mask = res["padding_mask"]</code></pre><h3>After Change</h3><pre><code class='java'>
        return sample["label"].float()
    
    def forward(self, **kwargs):
        res = <a id="change">super()</a>.forward(**kwargs)

        x = res["x"]
        padding_mask = res["padding_mask"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jwoo5/fairseq-signals/commit/166a7eef2b0a55898e5f13b105c4ebbe977f5828#diff-7edb56be10b86ddb8c266f684e39d904e85013c279d57b48f86aa63d01635f20L48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8754459</div><div id='project'> Project Name: jwoo5/fairseq-signals</div><div id='commit'> Commit Name: 166a7eef2b0a55898e5f13b105c4ebbe977f5828</div><div id='time'> Time: 2021-10-22</div><div id='author'> Author: ojw0123@korea.ac.kr</div><div id='file'> File Name: fairseq_signals/models/classification/linear_projection.py</div><div id='m_class'> M Class Name: LinearProjectionModel</div><div id='n_method'> N Class Name: LinearProjectionModel</div><div id='m_method'> M Method Name: forward(1)</div><div id='n_method'> N Method Name: forward(1)</div><div id='m_parent_class'> M Parent Class: ConvTransformerFinetuningModel</div><div id='n_parent_class'> N Parent Class: ConvTransformerFinetuningModel</div><div id='m_file'> M File Name: fairseq_signals/models/classification/linear_projection.py</div><div id='n_file'> N File Name: fairseq_signals/models/classification/linear_projection.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 52</div><BR>