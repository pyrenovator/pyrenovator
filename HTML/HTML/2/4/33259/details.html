<html><h3>Pattern ID :33259
</h3><img src='96000513.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    <a id="change">stack.fit_predict(</a>df, 1<a id="change">)</a>
    assert True
</code></pre><h3>After Change</h3><pre><code class='java'>

def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred<a id="change"> = </a><a id="change">stack.fit_predict(</a>df, 1<a id="change">)</a>.toPandas()
    pred = <a id="change">pred.loc[:, ["user_id", "item_id"]]</a>.sort_values("user_id").reset_index(drop=True)
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/9405dd1ebbc8691fd238984b6d1862fcc0f86c3e#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96000513</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 9405dd1ebbc8691fd238984b6d1862fcc0f86c3e</div><div id='time'> Time: 2020-09-15</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    <a id="change">stack.fit_predict(</a>df, 1<a id="change">)</a>
    assert True
</code></pre><h3>After Change</h3><pre><code class='java'>

def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred<a id="change"> = </a><a id="change">stack.fit_predict(</a>df, 1<a id="change">)</a>.toPandas()
    pred = <a id="change">pred.loc[:, ["user_id", "item_id"]]</a>.sort_values("user_id").reset_index(drop=True)
    res = pd.DataFrame({"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]})
    pd.testing.assert_frame_equal(pred, res)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/af83229f4f08642d7822f0d7395dd27ccba9aaf2#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96000514</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: af83229f4f08642d7822f0d7395dd27ccba9aaf2</div><div id='time'> Time: 2020-10-13</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_works(log, model):
    try:
        <a id="change">model.fit_predict(</a>log<a id="change">, k=1)</a>
    except:  &#47&#47 noqa
        pytest.fail()
</code></pre><h3>After Change</h3><pre><code class='java'>

def test_works(log, model):
    try:
        pred<a id="change"> = </a><a id="change">model.fit_predict(</a>log<a id="change">, k=1)</a>
        np.allclose(
            <a id="change">pred.toPandas().sort_values("user_id")["relevance"]</a>.values,
            [0.559088, 0.816796, 0.566497, 0.783326],
        )
    except:  &#47&#47 noqa</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/c5a43473cacaa2602478a09a2709699b69a8340f#diff-494fea69ca10905ea4930ba0c494a47b797acb1cd21cb0e0e5dd0b6835248c87L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96000516</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: c5a43473cacaa2602478a09a2709699b69a8340f</div><div id='time'> Time: 2021-03-23</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_als.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_works(2)</div><div id='n_method'> N Method Name: test_works(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_als.py</div><div id='n_file'> N File Name: tests/models/test_als.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 25</div><BR>