<html><h3>Pattern ID :1238
</h3><img src='6290841.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                ("num_slots", len(agent["slots"])),
                ("num_containers", agent["num_containers"]),
                ("resource_pool", agent["resource_pool"]),
                ("enabled", <a id="change">agent.get("enabled"</a><a id="change">)</a>),
                ("draining", agent.get("draining")),
                ("label", agent["label"]),
                ("addresses", ", ".join(agent["addresses"])),</code></pre><h3>After Change</h3><pre><code class='java'>
                ("enabled", a.enabled),
                ("draining", a.draining),
                ("label", a.label),
                ("addresses", ", ".join(a.addresses)<a id="change"> if a.addresses is not None</a><a id="change"> else </a>""),
            ]
        )
        for a in sorted(resp.agents or [], key=attrgetter("id"))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 9</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/d339f7be2de68c86015c799249de4fdc44f1ada6#diff-fa83a1399a750f4b8842651cd41671b42b92e2f6c301979175cbfdebcedc9bd5L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290841</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: d339f7be2de68c86015c799249de4fdc44f1ada6</div><div id='time'> Time: 2022-05-19</div><div id='author'> Author: bradley.laney@hpe.com</div><div id='file'> File Name: harness/determined/cli/agent.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: list_agents(1)</div><div id='n_method'> N Method Name: list_agents(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/cli/agent.py</div><div id='n_file'> N File Name: harness/determined/cli/agent.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 40</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if response is not None:
            self.request_id = response.headers.get("X-Request-Id")
            try:
                self.server_message = <a id="change">response.json().get("error"</a>, None<a id="change">)</a>
            except JSONDecodeError:
                pass

        super().__init__(</code></pre><h3>After Change</h3><pre><code class='java'>
            )
            if msg_from_errors != "":
                self.server_message = (
                    self.server_message + "\n" + msg_from_errors<a id="change">
                    if self.server_message is not None</a><a id="change">
                    else </a>msg_from_errors
                )

        super().__init__(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/huggingface_hub/commit/c91a99b07a96b114213d1c238da456dcef7267ea#diff-767725f8f18383b90d2c454bbdcf39cdf090122933b71c3eda71268f1fb2922fL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290831</div><div id='project'> Project Name: huggingface/huggingface_hub</div><div id='commit'> Commit Name: c91a99b07a96b114213d1c238da456dcef7267ea</div><div id='time'> Time: 2022-10-16</div><div id='author'> Author: lucainp@gmail.com</div><div id='file'> File Name: src/huggingface_hub/utils/_errors.py</div><div id='m_class'> M Class Name: HfHubHTTPError</div><div id='n_method'> N Class Name: HfHubHTTPError</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: HTTPError</div><div id='n_parent_class'> N Parent Class: HTTPError</div><div id='m_file'> M File Name: src/huggingface_hub/utils/_errors.py</div><div id='n_file'> N File Name: src/huggingface_hub/utils/_errors.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 64</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @property
    def has_mask(self):
        return <a id="change">self.get(&quotmask&quot</a><a id="change">)</a> is not None

    &#47&#47 @property
    &#47&#47 def edge_weight(self) -&gt; Any:</code></pre><h3>After Change</h3><pre><code class='java'>

    @property
    def has_mask(self):
        return self[&quotmask&quot] is not None<a id="change"> if &quotmask&quot in self._store</a><a id="change"> else </a>False

    def numpy(self, *args: List[str]):
        rTransform all tensors to numpy arrays, either for all</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/71b1854b33ad96e2fcca6b8815c8b9ff0637f5f9#diff-bcbef9e1f11f1552d3c8904717a6f4cfaf258cbdf122fa3f929db43eec7c85b7L210' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290826</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: 71b1854b33ad96e2fcca6b8815c8b9ff0637f5f9</div><div id='time'> Time: 2022-11-09</div><div id='author'> Author: ivan.marisca@hotmail.it</div><div id='file'> File Name: tsl/data/data.py</div><div id='m_class'> M Class Name: Data</div><div id='n_method'> N Class Name: Data</div><div id='m_method'> M Method Name: has_mask(1)</div><div id='n_method'> N Method Name: has_mask(1)</div><div id='m_parent_class'> M Parent Class: PyGData</div><div id='n_parent_class'> N Parent Class: PyGData</div><div id='m_file'> M File Name: tsl/data/data.py</div><div id='n_file'> N File Name: tsl/data/data.py</div><div id='m_start'> M Start Line: 211</div><div id='m_end'> M End Line: 211</div><div id='n_start'> N Start Line: 221</div><div id='n_end'> N End Line: 221</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    no_decay=getattr(self.pl_module, "no_decay", None),
                    apply_lambdas=self.apply_lambdas_new_pgs,
                )
                new_scheduler_cfg = self.reinit_lr_cfg or <a id="change">next_tl.get("new_lr_scheduler"</a>, None<a id="change">)</a>
                if new_scheduler_cfg:
                    self.reinit_lr_scheduler(
                        new_lr_scheduler=new_scheduler_cfg, trainer=self.pl_module.trainer, optimizer=optimizer
                    )</code></pre><h3>After Change</h3><pre><code class='java'>
        assert isinstance(self.pl_module.trainer, pl.Trainer)
        &#47&#47 if the target depth is 0, implicit optimizer reinitialization should not be executed
        new_optimizer_cfg = (
            self<a id="change">.reinit_optim_cfg or self.ft_schedule[depth].get("new_optimizer", None) if depth &gt; 0</a><a id="change"> else </a>None
        )
        restored_depth = -1 if new_optimizer_cfg else self._fts_state._best_ckpt_depth
        if depth_sync or new_optimizer_cfg:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speediedan/finetuning-scheduler/commit/3822650061e2c56b5d05f7b277a6e824920a358e#diff-1e40f5edc419001c8841d4ee49ba3fe40f5c1a9f4122eff482a4037740bd7683L323' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290839</div><div id='project'> Project Name: speediedan/finetuning-scheduler</div><div id='commit'> Commit Name: 3822650061e2c56b5d05f7b277a6e824920a358e</div><div id='time'> Time: 2023-03-30</div><div id='author'> Author: danny.dale@gmail.com</div><div id='file'> File Name: src/finetuning_scheduler/fts.py</div><div id='m_class'> M Class Name: FinetuningScheduler</div><div id='n_method'> N Class Name: FinetuningScheduler</div><div id='m_method'> M Method Name: step_pg(5)</div><div id='n_method'> N Method Name: step_pg(4)</div><div id='m_parent_class'> M Parent Class: ScheduleImplMixin,ScheduleParsingMixin,CallbackDepMixin,BaseFinetuning</div><div id='n_parent_class'> N Parent Class: ScheduleImplMixin,ScheduleParsingMixin,CallbackDepMixin,BaseFinetuning</div><div id='m_file'> M File Name: src/finetuning_scheduler/fts.py</div><div id='n_file'> N File Name: src/finetuning_scheduler/fts.py</div><div id='m_start'> M Start Line: 341</div><div id='m_end'> M End Line: 381</div><div id='n_start'> N Start Line: 342</div><div id='n_end'> N End Line: 385</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    "user_id": shopper,
                    "product_id": p,
                    &#47&#47 TODO: don&quott super like how meta-data are handled here
                    "product_type": <a id="change">self.item_id_2_group_name.get(</a>p, <a id="change">&quotNO_GROUP&quot</a><a id="change">)</a>,
                    &#47&#47 TODO: log score from two-tower model
                    "score": 1.0  
                })</code></pre><h3>After Change</h3><pre><code class='java'>
                continue
            &#47&#47 append predictions one by one
            for p in cnt_predictions[&quotitems&quot]:
                product_type = self.item_id_2_meta[p][&quotproduct_group_name&quot]<a id="change"> if p in self.item_id_2_meta</a><a id="change"> else </a>&quotNO_GROUP&quot 
                predictions_to_log.append({
                    "user_id": shopper,
                    "product_id": p,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jacopotagliabue/recs-at-resonable-scale/commit/6d27bcc857b15a1fcc236b58c55ab135d7a03029#diff-9b8fa700f21964aef76747038004e0ed38e07299e7c0adc81db033595dde7677L252' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290822</div><div id='project'> Project Name: jacopotagliabue/recs-at-resonable-scale</div><div id='commit'> Commit Name: 6d27bcc857b15a1fcc236b58c55ab135d7a03029</div><div id='time'> Time: 2022-07-31</div><div id='author'> Author: tagliabue.jacopo@gmail.com</div><div id='file'> File Name: src/my_merlin_flow.py</div><div id='m_class'> M Class Name: merlinFlow</div><div id='n_method'> N Class Name: merlinFlow</div><div id='m_method'> M Method Name: train_model(1)</div><div id='n_method'> N Method Name: train_model(1)</div><div id='m_parent_class'> M Parent Class: FlowSpec</div><div id='n_parent_class'> N Parent Class: FlowSpec</div><div id='m_file'> M File Name: src/my_merlin_flow.py</div><div id='n_file'> N File Name: src/my_merlin_flow.py</div><div id='m_start'> M Start Line: 276</div><div id='m_end'> M End Line: 350</div><div id='n_start'> N Start Line: 277</div><div id='n_end'> N End Line: 362</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    res["eid"] = entry["eid"]
    res["size"] = int(entry["size"])
    res["lex"] = {
        "comment": [ex.get("comment", "") for ex in <a id="change">entry.get("lex"</a>, []<a id="change">)</a>],
        "lid": [ex.get("lid", "") for ex in entry.get("lex", [])],
        &#47&#47 all of the sequence are within their own 1-element sublist, else the [0]
        "text": [ex.get("text", "")[0] for ex in entry.get("lex", [])],</code></pre><h3>After Change</h3><pre><code class='java'>
    lex = entry["lex"]
    &#47&#47 Some entries are misformed, with None instead of the sorted triplet information.
    entry_triples = [
        ex["sortedtripleset"][0]<a id="change"> if ex["sortedtripleset"][0] is not None</a><a id="change"> else </a>{"sentence": []} for ex in lex
    ]
    &#47&#47 the xml structure is inconsistent; sorted triplets are often separated in several dictionaries, so we sum them.
    sorted_triples = [</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/919cadb6a8d0763121259a178ec19c90d0d5de14#diff-bea9568cbae32922000987443505e0a644fbbe2e0c2bc2a0254f7050c36b0007L87' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290837</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 919cadb6a8d0763121259a178ec19c90d0d5de14</div><div id='time'> Time: 2020-12-17</div><div id='author'> Author: teven.lescao@gmail.com</div><div id='file'> File Name: datasets/enriched_web_nlg/enriched_web_nlg.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: parse_entry(2)</div><div id='n_method'> N Method Name: parse_entry(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: datasets/enriched_web_nlg/enriched_web_nlg.py</div><div id='n_file'> N File Name: datasets/enriched_web_nlg/enriched_web_nlg.py</div><div id='m_start'> M Start Line: 101</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 122</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    first_conv_filter = blocks_config.get("first_conv_filter", out_channels[0])
    output_conv_filter = blocks_config.get("output_conv_filter", 1280)
    kernel_sizes = blocks_config.get("kernel_sizes", [3] * len(depthes))
    rescale_mode = <a id="change">blocks_config.get(</a>"rescale_mode", <a id="change">"tf"</a><a id="change">)</a>

    inputs = keras.layers.Input(shape=input_shape)
    bn_eps = TORCH_BATCH_NORM_EPSILON if is_torch_mode else TF_BATCH_NORM_EPSILON
</code></pre><h3>After Change</h3><pre><code class='java'>
    first_conv_filter = blocks_config.get("first_conv_filter", out_channels[0])
    output_conv_filter = blocks_config.get("output_conv_filter", 1280)
    kernel_sizes = blocks_config.get("kernel_sizes", [3] * len(depthes))
    rescale_mode = "tf"<a id="change"> if pretrained is not None</a> and pretrained.startswith("imagenet21k")<a id="change"> else </a>"torch"

    inputs = keras.layers.Input(shape=input_shape)
    bn_eps = TORCH_BATCH_NORM_EPSILON if is_torch_mode else TF_BATCH_NORM_EPSILON</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/b7f3fcbe4b70bd5b990f1e98137e014c3e8f9c32#diff-ca0aa8fcf8f473c18b46044b97ef65e9f0ca50c53d983f512a0e6c58c0f6cd03L86' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290820</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: b7f3fcbe4b70bd5b990f1e98137e014c3e8f9c32</div><div id='time'> Time: 2022-01-13</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: keras_cv_attention_models/efficientnet/efficientnet_v2.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: EfficientNetV2(12)</div><div id='n_method'> N Method Name: EfficientNetV2(12)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: keras_cv_attention_models/efficientnet/efficientnet_v2.py</div><div id='n_file'> N File Name: keras_cv_attention_models/efficientnet/efficientnet_v2.py</div><div id='m_start'> M Start Line: 112</div><div id='m_end'> M End Line: 112</div><div id='n_start'> N Start Line: 112</div><div id='n_end'> N End Line: 112</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            agent_info(task),
            task["priority"] if task["scheduler_type"] == "priority" else "N/A",
            task["resource_pool"],
            ",".join(map(str, sorted(pp["port"] for pp in <a id="change">task.get("proxy_ports"</a>, []<a id="change">)</a>))),
        ]
        for task_id, task in sorted(
            tasks.items(),</code></pre><h3>After Change</h3><pre><code class='java'>
            task.slotsNeeded,
            render.format_time(task.registeredTime),
            agent_info(task),
            task.priority<a id="change"> if task.schedulerType == "priority"</a><a id="change"> else </a>"N/A",
            task.resourcePool,
            ",".join(
                map(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/7ee018d08120dc391db4b6a0c833bbec60186160#diff-f79f8690b22cd1fe8bd82ee2e5f8ca5ea12e29806a86724a2fb730fd51877a05L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290835</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: 7ee018d08120dc391db4b6a0c833bbec60186160</div><div id='time'> Time: 2023-04-05</div><div id='author'> Author: 124635598+jgongd@users.noreply.github.com</div><div id='file'> File Name: harness/determined/cli/task.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: render_tasks(2)</div><div id='n_method'> N Method Name: render_tasks(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/cli/task.py</div><div id='n_file'> N File Name: harness/determined/cli/task.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 62</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            "BFLOAT16": "float",
            "DOUBLE": "float",
        }
        return Dtype(<a id="change">conversion_map.get(</a>onnx_dtype, <a id="change">&quotint&quot</a><a id="change">)</a>)

    @staticmethod
    def create_nncf_graph(onnx_model: ModelProto) -&gt; NNCFGraph:</code></pre><h3>After Change</h3><pre><code class='java'>
        :param np_dtype: ONNX data type.
        :return: NNCF data type.
        
        return Dtype.FLOAT<a id="change"> if onnx_dtype == int(onnx.TensorProto.FLOAT)</a><a id="change"> else </a>Dtype.INTEGER

    @staticmethod
    def create_nncf_graph(onnx_model: onnx.ModelProto) -&gt; NNCFGraph:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/nncf/commit/75b78f41178b3b6fc0a011efacbf8829267338ae#diff-34f6e214f50bd0fbacebf970f3c2d89613dd4e85cb3459486337ac4a931a3c71L129' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6290834</div><div id='project'> Project Name: openvinotoolkit/nncf</div><div id='commit'> Commit Name: 75b78f41178b3b6fc0a011efacbf8829267338ae</div><div id='time'> Time: 2023-04-18</div><div id='author'> Author: aleksei.kashapov@intel.com</div><div id='file'> File Name: nncf/onnx/graph/nncf_graph_builder.py</div><div id='m_class'> M Class Name: GraphConverter</div><div id='n_method'> N Class Name: GraphConverter</div><div id='m_method'> M Method Name: convert_onnx_dtype_to_nncf_dtype(1)</div><div id='n_method'> N Method Name: convert_onnx_dtype_to_nncf_dtype(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nncf/onnx/graph/nncf_graph_builder.py</div><div id='n_file'> N File Name: nncf/onnx/graph/nncf_graph_builder.py</div><div id='m_start'> M Start Line: 135</div><div id='m_end'> M End Line: 141</div><div id='n_start'> N Start Line: 137</div><div id='n_end'> N End Line: 137</div><BR>