<html><h3>Pattern ID :40035
</h3><img src='113879567.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
          if bucket.name.startswith(bucket_name+&quot-&quot):
             version+=1

        <a id="change">for </a>i in <a id="change">range(</a>1,version<a id="change">):
          &#47&#47check if any version of bucket name exists in the user&quots buckets
          </a>if bucket_name+&quot-&quot+str(i) in s3_resource.buckets.all():
            bucket_name = bucket_name+&quot-&quot+str(i)

        if bucket_name == master_name:</code></pre><h3>After Change</h3><pre><code class='java'>
                                         aws_secret_access_key=os.environ.get("AWS_SECRET_ACCESS_KEY"), 
                                         region_name= os.environ.get("AWS_REGION"))    
    
    account_number<a id="change"> = </a>user_session.client(
        &quotsts&quot).get_caller_identity().get(&quotAccount&quot)    
    bucket_name = &quotaimodelshare&quot + os.environ.get("username").lower()+<a id="change">str(</a>account_number<a id="change">)</a>
    master_name = &quotaimodelshare&quot + os.environ.get("username").lower()+str(account_number)
    from botocore.client import ClientError
    try:
        s3[&quotresource&quot].meta.client.head_bucket(Bucket=bucket_name)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aimodelshare/aimodelshare/commit/7157f9d0aef942b472bcb6919c41a5b14c1c9fc9#diff-437f09e7c28dce03107237756771a508dd0100bbee99c83b508ac81b9ae9d839L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113879567</div><div id='project'> Project Name: aimodelshare/aimodelshare</div><div id='commit'> Commit Name: 7157f9d0aef942b472bcb6919c41a5b14c1c9fc9</div><div id='time'> Time: 2021-05-06</div><div id='author'> Author: 60371043+TheStreett@users.noreply.github.com</div><div id='file'> File Name: aimodelshare/modeluser.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: create_user_getkeyandpassword(0)</div><div id='n_method'> N Method Name: create_user_getkeyandpassword(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: aimodelshare/modeluser.py</div><div id='n_file'> N File Name: aimodelshare/modeluser.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 122</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 111</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert len(genotype) % 2 == 0
    steps = len(genotype) // 2

    <a id="change">for </a>i in <a id="change">range(</a>steps<a id="change">):
        </a>g.node(str(i), fillcolor=&quotlightblue&quot)

    for i in range(steps):
        for k in [2*i, 2*i+1]:</code></pre><h3>After Change</h3><pre><code class='java'>
    n_nodes = len(genotype) // 2
    
    xs = [&quotp0&quot,&quotp1&quot]
    i<a id="change"> = </a>0
    for node in range(n_nodes):
        g.node(&quotadd&quot+str(node), fillcolor=&quotlightblue&quot)
        with g.subgraph() as s:
            s.attr(rank=&quotsame&quot)
            for _ in range(2):
                op, x_i = genotype[i]
                s.node(str(i), label=op, fillcolor=&quotghostwhite&quot)
                g.edge(xs[x_i], <a id="change">str(</a>i<a id="change">)</a>)
                g.edge(str(i),&quotadd&quot+str(node))
                i += 1
        xs.append(&quotadd&quot+str(node))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/woodywff/nas_3d_unet/commit/a545a3bf9ef55ec3f9d7881f84079f44027753e6#diff-38a8c5358d8bcad31aafbfd0c7db8c8edeb23a4b2162eb9e835438d204a20913L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113879569</div><div id='project'> Project Name: woodywff/nas_3d_unet</div><div id='commit'> Commit Name: a545a3bf9ef55ec3f9d7881f84079f44027753e6</div><div id='time'> Time: 2020-04-07</div><div id='author'> Author: woodywff@aliyun.com</div><div id='file'> File Name: helper.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: visualize(4)</div><div id='n_method'> N Method Name: visualize(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: helper.py</div><div id='n_file'> N File Name: helper.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 70</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 71</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    :return: tuple(command_success: bool, latest_version_value: str)
    
    get_latest_version_command = f"{docker_exec_cmd} yolk -M {package} -f version "
    <a id="change">for </a>attempt in <a id="change">range(</a>num_tries<a id="change">):
        </a>run_out = run(get_latest_version_command, warn=True, hide=True)
        if run_out.failed or run_out.stdout:
            break
        LOGGER.info(f"Failed {attempt}: &quot{get_latest_version_command}&quot returned &quot{run_out.stdout}&quot")</code></pre><h3>After Change</h3><pre><code class='java'>
    :return: tuple(command_success: bool, latest_version_value: str)
    
    pypi_package_info = requests.get(f"https://pypi.org/pypi/{package}/json")
    data<a id="change"> = </a>json.loads(pypi_package_info.text)
    versions = data["releases"].keys()
    return <a id="change">str(</a>max(Version(v) for v in versions)<a id="change">)</a>


@pytest.mark.model("N/A")
@pytest.mark.skipif(not is_dlc_cicd_context(), reason="Skipping test because it is not running in dlc cicd infra")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/6d858dd378025f9a13ab5e63596ec44249ffbe79#diff-8ce7c16e1cb38f87691246af2827b12119cbad82caa889a4ca646e81600520e1L84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 113879571</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 6d858dd378025f9a13ab5e63596ec44249ffbe79</div><div id='time'> Time: 2020-12-23</div><div id='author'> Author: 54188298+saimidu@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/sanity/test_safety_check.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_latest_package_version(1)</div><div id='n_method'> N Method Name: _get_latest_package_version(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/sanity/test_safety_check.py</div><div id='n_file'> N File Name: test/dlc_tests/sanity/test_safety_check.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 96</div><BR>