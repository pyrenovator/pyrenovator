<html><h3>Pattern ID :6511
</h3><img src='22555261.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    success_percentage = list(sorted_dict.values())

    yticks.extend(success_percentage)
    <a id="change">intensities.extend(</a>extracted_intensities<a id="change">)</a>

    ax.plot(extracted_intensities, success_percentage, color=color, label=label)

def cleanticks(ticks):</code></pre><h3>After Change</h3><pre><code class='java'>

    if boxplot:
        sorted_rewards_dict = dict(sorted(rewards_dict.items(), key=lambda item: item[0]))
        sorted_rewards<a id="change"> = </a>list(sorted_rewards_dict.values())

        if <a id="change">len(sorted_rewards) == 0</a>:
            return

        ax.boxplot(sorted_rewards, positions= [ np.round(x, 2) for x in extracted_frequencies ], widths=0.03,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jderobot/rl-studio/commit/f0b7c9ec051492927818df1329c2eed1eda6ed1d#diff-4d4b0a98fadc5c8531dc3b637e40a22825f76a69d3c069073d05e12410c5fc90L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22555261</div><div id='project'> Project Name: jderobot/rl-studio</div><div id='commit'> Commit Name: f0b7c9ec051492927818df1329c2eed1eda6ed1d</div><div id='time'> Time: 2023-01-20</div><div id='author'> Author: ruben.lucas.zaragoza@hotmail.com</div><div id='file'> File Name: rl_studio/agents/utilities/plot_multiple_graphs_frequencies.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: plot_freq(4)</div><div id='n_method'> N Method Name: plot_freq(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rl_studio/agents/utilities/plot_multiple_graphs_frequencies.py</div><div id='n_file'> N File Name: rl_studio/agents/utilities/plot_multiple_graphs_frequencies.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        ret = []
        for batch_idxs in list_container:
            <a id="change">ret.extend(</a>batch_idxs<a id="change">)</a>

        return iter(ret)

    def __len__(self):</code></pre><h3>After Change</h3><pre><code class='java'>
                    batch_idxs_dict[pid].append(batch_idxs)
                    batch_idxs = []

        avai_pids<a id="change"> = </a>copy.deepcopy(self.pids)
        final_idxs = []

        while <a id="change">len(avai_pids) &gt;= self.num_pids_per_batch</a>:
            selected_pids = random.sample(avai_pids, self.num_pids_per_batch)
            for pid in selected_pids:
                batch_idxs = batch_idxs_dict[pid].pop(0)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vlsomers/bpbreid/commit/9aa1aa24c0eaafb95f3a0a580de9df38e803e039#diff-22c42b551277fe2cffe13d496bb622aad2594d9c280cc38baf1d26bb42e4f719L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22555264</div><div id='project'> Project Name: vlsomers/bpbreid</div><div id='commit'> Commit Name: 9aa1aa24c0eaafb95f3a0a580de9df38e803e039</div><div id='time'> Time: 2018-08-16</div><div id='author'> Author: k.zhou@qmul.ac.uk</div><div id='file'> File Name: torchreid/samplers.py</div><div id='m_class'> M Class Name: RandomIdentitySampler</div><div id='n_method'> N Class Name: RandomIdentitySampler</div><div id='m_method'> M Method Name: __iter__(1)</div><div id='n_method'> N Method Name: __iter__(1)</div><div id='m_parent_class'> M Parent Class: Sampler</div><div id='n_parent_class'> N Parent Class: Sampler</div><div id='m_file'> M File Name: torchreid/samplers.py</div><div id='n_file'> N File Name: torchreid/samplers.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 61</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 might be expensive though
        note_ons = [(n.start, n.pitch, n.velocity, program) for n in inst.notes]
        note_offs = [(n.end, n.pitch, 0, program) for n in inst.notes]
        <a id="change">inst_events.extend(</a>note_ons+note_offs<a id="change">)</a>
    if len(inst_events) &lt; 64:
        return
    time, pitch, vel, prog = zip(*sorted(inst_events))
    delta = torch.FloatTensor([0, *time]).diff(1)</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 dequantization at data loading time
    time_margin = 1e-3

    events<a id="change"> = </a>[]
    &#47&#47 for each instrument
    for inst in mid.instruments:
        inst.remove_invalid_notes()
        program = inst.program + 128*inst.is_drum
        
        &#47&#47 break out by pitch
        nbp = defaultdict(list)
        for n in inst.notes:
            nbp[n.pitch].append(n)
            
        &#47&#47 shorten all notes so they end 2*$margin before next (within pitch)
        for seq in nbp.values():
            for i,n in enumerate(seq[:-1]):
                max_end = seq[i+1].start-2*time_margin
                if n.end &gt; max_end:
                    n.end = max_end
                &#47&#47 and flatten again
                &#47&#47 converting note offs to 0 velocity
                &#47&#47 also prevent any note ons from having 0 velocity
                events.append((n.start, n.pitch, max(1, n.velocity), program))
                events.append((n.end, n.pitch, 0, program))

    if <a id="change">len(events) &lt; 64</a>:
        return

    time, pitch, vel, prog = zip(*events)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/intelligent-instruments-lab/iil-python-tools/commit/78c2ab9e98adc304bebc8cff2541364d27d91dab#diff-8af53289ffb9f0e2a971a5b93eff5e24e5fe8ee26ecbc05887330392031aa724L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22555268</div><div id='project'> Project Name: intelligent-instruments-lab/iil-python-tools</div><div id='commit'> Commit Name: 78c2ab9e98adc304bebc8cff2541364d27d91dab</div><div id='time'> Time: 2022-04-15</div><div id='author'> Author: victor.shepardson@gmail.com</div><div id='file'> File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: process(1)</div><div id='n_method'> N Method Name: process(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='n_file'> N File Name: notepredictor/scripts/lakh_prep_multitrack.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 50</div><BR>