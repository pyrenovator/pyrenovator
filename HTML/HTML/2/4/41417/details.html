<html><h3>Pattern ID :41417
</h3><img src='116523440.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def in_manifold(X, r, eps=1e-4):
        norm = X.norm(dim=-1)
        rs = torch.full_like(norm, r)
        <a id="change">return </a><a id="change">(torch.norm(norm - rs, p=float("inf")) &lt; eps).all()</a>

    def extra_repr(self):
        return _extra_repr(n=self.n, r=self.r, tensorial_size=self.tensorial_size)
</code></pre><h3>After Change</h3><pre><code class='java'>
        return torch.zeros_like(x)

    def in_manifold(self, x, eps=1e-4):
        <a id="change">return </a>_in_sphere(x, self.radius, eps)

    def sample(self):
        r</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lezcano/geotorch/commit/dc26861e87c0b631e595561d0151a4eb4fed9424#diff-c97d9b16f9d251ac114d9962b4508845b9386b74fcd74b2e06e77d9d49febe17L126' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116523440</div><div id='project'> Project Name: lezcano/geotorch</div><div id='commit'> Commit Name: dc26861e87c0b631e595561d0151a4eb4fed9424</div><div id='time'> Time: 2020-12-30</div><div id='author'> Author: lezcano-93@hotmail.com</div><div id='file'> File Name: geotorch/sphere.py</div><div id='m_class'> M Class Name: Sphere</div><div id='n_method'> N Class Name: Sphere</div><div id='m_method'> M Method Name: in_manifold(3)</div><div id='n_method'> N Method Name: in_manifold(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: geotorch/sphere.py</div><div id='n_file'> N File Name: geotorch/sphere.py</div><div id='m_start'> M Start Line: 126</div><div id='m_end'> M End Line: 128</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Checks if buffers are of type UninitializedBuffer and returns 
        True only if none of them are.
        
        <a id="change">return </a><a id="change">torch.Tensor([type(buffer) != torch.nn.parameter.UninitializedBuffer 
                             for buffer in self.buffers()]).all()</a>
    
    def init_states_with_shape(self, shape, randomize: bool = False) -&gt; None:
        
        Initialise states/buffers with either zeros or random</code></pre><h3>After Change</h3><pre><code class='java'>
        for buff in self.buffers():
            if isinstance(buff, torch.nn.parameter.UninitializedBuffer):
                return False
        <a id="change">return </a>True

    def init_states_with_shape(self, shape, randomize: bool = False) -&gt; None:
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/synsense/sinabs/commit/bcc93fd68a63b13eaaf5c7d0c83231cce6d27d65#diff-9410c6ae7597d87c41e04ddd2e2b6fe961a249612004c4c9cc3c85bc66a819d0L56' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116523435</div><div id='project'> Project Name: synsense/sinabs</div><div id='commit'> Commit Name: bcc93fd68a63b13eaaf5c7d0c83231cce6d27d65</div><div id='time'> Time: 2021-11-30</div><div id='author'> Author: gregor.lenz@synsense.ai</div><div id='file'> File Name: sinabs/layers/stateful_layer.py</div><div id='m_class'> M Class Name: StatefulLayer</div><div id='n_method'> N Class Name: StatefulLayer</div><div id='m_method'> M Method Name: are_states_initialised(1)</div><div id='n_method'> N Method Name: are_states_initialised(1)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: sinabs/layers/stateful_layer.py</div><div id='n_file'> N File Name: sinabs/layers/stateful_layer.py</div><div id='m_start'> M Start Line: 61</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 64</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return False
        D = 0.5 * (X + X.transpose(-2, -1))
        error = normalized_matrix_one_norm(D)
        <a id="change">return </a><a id="change">(error &lt; eps).all()</a>.item()
</code></pre><h3>After Change</h3><pre><code class='java'>

    @staticmethod
    def in_manifold(X):
        <a id="change">return </a>(
            X.dim() &gt;= 2
            and X.size(-2) == X.size(-1)
            and torch.allclose(X, -X.transpose(-2, -1))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lezcano/geotorch/commit/55c19c8acf171807d4c30fc59dee1619ed0e0539#diff-135731ed47a025822b719742175e901608758aa81edd91664f01de8174ad28b3L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116523438</div><div id='project'> Project Name: lezcano/geotorch</div><div id='commit'> Commit Name: 55c19c8acf171807d4c30fc59dee1619ed0e0539</div><div id='time'> Time: 2021-02-19</div><div id='author'> Author: lezcano-93@hotmail.com</div><div id='file'> File Name: geotorch/skew.py</div><div id='m_class'> M Class Name: Skew</div><div id='n_method'> N Class Name: Skew</div><div id='m_method'> M Method Name: in_manifold(1)</div><div id='n_method'> N Method Name: in_manifold(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: geotorch/skew.py</div><div id='n_file'> N File Name: geotorch/skew.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        where True means that the state is $s_0$ of the DAG.
        
        assert self.__class__.state_ndim is not None
        out = <a id="change">self.states == self.make_initial_states_tensor(self.batch_shape)</a>
        for _ in range(self.__class__.state_ndim):
            out = <a id="change">out.all(dim=-1)</a>
        <a id="change">return </a>out

    @property
    def is_sink_state(self) -&gt; DonesTensor:</code></pre><h3>After Change</h3><pre><code class='java'>
        source_states_tensor = self.__class__.s_0.repeat(
            *self.batch_shape, *((1,) * len(self.__class__.state_shape))
        )
        <a id="change">return </a>self.compare(source_states_tensor)

    @property
    def is_sink_state(self) -&gt; DonesTensor:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/saleml/gfn/commit/23f988f3d3560b0c724735e727c3c301594cce68#diff-d0b00be0fc54ebd6ecca86dff6fcb3a480df90cb23cbf0caac0b810a39b31926L224' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116523439</div><div id='project'> Project Name: saleml/gfn</div><div id='commit'> Commit Name: 23f988f3d3560b0c724735e727c3c301594cce68</div><div id='time'> Time: 2022-10-19</div><div id='author'> Author: salemlahlou9@gmail.com</div><div id='file'> File Name: gfn/containers/states.py</div><div id='m_class'> M Class Name: States</div><div id='n_method'> N Class Name: States</div><div id='m_method'> M Method Name: is_initial_state(1)</div><div id='n_method'> N Method Name: is_initial_state(1)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: gfn/containers/states.py</div><div id='n_file'> N File Name: gfn/containers/states.py</div><div id='m_start'> M Start Line: 228</div><div id='m_end'> M End Line: 232</div><div id='n_start'> N Start Line: 249</div><div id='n_end'> N End Line: 252</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        sink_states = self.__class__.s_f.repeat(
            *self.batch_shape, *((1,) * self.__class__.state_ndim)
        )
        out = <a id="change">self.states == sink_states</a>

        for _ in range(self.__class__.state_ndim):
            out = <a id="change">out.all(dim=-1)</a>
        <a id="change">return </a>out

    def make_masks(self) -&gt; ForwardMasksTensor:
        assert self.__class__.n_actions is not None</code></pre><h3>After Change</h3><pre><code class='java'>
        sink_states = self.__class__.s_f.repeat(
            *self.batch_shape, *((1,) * len(self.__class__.state_shape))
        )
        <a id="change">return </a>self.compare(sink_states)

    def save(self, path: str) -&gt; None:
        torch.save(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/saleml/gfn/commit/23f988f3d3560b0c724735e727c3c301594cce68#diff-d0b00be0fc54ebd6ecca86dff6fcb3a480df90cb23cbf0caac0b810a39b31926L235' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116523437</div><div id='project'> Project Name: saleml/gfn</div><div id='commit'> Commit Name: 23f988f3d3560b0c724735e727c3c301594cce68</div><div id='time'> Time: 2022-10-19</div><div id='author'> Author: salemlahlou9@gmail.com</div><div id='file'> File Name: gfn/containers/states.py</div><div id='m_class'> M Class Name: States</div><div id='n_method'> N Class Name: States</div><div id='m_method'> M Method Name: is_sink_state(1)</div><div id='n_method'> N Method Name: is_sink_state(1)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: gfn/containers/states.py</div><div id='n_file'> N File Name: gfn/containers/states.py</div><div id='m_start'> M Start Line: 239</div><div id='m_end'> M End Line: 247</div><div id='n_start'> N Start Line: 259</div><div id='n_end'> N End Line: 262</div><BR>