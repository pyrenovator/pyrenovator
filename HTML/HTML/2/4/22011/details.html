<html><h3>Pattern ID :22011
</h3><img src='69864290.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        for track, estimated_track in zip(mus.tracks, est.tracks):
            estimates = {}
            <a id="change">for </a>target in self.sources + [&quotaccompaniment&quot]<a id="change">:
                </a>estimates[target] = estimated_track.targets[target].audio

            &#47&#47 Evaluate using museval
            scores = museval.eval_mus_track(track, estimates, output_dir=self.json_dir)</code></pre><h3>After Change</h3><pre><code class='java'>
            estimated_accompaniment = 0

            for target in self.sources:
                estimated_path = <a id="change">os.path.join(</a>self.estimates_dir, name, "{}.wav".format(target)<a id="change">)</a>
                estimated<a id="change">, _ = </a><a id="change">torchaudio.load(</a>estimated_path<a id="change">)</a>
                estimated = estimated.numpy().transpose(1, 0)
                estimates[target] = estimated
                estimated_accompaniment += estimated
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/47bf376b81ab3a2a1dae78ac3dd78f7458fbb8a1#diff-7c5b1018ab6bf19cc2f7c1fc385abd4adb493c178cdd1548dcae8770f80fb8fdL359' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69864290</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 47bf376b81ab3a2a1dae78ac3dd78f7458fbb8a1</div><div id='time'> Time: 2021-08-14</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='m_class'> M Class Name: AdhocTester</div><div id='n_method'> N Class Name: AdhocTester</div><div id='m_method'> M Method Name: eval_all(1)</div><div id='n_method'> N Method Name: eval_all(1)</div><div id='m_parent_class'> M Parent Class: TesterBase</div><div id='n_parent_class'> N Parent Class: TesterBase</div><div id='m_file'> M File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='n_file'> N File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='m_start'> M Start Line: 360</div><div id='m_end'> M End Line: 372</div><div id='n_start'> N Start Line: 359</div><div id='n_end'> N End Line: 383</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def run(self):
        results = museval.EvalStore(frames_agg=&quotmedian&quot, tracks_agg=&quotmedian&quot)

        <a id="change">for </a>track, estimated_track in zip(self.mus.tracks, self.estimated_mus.tracks)<a id="change">:
            </a>scores = self.run_one_track(track, estimated_track)
            results.add_track(scores)
        
        print(results)</code></pre><h3>After Change</h3><pre><code class='java'>
            estimated_accompaniment = 0

            for target in self.sources:
                estimated_path = <a id="change">os.path.join(</a>self.estimates_dir, name, "{}.wav".format(target)<a id="change">)</a>
                estimated<a id="change">, _ = </a><a id="change">torchaudio.load(</a>estimated_path<a id="change">)</a>
                estimated = estimated.numpy().transpose(1, 0)
                estimates[target] = estimated
                if target != &quotvocals&quot:
                    estimated_accompaniment += estimated</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/ffe57efd9e2dde3201347389cb13de92cf222706#diff-15331cbdf668a723eedc039e62b2d633f1c798a3a164f90e427a76226bceccbcL290' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69864288</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: ffe57efd9e2dde3201347389cb13de92cf222706</div><div id='time'> Time: 2021-11-02</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: egs/musdb18/common/src/driver.py</div><div id='m_class'> M Class Name: EvaluaterBase</div><div id='n_method'> N Class Name: EvaluaterBase</div><div id='m_method'> M Method Name: run(1)</div><div id='n_method'> N Method Name: run(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/musdb18/common/src/driver.py</div><div id='n_file'> N File Name: egs/musdb18/common/src/driver.py</div><div id='m_start'> M Start Line: 293</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 302</div><div id='n_end'> N End Line: 329</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        num_videos
) -&gt; None:
    model.load_actor(log_dir)
    <a id="change">for </a>i in range(num_videos)<a id="change">:
        </a>env = Monitor(
            env_fn(),
            directory=f&quot{log_dir}/videos/{i+1}&quot,
            force=True</code></pre><h3>After Change</h3><pre><code class='java'>
        model,
        log_dir,
) -&gt; None:
    model<a id="change"> = </a><a id="change">model.load(os.path.join(</a>log_dir, &quotnetworks.zip&quot<a id="change">)</a><a id="change">)</a>
    episode_rewards, episode_lengths = evaluate_policy(
        model,
        env_fn(),
        n_eval_episodes=5,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zhihanyang2022/off-policy-continuous-control/commit/454ab46f5e7f237c6ab0bba953c6d1d28c10922b#diff-0e5386f37623f415fe971df435c8835b2f8e970af92c942414bd929e62703957L246' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69864289</div><div id='project'> Project Name: zhihanyang2022/off-policy-continuous-control</div><div id='commit'> Commit Name: 454ab46f5e7f237c6ab0bba953c6d1d28c10922b</div><div id='time'> Time: 2021-05-29</div><div id='author'> Author: yangz2@carleton.edu</div><div id='file'> File Name: offpcc/basics/run_fns_sb3.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_and_visualize_policy(3)</div><div id='n_method'> N Method Name: load_and_visualize_policy(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: offpcc/basics/run_fns_sb3.py</div><div id='n_file'> N File Name: offpcc/basics/run_fns_sb3.py</div><div id='m_start'> M Start Line: 250</div><div id='m_end'> M End Line: 259</div><div id='n_start'> N Start Line: 242</div><div id='n_end'> N End Line: 251</div><BR>