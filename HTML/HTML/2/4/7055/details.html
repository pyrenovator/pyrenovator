<html><h3>Pattern ID :7055
</h3><img src='23439365.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    ctypes.CDLL(nccl_lib_name, dlopen_flags)

    nccl_op_dir = os.path.join(jittor_path, "extern", "cuda", "nccl", "ops")
    nccl_op_files = [os.path.join(nccl_op_dir, name) for name in <a id="change">os.listdir(</a>nccl_op_dir<a id="change">)</a>]
    nccl_ops = compile_custom_ops(nccl_op_files, 
        extra_flags=f" -I&quot{nccl_include_path}&quot {mpi_compile_flags} ")
    LOG.vv("Get nccl_ops: "+str(dir(nccl_ops)))</code></pre><h3>After Change</h3><pre><code class='java'>

    nccl_src_dir = os.path.join(jittor_path, "extern", "cuda", "nccl")
    nccl_src_files = []
    <a id="change">for </a>r, _, f in os.walk(nccl_src_dir)<a id="change">:
        </a>for fname in f:
            <a id="change">nccl_src_files.append(</a>os.path.join(r, fname)<a id="change">)</a>

    nccl_ops = compile_custom_ops(nccl_src_files, 
        extra_flags=f" -I&quot{nccl_include_path}&quot {mpi_compile_flags} ")
    LOG.vv("Get nccl_ops: "+str(dir(nccl_ops)))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/5e5c8de82f46fa7036e21fb3c53babfdea3e390f#diff-bda202dc1155b432eb6f176d27b53e315b98965e056858275aeec365a21d7f72L268' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23439365</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 5e5c8de82f46fa7036e21fb3c53babfdea3e390f</div><div id='time'> Time: 2020-04-02</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/compile_extern.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: setup_nccl(0)</div><div id='n_method'> N Method Name: setup_nccl(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/jittor/compile_extern.py</div><div id='n_file'> N File Name: python/jittor/compile_extern.py</div><div id='m_start'> M Start Line: 268</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 268</div><div id='n_end'> N End Line: 302</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    ctypes.CDLL(nccl_lib_name, dlopen_flags)

    nccl_op_dir = os.path.join(jittor_path, "extern", "cuda", "nccl", "ops")
    nccl_op_files = [os.path.join(nccl_op_dir, name) for name in <a id="change">os.listdir(</a>nccl_op_dir<a id="change">)</a>]
    nccl_ops = compile_custom_ops(nccl_op_files, 
        extra_flags=f" -I&quot{nccl_include_path}&quot {mpi_compile_flags} ")
    LOG.vv("Get nccl_ops: "+str(dir(nccl_ops)))</code></pre><h3>After Change</h3><pre><code class='java'>
    nccl_src_dir = os.path.join(jittor_path, "extern", "cuda", "nccl")
    nccl_src_files = []
    for r, _, f in os.walk(nccl_src_dir):
        <a id="change">for fname</a> in f<a id="change">:
            </a><a id="change">nccl_src_files.append(</a>os.path.join(r, fname)<a id="change">)</a>

    nccl_ops = compile_custom_ops(nccl_src_files, 
        extra_flags=f" -I&quot{nccl_include_path}&quot {mpi_compile_flags} ")
    LOG.vv("Get nccl_ops: "+str(dir(nccl_ops)))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/5e5c8de82f46fa7036e21fb3c53babfdea3e390f#diff-bda202dc1155b432eb6f176d27b53e315b98965e056858275aeec365a21d7f72L264' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23439364</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 5e5c8de82f46fa7036e21fb3c53babfdea3e390f</div><div id='time'> Time: 2020-04-02</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/compile_extern.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: setup_nccl(0)</div><div id='n_method'> N Method Name: setup_nccl(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/jittor/compile_extern.py</div><div id='n_file'> N File Name: python/jittor/compile_extern.py</div><div id='m_start'> M Start Line: 268</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 268</div><div id='n_end'> N End Line: 302</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if not osp.exists(plugins_dir):
            return plugins

        for plugin_name in <a id="change">os.listdir(</a>plugins_dir<a id="change">)</a>:
            p = osp.join(plugins_dir, plugin_name)
            if osp.isfile(p) and p.endswith(&quot.py&quot):
                plugins.append((plugins_dir, plugin_name, None))</code></pre><h3>After Change</h3><pre><code class='java'>
        plugins = []

        for pattern in (&quot*.py&quot, &quot*/*.py&quot):
            <a id="change">for path</a> in glob.glob(
                    osp.join(glob.escape(plugins_dir), pattern))<a id="change">:
                </a>if not osp.isfile(path):
                    continue

                path_rel = osp.relpath(path, plugins_dir)
                name_parts = split_path(osp.splitext(path_rel)[0])

                &#47&#47 a module with a dot in the name won&quott load correctly
                if any(&quot.&quot in part for part in name_parts):
                    log.warning(
                        "Python file &quot%s&quot in directory &quot%s&quot can&quott be imported "
                        "due to a dot in the name; skipping.",
                        path_rel, plugins_dir)
                    continue
                <a id="change">plugins.append(</a>&quot.&quot.join(name_parts)<a id="change">)</a>

        return plugins

    @classmethod</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/7a1a0e1dd7bf603ae02ad96b49516000f4f575fe#diff-40aee9fece53ea246cc894c7ed3d4388aea3e8b2e84fe6a8c2206d481d9aa19eL111' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23439366</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: 7a1a0e1dd7bf603ae02ad96b49516000f4f575fe</div><div id='time'> Time: 2021-10-21</div><div id='author'> Author: roman.donchenko@intel.com</div><div id='file'> File Name: datumaro/components/environment.py</div><div id='m_class'> M Class Name: Environment</div><div id='n_method'> N Class Name: Environment</div><div id='m_method'> M Method Name: _find_plugins(1)</div><div id='n_method'> N Method Name: _find_plugins(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: datumaro/components/environment.py</div><div id='n_file'> N File Name: datumaro/components/environment.py</div><div id='m_start'> M Start Line: 112</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 131</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )

    ipynb_files = [
        fi for fi in <a id="change">os.listdir(</a>zenml_tutorial_path<a id="change">)</a> if fi.endswith(".ipynb")
    ]
    ipynb_files.sort()
    console.print(zenml_go_notebook_tutorial_message(ipynb_files), width=80)</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 get list of all .ipynb files in zenml_tutorial_path
    ipynb_files = []
    <a id="change">for </a>dirpath, _, <a id="change">filenames</a> in os.walk(zenml_tutorial_path)<a id="change">:
        </a>for filename in filenames:
            if filename.endswith(".ipynb"):
                <a id="change">ipynb_files.append(</a>os.path.join(dirpath, filename)<a id="change">)</a>

    ipynb_files.sort()
    console.print(zenml_go_notebook_tutorial_message(ipynb_files), width=80)
    input("Press ENTER to continue...")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/395d761ef5878a71f13f9ea41a6c3e7697cd2199#diff-e8d3f72f011c10a2ba4aea7c42df0a523b89c59eb7459e1130a1ec34c2651469L181' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23439360</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 395d761ef5878a71f13f9ea41a6c3e7697cd2199</div><div id='time'> Time: 2022-05-24</div><div id='author'> Author: felix@zenml.io</div><div id='file'> File Name: src/zenml/cli/base.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: go(0)</div><div id='n_method'> N Method Name: go(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/zenml/cli/base.py</div><div id='n_file'> N File Name: src/zenml/cli/base.py</div><div id='m_start'> M Start Line: 204</div><div id='m_end'> M End Line: 235</div><div id='n_start'> N Start Line: 205</div><div id='n_end'> N End Line: 248</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.data: List[Tuple[str, Dict[str, Any]]] = []
        np_dtype = np.float32

        for img_path in <a id="change">os.listdir(</a>tmp_root<a id="change">)</a>:

            &#47&#47 File existence check
            if not os.path.exists(os.path.join(tmp_root, img_path)):</code></pre><h3>After Change</h3><pre><code class='java'>

            if recognition_task:
                crops = crop_bboxes_from_image(img_path=os.path.join(tmp_root, img_path), geoms=coords)
                <a id="change">for </a>crop, <a id="change">label</a> in zip(crops, labels)<a id="change">:
                    </a><a id="change">self.data.append(</a>(crop, dict(labels=[label]))<a id="change">)</a>
            else:
                self.data.append((img_path, dict(boxes=coords, labels=labels)))

        self.root = tmp_root</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mindee/doctr/commit/624ee6c134e54f97d979789ae764d120b239a7d5#diff-90b4a56891c8d990a63f495d9cc9951fcd38ceedded0b218fbede5421162e51eL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23439358</div><div id='project'> Project Name: mindee/doctr</div><div id='commit'> Commit Name: 624ee6c134e54f97d979789ae764d120b239a7d5</div><div id='time'> Time: 2022-04-27</div><div id='author'> Author: felixdittrich92@gmail.com</div><div id='file'> File Name: doctr/datasets/sroie.py</div><div id='m_class'> M Class Name: SROIE</div><div id='n_method'> N Class Name: SROIE</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: VisionDataset</div><div id='n_parent_class'> N Parent Class: VisionDataset</div><div id='m_file'> M File Name: doctr/datasets/sroie.py</div><div id='n_file'> N File Name: doctr/datasets/sroie.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 93</div><BR>