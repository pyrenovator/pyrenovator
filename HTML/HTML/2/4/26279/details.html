<html><h3>Pattern ID :26279
</h3><img src='79040886.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                pad([f.sent_rep_token_ids for f in features], -1), dtype=torch.long
            )
            all_sent_rep_token_ids_masks = ~(all_sent_rep_token_ids_padded == -1)
            all_sent_rep_token_ids_padded[all_sent_rep_token_ids_padded == -1]<a id="change"> = </a>0

            all_input_ids = torch.tensor(
                [f.input_ids for f in features], dtype=torch.long
            )
            all_attention_masks = torch.tensor(
                [f.attention_mask for f in features], dtype=torch.long
            )
            all_labels = torch.tensor(
                pad([f.labels for f in features], 0), dtype=torch.long
            )
            all_token_type_ids = torch.tensor(
                pad([f.token_type_ids for f in features], 0), dtype=torch.long
            )
            all_sent_rep_token_ids<a id="change"> = </a><a id="change">torch.tensor(
                </a>all_sent_rep_token_ids_padded<a id="change">, dtype=torch.long
            )</a>
            all_sent_rep_token_ids_masks = torch.tensor(
                all_sent_rep_token_ids_masks, dtype=torch.long
            )
</code></pre><h3>After Change</h3><pre><code class='java'>
                all_sent_rep_token_ids_masks = ~(all_sent_rep_token_ids == -1)
                all_sent_rep_token_ids[all_sent_rep_token_ids == -1] = 0
                final_tensors.append(all_sent_rep_token_ids)
                <a id="change">final_tensors.append(</a>all_sent_rep_token_ids_masks<a id="change">)</a>

            dataset = TensorDataset(*final_tensors)

        elif return_type == "lists":</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/hhousen/transformersum/commit/78035207adf6efb2e102e7a703f694df27075c4a#diff-d731aa0a69942c45b89e96b58be82442077536914f50df9a49d7ce411b10e15dL538' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79040886</div><div id='project'> Project Name: hhousen/transformersum</div><div id='commit'> Commit Name: 78035207adf6efb2e102e7a703f694df27075c4a</div><div id='time'> Time: 2020-04-06</div><div id='author'> Author: hayden@haydenhousen.com</div><div id='file'> File Name: data.py</div><div id='m_class'> M Class Name: SentencesProcessor</div><div id='n_method'> N Class Name: SentencesProcessor</div><div id='m_method'> M Method Name: get_features(17)</div><div id='n_method'> N Method Name: get_features(15)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: data.py</div><div id='n_file'> N File Name: data.py</div><div id='m_start'> M Start Line: 555</div><div id='m_end'> M End Line: 610</div><div id='n_start'> N Start Line: 538</div><div id='n_end'> N End Line: 675</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if self._ripple_generation == &quotdistance_density&quot:
                selected_nodes = find_influential_nodes.find_influential_nodes(graph.target_feature, self._radius, self._topk)
            receivers_list = selected_nodes
            senders_list<a id="change"> = </a>selected_nodes
            senders = torch.cat(
                (torch.tensor(senders_list, device=device), torch.tensor(receivers_list, device=device)), dim=0)
            receivers = torch.cat(
                (torch.tensor(receivers_list, device=device), <a id="change">torch.tensor(</a>senders_list<a id="change">, device=device)</a>), dim=0)

            model_type = graph.model_type
            if model_type == &quotcloth_model&quot or model_type == &quotdeform_model&quot:
                relative_target_feature = (torch.index_select(input=target_feature, dim=0, index=senders) -
                                           torch.index_select(input=target_feature, dim=0, index=receivers))
                relative_mesh_pos<a id="change"> = </a>(torch.index_select(mesh_pos, 0, senders) -
                                     torch.index_select(mesh_pos, 0, receivers))
                edge_features = torch.cat((
                    relative_target_feature,</code></pre><h3>After Change</h3><pre><code class='java'>
                senders=senders)

            edge_sets = graph.edge_sets
            <a id="change">edge_sets.append(</a>world_edges<a id="change">)</a>
            return MultiGraphWithPos(node_features=graph.node_features,
                              edge_sets=edge_sets, target_feature=graph.target_feature,
                              model_type=graph.model_type, node_dynamic=graph.node_dynamic)
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wwmark/meshgraphnets/commit/eed20dd8a346a7fc237279d136f08b426d5d27d4#diff-c1a2f63d32baeb04bde72526fa3320d3e410824f17356f0099f3307c5b4b2591L310' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79040914</div><div id='project'> Project Name: wwmark/meshgraphnets</div><div id='commit'> Commit Name: eed20dd8a346a7fc237279d136f08b426d5d27d4</div><div id='time'> Time: 2022-02-11</div><div id='author'> Author: ruoheng.ma@gmail.com</div><div id='file'> File Name: ripple_machine.py</div><div id='m_class'> M Class Name: RippleMachine</div><div id='n_method'> N Class Name: RippleMachine</div><div id='m_method'> M Method Name: add_meta_edges(4)</div><div id='n_method'> N Method Name: add_meta_edges(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ripple_machine.py</div><div id='n_file'> N File Name: ripple_machine.py</div><div id='m_start'> M Start Line: 310</div><div id='m_end'> M End Line: 344</div><div id='n_start'> N Start Line: 282</div><div id='n_end'> N End Line: 311</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 also use predict value to weight
    &#47&#47 not used first
    if False:
        mask_list_2<a id="change"> = </a>[] 
        for action_id in action_pred:
            if action_id.item() == MOVE_CAMERA_ID:
                mask_list_2.append([MOVE_CAMERA_WEIGHT])
            else:
                mask_list_2.append([NON_MOVE_CAMERA_WEIGHT])
        mask_tensor_2<a id="change"> = </a><a id="change">torch.tensor(</a>mask_list_2<a id="change">)</a>
        mask_tensor = mask_tensor * mask_tensor_2

    mask_tensor = mask_tensor.to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
            elif aid == Smart_pt_id:
                mask_list.append([Smart_pt_weight_S64])
            elif aid == Attack_pt_id:
                <a id="change">mask_list.append(</a>[Attack_pt_weight_S64]<a id="change">)</a>
            elif aid in RAMP.SMALL_LIST:
                mask_list.append([Important_weight_S64])
            else:
                mask_list.append([Other_weight_S64])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liuruoze/mini-alphastar/commit/d622b41942b7b37ea5a63de50aa7c28d00cdd849#diff-52fcdd1abf7f29ae1c0bf367dfcfe57ed2dee07670b38302d95fefad8a2be84fL231' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 79040893</div><div id='project'> Project Name: liuruoze/mini-alphastar</div><div id='commit'> Commit Name: d622b41942b7b37ea5a63de50aa7c28d00cdd849</div><div id='time'> Time: 2021-12-17</div><div id='author'> Author: liuruoze@163.com</div><div id='file'> File Name: alphastarmini/core/sl/sl_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_move_camera_weight_in_SL(5)</div><div id='n_method'> N Method Name: get_move_camera_weight_in_SL(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: alphastarmini/core/sl/sl_utils.py</div><div id='n_file'> N File Name: alphastarmini/core/sl/sl_utils.py</div><div id='m_start'> M Start Line: 237</div><div id='m_end'> M End Line: 302</div><div id='n_start'> N Start Line: 242</div><div id='n_end'> N End Line: 276</div><BR>