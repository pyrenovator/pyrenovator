<html><h3>Pattern ID :24816
</h3><img src='76667943.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.transcripts = transcripts
        self.sample_rate = sample_rate
        self.num_mel_bins = num_mel_bins
        self.n_fft<a id="change"> = </a><a id="change">int(</a>round(sample_rate<a id="change"> * </a>0.001 * frame_length_ms)<a id="change">)</a>
        self.hop_length = int(round(sample_rate * 0.001 * frame_shift_ms))

    def get_text(self, index):
        return torch.IntTensor(text_to_sequence(self.transcripts[index], &quotenglish_cleaner&quot))</code></pre><h3>After Change</h3><pre><code class='java'>
            frame_length_ms: float = 50,
            frame_shift_ms: float = 12.5
    ):
        <a id="change">super(TextMelDataset, self).__init__(</a>feature_extract_by, sample_rate, num_mel_bins, frame_length_ms, frame_shift_ms<a id="change">)</a>
        self.dataset_path = dataset_path
        self.audio_paths = audio_paths
        self.transcripts = transcripts
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sooftware/tacotron2/commit/b0baed6e25e5fa9d94fb4fe04754a826a01bafa9#diff-0f66ba7966c52d8597fd2d31f7d49c186ee43bcf999ffb99d5d94e6cebe353e9L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76667943</div><div id='project'> Project Name: sooftware/tacotron2</div><div id='commit'> Commit Name: b0baed6e25e5fa9d94fb4fe04754a826a01bafa9</div><div id='time'> Time: 2020-10-04</div><div id='author'> Author: sh951011@gmail.com</div><div id='file'> File Name: tacotron2/data/data_loader.py</div><div id='m_class'> M Class Name: TextMelDataset</div><div id='n_method'> N Class Name: TextMelDataset</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: Dataset,MelSpectrogramParser</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: tacotron2/data/data_loader.py</div><div id='n_file'> N File Name: tacotron2/data/data_loader.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 29</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            raise AssertionError("Make sure &quotloss_type&quot in [&quotBPR&quot, &quotCE&quot]!")
        &#47&#47 we only need compute the loss at the masked position

        self.mask_item_length<a id="change"> = </a><a id="change">int(</a>self.mask_ratio<a id="change"> * </a>self.max_item_list_length<a id="change">)</a>
        self.initializer_range = config[&quotinitializer_range&quot]
        self.apply(self._init_weights)

    def _init_weights(self, module):</code></pre><h3>After Change</h3><pre><code class='java'>
    input_type = InputType.PAIRWISE

    def __init__(self, config, dataset):
        <a id="change">super(BERT4Rec, self).__init__(</a>config, dataset<a id="change">)</a>

        &#47&#47 load parameters info
        self.hidden_size = config[&quothidden_size&quot]
        self.embedding_size = config[&quotembedding_size&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/1714ed39db89b102bc46fc23155f92de0d8996bd#diff-0d774f613b2afe27340a63dbecd6b0840e54b266f785bb3d6eb0052232cf9e9aL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76667942</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 1714ed39db89b102bc46fc23155f92de0d8996bd</div><div id='time'> Time: 2020-10-15</div><div id='author'> Author: hui.wang@ruc.edu.cn</div><div id='file'> File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='m_class'> M Class Name: BERT4Rec</div><div id='n_method'> N Class Name: BERT4Rec</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: SequentialRecommender</div><div id='n_parent_class'> N Parent Class: SequentialRecommender</div><div id='m_file'> M File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='n_file'> N File Name: recbox/model/sequential_recommender/bert4rec.py</div><div id='m_start'> M Start Line: 35</div><div id='m_end'> M End Line: 63</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Initialize the MzEncoder
        super().__init__()

        n_sin = <a id="change">int(</a>dim_model<a id="change"> / </a>2<a id="change">)</a>
        n_cos = dim_model - n_sin
        scale = max_wavelength / (2 * np.pi)

        sin_term = scale ** (torch.arange(0, n_sin).float() / (n_sin - 1))
        cos_term<a id="change"> = </a>scale ** (torch.arange(0, n_cos).float() / (n_cos - 1))
        self.register_buffer("sin_term", sin_term)
        self.register_buffer("cos_term", cos_term)
</code></pre><h3>After Change</h3><pre><code class='java'>

    def __init__(self, dim_model, min_wavelength=1, max_wavelength=10000):
        Initialize the MzEncoder
        <a id="change">super().__init__(
            dim_model=dim_model,
            min_wavelength=min_wavelength,
            max_wavelength=max_wavelength,
        )</a>

    def forward(self, X):
        Encode positions in a sequence.
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wfondrie/depthcharge/commit/263bbd6e1db05f1afbb5b8ea759129c467667026#diff-8f495ca240d7e431424b2891d7704c84fd49d3896f9f4c816442cd3f7fe03faaL143' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76667947</div><div id='project'> Project Name: wfondrie/depthcharge</div><div id='commit'> Commit Name: 263bbd6e1db05f1afbb5b8ea759129c467667026</div><div id='time'> Time: 2023-03-23</div><div id='author'> Author: wfondrie@talus.bio</div><div id='file'> File Name: depthcharge/components/encoders.py</div><div id='m_class'> M Class Name: PositionalEncoder</div><div id='n_method'> N Class Name: PositionalEncoder</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: FloatEncoder</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: depthcharge/components/encoders.py</div><div id='n_file'> N File Name: depthcharge/components/encoders.py</div><div id='m_start'> M Start Line: 145</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 175</div><div id='n_end'> N End Line: 181</div><BR>