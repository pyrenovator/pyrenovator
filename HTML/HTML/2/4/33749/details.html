<html><h3>Pattern ID :33749
</h3><img src='96989623.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47save parameters
    params = model.state_dict()
    <a id="change">for </a>key, val in <a id="change">params.items():
        </a>params[key]<a id="change"> = </a>val.cpu().numpy()
    torch.save(params, "pytorch_params_glue.file") 

    start_model = &quotrandom&quot</code></pre><h3>After Change</h3><pre><code class='java'>

def finetune(args):
    cuda_condition = torch.cuda.is_available()
    device = torch.device("cuda:%d"%args.gpu_id<a id="change"> if </a>cuda_condition<a id="change"> else </a>"cpu")
    task_name = args.task_name
    if task_name in [&quotsst-2&quot,&quotcola&quot, &quotmrpc&quot]:
        num_labels = 2</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/hsword/hetu/commit/127e9970d0ad0364767dd1b1946980f58f7b7376#diff-b8af2cc60b2ccc2e812d3904bb6ed86df2566b4abaf047a48f16e5dbdd588f8eL60' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96989623</div><div id='project'> Project Name: hsword/hetu</div><div id='commit'> Commit Name: 127e9970d0ad0364767dd1b1946980f58f7b7376</div><div id='time'> Time: 2022-01-18</div><div id='author'> Author: 49988457+AFDWang@users.noreply.github.com</div><div id='file'> File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: finetune(1)</div><div id='n_method'> N Method Name: finetune(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='n_file'> N File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    try:
        yield
    finally:
        <a id="change">for </a>_handler, _level in <a id="change">_handler_level_map.items():
            </a>_handler.level<a id="change"> = </a>_level
</code></pre><h3>After Change</h3><pre><code class='java'>
        for _handler in qlib_logger.handlers:
            _handler_level_map[_handler] = _handler.level
            _handler.level = level
    return _handler_level_map<a id="change"> if </a>return_orig_handler_level<a id="change"> else </a>None


@contextmanager</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/76c5c5d1b6c4a7c6823f52eee85bcc4a4a582bf7#diff-b08d3c06ffb759ec1a50e105d8508cea82c793bf6571b84f547f7b3c254a7de3L169' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96989621</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 76c5c5d1b6c4a7c6823f52eee85bcc4a4a582bf7</div><div id='time'> Time: 2021-05-12</div><div id='author'> Author: zhu.pengrong@foxmail.com</div><div id='file'> File Name: qlib/log.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: set_global_logger_level(2)</div><div id='n_method'> N Method Name: set_global_logger_level(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qlib/log.py</div><div id='n_file'> N File Name: qlib/log.py</div><div id='m_start'> M Start Line: 169</div><div id='m_end'> M End Line: 180</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 206</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if prefix is None:
        prefix = &quot&quot
    result = {}
    <a id="change">for </a>k, v in <a id="change">dictionary.items():
        </a>if isinstance(v, dict):
            new_prefix = prefix + k + sep
            result.update(flatten_dictionary(dictionary=v, prefix=new_prefix))
        else:
            new_k = prefix + k
            result[new_k]<a id="change"> = </a>v
    return result

</code></pre><h3>After Change</h3><pre><code class='java'>

def flatten_dictionary(dictionary: Dict[str, Any], prefix: Optional[str] = None, sep=&quot.&quot) -&gt; Dict[str, Any]:
    Flattens a nested dictionary.
    real_prefix = tuple()<a id="change"> if </a>prefix is None<a id="change"> else </a>(prefix,)
    partial_result = _flatten_dictionary(dictionary=dictionary, prefix=real_prefix)
    return {sep.join(k): v for k, v in partial_result.items()}
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/8d1d32106b328a8cb00c7295304503cb0f8b6f87#diff-40596b02d54c46825543c70f0edc8b4f37080d71056c046047763d2ae3f66f9eL147' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96989618</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 8d1d32106b328a8cb00c7295304503cb0f8b6f87</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: src/poem/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: flatten_dictionary(3)</div><div id='n_method'> N Method Name: flatten_dictionary(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/poem/utils.py</div><div id='n_file'> N File Name: src/poem/utils.py</div><div id='m_start'> M Start Line: 149</div><div id='m_end'> M End Line: 159</div><div id='n_start'> N Start Line: 149</div><div id='n_end'> N End Line: 151</div><BR>