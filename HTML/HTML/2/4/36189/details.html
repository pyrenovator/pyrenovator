<html><h3>Pattern ID :36189
</h3><img src='102627231.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &gt;&gt;&gt; kiri.qa("Where does Sally live?", "Sally lives in London.")
            "London"
        
        <a id="change">if context</a>:
            return qa(question, context, prev_qa=prev_qa,
                      local=self._local, api_key=self._api_key, device=self._device)
        else:
            search_results = self.search(question)
            answers = []
            if issubclass(self._store._doc_class, ChunkedDocument):
                for chunk in search_results.top_chunks[:num_answers]:
                    answer = qa(question, chunk["chunk"], prev_qa=prev_qa,
                                local=self._local, api_key=self._api_key, device=self._device)
                    <a id="change">answers.append(</a>(answer, chunk["search_result"])<a id="change">)</a>
            else:
                for result in search_results.results[:num_answers]:
                    c_string = result.document.content
                    answer = qa(question, c_string, prev_qa=prev_qa,</code></pre><h3>After Change</h3><pre><code class='java'>
            &gt;&gt;&gt; kiri.qa("Where does Sally live?", "Sally lives in London.")
            "London"
        
        <a id="change">pass</a>
        &#47&#47 if context:
        &#47&#47     return qa(question, context, prev_qa=prev_qa,
        &#47&#47               local=self._local, api_key=self._api_key, device=self._device)
        &#47&#47 else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kiri-ai/kiri/commit/a1180c5e80edb9dc2a80d959e47b6847622b039e#diff-c048ea9314b245ee2597d816e9e910c2cf3e1661cfe66c3e291199863b1cf9e1L130' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627231</div><div id='project'> Project Name: kiri-ai/kiri</div><div id='commit'> Commit Name: a1180c5e80edb9dc2a80d959e47b6847622b039e</div><div id='time'> Time: 2021-01-23</div><div id='author'> Author: ojasaarkristo@gmail.com</div><div id='file'> File Name: kiri/core.py</div><div id='m_class'> M Class Name: Kiri</div><div id='n_method'> N Class Name: Kiri</div><div id='m_method'> M Method Name: qa(5)</div><div id='n_method'> N Method Name: qa(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kiri/core.py</div><div id='n_file'> N File Name: kiri/core.py</div><div id='m_start'> M Start Line: 130</div><div id='m_end'> M End Line: 149</div><div id='n_start'> N Start Line: 133</div><div id='n_end'> N End Line: 133</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def on_trace_stop(self, signal, context):
        &#47&#47 Framework info
        <a id="change">if self._framework</a>:
            <a id="change">signal.frameworks.append(</a>self._framework<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">pass</a>

    def on_trace_read(self, signal, context):
        if self._framework:
            signal.frameworks.append(self._framework)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/f525a549b63805461e378a4d76848af7f0272d6b#diff-40f466360e6c5ca0e45fb2e0ccd0b0ed697a5327d71977813ffb0b55fd3def2bL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627236</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: f525a549b63805461e378a4d76848af7f0272d6b</div><div id='time'> Time: 2022-12-07</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/onnxruntime_recorder.py</div><div id='m_class'> M Class Name: ONNXRuntimeRecorder</div><div id='n_method'> N Class Name: ONNXRuntimeRecorder</div><div id='m_method'> M Method Name: on_trace_stop(3)</div><div id='n_method'> N Method Name: on_trace_stop(3)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/onnxruntime_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/onnxruntime_recorder.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 26</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        uncompress(file_path=file_path.values(),
                   target_path=self.folder_path + self.name, verbose=verbose)
        mode_list: List[str] = [&quottrain&quot]
        <a id="change">if self.valid_set</a>:
            <a id="change">mode_list.append(</a>&quotvalid&quot<a id="change">)</a>
        for mode in mode_list:
            os.rename(self.folder_path + self.name + f&quot/{self.org_folder_name[mode]}/&quot,
                      self.folder_path + self.name + f&quot/{mode}/&quot)
            if &quot/&quot in self.org_folder_name[mode]:</code></pre><h3>After Change</h3><pre><code class='java'>
        if self.data_format == &quotfolder&quot:
            self.initialize_folder(verbose=verbose, **kwargs)
        elif self.data_format in[&quotnumpy&quot, &quotnp&quot, &quottorch&quot, &quotpytorch&quot, &quottensor&quot]:
            <a id="change">pass</a>

    def initialize_folder(self, verbose=True, **kwargs):
        file_path = self.download()
        uncompress(file_path=file_path.values(),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/da74b311a7eaeecd326bd50facb5e13304263cb4#diff-14a9ed34a78499f09851b42bd86c65c5f188a144f655573acf6ca5bdef6c9013L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627233</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: da74b311a7eaeecd326bd50facb5e13304263cb4</div><div id='time'> Time: 2020-12-13</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/dataset/imagefolder.py</div><div id='m_class'> M Class Name: ImageFolder</div><div id='n_method'> N Class Name: ImageFolder</div><div id='m_method'> M Method Name: initialize(2)</div><div id='n_method'> N Method Name: initialize(2)</div><div id='m_parent_class'> M Parent Class: ImageSet</div><div id='n_parent_class'> N Parent Class: ImageSet</div><div id='m_file'> M File Name: trojanzoo/dataset/imagefolder.py</div><div id='n_file'> N File Name: trojanzoo/dataset/imagefolder.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 39</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">if self._framework</a>:
            <a id="change">signal.frameworks.append(</a>self._framework<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">pass</a>

    def on_trace_read(self, signal, context):
        if self._framework:
            signal.frameworks.append(self._framework)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/f525a549b63805461e378a4d76848af7f0272d6b#diff-e2f3a83581a780835df65bfb0c0536f391fa7d82b2b6ab0c9b987c71f20c378cL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627232</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: f525a549b63805461e378a4d76848af7f0272d6b</div><div id='time'> Time: 2022-12-07</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/tensorflow_recorder.py</div><div id='m_class'> M Class Name: TensorFlowRecorder</div><div id='n_method'> N Class Name: TensorFlowRecorder</div><div id='m_method'> M Method Name: on_trace_stop(3)</div><div id='n_method'> N Method Name: on_trace_stop(3)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/tensorflow_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/tensorflow_recorder.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">if self._framework</a>:
            <a id="change">signal.frameworks.append(</a>self._framework<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">pass</a>

    def on_trace_read(self, signal, context):
        pass
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/f525a549b63805461e378a4d76848af7f0272d6b#diff-a53c23f269ce158578e81a5b989ab557e3c85f2426ea1251e019c5053a35b067L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627235</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: f525a549b63805461e378a4d76848af7f0272d6b</div><div id='time'> Time: 2022-12-07</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/jax_recorder.py</div><div id='m_class'> M Class Name: JAXRecorder</div><div id='n_method'> N Class Name: JAXRecorder</div><div id='m_method'> M Method Name: on_trace_stop(3)</div><div id='n_method'> N Method Name: on_trace_stop(3)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/jax_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/jax_recorder.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 24</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">if self._framework</a>:
            <a id="change">signal.frameworks.append(</a>self._framework<a id="change">)</a>


def _format_version(version):
    major = int(version / 1000)</code></pre><h3>After Change</h3><pre><code class='java'>
        pass

    def on_trace_stop(self, signal, context):
        <a id="change">pass</a>

    def on_trace_read(self, signal, context):
        if self._framework:
            signal.frameworks.append(self._framework)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphsignal/graphsignal/commit/f525a549b63805461e378a4d76848af7f0272d6b#diff-ab9ea5224e48195b9e989ac26125cf52bfea2904ad9958bca54a8ffcb4864bf6L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 102627234</div><div id='project'> Project Name: graphsignal/graphsignal</div><div id='commit'> Commit Name: f525a549b63805461e378a4d76848af7f0272d6b</div><div id='time'> Time: 2022-12-07</div><div id='author'> Author: dmitri@graphsignal.com</div><div id='file'> File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='m_class'> M Class Name: PyTorchRecorder</div><div id='n_method'> N Class Name: PyTorchRecorder</div><div id='m_method'> M Method Name: on_trace_stop(3)</div><div id='n_method'> N Method Name: on_trace_stop(3)</div><div id='m_parent_class'> M Parent Class: BaseRecorder</div><div id='n_parent_class'> N Parent Class: BaseRecorder</div><div id='m_file'> M File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='n_file'> N File Name: graphsignal/recorders/pytorch_recorder.py</div><div id='m_start'> M Start Line: 55</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 55</div><BR>