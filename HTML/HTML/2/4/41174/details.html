<html><h3>Pattern ID :41174
</h3><img src='116070659.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        print(&quot{} model, anchors, and classes loaded.&quot.format(self.model_path))

        if self.num_classes &lt;= 21:
            self.colors<a id="change"> = </a><a id="change">[</a>(0, 0, 0), (128, 0, 0), (0, 128, 0), (128, 128, 0), (0, 0, 128), (128, 0, 128), (0, 128, 128), 
                    (128, 128, 128), (64, 0, 0), (192, 0, 0), (64, 128, 0), (192, 128, 0), (64, 0, 128), (192, 0, 128), 
                    (64, 128, 128), (192, 128, 128), (0, 64, 0), (128, 64, 0), (0, 192, 0), (128, 192, 0), (0, 64, 128), (128, 64, 12)<a id="change"></a>]
        else:
            &#47&#47 画框设置不同的颜色
            hsv_tuples = [(x / self.num_classes, 1., 1.)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47-------------------------------&#47&#47
        self.net    = pspnet(num_classes=self.num_classes, downsample_factor=self.downsample_factor, pretrained=False, backbone=self.backbone, aux_branch=False)
        
        device      = torch.device(&quotcuda&quot<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>&quotcpu&quot)
        self.net.load_state_dict(torch.load(self.model_path, map_location=device), strict=False)
        self.net    = self.net.eval()
        print(&quot{} model, and classes loaded.&quot.format(self.model_path))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bubbliiiing/pspnet-pytorch/commit/45cb37376cd329f953cb649830de848c0fb0feaf#diff-38a768d1c578b2d27db7acc9725657cc253c28ac0a10247f4d5e51be1b897004L72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116070659</div><div id='project'> Project Name: bubbliiiing/pspnet-pytorch</div><div id='commit'> Commit Name: 45cb37376cd329f953cb649830de848c0fb0feaf</div><div id='time'> Time: 2021-11-09</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: pspnet.py</div><div id='m_class'> M Class Name: PSPNet</div><div id='n_method'> N Class Name: PSPNet</div><div id='m_method'> M Method Name: generate(1)</div><div id='n_method'> N Method Name: generate(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: pspnet.py</div><div id='n_file'> N File Name: pspnet.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 96</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    vocab_size = config.vocab_size

    dataloader = DataLoader4Glue(task_name=task_name, batch_size = batch_size)
    data_names<a id="change"> = </a><a id="change">[</a>&quotinput_ids&quot,&quottoken_type_ids&quot,&quotattention_mask&quot,&quotlabel_ids&quot<a id="change"></a>]

    dataloader_dev = DataLoader4Glue(task_name=task_name, batch_size = batch_size, datatype=&quotdev&quot)
</code></pre><h3>After Change</h3><pre><code class='java'>


def finetune(args):
    cuda_condition = <a id="change">torch.cuda.is_available()</a>
    device = torch.device("cuda:%d"%args.gpu_id<a id="change"> if </a>cuda_condition<a id="change"> else </a>"cpu")
    task_name = args.task_name
    if task_name in [&quotsst-2&quot,&quotcola&quot, &quotmrpc&quot]:
        num_labels = 2</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hsword/hetu/commit/127e9970d0ad0364767dd1b1946980f58f7b7376#diff-b8af2cc60b2ccc2e812d3904bb6ed86df2566b4abaf047a48f16e5dbdd588f8eL71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116070663</div><div id='project'> Project Name: hsword/hetu</div><div id='commit'> Commit Name: 127e9970d0ad0364767dd1b1946980f58f7b7376</div><div id='time'> Time: 2022-01-18</div><div id='author'> Author: 49988457+AFDWang@users.noreply.github.com</div><div id='file'> File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: finetune(1)</div><div id='n_method'> N Method Name: finetune(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='n_file'> N File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 130</div><div id='n_start'> N Start Line: 60</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Load data
    dataset = MNIST(root=&quot./data&quot, download=True)
    DATA_SPLIT<a id="change"> = </a><a id="change">[</a>50000, 10000<a id="change"></a>]
    train_data, test_data = random_split(dataset.data.float().unsqueeze(dim=1), DATA_SPLIT)
    train_label, test_label = random_split(dataset.targets, DATA_SPLIT)
    train_loader = DataLoader(dataset=MNISTDataset(train_data, train_label),</code></pre><h3>After Change</h3><pre><code class='java'>


def main():
    device = torch.device(&quotcuda&quot<a id="change"> if </a><a id="change">torch.cuda.is_available() else </a>&quotcpu&quot)
    &#47&#47 Load model
    model = CapsNet().to(device)
    criterion = CapsuleLoss()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/riroaki/capsnet/commit/408b1e77f4e40589def9c313c0b11beaa88f2108#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116070662</div><div id='project'> Project Name: riroaki/capsnet</div><div id='commit'> Commit Name: 408b1e77f4e40589def9c313c0b11beaa88f2108</div><div id='time'> Time: 2020-03-08</div><div id='author'> Author: aki@akideMacBook-Pro.local</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 75</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    vocab_size = config.vocab_size

    dataloader = DataLoader4Glue(task_name=task_name, batch_size = batch_size, datatype=&quotdev&quot)
    data_names<a id="change"> = </a><a id="change">[</a>&quotinput_ids&quot,&quottoken_type_ids&quot,&quotattention_mask&quot,&quotlabel_ids&quot<a id="change"></a>]

    start_model = &quotrandom&quot
</code></pre><h3>After Change</h3><pre><code class='java'>
        print(&quotSaved model to %s.&quot%(save_path+save_file))

def validate(args):
    cuda_condition = <a id="change">torch.cuda.is_available()</a>
    device = torch.device("cuda:%d"%args.gpu_id<a id="change"> if </a>cuda_condition<a id="change"> else </a>"cpu")
    task_name = args.task_name
    if task_name in [&quotsst-2&quot,&quotcola&quot, &quotmrpc&quot]:
        num_labels = 2</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hsword/hetu/commit/127e9970d0ad0364767dd1b1946980f58f7b7376#diff-b8af2cc60b2ccc2e812d3904bb6ed86df2566b4abaf047a48f16e5dbdd588f8eL186' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116070661</div><div id='project'> Project Name: hsword/hetu</div><div id='commit'> Commit Name: 127e9970d0ad0364767dd1b1946980f58f7b7376</div><div id='time'> Time: 2022-01-18</div><div id='author'> Author: 49988457+AFDWang@users.noreply.github.com</div><div id='file'> File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: validate(1)</div><div id='n_method'> N Method Name: validate(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='n_file'> N File Name: examples/nlp/bert/test_glue_pytorch_bert.py</div><div id='m_start'> M Start Line: 187</div><div id='m_end'> M End Line: 224</div><div id='n_start'> N Start Line: 176</div><div id='n_end'> N End Line: 185</div><BR>