<html><h3>Pattern ID :38629
</h3><img src='110509668.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

                    if not torch.isnan(l1_loss):
                        train_loss = train_loss + l1_loss
                    <a id="change">if </a>not <a id="change">torch.isnan(</a>duration_loss<a id="change">)</a>:
                        train_loss<a id="change"> = </a>train_loss + duration_loss
                    if not torch.isnan(pitch_loss):
                        train_loss = train_loss + pitch_loss
</code></pre><h3>After Change</h3><pre><code class='java'>
            l1_losses_total.append(l1_loss.item())
            duration_losses_total.append(duration_loss.item())
            pitch_losses_total.append(pitch_loss.item())
            <a id="change">energy_losses_total.append(</a>energy_loss.item()<a id="change">)</a>

            if not torch.isnan(l1_loss):
                train_loss = train_loss + l1_loss
            if not torch.isnan(duration_loss):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/1a9e79acab3fe68f1ad022bbe1b9837ba2f75aa9#diff-558f242c6346687e14b6867d8bf52c1487e81ba3710f925457ba3a3aef85dbb0L94' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110509668</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: 1a9e79acab3fe68f1ad022bbe1b9837ba2f75aa9</div><div id='time'> Time: 2023-03-11</div><div id='author'> Author: lux.florian@gmail.com</div><div id='file'> File Name: TrainingInterfaces/Text_to_Spectrogram/ToucanTTS/toucantts_train_loop.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_loop(16)</div><div id='n_method'> N Method Name: train_loop(16)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: TrainingInterfaces/Text_to_Spectrogram/ToucanTTS/toucantts_train_loop.py</div><div id='n_file'> N File Name: TrainingInterfaces/Text_to_Spectrogram/ToucanTTS/toucantts_train_loop.py</div><div id='m_start'> M Start Line: 94</div><div id='m_end'> M End Line: 213</div><div id='n_start'> N Start Line: 100</div><div id='n_end'> N End Line: 215</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            cost.backward()
            optimizer.step()

            <a id="change">if </a>not <a id="change">np.isnan(</a>cost.__float__()<a id="change">)</a>:
                train_cost_sum<a id="change"> += </a>cost.__float__()
                train_neg_cost_sum += rmse_cost.__float__()
                train_stft_cost_sum += stft_cost.__float__()
                train_avg_cost = train_cost_sum / (idx + 1)</code></pre><h3>After Change</h3><pre><code class='java'>

    avg_cost_list = []
    for _ in range(len(loss)):
        <a id="change">avg_cost_list.append(</a>0<a id="change">)</a>

    with tqdm(dataset, desc=&quotTrain{}&quot.format(str(epoch)), total=len(dataset),
              leave=True) as train_epoch:
        for idx, (X_train, Y_train, d, s, size_class) in enumerate(train_epoch):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tvs-ai/pytorch_rppgs/commit/79fa5ea2fc22ff76197fc5272382574b54608880#diff-64e9a5687b54194d93aed5d9d7bcc254ca6ae240c237175daba59412c7b41518L7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110509666</div><div id='project'> Project Name: tvs-ai/pytorch_rppgs</div><div id='commit'> Commit Name: 79fa5ea2fc22ff76197fc5272382574b54608880</div><div id='time'> Time: 2023-01-02</div><div id='author'> Author: forownsake@gmail.com</div><div id='file'> File Name: vid2bp/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(7)</div><div id='n_method'> N Method Name: train(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vid2bp/train.py</div><div id='n_file'> N File Name: vid2bp/train.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                + np.exp(oldZ - self.logZ) * (self.info[-1] + oldZ)
                - self.logZ
            )
            <a id="change">if </a><a id="change">np.isnan(</a>info<a id="change">)</a>:
                info<a id="change"> = </a>0
            self.info.append(info)

        &#47&#47 Update history</code></pre><h3>After Change</h3><pre><code class='java'>
        if nlive is None:
            nlive = self.base_nlive

        <a id="change">self.nlive.append(</a>nlive<a id="change">)</a>
        oldZ = self.logZ
        &#47&#47 &lt;t&gt; = N / (N + 1)
        logt = -np.log1p(1 / nlive)
        Wt = self.logw + logL + np.log1p(-np.exp(logt))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mj-will/nessai/commit/bf1ef3ab9aee9040a641142e5a9ba528b9ac22ff#diff-e48c145e2642a0a60c9879cf4a49f2cb090f6f74f6568e4ab3845ea77534e32bL98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110509667</div><div id='project'> Project Name: mj-will/nessai</div><div id='commit'> Commit Name: bf1ef3ab9aee9040a641142e5a9ba528b9ac22ff</div><div id='time'> Time: 2022-10-17</div><div id='author'> Author: m.williams.4@research.gla.ac.uk</div><div id='file'> File Name: nessai/evidence.py</div><div id='m_class'> M Class Name: _NSIntegralState</div><div id='n_method'> N Class Name: _NSIntegralState</div><div id='m_method'> M Method Name: increment(3)</div><div id='n_method'> N Method Name: increment(3)</div><div id='m_parent_class'> M Parent Class: _BaseNSIntegralState</div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nessai/evidence.py</div><div id='n_file'> N File Name: nessai/evidence.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 147</div><div id='n_end'> N End Line: 152</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    eps = rdp_vec - math.log(delta) / (orders_vec - 1)

    &#47&#47 special case when there is no privacy
    <a id="change">if </a><a id="change">np.isnan(</a>eps<a id="change">)</a>.all():
        return np.inf, np.nan

    idx_opt<a id="change"> = </a>np.nanargmin(eps)  &#47&#47 Ignore NaNs
    return eps[idx_opt], orders_vec[idx_opt]
</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            &#47&#47 In this case we can&quott do anything. E.g., asking for delta = 0.
            eps = np.inf
        <a id="change">eps_vec.append(</a>eps<a id="change">)</a>

    idx_opt = np.argmin(eps_vec)
    return max(0, eps_vec[idx_opt]), orders_vec[idx_opt]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lxuechen/private-transformers/commit/32eb9bf1eef9c6637f47014c2e5633be7a04f810#diff-4921291cac6da0170dfe0ff7f6c9911a13d34daaef3cf303516497d4f2b220e7L272' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110509658</div><div id='project'> Project Name: lxuechen/private-transformers</div><div id='commit'> Commit Name: 32eb9bf1eef9c6637f47014c2e5633be7a04f810</div><div id='time'> Time: 2022-07-12</div><div id='author'> Author: lxuechen@gmail.com</div><div id='file'> File Name: private_transformers/accounting/rdp_accounting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_privacy_spent(3)</div><div id='n_method'> N Method Name: get_privacy_spent(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: private_transformers/accounting/rdp_accounting.py</div><div id='n_file'> N File Name: private_transformers/accounting/rdp_accounting.py</div><div id='m_start'> M Start Line: 273</div><div id='m_end'> M End Line: 307</div><div id='n_start'> N Start Line: 272</div><div id='n_end'> N End Line: 318</div><BR>