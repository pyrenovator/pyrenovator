<html><h3>Pattern ID :19016
</h3><img src='61821855.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        start_time = time.time()
        best_img = search_unsplash(extract, self._photo_features, self._photo_ids, self._clip, self._device, num_images, current_images_ids)
        <a id="change">print(</a>f"Images Time : {round((time.time() - start_time), 4)}s \n"<a id="change">)</a>
        return best_img
        &#47&#47 return retrieve_images_for_one_extract(
        &#47&#47     extract, num_images, self._captions_embedding, self._lsa_embedder, self._caption_image_df, self._nlp, current_images_ids)
</code></pre><h3>After Change</h3><pre><code class='java'>
        chosen_style_model = _model_from_style(chosen_style)
        if chosen_style_model is not None:
            &#47&#47 Return a tuple per image (img_id, PIL_IMAGE)
            ids_pil_images<a id="change"> = list(
                </a><a id="change">map(</a>lambda img_id: (img_id, _get_image(img_id), best_imgs_ids)<a id="change">))</a>
            styled_ids_imgs = list(map(lambda id_pil_img: (id_pil_img[0], _image_style_transfer(
                id_pil_img[1], chosen_style_model, self._device)), ids_pil_images))
            &#47&#47 Save styled images
            print("Styled Image path: ", os.path.join(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/edenbd/multimodalstory-demo/commit/f3e3e353a54333128b33c72020663ce061050366#diff-15fbe75adeda8f9f83fd82cef65d13073aa4ae72ac94629311840b1c4f722269L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61821855</div><div id='project'> Project Name: edenbd/multimodalstory-demo</div><div id='commit'> Commit Name: f3e3e353a54333128b33c72020663ce061050366</div><div id='time'> Time: 2021-04-01</div><div id='author'> Author: edenoosh15@gmail.com</div><div id='file'> File Name: backend/story_generator/pipeline.py</div><div id='m_class'> M Class Name: Pipeline</div><div id='n_method'> N Class Name: Pipeline</div><div id='m_method'> M Method Name: retrieve_images(5)</div><div id='n_method'> N Method Name: retrieve_images(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: backend/story_generator/pipeline.py</div><div id='n_file'> N File Name: backend/story_generator/pipeline.py</div><div id='m_start'> M Start Line: 74</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 100</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            lambda a: (len(a.diagram), a.dimension), chain.from_iterable(x)
        ))

        <a id="change">print(</a>list(M)<a id="change">)</a>

        N = max(M, key=itemgetter(0))[0]
        D = max(M, key=itemgetter(1))[1]
</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Pad all tensors to length N in the first dimension, then turn
        &#47&#47 them into a batch.
        result<a id="change"> = </a>torch.stack(
                <a id="change">list(
                    </a><a id="change">map(
                        </a>lambda t: torch.nn.functional.pad(
                                t,
                                (0, 0, N - len(t), 0),
                                mode=&quotconstant&quot,
                                value=torch.nan),
                        tensors<a id="change">
                    )
                )</a>
        )

        return result
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aidos-lab/pytorch-topological/commit/18dc9da2891a86559ed9412dcdd51accd6536049#diff-fab3b72c9048e3844bfe4f4ff805d06e1229a70a0914d59a88b02801ebc0d661L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61821851</div><div id='project'> Project Name: aidos-lab/pytorch-topological</div><div id='commit'> Commit Name: 18dc9da2891a86559ed9412dcdd51accd6536049</div><div id='time'> Time: 2022-01-05</div><div id='author'> Author: bastian@rieck.me</div><div id='file'> File Name: torch_topological/nn/data.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: make_tensor(1)</div><div id='n_method'> N Method Name: make_tensor(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_topological/nn/data.py</div><div id='n_file'> N File Name: torch_topological/nn/data.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 58</div><div id='n_end'> N End Line: 92</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    image_paths.append(os.path.join("/data",line[0]))
            else:
                break
        <a id="change">print(</a>image_paths<a id="change">)</a>
        self.__file_list =  image_paths
        

if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>
        for line in lines:
            line = line.rstrip().split()
            if len(line)&gt;1:
                image_paths[os.path.join("/data",line[0])]<a id="change"> = </a>np.array([<a id="change">list(</a><a id="change">map(</a>int,i.split(",")<a id="change">))</a> for i in line[1:]])
            else:
                break
        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jingtianyilong/yolov4-pytorch/commit/47671101d0e0abe291ba461ec21f9a755a3fa8da#diff-4bae857ce6398a4645b227fbd4ff1b9e49ae54239baded3628dc802b0ae1f9ccL61' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 61821850</div><div id='project'> Project Name: jingtianyilong/yolov4-pytorch</div><div id='commit'> Commit Name: 47671101d0e0abe291ba461ec21f9a755a3fa8da</div><div id='time'> Time: 2021-01-25</div><div id='author'> Author: zijie.guo@daimler.com</div><div id='file'> File Name: visualize_demo.py</div><div id='m_class'> M Class Name: Detection</div><div id='n_method'> N Class Name: Detection</div><div id='m_method'> M Method Name: get_first_10_imgs(1)</div><div id='n_method'> N Method Name: get_first_10_imgs(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: visualize_demo.py</div><div id='n_file'> N File Name: visualize_demo.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 91</div><BR>