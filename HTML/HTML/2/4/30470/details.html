<html><h3>Pattern ID :30470
</h3><img src='90115652.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            except:
                depth = 0

            png = <a id="change">open(pngfile, "rb").read()</a>
            return png, depth

        finally:
            &#47&#47 Cleanup temporaries</code></pre><h3>After Change</h3><pre><code class='java'>
            if p.returncode != 0:
                raise Exception(&quotPDFpng error&quot, serr)

            png<a id="change">=</a><a id="change">[open(pngfile.replace(&quot.png&quot, &quot&quot)+&quot-%i.png&quot % i, &quotrb&quot).read() for i in range(len(self.math))]</a>
            return png

        finally:
            &#47&#47 Cleanup temporaries</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lukas-blecher/latex-ocr/commit/d4f7bfd36b2751ef8bb0ddd17e3e633d4d072467#diff-fa4089e8a1b4c36ad8263be050d34e31ea1d452268658ee5bc4298c393f1dc64L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90115652</div><div id='project'> Project Name: lukas-blecher/latex-ocr</div><div id='commit'> Commit Name: d4f7bfd36b2751ef8bb0ddd17e3e633d4d072467</div><div id='time'> Time: 2020-12-13</div><div id='author'> Author: luk.blecher@gmx.de</div><div id='file'> File Name: dataset/latex2png.py</div><div id='m_class'> M Class Name: Latex</div><div id='n_method'> N Class Name: Latex</div><div id='m_method'> M Method Name: convert_file(3)</div><div id='n_method'> N Method Name: convert_file(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dataset/latex2png.py</div><div id='n_file'> N File Name: dataset/latex2png.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        reader = ReaderTest("", info)

        instructions = "test[:33%]"
        dset = <a id="change">reader.read(</a>name, instructions, split_infos<a id="change">)</a>
        self.assertEqual(dset["filename"][0], f"{name}-test")
        self.assertEqual(dset.num_rows, 33)
        self.assertEqual(dset.num_columns, 1)
</code></pre><h3>After Change</h3><pre><code class='java'>
        self.assertEqual(dset.num_columns, 1)

        instructions = ["train", "test[:33%]"]
        datasets_kwargs<a id="change"> = </a><a id="change">[reader.read(name, instr, split_infos) for instr in instructions]</a>
        train_dset, test_dset = [Dataset(**dataset_kwargs) for dataset_kwargs in datasets_kwargs]
        self.assertEqual(train_dset["filename"][0], f"{name}-train")
        self.assertEqual(train_dset.num_rows, 100)
        self.assertEqual(train_dset.num_columns, 1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/ecec05a53033ea9e64f1d5bf284c51e319378c71#diff-8e2d6c59c1a57cddfb8fe6bc2c34fde28f3257bd508f2a6cf1f1fcdaf4151e9aL30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90115650</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: ecec05a53033ea9e64f1d5bf284c51e319378c71</div><div id='time'> Time: 2020-07-21</div><div id='author'> Author: 42851186+lhoestq@users.noreply.github.com</div><div id='file'> File Name: tests/test_arrow_reader.py</div><div id='m_class'> M Class Name: BaseReaderTest</div><div id='n_method'> N Class Name: BaseReaderTest</div><div id='m_method'> M Method Name: test_read(1)</div><div id='n_method'> N Method Name: test_read(1)</div><div id='m_parent_class'> M Parent Class: TestCase</div><div id='n_parent_class'> N Parent Class: TestCase</div><div id='m_file'> M File Name: tests/test_arrow_reader.py</div><div id='n_file'> N File Name: tests/test_arrow_reader.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    temp_file = output_file + &quot.tmp&quot
    with open(temp_file, &quotw&quot) as fout:
        fout.write(<a id="change">open(output_file).read()</a>.replace(&quot\r&quot, &quot &quot))  &#47&#47 delete \r

    &#47&#47print(os.path.abspath(__file__))
    cmd = r"cat %s | node %s %s &gt; %s " % (temp_file, os.path.join(os.path.dirname(__file__), &quotpreprocess_latex.js&quot), parameters.mode, output_file)</code></pre><h3>After Change</h3><pre><code class='java'>
                if len(tokens_out) &gt; 5:
                    post = &quot &quot.join(tokens_out)
                    &#47&#47 use \sin instead of \operatorname{sin}
                    names<a id="change"> = </a><a id="change">[&quot\\&quot+x.replace(&quot &quot, &quot&quot) for x in re.findall(ops, post)]</a>
                    post = re.sub(ops, lambda match: str(names.pop(0)), post).replace(r&quot\\ \end{array}&quot, r&quot\end{array}&quot)
                    fout.write(post+&quot\n&quot)
    os.remove(temp_file)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lukas-blecher/latex-ocr/commit/97df469003d35553b53b408fe18d7ce676eb136c#diff-21c709fda31261dd4da3a77d59ccb4e5e369311453122dd5afdcb48669923c0dL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90115648</div><div id='project'> Project Name: lukas-blecher/latex-ocr</div><div id='commit'> Commit Name: 97df469003d35553b53b408fe18d7ce676eb136c</div><div id='time'> Time: 2021-02-18</div><div id='author'> Author: luk.blecher@gmx.de</div><div id='file'> File Name: dataset/preprocessing/preprocess_formulas.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dataset/preprocessing/preprocess_formulas.py</div><div id='n_file'> N File Name: dataset/preprocessing/preprocess_formulas.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 89</div><BR>