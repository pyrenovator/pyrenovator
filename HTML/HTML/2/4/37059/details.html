<html><h3>Pattern ID :37059
</h3><img src='105572411.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if self._with_channels:
            raw, labels = self.raw[(slice(None),) + bb], self.labels[bb]
        else:
            raw, labels = self.raw[bb]<a id="change">, self.labels[bb]</a>

        if self.sampler is not None:
            sample_id = 0
            while not self.sampler(raw, labels):</code></pre><h3>After Change</h3><pre><code class='java'>
            raise RuntimeError("SegmentationDataset has not been properly deserialized.")
        bb = self._sample_bounding_box()
        bb_raw = (slice(None),) + bb if self._with_channels else bb
        bb_labels = (<a id="change">slice(</a>None<a id="change">)</a>,)<a id="change"> + </a>bb if self._with_label_channels else bb
        raw, labels = self.raw[bb_raw], self.labels[bb_labels]

        if self.sampler is not None:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/constantinpape/torch-em/commit/03304a34bee7330ba5ebd57d295b79df424b71da#diff-e0321ef75ced31da935777c7603426d3232ba1bdf5fb21b2aa7c5cf2f0b3246cL112' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 105572411</div><div id='project'> Project Name: constantinpape/torch-em</div><div id='commit'> Commit Name: 03304a34bee7330ba5ebd57d295b79df424b71da</div><div id='time'> Time: 2022-03-23</div><div id='author'> Author: constantin.pape@embl.de</div><div id='file'> File Name: torch_em/data/segmentation_dataset.py</div><div id='m_class'> M Class Name: SegmentationDataset</div><div id='n_method'> N Class Name: SegmentationDataset</div><div id='m_method'> M Method Name: _get_sample(2)</div><div id='n_method'> N Method Name: _get_sample(2)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: torch_em/data/segmentation_dataset.py</div><div id='n_file'> N File Name: torch_em/data/segmentation_dataset.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 112</div><div id='n_end'> N End Line: 133</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    last = 0
    ndim = d.ndim
    t_dims = [i for i in range(ndim)]
    t_dims[0],t_dims[dim] = t_dims[dim]<a id="change">,t_dims[0]</a>
    d = d.transpose(t_dims)
    for i in split_size:
        new_d = d[last:last+i]
        last +=i</code></pre><h3>After Change</h3><pre><code class='java'>
    ans = []
    last = 0
    for i in split_size:
        ss = (<a id="change">slice(None,))*(dim-1)+</a>(<a id="change">slice(</a>last,last+i<a id="change">)</a>,)
        new_d = d[ss]
        last +=i
        ans.append(new_d)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/8e010e8f612c85bb156af4f0ebeee52e3a02a219#diff-9f0bfce0c0e21a07cd9342d9fcbe7511308c81f70bb9a6b347d23cb72ab0f4a8L369' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 105572418</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 8e010e8f612c85bb156af4f0ebeee52e3a02a219</div><div id='time'> Time: 2020-09-09</div><div id='author'> Author: dllgdxlxl@gmail.com</div><div id='file'> File Name: python/jittor/misc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: split(3)</div><div id='n_method'> N Method Name: split(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/jittor/misc.py</div><div id='n_file'> N File Name: python/jittor/misc.py</div><div id='m_start'> M Start Line: 394</div><div id='m_end'> M End Line: 402</div><div id='n_start'> N Start Line: 391</div><div id='n_end'> N End Line: 400</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        stack_ = morphology.label(stack_)
        for u in set(np.unique(stack_)) - {0}:
            cur_max += 1
            label_stack[stack_ == u<a id="change">, channel</a>] = cur_max


def unary_masks2labels(unary_masks, transpose=True):</code></pre><h3>After Change</h3><pre><code class='java'>
        stack_ = morphology.label(label_stack[(slice(None),) * axis + (channel,)])
        for u in set(np.unique(stack_)) - {0}:
            mask = stack_ == u
            if np.any(np.logical_and(mask, neg_m[(<a id="change">slice(None),) * axis + </a>(channel,)])):
                continue
            cur_max += 1
            label_stack[mask, channel] = cur_max</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fzj-inm1-bda/celldetection/commit/8d1fccd2cd1f4a9e1a0a0f3c5101841051592fbe#diff-c850a5c71fb8b7e2554e7916d617db7f8fea7bcabc16655b42db374b915f3567L77' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 105572402</div><div id='project'> Project Name: fzj-inm1-bda/celldetection</div><div id='commit'> Commit Name: 8d1fccd2cd1f4a9e1a0a0f3c5101841051592fbe</div><div id='time'> Time: 2021-07-09</div><div id='author'> Author: eric@upschulte.com</div><div id='file'> File Name: celldetection/data/segmentation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: relabel_(2)</div><div id='n_method'> N Method Name: relabel_(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: celldetection/data/segmentation.py</div><div id='n_file'> N File Name: celldetection/data/segmentation.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 98</div><div id='n_start'> N Start Line: 92</div><div id='n_end'> N End Line: 101</div><BR>