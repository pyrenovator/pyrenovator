<html><h3>Pattern ID :12166
</h3><img src='41112531.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def get_mistakes(self, sent):
        if self.__config["language_tool"] is None:
            import language_tool_python
            self.__config["language_tool"]<a id="change"> = </a>language_tool_python.LanguageTool(&quotzh-CN&quot)

        <a id="change">return </a>len(self.__config["language_tool"].check(sent))
</code></pre><h3>After Change</h3><pre><code class='java'>
        return self.lm(sent)

    def get_mistakes(self, sent):
        <a id="change">return </a>len(<a id="change">self.lt(</a>sent<a id="change">)</a>)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/thunlp/openattack/commit/20b6e193016c9c4a5723549ce263bdd960a5c3d8#diff-2750335e5719e17537473be5fc3a9147c8090cf67f5441e13142d1984ca2d903L37' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41112531</div><div id='project'> Project Name: thunlp/openattack</div><div id='commit'> Commit Name: 20b6e193016c9c4a5723549ce263bdd960a5c3d8</div><div id='time'> Time: 2021-04-15</div><div id='author'> Author: zhang-tj18@mails.tsinghua.edu.cn</div><div id='file'> File Name: OpenAttack/attack_evals/chinese_eval.py</div><div id='m_class'> M Class Name: ChineseAttackEval</div><div id='n_method'> N Class Name: ChineseAttackEval</div><div id='m_method'> M Method Name: get_mistakes(2)</div><div id='n_method'> N Method Name: get_mistakes(2)</div><div id='m_parent_class'> M Parent Class: DefaultAttackEval</div><div id='n_parent_class'> N Parent Class: DefaultAttackEval</div><div id='m_file'> M File Name: OpenAttack/attack_evals/chinese_eval.py</div><div id='n_file'> N File Name: OpenAttack/attack_evals/chinese_eval.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def get_attn_pad_mask(inputs, input_lengths, expand_length):
     mask position is set to 1 
    non_pad_mask<a id="change"> = </a>get_non_pad_mask(inputs, input_lengths=input_lengths)
    pad_mask = non_pad_mask.squeeze(-1).lt(1)
    attn_mask = pad_mask.unsqueeze(1).expand(-1, expand_length, -1)
    <a id="change">return </a>attn_mask
</code></pre><h3>After Change</h3><pre><code class='java'>
        return non_pad_mask

    non_pad_mask = get_transformer_non_pad_mask(inputs, input_lengths)
    pad_mask = <a id="change">non_pad_mask.lt(</a>1<a id="change">)</a>
    attn_pad_mask = pad_mask.unsqueeze(1).expand(-1, expand_length, -1)
    <a id="change">return </a>attn_pad_mask


def get_attn_subsequent_mask(seq):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sooftware/speech-transformer/commit/cf3f628c8c2d8bd5374d7e166d02dd584cae835b#diff-768cf76455e3c1e0a15667cfe342e7a3c55069efdc122f1071d9fb1e4f9fbb46L64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41112530</div><div id='project'> Project Name: sooftware/speech-transformer</div><div id='commit'> Commit Name: cf3f628c8c2d8bd5374d7e166d02dd584cae835b</div><div id='time'> Time: 2021-05-23</div><div id='author'> Author: sooftware@Soohwanui-MacBookPro.local</div><div id='file'> File Name: speech_transformer/mask.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_attn_pad_mask(3)</div><div id='n_method'> N Method Name: get_attn_pad_mask(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: speech_transformer/mask.py</div><div id='n_file'> N File Name: speech_transformer/mask.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 69</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            - betaln(n - value + 1, bad - n + value + 1)
            - betaln(tot + 1, 1)
        )
        <a id="change">return </a>result


class DiscreteUniform(Discrete):</code></pre><h3>After Change</h3><pre><code class='java'>
            - betaln(tot + 1, 1)
        )
        &#47&#47 value in [max(0, n - N + k), min(k, n)]
        lower<a id="change"> = </a>tt.switch(tt.gt(n - N + k, 0), n - N + k, 0)
        upper = tt.switch(<a id="change">tt.lt(</a>k, n<a id="change">)</a>, k, n)
        <a id="change">return </a>bound(result, lower &lt;= value, value &lt;= upper)


class DiscreteUniform(Discrete):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pymc-devs/pymc3/commit/0402aab9594ec7c4f63c4ea35a52428d424652b4#diff-261a77bdd4256cfbcba0070411f44915028fd09e673694f91f32b6303158e77bL906' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41112528</div><div id='project'> Project Name: pymc-devs/pymc3</div><div id='commit'> Commit Name: 0402aab9594ec7c4f63c4ea35a52428d424652b4</div><div id='time'> Time: 2020-12-22</div><div id='author'> Author: 28983449+ricardoV94@users.noreply.github.com</div><div id='file'> File Name: pymc3/distributions/discrete.py</div><div id='m_class'> M Class Name: HyperGeometric</div><div id='n_method'> N Class Name: HyperGeometric</div><div id='m_method'> M Method Name: logp(2)</div><div id='n_method'> N Method Name: logp(2)</div><div id='m_parent_class'> M Parent Class: Discrete</div><div id='n_parent_class'> N Parent Class: Discrete</div><div id='m_file'> M File Name: pymc3/distributions/discrete.py</div><div id='n_file'> N File Name: pymc3/distributions/discrete.py</div><div id='m_start'> M Start Line: 925</div><div id='m_end'> M End Line: 933</div><div id='n_start'> N Start Line: 920</div><div id='n_end'> N End Line: 936</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    @staticmethod
    def backward(ctx, grad_output):
        inputs, b = ctx.saved_tensors
        pass_through_1<a id="change"> = </a>inputs &gt;= b
        pass_through_2 = grad_output &lt; 0

        pass_through = pass_through_1 | pass_through_2
        <a id="change">return </a>pass_through.type(grad_output.dtype) * grad_output, None

def standardized_CDF_gaussian(value):
    &#47&#47 Gaussian</code></pre><h3>After Change</h3><pre><code class='java'>

    @staticmethod
    def backward(ctx, grad_output):
        gate = torch.logical_or(ctx.mask, <a id="change">grad_output.lt(</a>0.<a id="change">)</a>).type(grad_output.dtype)
        <a id="change">return </a>grad_output * gate, None

def standardized_CDF_gaussian(value):
    &#47&#47 Gaussian</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/justin-tan/high-fidelity-generative-compression/commit/7077e9ea5c4c1c2446dcc56b0aa5abf2da342d15#diff-99aafc9f5b4de4e85bf8d5e80a03c7c05850c03ee71aa8f1212a271e2a48b3e6L39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 41112526</div><div id='project'> Project Name: justin-tan/high-fidelity-generative-compression</div><div id='commit'> Commit Name: 7077e9ea5c4c1c2446dcc56b0aa5abf2da342d15</div><div id='time'> Time: 2020-08-17</div><div id='author'> Author: justan@student.unimelb.edu.au</div><div id='file'> File Name: src/helpers/maths.py</div><div id='m_class'> M Class Name: LowerBoundToward</div><div id='n_method'> N Class Name: LowerBoundToward</div><div id='m_method'> M Method Name: backward(2)</div><div id='n_method'> N Method Name: backward(2)</div><div id='m_parent_class'> M Parent Class: torch.autograd.Function</div><div id='n_parent_class'> N Parent Class: torch.autograd.Function</div><div id='m_file'> M File Name: src/helpers/maths.py</div><div id='n_file'> N File Name: src/helpers/maths.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 28</div><BR>