<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    photon_count = np.random.randint(800, 4000, num_emitters)

    emit = <a id="change">[]</a>
    cont = []
    for i in range(num_emitters):
        if np.any(positions[i, :2] &lt; 0) or np.any(positions[i, :2] &gt; img_size[0]):
            cont.append(Emitter(positions[i, :], np.array([photon_count[i]]), np.array([start_frame[i]]), True))
        else:
            emit.append(Emitter(positions[i, :], np.array([photon_count[i]]), np.array([start_frame[i]])))

    <a id="change">return </a>emit, cont


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
        start_frame = np.random.randint(0, frames, (num_emitters, 1))  &#47&#47 start on state is distributed uniformly
        lifetime_per_emitter = 1

        emit_id<a id="change"> = </a><a id="change">np.expand_dims(</a>np.mgrid[0:num_emitters], 1<a id="change">)</a>
    else:  &#47&#47 prototype
        raise NotImplementedError
        num_emitters = np.round(emitter_per_frame * frames / lifetime)  &#47&#47 roughly</code></pre>