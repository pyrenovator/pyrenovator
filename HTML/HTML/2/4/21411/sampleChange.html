<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                        if world_size &gt; 1:
                            torch.distributed.barrier() 
                            torch.save(opt.state_dict(), os.path.join(args.log_dir, f&quotiteration_{iteration}_rank_{rank}_optim.pth&quot))
                            <a id="change">torch.distributed.barrier()</a> 
                        

                    &#47&#47 lr update</code></pre><h3>After Change</h3><pre><code class='java'>
                                if world_size &gt; 1:
                                    torch.distributed.barrier()
                                torch.save(save_opt_state_dict, os.path.join(args.log_dir, &quotbest_optim.pth&quot))
                                <a id="change">if world_size &gt; 1</a>:
                                    <a id="change">torch.distributed.barrier()</a>

                    &#47&#47 lr update
                    lr = opt.param_groups[0][&quotlr&quot] 
                    if args.warmup &gt; 0 and args.transformer_lr:</code></pre>