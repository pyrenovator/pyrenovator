<html><h3>Pattern ID :29586
</h3><img src='87731458.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    x = batch_norm(x)
    x = relu(x)
    x = pool(x, 3, "maximum", 1, 2)
    <a id="change">return </a>x

class TestLongestDisFuse(unittest.TestCase):
        </code></pre><h3>After Change</h3><pre><code class='java'>

def resnet_fake():
    from jittor import nn
    net = <a id="change">nn.Sequential(
        </a>nn.Conv(3, 64, 7, 2, 3),
        nn.BatchNorm(64),
        <a id="change">nn.ReLU()</a>,
        nn.Pool(3, 2, 1)<a id="change">
    )</a>
    return net

class TestLongestDisFuse(unittest.TestCase):
        </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jittor/jittor/commit/126f92a6f3ad597b22ec2f60908a14af40dc960a#diff-5bae4b4b29c3b9eb948d08d31f9622cad7dd78b9fd6f89696866cf4e29d5bf3fL40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87731458</div><div id='project'> Project Name: jittor/jittor</div><div id='commit'> Commit Name: 126f92a6f3ad597b22ec2f60908a14af40dc960a</div><div id='time'> Time: 2020-05-21</div><div id='author'> Author: randonlang@gmail.com</div><div id='file'> File Name: python/jittor/test/test_longest_dis_fuse.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: resnet_fake(0)</div><div id='n_method'> N Method Name: resnet_fake(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/jittor/test/test_longest_dis_fuse.py</div><div id='n_file'> N File Name: python/jittor/test/test_longest_dis_fuse.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 46</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @staticmethod
    def _block(in_channels, features, name):
        <a id="change">return </a>nn.Sequential(OrderedDict([
            (name + "conv1", nn.Conv3d(
                in_channels=in_channels,
                out_channels=features,</code></pre><h3>After Change</h3><pre><code class='java'>
    @staticmethod
    def _block(in_channels, features, name, dropout=False):
        if dropout:
            block = <a id="change">nn.Sequential(</a>OrderedDict([
                (name + "conv1", nn.Conv3d(
                    in_channels=in_channels,
                    out_channels=features,
                    kernel_size=3,
                    padding=1,
                    bias=False, ),),
                (name + "norm1", nn.BatchNorm3d(num_features=features)),
                (name + "relu1", nn.ReLU(inplace=True)),
                (name + "dropout1", nn.Dropout3d()),
                (name + "conv2", nn.Conv3d(
                    in_channels=features,
                    out_channels=features,
                    kernel_size=3,
                    padding=1,
                    bias=False, ),),
                (name + "norm2", nn.BatchNorm3d(num_features=features)),
                (name + "relu2", <a id="change">nn.ReLU(inplace=True)</a>),
                (name + "dropout2", nn.Dropout3d()),
            ])<a id="change">)</a>
        else:
            block = nn.Sequential(OrderedDict([
                (name + "conv1", nn.Conv3d(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/junqiangchen/pytorchdeeplearing/commit/3568e14f84b552f87584e636e4a4e6bfb9fdea74#diff-fedfbba4fab2f30ab19c1d73d53a0661a530921a70a1d675022967a9c1bb4be4L65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87731473</div><div id='project'> Project Name: junqiangchen/pytorchdeeplearing</div><div id='commit'> Commit Name: 3568e14f84b552f87584e636e4a4e6bfb9fdea74</div><div id='time'> Time: 2022-07-12</div><div id='author'> Author: 1207173174@qq.com</div><div id='file'> File Name: networks/Unet3d.py</div><div id='m_class'> M Class Name: UNet3d</div><div id='n_method'> N Class Name: UNet3d</div><div id='m_method'> M Method Name: _block(4)</div><div id='n_method'> N Method Name: _block(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: networks/Unet3d.py</div><div id='n_file'> N File Name: networks/Unet3d.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 88</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            mlp.append(nn.ReLU())
            if add_batchnorm:
                mlp.append(nn.BatchNorm1d(dims[i+1]))
    <a id="change">return </a>nn.Sequential(*mlp)


class LanguageEncoder(torch.nn.Module):</code></pre><h3>After Change</h3><pre><code class='java'>
        ])
    else:
        return nn.Sequential(*[
            <a id="change">nn.Sequential(</a>nn.Linear(channels[i - 1], channels[i]), <a id="change">nn.ReLU())</a>
            for i in range(1, len(channels))
        ])    

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mako443/text2pos-cvpr2022/commit/88c1c8af6aea88e3a9e528f30f519f4a6d1fbaef#diff-2dccda26e4003aa3a3dd764be0a7d33383f11dab88267e726c71f3be31479bc3L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87731462</div><div id='project'> Project Name: mako443/text2pos-cvpr2022</div><div id='commit'> Commit Name: 88c1c8af6aea88e3a9e528f30f519f4a6d1fbaef</div><div id='time'> Time: 2021-04-16</div><div id='author'> Author: manuel.kolmet@gmail.com</div><div id='file'> File Name: models/modules.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_mlp(2)</div><div id='n_method'> N Method Name: get_mlp(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: models/modules.py</div><div id='n_file'> N File Name: models/modules.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 30</div><BR>