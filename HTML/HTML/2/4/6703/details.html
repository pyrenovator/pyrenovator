<html><h3>Pattern ID :6703
</h3><img src='23016575.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            with torch.no_grad():
                model_output = self.unet(image, t)

            <a id="change">if </a><a id="change">isinstance(</a>model_output, dict<a id="change">)</a>:
                model_output<a id="change"> = </a>model_output["sample"]

            &#47&#47 2. predict previous mean of image x_t-1 and add variance depending on eta
            &#47&#47 do x_t -&gt; x_t-1</code></pre><h3>After Change</h3><pre><code class='java'>
        image = self.vqvae.decode(latents)

        image = (image / 2 + 0.5).clamp(0, 1)
        image = <a id="change">image.cpu().permute(</a>0, 2, 3, 1<a id="change">)</a>.numpy()

        return {"sample": image}
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/8b4371f70fb5e791f4467a30375ef226bc5186a9#diff-5a7ee70ffdbd476077b691c023447641dd657f00acfc79868f392d410574c691L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23016575</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: 8b4371f70fb5e791f4467a30375ef226bc5186a9</div><div id='time'> Time: 2022-07-20</div><div id='author'> Author: anton@huggingface.co</div><div id='file'> File Name: src/diffusers/pipelines/latent_diffusion_uncond/pipeline_latent_diffusion_uncond.py</div><div id='m_class'> M Class Name: LatentDiffusionUncondPipeline</div><div id='n_method'> N Class Name: LatentDiffusionUncondPipeline</div><div id='m_method'> M Method Name: __call__(6)</div><div id='n_method'> N Method Name: __call__(6)</div><div id='m_parent_class'> M Parent Class: DiffusionPipeline</div><div id='n_parent_class'> N Parent Class: DiffusionPipeline</div><div id='m_file'> M File Name: src/diffusers/pipelines/latent_diffusion_uncond/pipeline_latent_diffusion_uncond.py</div><div id='n_file'> N File Name: src/diffusers/pipelines/latent_diffusion_uncond/pipeline_latent_diffusion_uncond.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        out = self.layer3(out)
        out = self.layer4(out)

        <a id="change">if </a><a id="change">isinstance(</a>self.pool, SAP<a id="change">)</a>:
            stats<a id="change">, penalty = </a>self.pool(out)
        else:
            stats = self.pool(out)
</code></pre><h3>After Change</h3><pre><code class='java'>
        return nn.Sequential(*layers)

    def forward(self, x):
        x = <a id="change">x.permute(</a>0, 2, 1<a id="change">)</a> &#47&#47 (B,T,F) =&gt; (B,F,T)

        x = x.unsqueeze_(1)
        out = F.relu(self.bn1(self.conv1(x)))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wenet-e2e/wespeaker/commit/6a2651fc25bac57088e1761363c364a796e979d6#diff-d0d33fc4ad6a546a04971e59010308bfb1c5c277280b0bcf80d8998f1824e304L96' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23016570</div><div id='project'> Project Name: wenet-e2e/wespeaker</div><div id='commit'> Commit Name: 6a2651fc25bac57088e1761363c364a796e979d6</div><div id='time'> Time: 2022-01-09</div><div id='author'> Author: jijijiang77@gmail.com</div><div id='file'> File Name: wenet_speaker/models/resnet.py</div><div id='m_class'> M Class Name: ResNet</div><div id='n_method'> N Class Name: ResNet</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: wenet_speaker/models/resnet.py</div><div id='n_file'> N File Name: wenet_speaker/models/resnet.py</div><div id='m_start'> M Start Line: 102</div><div id='m_end'> M End Line: 119</div><div id='n_start'> N Start Line: 97</div><div id='n_end'> N End Line: 119</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        t = time.perf_counter()
        print(&quotPermuting data...&quot, end=&quot &quot, flush=True)

    <a id="change">if </a><a id="change">isinstance(</a>data, Data<a id="change">)</a>:
        data = copy.copy(data)
        for key, item in data:
            if isinstance(item, Tensor) and item.size(0) == data.num_nodes:
                data[key] = item[perm]
            elif isinstance(item, Tensor) and item.size(0) == data.num_edges:
                raise NotImplementedError
            elif isinstance(item, SparseTensor):
                data[key] = permute(item, perm, log=False)
    else:
        data<a id="change"> = </a>data.permute(perm)

    if log:
        print(f&quotDone! [{time.perf_counter() - t:.2f}s]&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
        elif isinstance(value, Tensor) and value.size(0) == data.num_edges:
            raise NotImplementedError
        elif isinstance(value, SparseTensor):
            data[key] = <a id="change">value.permute(</a>perm<a id="change">)</a>

    if log:
        print(f&quotDone! [{time.perf_counter() - t:.2f}s]&quot)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rusty1s/pyg_autoscale/commit/38f62d97ec0a86ba3c04ffa6bfb151e54e20f33e#diff-9eef414dafff7d32e59168e80f06a4d4a9ff812e2514d4e3589ea36bb3878cdcL37' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 23016576</div><div id='project'> Project Name: rusty1s/pyg_autoscale</div><div id='commit'> Commit Name: 38f62d97ec0a86ba3c04ffa6bfb151e54e20f33e</div><div id='time'> Time: 2021-06-08</div><div id='author'> Author: matthias.fey@tu-dortmund.de</div><div id='file'> File Name: torch_geometric_autoscale/metis.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: permute(3)</div><div id='n_method'> N Method Name: permute(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_geometric_autoscale/metis.py</div><div id='n_file'> N File Name: torch_geometric_autoscale/metis.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 56</div><div id='n_start'> N Start Line: 41</div><div id='n_end'> N End Line: 58</div><BR>