<html><h3>Pattern ID :41015
</h3><img src='115692613.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.assertEqual(10, nc_scenario.n_classes)

        all_classes = set()
        <a id="change">for </a>task_id in range(2)<a id="change">:
            </a>all_classes.update(nc_scenario.classes_in_task[task_id])

        self.assertEqual(7, len(all_classes))
</code></pre><h3>After Change</h3><pre><code class='java'>
            (nc_scenario.classes_in_task[0] == list(range(0, 7)) and
             nc_scenario.classes_in_task[1] == [0, 1, 2]))

        step_classes_ref1<a id="change"> = </a>[list(range(3)), list(range(7))]
        step_classes_ref2 = [list(range(7)), list(range(3))]

        <a id="change">self.assertTrue(step_classes == step_classes_ref1</a> or
                        step_classes == step_classes_ref2<a id="change">)</a>


if __name__ == &quot__main__&quot:
    unittest.main()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/continualai/avalanche/commit/156efb35f8b993728b8ccdc03c9b316b8c1603f9#diff-9d6479dfb05873f6a78ce522564c0adf5f3b38eafda9f825bde46e81ac0c8d0dL156' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115692613</div><div id='project'> Project Name: continualai/avalanche</div><div id='commit'> Commit Name: 156efb35f8b993728b8ccdc03c9b316b8c1603f9</div><div id='time'> Time: 2020-06-29</div><div id='author'> Author: lrzpellegrini@gmail.com</div><div id='file'> File Name: tests/test_nc_mt_scenario.py</div><div id='m_class'> M Class Name: MultiTaskTests</div><div id='n_method'> N Class Name: MultiTaskTests</div><div id='m_method'> M Method Name: test_mt_multi_dataset_one_task_per_set(1)</div><div id='n_method'> N Method Name: test_mt_multi_dataset_one_task_per_set(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_nc_mt_scenario.py</div><div id='n_file'> N File Name: tests/test_nc_mt_scenario.py</div><div id='m_start'> M Start Line: 163</div><div id='m_end'> M End Line: 166</div><div id='n_start'> N Start Line: 156</div><div id='n_end'> N End Line: 182</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.assertTrue(isinstance(datasets[k].dataset.datasets[0], src_class))
            self.assertTrue(len(datasets[k]) == sizes[k])
        if target_with_labels:
            <a id="change">for </a>k in [
                "target_train",
                "target_val",
                "target_train_with_labels",
                "target_val_with_labels",
            ]<a id="change">:
                </a>self.assertTrue(
                    isinstance(datasets[k].dataset.datasets[0], target_class)
                )
                self.assertTrue(len(datasets[k]) == sizes[k])</code></pre><h3>After Change</h3><pre><code class='java'>
            self.assertTrue(isinstance(datasets[k], SourceDataset))
            self.assertTrue(len(datasets[k]) == sizes[k])

        target_splits<a id="change"> = </a>["target_train", "target_val"]
        if target_with_labels:
            target_splits += ["target_train_with_labels", "target_val_with_labels"]
        target_sizes = {k for k in sizes.keys() if k.startswith("target")}

        <a id="change">self.assertTrue(set(target_splits) == target_sizes</a><a id="change">)</a>
        for k in target_splits:
            self.assertTrue(isinstance(datasets[k].dataset.datasets[0], target_class))
            self.assertTrue(isinstance(datasets[k], TargetDataset))
            self.assertTrue(len(datasets[k]) == sizes[k])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kevinmusgrave/pytorch-adapt/commit/daf1efd0afeb67b38ec87ffb08eaead8a5c5801e#diff-1c360c70233bc05b9593bb37415502cca57d5ec3f86ae7d7ff9b5c9ae26fb38bL21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115692620</div><div id='project'> Project Name: kevinmusgrave/pytorch-adapt</div><div id='commit'> Commit Name: daf1efd0afeb67b38ec87ffb08eaead8a5c5801e</div><div id='time'> Time: 2022-04-15</div><div id='author'> Author: tkm45@cornell.edu</div><div id='file'> File Name: tests/datasets/test_getters.py</div><div id='m_class'> M Class Name: TestGetters</div><div id='n_method'> N Class Name: TestGetters</div><div id='m_method'> M Method Name: helper(6)</div><div id='n_method'> N Method Name: helper(6)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/datasets/test_getters.py</div><div id='n_file'> N File Name: tests/datasets/test_getters.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 SimpleImputer on string is not available for string
        &#47&#47 in ONNX-ML specifications.
        &#47&#47 So we do it beforehand.
        <a id="change">for </a>cat in ["embarked", "sex", "pclass"]<a id="change">:
            </a>X[cat].fillna("missing", inplace=True)

        X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)
</code></pre><h3>After Change</h3><pre><code class='java'>

        clf.fit(X_train, y_train)

        torch_model<a id="change"> = </a>hummingbird.ml.convert(clf, "torch", X_test)

        <a id="change">self.assertTrue(torch_model is not None</a><a id="change">)</a>

        np.testing.assert_allclose(
            clf.predict(X_test), torch_model.predict(X_test), rtol=1e-06, atol=1e-06,
        )</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/hummingbird/commit/26411642f06c123d1404658f7b7297f01836b330#diff-2645dd982d19e4421ccf3839b44a3966a9f282115b03b159d583091b091fbd57L130' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115692607</div><div id='project'> Project Name: microsoft/hummingbird</div><div id='commit'> Commit Name: 26411642f06c123d1404658f7b7297f01836b330</div><div id='time'> Time: 2020-09-17</div><div id='author'> Author: m.interlandi@gmail.com</div><div id='file'> File Name: tests/test_sklearn_pipeline.py</div><div id='m_class'> M Class Name: TestSklearnPipeline</div><div id='n_method'> N Class Name: TestSklearnPipeline</div><div id='m_method'> M Method Name: test_pipeline_column_transformer_string(1)</div><div id='n_method'> N Method Name: test_pipeline_column_transformer_string(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_sklearn_pipeline.py</div><div id='n_file'> N File Name: tests/test_sklearn_pipeline.py</div><div id='m_start'> M Start Line: 144</div><div id='m_end'> M End Line: 214</div><div id='n_start'> N Start Line: 143</div><div id='n_end'> N End Line: 179</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        config_names = self.dataset_tester.prepare_config_names()
        dataset_builder_class_cls = self.dataset_tester.load_builder_cls()

        <a id="change">for </a>config_name in config_names<a id="change">:
            &#47&#47 create config and dataset
            </a>dataset_builder = dataset_builder_class_cls(config_name)

            path_to_dummy_data = self.dataset_tester.download_dummy_data(config_name)
</code></pre><h3>After Change</h3><pre><code class='java'>
                dataset_builder.download_and_prepare()

                &#47&#47 get dataset
                dataset<a id="change"> = </a>dataset_builder.as_dataset()

                &#47&#47 check that dataset is not empty
                for split in dataset_builder.info.splits.keys():
                    &#47&#47 check that loaded datset is not empty
                    <a id="change">self.assertTrue(len(dataset[split]) &gt; 0</a><a id="change">)</a>


def get_dataset_names():
    &#47&#47 this function will call the dataset API and get the current names</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/e265044d925d92277f5664628d4fd4cd11dc7ef5#diff-a1bc225bd9a5bade373d1f140e24d09cbbdc97971c2f73bb627daaa803ada002L69' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115692617</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: e265044d925d92277f5664628d4fd4cd11dc7ef5</div><div id='time'> Time: 2020-04-27</div><div id='author'> Author: patrick.v.platen@gmail.com</div><div id='file'> File Name: tests/test_dataset_common.py</div><div id='m_class'> M Class Name: DatasetTesterMixin</div><div id='n_method'> N Class Name: DatasetTesterMixin</div><div id='m_method'> M Method Name: test_load_dataset(1)</div><div id='n_method'> N Method Name: test_load_dataset(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_dataset_common.py</div><div id='n_file'> N File Name: tests/test_dataset_common.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 90</div><div id='n_start'> N Start Line: 77</div><div id='n_end'> N End Line: 107</div><BR>