<html><h3>Pattern ID :18591
</h3><img src='60685181.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        entity_linker.set_kb(kb)
        nlp.add_pipe(entity_linker, last=True)
    else:
        entity_linker = <a id="change">nlp.get_pipe("entity_linker"</a><a id="change">)</a>
        kb = entity_linker.kb

    &#47&#47 make sure the annotated examples correspond to known identifiers in the knowlege base
    kb_ids = kb.get_entity_strings()</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Convert the texts to docs to make sure we have doc.ents set for the training examples.
    &#47&#47 Also ensure that the annotated examples correspond to known identifiers in the knowlege base.
    kb_ids = <a id="change">nlp.get_pipe("entity_linker"</a><a id="change">)</a>.kb.get_entity_strings()
    TRAIN_DOCS = []
    for text, annotation in TRAIN_DATA:
        with nlp.disable_pipes("entity_linker"):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/5355b0038fa1b3a525d408b2bfadb96d5bcf980e#diff-8f0c32bdb0191d5201d1cd04dd54d079f667c1ff3377704c5793eed8b92d415fL70' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60685181</div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 5355b0038fa1b3a525d408b2bfadb96d5bcf980e</div><div id='time'> Time: 2019-12-11</div><div id='author'> Author: svlandeg@users.noreply.github.com</div><div id='file'> File Name: examples/training/train_entity_linker.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(4)</div><div id='n_method'> N Method Name: main(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/training/train_entity_linker.py</div><div id='n_file'> N File Name: examples/training/train_entity_linker.py</div><div id='m_start'> M Start Line: 76</div><div id='m_end'> M End Line: 109</div><div id='n_start'> N Start Line: 70</div><div id='n_end'> N End Line: 124</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 think about how this affects OntologyMatcher._set_span_attributes lookup of parser names in case they
        &#47&#47 are not there in the new config.
        self.spacy_pipeline = spacy.load(path)
        self.span_key = <a id="change">self.spacy_pipeline.get_pipe("ontology_matcher"</a><a id="change">)</a>.span_key

        self.synonym_db = SynonymDatabase()
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 think about how this affects OntologyMatcher._set_span_attributes lookup of parser names in case they
        &#47&#47 are not there in the new config.
        self.spacy_pipeline = spacy.load(path)
        matcher: OntologyMatcher = <a id="change">self.spacy_pipeline.get_pipe("ontology_matcher"</a><a id="change">)</a>
        self.span_key = matcher.span_key

        self.synonym_db = SynonymDatabase()
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/15044d9659c16e232051b0d2dbd41789e6de2a0b#diff-a3c12d27983a81dd36f72e6d4de0e0941b6be68bc0ad30a0d283f3991cfc666dL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60685183</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: 15044d9659c16e232051b0d2dbd41789e6de2a0b</div><div id='time'> Time: 2022-11-30</div><div id='author'> Author: elliot.ford@astrazeneca.com</div><div id='file'> File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='m_class'> M Class Name: ExplosionStringMatchingStep</div><div id='n_method'> N Class Name: ExplosionStringMatchingStep</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: BaseStep</div><div id='n_parent_class'> N Parent Class: BaseStep</div><div id='m_file'> M File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='n_file'> N File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 think about how this affects the OntologyMatcher&quots lookup of parser names in case they
        &#47&#47 are not there in the new config.
        self.spacy_pipeline = spacy.load(path)
        matcher: OntologyMatcher = <a id="change">self.spacy_pipeline.get_pipe("ontology_matcher"</a><a id="change">)</a>
        self.span_key = matcher.span_key

        self.synonym_db = SynonymDatabase()
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 think about how this affects the OntologyMatcher&quots lookup of parser names in case they
        &#47&#47 are not there in the new config.
        self.spacy_pipeline = spacy.load(path)
        matcher = cast(OntologyMatcher, <a id="change">self.spacy_pipeline.get_pipe("ontology_matcher"</a><a id="change">)</a>)
        self.span_key = matcher.span_key

        self.synonym_db = SynonymDatabase()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/astrazeneca/kazu/commit/e9f958e7a991326fe775e31f1d826f0f64a16dd5#diff-a3c12d27983a81dd36f72e6d4de0e0941b6be68bc0ad30a0d283f3991cfc666dL26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60685185</div><div id='project'> Project Name: astrazeneca/kazu</div><div id='commit'> Commit Name: e9f958e7a991326fe775e31f1d826f0f64a16dd5</div><div id='time'> Time: 2023-01-14</div><div id='author'> Author: elliot.ford@astrazeneca.com</div><div id='file'> File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='m_class'> M Class Name: ExplosionStringMatchingStep</div><div id='n_method'> N Class Name: ExplosionStringMatchingStep</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: Step</div><div id='n_parent_class'> N Parent Class: Step</div><div id='m_file'> M File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='n_file'> N File Name: kazu/steps/joint_ner_and_linking/explosion.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 43</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 43</div><BR>