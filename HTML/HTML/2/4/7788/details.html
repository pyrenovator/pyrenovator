<html><h3>Pattern ID :7788
</h3><img src='27899801.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
			x += spacing_x + x_offset
			if x + font_size &gt; x2 and i + 1 &lt; len(lines) :
				break
			if x &gt; <a id="change">cur_line_bbox.width() + </a>x1 + font_size * 2 and i + 1 &lt; len(lines) :
				break
		y += font_size + spacing_y
		i += 1</code></pre><h3>After Change</h3><pre><code class='java'>
			x += spacing_x + x_offset
			if x + font_size &gt; x2 :
				break
			if x &gt; <a id="change">cur_line_bbox.width() * </a>mag_ratio + x1 + font_size * 2 and i + 1 &lt; len(lines) :
				break
		y += font_size + spacing_y
		i += 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/zyddnys/manga-image-translator/commit/605e7ecd9cf3b0a00b67fab40020c269a7bea4a3#diff-a00d57a134f11bad95204dec4abd6df6ae878f21b5826d1211aa9e4570e77203L296' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899801</div><div id='project'> Project Name: zyddnys/manga-image-translator</div><div id='commit'> Commit Name: 605e7ecd9cf3b0a00b67fab40020c269a7bea4a3</div><div id='time'> Time: 2021-07-26</div><div id='author'> Author: zyddnys@outlook.com</div><div id='file'> File Name: text_render.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: put_text_horizontal(13)</div><div id='n_method'> N Method Name: put_text_horizontal(11)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: text_render.py</div><div id='n_file'> N File Name: text_render.py</div><div id='m_start'> M Start Line: 296</div><div id='m_end'> M End Line: 331</div><div id='n_start'> N Start Line: 310</div><div id='n_end'> N End Line: 350</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    else:
                        yoff = -pun_tbr.top() - fm.ascent() - pun_tbr.height() / 2 - cfmt.br.width() / 2
                    if char in PUNSET_NONBRACKET:
                        yoff = -<a id="change">cfmt.tbr.width() - </a>pun_br.height() + cfmt.br.width()
                        &#47&#47 line.draw(painter, QPointF(hight_comp,  yoff - pun_tbr.height()), o)
                    line.draw(painter, QPointF(hight_comp,  yoff), o)
                    painter.setTransform(inv_transform, True)</code></pre><h3>After Change</h3><pre><code class='java'>
                    elif char in PUNSET_NONBRACKET:
                        yoff =  -non_bracket_br[1] - non_bracket_br[3]
                        if self.punc_align_center:
                            yoff = yoff<a id="change"> - </a><a id="change">cfmt.tbr.width()</a> / 2 + non_bracket_br[3] / 3
                        else:
                            yoff = yoff - cfmt.tbr.width() + non_bracket_br[3]
                    else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/4a49735da4dd45753a39aeb5b450778d346b1eae#diff-aa30432cc2fa48fb565134b7016dce79dfcd72b25d12617536123aa7380a8965L142' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899784</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: 4a49735da4dd45753a39aeb5b450778d346b1eae</div><div id='time'> Time: 2022-08-28</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: QAbstractTextDocumentLayout</div><div id='n_parent_class'> N Parent Class: QAbstractTextDocumentLayout</div><div id='m_file'> M File Name: ballontranslator/ui/textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/textlayout.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 197</div><div id='n_end'> N End Line: 244</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    x = min(max(0, x), self.width()-textw)
                    &#47&#47 x = rect.x()
                else:  &#47&#47 在左侧绘制文字
                    x, y = rect.x()<a id="change"> - </a><a id="change">rect.width()</a> - 2, rect.y()
                painter.drawText(
                    x, y-10, textw, rect.height()+20,
                    Qt.AlignCenter, self.draw_content.replace("value", str(self.value()))</code></pre><h3>After Change</h3><pre><code class='java'>
                    x = min(max(0, x), self.width()-textw)
                    &#47&#47 x = rect.x()
                else:  &#47&#47 在左侧绘制文字
                    x, y = rect.x()<a id="change"> - </a><a id="change">rect.width()</a>, rect.y()
                painter.drawText(
                    x, y-10, textw, rect.height()+20,
                    Qt.AlignCenter, self.draw_content.replace("value", str(self.value()))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/a285d108a077ccfe40b839239443fccd83cca0c5#diff-2ddce21d998ed5fe4845a3a8327122ae8b5b5e574affb84535811992015b724dL240' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899788</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: a285d108a077ccfe40b839239443fccd83cca0c5</div><div id='time'> Time: 2022-06-14</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/stylewidgets.py</div><div id='m_class'> M Class Name: PaintQSlider</div><div id='n_method'> N Class Name: PaintQSlider</div><div id='m_method'> M Method Name: paintEvent(2)</div><div id='n_method'> N Method Name: paintEvent(2)</div><div id='m_parent_class'> M Parent Class: QSlider</div><div id='n_parent_class'> N Parent Class: QSlider</div><div id='m_file'> M File Name: ballontranslator/ui/stylewidgets.py</div><div id='n_file'> N File Name: ballontranslator/ui/stylewidgets.py</div><div id='m_start'> M Start Line: 283</div><div id='m_end'> M End Line: 287</div><div id='n_start'> N Start Line: 271</div><div id='n_end'> N End Line: 275</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    if self.punc_align_center:
                        xoff += (cfmt.br.width() - pun_tbr.width()) / 2
                    else:
                        xoff -= line.naturalTextWidth()<a id="change"> - </a><a id="change">cfmt.br.width()</a>
                        xoff += cfmt.br.width() - pun_tbr.width()
                    line.draw(painter, QPointF(xoff, yoff), o)
                else:
                    yoff = line.naturalTextWidth() - cfmt.br.width()</code></pre><h3>After Change</h3><pre><code class='java'>
                    pun_tbr, pun_br = cfmt.punc_rect(char)
                    yoff = pun_br.top() - pun_tbr.top()
                    xoff = -pun_tbr.left()
                    shifted = line.naturalTextWidth()<a id="change"> - </a><a id="change">cfmt.br.width()</a>
                    if num_lspaces &gt; 0:
                        yoff += shifted
                        xoff -= shifted
                    if self.punc_align_center:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/fc576fd9afaab36ee12e0b12b74740d5b6a2b349#diff-aa30432cc2fa48fb565134b7016dce79dfcd72b25d12617536123aa7380a8965L174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899790</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: fc576fd9afaab36ee12e0b12b74740d5b6a2b349</div><div id='time'> Time: 2022-08-28</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: SceneTextLayout</div><div id='n_parent_class'> N Parent Class: QAbstractTextDocumentLayout</div><div id='m_file'> M File Name: ballontranslator/ui/textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/textlayout.py</div><div id='m_start'> M Start Line: 252</div><div id='m_end'> M End Line: 256</div><div id='n_start'> N Start Line: 275</div><div id='n_end'> N End Line: 281</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    inv_transform = QTransform(0, -1, 0, 1, 0, 0, -y_x, y_p_x, 1)
                    painter.setTransform(transform, True)
                    pun_tbr, pun_br = cfmt.punc_rect(char)
                    hight_comp = pun_tbr.width()<a id="change"> - </a><a id="change">pun_br.width()</a> + 2

                    if char.isalpha():
                        yoff = -cfmt.tbr.top() - fm.ascent() - cfmt.tbr.width()</code></pre><h3>After Change</h3><pre><code class='java'>
                    inv_transform = QTransform(0, -1, 0, 1, 0, 0, -y_x, y_p_x, 1)
                    painter.setTransform(transform, True)
                    pun_tbr, pun_br = cfmt.punc_rect(char)
                    hight_comp = pun_tbr.width()<a id="change"> - </a><a id="change">pun_br.width()</a>

                    if char.isalpha():
                        yoff = -cfmt.tbr.top() - fm.ascent() - cfmt.tbr.width()
                        hight_comp = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/630a1b4cee950defda563255872b05426037e20d#diff-2280c33c620559afa2066016e28328873ed99c20b268e5a461f2eb9fdc1fb67cL253' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899792</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: 630a1b4cee950defda563255872b05426037e20d</div><div id='time'> Time: 2022-08-29</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: SceneTextLayout</div><div id='n_parent_class'> N Parent Class: SceneTextLayout</div><div id='m_file'> M File Name: ballontranslator/ui/scene_textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_start'> M Start Line: 312</div><div id='m_end'> M End Line: 312</div><div id='n_start'> N Start Line: 312</div><div id='n_end'> N End Line: 312</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    pun_tbr, pun_br = cfmt.punc_rect(char)
                    yoff = pun_br.top() - pun_tbr.top()
                    xoff = -pun_tbr.left()
                    shifted = line.naturalTextWidth()<a id="change"> - </a><a id="change">cfmt.br.width()</a>
                    if num_lspaces &gt; 0:
                        yoff += shifted
                        xoff -= shifted
                    if self.punc_align_center:</code></pre><h3>After Change</h3><pre><code class='java'>
                        o.length = line.textLength()
                        o.format = selection.format
                
                natral_shifted = max(line.naturalTextWidth()<a id="change"> - </a><a id="change">cfmt.br.width()</a>, 0)
                if char in PUNSET_VERNEEDROTATE:
                    char = blk_text[char_idx]
                    line_x, line_y = line.x(), line.y()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dmmaze/ballonstranslator/commit/eab989632c95aef750234d6d12c634e58acccd8b#diff-2280c33c620559afa2066016e28328873ed99c20b268e5a461f2eb9fdc1fb67cL198' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 27899794</div><div id='project'> Project Name: dmmaze/ballonstranslator</div><div id='commit'> Commit Name: eab989632c95aef750234d6d12c634e58acccd8b</div><div id='time'> Time: 2022-08-29</div><div id='author'> Author: beneathlimbo@gmail.com</div><div id='file'> File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_class'> M Class Name: VerticalTextDocumentLayout</div><div id='n_method'> N Class Name: VerticalTextDocumentLayout</div><div id='m_method'> M Method Name: draw(3)</div><div id='n_method'> N Method Name: draw(3)</div><div id='m_parent_class'> M Parent Class: SceneTextLayout</div><div id='n_parent_class'> N Parent Class: SceneTextLayout</div><div id='m_file'> M File Name: ballontranslator/ui/scene_textlayout.py</div><div id='n_file'> N File Name: ballontranslator/ui/scene_textlayout.py</div><div id='m_start'> M Start Line: 221</div><div id='m_end'> M End Line: 288</div><div id='n_start'> N Start Line: 276</div><div id='n_end'> N End Line: 352</div><BR>