<html><h3>Pattern ID :16772
</h3><img src='56077891.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Returns:

        
        results<a id="change"> = </a><a id="change">AttrDict({
            </a>&quotepoch_losses&quot: [],
            &quotepoch_regularizations&quot: []<a id="change">,
        }</a><a id="change">)</a>
        &#47&#47 metrics = AttrDict({})
        &#47&#47 for metric in self.metrics:
        &#47&#47     metrics[metric.name] = []
</code></pre><h3>After Change</h3><pre><code class='java'>

        if self.verbose:
            print("Train Time: {:8.4f}".format(time.time() - start))
            print("Total Batches: ", <a id="change">self.metrics[0]</a>.total_updates)

    def _train_epoch(self, e, loader):
        Make one complete iteration over all samples in dataloader and update model after each batch.</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/ea05689f7ccca059223f80c7bd85f8b7943e69d0#diff-2f9d256a00b87e584a2550e159cce3c51e4c971b3b1d4b4beb928d598e1f43a0L274' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56077891</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: ea05689f7ccca059223f80c7bd85f8b7943e69d0</div><div id='time'> Time: 2020-06-16</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: neuralprophet/neural_prophet.py</div><div id='m_class'> M Class Name: NeuralProphet</div><div id='n_method'> N Class Name: NeuralProphet</div><div id='m_method'> M Method Name: _train(2)</div><div id='n_method'> N Method Name: _train(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/neural_prophet.py</div><div id='n_file'> N File Name: neuralprophet/neural_prophet.py</div><div id='m_start'> M Start Line: 277</div><div id='m_end'> M End Line: 302</div><div id='n_start'> N Start Line: 274</div><div id='n_end'> N End Line: 284</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        seasonalities[props[&quotmode&quot]][name] = features
    &#47&#47 remove potentially empty mode-OrderedDicts
    seasonalities_out<a id="change"> = </a><a id="change">AttrDict({}</a><a id="change">)</a>
    for mode in seasonalities:
        if len(seasonalities[mode]) &gt; 0:
            seasonalities_out[mode] = seasonalities[mode]
    return seasonalities_out</code></pre><h3>After Change</h3><pre><code class='java'>
    seasonalities = OrderedDict({})
    &#47&#47 Seasonality features
    for name, period in season_config.periods.items():
        if <a id="change">period[&quotresolution&quot]</a> &gt; 0:
            features = fourier_series(
                dates=dates,
                period=period[&quotperiod&quot],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/6c2ec029f5701959a2786d0e77ddee5318e6fcfc#diff-db4a8b618706896edff44e14aab2b54e151fb6c58d2c3664bf6a9f10b814c9d8L235' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56077889</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 6c2ec029f5701959a2786d0e77ddee5318e6fcfc</div><div id='time'> Time: 2020-06-02</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: code/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: seasonal_features_from_dates(2)</div><div id='n_method'> N Method Name: seasonal_features_from_dates(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: code/utils.py</div><div id='n_file'> N File Name: code/utils.py</div><div id='m_start'> M Start Line: 251</div><div id='m_end'> M End Line: 268</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 129</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self._init_model()
        dataset = self._create_dataset(df, predict_mode=False)
        loader = DataLoader(dataset , batch_size=self.train_config["batch"], shuffle=True)
        results<a id="change"> = </a><a id="change">AttrDict({}</a><a id="change">)</a>
        total_batches = 0
        epoch_losses = []
        epoch_regs = []
        start = time.time()</code></pre><h3>After Change</h3><pre><code class='java'>
        results["time_train"] = time.time() - start
        results["loss_train"] = epoch_losses[-1]
        if self.verbose:
            print("Train Time: {:8.4f}".format(<a id="change">results["time_train"]</a>))
            print("Total Number of Batches: ", total_batches)
        return results
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/6c2ec029f5701959a2786d0e77ddee5318e6fcfc#diff-edfdd0e443efa5b2400ebafefe646879d13f1cc7a94707dedc8f404145201a91L200' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 56077887</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 6c2ec029f5701959a2786d0e77ddee5318e6fcfc</div><div id='time'> Time: 2020-06-02</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: code/bifrost.py</div><div id='m_class'> M Class Name: Bifrost</div><div id='n_method'> N Class Name: Bifrost</div><div id='m_method'> M Method Name: _train(2)</div><div id='n_method'> N Method Name: _train(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: code/bifrost.py</div><div id='n_file'> N File Name: code/bifrost.py</div><div id='m_start'> M Start Line: 201</div><div id='m_end'> M End Line: 231</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 226</div><BR>