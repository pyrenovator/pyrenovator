<html><h3>Pattern ID :41660
</h3><img src='116960941.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        server_config[&quotmodel-repository&quot] = MODEL_REPOSITORY_PATH

        &#47&#47 Create server, start , wait, and stop
        <a id="change">for </a>factory in SERVER_FACTORIES<a id="change">:
            </a>self.server = factory.create_server(
                model_path=MODEL_LOCAL_PATH,
                version=TRITON_VERSION,
                config=server_config)</code></pre><h3>After Change</h3><pre><code class='java'>
            config=server_config)

        &#47&#47 Set CUDA_VISIBLE_DEVICES and start the server
        <a id="change">with self</a><a id="change">.assertRaises(TritonModelAnalyzerException,
                               msg="Expected to exceed num_retries"):
            </a>self.server.wait_for_ready()

        self.server.start()
        self.server.wait_for_ready()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/89533b0906860b8813da0f64cddeea8c7ed067df#diff-aea6bfd69509d062f35f04282459297c194918a7885b1e0cffd1975426c5d0ecL138' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116960941</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: 89533b0906860b8813da0f64cddeea8c7ed067df</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: asramesh@nvidia.com</div><div id='file'> File Name: tests/test_triton_server.py</div><div id='m_class'> M Class Name: TestTritonServerMethods</div><div id='n_method'> N Class Name: TestTritonServerMethods</div><div id='m_method'> M Method Name: test_start_wait_stop_gpus(1)</div><div id='n_method'> N Method Name: test_start_wait_stop_gpus(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_triton_server.py</div><div id='n_file'> N File Name: tests/test_triton_server.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 151</div><div id='n_start'> N Start Line: 142</div><div id='n_end'> N End Line: 169</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        server_config[&quotmodel-repository&quot] = MODEL_REPOSITORY_PATH

        &#47&#47 Run for both types of environments
        <a id="change">for </a>factory in SERVER_FACTORIES<a id="change">:
            </a>self.server = factory.create_server(
                model_path=MODEL_LOCAL_PATH,
                version=TRITON_VERSION,
                config=server_config)</code></pre><h3>After Change</h3><pre><code class='java'>
                model_path=MODEL_LOCAL_PATH,
                version=TRITON_VERSION,
                config=server_config)
        <a id="change">with self</a><a id="change">.assertRaises(
                AssertionError,
                msg="Expected AssertionError for trying to create"
                "server without specifying model repository."):
            </a>self.server = TritonServerFactory.create_server_local(
                version=TRITON_VERSION, config=server_config)

    def test_start_wait_stop_gpus(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/89533b0906860b8813da0f64cddeea8c7ed067df#diff-aea6bfd69509d062f35f04282459297c194918a7885b1e0cffd1975426c5d0ecL107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116960943</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: 89533b0906860b8813da0f64cddeea8c7ed067df</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: asramesh@nvidia.com</div><div id='file'> File Name: tests/test_triton_server.py</div><div id='m_class'> M Class Name: TestTritonServerMethods</div><div id='n_method'> N Class Name: TestTritonServerMethods</div><div id='m_method'> M Method Name: test_create_server(1)</div><div id='n_method'> N Method Name: test_create_server(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_triton_server.py</div><div id='n_file'> N File Name: tests/test_triton_server.py</div><div id='m_start'> M Start Line: 114</div><div id='m_end'> M End Line: 125</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 137</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        logger = CometLogger(workspace=self.workspace, api_key=self.api_key)

        logger.log_parameters(params)
        <a id="change">for </a>param, val in params.items()<a id="change">:
            </a>self.assertEqual(logger.experiment.get_parameter(param), val)

        logger.log(metrics, step=1)
        for metric, val in metrics.items():</code></pre><h3>After Change</h3><pre><code class='java'>
            {1: &quota&quot, 2: &quotb&quot}  &#47&#47 dict with non-str key
        ]
        for item in wrong_type:
            <a id="change">with self</a><a id="change">.assertRaises(ValueError):
                </a>logger.log(item, step=1)

    def test_logger_preprocess_image(self, ):
        Test CometLogger preprocess_image function.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uetailab/uetai/commit/4ff2e135016e6480d70c39f76c074f762ee9f80f#diff-00088d8a7b56e87db311f653fa96c8b90c42ad2a8456dd1bdd630e6a2c2a9ec0L64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116960944</div><div id='project'> Project Name: uetailab/uetai</div><div id='commit'> Commit Name: 4ff2e135016e6480d70c39f76c074f762ee9f80f</div><div id='time'> Time: 2022-04-11</div><div id='author'> Author: manhdung20112000@gmail.com</div><div id='file'> File Name: tests/loggers/test_comet_logger.py</div><div id='m_class'> M Class Name: TestCometLogger</div><div id='n_method'> N Class Name: TestCometLogger</div><div id='m_method'> M Method Name: test_logger_log(1)</div><div id='n_method'> N Method Name: test_logger_log(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/loggers/test_comet_logger.py</div><div id='n_file'> N File Name: tests/loggers/test_comet_logger.py</div><div id='m_start'> M Start Line: 73</div><div id='m_end'> M End Line: 115</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 119</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        client_config = TritonClientConfig()

        &#47&#47 Run for both types of protocols
        <a id="change">for </a>factory, url in CLIENT_TEST_PROTOCOLS<a id="change">:
            </a>client_config[&quoturl&quot] = url
            client = factory.create_client(config=client_config)

        &#47&#47 Try to create a client without specifying url and expect error</code></pre><h3>After Change</h3><pre><code class='java'>
        client = TritonClientFactory.create_http_client(config=client_config)

        &#47&#47 Try to create a client without specifying url and expect error
        <a id="change">with self</a><a id="change">.assertRaises(AssertionError,
                               msg="Expected AssertionError for trying to "
                               "create client without specifying url."):
            </a>client_config[&quoturl&quot] = None
            client = TritonClientFactory.create_http_client(
                config=client_config)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/triton-inference-server/model_analyzer/commit/89533b0906860b8813da0f64cddeea8c7ed067df#diff-6a5c8ab76f48497e96012b0caecd70d8f534c874ebb6b952565087368fc21241L89' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 116960945</div><div id='project'> Project Name: triton-inference-server/model_analyzer</div><div id='commit'> Commit Name: 89533b0906860b8813da0f64cddeea8c7ed067df</div><div id='time'> Time: 2020-11-24</div><div id='author'> Author: asramesh@nvidia.com</div><div id='file'> File Name: tests/test_triton_client.py</div><div id='m_class'> M Class Name: TestTritonClientMethods</div><div id='n_method'> N Class Name: TestTritonClientMethods</div><div id='m_method'> M Method Name: test_create_client(1)</div><div id='n_method'> N Method Name: test_create_client(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_triton_client.py</div><div id='n_file'> N File Name: tests/test_triton_client.py</div><div id='m_start'> M Start Line: 94</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 114</div><BR>