<html><h3>Pattern ID :39100
</h3><img src='111315378.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            r[&quotwith&quot] = data._kwargs

        if data._common_kwargs:
            r[&quotwith&quot]<a id="change"> = </a>dict(<a id="change">r.get(&quotwith&quot</a>, {}<a id="change">)</a>, **data._common_kwargs)

        if data._pod_nodes:
            r[&quotexecutors&quot] = []</code></pre><h3>After Change</h3><pre><code class='java'>
            r[&quotwith&quot].update(data._kwargs)

        if data._common_kwargs:
            <a id="change">r[&quotwith&quot].update(</a>data._common_kwargs<a id="change">)</a>

        if data._pod_nodes:
            r[&quotexecutors&quot] = []
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/ca7375aa518f6a85627bf269da5d81bdfc9dc528#diff-3651932819469c65134c2d3c7e8c8e6d0808acfb70263070542a14eca3cdf9b9L82' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111315378</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: ca7375aa518f6a85627bf269da5d81bdfc9dc528</div><div id='time'> Time: 2021-08-30</div><div id='author'> Author: deepankar.mahapatro@jina.ai</div><div id='file'> File Name: jina/jaml/parsers/flow/v1.py</div><div id='m_class'> M Class Name: V1Parser</div><div id='n_method'> N Class Name: V1Parser</div><div id='m_method'> M Method Name: dump(2)</div><div id='n_method'> N Method Name: dump(2)</div><div id='m_parent_class'> M Parent Class: VersionedYAMLParser</div><div id='n_parent_class'> N Parent Class: VersionedYAMLParser</div><div id='m_file'> M File Name: jina/jaml/parsers/flow/v1.py</div><div id='n_file'> N File Name: jina/jaml/parsers/flow/v1.py</div><div id='m_start'> M Start Line: 82</div><div id='m_end'> M End Line: 117</div><div id='n_start'> N Start Line: 89</div><div id='n_end'> N End Line: 127</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                kw[k] = v

        &#47&#47 get model defaults from model class
        model_kw = kw[&quotmodel&quot] = model_cls.defaults | <a id="change">kw.get(&quotmodel&quot</a>, {}<a id="change">)</a>
        model_kw[&quotdomain_size&quot] = 130 &#47&#47 128 MIDI + start + end tokens

        &#47&#47 args with default values
        for k in Trainer.defaults:
            setattr(self, k, kw.get(k, Trainer.defaults[k]))

        &#47&#47 args without default values:
        try:
            self.name<a id="change"> = </a>kw[&quotexperiment&quot] &#47&#47 experiment name
            self.model_dir = Path(kw[&quotmodel_dir&quot]) / self.name
            self.log_dir = Path(kw[&quotlog_dir&quot]) / self.name
            self.data_dir = Path(kw[&quotdata_dir&quot])</code></pre><h3>After Change</h3><pre><code class='java'>
        model[&quotdomain_size&quot] = 130 &#47&#47 128 MIDI + start + end tokens

        &#47&#47 assign all arguments to self by default
        <a id="change">self.__dict__.update(</a>kw<a id="change">)</a>
        &#47&#47 mutate some arguments:
        self.model_dir = Path(model_dir) / self.experiment
        self.log_dir = Path(log_dir) / self.experiment
        self.data_dir = Path(data_dir)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/intelligent-instruments-lab/iil-python-tools/commit/e488ab8d82cb77cc1780335f5d13999181adf9d0#diff-964579cb91d6b647f63b963b9a0c9c7eaf1ae8dc5889166b002c374dec335b6cL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111315377</div><div id='project'> Project Name: intelligent-instruments-lab/iil-python-tools</div><div id='commit'> Commit Name: e488ab8d82cb77cc1780335f5d13999181adf9d0</div><div id='time'> Time: 2022-02-25</div><div id='author'> Author: victor.shepardson@gmail.com</div><div id='file'> File Name: scripts/train_pitch.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: __init__(16)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/train_pitch.py</div><div id='n_file'> N File Name: scripts/train_pitch.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        data = copy.deepcopy(request)
        data.update({"image_path": request.get("image")})
        device<a id="change"> = </a><a id="change">request.get(</a>"device", <a id="change">"cuda"</a><a id="change">)</a>

        start = time.time()
        pre_transforms = self.pre_transforms()
        data = self.run_pre_transforms(data, pre_transforms)</code></pre><h3>After Change</h3><pre><code class='java'>
        
        begin = time.time()
        req = copy.deepcopy(self._config)
        <a id="change">req.update(</a>copy.deepcopy(request)<a id="change">)</a>
        logger.info(f"Infer Request (final): {req}")

        data = copy.deepcopy(req)
        data.update({"image_path": req.get("image")})</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/project-monai/monailabel/commit/ba1ced34ec449d0787d2bb0ba7f35cf5f28bf511#diff-8578d7f5a3ebcc089b0b6c7de4a5465aca79655e6a9bed03e50677abfc466acdL177' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111315374</div><div id='project'> Project Name: project-monai/monailabel</div><div id='commit'> Commit Name: ba1ced34ec449d0787d2bb0ba7f35cf5f28bf511</div><div id='time'> Time: 2021-08-19</div><div id='author'> Author: sachidanand.alle@gmail.com</div><div id='file'> File Name: monailabel/interfaces/tasks/infer.py</div><div id='m_class'> M Class Name: InferTask</div><div id='n_method'> N Class Name: InferTask</div><div id='m_method'> M Method Name: __call__(2)</div><div id='n_method'> N Method Name: __call__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: monailabel/interfaces/tasks/infer.py</div><div id='n_file'> N File Name: monailabel/interfaces/tasks/infer.py</div><div id='m_start'> M Start Line: 189</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 202</div><div id='n_end'> N End Line: 208</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            benchmark=benchmark,
            return_order=True,
        )
        executor<a id="change"> = </a>init_instance_by_config(<a id="change">kwargs.get(&quothighfreq_executor&quot</a><a id="change">)</a>)
        report_df, positions = backtest_highfreq_func(
            pred=pred,
            executor=executor,</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 for  compatibility of the old API. return the dict positions

    positions = report_dict.get("positions")
    <a id="change">report_dict.update(</a>{"positions": {k: p.position for k, p in positions.items()}}<a id="change">)</a>
    return report_dict


def long_short_backtest(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/0e0970f06eccba86483f137a7c48f5478b1a4949#diff-7c273680ce94c682ae0b4bd0477ebb8c6e98188c30af3e9466c85235668dc716L200' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111315375</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 0e0970f06eccba86483f137a7c48f5478b1a4949</div><div id='time'> Time: 2021-01-18</div><div id='author'> Author: bxddream@gmail.com</div><div id='file'> File Name: qlib/contrib/evaluate.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: backtest(6)</div><div id='n_method'> N Method Name: backtest(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: qlib/contrib/evaluate.py</div><div id='n_file'> N File Name: qlib/contrib/evaluate.py</div><div id='m_start'> M Start Line: 274</div><div id='m_end'> M End Line: 314</div><div id='n_start'> N Start Line: 242</div><div id='n_end'> N End Line: 346</div><BR>