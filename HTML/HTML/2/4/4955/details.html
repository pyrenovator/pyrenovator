<html><h3>Pattern ID :4955
</h3><img src='17385832.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                        for w in ["weight", "bias"]:
                            out_old = layer(input_)
                            getattr(layer.parametrizations, w).update_base()
                            out_new<a id="change"> = </a>layer(input_)
                            <a id="change">self.assertAlmostEqual(
                                </a>(out_old - out_new).abs().max().item(), 0.0<a id="change">, places=5
                            )</a>

    def test_construction(self):
        &#47&#47 Negative curvature
        with self.assertRaises(ValueError):</code></pre><h3>After Change</h3><pre><code class='java'>
                            with torch.no_grad():
                                out_old = layer(input_)
                                getattr(layer.parametrizations, w).update_base()
                                out_new<a id="change"> = </a>layer(input_)
                                <a id="change">self.assertAlmostEqual(
                                    </a>(out_old - out_new).abs().max().item(),
                                    0.0<a id="change">,
                                    places=5,
                                )</a>

    def test_construction(self):
        &#47&#47 Negative curvature
        with self.assertRaises(ValueError):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/lezcano/geotorch/commit/994636043965426f8222f5183e2eeb98d37d17c7#diff-620696a16ba19c4bd57b6893fded17599678d71f486b7f0d904934adb924499cL30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17385832</div><div id='project'> Project Name: lezcano/geotorch</div><div id='commit'> Commit Name: 994636043965426f8222f5183e2eeb98d37d17c7</div><div id='time'> Time: 2020-08-14</div><div id='author'> Author: lezcano-93@hotmail.com</div><div id='file'> File Name: test/test_sphere.py</div><div id='m_class'> M Class Name: TestSphere</div><div id='n_method'> N Class Name: TestSphere</div><div id='m_method'> M Method Name: test_backprop(1)</div><div id='n_method'> N Method Name: test_backprop(1)</div><div id='m_parent_class'> M Parent Class: TestCase</div><div id='n_parent_class'> N Parent Class: TestCase</div><div id='m_file'> M File Name: test/test_sphere.py</div><div id='n_file'> N File Name: test/test_sphere.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 73</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            "Reshape": {"config": {"target_shape": (outs, 1)}}
        }

        prediction<a id="change"> = </a>make_and_run(model=Model, layers=lyrs, batch_size=batch_size, batches_per_epoch=5)
        <a id="change">self.assertAlmostEqual(</a>float(prediction.sum()), 474.3257980449273, 4<a id="change">)</a>

    def test_SeqWeightedAttention(self):
        &#47&#47 SeqWeightedAttention
        lyrs = {</code></pre><h3>After Change</h3><pre><code class='java'>
            "Reshape": {"config": {"target_shape": (outs, 1)}}
        }
        if int(&quot&quot.join(tf.__version__.split(&quot.&quot)[0:2])) &lt;= 23:
            prediction<a id="change"> = </a>make_and_run(model=Model, layers=lyrs, batch_size=batch_size, batches_per_epoch=5)
            <a id="change">self.assertAlmostEqual(</a>float(prediction.sum()), 474.3257980449273, 4<a id="change">)</a>
        else:
            pass

    def test_SeqWeightedAttention(self):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/atrcheema/ai4water/commit/bee37db6a5b25f03d31ce587856f1b4767b6d065#diff-0adb667cd397bd56edce10eec11e1b10821740a10d72bd148b09645fc9108968L115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17385836</div><div id='project'> Project Name: atrcheema/ai4water</div><div id='commit'> Commit Name: bee37db6a5b25f03d31ce587856f1b4767b6d065</div><div id='time'> Time: 2021-01-31</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: tests/test_models.py</div><div id='m_class'> M Class Name: TestModels</div><div id='n_method'> N Class Name: TestModels</div><div id='m_method'> M Method Name: test_SeqSelfAttention(1)</div><div id='n_method'> N Method Name: test_SeqSelfAttention(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_models.py</div><div id='n_file'> N File Name: tests/test_models.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 129</div><div id='n_start'> N Start Line: 127</div><div id='n_end'> N End Line: 133</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &quotDense&quot:  {&quotconfig&quot: {&quotunits&quot: outs}},
            "Reshape": {"config": {"target_shape": (outs, 1)}}
                  }
        prediction<a id="change"> = </a>make_and_run(Model, layers=lyrs)
        <a id="change">self.assertAlmostEqual(</a>float(prediction.sum()), 935.47619, 2<a id="change">)</a>   &#47&#47 TODO failing with higher precision


    def test_NBeats(self):</code></pre><h3>After Change</h3><pre><code class='java'>
                  }
        try:
            import tcn
            prediction<a id="change"> = </a>make_and_run(Model, layers=lyrs)
            <a id="change">self.assertAlmostEqual(</a>float(prediction.sum()), 935.47619, 2<a id="change">)</a>  &#47&#47 TODO failing with higher precision
        except:
            ModuleNotFoundError("tcn based model can not be tested as it is not found.")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/atrcheema/dl4seq/commit/1e9527422277f8781faf2137ff958b936cd36e58#diff-0adb667cd397bd56edce10eec11e1b10821740a10d72bd148b09645fc9108968L273' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17385839</div><div id='project'> Project Name: atrcheema/dl4seq</div><div id='commit'> Commit Name: 1e9527422277f8781faf2137ff958b936cd36e58</div><div id='time'> Time: 2020-11-30</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: tests/test_models.py</div><div id='m_class'> M Class Name: TestModels</div><div id='n_method'> N Class Name: TestModels</div><div id='m_method'> M Method Name: test_TCNModel(1)</div><div id='n_method'> N Method Name: test_TCNModel(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/test_models.py</div><div id='n_file'> N File Name: tests/test_models.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 288</div><div id='n_start'> N Start Line: 287</div><div id='n_end'> N End Line: 294</div><BR>