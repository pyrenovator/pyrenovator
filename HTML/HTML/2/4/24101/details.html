<html><h3>Pattern ID :24101
</h3><img src='74815997.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def __init__(self, num_entities, num_relations, embedding_dim=50,
                 criterion=nn.MarginRankingLoss(margin=1., reduction=&quotmean&quot), preferred_device=GPU) -&gt; None:
        <a id="change">super(</a>DistMult, <a id="change">self</a><a id="change">)</a>.__init__(num_entities, num_relations, criterion, embedding_dim, preferred_device)

        &#47&#47 Embeddings
        self.relation_embeddings = nn.Embedding(self.num_relations, self.embedding_dim)

        <a id="change">self._initialize()</a>

    def _initialize(self):
        &#47&#47 The same bound is used for both entity embeddings and relation embeddings because they have the same dimension
        embeddings_init_bound = 6 / np.sqrt(self.embedding_dim)</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.relation_embeddings = None
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-4865434c43e813165bfde432849e6f263dcaab87d65c0a4fbb7cf4d07d784b91L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74815997</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/distmult.py</div><div id='m_class'> M Class Name: DistMult</div><div id='n_method'> N Class Name: DistMult</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/distmult.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/distmult.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 46</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def __init__(self, num_entities, num_relations, embedding_dim=50, relation_dim=30, scoring_fct_norm=1,
                 criterion=nn.MarginRankingLoss(margin=1., reduction=&quotmean&quot), preferred_device=GPU) -&gt; None:
        <a id="change">super(</a>TransR, self<a id="change">)</a>.__init__(num_entities, num_relations, criterion, embedding_dim, preferred_device)

        &#47&#47 Embeddings
        self.relation_embedding_dim = relation_dim

        &#47&#47 max_norm = 1 according to the paper
        self.relation_embeddings = nn.Embedding(self.num_relations, self.relation_embedding_dim,
                                                norm_type=self.relation_embedding_norm_type,
                                                max_norm=self.relation_embedding_max_norm)
        self.projection_matrix_embs = nn.Embedding(self.num_relations, self.relation_embedding_dim * self.embedding_dim)
        self.scoring_fct_norm = scoring_fct_norm

        <a id="change">self._initialize()</a>

    def _initialize(self):
        .
        entity_embeddings_init_bound = relation_embeddings_init_bound = 6 / np.sqrt(self.embedding_dim)</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.relation_embedding_dim = relation_dim
        self.scoring_fct_norm = scoring_fct_norm</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-a10ab784ece2a2ce81f9cd64d1af60d76cb7765d79fc917fdae8aa447e1a2adfL46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74815996</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/trans_r.py</div><div id='m_class'> M Class Name: TransR</div><div id='n_method'> N Class Name: TransR</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/trans_r.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/trans_r.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 63</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def __init__(self, num_entities, num_relations, embedding_dim=50, scoring_fct_norm=1,
                 criterion=nn.MarginRankingLoss(margin=1., reduction=&quotmean&quot), preferred_device=GPU) -&gt; None:
        <a id="change">super(</a>UnstructuredModel, self<a id="change">)</a>.__init__(num_entities, num_relations, criterion, embedding_dim, preferred_device)

        self.scoring_fct_norm = scoring_fct_norm

        <a id="change">self._initialize()</a>

    def _initialize(self):
        entity_embeddings_init_bound = 6 / np.sqrt(self.embedding_dim)
        nn.init.uniform_(</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)
        self.scoring_fct_norm = scoring_fct_norm
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-04daf64f426ba37c607cfe8a2ba7d3a0f6ea4d1c41cd82b8c6865f1851e77316L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74815995</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/unstructured_model.py</div><div id='m_class'> M Class Name: UnstructuredModel</div><div id='n_method'> N Class Name: UnstructuredModel</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/unstructured_model.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/unstructured_model.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def __init__(self, num_entities, num_relations, embedding_dim=50, scoring_fct_norm=1,
                 criterion=nn.MarginRankingLoss(margin=1., reduction=&quotmean&quot), preferred_device=GPU) -&gt; None:
        <a id="change">super(</a>StructuredEmbedding, self<a id="change">)</a>.__init__(num_entities, num_relations, criterion, embedding_dim,
                                                  preferred_device)

        &#47&#47 Embeddings
        self.scoring_fct_norm = scoring_fct_norm

        self.left_relation_embeddings = nn.Embedding(self.num_relations, self.embedding_dim * self.embedding_dim)
        self.right_relation_embeddings = nn.Embedding(self.num_relations, self.embedding_dim * self.embedding_dim)

        <a id="change">self._initialize()</a>

    def _initialize(self):
        entity_embeddings_init_bound = left_relation_embeddings_init_bound = 6 / np.sqrt(self.embedding_dim)
        nn.init.uniform_(</code></pre><h3>After Change</h3><pre><code class='java'>
                 preferred_device: str = GPU,
                 random_seed: Optional[int] = None,
                 ) -&gt; None:
        <a id="change">super()</a>.__init__(num_entities=num_entities, num_relations=num_relations, embedding_dim=embedding_dim,
                         criterion=criterion, preferred_device=preferred_device, random_seed=random_seed)

        &#47&#47 Embeddings</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/6c836badcd95b60a1df4b246b5d508800d8e3a0a#diff-31693468ce8f4163ed07592e01cc06d9c5017a02d66852e7498e4f546281e68dL34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74815994</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: 6c836badcd95b60a1df4b246b5d508800d8e3a0a</div><div id='time'> Time: 2019-06-26</div><div id='author'> Author: lvermue@users.noreply.github.com</div><div id='file'> File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='m_class'> M Class Name: StructuredEmbedding</div><div id='n_method'> N Class Name: StructuredEmbedding</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: BaseModule</div><div id='n_parent_class'> N Parent Class: BaseOWAModule</div><div id='m_file'> M File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='n_file'> N File Name: src/poem/models/unimodal/structured_embedding.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 51</div><BR>