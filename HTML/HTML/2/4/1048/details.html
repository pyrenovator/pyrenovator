<html><h3>Pattern ID :1048
</h3><img src='5264005.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        torch.tensor
    
    &#47&#47
    <a id="change">return </a>torch.from_numpy(img.transpose(2, 0, 1)).float()
</code></pre><h3>After Change</h3><pre><code class='java'>
        return img

    else:
        <a id="change">raise </a><a id="change">ImportError("You need to install PyTorch to use this method."</a><a id="change">)</a>


def torch_to_numpy(img):
    if is_torch_available():</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/obss/sahi/commit/1666b4b318ac7bf2ce857a98e4528705ba1e802f#diff-61ab347af46649ae67bc93dd55bdc913b2a12b6ba0b026c3a5b7312c624c6ba3L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5264005</div><div id='project'> Project Name: obss/sahi</div><div id='commit'> Commit Name: 1666b4b318ac7bf2ce857a98e4528705ba1e802f</div><div id='time'> Time: 2022-05-28</div><div id='author'> Author: 34196005+fcakyon@users.noreply.github.com</div><div id='file'> File Name: sahi/utils/torch.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: to_float_tensor(1)</div><div id='n_method'> N Method Name: to_float_tensor(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sahi/utils/torch.py</div><div id='n_file'> N File Name: sahi/utils/torch.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 21</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 57</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            return SentenceTransformer(modules=[model, pooling])

        &#47&#47 Download model directly from sentence transformers if model hub disabled
        <a id="change">return </a>SentenceTransformer(path)

    def index(self, documents):
        ids, dimensions, stream = [], None, None</code></pre><h3>After Change</h3><pre><code class='java'>
            return (model, tokenizer, Models.device(deviceid))

        if not SENTENCE_TRANSFORMERS:
            <a id="change">raise </a><a id="change">ImportError(&quotsentence-transformers is not available - install "similarity" extra to enable&quot</a><a id="change">)</a>

        &#47&#47 Download model directly from sentence transformers if model hub disabled
        return SentenceTransformer(path, device=Models.reference(deviceid))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/1f82d54009bc268d22b0b481a14860c35aae4dc4#diff-56ce8d6aaf78b4cfa8f7edf0165fe5a6facc4de5eea6236adf8ce1acfaad6307L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5264006</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: 1f82d54009bc268d22b0b481a14860c35aae4dc4</div><div id='time'> Time: 2021-08-13</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: src/python/txtai/vectors/transformers.py</div><div id='m_class'> M Class Name: TransformersVectors</div><div id='n_method'> N Class Name: TransformersVectors</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: Vectors</div><div id='n_parent_class'> N Parent Class: Vectors</div><div id='m_file'> M File Name: src/python/txtai/vectors/transformers.py</div><div id='n_file'> N File Name: src/python/txtai/vectors/transformers.py</div><div id='m_start'> M Start Line: 27</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        kwargs[&quotconfig&quot] = kwargs.get(&quotconfig&quot, default_config)
        wandb.init(**kwargs)
        wandb.run._label(repo=&quotDeepchecks&quot)  &#47&#47 pylint: disable=protected-access
    <a id="change">return </a>dedicated_run
</code></pre><h3>After Change</h3><pre><code class='java'>
    try:
        import wandb
    except ImportError as error:
        <a id="change">raise ImportError(
            &quot"set_wandb_run_state" requires the wandb python package. &quot
            &quotTo get it, run "pip install wandb".&quot
        ) from </a>error
    else:
        if dedicated_run is None:
            dedicated_run = wandb.run is None</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deepchecks/deepchecks/commit/a5fcf3ee4a3a25908e587fc7d0458efd4eb7a30b#diff-5fddf150655649fbcd6c6ba4a9200bd3ddfbc85a93417e20c97a5bc089da72aaL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5264007</div><div id='project'> Project Name: deepchecks/deepchecks</div><div id='commit'> Commit Name: a5fcf3ee4a3a25908e587fc7d0458efd4eb7a30b</div><div id='time'> Time: 2022-05-04</div><div id='author'> Author: 71635444+yromanyshyn@users.noreply.github.com</div><div id='file'> File Name: deepchecks/utils/wandb_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: set_wandb_run_state(2)</div><div id='n_method'> N Method Name: set_wandb_run_state(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepchecks/utils/wandb_utils.py</div><div id='n_file'> N File Name: deepchecks/utils/wandb_utils.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        if isinstance(value, dict):
            self._storage_dtype = "struct"
        <a id="change">return </a>value

    def decode_example(self, value):
        Decode example audio file into audio data.</code></pre><h3>After Change</h3><pre><code class='java'>
        try:
            import soundfile as sf  &#47&#47 soundfile is a dependency of librosa, needed to decode audio files.
        except ImportError as err:
            <a id="change">raise ImportError("To support encoding audio data, please install &quotsoundfile&quot.") from </a>err
        if isinstance(value, str):
            return {"bytes": None, "path": value}
        elif isinstance(value, dict) and "array" in value:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/datasets/commit/6ca96c707502e0689f9b58d94f46d871fa5a3c9c#diff-a633089cfc19bde2aaf3ab69fe0b274597ce4b9ba9b8d081382f71ee9f767b0dL43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5264008</div><div id='project'> Project Name: huggingface/datasets</div><div id='commit'> Commit Name: 6ca96c707502e0689f9b58d94f46d871fa5a3c9c</div><div id='time'> Time: 2022-01-21</div><div id='author'> Author: 42851186+lhoestq@users.noreply.github.com</div><div id='file'> File Name: src/datasets/features/audio.py</div><div id='m_class'> M Class Name: Audio</div><div id='n_method'> N Class Name: Audio</div><div id='m_method'> M Method Name: encode_example(2)</div><div id='n_method'> N Method Name: encode_example(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/datasets/features/audio.py</div><div id='n_file'> N File Name: src/datasets/features/audio.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 75</div><BR>