<html><h3>Pattern ID :23950
</h3><img src='74510292.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            f.write("%s %s %s %s %s %s\n" % (predicted_class, score[:6], str(int(left)), str(int(top)), str(int(right)),str(int(bottom))))

        f.close()
        <a id="change">return</a> 

frcnn = mAP_FRCNN()
image_ids = open(&quotVOCdevkit/VOC2007/ImageSets/Main/test.txt&quot).read().strip().split()</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47-------------------------------------&#47&#47
        &#47&#47   转换成RGB图片，可以用于灰度图预测。
        &#47&#47-------------------------------------&#47&#47
        image<a id="change"> = </a><a id="change">image.convert("RGB"</a><a id="change">)</a>

        image_shape = np.array(np.shape(image)[0:2])
        old_width, old_height = image_shape[1], image_shape[0]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/bubbliiiing/faster-rcnn-pytorch/commit/5bc0197695911681ad666247efd2c792d03d721c#diff-2017cebeb16bd4cb4bd48238ade7e0a1c929224180b6955df9417fec7c67b56fL46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74510292</div><div id='project'> Project Name: bubbliiiing/faster-rcnn-pytorch</div><div id='commit'> Commit Name: 5bc0197695911681ad666247efd2c792d03d721c</div><div id='time'> Time: 2021-05-11</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: get_dr_txt.py</div><div id='m_class'> M Class Name: mAP_FRCNN</div><div id='n_method'> N Class Name: mAP_FRCNN</div><div id='m_method'> M Method Name: detect_image(3)</div><div id='n_method'> N Method Name: detect_image(3)</div><div id='m_parent_class'> M Parent Class: FRCNN</div><div id='n_parent_class'> N Parent Class: FRCNN</div><div id='m_file'> M File Name: get_dr_txt.py</div><div id='n_file'> N File Name: get_dr_txt.py</div><div id='m_start'> M Start Line: 91</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 95</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            f.write("%s %s %s %s %s %s\n" % (predicted_class, score[:6], str(int(left)), str(int(top)), str(int(right)),str(int(bottom))))

        f.close()
        <a id="change">return</a> 

centernet = mAP_CenterNet()
image_ids = open(&quotVOCdevkit/VOC2007/ImageSets/Main/test.txt&quot).read().strip().split()</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47---------------------------------------------------------&#47&#47
        &#47&#47   在这里将图像转换成RGB图像，防止灰度图在预测时报错。
        &#47&#47---------------------------------------------------------&#47&#47
        image<a id="change"> = </a><a id="change">image.convert(&quotRGB&quot</a><a id="change">)</a>

        image_shape = np.array(np.shape(image)[0:2])
        &#47&#47---------------------------------------------------------&#47&#47</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bubbliiiing/centernet-pytorch/commit/eb8266951b72fb5bf0aad113f36453821f481dc4#diff-2017cebeb16bd4cb4bd48238ade7e0a1c929224180b6955df9417fec7c67b56fL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74510293</div><div id='project'> Project Name: bubbliiiing/centernet-pytorch</div><div id='commit'> Commit Name: eb8266951b72fb5bf0aad113f36453821f481dc4</div><div id='time'> Time: 2021-05-18</div><div id='author'> Author: 47347516+bubbliiiing@users.noreply.github.com</div><div id='file'> File Name: get_dr_txt.py</div><div id='m_class'> M Class Name: mAP_CenterNet</div><div id='n_method'> N Class Name: mAP_CenterNet</div><div id='m_method'> M Method Name: detect_image(3)</div><div id='n_method'> N Method Name: detect_image(3)</div><div id='m_parent_class'> M Parent Class: CenterNet</div><div id='n_parent_class'> N Parent Class: CenterNet</div><div id='m_file'> M File Name: get_dr_txt.py</div><div id='n_file'> N File Name: get_dr_txt.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 114</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        image = image.resize((256, 256), resample=Image.BILINEAR)
        label = torch.tensor(self.data.loc[idx, &quotdiagnosis&quot])

        <a id="change">return </a>{
            &quotimage&quot: self.transform(image),
            &quotlabels&quot: label
        }</code></pre><h3>After Change</h3><pre><code class='java'>
        fname = self.data.loc[idx, &quotid_code&quot]
        img_name = os.path.join(
            self.img_path, fname + &quot.png&quot)
        img = <a id="change">Image.open(img_name).convert("RGB"</a><a id="change">)</a>
        img<a id="change"> = </a>self.transform(img)

        label = torch.tensor(self.data.loc[idx, &quotdiagnosis&quot])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tuttelikz/farabio/commit/e0a58252c8a8bc4f5662faffc1a30e088b8082c9#diff-497438abfedb0f9ddf0240caff2549d5d946b521e9cbe5c1e6ec796b17c2954eL610' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74510295</div><div id='project'> Project Name: tuttelikz/farabio</div><div id='commit'> Commit Name: e0a58252c8a8bc4f5662faffc1a30e088b8082c9</div><div id='time'> Time: 2021-07-29</div><div id='author'> Author: s.askaruly@gmail.com</div><div id='file'> File Name: farabio/data/biodatasets.py</div><div id='m_class'> M Class Name: RetinopathyDataset</div><div id='n_method'> N Class Name: RetinopathyDataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: farabio/data/biodatasets.py</div><div id='n_file'> N File Name: farabio/data/biodatasets.py</div><div id='m_start'> M Start Line: 611</div><div id='m_end'> M End Line: 620</div><div id='n_start'> N Start Line: 626</div><div id='n_end'> N End Line: 634</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Returns:
            the target mask
        
        <a id="change">return </a>Image.open(
            os.path.join(self.root, self.base_folder, "output", id_ + "_m.png")
        ).convert("L")
</code></pre><h3>After Change</h3><pre><code class='java'>
        
        filename = os.path.join(self.root, self.base_folder, "output", id_ + "_m.png")
        with Image.open(filename) as img:
            array<a id="change"> = </a>np.array(<a id="change">img.convert("L"</a><a id="change">)</a>)
            tensor: Tensor = torch.from_numpy(array)  &#47&#47 type: ignore[attr-defined]
            return tensor
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/torchgeo/commit/3f987ac83f4db8248da750356221b2c0d826acb4#diff-cfa6063281a8e2b83b8fa6c9304b312bd95a6e2d29d206b4c4b062995cc6c8cfL132' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74510296</div><div id='project'> Project Name: microsoft/torchgeo</div><div id='commit'> Commit Name: 3f987ac83f4db8248da750356221b2c0d826acb4</div><div id='time'> Time: 2021-06-16</div><div id='author'> Author: ajstewart426@gmail.com</div><div id='file'> File Name: torchgeo/datasets/landcoverai.py</div><div id='m_class'> M Class Name: LandCoverAI</div><div id='n_method'> N Class Name: LandCoverAI</div><div id='m_method'> M Method Name: _load_target(2)</div><div id='n_method'> N Method Name: _load_target(2)</div><div id='m_parent_class'> M Parent Class: VisionDataset</div><div id='n_parent_class'> N Parent Class: VisionDataset</div><div id='m_file'> M File Name: torchgeo/datasets/landcoverai.py</div><div id='n_file'> N File Name: torchgeo/datasets/landcoverai.py</div><div id='m_start'> M Start Line: 141</div><div id='m_end'> M End Line: 143</div><div id='n_start'> N Start Line: 148</div><div id='n_end'> N End Line: 154</div><BR>