<html><h3>Pattern ID :6590
</h3><img src='22913373.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
class TestOneOverN:
    def test_basic(self):
        n_samples, n_channels, lookback, n_assets = (2, 1, 3, 4)
        X = <a id="change">torch.ones(</a>(n_samples, n_channels, lookback, n_assets)<a id="change">)</a>

        bm = OneOverN()
        bm.fit()  &#47&#47 no effect
        weights = <a id="change">bm(</a>X<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.shape == (n_samples, n_assets)
        assert torch.allclose(weights.sum(dim=1), torch.ones(n_samples))</code></pre><h3>After Change</h3><pre><code class='java'>
        device = X_dummy.device

        bm = OneOverN()
        weights<a id="change"> = </a><a id="change">bm(</a>X_dummy<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.dtype == dtype
        assert weights.device == device</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jankrepl/deepdow/commit/151e63263b38a498249b487ec641ef649b9e43b2#diff-d6e7375760ed8e5a53c09150748c853f3b888c121db2dab161b10c36a9b6afefL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22913373</div><div id='project'> Project Name: jankrepl/deepdow</div><div id='commit'> Commit Name: 151e63263b38a498249b487ec641ef649b9e43b2</div><div id='time'> Time: 2020-04-10</div><div id='author'> Author: jankrepl@yahoo.com</div><div id='file'> File Name: tests/test_benchmarks.py</div><div id='m_class'> M Class Name: TestOneOverN</div><div id='n_method'> N Class Name: TestOneOverN</div><div id='m_method'> M Method Name: test_basic(2)</div><div id='n_method'> N Method Name: test_basic(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_benchmarks.py</div><div id='n_file'> N File Name: tests/test_benchmarks.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 98</div><div id='n_end'> N End Line: 109</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
class TestRandom:
    def test_basic(self):
        n_samples, n_channels, lookback, n_assets = (2, 1, 3, 4)
        X = <a id="change">torch.ones(</a>(n_samples, n_channels, lookback, n_assets)<a id="change">)</a>

        bm = Random()
        bm.fit()  &#47&#47 no effect
        weights = <a id="change">bm(</a>X<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.shape == (n_samples, n_assets)
        assert torch.allclose(weights.sum(dim=1), torch.ones(n_samples))</code></pre><h3>After Change</h3><pre><code class='java'>
        device = X_dummy.device
        bm = Random()

        weights<a id="change"> = </a><a id="change">bm(</a>X_dummy<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.shape == (n_samples, n_assets)
        assert weights.dtype == dtype</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jankrepl/deepdow/commit/151e63263b38a498249b487ec641ef649b9e43b2#diff-d6e7375760ed8e5a53c09150748c853f3b888c121db2dab161b10c36a9b6afefL42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22913372</div><div id='project'> Project Name: jankrepl/deepdow</div><div id='commit'> Commit Name: 151e63263b38a498249b487ec641ef649b9e43b2</div><div id='time'> Time: 2020-04-10</div><div id='author'> Author: jankrepl@yahoo.com</div><div id='file'> File Name: tests/test_benchmarks.py</div><div id='m_class'> M Class Name: TestRandom</div><div id='n_method'> N Class Name: TestRandom</div><div id='m_method'> M Method Name: test_basic(2)</div><div id='n_method'> N Method Name: test_basic(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_benchmarks.py</div><div id='n_file'> N File Name: tests/test_benchmarks.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 127</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    @pytest.mark.parametrize(&quotasset_ix&quot, [0, 3])
    def test_basic(self, asset_ix):
        n_samples, n_channels, lookback, n_assets = (2, 1, 3, 4)
        X = <a id="change">torch.ones(</a>(n_samples, n_channels, lookback, n_assets)<a id="change">)</a>

        bm = Singleton(asset_ix=asset_ix)
        weights = <a id="change">bm(</a>X<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.shape == (n_samples, n_assets)
        assert torch.allclose(weights.sum(dim=1), torch.ones(n_samples))</code></pre><h3>After Change</h3><pre><code class='java'>
        dtype = X_dummy.dtype
        device = X_dummy.device
        bm = Singleton(asset_ix=asset_ix)
        weights<a id="change"> = </a><a id="change">bm(</a>X_dummy<a id="change">)</a>

        assert isinstance(weights, torch.Tensor)
        assert weights.shape == (n_samples, n_assets)
        assert weights.dtype == dtype</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jankrepl/deepdow/commit/151e63263b38a498249b487ec641ef649b9e43b2#diff-d6e7375760ed8e5a53c09150748c853f3b888c121db2dab161b10c36a9b6afefL60' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22913375</div><div id='project'> Project Name: jankrepl/deepdow</div><div id='commit'> Commit Name: 151e63263b38a498249b487ec641ef649b9e43b2</div><div id='time'> Time: 2020-04-10</div><div id='author'> Author: jankrepl@yahoo.com</div><div id='file'> File Name: tests/test_benchmarks.py</div><div id='m_class'> M Class Name: TestSingleton</div><div id='n_method'> N Class Name: TestSingleton</div><div id='m_method'> M Method Name: test_basic(3)</div><div id='n_method'> N Method Name: test_basic(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_benchmarks.py</div><div id='n_file'> N File Name: tests/test_benchmarks.py</div><div id='m_start'> M Start Line: 61</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 136</div><div id='n_end'> N End Line: 147</div><BR>