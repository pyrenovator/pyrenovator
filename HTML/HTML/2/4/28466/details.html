<html><h3>Pattern ID :28466
</h3><img src='84354988.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            idx_list = sorted(idx_list, key=lambda idx: float(values[idx][mode_idx[idx]].min()))[:self.top_n_neurons]

            neuron_dict[layer] = {int(idx): int(mode_labels[idx]) for idx in idx_list}
            prints(<a id="change">&quot{green}{layer:&lt;20}: {reset}&quot.format(layer=layer, **ansi)</a>, indent=4)
            prints(neuron_dict[layer], indent=8)
        return neuron_dict
    &#47&#47 -------------------------ReMask--------------------------------- &#47&#47</code></pre><h3>After Change</h3><pre><code class='java'>
            idx_list = condition2.nonzero().flatten().tolist()
            idx_list = sorted(idx_list, key=lambda idx: float(values[idx][mode_idx[idx]].min()))[:self.top_n_neurons]
            for idx in idx_list:
                value<a id="change"> = </a><a id="change">float(</a>values[idx][mode_idx[idx]].min()<a id="change">)</a>
                neuron_dict[int(mode_labels[idx])].append({&quotlayer&quot: layer, &quotneuron&quot: int(idx), &quotvalue&quot: value})
        return neuron_dict
    &#47&#47 -------------------------ReMask--------------------------------- &#47&#47
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/8983bfb499fcecbf4afd1e1301d4dbe47fa54b45#diff-7af6064ea7ec79a26e3db236e9cf91c2f5bb481beb04de7a8aadbb1986e10026L232' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84354988</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 8983bfb499fcecbf4afd1e1301d4dbe47fa54b45</div><div id='time'> Time: 2020-08-14</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanzoo/defense/backdoor/abs.py</div><div id='m_class'> M Class Name: ABS</div><div id='n_method'> N Class Name: ABS</div><div id='m_method'> M Method Name: find_min_max(3)</div><div id='n_method'> N Method Name: find_min_max(3)</div><div id='m_parent_class'> M Parent Class: Defense_Backdoor</div><div id='n_parent_class'> N Parent Class: Defense_Backdoor</div><div id='m_file'> M File Name: trojanzoo/defense/backdoor/abs.py</div><div id='n_file'> N File Name: trojanzoo/defense/backdoor/abs.py</div><div id='m_start'> M Start Line: 234</div><div id='m_end'> M End Line: 255</div><div id='n_start'> N Start Line: 232</div><div id='n_end'> N End Line: 253</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if args.desired_acc and best_acc1 &gt;= args.desired_acc:
                mins, secs = divmod(time_elapsed, 60)
                hrs, mins = divmod(mins, 60)
                print(<a id="change">"Reached acc of: {:6.2f}\n"
                      "Time elapsed: {:.2f} hrs {:.2f} mins {:.2f} secs | {:.2f} secs\n"
                      "Total &#47&#47 epoches: {:.2f}\n"
                      "&#47&#47 of train steps per epoch: {:.2f}\n"
                      "&#47&#47 of val steps per epoch: {:.2f}\n"
                      "Length of trainset: {:.2f}\n"
                      "Length of valset: {:.2f}\n".format(
                      </a>best_acc1,
                      hrs, mins, secs, time_elapsed,
                      epoch + 1,
                      len(train_loader),
                      len(val_loader),
                      len(train_dataset),
                      len(val_dataset)<a id="change">
                     )</a>)
                break

</code></pre><h3>After Change</h3><pre><code class='java'>
    criterion = nn.CrossEntropyLoss().cuda(gpu)

    &#47&#47 Scale learning rate based on global batch size
    args.lr<a id="change"> = </a>args.lr * <a id="change">float(</a>args.batch_size * args.ngpus_per_node * args.world_size<a id="change">)</a> / 256.

    optimizer = torch.optim.SGD(model.parameters(), args.lr,
                                momentum=args.momentum,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/richardkxu/distributed-pytorch/commit/b5d0793a1bac4df6a31ab0dd1959baee4ab12809#diff-4960adb40d1190b0286b6fe9a42f37cd8527f865bf8061c970e0430ec6d273bdL93' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84354986</div><div id='project'> Project Name: richardkxu/distributed-pytorch</div><div id='commit'> Commit Name: b5d0793a1bac4df6a31ab0dd1959baee4ab12809</div><div id='time'> Time: 2020-02-06</div><div id='author'> Author: richardkxu@gmail.com</div><div id='file'> File Name: imagenet_ddp_mixprec.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main_worker(2)</div><div id='n_method'> N Method Name: main_worker(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: imagenet_ddp_mixprec.py</div><div id='n_file'> N File Name: imagenet_ddp_mixprec.py</div><div id='m_start'> M Start Line: 93</div><div id='m_end'> M End Line: 255</div><div id='n_start'> N Start Line: 106</div><div id='n_end'> N End Line: 226</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 For debugging
        self.local_mask = np.random.randint(p, size=(d, 1))
        logging.info(<a id="change">"local mask = {}".format(</a>self.local_mask<a id="change">)</a>)
        &#47&#47 self.local_mask = np.zeros((d, 1)).astype("int64")

        encoded_mask_set = mask_encoding(d, N, U, T, p, self.local_mask)</code></pre><h3>After Change</h3><pre><code class='java'>
        T = self.privacy_guarantee
        p = self.prime_number
        logging.info("d = {}, N = {}, U = {}, T = {}, p = {}".format(d, N, U, T, p))
        d<a id="change"> = </a>int(np.ceil(<a id="change">float(</a>d<a id="change">)</a>/(U-T))) * (U-T)
        &#47&#47 For debugging
        self.local_mask = np.random.randint(p, size=(d, 1))
        &#47&#47 logging.info("local mask = {}".format(self.local_mask))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/fedml-ai/fedml/commit/f267ddd234007ef08641476a77a87dc9efcea2e0#diff-a5ca0475e57dd71363e61dbc9c061370fd22653f121d020b3e62ebb400fd066cL239' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84354985</div><div id='project'> Project Name: fedml-ai/fedml</div><div id='commit'> Commit Name: f267ddd234007ef08641476a77a87dc9efcea2e0</div><div id='time'> Time: 2022-07-25</div><div id='author'> Author: tuozhang@usc.edu</div><div id='file'> File Name: python/fedml/cross_silo/lightsecagg/lsa_fedml_client_manager.py</div><div id='m_class'> M Class Name: FedMLClientManager</div><div id='n_method'> N Class Name: FedMLClientManager</div><div id='m_method'> M Method Name: __offline(1)</div><div id='n_method'> N Method Name: __offline(1)</div><div id='m_parent_class'> M Parent Class: ClientManager</div><div id='n_parent_class'> N Parent Class: ClientManager</div><div id='m_file'> M File Name: python/fedml/cross_silo/lightsecagg/lsa_fedml_client_manager.py</div><div id='n_file'> N File Name: python/fedml/cross_silo/lightsecagg/lsa_fedml_client_manager.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 256</div><div id='n_start'> N Start Line: 248</div><div id='n_end'> N End Line: 259</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            cocoEval.evaluate()
            cocoEval.accumulate()
            cocoEval.summarize()
            field = <a id="change">&quot{}_mAP&quot.format(</a>res_type<a id="change">)</a>
            runner.log_buffer.output[field] = cocoEval.stats[0]
        runner.log_buffer.ready = True
        os.remove(tmp_file)
</code></pre><h3>After Change</h3><pre><code class='java'>
            metrics = [&quotmAP&quot, &quotmAP_50&quot, &quotmAP_75&quot, &quotmAP_s&quot, &quotmAP_m&quot, &quotmAP_l&quot]
            for i in range(len(metrics)):
                key = &quot{}_{}&quot.format(res_type, metrics[i])
                val<a id="change"> = </a><a id="change">float(</a>&quot{:.3f}&quot.format(cocoEval.stats[i])<a id="change">)</a>
                runner.log_buffer.output[key] = val
            runner.log_buffer.output[&quot{}_mAP_copypaste&quot.format(res_type)] = (
                &quot{ap[0]:.3f} {ap[1]:.3f} {ap[2]:.3f} {ap[3]:.3f} &quot
                &quot{ap[4]:.3f} {ap[5]:.3f}&quot).format(ap=cocoEval.stats[:6])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/a6ec45bafd8beb1b9cbcb95400c0a8be7b7a15b3#diff-d90681f788d834177ac6503ca5413a1b823f32899678a9abeb06734aafa3d547L137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84354984</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: a6ec45bafd8beb1b9cbcb95400c0a8be7b7a15b3</div><div id='time'> Time: 2019-04-10</div><div id='author'> Author: chenkaidev@gmail.com</div><div id='file'> File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='m_class'> M Class Name: CocoDistEvalmAPHook</div><div id='n_method'> N Class Name: CocoDistEvalmAPHook</div><div id='m_method'> M Method Name: evaluate(3)</div><div id='n_method'> N Method Name: evaluate(3)</div><div id='m_parent_class'> M Parent Class: DistEvalHook</div><div id='n_parent_class'> N Parent Class: DistEvalHook</div><div id='m_file'> M File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='n_file'> N File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='m_start'> M Start Line: 146</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 146</div><div id='n_end'> N End Line: 160</div><BR>