<html><h3>Pattern ID :10870
</h3><img src='37470379.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    file_name = (os.path.basename(video).split(&quot.mp4&quot))[0]
    try:
        if not os.path.exists(save_dir + file_name):
            <a id="change">os.makedirs(</a>save_dir + file_name<a id="change">)</a>
    except OSError:
        print(&quotError: Creating directory of data&quot)

    &#47&#47 Setting the frame limit to 100</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47     os.makedirs(save_dir + file_name)

        save_path = Path(save_dir).joinpath(file_name)
        <a id="change">if </a><a id="change">not save_path.exists()</a>:
            save_path.mkdir()
    except OSError:
        print(&quotError: Creating directory of data&quot)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/liaorongfan/deeppersonality/commit/fc0e0a8ca8ebd7ce3ad206c1265dc8e586819def#diff-18b089b4bdf8ffa9f3b77901324ca9a0d333fad0082874610e7140a0d1cf04f3L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37470379</div><div id='project'> Project Name: liaorongfan/deeppersonality</div><div id='commit'> Commit Name: fc0e0a8ca8ebd7ce3ad206c1265dc8e586819def</div><div id='time'> Time: 2022-03-06</div><div id='author'> Author: 15670381505@163.com</div><div id='file'> File Name: dpcv/data/utils/video_to_image.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: frame_sample(2)</div><div id='n_method'> N Method Name: frame_sample(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dpcv/data/utils/video_to_image.py</div><div id='n_file'> N File Name: dpcv/data/utils/video_to_image.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.args = parser.parse_args(
            ["--upscale", "2", "--test_path", "cog_temp", "--save_root", "results"]
        )
        <a id="change">os.makedirs(</a>self.args.test_path<a id="change">, exist_ok=True)</a>
        &#47&#47 background upsampler
        if self.args.bg_upsampler == "realesrgan":
            if not torch.cuda.is_available():  &#47&#47 CPU
</code></pre><h3>After Change</h3><pre><code class='java'>
        if not os.path.exists(&quotrealesr-general-x4v3.pth&quot):
            os.system(
                &quotwget https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.5.0/realesr-general-x4v3.pth -P .&quot)
        <a id="change">if </a><a id="change">not os.path.exists(&quotGFPGANv1.2.pth&quot)</a>:
            os.system(&quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.2.pth -P .&quot)
        if not os.path.exists(&quotGFPGANv1.3.pth&quot):
            os.system(&quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.pth -P .&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencentarc/gfpgan/commit/3e27784b1b4eb008d06c04dbbaf6bdde34c4da84#diff-73c1982d8a085dc10fda2ac7b6f202ae3ff9530ee6a15991c5339051eb10a49aL22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37470377</div><div id='project'> Project Name: tencentarc/gfpgan</div><div id='commit'> Commit Name: 3e27784b1b4eb008d06c04dbbaf6bdde34c4da84</div><div id='time'> Time: 2022-08-31</div><div id='author'> Author: wxt1994@126.com</div><div id='file'> File Name: predict.py</div><div id='m_class'> M Class Name: Predictor</div><div id='n_method'> N Class Name: Predictor</div><div id='m_method'> M Method Name: setup(1)</div><div id='n_method'> N Method Name: setup(1)</div><div id='m_parent_class'> M Parent Class: BasePredictor</div><div id='n_parent_class'> N Parent Class: cog.Predictor</div><div id='m_file'> M File Name: predict.py</div><div id='n_file'> N File Name: predict.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 77</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            model_path=&quotGFPGANv1.3.pth&quot, upscale=2, arch=&quotclean&quot, channel_multiplier=2, bg_upsampler=upsampler)
        self.face_enhancer_v2 = GFPGANer(
            model_path=&quotGFPGANv1.2.pth&quot, upscale=2, arch=&quotclean&quot, channel_multiplier=2, bg_upsampler=upsampler)
        <a id="change">os.makedirs(</a>&quotoutput&quot<a id="change">, exist_ok=True)</a>

    def predict(
        self,
        img: Path = Input(description=&quotInput&quot),</code></pre><h3>After Change</h3><pre><code class='java'>
        if not os.path.exists(&quotgfpgan/weights/GFPGANv1.3.pth&quot):
            os.system(
                &quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.pth -P ./gfpgan/weights&quot)
        <a id="change">if </a><a id="change">not os.path.exists(&quotgfpgan/weights/GFPGANv1.4.pth&quot)</a>:
            os.system(
                &quotwget https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.4.pth -P ./gfpgan/weights&quot)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencentarc/gfpgan/commit/7272e458874cb9a3b1b68c38a7136b2b8dd71f69#diff-73c1982d8a085dc10fda2ac7b6f202ae3ff9530ee6a15991c5339051eb10a49aL25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37470380</div><div id='project'> Project Name: tencentarc/gfpgan</div><div id='commit'> Commit Name: 7272e458874cb9a3b1b68c38a7136b2b8dd71f69</div><div id='time'> Time: 2022-09-04</div><div id='author'> Author: wxt1994@126.com</div><div id='file'> File Name: predict.py</div><div id='m_class'> M Class Name: Predictor</div><div id='n_method'> N Class Name: Predictor</div><div id='m_method'> M Method Name: setup(1)</div><div id='n_method'> N Method Name: setup(1)</div><div id='m_parent_class'> M Parent Class: BasePredictor</div><div id='n_parent_class'> N Parent Class: BasePredictor</div><div id='m_file'> M File Name: predict.py</div><div id='n_file'> N File Name: predict.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 46</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 60</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def global_local_config():
    target = os.path.join(test_data_dir, &quotckpoint&quot)
    if not os.path.exists(target):
        <a id="change">os.makedirs(</a>target<a id="change">)</a>
    config = LocalConfig(checkpoint_dir=target, input_data=test_data_dir / &quotdata&quot / &quotsmol.txt&quot)
    annotate_training_data(config)
    yield config
    shutil.rmtree(target)</code></pre><h3>After Change</h3><pre><code class='java'>
def global_local_config():
    target = test_data_dir / &quotckpoint&quot
    input_data = test_data_dir / &quotdata&quot / &quotsmol.txt&quot
    <a id="change">if </a><a id="change">not target.exists()</a>:
        target.mkdir()
    config = LocalConfig(checkpoint_dir=target, input_data=input_data)
    annotate_training_data(config)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gretelai/gretel-synthetics/commit/8af17403dfa595b5dceb08e387dcaf2d80b92f29#diff-e52e4ddd58b7ef887ab03c04116e676f6280b824ab7469d5d3080e5cba4f2128L14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37470374</div><div id='project'> Project Name: gretelai/gretel-synthetics</div><div id='commit'> Commit Name: 8af17403dfa595b5dceb08e387dcaf2d80b92f29</div><div id='time'> Time: 2020-03-23</div><div id='author'> Author: zredlined@users.noreply.github.com</div><div id='file'> File Name: tests/conftest.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: global_local_config(0)</div><div id='n_method'> N Method Name: global_local_config(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/conftest.py</div><div id='n_file'> N File Name: tests/conftest.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 13</div><div id='n_end'> N End Line: 17</div><BR>