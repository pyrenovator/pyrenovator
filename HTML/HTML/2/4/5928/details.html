<html><h3>Pattern ID :5928
</h3><img src='20848826.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    elif launcher == &quotslurm&quot:
        _init_dist_slurm(backend, **kwargs)
    else:
        raise TypeError(<a id="change">"unsupported launcher: &quot{}&quot".format(</a>launcher<a id="change">)</a>)


def is_distributed():</code></pre><h3>After Change</h3><pre><code class='java'>
            &quotscontrol show hostname {} | head -n1&quot.format(node_list))

        os.environ.setdefault(&quotMASTER_ADDR&quot, master_addr)
        <a id="change">os.environ.setdefault(</a>&quotMASTER_PORT&quot, <a id="change">&quot29500&quot</a><a id="change">)</a>

        os.environ[&quotWORLD_SIZE&quot] = os.environ[&quotSLURM_NTASKS&quot]
        os.environ[&quotRANK&quot] = os.environ[&quotSLURM_PROCID&quot]
        os.environ[&quotLOCAL_RANK&quot] = os.environ[&quotSLURM_LOCALID&quot]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/bd9472949e3bdb0e7a2c42afeb2e031d8f2f577f#diff-fdf562e6b578fc92f4c74e59141f61b874fc8722e8eb5d843ef38c4c81d99321L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20848826</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: bd9472949e3bdb0e7a2c42afeb2e031d8f2f577f</div><div id='time'> Time: 2021-11-23</div><div id='author'> Author: yeliudev@outlook.com</div><div id='file'> File Name: nncore/engine/comm.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: init_dist(2)</div><div id='n_method'> N Method Name: init_dist(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nncore/engine/comm.py</div><div id='n_file'> N File Name: nncore/engine/comm.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 95</div><div id='n_start'> N Start Line: 63</div><div id='n_end'> N End Line: 82</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    proc_id = int(os.environ[&quotSLURM_PROCID&quot])
    ntasks = os.environ[&quotSLURM_NTASKS&quot]
    node_list = os.environ[&quotSLURM_NODELIST&quot]
    addr = getoutput(<a id="change">&quotscontrol show hostname {} | head -n1&quot.format(</a>node_list<a id="change">)</a>)
    os.environ[&quotMASTER_ADDR&quot] = addr
    os.environ[&quotMASTER_PORT&quot] = str(port)
    os.environ[&quotWORLD_SIZE&quot] = ntasks</code></pre><h3>After Change</h3><pre><code class='java'>
    master_addr = getoutput(f&quotscontrol show hostname {nodes} | head -n1&quot)

    os.environ.setdefault(&quotMASTER_ADDR&quot, master_addr)
    <a id="change">os.environ.setdefault(</a>&quotMASTER_PORT&quot, <a id="change">&quot29500&quot</a><a id="change">)</a>

    os.environ[&quotWORLD_SIZE&quot] = os.environ[&quotSLURM_NTASKS&quot]
    os.environ[&quotRANK&quot] = os.environ[&quotSLURM_PROCID&quot]
    os.environ[&quotLOCAL_RANK&quot] = os.environ[&quotSLURM_LOCALID&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yeliudev/nncore/commit/62f23364224776da2767473b51e937f1f6701a5d#diff-fdf562e6b578fc92f4c74e59141f61b874fc8722e8eb5d843ef38c4c81d99321L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20848824</div><div id='project'> Project Name: yeliudev/nncore</div><div id='commit'> Commit Name: 62f23364224776da2767473b51e937f1f6701a5d</div><div id='time'> Time: 2021-07-13</div><div id='author'> Author: 22849092+yeliudev@users.noreply.github.com</div><div id='file'> File Name: nncore/engine/comm.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _init_dist_slurm(1)</div><div id='n_method'> N Method Name: _init_dist_slurm(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: nncore/engine/comm.py</div><div id='n_file'> N File Name: nncore/engine/comm.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 31</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 38</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if self.with_activation:
            &#47&#47 TODO: introduce `act_cfg` and supports more activation layers
            if self.activation not in [&quotrelu&quot]:
                raise ValueError(<a id="change">&quot{} is currently not supported.&quot.format(
                    </a>self.activation<a id="change">)</a>)
            if self.activation == &quotrelu&quot:
                self.activate = nn.ReLU(inplace=inplace)
</code></pre><h3>After Change</h3><pre><code class='java'>
            if act_cfg_[&quottype&quot] not in [
                    &quotTanh&quot, &quotPReLU&quot, &quotSigmoid&quot, &quotHSigmoid&quot, &quotSwish&quot
            ]:
                <a id="change">act_cfg_.setdefault(&quotinplace&quot</a>, inplace<a id="change">)</a>
            self.activate = build_activation_layer(act_cfg_)

        &#47&#47 Use msra init by default
        self.init_weights()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/easycv/commit/4c1b3145e69f7d520374bd06a1ab143f7a075b42#diff-2a90f98558600e55d40090c8d8047253f7fae737906de640bbfaebefbcc555b1L67' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 20848821</div><div id='project'> Project Name: alibaba/easycv</div><div id='commit'> Commit Name: 4c1b3145e69f7d520374bd06a1ab143f7a075b42</div><div id='time'> Time: 2022-05-31</div><div id='author'> Author: 30484308+Cathy0908@users.noreply.github.com</div><div id='file'> File Name: easycv/models/utils/conv_module.py</div><div id='m_class'> M Class Name: ConvModule</div><div id='n_method'> N Class Name: ConvModule</div><div id='m_method'> M Method Name: __init__(14)</div><div id='n_method'> N Method Name: __init__(14)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: easycv/models/utils/conv_module.py</div><div id='n_file'> N File Name: easycv/models/utils/conv_module.py</div><div id='m_start'> M Start Line: 86</div><div id='m_end'> M End Line: 144</div><div id='n_start'> N Start Line: 137</div><div id='n_end'> N End Line: 143</div><BR>