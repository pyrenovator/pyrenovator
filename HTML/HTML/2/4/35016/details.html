<html><h3>Pattern ID :35016
</h3><img src='100093957.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        centers += [cc]

    centers = np.array(centers)
    mean = <a id="change">centers.mean(axis=2)</a>
    std = <a id="change">centers.std(axis=2)</a>

    return mean, std

</code></pre><h3>After Change</h3><pre><code class='java'>
        kmeans = KMeans(n_clusters=2).fit(meter)
        labels = kmeans.labels_
        lab0 = meter[labels == 0]
        lab1 = <a id="change">meter[labels == 1]</a>
        mean += [[lab0.mean(), lab1.mean()]]
        std += [[lab0.std(), lab1.std()]]

    </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uca-datalab/nilm-thresholding/commit/2b24d37855791e9ca50d60b2d7a9443f09a1cc70#diff-34fdf11475c005318d3092873f47af42d695c05c936e42693b17521007361b42L212' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100093957</div><div id='project'> Project Name: uca-datalab/nilm-thresholding</div><div id='commit'> Commit Name: 2b24d37855791e9ca50d60b2d7a9443f09a1cc70</div><div id='time'> Time: 2020-05-12</div><div id='author'> Author: danipg1409@gmail.com</div><div id='file'> File Name: better_nilm/model/preprocessing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_cluster_centroids(1)</div><div id='n_method'> N Method Name: _get_cluster_centroids(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: better_nilm/model/preprocessing.py</div><div id='n_file'> N File Name: better_nilm/model/preprocessing.py</div><div id='m_start'> M Start Line: 212</div><div id='m_end'> M End Line: 229</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 228</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        data_params.t_start = np.min(df[&quotds&quot].iloc[:split_idx])
        data_params.t_scale = np.max(df[&quotds&quot].iloc[:split_idx]) - data_params.t_start
        if &quoty&quot in df:
            data_params.y_shift = <a id="change">np.mean(</a>df[&quoty&quot].iloc[:split_idx].values<a id="change">)</a> if normalize_y else 0.0
            data_params.y_scale = <a id="change">np.std(</a>df[&quoty&quot].iloc[:split_idx].values<a id="change">)</a> if normalize_y else 1.0

    &#47&#47 Future TODO: extra regressors
    </code></pre><h3>After Change</h3><pre><code class='java'>

    if df[&quotds&quot].dtype == np.int64:
        df.loc[:, &quotds&quot] = df.loc[:, &quotds&quot].astype(str)
    df.loc[:, &quotds&quot] = pd.to_datetime(<a id="change">df.loc[:, &quotds&quot]</a>)

    data_params = AttrDict({})
    &#47&#47 default case, use full dataset</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/1192f2f451030b40c2b8561aa0ffd602479e2852#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100093956</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 1192f2f451030b40c2b8561aa0ffd602479e2852</div><div id='time'> Time: 2020-06-05</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: init_data_params(4)</div><div id='n_method'> N Method Name: init_data_params(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            num_train = self.x_num_train
            cat_train = self.x_cat_train

        self.num_mean = <a id="change">num_train.mean()</a>
        self.num_std = <a id="change">num_train.std()</a>
        self.cat_mode = cat_train.mode().loc[0]

    def impute(self, impute_type=&quotsimple&quot):
        &#47&#47 impute_type: zero, simple(mean, mode)</code></pre><h3>After Change</h3><pre><code class='java'>
            cat_train = self.x_cat_train

        des = num_train.describe()
        self.num_mean = <a id="change">des.loc[&quotmean&quot]</a>
        self.num_std = des.loc[&quotstd&quot]
        self.cat_mode = cat_train.mode().loc[0]

    def impute(self, impute_type=&quotsimple&quot):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeperlearner/pytorch-template/commit/afaa657ee5e398083ca471414ee946071ce43853#diff-3b6db54bf37d10e94b4b0bd6a08b1fe1622ff7037b3238e4a4b030dd10acad59L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100093954</div><div id='project'> Project Name: deeperlearner/pytorch-template</div><div id='commit'> Commit Name: afaa657ee5e398083ca471414ee946071ce43853</div><div id='time'> Time: 2021-03-20</div><div id='author'> Author: b04202035@g.ntu.edu.tw</div><div id='file'> File Name: data_loader/examples/Adult_loader.py</div><div id='m_class'> M Class Name: AdultDataset</div><div id='n_method'> N Class Name: AdultDataset</div><div id='m_method'> M Method Name: compute_data_info(2)</div><div id='n_method'> N Method Name: compute_data_info(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: data_loader/examples/Adult_loader.py</div><div id='n_file'> N File Name: data_loader/examples/Adult_loader.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 89</div><div id='n_start'> N Start Line: 88</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            q_losses, policy_loss, entropy_loss, alpha = self.agent.update(data_batch)
            self.logger.log_var("loss/q_min",np.min(q_losses),ite)
            self.logger.log_var("loss/q_max",np.max(q_losses),ite)
            self.logger.log_var("loss/q_mean",<a id="change">np.mean(</a>q_losses<a id="change">)</a>,ite)
            self.logger.log_var("loss/q_std",<a id="change">np.std(</a>q_losses<a id="change">)</a>,ite)
            self.logger.log_var("loss/policy",policy_loss,ite)
            self.logger.log_var("loss/entropy",entropy_loss,ite)
            self.logger.log_var("others/entropy_alpha",alpha,ite)</code></pre><h3>After Change</h3><pre><code class='java'>
            
            if ite % self.log_interval == 0:
                for loss_name in loss_dict:
                    self.logger.log_var(loss_name, <a id="change">loss_dict[loss_name]</a>, ite)
            if ite % self.test_interval == 0:
                log_dict = self.test()
                avg_test_reward = log_dict[&quotreturn/test&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/x35f/unstable_baselines/commit/29d21b411c02aa5529540bac557cbb9cd79e7f17#diff-fe98381d15d030f360073153b6a8279153209b72bac992a65d2b18064d47a9fbL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100093950</div><div id='project'> Project Name: x35f/unstable_baselines</div><div id='commit'> Commit Name: 29d21b411c02aa5529540bac557cbb9cd79e7f17</div><div id='time'> Time: 2021-03-23</div><div id='author'> Author: 1621322691@qq.com</div><div id='file'> File Name: redq/trainer.py</div><div id='m_class'> M Class Name: REDQTrainer</div><div id='n_method'> N Class Name: REDQTrainer</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: BaseTrainer</div><div id='n_parent_class'> N Parent Class: BaseTrainer</div><div id='m_file'> M File Name: redq/trainer.py</div><div id='n_file'> N File Name: redq/trainer.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        cc = np.sort(cc, axis=0)
        centers += [cc]

    <a id="change">centers</a> = np.array(centers)
    mean = <a id="change">centers.mean(axis=2)</a>
    std = <a id="change">centers.std(axis=2)</a>

    return mean, std

</code></pre><h3>After Change</h3><pre><code class='java'>
        meter = ser[:, :, idx].flatten()
        kmeans = KMeans(n_clusters=2).fit(meter)
        labels = kmeans.labels_
        lab0 = <a id="change">meter[labels == 0]</a>
        lab1 = meter[labels == 1]
        mean += [[lab0.mean(), lab1.mean()]]
        std += [[lab0.std(), lab1.std()]]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uca-datalab/nilm-thresholding/commit/2b24d37855791e9ca50d60b2d7a9443f09a1cc70#diff-34fdf11475c005318d3092873f47af42d695c05c936e42693b17521007361b42L191' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100093946</div><div id='project'> Project Name: uca-datalab/nilm-thresholding</div><div id='commit'> Commit Name: 2b24d37855791e9ca50d60b2d7a9443f09a1cc70</div><div id='time'> Time: 2020-05-12</div><div id='author'> Author: danipg1409@gmail.com</div><div id='file'> File Name: better_nilm/model/preprocessing.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_cluster_centroids(1)</div><div id='n_method'> N Method Name: _get_cluster_centroids(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: better_nilm/model/preprocessing.py</div><div id='n_file'> N File Name: better_nilm/model/preprocessing.py</div><div id='m_start'> M Start Line: 212</div><div id='m_end'> M End Line: 229</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 228</div><BR>