<html><h3>Pattern ID :33414
</h3><img src='96187407.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            else:
                print("reject")
                if self._count_reject == 4:
                    self.L<a id="change"> = </a><a id="change">min(</a>1e9, self.L / self.Lup**2<a id="change">)</a>
                else:
                    self.L = min(1e9, self.L * self.Lup)
                self._count_reject += 1
</code></pre><h3>After Change</h3><pre><code class='java'>
        if self.iteration &gt; 0:
            print("---------iter---------")
        else:
            <a id="change">print("---------init---------"</a><a id="change">)</a>
        h = self.update_h()
        
        with torch.no_grad():
            start = 0</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/fbe08c97c09d4631dca10af988b6c645ff369c3f#diff-52615ad08cfc1cfad1befd14d3c383d34ae33d73e933e1359265221e8731fb61L85' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96187407</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: fbe08c97c09d4631dca10af988b6c645ff369c3f</div><div id='time'> Time: 2022-12-02</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/fit/lm.py</div><div id='m_class'> M Class Name: LM</div><div id='n_method'> N Class Name: LM</div><div id='m_method'> M Method Name: step(2)</div><div id='n_method'> N Method Name: step(2)</div><div id='m_parent_class'> M Parent Class: BaseOptimizer</div><div id='n_parent_class'> N Parent Class: BaseOptimizer</div><div id='m_file'> M File Name: autoprof/fit/lm.py</div><div id='n_file'> N File Name: autoprof/fit/lm.py</div><div id='m_start'> M Start Line: 88</div><div id='m_end'> M End Line: 147</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 146</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            for i in range(batch_size):
                j = gt_select_units_num[i]
                if j &lt; select_size:
                    nums<a id="change"> = </a><a id="change">min(</a>units_size - 1, entity_nums[i].item()<a id="change">)</a>
                    nums = torch.tensor(nums, dtype=entity_nums.dtype, device=entity_nums.device)
                    gt_units[i, j] = L.tensor_one_hot(nums, units_size).long()
</code></pre><h3>After Change</h3><pre><code class='java'>
            padding[:, 0] = L.tensor_one_hot(token, units_size).reshape(-1)
            gt_units = torch.cat([gt_units, padding], dim=1)
            print(&quotgt_units&quot, gt_units) if debug else None
            <a id="change">print(&quotgt_units.shape&quot</a>, gt_units.shape<a id="change">)</a> if debug else None
            gt_units[torch.arange(batch_size), gt_select_units_num] = L.tensor_one_hot(entity_nums, units_size).long()

            &#47&#47 for i in range(batch_size):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/liuruoze/mini-alphastar/commit/915eac43e5d4020880519d5c9094dc622a9acdfb#diff-7978248a58b83c8226c5cf781b99297dbb195bb84c7db92daa76f7c45a310454L162' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96187405</div><div id='project'> Project Name: liuruoze/mini-alphastar</div><div id='commit'> Commit Name: 915eac43e5d4020880519d5c9094dc622a9acdfb</div><div id='time'> Time: 2021-12-15</div><div id='author'> Author: liuruoze@163.com</div><div id='file'> File Name: alphastarmini/core/arch/arch_model.py</div><div id='m_class'> M Class Name: ArchModel</div><div id='n_method'> N Class Name: ArchModel</div><div id='m_method'> M Method Name: sl_forward(9)</div><div id='n_method'> N Method Name: sl_forward(9)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: alphastarmini/core/arch/arch_model.py</div><div id='n_file'> N File Name: alphastarmini/core/arch/arch_model.py</div><div id='m_start'> M Start Line: 188</div><div id='m_end'> M End Line: 204</div><div id='n_start'> N Start Line: 188</div><div id='n_end'> N End Line: 212</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        print("Model Updated...")
    else:
        print("Model didn&quott Updated...")
    best_loss<a id="change"> = </a><a id="change">min(</a>curr_loss, best_loss<a id="change">)</a>
    print(f"Current best loss : {best_loss}")
    return best_loss

</code></pre><h3>After Change</h3><pre><code class='java'>
        }
        torch.save(weights, "best_model.pt")
        print("Model Updated...")
        <a id="change">print(f"Current best loss : {&quot%.6f&quot%curr_loss}"</a><a id="change">)</a>
        return True
    else:
        print("Model didn&quott Updated...")
        print(f"Current best loss : {&quot%.6f&quot % best_loss}")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sagnik1511/samay_yantra/commit/0081e351c295e5f986fa0e1b3bcdd716f3b9e357#diff-e79f1d173c3efcacc26f2a1bf6d758825dfd73829583f1732c944edf7dde39f4L30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 96187408</div><div id='project'> Project Name: sagnik1511/samay_yantra</div><div id='commit'> Commit Name: 0081e351c295e5f986fa0e1b3bcdd716f3b9e357</div><div id='time'> Time: 2022-06-13</div><div id='author'> Author: sagnik.jal00@gmail.com</div><div id='file'> File Name: src/utils/training.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: save_best_model(4)</div><div id='n_method'> N Method Name: save_best_model(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/utils/training.py</div><div id='n_file'> N File Name: src/utils/training.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 42</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 62</div><BR>