<html><h3>Pattern ID :9788
</h3><img src='35156283.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            elif func == "render":
                pipe.send(("render", env.render(params)))
            elif func == "action space":
                <a id="change">pipe.send(</a>("action space", env.action_space)<a id="change">)</a>
            elif func == "observation dict":
                pipe.send(("observation dict", env.observation_dict))
            else:
                raise NotImplementedError(func)</code></pre><h3>After Change</h3><pre><code class='java'>
                pipe.send(("step", env.step(params)))
            elif func == "render":
                pipe.send(("render", env.render(params)))
            elif <a id="change"></a>func == "action space":
                <a id="change">pipe.send(</a>("action space", env.action_space)<a id="change">)</a>
            elif func == "observation space":
                <a id="change">pipe.send(</a>("observation space", env.observation_space)<a id="change">)</a>
            elif func == "observation dict":
                pipe.send(("observation dict", env.observation_dict))
            else:
                raise NotImplementedError(func)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tmdt-buw/karolos/commit/830ac2d938f17643a61975c02f8cb00275c55a05#diff-38da9c6c5007aa11a32fa569944bd3879bd3db295b0b19ef512bc3f5a7f23202L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156283</div><div id='project'> Project Name: tmdt-buw/karolos</div><div id='commit'> Commit Name: 830ac2d938f17643a61975c02f8cb00275c55a05</div><div id='time'> Time: 2020-07-02</div><div id='author'> Author: scheiderer@uni-wuppertal.de</div><div id='file'> File Name: environments/orchestrator.py</div><div id='m_class'> M Class Name: Orchestrator</div><div id='n_method'> N Class Name: Orchestrator</div><div id='m_method'> M Method Name: run(3)</div><div id='n_method'> N Method Name: run(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: environments/orchestrator.py</div><div id='n_file'> N File Name: environments/orchestrator.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 48</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                forms=self._cfg.eval.report)
            formatted_logs[&quotfeature_importance&quot] = self.feature_importance_dict
            logger.info(formatted_logs)
            <a id="change">self.comm_manager.send(
                </a>Message(msg_type=&quotfinish&quot,
                        sender=self.ID,
                        receiver=list(
                            self.comm_manager.get_neighbors().keys()),
                        state=self.state,
                        content=&quotNone&quot)<a id="change">)</a>
            &#47&#47 jump out running
            self.state = self.total_round_num + 1

    def callback_func_for_test_result(self, message: Message):</code></pre><h3>After Change</h3><pre><code class='java'>
            formatted_logs[&quotfeature_importance&quot] = self.feature_importance_dict
            self.feature_importance_dict = {}
            logger.info(formatted_logs)
            <a id="change">if </a>self.tree_num + 1 &lt; self.num_of_trees:
                <a id="change">self.comm_manager.send(
                    </a>Message(msg_type=&quotcontinue&quot,
                            sender=self.ID,
                            receiver=self.num_of_parties,
                            state=self.state,
                            content=self.tree_num)<a id="change">)</a>
            else:
                <a id="change">self.comm_manager.send(
                    </a>Message(msg_type=&quotfinish&quot,
                            sender=self.ID,
                            receiver=list(
                                self.comm_manager.get_neighbors().keys()),
                            state=self.state,
                            content=&quotNone&quot)<a id="change">)</a>
                &#47&#47 jump out running
                self.state = self.total_round_num + 1

    def callback_func_for_test_result(self, message: Message):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/federatedscope/commit/709c618f19efca94daf3e14b36bff7982095b412#diff-4915525563b02a6f362a147d70dadc7b9e2b62f77b8a04fe11cfbd80d5cc67b8L71' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156284</div><div id='project'> Project Name: alibaba/federatedscope</div><div id='commit'> Commit Name: 709c618f19efca94daf3e14b36bff7982095b412</div><div id='time'> Time: 2023-01-03</div><div id='author'> Author: qianbingchen.qbc@alibaba-inc.com</div><div id='file'> File Name: federatedscope/vertical_fl/xgb_base/worker/XGBServer.py</div><div id='m_class'> M Class Name: XGBServer</div><div id='n_method'> N Class Name: XGBServer</div><div id='m_method'> M Method Name: callback_func_for_feature_importance(2)</div><div id='n_method'> N Method Name: callback_func_for_feature_importance(2)</div><div id='m_parent_class'> M Parent Class: Server</div><div id='n_parent_class'> N Parent Class: Server</div><div id='m_file'> M File Name: federatedscope/vertical_fl/xgb_base/worker/XGBServer.py</div><div id='n_file'> N File Name: federatedscope/vertical_fl/xgb_base/worker/XGBServer.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 91</div><div id='n_end'> N End Line: 111</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                i[...] = data_port.recv()[0]
            self.process_to_service.send(MGMT_RESPONSE.SET_COMPLETE)
        else:
            <a id="change">self.process_to_service.send(</a>MGMT_RESPONSE.ERROR<a id="change">)</a>
            raise RuntimeError("Unsupported type")

    def _handle_var_port(self, var_port):
        Handles read/write requests on the given VarPort.</code></pre><h3>After Change</h3><pre><code class='java'>
                num_items -= 1
                i[...] = data_port.recv()[0]
            self.process_to_service.send(MGMT_RESPONSE.SET_COMPLETE)
        elif <a id="change"></a>isinstance(var, str):
            &#47&#47 First item is number of items
            num_items = int(data_port.recv()[0])

            s = []
            for i in range(num_items):
                s.append(int(data_port.recv()[0]))  &#47&#47 decode string from ascii

            s = bytes(s).decode("ascii")
            setattr(self, var_name, s)
            <a id="change">self.process_to_service.send(</a>MGMT_RESPONSE.SET_COMPLETE<a id="change">)</a>

        else:
            <a id="change">self.process_to_service.send(</a>MGMT_RESPONSE.ERROR<a id="change">)</a>
            raise RuntimeError("Unsupported type")

        &#47&#47 notify PM that Vars have been changed
        self.on_var_update()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lava-nc/lava/commit/8cb678786c7e703e5bc84d2962f6f54b5eb0ebd0#diff-7139b79a62cfae58ae9c7223148b62c98773436033c5e0938e2fc7aac075e3a4L124' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156285</div><div id='project'> Project Name: lava-nc/lava</div><div id='commit'> Commit Name: 8cb678786c7e703e5bc84d2962f6f54b5eb0ebd0</div><div id='time'> Time: 2023-02-17</div><div id='author'> Author: philipp.weidel@intel.com</div><div id='file'> File Name: src/lava/magma/core/model/py/model.py</div><div id='m_class'> M Class Name: AbstractPyProcessModel</div><div id='n_method'> N Class Name: AbstractPyProcessModel</div><div id='m_method'> M Method Name: _set_var(1)</div><div id='n_method'> N Method Name: _set_var(1)</div><div id='m_parent_class'> M Parent Class: AbstractProcessModel,ABC</div><div id='n_parent_class'> N Parent Class: AbstractProcessModel,ABC</div><div id='m_file'> M File Name: src/lava/magma/core/model/py/model.py</div><div id='n_file'> N File Name: src/lava/magma/core/model/py/model.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 156</div><div id='n_start'> N Start Line: 139</div><div id='n_end'> N End Line: 182</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if cmd == &quotstep&quot:
                remote.send([step_env(env, action) for env, action in zip(envs, data)])
            elif cmd == &quotreset&quot:
                <a id="change">remote.send(</a>[env.reset() for env in envs]<a id="change">)</a>
            elif cmd == &quotrender&quot:
                remote.send([env.render(mode=&quotrgb_array&quot) for env in envs])
            elif cmd == &quotclose&quot:
                remote.close()</code></pre><h3>After Change</h3><pre><code class='java'>
            cmd, data = remote.recv()
            if cmd == &quotstep&quot:
                remote.send([step_env(env, action) for env, action in zip(envs, data)])
            elif <a id="change"></a>cmd == &quotreset&quot:
                <a id="change">remote.send(</a>[env.reset() for env in envs]<a id="change">)</a>
            elif cmd == &quotreset_idx&quot:
                <a id="change">remote.send(</a>[env.reset() for env, idx in zip(envs, data) if idx]<a id="change">)</a>
            elif cmd == &quotrender&quot:
                remote.send([env.render(mode=&quotrgb_array&quot) for env in envs])
            elif cmd == &quotclose&quot:
                remote.close()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cherrypiesexy/imitation_learning/commit/465d9bdb4a4532b8046f0c028aae80fd29fbe1b4#diff-7361d0f02a8019a0f93f2bc9da09a611c78ff3b4c83d432fc6c6938244807f29L219' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156286</div><div id='project'> Project Name: cherrypiesexy/imitation_learning</div><div id='commit'> Commit Name: 465d9bdb4a4532b8046f0c028aae80fd29fbe1b4</div><div id='time'> Time: 2021-01-29</div><div id='author'> Author: interga@post-hardcore.ru</div><div id='file'> File Name: utils/vec_env.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: worker(3)</div><div id='n_method'> N Method Name: worker(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/vec_env.py</div><div id='n_file'> N File Name: utils/vec_env.py</div><div id='m_start'> M Start Line: 233</div><div id='m_end'> M End Line: 234</div><div id='n_start'> N Start Line: 227</div><div id='n_end'> N End Line: 236</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        self.num_steps = int(self.service_to_process.recv()[0].item())
        self.run_async()
        <a id="change">self.process_to_service.send(</a>PyAsyncProcessModel.Response.STATUS_DONE<a id="change">)</a>

    def add_ports_for_polling(self):
        
        Add various ports to poll for communication on ports</code></pre><h3>After Change</h3><pre><code class='java'>
        
        self.num_steps = int(self.service_to_process.recv()[0].item())
        self.run_async()
        <a id="change">if </a>self._req_stop:
            self.process_to_service.send(PyAsyncProcessModel.Response.REQ_STOP)
            self._req_stop = False
        elif self._req_pause:
            <a id="change">self.process_to_service.send(</a>PyAsyncProcessModel.Response.REQ_PAUSE<a id="change">)</a>
            self._req_pause = False
        else:
            <a id="change">self.process_to_service.send(
                </a>PyAsyncProcessModel.Response.STATUS_DONE<a id="change">)</a>

    def add_ports_for_polling(self):
        
        Add various ports to poll for communication on ports</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lava-nc/lava/commit/1be4ea7a0f50ac956b6fbdebe7cafd229ad4d97f#diff-7139b79a62cfae58ae9c7223148b62c98773436033c5e0938e2fc7aac075e3a4L574' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156287</div><div id='project'> Project Name: lava-nc/lava</div><div id='commit'> Commit Name: 1be4ea7a0f50ac956b6fbdebe7cafd229ad4d97f</div><div id='time'> Time: 2023-03-07</div><div id='author'> Author: yashwardhan.singh@intel.com</div><div id='file'> File Name: src/lava/magma/core/model/py/model.py</div><div id='m_class'> M Class Name: PyAsyncProcessModel</div><div id='n_method'> N Class Name: PyAsyncProcessModel</div><div id='m_method'> M Method Name: _run_async(1)</div><div id='n_method'> N Method Name: _run_async(1)</div><div id='m_parent_class'> M Parent Class: AbstractPyProcessModel</div><div id='n_parent_class'> N Parent Class: AbstractPyProcessModel</div><div id='m_file'> M File Name: src/lava/magma/core/model/py/model.py</div><div id='n_file'> N File Name: src/lava/magma/core/model/py/model.py</div><div id='m_start'> M Start Line: 580</div><div id='m_end'> M End Line: 580</div><div id='n_start'> N Start Line: 583</div><div id='n_end'> N End Line: 593</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    recipient_id = message.pop("sender", {}).pop("id", recipient_id)
                    break

        <a id="change">self.messenger_client.send(</a>json_message, recipient_id, "RESPONSE"<a id="change">)</a>

    @staticmethod
    def _add_postback_info(buttons: List[Dict[Text, Any]]) -&gt; None:
        Make sure every button has a type. Modifications happen in place.</code></pre><h3>After Change</h3><pre><code class='java'>
            message = json_message.get("data")
            message_type = json_message.get("type")
            type_list = Utility.system_metadata.get("type_list")
            <a id="change">if </a>message_type is not None and message_type in type_list:
                converter_instance = ConverterFactory.getConcreteInstance(message_type, CHANNEL_TYPES.MESSENGER.value)
                response = await converter_instance.messageConverter(message)
                <a id="change">self.messenger_client.send(</a>response, recipient_id, "RESPONSE"<a id="change">)</a>
            else:
                <a id="change">self.send(</a>recipient_id, FBText(text=str(json_message))<a id="change">)</a>
        except Exception as ap:
            raise Exception(f"Error in messenger send_custom_json {str(ap)}")

    @staticmethod</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/digiteinfotech/kairon/commit/045ca6edac5cd4889f9dd15ac22aee6f26b46b0d#diff-bec866bfb5a3f0aa6760749a4e0b29ee27a30deaba6c64425583a62914899680L281' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 35156290</div><div id='project'> Project Name: digiteinfotech/kairon</div><div id='commit'> Commit Name: 045ca6edac5cd4889f9dd15ac22aee6f26b46b0d</div><div id='time'> Time: 2022-08-03</div><div id='author'> Author: sushantpatade@gmail.com</div><div id='file'> File Name: kairon/chat/handlers/channels/messenger.py</div><div id='m_class'> M Class Name: MessengerBot</div><div id='n_method'> N Class Name: MessengerBot</div><div id='m_method'> M Method Name: send_custom_json(3)</div><div id='n_method'> N Method Name: send_custom_json(3)</div><div id='m_parent_class'> M Parent Class: OutputChannel</div><div id='n_parent_class'> N Parent Class: OutputChannel</div><div id='m_file'> M File Name: kairon/chat/handlers/channels/messenger.py</div><div id='n_file'> N File Name: kairon/chat/handlers/channels/messenger.py</div><div id='m_start'> M Start Line: 296</div><div id='m_end'> M End Line: 296</div><div id='n_start'> N Start Line: 292</div><div id='n_end'> N End Line: 312</div><BR>