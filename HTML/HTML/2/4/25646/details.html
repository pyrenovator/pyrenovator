<html><h3>Pattern ID :25646
</h3><img src='77917824.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    from datasets import load_dataset

    try:
        train_dataset = <a id="change">(
            load_dataset("glue", "stsb", split="train[:1%]").to_pandas().iloc[:20]
        )</a>
        dev_dataset = (
            load_dataset("glue", "stsb", split="train[1%:2%]").to_pandas().iloc[:20]
        )
    except requests.exceptions.ConnectionError:</code></pre><h3>After Change</h3><pre><code class='java'>
    }

    ray.shutdown()
    <a id="change">ray.init()</a>
    automl.fit(
        X_train=X_train, y_train=y_train, X_val=X_val, y_val=y_val, **automl_settings
    )
    automl.predict(X_val)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/flaml/commit/569908fbe64f08b19fbef7487513b81d62e6eaba#diff-752e4cfed6204974861590c57ef99661d93aab38b73306732f9edd3114f16800L16' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77917824</div><div id='project'> Project Name: microsoft/flaml</div><div id='commit'> Commit Name: 569908fbe64f08b19fbef7487513b81d62e6eaba</div><div id='time'> Time: 2022-01-14</div><div id='author'> Author: wang.chi@microsoft.com</div><div id='file'> File Name: test/nlp/test_autohf_regression.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_regression(0)</div><div id='n_method'> N Method Name: test_regression(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/nlp/test_autohf_regression.py</div><div id='n_file'> N File Name: test/nlp/test_autohf_regression.py</div><div id='m_start'> M Start Line: 17</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 56</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        with torch.no_grad():
            means, buckets, dists = kmeans(x, means, training=self.training, init=not self.initted)
            indices = distribution(dists, window_size)
            indices = indices.contiguous().view(*<a id="change">indices.size()[:2]</a>, -1)

        routed_means = batched_index_select(expand_dim(means, 0, b), buckets)
        loss = F.mse_loss(x, routed_means) * self.commitment</code></pre><h3>After Change</h3><pre><code class='java'>
        self.new_means = None

    def forward(self, x, update_means = False):
        <a id="change">self.init(</a>x<a id="change">)</a>

        b, dtype = x.shape[0], x.dtype
        means = self.means.type(dtype)
        x = F.normalize(x, 2, dim=-1).type(dtype)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/routing-transformer/commit/2042adb06111339b86814500f0c389759b8f6cdf#diff-1a96ccaa437a86e24c768ea078dd19db87f8694dae807ecbb231a703aba4702dL394' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77917825</div><div id='project'> Project Name: lucidrains/routing-transformer</div><div id='commit'> Commit Name: 2042adb06111339b86814500f0c389759b8f6cdf</div><div id='time'> Time: 2020-05-27</div><div id='author'> Author: lucidrains@gmail.com</div><div id='file'> File Name: routing_transformer/routing_transformer.py</div><div id='m_class'> M Class Name: Kmeans</div><div id='n_method'> N Class Name: Kmeans</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: routing_transformer/routing_transformer.py</div><div id='n_file'> N File Name: routing_transformer/routing_transformer.py</div><div id='m_start'> M Start Line: 396</div><div id='m_end'> M End Line: 410</div><div id='n_start'> N Start Line: 367</div><div id='n_end'> N End Line: 384</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        observation = observation["observation"] if isinstance(observation, dict) else observation
        &#47&#47 load positions
        goal_position    = <a id="change">observation[0:3]</a>
        poker_position   = observation[3:6]
        gripper_position = self.get_accurate_gripper_position(observation[6:9])

        self.initialize_positions(poker_position, gripper_position)</code></pre><h3>After Change</h3><pre><code class='java'>
            :return reward: (float) Reward signal for the environment
        
        observation = observation["observation"] if isinstance(observation, dict) else observation
        poker_position, gripper_position, poke_vector, aim_vector = <a id="change">self.init(</a>observation<a id="change">)</a>

        &#47&#47 align = poke_vector.get_align(aim_vector)
        align = np.dot(self.set_vector_len(poke_vector.vector, 1), self.set_vector_len(aim_vector.vector, 1))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/incognite-lab/mygym/commit/2f1c0aa857f09b4521dec2c7afbd652b3ac90334#diff-f909d23bda0d4385c8f8b25592babf12027365091adcf8cd26de3fa6848d911fL917' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77917826</div><div id='project'> Project Name: incognite-lab/mygym</div><div id='commit'> Commit Name: 2f1c0aa857f09b4521dec2c7afbd652b3ac90334</div><div id='time'> Time: 2021-08-17</div><div id='author'> Author: gupit@seznam.cz</div><div id='file'> File Name: myGym/envs/rewards.py</div><div id='m_class'> M Class Name: DualPoke</div><div id='n_method'> N Class Name: DualPoke</div><div id='m_method'> M Method Name: compute(2)</div><div id='n_method'> N Method Name: compute(2)</div><div id='m_parent_class'> M Parent Class: Reward</div><div id='n_parent_class'> N Parent Class: Reward</div><div id='m_file'> M File Name: myGym/envs/rewards.py</div><div id='n_file'> N File Name: myGym/envs/rewards.py</div><div id='m_start'> M Start Line: 926</div><div id='m_end'> M End Line: 976</div><div id='n_start'> N Start Line: 926</div><div id='n_end'> N End Line: 958</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    tokenizer = BertTokenizer.from_pretrained(TOKENIZER_DIR)
    transformer = Transformer.load_from_checkpoint(TRANSFORMER_CKPT)
    transformer.eval()
    seoul2jeju = <a id="change">load_seoul2jeju()[:10]</a>
    seouls = [seoul for seoul, _ in seoul2jeju]
    jejus = [jeju for _, jeju in seoul2jeju]
    X = InferInputsBuilder(tokenizer, config[&quotmax_length&quot])(srcs=jejus)
    tgt_ids = transformer.predict(X)</code></pre><h3>After Change</h3><pre><code class='java'>
    args = parser.parse_args()
    config = load_config()
    config.update(vars(args))
    with <a id="change">wandb.init(entity="eubinecto", project="dekorde")</a> as run:
        artifact = run.use_artifact("transformer:latest")
        artifact.checkout()
    transformer_ckpt, tokenizer_dir = transformer_paths()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/eubinecto/dekorde/commit/fd3b05ba0d98e727d7c58233ac0e8c0449890275#diff-239c9195f0b1188d5807fd9c603d9918e73ee42ade63e6f829ba093be9ee0f2fL8' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77917821</div><div id='project'> Project Name: eubinecto/dekorde</div><div id='commit'> Commit Name: fd3b05ba0d98e727d7c58233ac0e8c0449890275</div><div id='time'> Time: 2021-12-06</div><div id='author'> Author: eubinecto</div><div id='file'> File Name: main_predict.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main_predict.py</div><div id='n_file'> N File Name: main_predict.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 27</div><BR>