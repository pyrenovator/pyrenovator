<html><h3>Pattern ID :37467
</h3><img src='107975246.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            secret_manager = Client().active_stack.secrets_manager

            <a id="change">if </a><a id="change">not secret_manager or not isinstance(
                secret_manager, BaseSecretsManager
            )</a>:
                raise RuntimeError(
                    f"The active stack doesn&quott have a secret manager component. "
                    f"The ZenML secret specified in the Seldon Core Model "</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 create a Kubernetes secret from that
        if self.config.secret:

            <a id="change">logger.warning(
                "Your Seldon Core model deployer is configured to use a "
                "ZenML secret that holds credentials needed to access the "
                "artifact store. The recommended authentication method is to "
                "configure credentials for the artifact store stack component "
                "instead. The Seldon Core model deployer will use those "
                "credentials to authenticate to the artifact store "
                "automatically."</a><a id="change">
            )</a>

            try:
                zenml_secret = Client().get_secret_by_name_and_scope(
                    name=self.config.secret,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/f55a72942a5ca6009c26bdd6dd6dd13efa70e626#diff-e45fdb4db387467cc144408689f8bc2b1bc3c249eca16af594bd1d189802db91L183' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107975246</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: f55a72942a5ca6009c26bdd6dd6dd13efa70e626</div><div id='time'> Time: 2023-03-16</div><div id='author'> Author: stefan@zenml.io</div><div id='file'> File Name: src/zenml/integrations/seldon/model_deployers/seldon_model_deployer.py</div><div id='m_class'> M Class Name: SeldonModelDeployer</div><div id='n_method'> N Class Name: SeldonModelDeployer</div><div id='m_method'> M Method Name: _create_or_update_kubernetes_secret(1)</div><div id='n_method'> N Method Name: _create_or_update_kubernetes_secret(1)</div><div id='m_parent_class'> M Parent Class: BaseModelDeployer</div><div id='n_parent_class'> N Parent Class: BaseModelDeployer</div><div id='m_file'> M File Name: src/zenml/integrations/seldon/model_deployers/seldon_model_deployer.py</div><div id='n_file'> N File Name: src/zenml/integrations/seldon/model_deployers/seldon_model_deployer.py</div><div id='m_start'> M Start Line: 183</div><div id='m_end'> M End Line: 210</div><div id='n_start'> N Start Line: 193</div><div id='n_end'> N End Line: 250</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        relations_already_inverted = cls._check_already_inverted_relations(unique_relations)

        &#47&#47 TODO: invert triples id-based
        <a id="change">if </a><a id="change">create_inverse_triples or relations_already_inverted</a>:
            create_inverse_triples = True
            if relations_already_inverted:
                logger.info(</code></pre><h3>After Change</h3><pre><code class='java'>
            unique_relations, inverse = np.unique(triples[:, 1], return_inverse=True)
            suspected_to_be_inverse_relations = {r for r in unique_relations if r.endswith(INVERSE_SUFFIX)}
            if len(suspected_to_be_inverse_relations) &gt; 0:
                <a id="change">logger.warning(
                    f&quotSome triples already have the inverse relation suffix {INVERSE_SUFFIX}. &quot
                    f&quotRe-creating inverse triples to ensure consistency. You may disable this behaviour by passing &quot
                    f&quotfilter_out_candidate_inverse_relations=False&quot</a><a id="change">,
                )</a>
                relation_ids_to_remove = [
                    i
                    for i, r in enumerate(unique_relations.tolist())
                    if r in suspected_to_be_inverse_relations</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pykeen/pykeen/commit/a007a273ff146107fd1b0c099d561c7b7279965a#diff-2dce01c3c0b4127bdab5850a84b545299b150d156c01aad24589fa76762c6c72L144' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107975243</div><div id='project'> Project Name: pykeen/pykeen</div><div id='commit'> Commit Name: a007a273ff146107fd1b0c099d561c7b7279965a</div><div id='time'> Time: 2020-12-10</div><div id='author'> Author: berrendorf@dbs.ifi.lmu.de</div><div id='file'> File Name: src/pykeen/triples/triples_factory.py</div><div id='m_class'> M Class Name: TriplesFactory</div><div id='n_method'> N Class Name: TriplesFactory</div><div id='m_method'> M Method Name: from_labeled_triples(7)</div><div id='n_method'> N Method Name: from_labeled_triples(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/pykeen/triples/triples_factory.py</div><div id='n_file'> N File Name: src/pykeen/triples/triples_factory.py</div><div id='m_start'> M Start Line: 169</div><div id='m_end'> M End Line: 222</div><div id='n_start'> N Start Line: 269</div><div id='n_end'> N End Line: 319</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            &#47&#47     cfg.federate.sample_client_num = cfg.federate.sample_client_num

        &#47&#47 (b) non-sampling case, use all clients
        <a id="change">if </a>not <a id="change">(sample_client_rate_valid or sample_client_num_valid)</a>:
            cfg.federate.sample_client_num = cfg.federate.client_num

    if cfg.federate.use_ss:</code></pre><h3>After Change</h3><pre><code class='java'>
        )
        if cfg.federate.make_global_eval:
            cfg.federate.make_global_eval = False
            <a id="change">logger.warning(
                "In global training mode, we will conduct global evaluation in a proxy client rather than the server. The configuration cfg.federate.make_global_eval will be False."</a><a id="change">
            )</a>

    if non_sample_case or not sample_cfg_valid:
        &#47&#47 (a) use all clients
        cfg.federate.sample_client_num = cfg.federate.client_num</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/alibaba/federatedscope/commit/c4d873f79e961067dd727cf4f45397ff30cd3439#diff-10066efe1a4b5969d99d8c86158c0772b13fb297f15bd9c06daf9fbc4fb8be2aL65' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107975249</div><div id='project'> Project Name: alibaba/federatedscope</div><div id='commit'> Commit Name: c4d873f79e961067dd727cf4f45397ff30cd3439</div><div id='time'> Time: 2022-04-29</div><div id='author'> Author: daoyuanchen.cdy@alibaba-inc.com</div><div id='file'> File Name: federatedscope/core/configs/cfg_fl_setting.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: assert_fl_setting_cfg(1)</div><div id='n_method'> N Method Name: assert_fl_setting_cfg(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: federatedscope/core/configs/cfg_fl_setting.py</div><div id='n_file'> N File Name: federatedscope/core/configs/cfg_fl_setting.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 110</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 104</div><BR>