<html><h3>Pattern ID :21735
</h3><img src='69391426.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        return X.Act(p.view([1] * (X.dim() - 1) + [3,]))

    def quaternion(self, lietensor):
        <a id="change">raise </a><a id="change">NotImplementedError(&quotquaternion not implemented yet&quot</a><a id="change">)</a>

    @classmethod
    def identity(cls, *args, **kwargs):
        raise NotImplementedError("Instance has no identity.")</code></pre><h3>After Change</h3><pre><code class='java'>
         To quaternion 
        X = lietensor.Exp() if self.on_manifold else lietensor
        if self.lid == 1 or self.lid == 2:      &#47&#47 X is SO3 or RxSO3 type
            return LieTensor(<a id="change">X.tensor()</a>.view(-1, X.size()[-1])[:, 0:4].view(X.size()[:-1] + (-1,)), ltype=SO3_type)
        elif self.lid == 3 or self.lid == 4:    &#47&#47 X is SE3 or Sim3 type
            return LieTensor(X.tensor().view(-1, X.size()[-1])[:, 3:7].view(X.size()[:-1] + (-1,)), ltype=SO3_type)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pypose/pypose/commit/221c2e208acad211a1a5e6d62c8d0a8f4dc38505#diff-96e22f5afd9931fb53886f7d550ccd492c297ded6239079315fcfb83bf40b870L132' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69391426</div><div id='project'> Project Name: pypose/pypose</div><div id='commit'> Commit Name: 221c2e208acad211a1a5e6d62c8d0a8f4dc38505</div><div id='time'> Time: 2022-05-31</div><div id='author'> Author: futaimeng@gmail.com</div><div id='file'> File Name: pypose/lietensor/lietensor.py</div><div id='m_class'> M Class Name: LieType</div><div id='n_method'> N Class Name: LieType</div><div id='m_method'> M Method Name: quaternion(2)</div><div id='n_method'> N Method Name: quaternion(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pypose/lietensor/lietensor.py</div><div id='n_file'> N File Name: pypose/lietensor/lietensor.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 133</div><div id='n_end'> N End Line: 140</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        upsampled_image = F.interpolate(downsampled_image, size=(height, width), mode=&quotnearest&quot)
        result = upsampled_image * mask + x * (1. - mask)
    else:
        <a id="change">raise </a><a id="change">NotImplementedError(&quotNot implemented mask type.&quot</a><a id="change">)</a>

    return result, mask</code></pre><h3>After Change</h3><pre><code class='java'>
    mask = torch.ones(size=[x.shape[0], 1, x.shape[2], x.shape[3]])
    for i in range(max_mask):
        mask_temp = random_mask(height=height, width=width)
        mask_temp = <a id="change">torch.tensor(</a>mask_temp<a id="change">, dtype=torch.float32)</a>
        if x.is_cuda:
            mask_temp.cuda()
        result[i, :, :, :] = x[i, :, :, :] * (1. - mask_temp)
        mask[i, :, :, :] = mask[i, :, :, :] * mask_temp</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sayednadim/global-and-local-attention-based-free-form-image-inpainting/commit/76ff7604018fa398ac445982097becbe3fc20e3a#diff-4a9d05cc3eadd7aa0b347854fe63c55a626198aae56f6d3482457196186e5d60L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69391425</div><div id='project'> Project Name: sayednadim/global-and-local-attention-based-free-form-image-inpainting</div><div id='commit'> Commit Name: 76ff7604018fa398ac445982097becbe3fc20e3a</div><div id='time'> Time: 2020-08-16</div><div id='author'> Author: smnadimuddin@gmail.com</div><div id='file'> File Name: model/mask.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mask_image(2)</div><div id='n_method'> N Method Name: mask_image(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: model/mask.py</div><div id='n_file'> N File Name: model/mask.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 59</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                &#47&#47 phi = get_dihedral_torch(*backbone[s, i*3 - 1 : i*3 + 3]) if i&gt;0 else None
                psi = get_dihedral_torch(*backbone[s, i*3 + 0 : i*3 + 4] )if i &lt; length-1 else None
                &#47&#47 yet to be done
                <a id="change">raise </a><a id="change">NotImplementedError("Still not implemented"</a><a id="change">)</a>
    return new_coords


</code></pre><h3>After Change</h3><pre><code class='java'>
                                                 new_coords[:, i, 1], 
                                                 new_coords[:, i, 2], 
                                                 BB_BUILD_INFO["BONDLENS"]["c-o"], 
                                                 <a id="change">torch.tensor(</a>BB_BUILD_INFO["BONDANGS"]["ca-c-o"]<a id="change">)</a>,
                                                 dihedral)
    return new_coords
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lucidrains/alphafold2/commit/2635a4391ec50f77f86cc34f17c3a6395ba6bb53#diff-f9b2e05be1f80257f9a80ec7cc1290e3337a54fcc62aeee31b23a4cb827f12efL185' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69391428</div><div id='project'> Project Name: lucidrains/alphafold2</div><div id='commit'> Commit Name: 2635a4391ec50f77f86cc34f17c3a6395ba6bb53</div><div id='time'> Time: 2021-02-06</div><div id='author'> Author: ericalcaide1@gmail.com</div><div id='file'> File Name: alphafold2_pytorch/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: sidechain_container(5)</div><div id='n_method'> N Method Name: sidechain_container(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: alphafold2_pytorch/utils.py</div><div id='n_file'> N File Name: alphafold2_pytorch/utils.py</div><div id='m_start'> M Start Line: 212</div><div id='m_end'> M End Line: 212</div><div id='n_start'> N Start Line: 231</div><div id='n_end'> N End Line: 248</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return a.numpy()

    def i(self, dtype: Any = None) -&gt; Tensor:
        <a id="change">raise </a><a id="change">NotImplementedError(
            "pytorch backend doesn&quott support imaginary numbers at all!"</a><a id="change">
        )</a>

    def real(self, a: Tensor) -&gt; Tensor:
        return a
        &#47&#47 hmm, in torch, everyone is real.</code></pre><h3>After Change</h3><pre><code class='java'>
            dtype = getattr(torchlib, dtypestr)  &#47&#47 type: ignore
        if isinstance(dtype, str):
            dtype = getattr(torchlib, dtype)
        return <a id="change">torchlib.tensor(</a>1j<a id="change">, dtype=dtype)</a>

    def real(self, a: Tensor) -&gt; Tensor:
        return a
        &#47&#47 hmm, in torch, everyone is real.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencent-quantum-lab/tensorcircuit/commit/f2106f4b09d4bb262fb96fc0c104771b1b07f6dc#diff-ec7efafdd8223460f7aeb465b7644f80c2e7c82762978207c80bc47ccb98867aL109' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 69391429</div><div id='project'> Project Name: tencent-quantum-lab/tensorcircuit</div><div id='commit'> Commit Name: f2106f4b09d4bb262fb96fc0c104771b1b07f6dc</div><div id='time'> Time: 2021-12-22</div><div id='author'> Author: kcanamgal@foxmail.com</div><div id='file'> File Name: tensorcircuit/backends/pytorch_backend.py</div><div id='m_class'> M Class Name: PyTorchBackend</div><div id='n_method'> N Class Name: PyTorchBackend</div><div id='m_method'> M Method Name: i(2)</div><div id='n_method'> N Method Name: i(2)</div><div id='m_parent_class'> M Parent Class: pytorch_backend.PyTorchBackend</div><div id='n_parent_class'> N Parent Class: pytorch_backend.PyTorchBackend</div><div id='m_file'> M File Name: tensorcircuit/backends/pytorch_backend.py</div><div id='n_file'> N File Name: tensorcircuit/backends/pytorch_backend.py</div><div id='m_start'> M Start Line: 110</div><div id='m_end'> M End Line: 112</div><div id='n_start'> N Start Line: 118</div><div id='n_end'> N End Line: 122</div><BR>