<html><h3>Pattern ID :32503
</h3><img src='94694180.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def eval_precision_at_k(pred, labels, k):
    <a id="change">pass</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    n_pred_k = sum((s &gt;= threshold) for (s, _) in scores[:k])

    &#47&#47 Number of true positive instances in top k
    n_true_and_pred_k<a id="change"> = </a><a id="change">sum(</a>(<a id="change">l and (s &gt;= threshold)) for (s, l) in scores[:k])</a>

    precision_at_k = n_true_and_pred_k<a id="change"> / </a>n_pred_k if n_pred_k != 0 else 0

    return precision_at_k
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pygod-team/pygod/commit/318a74f9f76cedcb4982c8274ddd1a8a96b62fb0#diff-09fb26877d435490f4ca755678012c80ffcdba34e21ed917787ccfd094983991L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94694180</div><div id='project'> Project Name: pygod-team/pygod</div><div id='commit'> Commit Name: 318a74f9f76cedcb4982c8274ddd1a8a96b62fb0</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ytongdou@gmail.com</div><div id='file'> File Name: pygod/evaluator/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_precision_at_k(3)</div><div id='n_method'> N Method Name: eval_precision_at_k(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pygod/evaluator/metric.py</div><div id='n_file'> N File Name: pygod/evaluator/metric.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 107</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def eval_recall_at_k(pred, labels, k):
    <a id="change">pass</a>


def eval_precision_at_k(pred, labels, k):
    pass</code></pre><h3>After Change</h3><pre><code class='java'>
    n_true = sum(l for (_, l) in scores)

    &#47&#47 Number of true positive instances in top k
    n_true_and_pred_k<a id="change"> = </a><a id="change">sum(</a>(<a id="change">l and (s &gt;= threshold)) for (s, l) in scores[:k])</a>

    recall_at_k = n_true_and_pred_k<a id="change"> / </a>n_true if n_true != 0 else 0

    return recall_at_k
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pygod-team/pygod/commit/318a74f9f76cedcb4982c8274ddd1a8a96b62fb0#diff-09fb26877d435490f4ca755678012c80ffcdba34e21ed917787ccfd094983991L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94694176</div><div id='project'> Project Name: pygod-team/pygod</div><div id='commit'> Commit Name: 318a74f9f76cedcb4982c8274ddd1a8a96b62fb0</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ytongdou@gmail.com</div><div id='file'> File Name: pygod/evaluator/metric.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: eval_recall_at_k(3)</div><div id='n_method'> N Method Name: eval_recall_at_k(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pygod/evaluator/metric.py</div><div id='n_file'> N File Name: pygod/evaluator/metric.py</div><div id='m_start'> M Start Line: 34</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 70</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        pass

    def update_DH(self):
        <a id="change">pass</a>

    def get_NH(self, idx, nevals_exp):
        pass
</code></pre><h3>After Change</h3><pre><code class='java'>
                - (self.V_cubes / self.strat_counts[i] * self.JF[i]) ** 2
            )
            self.dh[i] = d_tmp ** self.beta
        d_sum<a id="change"> = </a><a id="change">sum(</a>self.dh<a id="change">)</a>
        print(d_tmp)
        self.dh = self.dh<a id="change"> / </a>d_sum

    def get_NH(self, idx, nevals_exp):
        nh = self.dh[idx] * nevals_exp</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/1ab0c9f5691fe4971626169a351a42fbd4eb9c9f#diff-043ebca7e1b0e1177dca8d0ce7bca0efc00f0a68c90edeea6b272ff39505e0e2L18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 94694188</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: 1ab0c9f5691fe4971626169a351a42fbd4eb9c9f</div><div id='time'> Time: 2021-04-09</div><div id='author'> Author: contact@pablo-gomez.net</div><div id='file'> File Name: torchquad/integration/vegas_stratification.py</div><div id='m_class'> M Class Name: VEGASStratification</div><div id='n_method'> N Class Name: VEGASStratification</div><div id='m_method'> M Method Name: update_DH(1)</div><div id='n_method'> N Method Name: update_DH(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchquad/integration/vegas_stratification.py</div><div id='n_file'> N File Name: torchquad/integration/vegas_stratification.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 19</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 40</div><BR>