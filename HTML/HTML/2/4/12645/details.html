<html><h3>Pattern ID :12645
</h3><img src='42913389.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if std is not None:
            self.std = std.detach().clone().to(self.device)
        elif var is not None:
            self.std = <a id="change">torch.sqrt(var + self.eps).detach().clone().to(</a>self.device<a id="change">)</a>
            
        self._initialized = True
        
    def transform(self, x: torch.Tensor, inverse: bool=False):</code></pre><h3>After Change</h3><pre><code class='java'>
        if std is None and var is None:
            raise ValueError("Either std or var must be provided when initializing StaticNormalizer!")
        
        <a id="change">if </a><a id="change">hasattr(</a>self, <a id="change">"mean"</a><a id="change">)</a>:
            self.mean.data = mean.detach().clone()
        else:
            self.register_parameter("mean", nn.Parameter(mean.detach().clone(), requires_grad=False))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/typoverflow/utilsrl/commit/db95d8662ab7ae60ae347f5c376212dcb7e5c8a4#diff-1ec4b0b75dc60faf9af62b873e2c73f5a7b21b21811cfbfe0e1bfe9350dc6d5cL121' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913389</div><div id='project'> Project Name: typoverflow/utilsrl</div><div id='commit'> Commit Name: db95d8662ab7ae60ae347f5c376212dcb7e5c8a4</div><div id='time'> Time: 2022-05-12</div><div id='author'> Author: typoverflow@outlook.com</div><div id='file'> File Name: UtilsRL/net/normalizer.py</div><div id='m_class'> M Class Name: StaticNormalizer</div><div id='n_method'> N Class Name: StaticNormalizer</div><div id='m_method'> M Method Name: _initialize(4)</div><div id='n_method'> N Method Name: _initialize(4)</div><div id='m_parent_class'> M Parent Class: BaseNormalizer,nn.Module</div><div id='n_parent_class'> N Parent Class: BaseNormalizer</div><div id='m_file'> M File Name: UtilsRL/net/normalizer.py</div><div id='n_file'> N File Name: UtilsRL/net/normalizer.py</div><div id='m_start'> M Start Line: 138</div><div id='m_end'> M End Line: 144</div><div id='n_start'> N Start Line: 121</div><div id='n_end'> N End Line: 141</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    results = {}
    batch_size, rest_shape = sample.shape[0], sample.shape[1:]

    sample = <a id="change">sample.to(device="cpu")</a>

    &#47&#47 Prepare sample with batch size 1
    sample1_shape = (1, *rest_shape)
    sample1 = torch.randn(sample1_shape)</code></pre><h3>After Change</h3><pre><code class='java'>
        sample1 = torch.randn(sample1_shape)

    prevously_training = getattr(model, "training", False)
    <a id="change">if </a><a id="change">hasattr(</a>model, <a id="change">"eval"</a><a id="change">)</a>:
        model.eval()

    &#47&#47 Get machine info</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/lukashedegaard/pytorch-benchmark/commit/16ca37984744f4adb1c9a75bb64dde6de261a1dc#diff-0f565e3b4078704dd02fc27c6f211cd3c4146cdcdd90207b30dd3811d02ab99eL234' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913400</div><div id='project'> Project Name: lukashedegaard/pytorch-benchmark</div><div id='commit'> Commit Name: 16ca37984744f4adb1c9a75bb64dde6de261a1dc</div><div id='time'> Time: 2022-02-11</div><div id='author'> Author: lh@eng.au.dk</div><div id='file'> File Name: pytorch_benchmark/benchmark.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: benchmark(8)</div><div id='n_method'> N Method Name: benchmark(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pytorch_benchmark/benchmark.py</div><div id='n_file'> N File Name: pytorch_benchmark/benchmark.py</div><div id='m_start'> M Start Line: 235</div><div id='m_end'> M End Line: 299</div><div id='n_start'> N Start Line: 275</div><div id='n_end'> N End Line: 380</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        -------
        Tensor of shape `[batch, time]` or `[batch, channels, time]`.
        
        waveform = <a id="change">waveform.to(</a>self.device<a id="change">)</a>

        &#47&#47 Don&quott do anything if the frequencies are the same
        if self.orig_freq == self.new_freq:
            return waveform</code></pre><h3>After Change</h3><pre><code class='java'>
        -------
        Tensor of shape `[batch, time]` or `[batch, channels, time]`.
        
        <a id="change">if </a>not <a id="change">hasattr(</a>self, <a id="change">"first_indices"</a><a id="change">)</a>:
            self._indices_and_weights(waveforms)

        &#47&#47 Don&quott do anything if the frequencies are the same</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/bc6a411621d42f8517b5888d097bdf4d20ba58fe#diff-ef8b6f991a9b7ae57f5a46dd563bace5d8980a13b59fd9e5db2dc9b1034afab3L504' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913401</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: bc6a411621d42f8517b5888d097bdf4d20ba58fe</div><div id='time'> Time: 2020-04-24</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: speechbrain/processing/speech_augmentation.py</div><div id='m_class'> M Class Name: Resample</div><div id='n_method'> N Class Name: Resample</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: torch.nn.Module</div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: speechbrain/processing/speech_augmentation.py</div><div id='n_file'> N File Name: speechbrain/processing/speech_augmentation.py</div><div id='m_start'> M Start Line: 517</div><div id='m_end'> M End Line: 517</div><div id='n_start'> N Start Line: 494</div><div id='n_end'> N End Line: 498</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    min: torch.Tensor, 
                    max: torch.Tensor
                    ):
        self.min = <a id="change">min.detach().clone().to(</a>self.device<a id="change">)</a>
        self.max = max.detach().clone().to(self.device)
        self._initialized = True
        
    def transform(self, x: torch.Tensor, inverse: bool=False):</code></pre><h3>After Change</h3><pre><code class='java'>
            self.min.data = min.detach().clone()
        else:
            self.register_parameter("min", min.detach().clone())
        <a id="change">if </a><a id="change">hasattr(</a>self, <a id="change">"max"</a><a id="change">)</a>:
            self.max.data = max.detach().clone()
        else:
            self.register_parameter("max", max.detach().clone())</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/typoverflow/utilsrl/commit/db95d8662ab7ae60ae347f5c376212dcb7e5c8a4#diff-1ec4b0b75dc60faf9af62b873e2c73f5a7b21b21811cfbfe0e1bfe9350dc6d5cL187' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913382</div><div id='project'> Project Name: typoverflow/utilsrl</div><div id='commit'> Commit Name: db95d8662ab7ae60ae347f5c376212dcb7e5c8a4</div><div id='time'> Time: 2022-05-12</div><div id='author'> Author: typoverflow@outlook.com</div><div id='file'> File Name: UtilsRL/net/normalizer.py</div><div id='m_class'> M Class Name: MinMaxNormalizer</div><div id='n_method'> N Class Name: MinMaxNormalizer</div><div id='m_method'> M Method Name: _initialize(3)</div><div id='n_method'> N Method Name: _initialize(3)</div><div id='m_parent_class'> M Parent Class: BaseNormalizer,nn.Module</div><div id='n_parent_class'> N Parent Class: BaseNormalizer</div><div id='m_file'> M File Name: UtilsRL/net/normalizer.py</div><div id='n_file'> N File Name: UtilsRL/net/normalizer.py</div><div id='m_start'> M Start Line: 191</div><div id='m_end'> M End Line: 193</div><div id='n_start'> N Start Line: 171</div><div id='n_end'> N End Line: 182</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def to(self, device):
        if isinstance(device, (str, torch.device)):
            self.device = device
        return <a id="change">super().to(</a>device<a id="change">)</a>

    def from_hyper_parameter(self, hp):
        ret_self = self.__class__(
            num_features=self.num_features,</code></pre><h3>After Change</h3><pre><code class='java'>
    def to(self, device):
        if isinstance(device, (str, torch.device)):
            self.device = device
        <a id="change">if </a><a id="change">hasattr(</a>self, <a id="change">"model"</a><a id="change">)</a> and self.model is not None and isinstance(self.model, torch.nn.Module):
            self.model.to(self.device)
        return self
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thumnlab/autogl/commit/3d8e9d1847039ec2c5889b6a12f9fb49d44684af#diff-69cab4b20abe60bbb3b59079c31dc379921fe018348023280508c5ee6ea71b00L46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913396</div><div id='project'> Project Name: thumnlab/autogl</div><div id='commit'> Commit Name: 3d8e9d1847039ec2c5889b6a12f9fb49d44684af</div><div id='time'> Time: 2021-04-13</div><div id='author'> Author: null</div><div id='file'> File Name: autogl/module/model/base.py</div><div id='m_class'> M Class Name: BaseModel</div><div id='n_method'> N Class Name: BaseModel</div><div id='m_method'> M Method Name: to(2)</div><div id='n_method'> N Method Name: to(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: torch.nn.Module</div><div id='m_file'> M File Name: autogl/module/model/base.py</div><div id='n_file'> N File Name: autogl/module/model/base.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            safety_checker=None,
            feature_extractor=self.dummy_extractor,
        )
        sd_pipe = <a id="change">sd_pipe.to(</a>torch_device<a id="change">)</a>
        sd_pipe.set_progress_bar_config(disable=None)

        source_prompt = "An astronaut riding a horse"
        prompt = "An astronaut riding an elephant"</code></pre><h3>After Change</h3><pre><code class='java'>
    def test_stable_diffusion_cycle_fp16(self):
        components = self.get_dummy_components()
        for name, module in components.items():
            <a id="change">if </a><a id="change">hasattr(</a>module, <a id="change">"half"</a><a id="change">)</a>:
                components[name] = module.half()
        pipe = CycleDiffusionPipeline(**components)
        pipe = pipe.to(torch_device)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/diffusers/commit/02d83c9ff1b93f2c6f9c94f9369b3e4bc1ba8ce7#diff-6cb6d54c7ee02bd199554f696fe62570a0fd88aa4f738a94716c31809b651712L206' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 42913395</div><div id='project'> Project Name: huggingface/diffusers</div><div id='commit'> Commit Name: 02d83c9ff1b93f2c6f9c94f9369b3e4bc1ba8ce7</div><div id='time'> Time: 2022-12-06</div><div id='author'> Author: anton@huggingface.co</div><div id='file'> File Name: tests/pipelines/stable_diffusion/test_cycle_diffusion.py</div><div id='m_class'> M Class Name: CycleDiffusionPipelineFastTests</div><div id='n_method'> N Class Name: CycleDiffusionPipelineFastTests</div><div id='m_method'> M Method Name: test_stable_diffusion_cycle_fp16(1)</div><div id='n_method'> N Method Name: test_stable_diffusion_cycle_fp16(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase,PipelineTesterMixin</div><div id='n_parent_class'> N Parent Class: unittest.TestCase,PipelineTesterMixin</div><div id='m_file'> M File Name: tests/pipelines/stable_diffusion/test_cycle_diffusion.py</div><div id='n_file'> N File Name: tests/pipelines/stable_diffusion/test_cycle_diffusion.py</div><div id='m_start'> M Start Line: 207</div><div id='m_end'> M End Line: 253</div><div id='n_start'> N Start Line: 133</div><div id='n_end'> N End Line: 142</div><BR>