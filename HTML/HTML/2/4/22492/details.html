<html><h3>Pattern ID :22492
</h3><img src='71039889.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self._properties["_module_subtrees"].add(name)

    def tree_flatten(self):
        annotations = <a id="change">getattr(</a>self.__class__, <a id="change">"__annotations__"</a>, {}<a id="change">)</a>
        fields = vars(self)

        _tree = {}
        _not_tree = {}</code></pre><h3>After Change</h3><pre><code class='java'>
        name_to_kind = self._name_to_kind

        for name, value in fields.items():
            (_tree<a id="change"> if name in name_to_kind</a><a id="change"> else </a>_not_tree)[name] = value

        return _tree.values(), (_tree.keys(), _not_tree)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ntt123/pax/commit/cf57b202963207d8e289c812a05d59b9713271d6#diff-0debbaed0c2e0cac272a313f5f4d14c2db90459ba703dff2cb8f44d40355cc70L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 71039889</div><div id='project'> Project Name: ntt123/pax</div><div id='commit'> Commit Name: cf57b202963207d8e289c812a05d59b9713271d6</div><div id='time'> Time: 2021-08-30</div><div id='author'> Author: 9960521+NTT123@users.noreply.github.com</div><div id='file'> File Name: pax/module.py</div><div id='m_class'> M Class Name: Module</div><div id='n_method'> N Class Name: Module</div><div id='m_method'> M Method Name: tree_flatten(1)</div><div id='n_method'> N Method Name: tree_flatten(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pax/module.py</div><div id='n_file'> N File Name: pax/module.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 95</div><div id='n_end'> N End Line: 102</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    strategy.hybrid_configs = {
        "dp_degree": getattr(args, "dp_degree", 1),
        "mp_degree": world_size,
        "pp_degree": <a id="change">getattr(</a>args, <a id="change">"pp_degree"</a>, 1<a id="change">)</a>,
        "sharding_degree": getattr(args, "sharding_degree", 1),
    }
</code></pre><h3>After Change</h3><pre><code class='java'>

def load_model(args: str, model_class: Type[PretrainedModel]):
    config = BloomConfig.from_pretrained(args.model_name_or_path)
    dtype = "float32"<a id="change"> if config.dtype is None</a><a id="change"> else </a>config.dtype
    paddle.set_default_dtype(dtype)

    &#47&#47 Detecting last checkpoint.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/paddlepaddle/paddlenlp/commit/0d1cba43ca0eb4984715f3c807fde7345e80ca40#diff-afccbff39ce05dabacda7443e12284a4fc79c6530fa584f01edf8d6ad0003114L156' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 71039888</div><div id='project'> Project Name: paddlepaddle/paddlenlp</div><div id='commit'> Commit Name: 0d1cba43ca0eb4984715f3c807fde7345e80ca40</div><div id='time'> Time: 2023-04-06</div><div id='author'> Author: fangzeyang0904@hotmail.com</div><div id='file'> File Name: examples/language_model/bloom/utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: load_model(2)</div><div id='n_method'> N Method Name: load_model(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/language_model/bloom/utils.py</div><div id='n_file'> N File Name: examples/language_model/bloom/utils.py</div><div id='m_start'> M Start Line: 157</div><div id='m_end'> M End Line: 198</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 150</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        metrics, batch_images_counter = calc_batch_prediction_accuracy(preds, targets, height, width,
                                                                       self.iou_thres)
        acc_metrics = <a id="change">getattr(</a>self, <a id="change">"metrics"</a><a id="change">)</a>
        setattr(self, "metrics", acc_metrics + metrics)


    def compute(self):</code></pre><h3>After Change</h3><pre><code class='java'>
        _, _, height, width = inputs.shape

        targets = target.clone()
        crowd_targets = torch.zeros(size=(0, 6), device=device)<a id="change"> if crowd_targets is None</a><a id="change"> else </a>crowd_targets.clone()

        preds = self.post_prediction_callback(preds, device=device)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deci-ai/super-gradients/commit/90fb0a6d0e7aa883b1f583c9c83b4c2d3525e9d2#diff-af6a25abebd6c5c98274636ae8cb47c3b632aa27a0fdbf6ef7b6bef8f8405851L136' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 71039892</div><div id='project'> Project Name: deci-ai/super-gradients</div><div id='commit'> Commit Name: 90fb0a6d0e7aa883b1f583c9c83b4c2d3525e9d2</div><div id='time'> Time: 2022-07-28</div><div id='author'> Author: 80472096+shaydeci@users.noreply.github.com</div><div id='file'> File Name: src/super_gradients/training/metrics/detection_metrics.py</div><div id='m_class'> M Class Name: DetectionMetrics</div><div id='n_method'> N Class Name: DetectionMetrics</div><div id='m_method'> M Method Name: update(6)</div><div id='n_method'> N Method Name: update(6)</div><div id='m_parent_class'> M Parent Class: Metric</div><div id='n_parent_class'> N Parent Class: Metric</div><div id='m_file'> M File Name: src/super_gradients/training/metrics/detection_metrics.py</div><div id='n_file'> N File Name: src/super_gradients/training/metrics/detection_metrics.py</div><div id='m_start'> M Start Line: 136</div><div id='m_end'> M End Line: 150</div><div id='n_start'> N Start Line: 65</div><div id='n_end'> N End Line: 93</div><BR>