<html><h3>Pattern ID :7978
</h3><img src='28410673.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def _poly(self, x):
        &#47&#47 compute x^k
        exponentials = torch.zeros(<a id="change">[</a>x.shape[0], x.shape[1], self.order + 1<a id="change"></a>])
        for o in range(self.order + 1):
            exponentials[:, :, o] = torch.pow(x, o)

        &#47&#47 multiply by coefficients
        exponentials = torch.multiply(exponentials, self.coeffs)

        &#47&#47 Collapse dimensions
        exponentials<a id="change"> = </a>torch.sum(exponentials, dim=2)

        &#47&#47 sum all values for each dim
        return torch.sum(exponentials, dim=1)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Compute all relevant x^k
        &#47&#47 The shape of exponentials is (dim, N, order+1)
        if infer_backend(x) != "tensorflow":
            exponentials = x.reshape(x.shape + (1,)) ** <a id="change">anp.linspace(
                0</a>, self.order, self.order + 1<a id="change">, like=x
            )</a>
            assert exponentials.dtype == x.dtype
        else:
            &#47&#47 Tensorflow&quots exponentiation gives float64 values if x are float32
            &#47&#47 and the exponent are integer</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/esa/torchquad/commit/a3a1438960cc83afb6844c8279415e131be2ca42#diff-fe1b22e294ae47b16639a2139938eeec68d387dfa25d702da595cb2e75ef1bafL78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28410673</div><div id='project'> Project Name: esa/torchquad</div><div id='commit'> Commit Name: a3a1438960cc83afb6844c8279415e131be2ca42</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: ga84muv@mytum.de</div><div id='file'> File Name: torchquad/tests/integration_test_functions.py</div><div id='m_class'> M Class Name: Polynomial</div><div id='n_method'> N Class Name: Polynomial</div><div id='m_method'> M Method Name: _poly(2)</div><div id='n_method'> N Method Name: _poly(2)</div><div id='m_parent_class'> M Parent Class: IntegrationTestFunction</div><div id='n_parent_class'> N Parent Class: IntegrationTestFunction</div><div id='m_file'> M File Name: torchquad/tests/integration_test_functions.py</div><div id='n_file'> N File Name: torchquad/tests/integration_test_functions.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 89</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 147</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def train(network):
	lr_schedule = [5e-2, 1e-2, 5e-3, 1e-3, 5e-4, 1e-4, 5e-5, 1e-5]
	loss_schedule<a id="change"> = </a><a id="change">[</a>0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7<a id="change"></a>]
	curr_stage = 0
	curr_lr = 1e-1
	lr_history = []</code></pre><h3>After Change</h3><pre><code class='java'>


def train(network):
	loss_schedule = <a id="change">np.linspace(</a>0.9, <a id="change">0.99</a><a id="change">, num=3)</a>
	curr_stage = 0
	curr_lr = 1e-3
	lr_history = []
	history = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neurotorch/neurotorch/commit/1448822fbe5f5b55b9f4434da75c983e31f11bf8#diff-13d67778ac9082a79067547056c347fc83d10d588fe48a27d4fc563dfb2d0299L118' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28410643</div><div id='project'> Project Name: neurotorch/neurotorch</div><div id='commit'> Commit Name: 1448822fbe5f5b55b9f4434da75c983e31f11bf8</div><div id='time'> Time: 2022-08-06</div><div id='author'> Author: 50332514+JeremieGince@users.noreply.github.com</div><div id='file'> File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='n_file'> N File Name: applications/time_series_forecasting_spiking/ts_pred_with_lif_autoencoder.py</div><div id='m_start'> M Start Line: 119</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 146</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            sigma = 0.1
            f = gp.marginal_likelihood("f", X, y, noise=sigma)
            p = gp.conditional("p", Xnew)
        self.logp<a id="change"> = </a>model.compile_logp()(<a id="change">{</a>"p": pnew<a id="change">}</a>)
        self.X = X
        self.Xnew = Xnew
        self.y = y</code></pre><h3>After Change</h3><pre><code class='java'>
            self.gp.marginal_likelihood("lik", self.x[:, None], self.y, sigma)
            self.map_full = pm.find_MAP(method="bfgs")  &#47&#47 bfgs seems to work much better than lbfgsb

        self.x_new = <a id="change">np.linspace(-6</a>, 6, 20<a id="change">)</a>

        &#47&#47 Include additive Gaussian noise, return diagonal of predicted covariance matrix
        with model:
            self.pred_mu, self.pred_var = self.gp.predict(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pymc-devs/pymc3/commit/8f02bea5e37d115d26cc6e4e27b4d3b51ef96c43#diff-95077f5a816fc75dbe9bfab3f9c36bb1f55b0eecc8b9a0bbaaa248ab04ef396cL853' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28410627</div><div id='project'> Project Name: pymc-devs/pymc3</div><div id='commit'> Commit Name: 8f02bea5e37d115d26cc6e4e27b4d3b51ef96c43</div><div id='time'> Time: 2022-08-31</div><div id='author'> Author: w.j.engels@gmail.com</div><div id='file'> File Name: pymc/tests/test_gp.py</div><div id='m_class'> M Class Name: TestMarginalVsMarginalApprox</div><div id='n_method'> N Class Name: TestMarginalVsMarginalApprox</div><div id='m_method'> M Method Name: setup_method(1)</div><div id='n_method'> N Method Name: setup_method(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: pymc/tests/test_gp.py</div><div id='n_file'> N File Name: pymc/tests/test_gp.py</div><div id='m_start'> M Start Line: 854</div><div id='m_end'> M End Line: 871</div><div id='n_start'> N Start Line: 853</div><div id='n_end'> N End Line: 879</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    @staticmethod
    def _partition_inds(n: int, num_parts: int):
        m = n // num_parts
        parts = <a id="change">[</a>m<a id="change"></a>] * num_parts
        num_extra = n % num_parts
        for i in range(num_extra):
            parts[i]<a id="change"> += </a>1
        return np.cumsum(parts)

    def _get_sampler_args_for_scene_split(</code></pre><h3>After Change</h3><pre><code class='java'>

    @staticmethod
    def _partition_inds(n: int, num_parts: int):
        return np.round(<a id="change">np.linspace(0</a>, n, num_parts + 1<a id="change">, endpoint=True)</a>).astype(
            np.int32
        )
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/8f456ef9510093db75645c80821c92f9e21a5b72#diff-7ecdec33f5ecbe44018044731e65a163e72a29bb9ba73c19673b766bb3f5683bL100' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28410653</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: 8f456ef9510093db75645c80821c92f9e21a5b72</div><div id='time'> Time: 2020-01-17</div><div id='author'> Author: jordis@allenai.org</div><div id='file'> File Name: experiments/object_nav_thor.py</div><div id='m_class'> M Class Name: ObjectNavThorExperimentConfig</div><div id='n_method'> N Class Name: ObjectNavThorExperimentConfig</div><div id='m_method'> M Method Name: _partition_inds(2)</div><div id='n_method'> N Method Name: _partition_inds(2)</div><div id='m_parent_class'> M Parent Class: ExperimentConfig</div><div id='n_parent_class'> N Parent Class: ExperimentConfig</div><div id='m_file'> M File Name: experiments/object_nav_thor.py</div><div id='n_file'> N File Name: experiments/object_nav_thor.py</div><div id='m_start'> M Start Line: 101</div><div id='m_end'> M End Line: 106</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Adjust the compatibility of ws and gws
        stage_widths, stage_groups = adjust_widths_groups_comp(stage_widths, stage_bottle_ratios, stage_groups)
        param_names<a id="change"> = </a><a id="change">[</a>&quotout_chs&quot, &quotstride&quot, &quotdilation&quot, &quotdepth&quot, &quotbottle_ratio&quot, &quotgroup_width&quot<a id="change"></a>]
        stage_params = [
            dict(zip(param_names, params)) for params in
            zip(stage_widths, stage_strides, stage_dilations, stage_depths, stage_bottle_ratios, stage_groups)]</code></pre><h3>After Change</h3><pre><code class='java'>
                net_stride *= stride
            stage_strides.append(stride)
            stage_dilations.append(dilation)
        stage_dpr = np.split(<a id="change">np.linspace(0</a>, drop_path_rate, d<a id="change">)</a>, np.cumsum(stage_depths[:-1]))

        &#47&#47 Adjust the compatibility of ws and gws
        stage_widths, stage_groups = adjust_widths_groups_comp(stage_widths, stage_bottle_ratios, stage_groups)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/feng-lab/pytorch-image-models/commit/689030087753da1ee8cbe5cbc18ec5a5ed51a718#diff-9e0dadc2fadb7377417fc6eaa8fd42487d3f7161b91808aeeba798158ed891e3L275' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28410654</div><div id='project'> Project Name: feng-lab/pytorch-image-models</div><div id='commit'> Commit Name: 689030087753da1ee8cbe5cbc18ec5a5ed51a718</div><div id='time'> Time: 2020-08-11</div><div id='author'> Author: rwightman@gmail.com</div><div id='file'> File Name: timm/models/regnet.py</div><div id='m_class'> M Class Name: RegNet</div><div id='n_method'> N Class Name: RegNet</div><div id='m_method'> M Method Name: _get_stage_params(5)</div><div id='n_method'> N Method Name: _get_stage_params(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: timm/models/regnet.py</div><div id='n_file'> N File Name: timm/models/regnet.py</div><div id='m_start'> M Start Line: 302</div><div id='m_end'> M End Line: 302</div><div id='n_start'> N Start Line: 276</div><div id='n_end'> N End Line: 308</div><BR>