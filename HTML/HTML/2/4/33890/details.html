<html><h3>Pattern ID :33890
</h3><img src='97144474.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        p2 = p1[0] + w, p1[1] - h - 3 if outside else p1[1] + h + 3
        &#47&#47 add bounding box text
        cv2.rectangle(image, p1, p2, color, -1, cv2.LINE_AA)  &#47&#47 filled
        <a id="change">cv2.putText(
            </a>image,
            label,
            (p1[0], p1[1] - 2 if outside else p1[1] + h + 2),
            0,
            text_size,
            (255, 255, 255)<a id="change">,
            thickness=text_th,
        )</a>

    &#47&#47 export if output_dir is present
    if output_dir is not None:
        &#47&#47 export image with predictions</code></pre><h3>After Change</h3><pre><code class='java'>
            thickness=rect_th,
        )

        <a id="change">if not hide_labels</a>:
            &#47&#47 arange bounding box text location
            label = f"{category_name}"

            if not hide_conf:
                label += f" {score:.2f}"

            w, h = cv2.getTextSize(label, 0, fontScale=text_size, thickness=text_th)[0]  &#47&#47 label width, height
            outside = p1[1] - h - 3 &gt;= 0  &#47&#47 label fits outside box
            p2 = p1[0] + w, p1[1] - h - 3 if outside else p1[1] + h + 3
            &#47&#47 add bounding box text
            cv2.rectangle(image, p1, p2, color, -1, cv2.LINE_AA)  &#47&#47 filled
            <a id="change">cv2.putText(
                </a>image,
                label,
                (p1[0], p1[1] - 2 if outside else p1[1] + h + 2),
                0,
                text_size,
                (255, 255, 255)<a id="change">,
                thickness=text_th,
            )</a>

    &#47&#47 export if output_dir is present
    if output_dir is not None:
        &#47&#47 export image with predictions</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/obss/sahi/commit/7d63528d66433d5f3e500cded4acb47890e8ed85#diff-c99f373f1fd08505016e4fc1f99f50da6fb59ede5dfc05100480e643322d8bf8L410' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97144474</div><div id='project'> Project Name: obss/sahi</div><div id='commit'> Commit Name: 7d63528d66433d5f3e500cded4acb47890e8ed85</div><div id='time'> Time: 2023-03-10</div><div id='author'> Author: 31406314+aphilas@users.noreply.github.com</div><div id='file'> File Name: sahi/utils/cv.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: visualize_object_predictions(11)</div><div id='n_method'> N Method Name: visualize_object_predictions(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sahi/utils/cv.py</div><div id='n_file'> N File Name: sahi/utils/cv.py</div><div id='m_start'> M Start Line: 477</div><div id='m_end'> M End Line: 491</div><div id='n_start'> N Start Line: 410</div><div id='n_end'> N End Line: 507</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            thickness=-1, 
            lineType=cv2.LINE_AA
        )  
        <a id="change">cv2.putText(
            </a>orig_image, 
            class_name, 
            (p1[0], p1[1] - 5 if outside else p1[1] + h + 2),
            cv2.FONT_HERSHEY_SIMPLEX<a id="change">, 
            fontScale=lw / 3.8, 
            color=(255, 255, 255), 
            thickness=tf, 
            lineType=cv2.LINE_AA
        )</a>
    return orig_image

def draw_text(
        img,</code></pre><h3>After Change</h3><pre><code class='java'>
            thickness=lw,
            lineType=cv2.LINE_AA
        )
        <a id="change">if not args[&quotno_labels&quot]</a>:
            &#47&#47 For filled rectangle.
            final_label = class_name + &quot &quot + str(round(scores[j], 2))
            w, h = cv2.getTextSize(
                final_label, 
                cv2.FONT_HERSHEY_SIMPLEX, 
                fontScale=lw / 3, 
                thickness=tf
            )[0]  &#47&#47 text width, height
            w = int(w - (0.20 * w))
            outside = p1[1] - h &gt;= 3
            p2 = p1[0] + w, p1[1] - h - 3 if outside else p1[1] + h + 3
            cv2.rectangle(
                orig_image, 
                p1, 
                p2, 
                color=color, 
                thickness=-1, 
                lineType=cv2.LINE_AA
            )  
            <a id="change">cv2.putText(
                </a>orig_image, 
                final_label, 
                (p1[0], p1[1] - 5 if outside else p1[1] + h + 2),
                cv2.FONT_HERSHEY_SIMPLEX<a id="change">, 
                fontScale=lw / 3.8, 
                color=(255, 255, 255), 
                thickness=tf, 
                lineType=cv2.LINE_AA
            )</a>
    return orig_image

def draw_text(
        img,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sovit-123/fastercnn-pytorch-training-pipeline/commit/4acffd45b2c477112fb5883c292ffa27b3e948a0#diff-ee721c71093636b2976deb58ef5376507e0e770945ed778235d13e92c195309aL4' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97144475</div><div id='project'> Project Name: sovit-123/fastercnn-pytorch-training-pipeline</div><div id='commit'> Commit Name: 4acffd45b2c477112fb5883c292ffa27b3e948a0</div><div id='time'> Time: 2022-11-24</div><div id='author'> Author: sovitrath5@gmail.com</div><div id='file'> File Name: utils/annotations.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: inference_annotations(7)</div><div id='n_method'> N Method Name: inference_annotations(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/annotations.py</div><div id='n_file'> N File Name: utils/annotations.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 59</div><div id='n_start'> N Start Line: 11</div><div id='n_end'> N End Line: 68</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        p2 = p1[0] + w, p1[1] - h - 3 if outside else p1[1] + h + 3
        &#47&#47 add bounding box text
        cv2.rectangle(image, p1, p2, color, -1, cv2.LINE_AA)  &#47&#47 filled
        <a id="change">cv2.putText(
            </a>image,
            label,
            (p1[0], p1[1] - 2 if outside else p1[1] + h + 2),
            0,
            text_size,
            (255, 255, 255)<a id="change">,
            thickness=text_th,
        )</a>
    if output_dir:
        &#47&#47 create output folder if not present
        Path(output_dir).mkdir(parents=True, exist_ok=True)
        &#47&#47 save inference result</code></pre><h3>After Change</h3><pre><code class='java'>
            thickness=rect_th,
        )

        <a id="change">if not hide_labels</a>:
            &#47&#47 arange bounding box text location
            label = f"{class_}"
            w, h = cv2.getTextSize(label, 0, fontScale=text_size, thickness=text_th)[0]  &#47&#47 label width, height
            outside = p1[1] - h - 3 &gt;= 0  &#47&#47 label fits outside box
            p2 = p1[0] + w, p1[1] - h - 3 if outside else p1[1] + h + 3
            &#47&#47 add bounding box text
            cv2.rectangle(image, p1, p2, color, -1, cv2.LINE_AA)  &#47&#47 filled
            <a id="change">cv2.putText(
                </a>image,
                label,
                (p1[0], p1[1] - 2 if outside else p1[1] + h + 2),
                0,
                text_size,
                (255, 255, 255)<a id="change">,
                thickness=text_th,
            )</a>
    if output_dir:
        &#47&#47 create output folder if not present
        Path(output_dir).mkdir(parents=True, exist_ok=True)
        &#47&#47 save inference result</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/obss/sahi/commit/7d63528d66433d5f3e500cded4acb47890e8ed85#diff-c99f373f1fd08505016e4fc1f99f50da6fb59ede5dfc05100480e643322d8bf8L314' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97144480</div><div id='project'> Project Name: obss/sahi</div><div id='commit'> Commit Name: 7d63528d66433d5f3e500cded4acb47890e8ed85</div><div id='time'> Time: 2023-03-10</div><div id='author'> Author: 31406314+aphilas@users.noreply.github.com</div><div id='file'> File Name: sahi/utils/cv.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: visualize_prediction(11)</div><div id='n_method'> N Method Name: visualize_prediction(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sahi/utils/cv.py</div><div id='n_file'> N File Name: sahi/utils/cv.py</div><div id='m_start'> M Start Line: 374</div><div id='m_end'> M End Line: 388</div><div id='n_start'> N Start Line: 323</div><div id='n_end'> N End Line: 392</div><BR>