<html><h3>Pattern ID :25461
</h3><img src='77673821.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    df = iclaims_training_data
    date_array = df[&quotweek&quot]
    knot_idx = get_knot_idx(date_array=date_array, knot_dates=knot_dates)
    expected_dates = get_knot_dates(date_array[0], knot_idx, <a id="change">date_array[1] - </a>date_array[0])
    expected_idx = np.array([228, 356])

    assert np.all(knot_idx == expected_idx)</code></pre><h3>After Change</h3><pre><code class='java'>
    ]
)
def test_dates_args(dataset, date_col, knot_dates, knot_idx, request):
    df = <a id="change">request.getfixturevalue(</a>dataset<a id="change">)</a>
    date_array = df[date_col]
    knot_idx2 = get_knot_idx(date_array=date_array, knot_dates=knot_dates)
    freq = pd.infer_freq(date_array)
    knot_dates2 = get_knot_dates(date_array[0], knot_idx, freq)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uber/orbit/commit/31e08a1d53d8e40e430a5efc2bb583f57796db9a#diff-48c142f12e4fc800d0e01852d6714e8ccbbd2066d43bca80d57a91aa782b0cfbL40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77673821</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 31e08a1d53d8e40e430a5efc2bb583f57796db9a</div><div id='time'> Time: 2022-01-26</div><div id='author'> Author: wangzhishi@users.noreply.github.com</div><div id='file'> File Name: tests/orbit/utils/test_knots.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_dates_args(5)</div><div id='n_method'> N Method Name: test_dates_args(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/orbit/utils/test_knots.py</div><div id='n_file'> N File Name: tests/orbit/utils/test_knots.py</div><div id='m_start'> M Start Line: 40</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 61</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    knot_idx = get_knot_idx(num_of_obs=df.shape[0], knot_distance=knot_distance)
    assert knot_idx[0] == 0
    assert knot_idx[3] - knot_idx[2] == knot_distance
    knot_dates = get_knot_dates(date_array[0], knot_idx, <a id="change">date_array[1] - </a>date_array[0])
    &#47&#47 first knot always at the first date
    assert knot_dates[0] == date_array[0]
    &#47&#47 the first knot may not always equal knot distance due to appending the first date as the first knot</code></pre><h3>After Change</h3><pre><code class='java'>
    ]
)
def test_distance_args(dataset, date_col, knot_distance, request):
    df = <a id="change">request.getfixturevalue(</a>dataset<a id="change">)</a>
    date_array = df[date_col]
    knot_idx = get_knot_idx(num_of_obs=df.shape[0], knot_distance=knot_distance)

    assert knot_idx[0] == 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uber/orbit/commit/31e08a1d53d8e40e430a5efc2bb583f57796db9a#diff-48c142f12e4fc800d0e01852d6714e8ccbbd2066d43bca80d57a91aa782b0cfbL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77673820</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 31e08a1d53d8e40e430a5efc2bb583f57796db9a</div><div id='time'> Time: 2022-01-26</div><div id='author'> Author: wangzhishi@users.noreply.github.com</div><div id='file'> File Name: tests/orbit/utils/test_knots.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_distance_args(4)</div><div id='n_method'> N Method Name: test_distance_args(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/orbit/utils/test_knots.py</div><div id='n_file'> N File Name: tests/orbit/utils/test_knots.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 41</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    knot_idx = get_knot_idx(num_of_obs=df.shape[0], num_of_segments=num_of_segments)
    assert knot_idx[0] == 0
    assert len(knot_idx) == num_of_segments + 1
    knot_dates = get_knot_dates(date_array[0], knot_idx, <a id="change">date_array[1] - </a>date_array[0])
    &#47&#47 first knot always at the first date
    assert knot_dates[0] == date_array[0]
</code></pre><h3>After Change</h3><pre><code class='java'>
    ]
)
def test_segments_args(dataset, date_col, num_of_segments, request):
    df = <a id="change">request.getfixturevalue(</a>dataset<a id="change">)</a>
    date_array = df[date_col]
    knot_idx = get_knot_idx(num_of_obs=df.shape[0], num_of_segments=num_of_segments)
    assert knot_idx[0] == 0
    assert len(knot_idx) == num_of_segments + 1</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/uber/orbit/commit/31e08a1d53d8e40e430a5efc2bb583f57796db9a#diff-48c142f12e4fc800d0e01852d6714e8ccbbd2066d43bca80d57a91aa782b0cfbL10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 77673822</div><div id='project'> Project Name: uber/orbit</div><div id='commit'> Commit Name: 31e08a1d53d8e40e430a5efc2bb583f57796db9a</div><div id='time'> Time: 2022-01-26</div><div id='author'> Author: wangzhishi@users.noreply.github.com</div><div id='file'> File Name: tests/orbit/utils/test_knots.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_segments_args(4)</div><div id='n_method'> N Method Name: test_segments_args(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/orbit/utils/test_knots.py</div><div id='n_file'> N File Name: tests/orbit/utils/test_knots.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 16</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 24</div><BR>