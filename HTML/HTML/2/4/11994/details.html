<html><h3>Pattern ID :11994
</h3><img src='40550746.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if np.any(np.isinf(self.population_energies)):
                intol = False
            else:
                intol = (<a id="change">np.std(</a>self.population_energies<a id="change">)</a> &lt;=
                         self.atol +
                         self.tol * np.abs(<a id="change">np.mean(</a>self.population_energies<a id="change">)</a>))
            if warning_flag or intol:
                break
</code></pre><h3>After Change</h3><pre><code class='java'>
            if self.callback:
                c = self.tol / (self.convergence + _MACHEPS)
                warning_flag = bool(self.callback(self.x, convergence=c))
                <a id="change">if </a>warning_flag:
                    status_message = (&quotcallback function requested stop early&quot
                                      &quot by returning True&quot)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/scipy/scipy/commit/a50ca1edd57935e1006cdb146d6c5bcf231c859f#diff-f4cfd19012a5ad40c462685c5dfaf5d6916b5334f7d19dd114376a01b0c86cc1L743' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40550746</div><div id='project'> Project Name: scipy/scipy</div><div id='commit'> Commit Name: a50ca1edd57935e1006cdb146d6c5bcf231c859f</div><div id='time'> Time: 2020-03-17</div><div id='author'> Author: andyfaff@gmail.com</div><div id='file'> File Name: scipy/optimize/_differentialevolution.py</div><div id='m_class'> M Class Name: DifferentialEvolutionSolver</div><div id='n_method'> N Class Name: DifferentialEvolutionSolver</div><div id='m_method'> M Method Name: solve(1)</div><div id='n_method'> N Method Name: solve(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: scipy/optimize/_differentialevolution.py</div><div id='n_file'> N File Name: scipy/optimize/_differentialevolution.py</div><div id='m_start'> M Start Line: 743</div><div id='m_end'> M End Line: 784</div><div id='n_start'> N Start Line: 771</div><div id='n_end'> N End Line: 779</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        numpy_metadata: Dict[str, "MetadataType"] = {
            "shape": tuple(arr.shape),
            "dtype": DType(arr.dtype.type),
            "mean": <a id="change">np.mean(</a>arr<a id="change">)</a>.item(),
            "std": <a id="change">np.std(</a>arr<a id="change">)</a>.item(),
            "min": min_val,
            "max": max_val,
        }</code></pre><h3>After Change</h3><pre><code class='java'>
            The extracted metadata as a dictionary.
        
        base_metadata = super().extract_metadata(arr)
        <a id="change">if </a>np.issubdtype(arr.dtype, np.number):
            return {**base_metadata, **self.extract_numeric_metadata(arr)}
        elif np.issubdtype(arr.dtype, np.unicode_) or np.issubdtype(
            arr.dtype, np.object_</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/343bd21c1db69411eb4081c00db792a90f308c95#diff-2853d5dc4ccae5343f72d2c4016d0f1fe4e965547bffd924f01d222f8eaccf94L120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40550745</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 343bd21c1db69411eb4081c00db792a90f308c95</div><div id='time'> Time: 2023-03-09</div><div id='author'> Author: 34200873+safoinme@users.noreply.github.com</div><div id='file'> File Name: src/zenml/materializers/numpy_materializer.py</div><div id='m_class'> M Class Name: NumpyMaterializer</div><div id='n_method'> N Class Name: NumpyMaterializer</div><div id='m_method'> M Method Name: extract_metadata(2)</div><div id='n_method'> N Method Name: extract_metadata(2)</div><div id='m_parent_class'> M Parent Class: BaseMaterializer</div><div id='n_parent_class'> N Parent Class: BaseMaterializer</div><div id='m_file'> M File Name: src/zenml/materializers/numpy_materializer.py</div><div id='n_file'> N File Name: src/zenml/materializers/numpy_materializer.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 148</div><div id='n_start'> N Start Line: 189</div><div id='n_end'> N End Line: 196</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        data_params.t_start = np.min(df[&quotds&quot].iloc[:split_idx])
        data_params.t_scale = np.max(df[&quotds&quot].iloc[:split_idx]) - data_params.t_start
        if &quoty&quot in df:
            data_params.y_shift = <a id="change">np.mean(</a>df[&quoty&quot].iloc[:split_idx].values<a id="change">)</a> if normalize_y else 0.0
            data_params.y_scale = <a id="change">np.std(</a>df[&quoty&quot].iloc[:split_idx].values<a id="change">)</a> if normalize_y else 1.0

    &#47&#47 Future TODO: extra regressors
    </code></pre><h3>After Change</h3><pre><code class='java'>
        data_params: AttrDict of scaling values (t_start, t_scale, [y_shift, y_scale])
    

    <a id="change">if </a>df[&quotds&quot].dtype == np.int64:
        df.loc[:, &quotds&quot] = df.loc[:, &quotds&quot].astype(str)
    df.loc[:, &quotds&quot] = pd.to_datetime(df.loc[:, &quotds&quot])
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/1192f2f451030b40c2b8561aa0ffd602479e2852#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L6' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40550750</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 1192f2f451030b40c2b8561aa0ffd602479e2852</div><div id='time'> Time: 2020-06-05</div><div id='author'> Author: oskar.triebe@merantix.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: init_data_params(4)</div><div id='n_method'> N Method Name: init_data_params(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 20</div><div id='n_end'> N End Line: 44</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            q_losses, policy_loss, entropy_loss, alpha = self.agent.update(data_batch)
            self.logger.log_var("loss/q_min",np.min(q_losses),ite)
            self.logger.log_var("loss/q_max",np.max(q_losses),ite)
            self.logger.log_var("loss/q_mean",<a id="change">np.mean(</a>q_losses<a id="change">)</a>,ite)
            self.logger.log_var("loss/q_std",<a id="change">np.std(</a>q_losses<a id="change">)</a>,ite)
            self.logger.log_var("loss/policy",policy_loss,ite)
            self.logger.log_var("loss/entropy",entropy_loss,ite)
            self.logger.log_var("others/entropy_alpha",alpha,ite)</code></pre><h3>After Change</h3><pre><code class='java'>
            duration = iteration_end_time - iteration_start_time
            durations.append(duration)
            
            <a id="change">if </a>ite % self.log_interval == 0:
                for loss_name in loss_dict:
                    self.logger.log_var(loss_name, loss_dict[loss_name], ite)
            if ite % self.test_interval == 0:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/x35f/unstable_baselines/commit/29d21b411c02aa5529540bac557cbb9cd79e7f17#diff-fe98381d15d030f360073153b6a8279153209b72bac992a65d2b18064d47a9fbL39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 40550743</div><div id='project'> Project Name: x35f/unstable_baselines</div><div id='commit'> Commit Name: 29d21b411c02aa5529540bac557cbb9cd79e7f17</div><div id='time'> Time: 2021-03-23</div><div id='author'> Author: 1621322691@qq.com</div><div id='file'> File Name: redq/trainer.py</div><div id='m_class'> M Class Name: REDQTrainer</div><div id='n_method'> N Class Name: REDQTrainer</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: BaseTrainer</div><div id='n_parent_class'> N Parent Class: BaseTrainer</div><div id='m_file'> M File Name: redq/trainer.py</div><div id='n_file'> N File Name: redq/trainer.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 91</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 87</div><BR>