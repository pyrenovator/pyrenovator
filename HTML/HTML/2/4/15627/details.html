<html><h3>Pattern ID :15627
</h3><img src='52871712.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    scripted = torch.jit.script(torchaudio_module)

    fake_input = torch.randn(1, 16000)
    fake_transcription<a id="change"> = </a><a id="change">module.predict(</a>fake_input<a id="change">)</a>
    torchaudio_transcription = torchaudio_module.predict(fake_input)
    scripted_transcription = scripted.predict(fake_input)

    assert fake_transcription[0] == torchaudio_transcription[0]</code></pre><h3>After Change</h3><pre><code class='java'>
    scripted = torch.jit.script(torchaudio_module)

    fake_input = torch.randn(1, 16000)
    fake_transcription<a id="change"> = </a><a id="change">wav2vec_base.predict(</a>fake_input<a id="change">)</a>
    torchaudio_transcription = torchaudio_module.predict(fake_input)
    scripted_transcription = scripted.predict(fake_input)

    assert fake_transcription[0] == torchaudio_transcription[0]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/ecc91081698b5e931883286eb39f1e022a3639e6#diff-c2409382cc211a826b3ad47a452dcdcb4cffd107a4347f2430e0cc4f1bf3f6e5L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871712</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: ecc91081698b5e931883286eb39f1e022a3639e6</div><div id='time'> Time: 2022-05-10</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_script_module(1)</div><div id='n_method'> N Method Name: test_script_module(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/huggingface/test_module_huggingface.py</div><div id='n_file'> N File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_start'> M Start Line: 59</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 74</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    samples = data.raw.iloc[0:22]

    &#47&#47 Test single and bulk non probabilistic predictions
    single_prediction_tf<a id="change"> = </a><a id="change">model_tf_adult.predict(</a>single_sample<a id="change">)</a>
    expected_shape = tuple((1, 1))
    assert single_prediction_tf.shape == expected_shape

    predictions_tf = model_tf_adult.predict(samples)</code></pre><h3>After Change</h3><pre><code class='java'>
    samples = data.df.iloc[0:22]

    &#47&#47 Test single and bulk non-probabilistic predictions
    single_prediction_tf<a id="change"> = </a><a id="change">model.predict(</a>single_sample<a id="change">)</a>
    expected_shape = tuple((1, 1))
    assert single_prediction_tf.shape == expected_shape

    predictions_tf = model.predict(samples)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/indyfree/carla/commit/628db4a325b8b99bdb5b83ddadcb2f2540b98faf#diff-e2ddb6272c52e4f93cefd0738cf2a57e4eaf0f83f1b870a98746c9b79ceba678L63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871686</div><div id='project'> Project Name: indyfree/carla</div><div id='commit'> Commit Name: 628db4a325b8b99bdb5b83ddadcb2f2540b98faf</div><div id='time'> Time: 2022-03-17</div><div id='author'> Author: johanheuvel5@gmail.com</div><div id='file'> File Name: test/test_mlmodel_train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_predictions_tf(2)</div><div id='n_method'> N Method Name: test_predictions_tf(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/test_mlmodel_train.py</div><div id='n_file'> N File Name: test/test_mlmodel_train.py</div><div id='m_start'> M Start Line: 67</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 67</div><div id='n_end'> N End Line: 86</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    scripted = torch.jit.script(torchaudio_module)

    fake_input = torch.randn(1, 16000)
    fake_transcription<a id="change"> = </a><a id="change">module.predict(</a>fake_input<a id="change">)</a>
    torchaudio_transcription = scripted.predict(fake_input)

    assert fake_transcription[0] == torchaudio_transcription[0]
</code></pre><h3>After Change</h3><pre><code class='java'>
    scripted = torch.jit.script(torchaudio_module)

    fake_input = torch.randn(1, 16000)
    fake_transcription<a id="change"> = </a><a id="change">wav2vec_base.predict(</a>fake_input<a id="change">)</a>
    torchaudio_transcription = scripted.predict(fake_input)

    assert fake_transcription[0] == torchaudio_transcription[0]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/ecc91081698b5e931883286eb39f1e022a3639e6#diff-c2409382cc211a826b3ad47a452dcdcb4cffd107a4347f2430e0cc4f1bf3f6e5L76' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871685</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: ecc91081698b5e931883286eb39f1e022a3639e6</div><div id='time'> Time: 2022-05-10</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_quantized_script_module(1)</div><div id='n_method'> N Method Name: test_quantized_script_module(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/huggingface/test_module_huggingface.py</div><div id='n_file'> N File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        audio, sr = torchaudio.load(sample_audio)
        assert sr == 16000

        output<a id="change"> = </a><a id="change">module.predict(</a>audio<a id="change">)</a>
        expected = "THE WORLD NEEDS OPPORTUNITIES FOR NEW LEADERS AND NEW IDEAS"
        assert output[0].strip() == expected
    except HTTPError:
        return</code></pre><h3>After Change</h3><pre><code class='java'>
        audio, sr = torchaudio.load(sample_audio)
        assert sr == 16000

        output<a id="change"> = </a><a id="change">wav2vec_base.predict(</a>audio<a id="change">)</a>
        expected = "THE WORLD NEEDS OPPORTUNITIES FOR NEW LEADERS AND NEW IDEAS"
        assert output[0].strip() == expected
    except HTTPError:
        return</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/ecc91081698b5e931883286eb39f1e022a3639e6#diff-c2409382cc211a826b3ad47a452dcdcb4cffd107a4347f2430e0cc4f1bf3f6e5L43' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871683</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: ecc91081698b5e931883286eb39f1e022a3639e6</div><div id='time'> Time: 2022-05-10</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_expected_prediction_from_pretrained_model(2)</div><div id='n_method'> N Method Name: test_expected_prediction_from_pretrained_model(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/huggingface/test_module_huggingface.py</div><div id='n_file'> N File Name: tests/huggingface/test_module_huggingface.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 59</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    fake_input = torch.randn(1, 16000)
    fake_transcription = module.predict(fake_input)
    torchaudio_transcription<a id="change"> = </a><a id="change">torchaudio_module.predict(</a>fake_input<a id="change">)</a>

    assert fake_transcription[0] == torchaudio_transcription[0]
</code></pre><h3>After Change</h3><pre><code class='java'>

    fake_input = torch.randn(1, 16000)
    fake_transcription = module.predict(fake_input)
    torchaudio_transcription<a id="change"> = </a><a id="change">scripted.predict(</a>fake_input<a id="change">)</a>

    assert fake_transcription[0] == torchaudio_transcription[0]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/scart97/thunder-speech/commit/ea748d0ef324cf5c008b70d27d9a82eebef5b595#diff-95cc988d62693f49dfd6c15e3bdf7bd944ad2cff9e52029f412991efc7c3b91cL83' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871678</div><div id='project'> Project Name: scart97/thunder-speech</div><div id='commit'> Commit Name: ea748d0ef324cf5c008b70d27d9a82eebef5b595</div><div id='time'> Time: 2021-11-30</div><div id='author'> Author: scart.lucas@gmail.com</div><div id='file'> File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_quantized_script_module(0)</div><div id='n_method'> N Method Name: test_quantized_script_module(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/wav2vec/test_module_w2v.py</div><div id='n_file'> N File Name: tests/wav2vec/test_module_w2v.py</div><div id='m_start'> M Start Line: 87</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 87</div><div id='n_end'> N End Line: 93</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                "No estimator is trained. Please run fit with enough budget.")
            return None
        X_test = self._preprocess(X_test)
        y_pred<a id="change"> = </a><a id="change">self._trained_estimator.predict(</a>X_test<a id="change">)</a>
        if y_pred.ndim &gt; 1 and isinstance(y_pred, np.ndarray):
            y_pred = y_pred.flatten()
        if self._label_transformer:
            return self._label_transformer.inverse_transform(pd.Series(</code></pre><h3>After Change</h3><pre><code class='java'>
                "No estimator is trained. Please run fit with enough budget.")
            return None
        X_test = self._preprocess(X_test)
        y_pred<a id="change"> = </a><a id="change">estimator.predict(</a>X_test<a id="change">)</a>
        if y_pred.ndim &gt; 1 and isinstance(y_pred, np.ndarray):
            y_pred = y_pred.flatten()
        if self._label_transformer:
            return self._label_transformer.inverse_transform(pd.Series(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/flaml/commit/e46573a01d077b999f669f072ed41a40ac76c37b#diff-47aff7bcc3e528c362ea162261b640e1e276e2bce981dfafc6cce49d3d81e324L383' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 52871691</div><div id='project'> Project Name: microsoft/flaml</div><div id='commit'> Commit Name: e46573a01d077b999f669f072ed41a40ac76c37b</div><div id='time'> Time: 2021-09-04</div><div id='author'> Author: wang.chi@microsoft.com</div><div id='file'> File Name: flaml/automl.py</div><div id='m_class'> M Class Name: AutoML</div><div id='n_method'> N Class Name: AutoML</div><div id='m_method'> M Method Name: predict(2)</div><div id='n_method'> N Method Name: predict(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: flaml/automl.py</div><div id='n_file'> N File Name: flaml/automl.py</div><div id='m_start'> M Start Line: 397</div><div id='m_end'> M End Line: 402</div><div id='n_start'> N Start Line: 391</div><div id='n_end'> N End Line: 397</div><BR>