<html><h3>Pattern ID :2059
</h3><img src='8949704.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                print()
                return

            <a id="change">print("evaluating dataset"</a>, ds.name<a id="change">)</a>
            res = dataset.evaluate_detections(
                predictor_field,
                gt_field="detections",
                method="open-images",</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 please see ../monkey.py for problems I encountered when cloning datasets
    &#47&#47 simultaneously with various multiprocesses/batch jobs
    print("cloning dataset", p.name, "to", tmp_name)
    dataset<a id="change"> = </a><a id="change">dataset.clone(</a>tmp_name<a id="change">)</a>
    dataset.persistent = True
    &#47&#47 fo.core.odm.database.sync_database() &#47&#47 this would&quotve helped? not sure..

    print("instantiating Detectron2 predictor")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/interdigitalinc/compressai-vision/commit/40d13da41c7e6a9b6cf5b4e123eb9f3c1705a0b6#diff-cd73122a5c472fd773694ca5dbcc55b8a72dd28d635095fa3a7e77eee5f61f4aL78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8949704</div><div id='project'> Project Name: interdigitalinc/compressai-vision</div><div id='commit'> Commit Name: 40d13da41c7e6a9b6cf5b4e123eb9f3c1705a0b6</div><div id='time'> Time: 2022-09-19</div><div id='author'> Author: sampsa.riikonen@iki.fi</div><div id='file'> File Name: compressai_vision/cli/detectron2_eval.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: compressai_vision/cli/detectron2_eval.py</div><div id='n_file'> N File Name: compressai_vision/cli/detectron2_eval.py</div><div id='m_start'> M Start Line: 205</div><div id='m_end'> M End Line: 364</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 390</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        distribution = [((partition_book == partition).nonzero()).shape[0] for partition in range(partition_num)]

        <a id="change">print(f"partition distribution: {distribution}"</a><a id="change">)</a>


        local_train_idx = train_idx[:idx_len // partition_num]
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 cache hot data 
        local_partition_books = []
        for partition in range(partition_num):
            local_partition_book<a id="change"> = </a><a id="change">global_partition_book.clone()</a>
            local_partition_book[idx[:cached_nodes]] = partition
            local_partition_books.append(local_partition_book)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quiver-team/torch-quiver/commit/b7796f73cddad702e932561acffe3245eed4ab3d#diff-65c7bd1bcf74cefcc271f5d7dc0f711949e8a4822a725e7af289a9ae99cefe1cL381' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8949705</div><div id='project'> Project Name: quiver-team/torch-quiver</div><div id='commit'> Commit Name: b7796f73cddad702e932561acffe3245eed4ab3d</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: 47676525+AustinCheang@users.noreply.github.com</div><div id='file'> File Name: tests/python/cuda/test_partition_feature.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_random_partition_with_hot_replicate(0)</div><div id='n_method'> N Method Name: test_random_partition_with_hot_replicate(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/python/cuda/test_partition_feature.py</div><div id='n_file'> N File Name: tests/python/cuda/test_partition_feature.py</div><div id='m_start'> M Start Line: 391</div><div id='m_end'> M End Line: 423</div><div id='n_start'> N Start Line: 391</div><div id='n_end'> N End Line: 443</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
		r0 = ws_layer.r.clone()
		tau0 = ws_layer.tau.clone()
		ratio_sign_0 = np.mean(torch.sign(ws_layer.forward_sign).detach().cpu().numpy())
		<a id="change">print(f"ratio exec init: {(ratio_sign_0 + 1)/2 :.3f}"</a><a id="change">)</a>

	dataset = WSDataset(true_time_series.T)
	trainer = nt.trainers.RegressionTrainer(
		model,</code></pre><h3>After Change</h3><pre><code class='java'>

	with torch.no_grad():
		W0 = ws_layer.forward_weights.clone().detach().cpu().numpy()
		sign0<a id="change"> = </a><a id="change">ws_layer.forward_sign.clone()</a>.detach().cpu().numpy()
		mu0 = ws_layer.mu.clone()
		r0 = ws_layer.r.clone()
		tau0 = ws_layer.tau.clone()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neurotorch/neurotorch/commit/a19976d80f57c54d66a936925f12b6f25f452bb8#diff-e31dfb803054ad8b9ad37669aa0e99a39f2b2c4ab68968f270d1eaa215976e96L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8949706</div><div id='project'> Project Name: neurotorch/neurotorch</div><div id='commit'> Commit Name: a19976d80f57c54d66a936925f12b6f25f452bb8</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: 50332514+JeremieGince@users.noreply.github.com</div><div id='file'> File Name: tutorials/time_series_forecasting_wilson_cowan/main_dale.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_with_params(20)</div><div id='n_method'> N Method Name: train_with_params(20)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tutorials/time_series_forecasting_wilson_cowan/main_dale.py</div><div id='n_file'> N File Name: tutorials/time_series_forecasting_wilson_cowan/main_dale.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 152</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 168</div><BR>