<html><h3>Pattern ID :3643
</h3><img src='13750345.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        bboxes = ann[&quotbboxes&quot]
        labels = ann[&quotlabels&quot]
        if &quotbboxes_ignore&quot in ann:
            ignore<a id="change"> = </a>np.concatenate([
                np.zeros(bboxes.shape[0], dtype=np.bool),
                <a id="change">np.ones(</a>ann[&quotbboxes_ignore&quot].shape[0]<a id="change">, dtype=np.bool)</a>
            ])
            gt_ignore.append(ignore)
            bboxes = np.vstack([bboxes, ann[&quotbboxes_ignore&quot]])
            labels = np.concatenate([labels, ann[&quotlabels_ignore&quot]])</code></pre><h3>After Change</h3><pre><code class='java'>

def voc_eval(result_file, dataset, iou_thr=0.5, nproc=4):
    det_results = mmcv.load(result_file)
    annotations = <a id="change">[dataset.get_ann_info(i) for i in range(len(dataset))]</a>
    if hasattr(dataset, &quotyear&quot) and dataset.year == 2007:
        dataset_name = &quotvoc07&quot
    else:
        dataset_name = dataset.CLASSES</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/47bab544eca31aaca7e99a402568b8c29292f74b#diff-89b7009442ad432d0663b11155599a15d7212fc18a72477d4b5fca2d91ae4496L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13750345</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: 47bab544eca31aaca7e99a402568b8c29292f74b</div><div id='time'> Time: 2019-12-31</div><div id='author'> Author: chenkaidev@gmail.com</div><div id='file'> File Name: tools/voc_eval.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: voc_eval(4)</div><div id='n_method'> N Method Name: voc_eval(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tools/voc_eval.py</div><div id='n_file'> N File Name: tools/voc_eval.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 9</div><div id='n_end'> N End Line: 11</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        else:
            interaction = self.dataset[self.pr:self.pr + self.step]
            inter_num = len(interaction)
            pos_len_list<a id="change"> = </a><a id="change">np.ones(</a>inter_num<a id="change">, dtype=np.int64)</a>
            user_len_list = np.full(inter_num, self.dataset.item_num)
            interaction.set_additional_info(pos_len_list, user_len_list)
            scores_row = torch.arange(inter_num).repeat(2)
            padding_idx = torch.zeros(inter_num, dtype=torch.int64)</code></pre><h3>After Change</h3><pre><code class='java'>
            positive_i = []
            for idx, uid in enumerate(uid_list):
                uid = uid.item()
                positive_u += <a id="change">[idx for i in range(self.uid2items_num[uid])]</a>
                positive_i += list(self.uid2positive_item[uid])
               
            positive_u = torch.from_numpy(np.array(positive_u))
            positive_i = torch.from_numpy(np.array(positive_i))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/a3596a230c1b34f77b50d21460d63996206cd55a#diff-c052dea1f8aad195c52d1137acfdac3f1b025dd939e309f5841d956bab717492L223' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13750344</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: a3596a230c1b34f77b50d21460d63996206cd55a</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: 2017202006@ruc.edu.cn</div><div id='file'> File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_class'> M Class Name: FullSortEvalDataLoader</div><div id='n_method'> N Class Name: FullSortEvalDataLoader</div><div id='m_method'> M Method Name: _next_batch_data(1)</div><div id='n_method'> N Method Name: _next_batch_data(1)</div><div id='m_parent_class'> M Parent Class: AbstractDataLoader</div><div id='n_parent_class'> N Parent Class: AbstractDataLoader</div><div id='m_file'> M File Name: recbole/data/dataloader/general_dataloader.py</div><div id='n_file'> N File Name: recbole/data/dataloader/general_dataloader.py</div><div id='m_start'> M Start Line: 225</div><div id='m_end'> M End Line: 256</div><div id='n_start'> N Start Line: 232</div><div id='n_end'> N End Line: 256</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            bboxes = ann[&quotbboxes&quot]
            labels = ann[&quotlabels&quot]
            if &quotbboxes_ignore&quot in ann:
                ignore<a id="change"> = </a>np.concatenate([
                    np.zeros(bboxes.shape[0], dtype=np.bool),
                    <a id="change">np.ones(</a>ann[&quotbboxes_ignore&quot].shape[0]<a id="change">, dtype=np.bool)</a>
                ])
                gt_ignore.append(ignore)
                bboxes = np.vstack([bboxes, ann[&quotbboxes_ignore&quot]])
                labels = np.concatenate([labels, ann[&quotlabels_ignore&quot]])</code></pre><h3>After Change</h3><pre><code class='java'>
class DistEvalmAPHook(DistEvalHook):

    def evaluate(self, runner, results):
        annotations = <a id="change">[
            self.dataset.get_ann_info(i) for i in range(len(self.dataset))
        ]</a>
        &#47&#47 If the dataset is VOC2007, then use 11 points mAP evaluation.
        if hasattr(self.dataset, &quotyear&quot) and self.dataset.year == 2007:
            ds_name = &quotvoc07&quot
        else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wxinlong/solo/commit/47bab544eca31aaca7e99a402568b8c29292f74b#diff-d90681f788d834177ac6503ca5413a1b823f32899678a9abeb06734aafa3d547L78' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13750347</div><div id='project'> Project Name: wxinlong/solo</div><div id='commit'> Commit Name: 47bab544eca31aaca7e99a402568b8c29292f74b</div><div id='time'> Time: 2019-12-31</div><div id='author'> Author: chenkaidev@gmail.com</div><div id='file'> File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='m_class'> M Class Name: DistEvalmAPHook</div><div id='n_method'> N Class Name: DistEvalmAPHook</div><div id='m_method'> M Method Name: evaluate(3)</div><div id='n_method'> N Method Name: evaluate(3)</div><div id='m_parent_class'> M Parent Class: DistEvalHook</div><div id='n_parent_class'> N Parent Class: DistEvalHook</div><div id='m_file'> M File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='n_file'> N File Name: mmdet/core/evaluation/eval_hooks.py</div><div id='m_start'> M Start Line: 79</div><div id='m_end'> M End Line: 106</div><div id='n_start'> N Start Line: 79</div><div id='n_end'> N End Line: 81</div><BR>