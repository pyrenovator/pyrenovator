<html><h3>Pattern ID :30463
</h3><img src='90105896.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred = pred.loc[:, ["user_id", "item_id"]].sort_values("user_id").reset_index(drop=True)
    res<a id="change"> = </a><a id="change">pd.DataFrame({</a>"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]<a id="change">}</a><a id="change">)</a>
    pd.testing.assert_frame_equal(pred, res)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/9405dd1ebbc8691fd238984b6d1862fcc0f86c3e#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90105896</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: 9405dd1ebbc8691fd238984b6d1862fcc0f86c3e</div><div id='time'> Time: 2020-09-15</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    assert isinstance(doc, Doc)

    assert len(ents) == 3
    <a id="change">assert </a>all([isinstance(e, Span) for e in ents])

    assert len(sents) == 2
    assert all([isinstance(s, Span) for s in sents])</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 entities are [Bill Gates, Microsoft, USA]
    &#47&#47 etypes are [&quotPERSON&quot, &quotORG&quot, &quotGPE&quot]
    doc = model_entities(text)
    lines = <a id="change">[]</a>
    for e in doc.ents:
        lines.append({
            &quotentity&quot: e.text,
            &quotentity_type&quot: e.label_,
            &quotstart_char&quot: e.start_char,
            &quotend_char&quot: e.end_char
        })
    df_entities = <a id="change">pd.DataFrame(</a>lines<a id="change">, columns=[&quotentity&quot, &quotentity_type&quot, &quotstart_char&quot, &quotend_char&quot])</a>
    sents = list(doc.sents)
    etypes<a id="change"> = </a>df_entities.entity_type
    etype_symbols = {&quotPERSON&quot: (&quot&lt;&lt; &quot, &quot &gt;&gt;&quot),
                     &quotORG&quot: (&quot[[ &quot, &quot ]]&quot),
                     &quotGPE&quot: (&quot{{ &quot, &quot }}&quot)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/f4189ead6e06c51fbcc4406b6662f1716a3ae8ac#diff-44410a9ae1a5944ed6b828e01b9f27b008da17270adafbc89c659cd099863604L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90105894</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: f4189ead6e06c51fbcc4406b6662f1716a3ae8ac</div><div id='time'> Time: 2020-05-14</div><div id='author'> Author: francesco.casalegno@gmail.com</div><div id='file'> File Name: tests/test_mining/test_relation.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_annotate(1)</div><div id='n_method'> N Method Name: test_annotate(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_mining/test_relation.py</div><div id='n_file'> N File Name: tests/test_mining/test_relation.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 55</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
def test_finishes(df):
    stack = Stack([KNN()], n_folds=2, budget=1)
    stack.fit_predict(df, 1)
    <a id="change">assert </a>True
</code></pre><h3>After Change</h3><pre><code class='java'>
    stack = Stack([KNN()], n_folds=2, budget=1, seed=1)
    pred = stack.fit_predict(df, 1).toPandas()
    pred = pred.loc[:, ["user_id", "item_id"]].sort_values("user_id").reset_index(drop=True)
    res<a id="change"> = </a><a id="change">pd.DataFrame({</a>"user_id": [1, 2, 3, 4], "item_id": [7, 5, 4, 7]<a id="change">}</a><a id="change">)</a>
    pd.testing.assert_frame_equal(pred, res)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sb-ai-lab/replay/commit/af83229f4f08642d7822f0d7395dd27ccba9aaf2#diff-6143baff51431286f0a454d17f684bc76da5fc7a8fe0f3ae0c0df13d136b32c4L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90105895</div><div id='project'> Project Name: sb-ai-lab/replay</div><div id='commit'> Commit Name: af83229f4f08642d7822f0d7395dd27ccba9aaf2</div><div id='time'> Time: 2020-10-13</div><div id='author'> Author: yytamm@sberbank.ru</div><div id='file'> File Name: tests/models/test_stack.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_finishes(1)</div><div id='n_method'> N Method Name: test_finishes(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/models/test_stack.py</div><div id='n_file'> N File Name: tests/models/test_stack.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 27</div><BR>