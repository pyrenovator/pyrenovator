<html><h3>Pattern ID :20786
</h3><img src='66973343.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def main() -&gt; None:
    environment_map<a id="change"> = </a><a id="change">{
        </a>"aws": determined.deploy.aws.cli.deploy_aws,
        "gcp": determined.deploy.gcp.cli.deploy_gcp,
        "local": determined.deploy.local.cli.deploy_local<a id="change">,
    }</a>

    parser = argparse.ArgumentParser(
        description="Manage Determined deployments.",
        formatter_class=argparse.ArgumentDefaultsHelpFormatter,</code></pre><h3>After Change</h3><pre><code class='java'>
    parsed_args = parser.parse_args()

    v = vars(parsed_args)
    <a id="change">if </a>not v.get("func"):
        parser.print_usage()
        <a id="change">parser.exit(</a>2, "{}: no subcommand specified\n".format(parser.prog)<a id="change">)</a>

    warnings.warn(
        "`det-deploy` executable is deprecated, please use `det deploy` instead.", FutureWarning
    )</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/dc623d0b3e6e8d9fed0a0a35708dd7a74e6a7d67#diff-4db305b5dd8562fb73555b0205053968d72a0a8dda10d7dceea3472832259ff6L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 66973343</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: dc623d0b3e6e8d9fed0a0a35708dd7a74e6a7d67</div><div id='time'> Time: 2021-03-25</div><div id='author'> Author: ilia@determined.ai</div><div id='file'> File Name: harness/determined/deploy/cli.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/deploy/cli.py</div><div id='n_file'> N File Name: harness/determined/deploy/cli.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 39</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Set of all the set visualization types option
    vis.vis_types = {arg for arg in vis_types if args["vis_{}".format(arg)]}

    vis_args<a id="change"> = </a><a id="change">{
        </a>"attention": "transformer",
        "grid": "vis_grid",
        "num": "vis_num",
        "rich_num": "vis_rich_num",
        "section_size": "vis_section_size",
        "intrp_density": "interpolation_density",
        "intrp_per_component": "interpolation_per_component",
        "alpha": "blending_alpha"<a id="change">
    }</a>
    for arg, cmd_arg in vis_args.items():
        cset(vis, arg, args[cmd_arg])

    &#47&#47 Networks architecture</code></pre><h3>After Change</h3><pre><code class='java'>
        cset(cG.args, field, args[field])
    cset([cG.args, train], "merge", args.kgan)

    <a id="change">if </a>args.kgan and args.transformer:
        print(misc.bcolored("Error: either have --transformer for GANsformer or --kgan for k-GAN, not both.", "red"))
        <a id="change">exit()</a>

    &#47&#47 Attention
    for arg in ["start_res", "end_res", "ltnt2ltnt", "img2img"]: &#47&#47 , "local_attention"
        cset(cG.args, arg, args["g_{}".format(arg)])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dorarad/gansformer/commit/6ec6f08ee889222390c71856e4d8796c75e770ca#diff-224a791ad493056db2d49f34046e25a3ddf26e8b3509c86e3529d589a71df9e5L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 66973348</div><div id='project'> Project Name: dorarad/gansformer</div><div id='commit'> Commit Name: 6ec6f08ee889222390c71856e4d8796c75e770ca</div><div id='time'> Time: 2021-03-13</div><div id='author'> Author: dorarad@stanford.edu</div><div id='file'> File Name: run_network.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run(0)</div><div id='n_method'> N Method Name: run(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: run_network.py</div><div id='n_file'> N File Name: run_network.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 249</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return {&quotloss&quot:loss, &quoty&quot:y, &quoty_pred&quot:y_pred}
    
    def validation_epoch_end(self, outputs):
        scores<a id="change"> = </a><a id="change">[]</a>
        for i, out in enumerate(outputs):
            y, y_pred = out[&quoty&quot], out[&quoty_pred&quot]
            
            if i == 0:</code></pre><h3>After Change</h3><pre><code class='java'>
                "classification_report",
                str(classification_report(all_y, all_ypred)))

        <a id="change">if </a>self.current_epoch &gt;= self.pseudolabelling_start:
            if self.pseudolabel_mode == &quotper_epoch&quot:
                self.pseudolabelling_update_outputs()
                self.pseudolabelling_update_loss()
            elif self.pseudolabel_mode == &quotper_batch&quot:
                self.pseudolabelling_update_per_batch()
            else:
                <a id="change">sys.exit(</a>f&quotPossible modes are "per_batch" and "per_epoch". &quot
                         f&quotYou assigned {self.pseudolabel_mode}&quot<a id="change">)</a>

    def pseudolabelling_update_loss(self):
        print(&quotCalculating loss for pseudo-labelling&quot)
        optimizer = self.optimizers()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/wimlds-trojmiasto/detect-waste/commit/b5e290c469264270c08deb65d5ee34f06c7e546b#diff-d327aae99adbef58e12cfe228e88e99a2870269cee29235efa8f92f1df3a1ce2L62' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 66973345</div><div id='project'> Project Name: wimlds-trojmiasto/detect-waste</div><div id='commit'> Commit Name: b5e290c469264270c08deb65d5ee34f06c7e546b</div><div id='time'> Time: 2021-02-16</div><div id='author'> Author: majsylw@onet.eu</div><div id='file'> File Name: classifier/models/efficientnet.py</div><div id='m_class'> M Class Name: LitterClassification</div><div id='n_method'> N Class Name: LitterClassification</div><div id='m_method'> M Method Name: validation_epoch_end(2)</div><div id='n_method'> N Method Name: validation_epoch_end(2)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: classifier/models/efficientnet.py</div><div id='n_file'> N File Name: classifier/models/efficientnet.py</div><div id='m_start'> M Start Line: 63</div><div id='m_end'> M End Line: 88</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 104</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
  
  if len(audioFiles) &gt; 1:
    outfile = f&quot{audio_super}{dir}/{dir}.wav&quot
    data<a id="change">= </a><a id="change">[]</a>
    for infile in audioFiles:
        w = wave.open(infile, &quotrb&quot)
        data.append( [w.getparams(), w.readframes(w.getnframes())] )
        w.close()</code></pre><h3>After Change</h3><pre><code class='java'>
  if len(audio_files) == 1:
    os.rename(audio_files[0], str(os.path.dirname(audio_files[0]))+ &quot/&quot + str(os.path.basename(os.path.dirname(audio_files[0]))) + audio_files[0][-4:])
    
  <a id="change">if </a>len(audio_files) == 0:
    print(&quotMissing audio in your audio folder.&quot)
    <a id="change">sys.exit()</a>

&#47&#47 converts video to frames; outpouts in 0000x.png to framesOutPath location
def vid2frames(vid_path, frames_out_path):
    vidcap = cv2.VideoCapture(vid_path)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/johngettings/lihq/commit/5c02df6c1bfeb357a3c7a3c073a349eb534a983f#diff-1500446ac71873acb52abfc30bf317cfba356a29f0eab48f2446d3c4c5dc529eL23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 66973347</div><div id='project'> Project Name: johngettings/lihq</div><div id='commit'> Commit Name: 5c02df6c1bfeb357a3c7a3c073a349eb534a983f</div><div id='time'> Time: 2022-05-24</div><div id='author'> Author: johngettingsai@gmail.com</div><div id='file'> File Name: procedures/av_scripts.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: combine_audiofiles(2)</div><div id='n_method'> N Method Name: combine_audiofiles(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: procedures/av_scripts.py</div><div id='n_file'> N File Name: procedures/av_scripts.py</div><div id='m_start'> M Start Line: 24</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 47</div><BR>