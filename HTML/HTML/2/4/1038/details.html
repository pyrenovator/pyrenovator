<html><h3>Pattern ID :1038
</h3><img src='5105689.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            start, end = source_data[&quotstart&quot], source_data[&quotend&quot]
            wav_path = os.path.join(self.wav_root, source_data[&quotpath&quot])
            wave, sr = sf.read(wav_path)
            wave = <a id="change">np.array(</a>wave<a id="change">)</a>[start: end]
            wave = wave[None]
            mixture = mixture + wave
        
            if sources is None:
                sources = wave
            else:
                sources = np.concatenate([sources, wave], axis=0)
            
            segment_IDs.append("{}_{}-{}".format(source_data[&quotutterance-ID&quot], start, end))
        
        mixture = torch.Tensor(mixture).float()
        sources<a id="change"> = </a>torch.Tensor(sources).float()
        
        return mixture, sources, segment_IDs
        </code></pre><h3>After Change</h3><pre><code class='java'>

        for _source in __sources__:
            source, sr = sf.read(sources_data[_source][&quotpath&quot])
            source<a id="change"> = </a>source[<a id="change">start_idx: end_idx</a>].mean(axis=1)
            print(source.shape)
            sources.append(sources)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/550c9be6c6db5a89b57716fc49f1c95f913c05ad#diff-d91bb2087e9bf93c574ddf8c34a3faf5faee59ef67590f61a20591c26f4d0ebeL33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5105689</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 550c9be6c6db5a89b57716fc49f1c95f913c05ad</div><div id='time'> Time: 2020-12-29</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/dsd100/common/src/dataset.py</div><div id='m_class'> M Class Name: WaveDataset</div><div id='n_method'> N Class Name: WaveDataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: DSD100Dataset</div><div id='n_parent_class'> N Parent Class: DSD100Dataset</div><div id='m_file'> M File Name: egs/dsd100/common/src/dataset.py</div><div id='n_file'> N File Name: egs/dsd100/common/src/dataset.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 50</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def _validate(modelOutput, labels, topn=1):
    modelOutput=list(np.exp(modelOutput.cpu().numpy())[:,-1])&#47&#47for covid19
    pos_count<a id="change">=</a>np.sum(<a id="change">np.array(</a>modelOutput<a id="change">)</a>&gt;0.5)
    modelOutput.sort()
    averageEnergies = np.mean(modelOutput[-topn:])
    iscorrect = labels.cpu().numpy()==(averageEnergies&gt;0.5)</code></pre><h3>After Change</h3><pre><code class='java'>
os.makedirs(args.deepsave,exist_ok=True)

def _validate(modelOutput, labels, length,topn=1):
    modelOutput=list(np.exp(modelOutput.cpu().numpy())[<a id="change">:</a>length,-1])&#47&#47for covid19
    &#47&#47pos_count=np.sum(np.array(modelOutput)&gt;0.5)

    modelOutput.sort()
    averageEnergies = np.mean(modelOutput[-topn:])
    iscorrect = labels.cpu().numpy()==(averageEnergies&gt;0.5)
    pred<a id="change">=</a>(averageEnergies&gt;0.5)
    return averageEnergies,iscorrect,pred

def _validate_cp(modelOutput, labels, length,topn=1):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/chenwwweixiang/opencoviddetector/commit/8909104cb57ef877076c775372e08b8538243526#diff-4b7152d35f251b9704be46c0715cd5cb1588e232f6203362854d1c668e64a7b9L56' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5105690</div><div id='project'> Project Name: chenwwweixiang/opencoviddetector</div><div id='commit'> Commit Name: 8909104cb57ef877076c775372e08b8538243526</div><div id='time'> Time: 2020-04-18</div><div id='author'> Author: chenwx_thu@foxmail.com</div><div id='file'> File Name: testengine.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _validate(4)</div><div id='n_method'> N Method Name: _validate(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: testengine.py</div><div id='n_file'> N File Name: testengine.py</div><div id='m_start'> M Start Line: 57</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if index % 1000 == 0:
            print(f&quotEmbedded {index} with {num_errors} errors&quot)

    final_embeddings<a id="change"> = </a><a id="change">np.array(</a>all_embeddings<a id="change">)</a>
    retrieved_indices = np.array(all_ids)

    return final_embeddings, retrieved_indices
</code></pre><h3>After Change</h3><pre><code class='java'>
            continue

        sentences_text = sentences.iloc[start_ix: end_ix][&quottext&quot].to_list()
        sentences_id<a id="change"> = </a>sentences.iloc[<a id="change">start_ix: end_ix</a>][&quotsentence_id&quot].to_list()

        try:
            preprocessed_sentences = model.preprocess_many(sentences_text)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/bluebrain/search/commit/6eb30c8b3e77791ee4e407dd19d7a5e08fe5e132#diff-6a370a606e89902d9cea7c7edf876b91c643d1c115291d5912b04e3bd88cf446L263' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5105683</div><div id='project'> Project Name: bluebrain/search</div><div id='commit'> Commit Name: 6eb30c8b3e77791ee4e407dd19d7a5e08fe5e132</div><div id='time'> Time: 2020-09-04</div><div id='author'> Author: jankrepl@yahoo.com</div><div id='file'> File Name: src/bbsearch/embedding_models.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_database_embeddings(4)</div><div id='n_method'> N Method Name: compute_database_embeddings(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/bbsearch/embedding_models.py</div><div id='n_file'> N File Name: src/bbsearch/embedding_models.py</div><div id='m_start'> M Start Line: 287</div><div id='m_end'> M End Line: 309</div><div id='n_start'> N Start Line: 433</div><div id='n_end'> N End Line: 494</div><BR>