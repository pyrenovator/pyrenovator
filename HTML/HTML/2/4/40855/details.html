<html><h3>Pattern ID :40855
</h3><img src='115262430.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        This method makes sure that the `Process/thread` is properly finished and its resources properly released
        
        self.logger.debug(&quotwaiting for ready or shutdown signal from runtime&quot)
        if <a id="change">not self.is_shutdown.is_set()</a>:
            try:
                self.logger.debug(f&quotterminate&quot)
                self._terminate()</code></pre><h3>After Change</h3><pre><code class='java'>
        This method makes sure that the `Process/thread` is properly finished and its resources properly released
        
        self.logger.debug(&quotwaiting for ready or shutdown signal from runtime&quot)
        if <a id="change">not</a> <a id="change">self.is_shutdown.is_set()</a> and self.is_started.is_set():
            try:
                self.logger.debug(f&quotterminate&quot)
                self._terminate()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/0f285ae9e1e2130d9820a82455b9bc4600a59025#diff-dd8a4cee222f8b0f11de5b503ea1026ff9a0596fd921268bb2624818613fa2afL164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115262430</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 0f285ae9e1e2130d9820a82455b9bc4600a59025</div><div id='time'> Time: 2022-01-07</div><div id='author'> Author: tobias.jacobowitz@jina.ai</div><div id='file'> File Name: jina/peapods/peas/__init__.py</div><div id='m_class'> M Class Name: BasePea</div><div id='n_method'> N Class Name: BasePea</div><div id='m_method'> M Method Name: close(1)</div><div id='n_method'> N Method Name: close(1)</div><div id='m_parent_class'> M Parent Class: ABC</div><div id='n_parent_class'> N Parent Class: ABC</div><div id='m_file'> M File Name: jina/peapods/peas/__init__.py</div><div id='n_file'> N File Name: jina/peapods/peas/__init__.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 164</div><div id='n_start'> N Start Line: 165</div><div id='n_end'> N End Line: 194</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    async def _wait_for_cancel(self):
        Do NOT override this method when inheriting from :class:`GatewayPod`
        &#47&#47 handle terminate signals
        while <a id="change">not self.is_cancel.is_set()</a>:
            await asyncio.sleep(0.1)

        await self.async_cancel()</code></pre><h3>After Change</h3><pre><code class='java'>
    async def _wait_for_cancel(self):
        Do NOT override this method when inheriting from :class:`GatewayPod`
        &#47&#47 handle terminate signals
        while <a id="change">not</a> <a id="change">self.is_cancel.is_set()</a> and not getattr(
            self.gateway, &quot_should_exit&quot, False
        ):
            await asyncio.sleep(0.1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/de5942f19db46321d09d31ff62d60ac33e7e43d7#diff-bc9dca47fa1e353ab78b91275e744d96603a5af5e9491d148603f84f25445f9eL100' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115262429</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: de5942f19db46321d09d31ff62d60ac33e7e43d7</div><div id='time'> Time: 2022-11-18</div><div id='author'> Author: alaeddine-13@live.fr</div><div id='file'> File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_class'> M Class Name: GatewayRuntime</div><div id='n_method'> N Class Name: GatewayRuntime</div><div id='m_method'> M Method Name: _wait_for_cancel(1)</div><div id='n_method'> N Method Name: _wait_for_cancel(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime</div><div id='m_file'> M File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 104</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    async def _wait_for_cancel(self):
        Do NOT override this method when inheriting from :class:`GatewayPod`
        &#47&#47 handle terminate signals
        while <a id="change">not</a> <a id="change">self.is_cancel.is_set()</a> and not self.gateway.should_exit:
            await asyncio.sleep(0.1)

        await self.async_cancel()</code></pre><h3>After Change</h3><pre><code class='java'>
    async def _wait_for_cancel(self):
        Do NOT override this method when inheriting from :class:`GatewayPod`
        &#47&#47 handle terminate signals
        while <a id="change">not self.is_cancel.is_set()</a>:
            await asyncio.sleep(0.1)

        await self.async_cancel()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jina-ai/jina/commit/63cde2dd18169ed1cbfef3d22802829551124113#diff-bc9dca47fa1e353ab78b91275e744d96603a5af5e9491d148603f84f25445f9eL101' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115262426</div><div id='project'> Project Name: jina-ai/jina</div><div id='commit'> Commit Name: 63cde2dd18169ed1cbfef3d22802829551124113</div><div id='time'> Time: 2022-11-17</div><div id='author'> Author: joan.martinez@jina.ai</div><div id='file'> File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_class'> M Class Name: GatewayRuntime</div><div id='n_method'> N Class Name: GatewayRuntime</div><div id='m_method'> M Method Name: _wait_for_cancel(1)</div><div id='n_method'> N Method Name: _wait_for_cancel(1)</div><div id='m_parent_class'> M Parent Class: AsyncNewLoopRuntime</div><div id='n_parent_class'> N Parent Class: AsyncNewLoopRuntime</div><div id='m_file'> M File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='n_file'> N File Name: jina/serve/runtimes/gateway/__init__.py</div><div id='m_start'> M Start Line: 104</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 103</div><div id='n_end'> N End Line: 103</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 See NOTE [ Data Loader Multiprocessing Shutdown Logic ] for details on the
    &#47&#47 logic of this function.
    while <a id="change">not done_event.is_set()</a>:
        try:
            r = in_queue.get(timeout=MP_STATUS_CHECK_INTERVAL)
        except queue.Empty:</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 See NOTE [ Data Loader Multiprocessing Shutdown Logic ] for details on the
    &#47&#47 logic of this function.
    while <a id="change">not done_event.is_set()</a>:
        &#47&#47 Make sure that we don&quott preserve any object from one iteration
        &#47&#47 to the next
        do_one_step()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/38348362608a47371c65d7fd52db138b4c6a5d65#diff-15a9be38bffe7a2e1f2fc858416b09fd68aaa08fae7ed6036485b6b42e388554L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 115262433</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 38348362608a47371c65d7fd52db138b4c6a5d65</div><div id='time'> Time: 2022-08-18</div><div id='author'> Author: desmaison.alban@gmail.com</div><div id='file'> File Name: torch/utils/data/_utils/pin_memory.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _pin_memory_loop(5)</div><div id='n_method'> N Method Name: _pin_memory_loop(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch/utils/data/_utils/pin_memory.py</div><div id='n_file'> N File Name: torch/utils/data/_utils/pin_memory.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 46</div><div id='n_end'> N End Line: 50</div><BR>