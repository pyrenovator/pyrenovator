<html><h3>Pattern ID :28552
</h3><img src='84408755.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        distribution = [((partition_book == partition).nonzero()).shape[0] for partition in range(partition_num)]

        <a id="change">print(f"partition distribution: {distribution}"</a><a id="change">)</a>


        local_train_idx = train_idx[:idx_len // partition_num]
</code></pre><h3>After Change</h3><pre><code class='java'>
        
        idx_len = train_idx.size(0)
        &#47&#47 random.shuffle(train_idx)
        train_idx<a id="change"> = </a>train_idx[<a id="change">torch.randperm(</a>idx_len<a id="change">)</a>]
        feature = torch.arange(0, csr_topo.node_count, dtype=torch.long)
        feature = feature[idx]
        cached_nodes = int(cache_rate * csr_topo.node_count)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/quiver-team/torch-quiver/commit/b7796f73cddad702e932561acffe3245eed4ab3d#diff-65c7bd1bcf74cefcc271f5d7dc0f711949e8a4822a725e7af289a9ae99cefe1cL391' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408755</div><div id='project'> Project Name: quiver-team/torch-quiver</div><div id='commit'> Commit Name: b7796f73cddad702e932561acffe3245eed4ab3d</div><div id='time'> Time: 2022-03-14</div><div id='author'> Author: 47676525+AustinCheang@users.noreply.github.com</div><div id='file'> File Name: tests/python/cuda/test_partition_feature.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_random_partition_with_hot_replicate(0)</div><div id='n_method'> N Method Name: test_random_partition_with_hot_replicate(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/python/cuda/test_partition_feature.py</div><div id='n_file'> N File Name: tests/python/cuda/test_partition_feature.py</div><div id='m_start'> M Start Line: 391</div><div id='m_end'> M End Line: 423</div><div id='n_start'> N Start Line: 391</div><div id='n_end'> N End Line: 443</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    pyro.set_rng_seed(args.seed)

    x, y = get_tf_data()
    <a id="change">print("xy"</a>, x.shape, y.shape<a id="change">)</a>


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Design sequences")</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Choose an initial batch.
    complete_size = len(complete_experiment["response"])
    complete_ids<a id="change"> = </a><a id="change">torch.randperm(</a>complete_size<a id="change">)</a>[: args.sequences_per_batch]
    experiment = {k: v[complete_ids] for k, v in complete_experiment.items()}

    &#47&#47 Perform first active learning step.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pyro-ppl/pyroed/commit/30d37de98d72df2a585989fab05eb08b2b071381#diff-e295ae9662512d4db3318e3eb1dd36cc5aca6b2776a8315175a8eb524490d8a5L79' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408754</div><div id='project'> Project Name: pyro-ppl/pyroed</div><div id='commit'> Commit Name: 30d37de98d72df2a585989fab05eb08b2b071381</div><div id='time'> Time: 2021-10-18</div><div id='author'> Author: fritz.obermeyer@gmail.com</div><div id='file'> File Name: tf8.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tf8.py</div><div id='n_file'> N File Name: tf8.py</div><div id='m_start'> M Start Line: 82</div><div id='m_end'> M End Line: 83</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        index += num
    cpu_tensor = data.x[prev_order[index:]].clone().share_memory_()
    res.append(cpu_tensor)
    <a id="change">print(f"gpu {gpu_tensor.size(0)} cpu {cpu_tensor.size(0)}"</a><a id="change">)</a>
    return res, prev_order, new_order


&#47&#47 deg = deg.tolist()</code></pre><h3>After Change</h3><pre><code class='java'>
    total_num = data.x.shape[0]
    total_range = torch.arange(total_num, dtype=torch.long)
    if isinstance(ratio, float):
        perm_range = <a id="change">torch.randperm(</a>int(total_num * ratio)<a id="change">)</a>
        prev_order[:int(total_num * ratio)]<a id="change"> = </a>prev_order[perm_range]
    new_order = torch.zeros_like(prev_order)
    new_order[prev_order] = total_range
    index = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quiver-team/torch-quiver/commit/fee26bd6987803a161002d651663bd87dda521ab#diff-5f7a2616aaba261d74ef87d49352e3112bbf582df40f5e11a0313395b269a187L20' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84408751</div><div id='project'> Project Name: quiver-team/torch-quiver</div><div id='commit'> Commit Name: fee26bd6987803a161002d651663bd87dda521ab</div><div id='time'> Time: 2021-10-05</div><div id='author'> Author: ee_dalong@163.com</div><div id='file'> File Name: benchmarks/ogbn_products_sage/shuffle.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: split(3)</div><div id='n_method'> N Method Name: split(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: benchmarks/ogbn_products_sage/shuffle.py</div><div id='n_file'> N File Name: benchmarks/ogbn_products_sage/shuffle.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 45</div><BR>