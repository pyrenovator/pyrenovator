<html><h3>Pattern ID :18458
</h3><img src='60252823.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def precision_score(output, label, params):
    num_classes<a id="change"> = params</a><a id="change">["model"]["num_classes"]</a>
    <a id="change">if params["problem_type"] == "classification"</a>:
        predicted_classes<a id="change"> = </a><a id="change">torch.argmax(output</a>, <a id="change">1</a><a id="change">)</a>
    elif <a id="change">params["problem_type"] == "segmentation"</a>:
        label<a id="change"> = one_hot(</a>label, <a id="change">params["model"]["class_list"])</a>
        predicted_classes<a id="change"> = output</a>
    else:
        predicted_classes<a id="change"> = output</a>
        <a id="change">params["metrics"]["precision"]["multi_class"] = </a>False
        <a id="change">params["metrics"]["precision"]["mdmc_average"] = </a>None
    precision = Precision(average=params["metrics"]["precision"]["average"], num_classes=num_classes, multiclass=params["metrics"]["precision"]["multi_class"],mdmc_average=params["metrics"]["precision"]["mdmc_average"])

    <a id="change">return </a>precision(<a id="change">predicted_classes.cpu()</a>, <a id="change">label.cpu()</a>)
</code></pre><h3>After Change</h3><pre><code class='java'>


def precision_score(output, label, params):
    <a id="change">return </a><a id="change">generic_torchmetrics_score(</a>output, label, Precision, <a id="change">"precision"</a>, params<a id="change">)</a>


def iou_score(output, label, params):
    num_classes = params["model"]["num_classes"]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 32</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mlcommons/gandlf/commit/484b24fa08e517737f24a74ab596680e7791b518#diff-7a409ae0fa69168e693ef9f835f2af07d44673d28021965486019c5e2d21ba96L22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60252823</div><div id='project'> Project Name: mlcommons/gandlf</div><div id='commit'> Commit Name: 484b24fa08e517737f24a74ab596680e7791b518</div><div id='time'> Time: 2021-09-08</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: GANDLF/metrics/generic.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: precision_score(3)</div><div id='n_method'> N Method Name: precision_score(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/metrics/generic.py</div><div id='n_file'> N File Name: GANDLF/metrics/generic.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def precision_score(output, label, params):
    num_classes<a id="change"> = </a><a id="change">params["model"]["num_classes"]</a>
    <a id="change">if params["problem_type"] == "classification"</a>:
        predicted_classes<a id="change"> = </a><a id="change">torch.argmax(</a>output, <a id="change">1</a><a id="change">)</a>
    elif <a id="change">params["problem_type"] == "segmentation"</a>:
        label<a id="change"> = one_hot(</a>label, <a id="change">params["model"]["class_list"])</a>
        predicted_classes<a id="change"> = </a>output
    else:
        predicted_classes<a id="change"> = </a>output
        <a id="change">params["metrics"]["precision"]["multi_class"] = </a>False
        <a id="change">params["metrics"]["precision"]["mdmc_average"] = </a>None
    precision = Precision(average=params["metrics"]["precision"]["average"], num_classes=num_classes, multiclass=params["metrics"]["precision"]["multi_class"],mdmc_average=params["metrics"]["precision"]["mdmc_average"])

    <a id="change">return </a>precision(<a id="change">predicted_classes.cpu()</a>, <a id="change">label.cpu()</a>)
</code></pre><h3>After Change</h3><pre><code class='java'>


def precision_score(output, label, params):
    <a id="change">return </a><a id="change">generic_torchmetrics_score(</a>output, label, Precision, <a id="change">"precision"</a>, params<a id="change">)</a>


def iou_score(output, label, params):
    num_classes = params["model"]["num_classes"]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cbica/gandlf/commit/484b24fa08e517737f24a74ab596680e7791b518#diff-7a409ae0fa69168e693ef9f835f2af07d44673d28021965486019c5e2d21ba96L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60252822</div><div id='project'> Project Name: cbica/gandlf</div><div id='commit'> Commit Name: 484b24fa08e517737f24a74ab596680e7791b518</div><div id='time'> Time: 2021-09-08</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: GANDLF/metrics/generic.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: precision_score(3)</div><div id='n_method'> N Method Name: precision_score(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/metrics/generic.py</div><div id='n_file'> N File Name: GANDLF/metrics/generic.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 25</div><div id='n_end'> N End Line: 25</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
from GANDLF.utils.tensor import one_hot

def recall_score(output, label, params):
    num_classes<a id="change"> = </a><a id="change">params["model"]["num_classes"]</a>
    <a id="change">if params["problem_type"] == "classification"</a>:
        predicted_classes<a id="change"> = </a><a id="change">torch.argmax(</a>output, <a id="change">1</a><a id="change">)</a>
    elif <a id="change">params["problem_type"] == "segmentation"</a>:
        label<a id="change"> = one_hot(</a>label, <a id="change">params["model"]["class_list"])</a>
        predicted_classes<a id="change"> = </a>output
    else:
        predicted_classes<a id="change"> = </a>output
        <a id="change">params["metrics"]["recall"]["multi_class"] = </a>False
        <a id="change">params["metrics"]["recall"]["mdmc_average"] = </a>None
    recall = Recall(average=params["metrics"]["recall"]["average"], num_classes=num_classes, multiclass=params["metrics"]["recall"]["multi_class"],mdmc_average="samplewise")

    <a id="change">return </a>recall(<a id="change">predicted_classes.cpu()</a>, <a id="change">label.cpu()</a>)


def precision_score(output, label, params):</code></pre><h3>After Change</h3><pre><code class='java'>
    return metric_function(predicted_classes.cpu(), label.cpu())

def recall_score(output, label, params):
    <a id="change">return </a><a id="change">generic_torchmetrics_score(</a>output, label, Recall, <a id="change">"recall"</a>, params<a id="change">)</a>


def precision_score(output, label, params):
    return generic_torchmetrics_score(output, label, Precision, "precision", params)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cbica/gandlf/commit/484b24fa08e517737f24a74ab596680e7791b518#diff-7a409ae0fa69168e693ef9f835f2af07d44673d28021965486019c5e2d21ba96L5' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 60252821</div><div id='project'> Project Name: cbica/gandlf</div><div id='commit'> Commit Name: 484b24fa08e517737f24a74ab596680e7791b518</div><div id='time'> Time: 2021-09-08</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: GANDLF/metrics/generic.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: recall_score(3)</div><div id='n_method'> N Method Name: recall_score(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: GANDLF/metrics/generic.py</div><div id='n_file'> N File Name: GANDLF/metrics/generic.py</div><div id='m_start'> M Start Line: 6</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 21</div><div id='n_end'> N End Line: 21</div><BR>