<html><h3>Pattern ID :10867
</h3><img src='37469727.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            diff = np.mean(np.abs(res - res_mm.numpy()))
            print(size, filter_shape, &quot%2.2e.&quot % diff,
                  np.allclose(res, res_mm.numpy()))
            <a id="change">assert </a>np.allclose(res, res_mm)


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
                padding=(filter_shape[0]-1, filter_shape[1]-1))

            diff_scipy = np.mean(np.abs(res_scipy - res_mm.numpy()))
            diff_torch<a id="change"> = np.mean(np</a><a id="change">.abs(</a>res_torch.numpy()<a id="change"> - res_mm.numpy()</a><a id="change">))</a>
            print(size, filter_shape, &quot%2.2e.&quot % diff_scipy,
                  np.allclose(res_scipy, res_mm.numpy()),
                  &quot%2.2e.&quot % diff_torch, np.allclose(
                      res_torch.numpy(), res_mm.numpy()))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/v0lta/pytorch-wavelet-toolbox/commit/0b6d39b0c8b64def69279554ecfafa2cb1234942#diff-03b8b06227e87216905ccfae136642073c1a5094d66e328100c86957c5f6cc45L48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37469727</div><div id='project'> Project Name: v0lta/pytorch-wavelet-toolbox</div><div id='commit'> Commit Name: 0b6d39b0c8b64def69279554ecfafa2cb1234942</div><div id='time'> Time: 2021-09-09</div><div id='author'> Author: moritz@wolter.tech</div><div id='file'> File Name: tests/test_boundary_filters.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_mean_conv_matrix_2d(0)</div><div id='n_method'> N Method Name: test_mean_conv_matrix_2d(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_boundary_filters.py</div><div id='n_file'> N File Name: tests/test_boundary_filters.py</div><div id='m_start'> M Start Line: 71</div><div id='m_end'> M End Line: 71</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            diff = np.mean(np.abs(res - res_mm.numpy()))
            print(size, filter_shape, &quot%2.2e.&quot % diff,
                  np.allclose(res, res_mm.numpy()))
            <a id="change">assert </a>np.allclose(res, res_mm)


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
                padding=(filter_shape[0]-1, filter_shape[1]-1))

            diff_scipy = np.mean(np.abs(res_scipy - res_mm.numpy()))
            diff_torch<a id="change"> = np.mean(</a><a id="change">np.abs(res_torch.numpy()</a><a id="change"> - </a>res_mm.numpy()<a id="change">))</a>
            print(size, filter_shape, &quot%2.2e.&quot % diff_scipy,
                  np.allclose(res_scipy, res_mm.numpy()),
                  &quot%2.2e.&quot % diff_torch, np.allclose(
                      res_torch.numpy(), res_mm.numpy()))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/v0lta/pytorch-wavelet-toolbox/commit/0b6d39b0c8b64def69279554ecfafa2cb1234942#diff-03b8b06227e87216905ccfae136642073c1a5094d66e328100c86957c5f6cc45L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37469730</div><div id='project'> Project Name: v0lta/pytorch-wavelet-toolbox</div><div id='commit'> Commit Name: 0b6d39b0c8b64def69279554ecfafa2cb1234942</div><div id='time'> Time: 2021-09-09</div><div id='author'> Author: moritz@wolter.tech</div><div id='file'> File Name: tests/test_boundary_filters.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_mean_conv_matrix_2d(0)</div><div id='n_method'> N Method Name: test_mean_conv_matrix_2d(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_boundary_filters.py</div><div id='n_file'> N File Name: tests/test_boundary_filters.py</div><div id='m_start'> M Start Line: 71</div><div id='m_end'> M End Line: 71</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 79</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

            print(wavelet.name, "orthogonal error", err_orth, &quotsize&quot, size)
            &#47&#47 print("db8 size inverse error", err_inv)
            <a id="change">assert </a>err_orth &lt; 1e-6
            &#47&#47 assert err_inv &lt; 1e-6

</code></pre><h3>After Change</h3><pre><code class='java'>
            
            &#47&#47 test_eye_inv = torch.sparse.mm(a_db8, s_db2.to_dense()).numpy()
            test_eye_orth = torch.mm(analysis_matrix.transpose(1, 0), analysis_matrix).numpy()
            test_eye_inv = <a id="change">torch.mm(analysis_matrix, synthesis_matrix).numpy()</a>
            err_inv<a id="change"> = np.mean(</a><a id="change">np.abs(</a>test_eye_inv<a id="change"> - </a>np.eye(size)<a id="change">))</a>
            err_orth = np.mean(np.abs(test_eye_orth - np.eye(size)))

            print(wavelet.name, "orthogonal error", err_orth, &quotsize&quot, size)
            print(wavelet.name, "orthogonal error", err_inv,  &quotsize&quot, size)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/v0lta/pytorch-wavelet-toolbox/commit/b65940a81be76b82438df30439665c48508f44b6#diff-03b8b06227e87216905ccfae136642073c1a5094d66e328100c86957c5f6cc45L32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37469729</div><div id='project'> Project Name: v0lta/pytorch-wavelet-toolbox</div><div id='commit'> Commit Name: b65940a81be76b82438df30439665c48508f44b6</div><div id='time'> Time: 2021-09-06</div><div id='author'> Author: moritz@wolter.tech</div><div id='file'> File Name: tests/test_boundary_filters.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_boundary_filter_analysis_and_synthethis_matrices(0)</div><div id='n_method'> N Method Name: test_boundary_filter_analysis_and_synthethis_matrices(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_boundary_filters.py</div><div id='n_file'> N File Name: tests/test_boundary_filters.py</div><div id='m_start'> M Start Line: 45</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 49</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        np.abs(np.concatenate(coeffs) - torch.cat(coeffs2, -1).squeeze().numpy())
    )
    print("haar coefficient error scale 2", err, ["ok" if err &lt; 1e-4 else "failed!"])
    <a id="change">assert </a>err &lt; 1e-4


def test_conv_fwt_haar_lvl2_odd():</code></pre><h3>After Change</h3><pre><code class='java'>
    err = np.mean(np.abs(pywt_coeffs - ptwt_coeffs))
    print("haar coefficient error scale 2", err, ["ok" if err &lt; 1e-6 else "failed!"])
    assert np.allclose(pywt_coeffs, ptwt_coeffs)
    rec = <a id="change">waverec(coeffs2, wavelet).squeeze().numpy()</a>
    err<a id="change"> = np.mean(</a><a id="change">np.abs(</a>(data<a id="change"> - </a>rec)<a id="change">))</a>
    print("haar reconstruction error scale 2", err, ["ok" if err &lt; 1e-6 else "failed!"])
    assert np.allclose(data, rec)

def test_conv_fwt_haar_lvl2_odd():</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/v0lta/pytorch-wavelet-toolbox/commit/c52a0038ca7ceb817da834840a1655d55ff6f1a3#diff-499aa4727e73e6303fe60bf9cdec38d37980e9804f8f1d9d678da5ee867366b3L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 37469728</div><div id='project'> Project Name: v0lta/pytorch-wavelet-toolbox</div><div id='commit'> Commit Name: c52a0038ca7ceb817da834840a1655d55ff6f1a3</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: moritz@wolter.tech</div><div id='file'> File Name: tests/test_convolution_fwt.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_conv_fwt_haar_lvl2(0)</div><div id='n_method'> N Method Name: test_conv_fwt_haar_lvl2(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_convolution_fwt.py</div><div id='n_file'> N File Name: tests/test_convolution_fwt.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 56</div><BR>