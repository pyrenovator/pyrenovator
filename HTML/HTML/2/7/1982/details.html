<html><h3>Pattern ID :1982
</h3><img src='8872199.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        side = math.ceil(x.size(dim) * scale)

    &#47&#47 Identity case
    if side == <a id="change">x.size(</a>dim<a id="change">)</a>:
        return x

    &#47&#47 Default bicubic kernel with antialiasing</code></pre><h3>After Change</h3><pre><code class='java'>
    if scale is None and side is None:
        raise ValueError(&quotOne of scale or side must be specified!&quot)

    <a id="change">if </a>scale is not None and <a id="change">side is not None</a>:
        <a id="change">raise </a><a id="change">ValueError(&quotPlease specify scale or side to avoid conflict!&quot</a><a id="change">)</a>

    if side is None:
        side = math.ceil(x.size(dim) * scale)
    else:
        scale = side / x.size(dim)

    &#47&#47 Identity case
    if scale == 1:
        return x

    &#47&#47 Default bicubic kernel with antialiasing (only when downsampling)
    kernel_size = 4
    if antialiasing and (scale &lt; 1):
        antialiasing_factor<a id="change"> = </a>scale
        kernel_size = math.ceil(kernel_size / antialiasing_factor)
    else:
        antialiasing_factor = 1</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/thstkdgus35/bicubic_pytorch/commit/cf6fbd33a895b6139aa6fe124de39f8115a59426#diff-935bc67832a22823701c35975421947be81615771e83d7ca168792058a15a347L152' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8872199</div><div id='project'> Project Name: thstkdgus35/bicubic_pytorch</div><div id='commit'> Commit Name: cf6fbd33a895b6139aa6fe124de39f8115a59426</div><div id='time'> Time: 2020-07-08</div><div id='author'> Author: thstkdgus35@snu.ac.kr</div><div id='file'> File Name: core.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: resize_1d(5)</div><div id='n_method'> N Method Name: resize_1d(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: core.py</div><div id='n_file'> N File Name: core.py</div><div id='m_start'> M Start Line: 153</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 152</div><div id='n_end'> N End Line: 167</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        n_tasks = prod(Y_hat[0, 0, ...].shape)
        loss = loss / n_tasks  &#47&#47 takes an average over tasks

    batch_size = <a id="change">loss.size(</a>0<a id="change">)</a>
    loss = loss.view(batch_size, -1).sum(keepdim=True, dim=-1)

    return loss
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 shape = [batch_size, 1]
    if agg_over_tasks == "mean":
        loss = loss.mean(keepdim=True, dim=1)
    elif <a id="change">agg_over_tasks == "max"</a>:
        loss = loss.max(keepdim=True, dim=1)[0]
    elif agg_over_tasks == "sum":
        loss = loss.sum(keepdim=True, dim=1)
    elif agg_over_tasks == "std":
        loss<a id="change"> = </a>loss.std(keepdim=True, dim=1)
    elif agg_over_tasks is None:
        loss = loss  &#47&#47 shape = [batch_size, n_tasks]
    else:
        <a id="change">raise </a><a id="change">ValueError(f"Unkown agg_over_tasks={agg_over_tasks}."</a><a id="change">)</a>

    return loss

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yanndubs/lossyless/commit/c8ef0b6b635ba0e212baf30a60596f78e08a56fa#diff-ba2db6a7ed79d2fb968c2737361a3e18fec7d218f75e89d30143679dc6744dfaL429' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8872263</div><div id='project'> Project Name: yanndubs/lossyless</div><div id='commit'> Commit Name: c8ef0b6b635ba0e212baf30a60596f78e08a56fa</div><div id='time'> Time: 2021-02-22</div><div id='author'> Author: yanndubois96@gmail.com</div><div id='file'> File Name: lossyless/helpers.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: mse_or_crossentropy_loss(4)</div><div id='n_method'> N Method Name: mse_or_crossentropy_loss(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: lossyless/helpers.py</div><div id='n_file'> N File Name: lossyless/helpers.py</div><div id='m_start'> M Start Line: 437</div><div id='m_end'> M End Line: 442</div><div id='n_start'> N Start Line: 444</div><div id='n_end'> N End Line: 465</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super(BasicBlock, self).__init__()
        self.conv1 = nn.Conv2d(in_planes, planes, kernel_size=3, stride=stride, padding=1, bias=False)
        self.mask1 = nn.Conv2d(in_planes, planes, kernel_size=3, stride=stride, padding=1, bias=False)
        self.mask1.weight.data = torch.ones(<a id="change">self.mask1.weight.size()</a>)
        self.bn1   = nn.BatchNorm2d(planes)

        self.conv2 = nn.Conv2d(planes, planes, kernel_size=3, stride=1, padding=1, bias=False)</code></pre><h3>After Change</h3><pre><code class='java'>
        super(BasicBlock, self).__init__()
        if norm_layer is None:
            norm_layer = nn.BatchNorm2d
        <a id="change">if </a>groups != 1 or <a id="change">base_width != 64</a>:
            <a id="change">raise </a><a id="change">ValueError(&quotBasicBlock only supports groups=1 and base_width=64&quot</a><a id="change">)</a>
        if dilation &gt; 1:
            raise NotImplementedError("Dilation &gt; 1 not supported in BasicBlock")
        &#47&#47 Both self.conv1 and self.downsample layers downsample the input when stride != 1
        self.conv1 = conv3x3(inplanes, planes, stride)
        self.bn1 = norm_layer(planes)
        self.relu = nn.ReLU(inplace=True)
        self.conv2 = conv3x3(planes, planes)
        self.bn2 = norm_layer(planes)
        self.downsample = downsample
        self.stride<a id="change"> = </a>stride

    def forward(self, x):
        identity = x</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/incheon-cho/dynamic_model_pruning_with_feedback/commit/12bd228dc14e0c422c262bcbc1b81cb435e05a4d#diff-da62ce430302dcb6718b9a6a36a17d97e7ef64d1ecba8920e816a058c59c6816L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8872292</div><div id='project'> Project Name: incheon-cho/dynamic_model_pruning_with_feedback</div><div id='commit'> Commit Name: 12bd228dc14e0c422c262bcbc1b81cb435e05a4d</div><div id='time'> Time: 2020-09-06</div><div id='author'> Author: dlscjs5362@gmail.com</div><div id='file'> File Name: models/resnet.py</div><div id='m_class'> M Class Name: BasicBlock</div><div id='n_method'> N Class Name: BasicBlock</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/resnet.py</div><div id='n_file'> N File Name: models/resnet.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 47</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 40</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        log_interval=1000,
        backcast_loss_ratio=1.0,
    )
    <a id="change">net.size()</a>
    try:
        trainer.fit(
            net,
            train_dataloaders=train_dataloader,</code></pre><h3>After Change</h3><pre><code class='java'>
    gpus,
    dataloader,
):
    <a id="change">if dataloader == "with_covariates"</a>:
        dataloader = dataloaders_with_covariates
    elif dataloader == "fixed_window_without_covariates":
        dataloader<a id="change"> = </a>dataloaders_fixed_window_without_covariates
    elif dataloader == "multi_target":
        dataloader = dataloaders_multi_target
    else:
        <a id="change">raise </a><a id="change">ValueError(f"dataloader {dataloader} unknown"</a><a id="change">)</a>
    _integration(dataloader, tmp_path=tmp_path, gpus=gpus)


@pytest.fixture(scope="session")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jdb78/pytorch-forecasting/commit/4502e81dd8dbb8ec33fbde0efcdda8c4ad701b7f#diff-4f442804ea281148f323def75d49ef6baaf5be53b8d8e6fea1d72f872df5a1a3L12' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 8872301</div><div id='project'> Project Name: jdb78/pytorch-forecasting</div><div id='commit'> Commit Name: 4502e81dd8dbb8ec33fbde0efcdda8c4ad701b7f</div><div id='time'> Time: 2022-03-21</div><div id='author'> Author: beitner.jan@bcg.com</div><div id='file'> File Name: tests/test_models/test_nhits.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_integration(6)</div><div id='n_method'> N Method Name: test_integration(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/test_models/test_nhits.py</div><div id='n_file'> N File Name: tests/test_models/test_nhits.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 64</div><div id='n_end'> N End Line: 78</div><BR>