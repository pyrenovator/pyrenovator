<html><h3>Pattern ID :17622
</h3><img src='58231548.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if transform:
                x, y = transform(images = np.expand_dims(x, axis = 0), keypoints = np.expand_dims(y, axis = 0)) &#47&#47check transform and normalization
            x = x.squeeze(0)
            y<a id="change"> = </a><a id="change">y.squeeze(0</a><a id="change">)</a>
            x = self.torch_transform(x)
            y_heatmap = draw_keypoints(y, x.shape[-2], x.shape[-1], self.output_shape, sigma = 5)
            label_heatmaps.append(y_heatmap)
        self.label_heatmaps = torch.from_numpy(np.asarray(label_heatmaps)).float()</code></pre><h3>After Change</h3><pre><code class='java'>
        self.fully_labeled_idxs = self.get_fully_labeled_idxs()
        print(self.fully_labeled_idxs)
        self.image_names = [self.image_names[idx] for idx in self.fully_labeled_idxs]
        self.labels<a id="change"> = </a><a id="change">[self.labels[idx] for idx in self.fully_labeled_idxs]</a>
        print(len(self.image_names), len(self.labels))
        &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47

        self.downsample_factor = 2 &#47&#47could change to 0, 2, 3, or 4</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/danbider/lightning-pose/commit/545a2f0293f923aca78924357ba161baf71f2982#diff-0779795c0a8a233449cfa9c0bd55d45453213457b10fa40da3e5a32966494943L80' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58231548</div><div id='project'> Project Name: danbider/lightning-pose</div><div id='commit'> Commit Name: 545a2f0293f923aca78924357ba161baf71f2982</div><div id='time'> Time: 2021-07-15</div><div id='author'> Author: ubuntu@ip-172-31-72-121.ec2.internal</div><div id='file'> File Name: pose_est_nets/datasets/datasets.py</div><div id='m_class'> M Class Name: DLCHeatmapDataset</div><div id='n_method'> N Class Name: DLCHeatmapDataset</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: pose_est_nets/datasets/datasets.py</div><div id='n_file'> N File Name: pose_est_nets/datasets/datasets.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 137</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 114</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.model_rank * self.model_batch_size
        )
        *all_X, target = [batch[0][v] for v in self.output_map]
        target<a id="change"> = </a><a id="change">target.squeeze(-1</a><a id="change">)</a>.long()
        return indexes, all_X, target

</code></pre><h3>After Change</h3><pre><code class='java'>
            targets = self.conversion_map(indexes).flatten().long().detach().clone()
            indexes = indexes.flatten().long().detach().clone()
        else:
            *<a id="change">all_X, targets = </a><a id="change">[batch[v] for v in self.output_map]</a>
            targets = targets.squeeze(-1).long().detach().clone()
            &#47&#47 creates dummy indexes
            indexes = (
                (</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vturrisi/contrastive-learning/commit/e90d420fa19620f36fead1b1a5b4c3478d59dd8a#diff-527ab26b393514123250cc89cb3d79c382aa1876a09d56cea20163b3360660b6L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58231540</div><div id='project'> Project Name: vturrisi/contrastive-learning</div><div id='commit'> Commit Name: e90d420fa19620f36fead1b1a5b4c3478d59dd8a</div><div id='time'> Time: 2021-08-13</div><div id='author'> Author: enrico.fini@gmail.com</div><div id='file'> File Name: solo/methods/dali.py</div><div id='m_class'> M Class Name: PretrainWrapper</div><div id='n_method'> N Class Name: PretrainWrapper</div><div id='m_method'> M Method Name: __next__(1)</div><div id='n_method'> N Method Name: __next__(1)</div><div id='m_parent_class'> M Parent Class: BaseWrapper</div><div id='n_parent_class'> N Parent Class: BaseWrapper</div><div id='m_file'> M File Name: solo/methods/dali.py</div><div id='n_file'> N File Name: solo/methods/dali.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 66</div><div id='n_start'> N Start Line: 73</div><div id='n_end'> N End Line: 97</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    cum_sum = ref3.cumsum(dim=-1)
    lens = masks.sum(dim=-1)
    assert lens.ndim == 1
    cum_sum<a id="change"> = </a><a id="change">cum_sum.index_select(-1, lens.int()).squeeze(-1</a><a id="change">)</a>
    spk_emb = cum_sum / lens[:, None]
    return spk_emb

</code></pre><h3>After Change</h3><pre><code class='java'>
    cum_sum = ref3.cumsum(dim=-1)
    lens = (~masks).sum(dim=-1)
    assert lens.ndim == 1
    tmp<a id="change"> = </a>torch.stack(<a id="change">[cum_sum[i, :, lens[i] - 1] for i in range(len(cum_sum))]</a>)
    spk_emb = tmp / lens[:, None]
    return spk_emb
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ga642381/robust-vc/commit/81b5e04f16ab1c96b73ded4ad3751626d1212770#diff-08cfb8f971b5d341127ff7def77a0e3c285d3d467a1972edd16081a8c1d1b541L55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 58231556</div><div id='project'> Project Name: ga642381/robust-vc</div><div id='commit'> Commit Name: 81b5e04f16ab1c96b73ded4ad3751626d1212770</div><div id='time'> Time: 2021-09-16</div><div id='author'> Author: ga642381@gmail.com</div><div id='file'> File Name: S2VC/S2VC-robust/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: extract_ref_feats(3)</div><div id='n_method'> N Method Name: extract_ref_feats(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: S2VC/S2VC-robust/train.py</div><div id='n_file'> N File Name: S2VC/S2VC-robust/train.py</div><div id='m_start'> M Start Line: 59</div><div id='m_end'> M End Line: 63</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 72</div><BR>