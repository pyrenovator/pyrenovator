<html><h3>Pattern ID :37771
</h3><img src='108399910.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if isinstance(df, pd.DataFrame):
        checked_df = check_single_dataframe(df, check_y, covariates, regressors, events)
    elif isinstance(df, dict):
        <a id="change">checked_df</a><a id="change"> = </a><a id="change">{}</a>
        for key, df_i in df.items():
            <a id="change">checked_df[key]</a> = check_single_dataframe(df_i, check_y, covariates, regressors, events)
    else:
        raise ValueError("Please insert valid df type (i.e. pd.DataFrame, dict)")
    return checked_df</code></pre><h3>After Change</h3><pre><code class='java'>
            checked dataframe
    
    df, _, _, _ = prep_or_copy_df(df)
    checked_df<a id="change"> = </a><a id="change">pd.DataFrame()</a>
    for df_name, df_i in df.groupby("ID"):
        df_aux = check_single_dataframe(df_i, check_y, covariates, regressors, events).copy(deep=True)
        df_aux["ID"] = df_name
        checked_df<a id="change"> = </a>pd.concat((checked_df, df_aux), ignore_index=True)
    return checked_df

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/7fcf23557cb5b30885a8a07387d411c61a50a05e#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L495' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108399910</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 7fcf23557cb5b30885a8a07387d411c61a50a05e</div><div id='time'> Time: 2022-06-21</div><div id='author'> Author: mgheorghecr@gmail.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: check_dataframe(5)</div><div id='n_method'> N Method Name: check_dataframe(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 504</div><div id='m_end'> M End Line: 512</div><div id='n_start'> N Start Line: 495</div><div id='n_end'> N End Line: 501</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            label_field: np.zeros(len(uid2items) * tot_item_num, dtype=np.int64),
        }

        <a id="change">used_item_id</a><a id="change"> = </a><a id="change">{}</a>

        new_inter_num = 0
        pos_len_list = []
        user_idx_list = []
        for i, row in enumerate(uid2items.itertuples()):
            uid = getattr(row, uid_field)
            pos_item_id = getattr(row, iid_field)
            pos_num = len(pos_item_id)

            act_inter_num = i * tot_item_num
            new_inter[uid_field][act_inter_num: act_inter_num + tot_item_num] = uid
            new_inter[label_field][act_inter_num: act_inter_num + pos_num] = 1

            <a id="change">used_item_id[uid]</a> = self.sampler.used_item_id[self.phase][uid]
            used_num = len(used_item_id[uid])
            neg_num = tot_item_num - used_num
            neg_end = new_inter_num + pos_num + neg_num</code></pre><h3>After Change</h3><pre><code class='java'>
            user_idx_list.append(slice(new_inter_num, neg_end))
            new_inter_num += pos_num + neg_num

        users<a id="change"> = </a><a id="change">pd.DataFrame(</a>{uid_field: users}<a id="change">)</a>
        users<a id="change"> = </a>self._dataframe_to_interaction(self.join(users))

        return users, pos_idx, used_idx, pos_len_list, user_idx_list
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/a137aa3d249a3246d7cbc1f748604ba4aec12a8f#diff-f41d5d93e76efa5638a691f8947c424c58ec3f51b884fc0d235ddd324dd574f2L334' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108399908</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: a137aa3d249a3246d7cbc1f748604ba4aec12a8f</div><div id='time'> Time: 2020-08-04</div><div id='author'> Author: houyupeng@ruc.edu.cn</div><div id='file'> File Name: data/dataloader.py</div><div id='m_class'> M Class Name: GeneralFullDataLoader</div><div id='n_method'> N Class Name: GeneralFullDataLoader</div><div id='m_method'> M Method Name: _neg_sampling(2)</div><div id='n_method'> N Method Name: _neg_sampling(2)</div><div id='m_parent_class'> M Parent Class: GeneralGroupedDataLoader</div><div id='n_parent_class'> N Parent Class: GeneralGroupedDataLoader</div><div id='m_file'> M File Name: data/dataloader.py</div><div id='n_file'> N File Name: data/dataloader.py</div><div id='m_start'> M Start Line: 335</div><div id='m_end'> M End Line: 368</div><div id='n_start'> N Start Line: 335</div><div id='n_end'> N End Line: 369</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if isinstance(df, pd.DataFrame):
        checked_df = check_single_dataframe(df, check_y, covariates, regressors, events)
    elif isinstance(df, dict):
        <a id="change">checked_df</a><a id="change"> = </a><a id="change">{}</a>
        for key, df_i in df.items():
            <a id="change">checked_df[key]</a> = check_single_dataframe(df_i, check_y, covariates, regressors, events)
    else:
        raise ValueError("Please insert valid df type (i.e. pd.DataFrame, dict)")
    return checked_df</code></pre><h3>After Change</h3><pre><code class='java'>
            checked dataframe
    
    df, _, _, _ = prep_or_copy_df(df)
    checked_df<a id="change"> = </a><a id="change">pd.DataFrame()</a>
    for df_name, df_i in df.groupby("ID"):
        df_aux = check_single_dataframe(df_i, check_y, covariates, regressors, events).copy(deep=True)
        df_aux["ID"] = df_name
        checked_df<a id="change"> = </a>pd.concat((checked_df, df_aux), ignore_index=True)
    return checked_df

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ourownstory/neural_prophet/commit/7fcf23557cb5b30885a8a07387d411c61a50a05e#diff-cb8ae2d50e5d5d245ed6fcc8cadf2baf7294fa9ac5c63e819fbfe34f0e4c2552L481' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108399907</div><div id='project'> Project Name: ourownstory/neural_prophet</div><div id='commit'> Commit Name: 7fcf23557cb5b30885a8a07387d411c61a50a05e</div><div id='time'> Time: 2022-06-21</div><div id='author'> Author: mgheorghecr@gmail.com</div><div id='file'> File Name: neuralprophet/df_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: check_dataframe(5)</div><div id='n_method'> N Method Name: check_dataframe(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: neuralprophet/df_utils.py</div><div id='n_file'> N File Name: neuralprophet/df_utils.py</div><div id='m_start'> M Start Line: 504</div><div id='m_end'> M End Line: 512</div><div id='n_start'> N Start Line: 495</div><div id='n_end'> N End Line: 501</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

            &#47&#47 Reassemble into dataframe
            for i in range(len(data[0])):
                <a id="change">row</a><a id="change"> = </a><a id="change">{}</a>
                for _, col_name in enumerate(self.entity_columns):
                    <a id="change">row[col_name]</a> = entity_id
                for j, col_name in enumerate(self.context_columns):
                    row[col_name] = context[j]
                for j, col_name in enumerate(self.data_columns):</code></pre><h3>After Change</h3><pre><code class='java'>
        
        columns = self.entity_columns + self.context_columns + self.data_columns

        groups<a id="change"> = </a><a id="change">pd.DataFrame()</a>
        for entity_id in range(num_entities):
            &#47&#47 Sample data, given resampled context
            context = self._context.sample(1).iloc[0].tolist()
            sequence = self.sample_sequence(context)

            &#47&#47 Reformat as a DataFrame
            group = pd.DataFrame(dict(zip(self.data_columns, sequence)), columns=columns)
            group[self.entity_columns] = entity_id
            group[self.context_columns] = context

            groups<a id="change"> = </a>groups.append(group)

        return groups
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/sdv-dev/deepecho/commit/1e8ddefc8bf9828847c2deb06084e962a8870c45#diff-b77bd867af44f00d2a4f6508af37f7632252dce8b86c615f93813c5b0cae0f48L153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 108399915</div><div id='project'> Project Name: sdv-dev/deepecho</div><div id='commit'> Commit Name: 1e8ddefc8bf9828847c2deb06084e962a8870c45</div><div id='time'> Time: 2020-07-16</div><div id='author'> Author: carles@pythiac.com</div><div id='file'> File Name: deepecho/base.py</div><div id='m_class'> M Class Name: DeepEcho</div><div id='n_method'> N Class Name: DeepEcho</div><div id='m_method'> M Method Name: sample(2)</div><div id='n_method'> N Method Name: sample(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deepecho/base.py</div><div id='n_file'> N File Name: deepecho/base.py</div><div id='m_start'> M Start Line: 168</div><div id='m_end'> M End Line: 187</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 183</div><BR>