<html><h3>Pattern ID :34237
</h3><img src='98197675.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            assert isinstance(
                raw, torch.Tensor), "Input invalid raw type {}. raw must be torch.Tensor or list of torch.Tensor".format(type(raw))
            assert 5 &gt; len(raw.shape), "State.raw.shape {} is invalid".format(raw.shape)
            <a id="change">while 2 &gt; len(raw.shape)</a><a id="change">:
                </a>raw<a id="change"> = raw.unsqueeze(0</a><a id="change">)</a>
        self._raw = raw

        if mask is None:
            self._mask = torch.ones(</code></pre><h3>After Change</h3><pre><code class='java'>
        if type(raw) is list:
            assert 5 &gt; len(raw[0].shape) &gt; 1, "State.raw[0].shape {} is invalid".format(
                raw[0].shape)
            <a id="change">assert </a>len(raw[0].shape) &gt; 1, "State.raw[0].shape {} is invalid. Batch_size must be specified".format(
                raw[0].shape)
        else:
            assert isinstance(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/syuntoku14/pytorch-rl-il/commit/3cb3f99324289b8f4cf74a14b74cf5027a0fb5ef#diff-56123a331b32298f1441c00b2c2a135bf16cee9307d45622cc9538c620235bebL18' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98197675</div><div id='project'> Project Name: syuntoku14/pytorch-rl-il</div><div id='commit'> Commit Name: 3cb3f99324289b8f4cf74a14b74cf5027a0fb5ef</div><div id='time'> Time: 2020-03-06</div><div id='author'> Author: syuntoku14@keio.jp</div><div id='file'> File Name: rlil/environments/state.py</div><div id='m_class'> M Class Name: State</div><div id='n_method'> N Class Name: State</div><div id='m_method'> M Method Name: __init__(4)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rlil/environments/state.py</div><div id='n_file'> N File Name: rlil/environments/state.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 22</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 26</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert isinstance(
            raw, torch.Tensor), "Input invalid raw type {}. raw must be torch.Tensor".format(type(raw))
        if len(raw.shape) &lt; 2:
            <a id="change">while len(raw.shape) &lt; 2</a><a id="change">:
                </a>raw<a id="change"> = raw.unsqueeze(0</a><a id="change">)</a>
        self._raw = raw

    @classmethod
    def from_numpy(cls, actions):</code></pre><h3>After Change</h3><pre><code class='java'>
        
        assert isinstance(
            raw, torch.Tensor), "Input invalid raw type {}. raw must be torch.Tensor".format(type(raw))
        <a id="change">assert </a>len(raw.shape) &gt; 1, "Action.raw.shape {} is invalid. Batch_size must be specified".format(raw.shape)
        self._raw = raw

    @classmethod</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/syuntoku14/pytorch-rl-il/commit/3cb3f99324289b8f4cf74a14b74cf5027a0fb5ef#diff-b0c85d3a2a2899de7d790d141b41f3e69bea4b9bc20651846094ebbc6d415bdeL14' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98197678</div><div id='project'> Project Name: syuntoku14/pytorch-rl-il</div><div id='commit'> Commit Name: 3cb3f99324289b8f4cf74a14b74cf5027a0fb5ef</div><div id='time'> Time: 2020-03-06</div><div id='author'> Author: syuntoku14@keio.jp</div><div id='file'> File Name: rlil/environments/action.py</div><div id='m_class'> M Class Name: Action</div><div id='n_method'> N Class Name: Action</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: rlil/environments/action.py</div><div id='n_file'> N File Name: rlil/environments/action.py</div><div id='m_start'> M Start Line: 21</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        sqrt_alpha_prod = self.alphas_cumprod[timestep] ** 0.5
        sqrt_alpha_prod = sqrt_alpha_prod.flatten()
        <a id="change">while len(sqrt_alpha_prod.shape) &lt; len(original_samples.shape)</a><a id="change">:
            </a>sqrt_alpha_prod<a id="change"> = sqrt_alpha_prod.unsqueeze(-1</a><a id="change">)</a>

        sqrt_one_minus_alpha_prod = (1 - self.alphas_cumprod[timestep]) ** 0.5
        sqrt_one_minus_alpha_prod = sqrt_one_minus_alpha_prod.flatten()
        while len(sqrt_one_minus_alpha_prod.shape) &lt; len(</code></pre><h3>After Change</h3><pre><code class='java'>
        return prev_latent

    def add_noise(self, latents: Tensor, eps: Tensor, i: int) -&gt; Tensor:
        <a id="change">assert </a>0 &lt;= i &lt; self.steps

        &#47&#47 eq 4
        return latents * self.ᾱ[i].sqrt() + eps * self.ϖ[i].sqrt()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tfernd/sd-fused/commit/4e29f2889a4c47e86930e976912fa12ac53185f7#diff-fdc833560554707759195356813eb041412d9c58d0cfe05e1a402bd3755e3017L147' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 98197677</div><div id='project'> Project Name: tfernd/sd-fused</div><div id='commit'> Commit Name: 4e29f2889a4c47e86930e976912fa12ac53185f7</div><div id='time'> Time: 2022-10-05</div><div id='author'> Author: ThalesFDFernandes@gmai.com</div><div id='file'> File Name: sd/scheduler/ddim.py</div><div id='m_class'> M Class Name: DDIMScheduler</div><div id='n_method'> N Class Name: DDIMScheduler</div><div id='m_method'> M Method Name: add_noise(4)</div><div id='n_method'> N Method Name: add_noise(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: sd/scheduler/ddim.py</div><div id='n_file'> N File Name: sd/scheduler/ddim.py</div><div id='m_start'> M Start Line: 150</div><div id='m_end'> M End Line: 171</div><div id='n_start'> N Start Line: 78</div><div id='n_end'> N End Line: 81</div><BR>