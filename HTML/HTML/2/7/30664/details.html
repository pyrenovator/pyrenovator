<html><h3>Pattern ID :30664
</h3><img src='90492880.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            words, word_lens, index2lab, task="encode"
        )
        bpe, bpe_lens = bpe.to(params.device), bpe_lens.to(params.device)
        if <a id="change">hasattr(</a>params, <a id="change">"env_corrupt"</a><a id="change">)</a>:
            bpe = torch.cat([bpe, bpe], dim=0)
            bpe_lens = torch.cat([bpe_lens, bpe_lens], dim=0)
</code></pre><h3>After Change</h3><pre><code class='java'>
            words, word_lens, index2lab, task="encode"
        )
        bpe, bpe_lens = bpe.to(params.device), bpe_lens.to(params.device)
        if <a id="change">hasattr(params, "env_corrupt") and stage == "train"</a>:
            bpe = torch.cat([bpe, bpe], dim=0)
            bpe_lens = torch.cat([bpe_lens, bpe_lens], dim=0)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/be06cf2c887206338cc9cbbb5c1d846d9a800236#diff-ce5b63b425687af046ab9c9abf82ec42498c3b6efb1ad4e88c68d47f69106bd3L149' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492880</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: be06cf2c887206338cc9cbbb5c1d846d9a800236</div><div id='time'> Time: 2020-08-01</div><div id='author'> Author: a.heba@irit.fr</div><div id='file'> File Name: recipes/LibriSpeech/ASR_seq2seq/experiment_BPE.py</div><div id='m_class'> M Class Name: ASR</div><div id='n_method'> N Class Name: ASR</div><div id='m_method'> M Method Name: compute_objectives(4)</div><div id='n_method'> N Method Name: compute_objectives(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/LibriSpeech/ASR_seq2seq/experiment_BPE.py</div><div id='n_file'> N File Name: recipes/LibriSpeech/ASR_seq2seq/experiment_BPE.py</div><div id='m_start'> M Start Line: 151</div><div id='m_end'> M End Line: 151</div><div id='n_start'> N Start Line: 149</div><div id='n_end'> N End Line: 199</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def compute_forward(self, x, stage="train", init_params=False):
        ids, wavs, wav_lens = x
        wavs, wav_lens = wavs.to(params.device), wav_lens.to(params.device)
        if <a id="change">hasattr(</a>params, <a id="change">"env_corrupt"</a><a id="change">)</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre><h3>After Change</h3><pre><code class='java'>
        wavs, wav_lens = wavs.to(params.device), wav_lens.to(params.device)

        &#47&#47 Adding environmental corruption if specified (i.e., noise+rev)
        if <a id="change">hasattr(params, "env_corrupt") and stage == "train"</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/2e49b909ab738b3f03b3e6670152140a5b543dd8#diff-2ee084344967a526c2ad2831a4820a7c58dbf3aaba30042ae50c0500eddd7a08L33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492876</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 2e49b909ab738b3f03b3e6670152140a5b543dd8</div><div id='time'> Time: 2020-08-01</div><div id='author'> Author: mirco.ravanelli@gmail.com</div><div id='file'> File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='m_class'> M Class Name: ASR</div><div id='n_method'> N Class Name: ASR</div><div id='m_method'> M Method Name: compute_forward(4)</div><div id='n_method'> N Method Name: compute_forward(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='n_file'> N File Name: recipes/TIMIT/ASR_CTC/experiment.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 38</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def compute_forward(self, x, stage="train", init_params=False):
        ids, wavs, wav_lens = x
        wavs, wav_lens = wavs.to(params.device), wav_lens.to(params.device)
        if <a id="change">hasattr(</a>params, <a id="change">"env_corrupt"</a><a id="change">)</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre><h3>After Change</h3><pre><code class='java'>
    def compute_forward(self, x, stage="train", init_params=False):
        ids, wavs, wav_lens = x
        wavs, wav_lens = wavs.to(params.device), wav_lens.to(params.device)
        if <a id="change">hasattr(params, "env_corrupt") and stage == "train"</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/d456da8a67f32e01634424310e6bece40f2b1d0c#diff-fd499f25aea0489d075628643066653c4f0f95d1c159d3810fdb3bb65034cd14L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492877</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: d456da8a67f32e01634424310e6bece40f2b1d0c</div><div id='time'> Time: 2020-08-02</div><div id='author'> Author: mirco.ravanelli@gmail.com</div><div id='file'> File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='m_class'> M Class Name: ASR</div><div id='n_method'> N Class Name: ASR</div><div id='m_method'> M Method Name: compute_forward(4)</div><div id='n_method'> N Method Name: compute_forward(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='n_file'> N File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 53</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            seq_lengths.to(params.device),
        )

        if <a id="change">hasattr(</a>params, <a id="change">"env_corrupt"</a><a id="change">)</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre><h3>After Change</h3><pre><code class='java'>
            seq_lengths.to(params.device),
        )

        if <a id="change">hasattr(params, "env_corrupt") and stage == "train"</a>:
            wavs_noise = params.env_corrupt(wavs, wav_lens, init_params)
            wavs = torch.cat([wavs, wavs_noise], dim=0)
            wav_lens = torch.cat([wav_lens, wav_lens])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/72cb8c08b3ef5c96822e7aab2a1339ce50282f46#diff-f1cd97eb28ba9294128deb015c8d73c0b0f2328da9eaefffdc4ba435a03d619fL81' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492878</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 72cb8c08b3ef5c96822e7aab2a1339ce50282f46</div><div id='time'> Time: 2020-08-02</div><div id='author'> Author: mirco.ravanelli@gmail.com</div><div id='file'> File Name: recipes/LibriSpeech/ASR_transformer/experiment.py</div><div id='m_class'> M Class Name: ASR</div><div id='n_method'> N Class Name: ASR</div><div id='m_method'> M Method Name: compute_forward(5)</div><div id='n_method'> N Method Name: compute_forward(5)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/LibriSpeech/ASR_transformer/experiment.py</div><div id='n_file'> N File Name: recipes/LibriSpeech/ASR_transformer/experiment.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 103</div><div id='n_end'> N End Line: 103</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            logger_overrides = parse_overrides(logger_override_string)

            &#47&#47 Create checkpointer for loading/saving state
            if <a id="change">hasattr(</a>self, <a id="change">&quotsave_folder&quot</a><a id="change">)</a>:
                self.saver = Checkpointer(
                    checkpoints_dir=self.save_folder,
                    recoverables=parameters[&quotsaveables&quot],</code></pre><h3>After Change</h3><pre><code class='java'>
            logger_overrides = parse_overrides(logger_override_string)

            &#47&#47 Create checkpointer for loading/saving state
            if <a id="change">hasattr(self, &quotsave_folder&quot) and &quotsaveables&quot in parameters</a>:
                self.saver = Checkpointer(
                    checkpoints_dir=self.save_folder,
                    recoverables=parameters[&quotsaveables&quot],</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/2c4b3028772e9aa50d3da7ae678b5061c33c5dbf#diff-d2ad56ee927e543eceb0f9528eea488134956a963c60d845d72a92d69ae0187aL95' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492879</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 2c4b3028772e9aa50d3da7ae678b5061c33c5dbf</div><div id='time'> Time: 2020-04-07</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: speechbrain/core.py</div><div id='m_class'> M Class Name: Experiment</div><div id='n_method'> N Class Name: Experiment</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: speechbrain/core.py</div><div id='n_file'> N File Name: speechbrain/core.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 108</div><div id='n_end'> N End Line: 132</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        bpe, bpe_lens = bpe.to(params.device), bpe_lens.to(params.device)

        if <a id="change">hasattr(</a>params, <a id="change">"env_corrupt"</a><a id="change">)</a>:
            bpe = torch.cat([bpe, bpe], dim=0)
            bpe_lens = torch.cat([bpe_lens, bpe_lens], dim=0)
        loss = params.ctc_cost(pout, bpe, pout_lens, bpe_lens)</code></pre><h3>After Change</h3><pre><code class='java'>
        )
        bpe, bpe_lens = bpe.to(params.device), bpe_lens.to(params.device)

        if <a id="change">hasattr(params, "env_corrupt") and stage == "train"</a>:
            bpe = torch.cat([bpe, bpe], dim=0)
            bpe_lens = torch.cat([bpe_lens, bpe_lens], dim=0)
        loss = params.ctc_cost(pout, bpe, pout_lens, bpe_lens)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/d456da8a67f32e01634424310e6bece40f2b1d0c#diff-fd499f25aea0489d075628643066653c4f0f95d1c159d3810fdb3bb65034cd14L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 90492875</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: d456da8a67f32e01634424310e6bece40f2b1d0c</div><div id='time'> Time: 2020-08-02</div><div id='author'> Author: mirco.ravanelli@gmail.com</div><div id='file'> File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='m_class'> M Class Name: ASR</div><div id='n_method'> N Class Name: ASR</div><div id='m_method'> M Method Name: compute_objectives(4)</div><div id='n_method'> N Method Name: compute_objectives(4)</div><div id='m_parent_class'> M Parent Class: sb.core.Brain</div><div id='n_parent_class'> N Parent Class: sb.core.Brain</div><div id='m_file'> M File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='n_file'> N File Name: recipes/LibriSpeech/ASR_CTC/experiment_BPE.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 85</div><div id='n_end'> N End Line: 85</div><BR>