<html><h3>Pattern ID :6320
</h3><img src='22010223.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    x = np.arange(0, 256, dtype=np.int16)
    lut_hue = ((x * r[0]) % 180).astype(dtype)
    lut_sat = np.clip(x * r[1], 0, 255).astype(dtype)
    lut_val = <a id="change">np.clip(x * r[2], 0, 255).astype(</a>dtype<a id="change">)</a>

    img_hsv = cv2.merge(
        (cv2.LUT(hue, lut_hue), cv2.LUT(sat, lut_sat), cv2.LUT(val, lut_val))
    ).astype(dtype)</code></pre><h3>After Change</h3><pre><code class='java'>
    hsv_augs = hsv_augs.astype(dtype)
    img_hsv[..., 0] = (img_hsv[..., 0] + hsv_augs[0]) % 180
    img_hsv[..., 1] = np.clip(img_hsv[..., 1] + hsv_augs[1], 0, 255)
    img_hsv[..., 2] = <a id="change">np.clip(</a>img_hsv[..., 2] + hsv_augs[2], <a id="change">0</a>, <a id="change">255</a><a id="change">)</a>

    cv2.cvtColor(img_hsv, cv2.COLOR_HSV2BGR, dst=img)  &#47&#47 no return needed

</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/megvii-basedetection/yolox/commit/a5f629a6d28fcc3742ce9483698b3376ce457533#diff-8979574eb63a17c4616c1e9aa7ff1407320c861206351db916f74f3000ca41cdL22' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22010223</div><div id='project'> Project Name: megvii-basedetection/yolox</div><div id='commit'> Commit Name: a5f629a6d28fcc3742ce9483698b3376ce457533</div><div id='time'> Time: 2021-10-13</div><div id='author'> Author: 35716746+LGD-Ti-fighting@users.noreply.github.com</div><div id='file'> File Name: yolox/data/data_augment.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: augment_hsv(4)</div><div id='n_method'> N Method Name: augment_hsv(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: yolox/data/data_augment.py</div><div id='n_file'> N File Name: yolox/data/data_augment.py</div><div id='m_start'> M Start Line: 22</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 22</div><div id='n_end'> N End Line: 30</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        shaded = _py_additive_shade(image)
        res = np.reshape(shaded, image.shape)

        return <a id="change">np.clip(res.round(),0,255).astype(</a>np.uint8<a id="change">)</a>


    def motion_blur(self, image):
        max_kernel_size = self.config[&quotparams&quot][&quotmotion_blur&quot][&quotmax_kernel_size&quot]</code></pre><h3>After Change</h3><pre><code class='java'>
        shaded = _py_additive_shade(image)
        res = np.reshape(shaded, image.shape)

        return <a id="change">np.clip(</a>res.round(),<a id="change">0</a>,<a id="change">255</a><a id="change">)</a>


    def motion_blur(self, image):
        max_kernel_size = self.config[&quotparams&quot][&quotmotion_blur&quot][&quotmax_kernel_size&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/shaofengzeng/superpoint-pytorch/commit/265137dadde08f144a97d48b3323ccc8b0ed7c76#diff-f357abe5297591f294c7f7e86344a4d907d34af6cb0f9e04d3bfb32c6e85af55L73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22010220</div><div id='project'> Project Name: shaofengzeng/superpoint-pytorch</div><div id='commit'> Commit Name: 265137dadde08f144a97d48b3323ccc8b0ed7c76</div><div id='time'> Time: 2021-11-29</div><div id='author'> Author: shaofengzeng@163.com</div><div id='file'> File Name: dataset/utils/photometric_augmentation.py</div><div id='m_class'> M Class Name: PhotoAugmentor</div><div id='n_method'> N Class Name: PhotoAugmentor</div><div id='m_method'> M Method Name: additive_shade(2)</div><div id='n_method'> N Method Name: additive_shade(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dataset/utils/photometric_augmentation.py</div><div id='n_file'> N File Name: dataset/utils/photometric_augmentation.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 103</div><div id='n_start'> N Start Line: 117</div><div id='n_end'> N End Line: 117</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        noisy_image = np.where(sample&lt;=prob, np.zeros_like(image), image)
        noisy_image = np.where(sample&gt;=(1. - prob), 255.*np.ones_like(image), noisy_image)

        return <a id="change">np.clip(noisy_image.round(),0,255).astype(</a>np.uint8<a id="change">)</a>


    def random_brightness(self, image):
        if isinstance(image, np.ndarray):</code></pre><h3>After Change</h3><pre><code class='java'>
        sample = np.random.uniform(size=image.shape)
        noisy_image = np.where(sample&lt;=prob, np.zeros_like(image), image)
        noisy_image = np.where(sample&gt;=(1. - prob), 255.*np.ones_like(image), noisy_image)
        noisy_image = <a id="change">np.clip(</a>noisy_image.round(),<a id="change">0</a>,<a id="change">255</a><a id="change">)</a>
        return noisy_image


    def random_brightness(self, image):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/shaofengzeng/superpoint-pytorch/commit/265137dadde08f144a97d48b3323ccc8b0ed7c76#diff-f357abe5297591f294c7f7e86344a4d907d34af6cb0f9e04d3bfb32c6e85af55L40' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 22010216</div><div id='project'> Project Name: shaofengzeng/superpoint-pytorch</div><div id='commit'> Commit Name: 265137dadde08f144a97d48b3323ccc8b0ed7c76</div><div id='time'> Time: 2021-11-29</div><div id='author'> Author: shaofengzeng@163.com</div><div id='file'> File Name: dataset/utils/photometric_augmentation.py</div><div id='m_class'> M Class Name: PhotoAugmentor</div><div id='n_method'> N Class Name: PhotoAugmentor</div><div id='m_method'> M Method Name: additive_speckle_noise(2)</div><div id='n_method'> N Method Name: additive_speckle_noise(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dataset/utils/photometric_augmentation.py</div><div id='n_file'> N File Name: dataset/utils/photometric_augmentation.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 54</div><BR>