<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def build(self, query_shape):
        &#47&#47 print(query_shape)
        self.height = self.input_height if self.input_height &gt; 0 else int(<a id="change">tf.math.sqrt(</a><a id="change">float(</a>query_shape[2]<a id="change"> - </a>1<a id="change">))</a>)
        self.width = (query_shape[2] - 1) // self.height
        self.num_heads, self.query_dim = query_shape[1], query_shape[-1]
        self.channel_splits = [ii * self.query_dim for ii in self.head_splits]</code></pre><h3>After Change</h3><pre><code class='java'>
        import tensorflow as tf

        &#47&#47 print(query_shape)
        self.height = self.input_height if self.input_height &gt; 0 else int(<a id="change">float(</a>query_shape[2]<a id="change"> - </a>1<a id="change">) ** 0.5</a>)
        self.width = (query_shape[2] - 1) // self.height
        self.num_heads, self.query_dim = query_shape[1], query_shape[-1]
        self.channel_splits = [ii * self.query_dim for ii in self.head_splits]</code></pre>