<html><h3>Pattern ID :37401
</h3><img src='107695691.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        f.write(&quot\n\n&quot)
        
        f.write(&quot\t&quot.join([&quotEpoch&quot, &quotSplit&quot, &quotELBO&quot, &quotError&quot, &quotKL&quot]) + &quot\n&quot)
        for i in range(3*(epoch<a id="change">+1</a>)):
            if i &gt; 0 and (i%3 == 0):
                f.write(&quot\n&quot)
            f.write(train_log[i] + &quot\n&quot)
            
            
        f.write(<a id="change">&quotEncoder model: \n {}&quot.format(</a>encoder_model<a id="change">)</a>)
        f.write(&quot\nGenerator model: \n {}&quot.format(generator_model))

</code></pre><h3>After Change</h3><pre><code class='java'>
    generator_resid = args.generator_resid_layers

    fourier_expansion = args.fourier_expansion
    fourier_sigma<a id="change"> = </a><a id="change">max(</a>2.0 / (image_dim - 1), 2.0 / (image_dim - 1)<a id="change">)</a> &#47&#47 setting sigma value of the fourier expansion to the pixel size in the image
    if fourier_expansion:
        print(&quot&#47&#47 Using random Fourier feature expansion&quot, file=sys.stderr)
        print(&quot&#47&#47 The sigma value for the Fourier feature expansion is {}&quot.format(fourier_sigma), file=sys.stderr)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/smlc-nysbc/target-vae/commit/293dd86fa319159b69cfd478120340daa759625e#diff-da627ca7193ea32d876b5d3d1d5a084c869c27bdf151e9804ac71b8be318a99aL401' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107695691</div><div id='project'> Project Name: smlc-nysbc/target-vae</div><div id='commit'> Commit Name: 293dd86fa319159b69cfd478120340daa759625e</div><div id='time'> Time: 2022-11-11</div><div id='author'> Author: alireza.nasiry@gmail.com</div><div id='file'> File Name: train_galaxy.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_galaxy.py</div><div id='n_file'> N File Name: train_galaxy.py</div><div id='m_start'> M Start Line: 401</div><div id='m_end'> M End Line: 648</div><div id='n_start'> N Start Line: 444</div><div id='n_end'> N End Line: 648</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            generator_model.to(device)
            encoder_model.to(device)
        
    with open(path_prefix + &quottrain_log.txt&quot, &quotw&quot) as <a id="change">f</a>:
        f.write(experiment_description + &quot\n&quot)
        f.write(&quot\n\nargs:&quot)
        f.write(str(args))
        f.write(&quot\n\n&quot)
        
        f.write(&quot\t&quot.join([&quotEpoch&quot, &quotSplit&quot, &quotELBO&quot, &quotError&quot, &quotKL&quot]) + &quot\n&quot)
        for i in range(3*(epoch<a id="change">+1</a>)):
            if i &gt; 0 and (i%3 == 0):
                f.write(&quot\n&quot)
            f.write(train_log[i] + &quot\n&quot)
            
            
        f.write(&quotEncoder model: \n {}&quot.format(encoder_model))
        f.write(<a id="change">&quot\nGenerator model: \n {}&quot.format(</a>generator_model<a id="change">)</a>)


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
    generator_resid = args.generator_resid_layers

    fourier_expansion = args.fourier_expansion
    fourier_sigma<a id="change"> = </a><a id="change">max(</a>2.0 / (image_dim - 1), 2.0 / (image_dim - 1)<a id="change">)</a> &#47&#47 setting sigma value of the fourier expansion to the pixel size in the image
    if fourier_expansion:
        print(&quot&#47&#47 Using random Fourier feature expansion&quot, file=sys.stderr)
        print(&quot&#47&#47 The sigma value for the Fourier feature expansion is {}&quot.format(fourier_sigma), file=sys.stderr)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smlc-nysbc/target-vae/commit/293dd86fa319159b69cfd478120340daa759625e#diff-da627ca7193ea32d876b5d3d1d5a084c869c27bdf151e9804ac71b8be318a99aL398' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107695690</div><div id='project'> Project Name: smlc-nysbc/target-vae</div><div id='commit'> Commit Name: 293dd86fa319159b69cfd478120340daa759625e</div><div id='time'> Time: 2022-11-11</div><div id='author'> Author: alireza.nasiry@gmail.com</div><div id='file'> File Name: train_galaxy.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_galaxy.py</div><div id='n_file'> N File Name: train_galaxy.py</div><div id='m_start'> M Start Line: 401</div><div id='m_end'> M End Line: 648</div><div id='n_start'> N Start Line: 444</div><div id='n_end'> N End Line: 648</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            generator_model.to(device)
            encoder_model.to(device)
        
    with open(path_prefix + &quottrain_log.txt&quot, &quotw&quot) as <a id="change">f</a>:
        f.write(experiment_description + &quot\n&quot)
        f.write(&quot\n\nargs:&quot)
        f.write(str(args))
        f.write(&quot\n\n&quot)
        
        f.write(&quot\t&quot.join([&quotEpoch&quot, &quotSplit&quot, &quotELBO&quot, &quotError&quot, &quotKL&quot]) + &quot\n&quot)
        for i in range(3*(epoch<a id="change">+1</a>)):
            if i &gt; 0 and (i%3 == 0):
                f.write(&quot\n&quot)
            f.write(train_log[i] + &quot\n&quot)
            
            
        f.write(<a id="change">&quotEncoder model: \n {}&quot.format(</a>encoder_model<a id="change">)</a>)
        f.write(&quot\nGenerator model: \n {}&quot.format(generator_model))

</code></pre><h3>After Change</h3><pre><code class='java'>
    generator_resid = args.generator_resid_layers
    
    fourier_expansion = args.fourier_expansion
    fourier_sigma<a id="change"> = </a><a id="change">max(</a>2.0 / (image_dim - 1), 2.0 / (image_dim - 1)<a id="change">)</a> &#47&#47 setting sigma value of the fourier expansion to the pixel size in the image
    if fourier_expansion:
        print(&quot&#47&#47 Using random Fourier feature expansion&quot, file=sys.stderr)
        print(&quot&#47&#47 The sigma value for the Fourier feature expansion is {}&quot.format(fourier_sigma), file=sys.stderr)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smlc-nysbc/target-vae/commit/3ca9ef4e11fdd982ae05f11d98fcbf4ac6def1e7#diff-dd637a821c76709d6783e26e3f418e67c7231ceee71f219b9a6d724912d58429L401' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107695688</div><div id='project'> Project Name: smlc-nysbc/target-vae</div><div id='commit'> Commit Name: 3ca9ef4e11fdd982ae05f11d98fcbf4ac6def1e7</div><div id='time'> Time: 2022-11-11</div><div id='author'> Author: alireza.nasiry@gmail.com</div><div id='file'> File Name: train_mnist.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: train_mnist.py</div><div id='n_file'> N File Name: train_mnist.py</div><div id='m_start'> M Start Line: 404</div><div id='m_end'> M End Line: 692</div><div id='n_start'> N Start Line: 472</div><div id='n_end'> N End Line: 693</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 get metrics
        metric_dict = {}
        result_list = self._calculate_metrics(pos_len_list, topk_index)
        for metric, <a id="change">value</a> in zip(self.metrics, result_list):
            for k in self.topk:
                key = <a id="change">&quot{}@{}&quot.format(</a>metric, k<a id="change">)</a>
                metric_dict[key] = round(value[k<a id="change"> - 1</a>], 4)
        return metric_dict

    def _check_args(self):</code></pre><h3>After Change</h3><pre><code class='java'>
            scores_matrix = pad_sequence(scores_list, batch_first=True, padding_value=-np.inf)  &#47&#47 nusers x items

        &#47&#47 get topk
        _<a id="change">, topk_index = </a>torch.topk(scores_matrix, <a id="change">max(</a>self.topk<a id="change">)</a>, dim=-1)  &#47&#47 nusers x k

        return topk_index
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/df66b6285fec567d1f3ca0d6ee9d9ceb71f792b6#diff-a8acd0f2ac2f4ecd988072df1fbd285b091466958984b6c0d2b75a087c7320a5L59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 107695682</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: df66b6285fec567d1f3ca0d6ee9d9ceb71f792b6</div><div id='time'> Time: 2020-10-20</div><div id='author'> Author: 1337990880@qq.com</div><div id='file'> File Name: recbole/evaluator/topk_evaluator.py</div><div id='m_class'> M Class Name: TopKEvaluator</div><div id='n_method'> N Class Name: TopKEvaluator</div><div id='m_method'> M Method Name: collect(4)</div><div id='n_method'> N Method Name: collect(3)</div><div id='m_parent_class'> M Parent Class: AbstractEvaluator</div><div id='n_parent_class'> N Parent Class: AbstractEvaluator</div><div id='m_file'> M File Name: recbole/evaluator/topk_evaluator.py</div><div id='n_file'> N File Name: recbole/evaluator/topk_evaluator.py</div><div id='m_start'> M Start Line: 69</div><div id='m_end'> M End Line: 80</div><div id='n_start'> N Start Line: 38</div><div id='n_end'> N End Line: 57</div><BR>