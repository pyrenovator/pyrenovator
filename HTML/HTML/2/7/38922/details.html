<html><h3>Pattern ID :38922
</h3><img src='110974141.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    mixture = mixture.detach().cpu().numpy()
    estimated_amplitude = estimated_amplitude.detach().cpu().numpy()

    mixture = <a id="change">mixture.transpose(</a>2, <a id="change">1</a>, <a id="change">0</a><a id="change">)</a>
    estimated_amplitude = estimated_amplitude.transpose(3, 2, 1, 0)
    estimated_sources = norbert.wiener(estimated_amplitude, mixture, eps=eps)
    estimated_sources = <a id="change">estimated_sources.transpose(3</a>, 2, <a id="change">1</a>, 0<a id="change">)</a>
    estimated_sources = torch.from_numpy(estimated_sources).to(device, dtype)

    return estimated_sources</code></pre><h3>After Change</h3><pre><code class='java'>
    ratio = estimated_sources_amplitude / estimated_sources_amplitude.sum(dim=0)
    estimated_sources = ratio * mixture

    norm = max(1, <a id="change">torch.abs(mixture).max()</a> / 10)
    mixture, estimated_sources = mixture / norm, estimated_sources / norm
    estimated_sources = update_em(mixture, estimated_sources, iterations, eps=eps)
    estimated_sources = norm * estimated_sources</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/d45a578a242ecb277ef7bdc5c9d6f75c4ad13521#diff-7c5b1018ab6bf19cc2f7c1fc385abd4adb493c178cdd1548dcae8770f80fb8fdL385' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110974141</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: d45a578a242ecb277ef7bdc5c9d6f75c4ad13521</div><div id='time'> Time: 2021-08-20</div><div id='author'> Author: 40362510+tky823@users.noreply.github.com</div><div id='file'> File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: apply_multichannel_wiener_filter(5)</div><div id='n_method'> N Method Name: apply_multichannel_wiener_filter(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='n_file'> N File Name: egs/musdb18/d3net/src/adhoc_driver.py</div><div id='m_start'> M Start Line: 398</div><div id='m_end'> M End Line: 414</div><div id='n_start'> N Start Line: 385</div><div id='n_end'> N End Line: 403</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        heatmap: np.ndarray = cmap(heatmap)  &#47&#47 (N, H, W, C) TODO: linting problem
    else:   &#47&#47 cmap: [256, 3|4] uint8
        assert isinstance(cmap, torch.Tensor) and cmap.shape[0] == 256
        heatmap = <a id="change">cmap[(heatmap * 255).long()].transpose(1, 3).transpose(2</a>, <a id="change">3</a><a id="change">)</a>
        heatmap = heatmap.float() / 255
    &#47&#47 Note that C==4 for most cmaps
    heatmap = torch.as_tensor(heatmap.transpose(0, 3, 1, 2))  &#47&#47 (N, C, H, W)
    return heatmap[0] if squeeze_flag else heatmap</code></pre><h3>After Change</h3><pre><code class='java'>
        assert cmap.shape[0] == 256     &#47&#47 cmap: [256, 3|4]
        heatmap = cmap[(heatmap * 255).long()]  &#47&#47 (N, H, W, C)  uint8
    heatmap = heatmap.transpose(1, 3).transpose(2, 3).float()  &#47&#47 (N, C, H, W)
    heatmap = heatmap / 255 if <a id="change">heatmap.max()</a> &gt; 1 else heatmap  &#47&#47 (N, C, H, W) float
    return heatmap[0] if squeeze_flag else heatmap

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/80e74988c8d77c00322fd1144f83d6ff4e5ee2cb#diff-9826381a50ee9f64319e221dbad2bbbefebdcfdfea0d279eaea735ee921b4d73L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110974415</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: 80e74988c8d77c00322fd1144f83d6ff4e5ee2cb</div><div id='time'> Time: 2020-12-31</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/utils/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: apply_cmap(2)</div><div id='n_method'> N Method Name: apply_cmap(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: trojanvision/utils/__init__.py</div><div id='n_file'> N File Name: trojanvision/utils/__init__.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 27</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 29</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Conducts the max-pooling operation on the hidden states.
        batch_size, seq_length, hidden_size = hidden_states.size()
        conved = hidden_states.transpose(1, 2)
        conved = <a id="change">conved.transpose(0</a>, <a id="change">1</a><a id="change">)</a>
        states = <a id="change">(conved * mask).transpose(0</a>, <a id="change">1</a><a id="change">)</a>
        states += torch.ones_like(states)
        pooled_states = F.max_pool1d(input=states, kernel_size=seq_length).contiguous().view(batch_size, hidden_size)
        pooled_states -= torch.ones_like(pooled_states)
        return pooled_states</code></pre><h3>After Change</h3><pre><code class='java'>
        batch_size, seq_length, hidden_size = hidden_states.size()
        mask = mask.unsqueeze(2)
        states = hidden_states * mask + mask * 100
        pooled_states = <a id="change">torch.max(</a>states<a id="change">, dim=1)</a>[0]
        pooled_states -= 100
        return pooled_states
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thu-keg/omnievent/commit/deca3b2f494a538ebd7d8ad7692a16a5c709cc57#diff-2fb3950489de5eb42fafc7c3fc906a7160035b429c5bbcb1034a4107a98c3090L181' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 110974425</div><div id='project'> Project Name: thu-keg/omnievent</div><div id='commit'> Commit Name: deca3b2f494a538ebd7d8ad7692a16a5c709cc57</div><div id='time'> Time: 2022-12-20</div><div id='author'> Author: penghao20170136@163.com</div><div id='file'> File Name: OmniEvent/aggregation/aggregation.py</div><div id='m_class'> M Class Name: DynamicPooling</div><div id='n_method'> N Class Name: DynamicPooling</div><div id='m_method'> M Method Name: max_pooling(3)</div><div id='n_method'> N Method Name: max_pooling(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: OmniEvent/aggregation/aggregation.py</div><div id='n_file'> N File Name: OmniEvent/aggregation/aggregation.py</div><div id='m_start'> M Start Line: 186</div><div id='m_end'> M End Line: 191</div><div id='n_start'> N Start Line: 196</div><div id='n_end'> N End Line: 199</div><BR>