<html><h3>Pattern ID :28841
</h3><img src='84828078.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        address = hostname
    if hostname in found: return
    if &quotec2&quot in hostname:
        s = <a id="change">subprocess.Popen([</a>"ssh", 
                              <a id="change">"-i"</a>, os.path.expanduser(os.path.join(fabfile.env.SECRETS_PATH,
                                                                    "keys/ec2.pem")),
                              address, <a id="change">"%s %s"</a><a id="change"> % </a>(command, path)<a id="change"></a>]<a id="change">, stdout=subprocess.PIPE)</a>
    else:
        s = subprocess.Popen(["ssh", "-l", NEWSBLUR_USERNAME, 
                              "-i", os.path.expanduser(os.path.join(fabfile.env.SECRETS_PATH,
                                                                    "keys/newsblur.key")),</code></pre><h3>After Change</h3><pre><code class='java'>
    elif isinstance(hostname, tuple):
        hostname, address = hostname[0], hostname[1]
    else:
        address = <a id="change">hosts[&quot_meta&quot]</a>[&quothostvars&quot][hostname][&quotansible_host&quot]
        print(" ---&gt; Following %s %s" % (hostname, address))
    if hostname in found: return
    s = subprocess.Popen(["ssh", "-l", NEWSBLUR_USERNAME, </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/samuelclay/NewsBlur/commit/b64f06c269690db9fd71886b3332cd1f3c90ef5d#diff-c1c8a82cb1d2ec3593c213ca6daf8893fca26c7282d6d89e287ae7f655bc11efL66' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84828078</div><div id='project'> Project Name: samuelclay/NewsBlur</div><div id='commit'> Commit Name: b64f06c269690db9fd71886b3332cd1f3c90ef5d</div><div id='time'> Time: 2021-03-03</div><div id='author'> Author: samuel@ofbrooklyn.com</div><div id='file'> File Name: utils/tlnb.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: follow_host(6)</div><div id='n_method'> N Method Name: follow_host(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: utils/tlnb.py</div><div id='n_file'> N File Name: utils/tlnb.py</div><div id='m_start'> M Start Line: 66</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 82</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def process_checkpoint(in_file):
    tmp_file = in_file<a id="change"> + ".tmp"</a>
    <a id="change">subprocess.Popen([&quotcp&quot</a>, in_file, tmp_file<a id="change"></a>]<a id="change">)</a>
    sha = subprocess.check_output([&quotsha256sum&quot, tmp_file]).decode()
    out_file = in_file
    if out_file.endswith(&quot.pth&quot):
        out_file = out_file[:-4]</code></pre><h3>After Change</h3><pre><code class='java'>
    checkpoint = torch.load(in_file, map_location=&quotcpu&quot)
    &#47&#47 remove optimizer for smaller file size
    if &quotoptimizer&quot in checkpoint:
        del <a id="change">checkpoint[&quotoptimizer&quot]</a>
    &#47&#47 if it is necessary to remove some sensitive data in checkpoint[&quotmeta&quot],
    &#47&#47 add the code here.
    if torch.__version__ &gt;= &quot1.6&quot:
        torch.save(checkpoint, out_file, _use_new_zipfile_serialization=False)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/westlake-ai/openmixup/commit/cb7ae3bae6ffe76f12f0c307e16325e7952f4274#diff-df2bdd976500f5594a90d51275819e5dbbc8baf1a1834b8e6327bf5707d879d8L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84828091</div><div id='project'> Project Name: westlake-ai/openmixup</div><div id='commit'> Commit Name: cb7ae3bae6ffe76f12f0c307e16325e7952f4274</div><div id='time'> Time: 2023-02-26</div><div id='author'> Author: 1070535169@qq.com</div><div id='file'> File Name: tools/model_converters/publish_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: process_checkpoint(3)</div><div id='n_method'> N Method Name: process_checkpoint(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tools/model_converters/publish_model.py</div><div id='n_file'> N File Name: tools/model_converters/publish_model.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def process_checkpoint(in_file):
    tmp_file = in_file<a id="change"> + ".tmp"</a>
    <a id="change">subprocess.Popen([&quotcp&quot</a>, in_file, tmp_file<a id="change"></a>]<a id="change">)</a>
    sha = subprocess.check_output([&quotsha256sum&quot, tmp_file]).decode()
    out_file = in_file
    if out_file.endswith(&quot.pth&quot):
        out_file = out_file[:-4]</code></pre><h3>After Change</h3><pre><code class='java'>
    checkpoint = torch.load(in_file, map_location=&quotcpu&quot)
    &#47&#47 remove optimizer for smaller file size
    if &quotoptimizer&quot in checkpoint:
        del <a id="change">checkpoint[&quotoptimizer&quot]</a>
    &#47&#47 if it is necessary to remove some sensitive data in checkpoint[&quotmeta&quot],
    &#47&#47 add the code here.
    if torch.__version__ &gt;= &quot1.6&quot:
        torch.save(checkpoint, out_file, _use_new_zipfile_serialization=False)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/westlake-ai/openbioseq/commit/f678533fb9c8c5320abdd86ba57bd50d6357835f#diff-df2bdd976500f5594a90d51275819e5dbbc8baf1a1834b8e6327bf5707d879d8L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 84828086</div><div id='project'> Project Name: westlake-ai/openbioseq</div><div id='commit'> Commit Name: f678533fb9c8c5320abdd86ba57bd50d6357835f</div><div id='time'> Time: 2023-03-05</div><div id='author'> Author: 1070535169@qq.com</div><div id='file'> File Name: tools/model_converters/publish_model.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: process_checkpoint(3)</div><div id='n_method'> N Method Name: process_checkpoint(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tools/model_converters/publish_model.py</div><div id='n_file'> N File Name: tools/model_converters/publish_model.py</div><div id='m_start'> M Start Line: 13</div><div id='m_end'> M End Line: 24</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 45</div><BR>