<html><h3>Pattern ID :545
</h3><img src='2837592.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        assert len(bbox_to_3d_loc.run(input1)["obj_3D_locs"]) == 2

    def test_formula(self, bbox_to_3d_loc):
        input1 = <a id="change">{</a>"bboxes": [np.array([0.408, 0.277, 0.894, 1.0])]<a id="change">}</a>
        output1 = bbox_to_3d_loc.run(input1)["obj_3D_locs"]
        correct_ans = np.array([0.522, 0.479, 3.942])
        assert np.isclose(output1, correct_ans, atol=1e-3).all()
</code></pre><h3>After Change</h3><pre><code class='java'>

    def test_formula(self, bbox_to_3d_loc):
        array1 = [np.array([0.408, 0.277, 0.894, 1.0])]
        <a id="change">input1 = </a><a id="change">{</a>"bboxes": array1<a id="change">}</a>
        output1 = bbox_to_3d_loc.run(input1)["obj_3D_locs"]
        correct_ans = [np.array([0.522, 0.479, 3.942])]

        np.testing.assert_almost_equal(output1, correct_ans, decimal=3)
        <a id="change">np.testing.assert_equal(input1["bboxes"]</a>, array1<a id="change">)</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-319c9e95a94f7a102b6e2af2a63ff2f883499e66ff87ec16049d0c363649b76bL42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837592</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_class'> M Class Name: TestBboxTo3dLoc</div><div id='n_method'> N Class Name: TestBboxTo3dLoc</div><div id='m_method'> M Method Name: test_formula(2)</div><div id='n_method'> N Method Name: test_formula(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

class TestBboxTo3dLoc:
    def test_no_bbox(self, bbox_to_3d_loc):
        input1 = <a id="change">{</a>"bboxes": []<a id="change">}</a>
        assert bbox_to_3d_loc.run(input1)["obj_3D_locs"] == []

    def test_multi_bboxes(self, bbox_to_3d_loc):
        input1 = {"bboxes": [np.array([0.1, 0.2, 0.3, 0.4]),</code></pre><h3>After Change</h3><pre><code class='java'>
class TestBboxTo3dLoc:
    def test_no_bbox(self, bbox_to_3d_loc):
        array1 = []
        <a id="change">input1 = </a><a id="change">{</a>"bboxes": array1<a id="change">}</a>

        assert bbox_to_3d_loc.run(input1)["obj_3D_locs"] == []
        <a id="change">np.testing.assert_equal(input1["bboxes"]</a>, array1<a id="change">)</a>

    def test_multi_bboxes(self, bbox_to_3d_loc):
        array1 = [np.array([0.1, 0.2, 0.3, 0.4]),
                  np.array([0.5, 0.6, 0.7, 0.8])]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-319c9e95a94f7a102b6e2af2a63ff2f883499e66ff87ec16049d0c363649b76bL32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837587</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_class'> M Class Name: TestBboxTo3dLoc</div><div id='n_method'> N Class Name: TestBboxTo3dLoc</div><div id='m_method'> M Method Name: test_no_bbox(2)</div><div id='n_method'> N Method Name: test_no_bbox(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_start'> M Start Line: 33</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 33</div><div id='n_end'> N End Line: 37</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert group_nearby_objs.run(input1)["obj_groups"] == []

    def test_objs_are_nearby(self, group_nearby_objs):
        input1 = <a id="change">{</a>"obj_3D_locs": [np.array([0.5, 0.5, 0.5]),
                                  np.array([0.55, 0.55, 0.55])]<a id="change">}</a>
        output1 = group_nearby_objs.run(input1)
        assert output1["obj_groups"][0] == output1["obj_groups"][1]

    def test_objs_not_nearby(self, group_nearby_objs):</code></pre><h3>After Change</h3><pre><code class='java'>
    def test_objs_are_nearby(self, group_nearby_objs):
        array1 = [np.array([0.5, 0.5, 0.5]),
                  np.array([0.55, 0.55, 0.55])]
        <a id="change">input1 = </a><a id="change">{</a>"obj_3D_locs": array1<a id="change">}</a>
        output1 = group_nearby_objs.run(input1)

        assert output1["obj_groups"][0] == output1["obj_groups"][1]
        assert input1["obj_3D_locs"] == array1
        <a id="change">np.testing.assert_equal(input1["obj_3D_locs"]</a>, array1<a id="change">)</a>

    def test_objs_not_nearby(self, group_nearby_objs):
        array1 = [np.array([0.1, 0.1, 0.1]),
                  np.array([0.1, 0.1, 3.0]),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-330bcf4e4da99075af1514ec6cb2c3f9dfd1bc1adc2b16df5c054ced22a467c3L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837586</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_class'> M Class Name: TestGroupNearbyObjs</div><div id='n_method'> N Class Name: TestGroupNearbyObjs</div><div id='m_method'> M Method Name: test_objs_are_nearby(2)</div><div id='n_method'> N Method Name: test_objs_are_nearby(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 37</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 46</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert bbox_to_3d_loc.run(input1)["obj_3D_locs"] == []

    def test_multi_bboxes(self, bbox_to_3d_loc):
        input1 = <a id="change">{</a>"bboxes": [np.array([0.1, 0.2, 0.3, 0.4]),
                             np.array([0.5, 0.6, 0.7, 0.8])]<a id="change">}</a>
        assert len(bbox_to_3d_loc.run(input1)["obj_3D_locs"]) == 2

    def test_formula(self, bbox_to_3d_loc):
        input1 = {"bboxes": [np.array([0.408, 0.277, 0.894, 1.0])]}</code></pre><h3>After Change</h3><pre><code class='java'>
    def test_multi_bboxes(self, bbox_to_3d_loc):
        array1 = [np.array([0.1, 0.2, 0.3, 0.4]),
                  np.array([0.5, 0.6, 0.7, 0.8])]
        <a id="change">input1 = </a><a id="change">{</a>"bboxes": array1<a id="change">}</a>

        assert len(bbox_to_3d_loc.run(input1)["obj_3D_locs"]) == 2
        <a id="change">np.testing.assert_equal(input1["bboxes"]</a>, array1<a id="change">)</a>

    def test_formula(self, bbox_to_3d_loc):
        array1 = [np.array([0.408, 0.277, 0.894, 1.0])]
        input1 = {"bboxes": array1}</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-319c9e95a94f7a102b6e2af2a63ff2f883499e66ff87ec16049d0c363649b76bL36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837591</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_class'> M Class Name: TestBboxTo3dLoc</div><div id='n_method'> N Class Name: TestBboxTo3dLoc</div><div id='m_method'> M Method Name: test_multi_bboxes(2)</div><div id='n_method'> N Method Name: test_multi_bboxes(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py</div><div id='m_start'> M Start Line: 37</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 40</div><div id='n_end'> N End Line: 45</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert output1["obj_groups"][2] != output1["obj_groups"][0]

    def test_multi_separate_groups(self, group_nearby_objs):
        input1 = <a id="change">{</a>"obj_3D_locs": [np.array([0.1, 0.1, 0.1]),
                                  np.array([0.1, 0.1, 6.0]),
                                  np.array([0.1, 0.1, 1.0]),
                                  np.array([0.1, 0.1, 5.0])]<a id="change">}</a>
        &#47&#47 should get something like [0, 1, 0, 1]
        output1 = group_nearby_objs.run(input1)
        assert output1["obj_groups"][0] != output1["obj_groups"][1]
        assert output1["obj_groups"][0] == output1["obj_groups"][2]</code></pre><h3>After Change</h3><pre><code class='java'>
                  np.array([0.1, 0.1, 6.0]),
                  np.array([0.1, 0.1, 1.0]),
                  np.array([0.1, 0.1, 5.0])]
        <a id="change">input1 = </a><a id="change">{</a>"obj_3D_locs": array1<a id="change">}</a>
        &#47&#47 should get something like [0, 1, 0, 1]
        output1 = group_nearby_objs.run(input1)

        assert output1["obj_groups"][0] != output1["obj_groups"][1]
        assert output1["obj_groups"][0] == output1["obj_groups"][2]
        assert output1["obj_groups"][1] == output1["obj_groups"][3]
        <a id="change">np.testing.assert_equal(input1["obj_3D_locs"]</a>, array1<a id="change">)</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-330bcf4e4da99075af1514ec6cb2c3f9dfd1bc1adc2b16df5c054ced22a467c3L51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837590</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_class'> M Class Name: TestGroupNearbyObjs</div><div id='n_method'> N Class Name: TestGroupNearbyObjs</div><div id='m_method'> M Method Name: test_multi_separate_groups(2)</div><div id='n_method'> N Method Name: test_multi_separate_groups(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 73</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

class TestGroupNearbyObjs:
    def test_no_3D_locs(self, group_nearby_objs):
        input1 = <a id="change">{</a>"obj_3D_locs": []<a id="change">}</a>
        assert group_nearby_objs.run(input1)["obj_groups"] == []

    def test_objs_are_nearby(self, group_nearby_objs):
        input1 = {"obj_3D_locs": [np.array([0.5, 0.5, 0.5]),</code></pre><h3>After Change</h3><pre><code class='java'>
class TestGroupNearbyObjs:
    def test_no_3D_locs(self, group_nearby_objs):
        array1 = []
        <a id="change">input1 = </a><a id="change">{</a>"obj_3D_locs": array1<a id="change">}</a>

        assert group_nearby_objs.run(input1)["obj_groups"] == []
        <a id="change">np.testing.assert_equal(input1["obj_3D_locs"]</a>, array1<a id="change">)</a>

    def test_objs_are_nearby(self, group_nearby_objs):
        array1 = [np.array([0.5, 0.5, 0.5]),
                  np.array([0.55, 0.55, 0.55])]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-330bcf4e4da99075af1514ec6cb2c3f9dfd1bc1adc2b16df5c054ced22a467c3L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837589</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_class'> M Class Name: TestGroupNearbyObjs</div><div id='n_method'> N Class Name: TestGroupNearbyObjs</div><div id='m_method'> M Method Name: test_no_3D_locs(2)</div><div id='n_method'> N Method Name: test_no_3D_locs(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_start'> M Start Line: 32</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 32</div><div id='n_end'> N End Line: 36</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        assert output1["obj_groups"][0] == output1["obj_groups"][1]

    def test_objs_not_nearby(self, group_nearby_objs):
        input1 = <a id="change">{</a>"obj_3D_locs": [np.array([0.1, 0.1, 0.1]),
                                  np.array([0.1, 0.1, 3.0]),
                                  np.array([0.1, 0.1, 6.0])]<a id="change">}</a>
        &#47&#47 all different groups, should get [0, 1, 2]
        output1 = group_nearby_objs.run(input1)
        assert output1["obj_groups"][0] != output1["obj_groups"][1]
        assert output1["obj_groups"][1] != output1["obj_groups"][2]</code></pre><h3>After Change</h3><pre><code class='java'>
        array1 = [np.array([0.1, 0.1, 0.1]),
                  np.array([0.1, 0.1, 3.0]),
                  np.array([0.1, 0.1, 6.0])]
        <a id="change">input1 = </a><a id="change">{</a>"obj_3D_locs": array1<a id="change">}</a>
        &#47&#47 all different groups, should get [0, 1, 2]
        output1 = group_nearby_objs.run(input1)

        assert output1["obj_groups"][0] != output1["obj_groups"][1]
        assert output1["obj_groups"][1] != output1["obj_groups"][2]
        assert output1["obj_groups"][2] != output1["obj_groups"][0]
        <a id="change">np.testing.assert_equal(input1["obj_3D_locs"]</a>, array1<a id="change">)</a>

    def test_multi_separate_groups(self, group_nearby_objs):
        array1 = [np.array([0.1, 0.1, 0.1]),
                  np.array([0.1, 0.1, 6.0]),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67#diff-330bcf4e4da99075af1514ec6cb2c3f9dfd1bc1adc2b16df5c054ced22a467c3L41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2837588</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: e411b8d4e72fee456e7dd5ad0c8cd0e58e56be67</div><div id='time'> Time: 2021-05-17</div><div id='author'> Author: leeping_ng@hotmail.com</div><div id='file'> File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_class'> M Class Name: TestGroupNearbyObjs</div><div id='n_method'> N Class Name: TestGroupNearbyObjs</div><div id='m_method'> M Method Name: test_objs_not_nearby(2)</div><div id='n_method'> N Method Name: test_objs_not_nearby(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='n_file'> N File Name: tests/pipeline/nodes/heuristic/test_group_nearby_objs.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 59</div><BR>