<html><h3>Pattern ID :33993
</h3><img src='97366255.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &quot&quot&quot
        if self.mixed_precision:
            with self.autocast():
                output = <a id="change">self.forward(</a>*<a id="change">train_X)</a><a id="change"> if </a><a id="change">self.args_segmentate(train_X</a><a id="change">) else self.forward(train_X</a><a id="change">)</a>
                loss_detail = self.criterion(output, train_y)
        else:
            output = self.forward(*train_X) if self.args_segmentate(train_X) else self.forward(train_X)
            loss_detail = self.criterion(output, train_y)</code></pre><h3>After Change</h3><pre><code class='java'>
        &quot&quot&quot
        if self.mixed_precision:
            with self.autocast():
                output = <a id="change">self.forward_(</a>train_X<a id="change">)</a>
                loss_detail = self.criterion(output, train_y)
        else:
            output = self.forward_(train_X)
            loss_detail = self.criterion(output, train_y)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tongjilibo/torch4keras/commit/59576585eb309c5606fdba3ca387577d45c78650#diff-581b94b0f4bd7b79c5687e60861daad8735c94a1a220b1276f1933d3044c5c06L106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97366255</div><div id='project'> Project Name: tongjilibo/torch4keras</div><div id='commit'> Commit Name: 59576585eb309c5606fdba3ca387577d45c78650</div><div id='time'> Time: 2023-01-23</div><div id='author'> Author: lb@libos-MacBook-Pro.local</div><div id='file'> File Name: torch4keras/model.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: train_step(3)</div><div id='n_method'> N Method Name: train_step(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch4keras/model.py</div><div id='n_file'> N File Name: torch4keras/model.py</div><div id='m_start'> M Start Line: 106</div><div id='m_end'> M End Line: 109</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                output = self.forward(*train_X) if self.args_segmentate(train_X) else self.forward(train_X)
                loss_detail = self.criterion(output, train_y)
        else:
            output = <a id="change">self.forward(</a>*<a id="change">train_X)</a><a id="change"> if </a><a id="change">self.args_segmentate(</a>train_X<a id="change">) else self.forward(</a>train_X<a id="change">)</a>
            loss_detail = self.criterion(output, train_y)

        &#47&#47 整理loss
        if isinstance(loss_detail, torch.Tensor):</code></pre><h3>After Change</h3><pre><code class='java'>
                output = self.forward_(train_X)
                loss_detail = self.criterion(output, train_y)
        else:
            output = <a id="change">self.forward_(</a>train_X<a id="change">)</a>
            loss_detail = self.criterion(output, train_y)

        &#47&#47 整理loss
        if isinstance(loss_detail, torch.Tensor):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/torch4keras/commit/6436c9d61f225c0775a1e7868f6d82509a82831e#diff-581b94b0f4bd7b79c5687e60861daad8735c94a1a220b1276f1933d3044c5c06L98' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97366249</div><div id='project'> Project Name: tongjilibo/torch4keras</div><div id='commit'> Commit Name: 6436c9d61f225c0775a1e7868f6d82509a82831e</div><div id='time'> Time: 2023-02-09</div><div id='author'> Author: tongjilibo@163.com</div><div id='file'> File Name: torch4keras/model.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: train_step(3)</div><div id='n_method'> N Method Name: train_step(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch4keras/model.py</div><div id='n_file'> N File Name: torch4keras/model.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 111</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                output = self.forward(*train_X) if self.args_segmentate(train_X) else self.forward(train_X)
                loss_detail = self.criterion(output, train_y)
        else:
            output = <a id="change">self.forward(</a>*<a id="change">train_X)</a><a id="change"> if </a><a id="change">self.args_segmentate(</a>train_X<a id="change">) else self.forward(</a>train_X<a id="change">)</a>
            loss_detail = self.criterion(output, train_y)

        if isinstance(loss_detail, torch.Tensor):
            loss = loss_detail</code></pre><h3>After Change</h3><pre><code class='java'>
                output = self.forward_(train_X)
                loss_detail = self.criterion(output, train_y)
        else:
            output = <a id="change">self.forward_(</a>train_X<a id="change">)</a>
            loss_detail = self.criterion(output, train_y)

        if isinstance(loss_detail, torch.Tensor):
            loss = loss_detail</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/torch4keras/commit/59576585eb309c5606fdba3ca387577d45c78650#diff-581b94b0f4bd7b79c5687e60861daad8735c94a1a220b1276f1933d3044c5c06L97' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97366250</div><div id='project'> Project Name: tongjilibo/torch4keras</div><div id='commit'> Commit Name: 59576585eb309c5606fdba3ca387577d45c78650</div><div id='time'> Time: 2023-01-23</div><div id='author'> Author: lb@libos-MacBook-Pro.local</div><div id='file'> File Name: torch4keras/model.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: train_step(3)</div><div id='n_method'> N Method Name: train_step(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch4keras/model.py</div><div id='n_file'> N File Name: torch4keras/model.py</div><div id='m_start'> M Start Line: 106</div><div id='m_end'> M End Line: 109</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 113</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        :return: Any, 预测输出
        &quot&quot&quot
        self.get_module().eval()
        output = <a id="change">self.forward(</a>*<a id="change">train_X)</a><a id="change"> if </a><a id="change">self.args_segmentate(</a>train_X<a id="change">) else self.forward(</a>train_X<a id="change">)</a>
        if return_all is None:
            return output
        elif isinstance(output, (tuple, list)) and isinstance(return_all, int) and return_all &lt; len(output):
            return output[return_all]</code></pre><h3>After Change</h3><pre><code class='java'>
        :return: Any, 预测输出
        &quot&quot&quot
        self.get_module().eval()
        output = <a id="change">self.forward_(</a>train_X<a id="change">)</a>
        if return_all is None:
            return output
        elif isinstance(output, (tuple, list)) and isinstance(return_all, int) and return_all &lt; len(output):
            return output[return_all]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/torch4keras/commit/6436c9d61f225c0775a1e7868f6d82509a82831e#diff-581b94b0f4bd7b79c5687e60861daad8735c94a1a220b1276f1933d3044c5c06L287' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97366245</div><div id='project'> Project Name: tongjilibo/torch4keras</div><div id='commit'> Commit Name: 6436c9d61f225c0775a1e7868f6d82509a82831e</div><div id='time'> Time: 2023-02-09</div><div id='author'> Author: tongjilibo@163.com</div><div id='file'> File Name: torch4keras/model.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: predict(3)</div><div id='n_method'> N Method Name: predict(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch4keras/model.py</div><div id='n_file'> N File Name: torch4keras/model.py</div><div id='m_start'> M Start Line: 295</div><div id='m_end'> M End Line: 295</div><div id='n_start'> N Start Line: 297</div><div id='n_end'> N End Line: 297</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        :return: Any, 预测输出
        &quot&quot&quot
        self.get_module().eval()
        output = <a id="change">self.forward(</a>*<a id="change">train_X)</a><a id="change"> if </a><a id="change">self.args_segmentate(</a>train_X<a id="change">) else self.forward(</a>train_X<a id="change">)</a>
        if return_all is None:
            return output
        elif isinstance(output, (tuple, list)) and isinstance(return_all, int) and return_all &lt; len(output):
            return output[return_all]</code></pre><h3>After Change</h3><pre><code class='java'>
        :return: Any, 预测输出
        &quot&quot&quot
        self.get_module().eval()
        output = <a id="change">self.forward_(</a>train_X<a id="change">)</a>
        if return_all is None:
            return output
        elif isinstance(output, (tuple, list)) and isinstance(return_all, int) and return_all &lt; len(output):
            return output[return_all]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tongjilibo/torch4keras/commit/59576585eb309c5606fdba3ca387577d45c78650#diff-581b94b0f4bd7b79c5687e60861daad8735c94a1a220b1276f1933d3044c5c06L284' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 97366246</div><div id='project'> Project Name: tongjilibo/torch4keras</div><div id='commit'> Commit Name: 59576585eb309c5606fdba3ca387577d45c78650</div><div id='time'> Time: 2023-01-23</div><div id='author'> Author: lb@libos-MacBook-Pro.local</div><div id='file'> File Name: torch4keras/model.py</div><div id='m_class'> M Class Name: Trainer</div><div id='n_method'> N Class Name: Trainer</div><div id='m_method'> M Method Name: predict(3)</div><div id='n_method'> N Method Name: predict(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch4keras/model.py</div><div id='n_file'> N File Name: torch4keras/model.py</div><div id='m_start'> M Start Line: 292</div><div id='m_end'> M End Line: 292</div><div id='n_start'> N Start Line: 296</div><div id='n_end'> N End Line: 296</div><BR>