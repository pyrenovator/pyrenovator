<html><h3>Pattern ID :15191
</h3><img src='51382480.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        gamma = 0.9
        xs = [0, 0.25, 0.5, 0.75, 1, 0.75, 0.50, 0.25, 0, 0.25, 0.5, 0.75, 1]
        lr_target_1 = <a id="change">list(</a><a id="change">map(</a>lambda x: base_lr_1 + x[1] * diff_lr_1 * gamma**x[0], enumerate(xs)<a id="change">))</a>
        lr_target_2 = list(map(lambda x: base_lr_2 + x[1] * diff_lr_2 * gamma**x[0], enumerate(xs)))
        lr_targets = [lr_target_1, lr_target_2]
        momentum_target_1 = list(map(lambda x: max_lr_1 - x[1] * diff_lr_1 * gamma**x[0], enumerate(xs)))
        momentum_target_2 = list(map(lambda x: max_lr_2 - x[1] * diff_lr_2 * gamma**x[0], enumerate(xs)))</code></pre><h3>After Change</h3><pre><code class='java'>
        lr_target_1 = [base_lr_1 + x * diff_lr_1 * gamma**i for i, x in enumerate(xs)]
        lr_target_2 = [base_lr_2 + x * diff_lr_2 * gamma**i for i, x in enumerate(xs)]
        lr_targets = [lr_target_1, lr_target_2]
        momentum_target_1 = <a id="change">[max_lr_1 - x * diff_lr_1 * gamma**i for i, x in enumerate(xs)]</a>
        momentum_target_2 = [max_lr_2 - x * diff_lr_2 * gamma**i for i, x in enumerate(xs)]
        momentum_targets = [momentum_target_1, momentum_target_2]
        scheduler = CyclicLR(self.opt, base_lr=[base_lr_1, base_lr_2],
                             max_lr=[max_lr_1, max_lr_2], step_size_up=4,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/5b0f40048899e398d286fe7b55f297991f93ba2c#diff-f2b37d0b5812153acf9ff1e337d375c5cad0076c4ddc30535ec2d55c8ac9b770L1265' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 51382480</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 5b0f40048899e398d286fe7b55f297991f93ba2c</div><div id='time'> Time: 2020-10-19</div><div id='author'> Author: alexander.grund@tu-dresden.de</div><div id='file'> File Name: test/test_optim.py</div><div id='m_class'> M Class Name: TestLRScheduler</div><div id='n_method'> N Class Name: TestLRScheduler</div><div id='m_method'> M Method Name: test_cycle_lr_exp_range_mode(1)</div><div id='n_method'> N Method Name: test_cycle_lr_exp_range_mode(1)</div><div id='m_parent_class'> M Parent Class: TestCase</div><div id='n_parent_class'> N Parent Class: TestCase</div><div id='m_file'> M File Name: test/test_optim.py</div><div id='n_file'> N File Name: test/test_optim.py</div><div id='m_start'> M Start Line: 1269</div><div id='m_end'> M End Line: 1274</div><div id='n_start'> N Start Line: 1265</div><div id='n_end'> N End Line: 1274</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        diff_lr = max_lr - base_lr
        gamma = 0.9
        xs = [0, 0.25, 0.5, 0.75, 1, 0.75, 0.50, 0.25, 0, 0.25, 0.5, 0.75, 1]
        lr_target = <a id="change">list(</a><a id="change">map(</a>lambda x: base_lr + x[1] * diff_lr * gamma**x[0], enumerate(xs)<a id="change">))</a>
        momentum_target = list(map(lambda x: max_lr - x[1] * diff_lr * gamma**x[0], enumerate(xs)))
        lr_targets = [lr_target, lr_target]
        momentum_targets = [momentum_target, momentum_target]
        scheduler = CyclicLR(self.opt, base_lr=base_lr,</code></pre><h3>After Change</h3><pre><code class='java'>
        gamma = 0.9
        xs = [0, 0.25, 0.5, 0.75, 1, 0.75, 0.50, 0.25, 0, 0.25, 0.5, 0.75, 1]
        lr_target = [base_lr + x * diff_lr * gamma**i for i, x in enumerate(xs)]
        momentum_target = <a id="change">[max_lr - x * diff_lr * gamma**i for i, x in enumerate(xs)]</a>
        lr_targets = [lr_target, lr_target]
        momentum_targets = [momentum_target, momentum_target]
        scheduler = CyclicLR(self.opt, base_lr=base_lr,
                             max_lr=max_lr, step_size_up=4,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pytorch/pytorch/commit/5b0f40048899e398d286fe7b55f297991f93ba2c#diff-f2b37d0b5812153acf9ff1e337d375c5cad0076c4ddc30535ec2d55c8ac9b770L1220' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 51382488</div><div id='project'> Project Name: pytorch/pytorch</div><div id='commit'> Commit Name: 5b0f40048899e398d286fe7b55f297991f93ba2c</div><div id='time'> Time: 2020-10-19</div><div id='author'> Author: alexander.grund@tu-dresden.de</div><div id='file'> File Name: test/test_optim.py</div><div id='m_class'> M Class Name: TestLRScheduler</div><div id='n_method'> N Class Name: TestLRScheduler</div><div id='m_method'> M Method Name: test_cycle_lr_exp_range_mode_one_lr(1)</div><div id='n_method'> N Method Name: test_cycle_lr_exp_range_mode_one_lr(1)</div><div id='m_parent_class'> M Parent Class: TestCase</div><div id='n_parent_class'> N Parent Class: TestCase</div><div id='m_file'> M File Name: test/test_optim.py</div><div id='n_file'> N File Name: test/test_optim.py</div><div id='m_start'> M Start Line: 1224</div><div id='m_end'> M End Line: 1226</div><div id='n_start'> N Start Line: 1222</div><div id='n_end'> N End Line: 1226</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    elif T % 3 == 1:
        ordering = list(map(lambda x: (x*((2*T+1)//3)) % T, range(T)))
    else:
        ordering = <a id="change">list(</a><a id="change">map(</a>lambda x: (x*((T+1)//3)) % T, range(T)<a id="change">))</a>
    return inputs.reshape(N, T, C, H, W)[:,ordering,:,:,:].view(N, -1, H, W)

def get_input_reshape_func(split):
    &quot&quot&quot</code></pre><h3>After Change</h3><pre><code class='java'>
    if T % 3 == 0:
        ordering = [int(x*(T/3) + x//3) % T for x in range(T)]
    elif T % 3 == 1:
        ordering = <a id="change">[(x*((2*T+1)//3)) % T for x in range(T)]</a>
    else:
        ordering = [(x*((T+1)//3)) % T for x in range(T)]
    return inputs.reshape(N, T, C, H, W)[:,ordering,:,:,:].view(N, -1, H, W)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kiyoon/pyvideoai/commit/ef91a7d69cb67c6eef76a8769e89258d48767a9f#diff-2a9d76a93b1094484455742b63c51f726fc60299fbc98c679018e87b7575fee8L92' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 51382431</div><div id='project'> Project Name: kiyoon/pyvideoai</div><div id='commit'> Commit Name: ef91a7d69cb67c6eef76a8769e89258d48767a9f</div><div id='time'> Time: 2021-07-30</div><div id='author'> Author: yoonkr33@gmail.com</div><div id='file'> File Name: exp_configs/ch_tcswap/sparsesample_OrderedTCswap_crop224_8frame_largejit_plateau_10scrop.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _dataloader_shape_to_model_input_shape(1)</div><div id='n_method'> N Method Name: _dataloader_shape_to_model_input_shape(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: exp_configs/ch_tcswap/sparsesample_OrderedTCswap_crop224_8frame_largejit_plateau_10scrop.py</div><div id='n_file'> N File Name: exp_configs/ch_tcswap/sparsesample_OrderedTCswap_crop224_8frame_largejit_plateau_10scrop.py</div><div id='m_start'> M Start Line: 96</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 96</div><div id='n_end'> N End Line: 100</div><BR>