<html><h3>Pattern ID :21202
</h3><img src='67850379.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            wers += wer(pred,gold)/length
        except:
            print(pred, gold)
            <a id="change">assert </a>1==0
    return cers/btz, wers/btz

def wer(s1, s2):</code></pre><h3>After Change</h3><pre><code class='java'>
    preds_str = seq_to_str(preds, id2char)
    golds_str = seq_to_str(targets, id2char)
    for i, (pred,gold) in enumerate(zip(preds_str,golds_str)):
        <a id="change">if gold==""</a>:
            only unk token
            length = len(<a id="change">golds[i][1:-1]</a>)
            cers<a id="change"> += </a>cer(pred,gold)/length
            length = 1
            wers += wer(pred,gold)/length
        else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/qute012/kosr/commit/5414e9d3b552ea9750ab79d41e30625cf22815ab#diff-0ee864170a25b9dba599ec2aec273878a4dffb05507fbec7c1f7e9bbc946691aL7' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67850379</div><div id='project'> Project Name: qute012/kosr</div><div id='commit'> Commit Name: 5414e9d3b552ea9750ab79d41e30625cf22815ab</div><div id='time'> Time: 2021-01-28</div><div id='author'> Author: ejrwls012@gmail.com</div><div id='file'> File Name: kosr/utils/metrics.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: metrics(2)</div><div id='n_method'> N Method Name: metrics(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: kosr/utils/metrics.py</div><div id='n_file'> N File Name: kosr/utils/metrics.py</div><div id='m_start'> M Start Line: 12</div><div id='m_end'> M End Line: 20</div><div id='n_start'> N Start Line: 7</div><div id='n_end'> N End Line: 23</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def forward(self, idx):
        B, T = idx.size()
        <a id="change">assert </a>T &lt;= self.args.ctx_len, "Cannot forward, model ctx_len is exhausted."

        x = self.emb(idx)
</code></pre><h3>After Change</h3><pre><code class='java'>
        assert T &lt;= args.ctx_len, "Cannot forward, model ctx_len is exhausted."

        x = self.emb(idx)
        <a id="change">if args.my_pos_emb &gt; 0</a>:
            pos_emb = <a id="change">(self.pos_emb_x + self.pos_emb_y).reshape(T+1, -1)[:-1,:]</a>
            x<a id="change"> = </a>x + pos_emb

        for block in self.blocks:
            if args.grad_cp == 1:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/blinkdl/rwkv-lm/commit/147931567786f616fad63303a782c7d11cc0566e#diff-6eba7ffecaf7b1f3c9b254a3089d1dc3373b8e48e81e829d8432bac461ca416aL334' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67850378</div><div id='project'> Project Name: blinkdl/rwkv-lm</div><div id='commit'> Commit Name: 147931567786f616fad63303a782c7d11cc0566e</div><div id='time'> Time: 2022-09-29</div><div id='author'> Author: a@a.com</div><div id='file'> File Name: RWKV-v4neo/src/model.py</div><div id='m_class'> M Class Name: RWKV</div><div id='n_method'> N Class Name: RWKV</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: pl.LightningModule</div><div id='n_parent_class'> N Parent Class: pl.LightningModule</div><div id='m_file'> M File Name: RWKV-v4neo/src/model.py</div><div id='n_file'> N File Name: RWKV-v4neo/src/model.py</div><div id='m_start'> M Start Line: 336</div><div id='m_end'> M End Line: 351</div><div id='n_start'> N Start Line: 338</div><div id='n_end'> N End Line: 358</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    if channel_last:
        assert all([n is not None for n in input_shape[1:-1]]), none_dim_msg
    else:
        <a id="change">assert </a>all([n is not None for n in input_shape[2:]]), none_dim_msg

    if isinstance(kernel_size, int):
        _kernel_size = list(repeat(kernel_size, dim))</code></pre><h3>After Change</h3><pre><code class='java'>
    none_dim_msg = "spatial dimensions should be all `None`, or all not `None`"
    if channel_last:
        if all([n is None for n in input_shape[1:-1]]):
            <a id="change">if out_channels is None</a>:
                raise ValueError("out channel dimension and spatial dimensions are all `None`")
            output_shape<a id="change"> = </a>tuple(<a id="change">input_shape[:-1]</a> + [out_channels])
            return output_shape
        elif any([n is None for n in input_shape[1:-1]]):
            raise ValueError(none_dim_msg)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/deeppsp/torch_ecg/commit/1da740294ea34330b8cce75ff62f8d575e7de994#diff-52ed9d3fb708e19d44c401863d1b8254ecde3c6cb0014fc2bf726b1cd0cea01cL63' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 67850382</div><div id='project'> Project Name: deeppsp/torch_ecg</div><div id='commit'> Commit Name: 1da740294ea34330b8cce75ff62f8d575e7de994</div><div id='time'> Time: 2020-10-16</div><div id='author'> Author: wenh06@gmail.com</div><div id='file'> File Name: torch_ecg/utils/utils_nn.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: compute_output_shape(9)</div><div id='n_method'> N Method Name: compute_output_shape(9)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torch_ecg/utils/utils_nn.py</div><div id='n_file'> N File Name: torch_ecg/utils/utils_nn.py</div><div id='m_start'> M Start Line: 125</div><div id='m_end'> M End Line: 127</div><div id='n_start'> N Start Line: 129</div><div id='n_end'> N End Line: 147</div><BR>