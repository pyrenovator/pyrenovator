<html><h3>Pattern ID :39208
</h3><img src='111380643.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def read_text(self, pipeline):
        Read from text
        <a id="change">return </a>pipeline | "ReadText" &gt;&gt; beam.io.ReadFromText(
            file_pattern=os.path.join(self.artifact.uri, "*")
        )
</code></pre><h3>After Change</h3><pre><code class='java'>
            skip_header_lines=True,
        )

        <a id="change">if read_header</a>:
            wildcard_qualifier<a id="change"> = </a>"*"
            file_pattern = os.path.join(self.artifact.uri, wildcard_qualifier)

            csv_files = path_utils.list_dir(self.artifact.uri)
            if not csv_files:
                raise RuntimeError(
                    &quotSplit pattern {} does not match any files.&quot.format(
                        file_pattern))

            &#47&#47 weed out bad file exts with this logic
            allowed_file_exts = [".csv", ".txt"]  &#47&#47 ".dat"
            csv_files = [uri for uri in csv_files
                         if Path(uri).suffix in allowed_file_exts]

            logger.info(f&quotMatched {len(csv_files)}: {csv_files}&quot)

            &#47&#47 Always use header from file
            <a id="change">logger.info(f&quotUsing header from file: {csv_files[0]}.&quot</a><a id="change">)</a>
            header<a id="change"> = </a>",".join(path_utils.load_csv_header(csv_files[0]))

            return header, pipeline
        else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/649aac642d0aba2e1368f615a882982a6a71ce3d#diff-63ec5dc95603e8be93aaab8af9c348424ca3bf498fddf8ef7c3ae2341bc800c0L31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111380643</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 649aac642d0aba2e1368f615a882982a6a71ce3d</div><div id='time'> Time: 2021-10-04</div><div id='author'> Author: bariscandurak@hotmail.com</div><div id='file'> File Name: src/zenml/materializers/beam_materializer.py</div><div id='m_class'> M Class Name: BeamMaterializer</div><div id='n_method'> N Class Name: BeamMaterializer</div><div id='m_method'> M Method Name: read_text(3)</div><div id='n_method'> N Method Name: read_text(2)</div><div id='m_parent_class'> M Parent Class: BaseMaterializer</div><div id='n_parent_class'> N Parent Class: BaseMaterializer</div><div id='m_file'> M File Name: src/zenml/materializers/beam_materializer.py</div><div id='n_file'> N File Name: src/zenml/materializers/beam_materializer.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 33</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 66</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    dataset = dataset.shuffle(store.buffer_size).batch(
        store.batch_size, drop_remainder=True
    )
    <a id="change">return </a>total_token_count, dataset


@tf.autograph.experimental.do_not_convert</code></pre><h3>After Change</h3><pre><code class='java'>
    def recover(x, y):
        return y

    <a id="change">if store.validation_split</a>:
        logging.info("Creating validation dataset")
        validation_dataset<a id="change"> = </a>full_dataset.enumerate() \
            .filter(is_validation) \
            .map(recover)
        <a id="change">logging.info("Creating training dataset"</a><a id="change">)</a>
        train_dataset<a id="change"> = </a>full_dataset.enumerate() \
            .filter(is_train) \
            .map(recover)
        return total_token_count, validation_dataset, train_dataset</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gretelai/gretel-synthetics/commit/b7d4cb60265333b560fdcf6468e29f9b24535e26#diff-6d7c5cdfdf10760aba443aa56e200cd08c090327fd78774cdb37af276f4bd5d7L247' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111380612</div><div id='project'> Project Name: gretelai/gretel-synthetics</div><div id='commit'> Commit Name: b7d4cb60265333b560fdcf6468e29f9b24535e26</div><div id='time'> Time: 2021-04-30</div><div id='author'> Author: zredlined@users.noreply.github.com</div><div id='file'> File Name: src/gretel_synthetics/tensorflow/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _create_dataset(4)</div><div id='n_method'> N Method Name: _create_dataset(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/gretel_synthetics/tensorflow/train.py</div><div id='n_file'> N File Name: src/gretel_synthetics/tensorflow/train.py</div><div id='m_start'> M Start Line: 257</div><div id='m_end'> M End Line: 270</div><div id='n_start'> N Start Line: 274</div><div id='n_end'> N End Line: 310</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        optimizer_class)
    optimizer_kwargs[&quotweight_decay&quot] = weight_decay

  <a id="change">return </a>optimizer_class(**optimizer_kwargs)


def renset50_learning_rate_schedule(base_learning_rate, steps_per_epoch):</code></pre><h3>After Change</h3><pre><code class='java'>
    optimizer_kwargs[&quotweight_decay&quot] = weight_decay

  optimizer = optimizer_class(**optimizer_kwargs)
  <a id="change">if </a>model:
    decay_var_list<a id="change"> = </a>[]
    skipped_variables = []
    for var in model.trainable_variables:
      if &quotkernel&quot in var.name or &quotbias&quot in var.name:
        decay_var_list.append(var)
      else:
        skipped_variables.append(var)
    <a id="change">logging.info(
        &quotNot applying weight decay to the following variables:\n%s&quot</a>,
        &quot\n&quot.join([var.name for var in skipped_variables])<a id="change">)</a>
  else:
    decay_var_list<a id="change"> = </a>[]
  optimizer.apply_gradients = functools.partial(
      optimizer.apply_gradients, decay_var_list=decay_var_list)
  return optimizer</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/google/uncertainty-baselines/commit/feffa7c258f687633f8f3118da9059173f40d866#diff-69ef65ca7cf95b1ffe9ba62d29f1c5e733cb1ed65cca2e4d34bbbabbc36660c8L26' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 111380571</div><div id='project'> Project Name: google/uncertainty-baselines</div><div id='commit'> Commit Name: feffa7c258f687633f8f3118da9059173f40d866</div><div id='time'> Time: 2020-08-04</div><div id='author'> Author: no-reply@google.com</div><div id='file'> File Name: uncertainty_baselines/optimizers.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get(6)</div><div id='n_method'> N Method Name: get(5)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: uncertainty_baselines/optimizers.py</div><div id='n_file'> N File Name: uncertainty_baselines/optimizers.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 78</div><div id='n_start'> N Start Line: 35</div><div id='n_end'> N End Line: 99</div><BR>