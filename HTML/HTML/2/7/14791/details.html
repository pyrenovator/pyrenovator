<html><h3>Pattern ID :14791
</h3><img src='48656295.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        layers.append(MiniBatchStd())
        layers += [
            EqualizedConv2d(resl2ch[4]+1, <a id="change">resl2ch[4]</a>, 3, padding=1, bias=False),
            FusedLeakyReLU(resl2ch[4]),
            Flatten(),
            EqualizedLinear(resl2ch[4]*4**2, resl2ch[4]),</code></pre><h3>After Change</h3><pre><code class='java'>
            Conv2d(&quotelr&quot, image_channels, ochannels, 1),
            nn.LeakyReLU(0.2, inplace=True)
        )
        resl<a id="change"> = </a>image_size
        blocks = []
        <a id="change">while resl &gt; 4</a><a id="change">:
            </a>resl<a id="change"> = </a>resl // 2
            channels<a id="change"> *= </a>2
            ichannels, ochannels = ochannels, check_c(channels)
            blocks.append(
                DBlock(ichannels, ochannels, block_num_conv)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/stomoya/animeface/commit/b3652bae109c713da926d5532eb014b02135da52#diff-0383c3e0d2575e5076916c51cfa38d4b02353d9aef3e245e35d328bb2169f279L354' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48656295</div><div id='project'> Project Name: stomoya/animeface</div><div id='commit'> Commit Name: b3652bae109c713da926d5532eb014b02135da52</div><div id='time'> Time: 2020-12-14</div><div id='author'> Author: blackie0110@gmail.com</div><div id='file'> File Name: implementations/StyleGAN2/model.py</div><div id='m_class'> M Class Name: Discriminator</div><div id='n_method'> N Class Name: Discriminator</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: implementations/StyleGAN2/model.py</div><div id='n_file'> N File Name: implementations/StyleGAN2/model.py</div><div id='m_start'> M Start Line: 354</div><div id='m_end'> M End Line: 387</div><div id='n_start'> N Start Line: 364</div><div id='n_end'> N End Line: 389</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                tot_env_steps += 1

                &#47&#47 save
                value = <a id="change">self.agent.estimate_value(obs)[0]</a>
                self.buffer.add_transition(obs, action, reward, value, log_prob)
                obs = next_obs

                timeout = traj_length == self.max_trajectory_length</code></pre><h3>After Change</h3><pre><code class='java'>

            self.buffer.clear()
            sample_start_time = time()
            env_steps<a id="change"> = </a>0
            num_sampled_trajs = 0
            <a id="change">while env_steps &lt; self.num_env_steps_per_epoch</a><a id="change">:
                </a>obs, info = self.train_env.reset()
                traj_return = 0
                for traj_step in range(self.max_trajectory_length):
                    &#47&#47 get action
                    action = itemgetter("action")(self.agent.select_action(obs, deterministic=False))
                    next_obs, reward, done, truncated, _ = self.train_env.step(action)

                    traj_return += reward
                    tot_env_steps += 1
                    env_steps<a id="change"> += </a>1

                    truncated = traj_step == self.max_trajectory_length - 1 or truncated

                    &#47&#47 save
                    self.buffer.add_transition(obs, action, next_obs, reward, done, truncated)
                    obs = next_obs

                    if truncated or done:
                        train_traj_returns.append(traj_return)
                        train_traj_lengths.append(traj_step + 1)
                        &#47&#47 reset env and pointer
                        break
                    self.post_step(tot_env_steps)
                num_sampled_trajs<a id="change"> += </a>1
            sample_used_time = time() - sample_start_time
            log_infos[&quottimes/sample&quot] = sample_used_time
            log_infos["performance/train_return"] = np.mean(train_traj_returns[-num_sampled_trajs:])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/x35f/unstable_baselines/commit/4f0036392d4f35e65516efa47407b0cfbe05eb81#diff-084f54cf4c9712a3f85d6eb7311649aae3804690c3692160d12c8fa0b3fb9579L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48656167</div><div id='project'> Project Name: x35f/unstable_baselines</div><div id='commit'> Commit Name: 4f0036392d4f35e65516efa47407b0cfbe05eb81</div><div id='time'> Time: 2023-01-16</div><div id='author'> Author: 1621322691@qq.com</div><div id='file'> File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='m_class'> M Class Name: PPOTrainer</div><div id='n_method'> N Class Name: PPOTrainer</div><div id='m_method'> M Method Name: train(1)</div><div id='n_method'> N Method Name: train(1)</div><div id='m_parent_class'> M Parent Class: BaseTrainer</div><div id='n_parent_class'> N Parent Class: BaseTrainer</div><div id='m_file'> M File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='n_file'> N File Name: unstable_baselines/baselines/ppo/trainer.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 27</div><div id='n_end'> N End Line: 80</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    def get_geodesic_distance(self) -&gt; float:
        curr = self.get_location()
        goal = <a id="change">self.get_current_episode().goals[0]</a>.position
        return self.env.sim.geodesic_distance(curr, goal)

    def get_distance_to_target(self) -&gt; float:</code></pre><h3>After Change</h3><pre><code class='java'>
        curr = self.get_location()
        goals = self.get_current_episode().goals

        goal<a id="change"> = </a>goals[self.goal_index].position
        distance = self.env.sim.geodesic_distance(curr, goal)
        <a id="change">while distance in [float(&quot-inf&quot), float(&quotinf&quot)]</a> or np.isnan(distance)<a id="change">:
            </a>self.goal_index<a id="change"> = </a>(self.goal_index + 1) % len(goals)
            goal = goals[self.goal_index].position
            distance<a id="change"> = </a>self.env.sim.geodesic_distance(curr, goal)

        return distance
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/allenai/allenact/commit/1f0e1bba9171e24983f30a71f7eb018ab2bf4507#diff-c5069309115a4edb91e1f021452960f0d99ee7773ab4225a9feb2d19d9bcab46L42' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48656261</div><div id='project'> Project Name: allenai/allenact</div><div id='commit'> Commit Name: 1f0e1bba9171e24983f30a71f7eb018ab2bf4507</div><div id='time'> Time: 2020-03-26</div><div id='author'> Author: klemenk@allenai.org</div><div id='file'> File Name: rl_habitat/habitat_environment.py</div><div id='m_class'> M Class Name: HabitatEnvironment</div><div id='n_method'> N Class Name: HabitatEnvironment</div><div id='m_method'> M Method Name: get_geodesic_distance(1)</div><div id='n_method'> N Method Name: get_geodesic_distance(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: rl_habitat/habitat_environment.py</div><div id='n_file'> N File Name: rl_habitat/habitat_environment.py</div><div id='m_start'> M Start Line: 43</div><div id='m_end'> M End Line: 45</div><div id='n_start'> N Start Line: 44</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        batch_data = []
        for i in range(batch_size):
            mcfile = self.src_mc_files[i]
            filename = <a id="change">basename(mcfile).split(&quot-&quot)[-1]</a>
            wavfile_path = join(self.src_wav_dir, filename.replace(&quotnpy&quot, &quotwav&quot))

            batch_data.append(wavfile_path)
</code></pre><h3>After Change</h3><pre><code class='java'>

    def get_batch_test_data(self, batch_size=4):
        batch_data = []
        i<a id="change"> = </a>0

        <a id="change">while i != batch_size</a><a id="change">:
            </a>wav_file = self.src_wav_files[i]
            filename = basename(wav_file)
            num<a id="change"> = </a>filename.split(&quot.&quot)[0].split(&quot_&quot)[1]

            for j in range(len(self.trg_wav_files)):
                trg_wav_file<a id="change"> = </a>self.trg_wav_files[j]
                trg_filename = basename(trg_wav_file)
                trg_num = trg_filename.split(&quot.&quot)[0].split(&quot_&quot)[1]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/samuelbroughton/stargan-voice-conversion-2/commit/26484a2db5a00247535c7ec7c1f97c10e711e022#diff-db4ed1f953cd7f07c37dfe2d725ac7f8ccae3fbb822cebd01662682f77e6ffe7L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48656225</div><div id='project'> Project Name: samuelbroughton/stargan-voice-conversion-2</div><div id='commit'> Commit Name: 26484a2db5a00247535c7ec7c1f97c10e711e022</div><div id='time'> Time: 2020-09-01</div><div id='author'> Author: broughtonjsam@gmail.com</div><div id='file'> File Name: convert.py</div><div id='m_class'> M Class Name: ConvertDataset</div><div id='n_method'> N Class Name: ConvertDataset</div><div id='m_method'> M Method Name: get_batch_test_data(2)</div><div id='n_method'> N Method Name: get_batch_test_data(2)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: convert.py</div><div id='n_file'> N File Name: convert.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 54</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 71</div><BR>