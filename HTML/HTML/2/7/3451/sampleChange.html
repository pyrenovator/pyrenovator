<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    dataset = datasets.__dict__[args.data]
    partial_dataset = partial(dataset)
    train_source_dataset<a id="change"> = </a>dataset(root=args.root, task=args.source, download=True, transform=train_transform)
    train_source_loader = DataLoader(train_source_dataset, batch_size=args.batch_size,
                                     shuffle=True, num_workers=args.workers, drop_last=True)
    val_dataset = partial_dataset(root=args.root, task=args.target, download=True, transform=val_transform)
    val_loader = DataLoader(val_dataset, batch_size=args.batch_size, shuffle=False, num_workers=args.workers)
    if args.data == &quotDomainNet&quot:
        test_dataset = partial_dataset(root=args.root, task=args.target, split=&quottest&quot, download=True, transform=val_transform)
        test_loader = DataLoader(test_dataset, batch_size=args.batch_size, shuffle=False, num_workers=args.workers)
    else:
        test_loader = val_loader

    train_source_iter = ForeverDataIterator(train_source_loader)

    &#47&#47 create model
    print("=&gt; using pre-trained model &quot{}&quot".format(args.arch))
    backbone = models.__dict__[args.arch](pretrained=True)
    num_classes = train_source_dataset.num_classes
    if args.data == &quotImageNetCaltech&quot:
        classifier<a id="change"> = Classifier(</a><a id="change">backbone, num_classes, head=backbone.copy_head()).to(</a>device<a id="change">)</a>
    else:
        classifier = Classifier(backbone, num_classes).to(device)

    &#47&#47 define optimizer and lr scheduler</code></pre><h3>After Change</h3><pre><code class='java'>
    cudnn.benchmark = True

    &#47&#47 Data loading code
    train_transform = <a id="change">utils.get_train_transform(</a>args.train_resizing<a id="change">, random_horizontal_flip=True, random_color_jitter=False)</a>
    val_transform = utils.get_val_transform(args.val_resizing)
    <a id="change">print("train_transform: "</a>, train_transform<a id="change">)</a>
    print("val_transform: ", val_transform)

    train_source_dataset, _, val_dataset, test_dataset, num_classes, args.class_names = \
        utils.get_dataset(args.data, args.root, args.source, args.target, train_transform, val_transform)</code></pre>