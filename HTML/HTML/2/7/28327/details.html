<html><h3>Pattern ID :28327
</h3><img src='83608559.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        Return the number of agents this trial is running on.
        
        <a id="change">if not self._hvd_config.use</a>:
            <a id="change">return 1</a>

        <a id="change">return </a><a id="change">cast(</a>int, self.get_size() // horovod.hvd.local_size()<a id="change">)</a>

    def _zmq_gather(self, stuff: Any) -&gt; Optional[List]:
        
        Gather stuff to the chief.  The chief returns a list of all stuff, and workers return None.</code></pre><h3>After Change</h3><pre><code class='java'>
        
        Return the number of agents this trial is running on.
        
        <a id="change">return </a>self._info.cross_size

    def _zmq_gather(self, stuff: Any) -&gt; Optional[List]:
        </code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b21a57f66989b1cffd8bbfe13710a462a7dca635#diff-ebdaa733fb2d3c936213ad55b6ff474c96ec57f0801ee0e20ab52bd4cc713e64L274' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83608559</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b21a57f66989b1cffd8bbfe13710a462a7dca635</div><div id='time'> Time: 2021-06-29</div><div id='author'> Author: rb@determined.ai</div><div id='file'> File Name: harness/determined/_train_context.py</div><div id='m_class'> M Class Name: DistributedContext</div><div id='n_method'> N Class Name: DistributedContext</div><div id='m_method'> M Method Name: get_num_agents(1)</div><div id='n_method'> N Method Name: get_num_agents(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/_train_context.py</div><div id='n_file'> N File Name: harness/determined/_train_context.py</div><div id='m_start'> M Start Line: 274</div><div id='m_end'> M End Line: 277</div><div id='n_start'> N Start Line: 426</div><div id='n_end'> N End Line: 426</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        unique ID within the trial; that is, no two processes in the same trial
        will be assigned the same rank.
        
        <a id="change">if not self._hvd_config.use</a>:
            <a id="change">return 0</a>

        <a id="change">return </a><a id="change">cast(</a>int, horovod.hvd.rank()<a id="change">)</a>

    def get_local_rank(self) -&gt; int:
        
        Return the rank of the process on the agent. The local rank of a process</code></pre><h3>After Change</h3><pre><code class='java'>
        unique ID within the trial; that is, no two processes in the same trial
        will be assigned the same rank.
        
        <a id="change">return </a>self._info.rank

    def get_local_rank(self) -&gt; int:
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b21a57f66989b1cffd8bbfe13710a462a7dca635#diff-ebdaa733fb2d3c936213ad55b6ff474c96ec57f0801ee0e20ab52bd4cc713e64L241' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83608561</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b21a57f66989b1cffd8bbfe13710a462a7dca635</div><div id='time'> Time: 2021-06-29</div><div id='author'> Author: rb@determined.ai</div><div id='file'> File Name: harness/determined/_train_context.py</div><div id='m_class'> M Class Name: DistributedContext</div><div id='n_method'> N Class Name: DistributedContext</div><div id='m_method'> M Method Name: get_rank(1)</div><div id='n_method'> N Method Name: get_rank(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/_train_context.py</div><div id='n_file'> N File Name: harness/determined/_train_context.py</div><div id='m_start'> M Start Line: 247</div><div id='m_end'> M End Line: 250</div><div id='n_start'> N Start Line: 405</div><div id='n_end'> N End Line: 405</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        in the same trial that are executing on the same agent will be assigned
        the same rank.
        
        <a id="change">if not self._hvd_config.use</a>:
            <a id="change">return 0</a>

        <a id="change">return </a><a id="change">cast(</a>int, horovod.hvd.local_rank()<a id="change">)</a>

    def get_size(self) -&gt; int:
        
        Return the number of slots this trial is running on.</code></pre><h3>After Change</h3><pre><code class='java'>
        in the same trial that are executing on the same agent will be assigned
        the same rank.
        
        <a id="change">return </a>self._info.local_rank

    def get_size(self) -&gt; int:
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/b21a57f66989b1cffd8bbfe13710a462a7dca635#diff-ebdaa733fb2d3c936213ad55b6ff474c96ec57f0801ee0e20ab52bd4cc713e64L252' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 83608560</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: b21a57f66989b1cffd8bbfe13710a462a7dca635</div><div id='time'> Time: 2021-06-29</div><div id='author'> Author: rb@determined.ai</div><div id='file'> File Name: harness/determined/_train_context.py</div><div id='m_class'> M Class Name: DistributedContext</div><div id='n_method'> N Class Name: DistributedContext</div><div id='m_method'> M Method Name: get_local_rank(1)</div><div id='n_method'> N Method Name: get_local_rank(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/_train_context.py</div><div id='n_file'> N File Name: harness/determined/_train_context.py</div><div id='m_start'> M Start Line: 259</div><div id='m_end'> M End Line: 262</div><div id='n_start'> N Start Line: 414</div><div id='n_end'> N End Line: 414</div><BR>