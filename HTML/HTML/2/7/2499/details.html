<html><h3>Pattern ID :2499
</h3><img src='10478591.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        goal_position    = observation[0:3]
        poker_position   = observation[3:6]
        gripper_position = self.get_accurate_gripper_position(<a id="change">observation[6:9]</a>)


        poke_vector = v.Vector(poker_position, goal_position, self.env.p)</code></pre><h3>After Change</h3><pre><code class='java'>

        if is_aimed or self.touched:
            owner = 1 &#47&#47 poke
        elif <a id="change"></a>not is_aimed and not self.touched:
            owner = 0 &#47&#47 aim
        else:
            <a id="change">print("wat?"</a><a id="change">)</a>

        return owner

    def did_touch(self):</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/incognite-lab/mygym/commit/67718bbfd338398527332fd155399c5d57ada6c6#diff-f909d23bda0d4385c8f8b25592babf12027365091adcf8cd26de3fa6848d911fL1038' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10478591</div><div id='project'> Project Name: incognite-lab/mygym</div><div id='commit'> Commit Name: 67718bbfd338398527332fd155399c5d57ada6c6</div><div id='time'> Time: 2021-08-23</div><div id='author'> Author: gupit@seznam.cz</div><div id='file'> File Name: myGym/envs/rewards.py</div><div id='m_class'> M Class Name: DualPoke</div><div id='n_method'> N Class Name: DualPoke</div><div id='m_method'> M Method Name: decide(2)</div><div id='n_method'> N Method Name: decide(2)</div><div id='m_parent_class'> M Parent Class: Reward</div><div id='n_parent_class'> N Parent Class: Reward</div><div id='m_file'> M File Name: myGym/envs/rewards.py</div><div id='n_file'> N File Name: myGym/envs/rewards.py</div><div id='m_start'> M Start Line: 1259</div><div id='m_end'> M End Line: 1280</div><div id='n_start'> N Start Line: 1038</div><div id='n_end'> N End Line: 1055</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    print()

     Keras run predict 
    pred = keras_model(tf.expand_dims(tf.image.resize(img, <a id="change">keras_model.input_shape[1:3]</a>), 0)).numpy()
    &#47&#47 pred = tf.nn.softmax(pred).numpy()  &#47&#47 If classifier activation is not softmax
    print("&gt;&gt;&gt;&gt; Keras model prediction:", keras.applications.imagenet_utils.decode_predictions(pred)[0])
    print()</code></pre><h3>After Change</h3><pre><code class='java'>
    import tensorflow as tf
    from skimage.data import chelsea

    <a id="change">if </a>isinstance(torch_model, str):
        <a id="change">print("&gt;&gt;&gt;&gt; Reload Torch weight file:"</a>, torch_model<a id="change">)</a>
        torch_model = torch.load(torch_model, map_location=torch.device(&quotcpu&quot))
    is_state_dict = isinstance(torch_model, dict)

     Chelsea the cat  </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/leondgarse/keras_cv_attention_models/commit/595d36b2f10fd36ac66a39f902327e803dcddcc7#diff-37028f58f90dc39d0ed1f23dec40bd7e001ad2d587c2dd6ddd16655aaec34d38L131' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10478589</div><div id='project'> Project Name: leondgarse/keras_cv_attention_models</div><div id='commit'> Commit Name: 595d36b2f10fd36ac66a39f902327e803dcddcc7</div><div id='time'> Time: 2021-10-31</div><div id='author'> Author: leondgarse@gmail.com</div><div id='file'> File Name: keras_cv_attention_models/download_and_load.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: keras_reload_from_torch_model(11)</div><div id='n_method'> N Method Name: keras_reload_from_torch_model(11)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: keras_cv_attention_models/download_and_load.py</div><div id='n_file'> N File Name: keras_cv_attention_models/download_and_load.py</div><div id='m_start'> M Start Line: 150</div><div id='m_end'> M End Line: 199</div><div id='n_start'> N Start Line: 151</div><div id='n_end'> N End Line: 216</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    w = [x for x in bufs if x[0] == "weight"][0][1]
    ewbufs = [x for x in bufs if x[0] not in ["input", "weight"]]

    if tuple(<a id="change">bufs[0:2]</a>) in OpenCLBuffer.seen:
      print("WARNING: recomputing CONV with", bufs[0], bufs[1])
    OpenCLBuffer.seen.add(tuple(bufs[0:2]))
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 fallback to float
        view, unfolded = buf.contiguous_view_constant_fold(name)
        getters.append(view)
        <a id="change">if </a>unfolded:
          ewtypes.append(f"__global const float *{name}_g")
          getters.append(f"inline float4 get4_{name}(__global const float *x, const sampler_t smp, int2 loc, int gid) {{"+
            f"return (float4)(get_{name}(x,gid+0), get_{name}(x,gid+1), get_{name}(x,gid+2), get_{name}(x,gid+3)); }}")
        else:
          <a id="change">print("folded"</a><a id="change">)</a>
          fakebufs.append(name)
          getters.append(f"inline float4 get4_{name}(int gid) {{"+
            f"return (float4)(get_{name}(gid+0), get_{name}(gid+1), get_{name}(gid+2), get_{name}(gid+3)); }}")
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/d8e7f1f8bc2d0723e78d8d4362fe020b5cdaf161#diff-d381887ea5d4caa7edefac8be856356c4d76b449152c7e3009da6a1e6c9b0e59L113' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 10478595</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: d8e7f1f8bc2d0723e78d8d4362fe020b5cdaf161</div><div id='time'> Time: 2022-07-08</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: accel/opencl/ops_opencl.py</div><div id='m_class'> M Class Name: OpenCLBuffer</div><div id='n_method'> N Class Name: OpenCLBuffer</div><div id='m_method'> M Method Name: _processing_op(4)</div><div id='n_method'> N Method Name: _processing_op(4)</div><div id='m_parent_class'> M Parent Class: GPUBuffer</div><div id='n_parent_class'> N Parent Class: GPUBuffer</div><div id='m_file'> M File Name: accel/opencl/ops_opencl.py</div><div id='n_file'> N File Name: accel/opencl/ops_opencl.py</div><div id='m_start'> M Start Line: 122</div><div id='m_end'> M End Line: 154</div><div id='n_start'> N Start Line: 120</div><div id='n_end'> N End Line: 168</div><BR>