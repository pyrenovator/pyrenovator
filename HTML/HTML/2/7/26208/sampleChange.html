<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
class DataLoaderShard(_DataLoaderShard, LumoDataLoader):

    def __iter__(self) -&gt; DataLoaderIterWrap:
        <a id="change">return </a>super().__iter__()


def prepare_data_loader(</code></pre><h3>After Change</h3><pre><code class='java'>
    def __iter__(self):
        if self.rng_types is not None:
            synchronize_rng_states(self.rng_types, self.generator)
        state<a id="change"> = </a>AcceleratorState()
        <a id="change">for </a>batch in LumoDataLoader.__iter__(self)<a id="change">:
            if state.distributed_type == DistributedType.TPU</a>:
                xm.mark_step()
            <a id="change">yield </a>batch if self.device is None else send_to_device(batch, self.device)


def prepare_data_loader(</code></pre>