<html><h3>Pattern ID :17493
</h3><img src='57952054.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 Rename the columns according to their appliances
    columns = []
    for col in df.columns:
        <a id="change">try:
            </a>app = metergroup.get_labels([col[0]])[0]
        <a id="change">except </a>Exception:
            try:
                with HiddenPrints():
                    app = metergroup.get_labels([col[0][0][0]])[0].lower()</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 If the meter is on its own, its current column name is:
            &#47&#47 col = ElecMeterID(instance, building, dataset)
            instance = col[0]
        elif <a id="change">type(col) is MeterGroupID</a>:
            &#47&#47 If the meter is grouped with others, its current column name is:
            &#47&#47 MeterGroup(meters=(ElecMeterID(instance, building, dataset)))
            instance = col[0][0][0]
        else:
            <a id="change">raise </a><a id="change">ValueError(f"Unexpected type of meter ID for&quot{col}&quot "
                             f"column:\n {type(col)}"</a><a id="change">)</a>
        &#47&#47 We use its instance to get the appliance label
        with HiddenPrints():
            labels = metergroup.get_labels([instance])
        app = homogenize_string(labels[0])</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uca-datalab/nilm-thresholding/commit/04e506f9b6ce735c435ad13686a1a44f9ee36c7a#diff-a12d06799a886fa50e466128345dd514d2253e00207fc56f09ad1a80d6061457L168' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57952054</div><div id='project'> Project Name: uca-datalab/nilm-thresholding</div><div id='commit'> Commit Name: 04e506f9b6ce735c435ad13686a1a44f9ee36c7a</div><div id='time'> Time: 2020-05-04</div><div id='author'> Author: danipg1409@gmail.com</div><div id='file'> File Name: better_nilm/nilmtk/metergroup_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: df_from_sections(3)</div><div id='n_method'> N Method Name: df_from_sections(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: better_nilm/nilmtk/metergroup_utils.py</div><div id='n_file'> N File Name: better_nilm/nilmtk/metergroup_utils.py</div><div id='m_start'> M Start Line: 168</div><div id='m_end'> M End Line: 178</div><div id='n_start'> N Start Line: 174</div><div id='n_end'> N End Line: 189</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def check_is_priority(config: dict, resource_pool: str) -&gt; bool:
    <a id="change">try:
        </a>for pool in config["resource_pools"]:
            if pool["pool_name"] == resource_pool and pool["scheduler"]["type"] != "priority":
                return False
        return is_priority_rm(config)

    <a id="change">except </a>(KeyError, TypeError):
        return is_priority_rm(config)
    return True
</code></pre><h3>After Change</h3><pre><code class='java'>


def check_is_priority(pools: bindings.v1GetResourcePoolsResponse, resource_pool: str) -&gt; bool:
    <a id="change">if pools.resourcePools is None</a>:
        <a id="change">raise </a><a id="change">ValueError(f"No resource pools found checking scheduler type of {resource_pool}"</a><a id="change">)</a>

    for pool in pools.resourcePools:
        if (resource_pool is None and pool.defaultComputePool) or resource_pool == pool.name:
            return pool.schedulerType == bindings.v1SchedulerType.SCHEDULER_TYPE_PRIORITY</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/determined-ai/determined/commit/27e04e4d8ebc2d93c7e2a1ef7e7f306f259e7983#diff-e466a991bee195d6a265213b904f82b5b0c282a640c519332f2a6fa02257b6bcL127' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57952038</div><div id='project'> Project Name: determined-ai/determined</div><div id='commit'> Commit Name: 27e04e4d8ebc2d93c7e2a1ef7e7f306f259e7983</div><div id='time'> Time: 2022-05-17</div><div id='author'> Author: 31451191+NicholasBlaskey@users.noreply.github.com</div><div id='file'> File Name: harness/determined/cli/job.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: check_is_priority(2)</div><div id='n_method'> N Method Name: check_is_priority(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: harness/determined/cli/job.py</div><div id='n_file'> N File Name: harness/determined/cli/job.py</div><div id='m_start'> M Start Line: 128</div><div id='m_end'> M End Line: 136</div><div id='n_start'> N Start Line: 120</div><div id='n_end'> N End Line: 126</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    if sharded:
        raise ValueError("sharded is not supported for AutoModel")
    <a id="change">try:
        </a>return CausalLM(model_id, revision, quantize=quantize)
    <a id="change">except </a>Exception:
        return Seq2SeqLM(model_id, revision, quantize=quantize)
</code></pre><h3>After Change</h3><pre><code class='java'>
    if sharded:
        raise ValueError("sharded is not supported for AutoModel")

    <a id="change">if model_type in modeling_auto.MODEL_FOR_CAUSAL_LM_MAPPING_NAMES</a>:
        return CausalLM(model_id, revision, quantize=quantize)
    if model_type in modeling_auto.MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES:
        return Seq2SeqLM(model_id, revision, quantize=quantize)

    <a id="change">raise </a><a id="change">ValueError(f"Unsupported model type {model_type}"</a><a id="change">)</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/text-generation-inference/commit/462530c2b05013e0822fd3d9e38fb08adc0a84b6#diff-75b063058a24538e0019663d062fcb46a2e61116874d467e3bf6df2833853bdaL55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57952028</div><div id='project'> Project Name: huggingface/text-generation-inference</div><div id='commit'> Commit Name: 462530c2b05013e0822fd3d9e38fb08adc0a84b6</div><div id='time'> Time: 2023-03-27</div><div id='author'> Author: nickhill@us.ibm.com</div><div id='file'> File Name: server/text_generation_server/models/__init__.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_model(4)</div><div id='n_method'> N Method Name: get_model(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: server/text_generation_server/models/__init__.py</div><div id='n_file'> N File Name: server/text_generation_server/models/__init__.py</div><div id='m_start'> M Start Line: 67</div><div id='m_end'> M End Line: 94</div><div id='n_start'> N Start Line: 68</div><div id='n_end'> N End Line: 99</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        x_train, y_train = df_train["feature"], df_train["label"]
        x_valid, y_valid = df_valid["feature"], df_valid["label"]
        <a id="change">try:
            </a>wdf_train, wdf_valid = dataset.prepare(["train", "valid"], col_set=["weight"], data_key=DataHandlerLP.DK_L)
            w_train, w_valid = wdf_train["weight"], wdf_valid["weight"]
        <a id="change">except </a>KeyError as e:
            w_train = pd.DataFrame(np.ones_like(y_train.values), index=y_train.index)
            w_valid = pd.DataFrame(np.ones_like(y_valid.values), index=y_valid.index)
</code></pre><h3>After Change</h3><pre><code class='java'>
        x_train, y_train = df_train["feature"], df_train["label"]
        x_valid, y_valid = df_valid["feature"], df_valid["label"]

        <a id="change">if reweighter is None</a>:
            w_train = pd.DataFrame(np.ones_like(y_train.values), index=y_train.index)
            w_valid = pd.DataFrame(np.ones_like(y_valid.values), index=y_valid.index)
        elif isinstance(reweighter, Reweighter):
            w_train = pd.DataFrame(reweighter.reweight(df_train))
            w_valid = pd.DataFrame(reweighter.reweight(df_valid))
        else:
            <a id="change">raise </a><a id="change">ValueError("Unsupported reweighter type."</a><a id="change">)</a>

        save_path = get_or_create_path(save_path)
        stop_steps = 0
        train_loss = 0</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/cf35562e8458bc10fc0760e6c30c560c4eb10734#diff-262692c578e458decfd85fcba44547340ec8f0f95ae83157e691e4f10f496179L163' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57952030</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: cf35562e8458bc10fc0760e6c30c560c4eb10734</div><div id='time'> Time: 2022-01-10</div><div id='author'> Author: you-n-g@users.noreply.github.com</div><div id='file'> File Name: qlib/contrib/model/pytorch_nn.py</div><div id='m_class'> M Class Name: DNNModelPytorch</div><div id='n_method'> N Class Name: DNNModelPytorch</div><div id='m_method'> M Method Name: fit(6)</div><div id='n_method'> N Method Name: fit(5)</div><div id='m_parent_class'> M Parent Class: Model</div><div id='n_parent_class'> N Parent Class: Model</div><div id='m_file'> M File Name: qlib/contrib/model/pytorch_nn.py</div><div id='n_file'> N File Name: qlib/contrib/model/pytorch_nn.py</div><div id='m_start'> M Start Line: 175</div><div id='m_end'> M End Line: 182</div><div id='n_start'> N Start Line: 170</div><div id='n_end'> N End Line: 187</div><BR>