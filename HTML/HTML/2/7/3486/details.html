<html><h3>Pattern ID :3486
</h3><img src='13388440.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Extract files to temporary directory and load content
        with TemporaryDirectory() as directory:
            &#47&#47 Extract tar contents
            <a id="change">with tarfile.open(</a><a id="change">path, "r") as tar:
                </a>tar.extractall(directory)

            &#47&#47 Load graph backend
            self.loadgraph(f"{directory}/graph")</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Extract files to temporary directory and load content
        with TemporaryDirectory() as directory:
            &#47&#47 Unpack files
            compress<a id="change"> = </a><a id="change">CompressFactory().create(</a>"tar"<a id="change">)</a>
            compress.unpack(path, directory)

            &#47&#47 Load graph backend
            self.loadgraph(f"{directory}/graph")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0#diff-21b55e49dee997f4924577624b67b2d0c159d3f40a55867d90f3978e2b046b90L291' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13388440</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0</div><div id='time'> Time: 2022-11-01</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: src/python/txtai/graph/base.py</div><div id='m_class'> M Class Name: Graph</div><div id='n_method'> N Class Name: Graph</div><div id='m_method'> M Method Name: load(2)</div><div id='n_method'> N Method Name: load(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/python/txtai/graph/base.py</div><div id='n_file'> N File Name: src/python/txtai/graph/base.py</div><div id='m_start'> M Start Line: 291</div><div id='m_end'> M End Line: 297</div><div id='n_start'> N Start Line: 291</div><div id='n_end'> N End Line: 294</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                    pickle.dump(self.topics, handle, protocol=__pickle__)

            &#47&#47 Combine output as TAR
            <a id="change">with tarfile.open(</a><a id="change">path, "w") as tar:
                </a>tar.add(directory, arcname=".")

    def insert(self, documents, index=0):
        </code></pre><h3>After Change</h3><pre><code class='java'>
                    pickle.dump(self.topics, handle, protocol=__pickle__)

            &#47&#47 Pack files
            compress<a id="change"> = </a><a id="change">CompressFactory().create(</a>"tar"<a id="change">)</a>
            compress.pack(directory, path)

    def insert(self, documents, index=0):
        </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0#diff-21b55e49dee997f4924577624b67b2d0c159d3f40a55867d90f3978e2b046b90L311' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13388437</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0</div><div id='time'> Time: 2022-11-01</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: src/python/txtai/graph/base.py</div><div id='m_class'> M Class Name: Graph</div><div id='n_method'> N Class Name: Graph</div><div id='m_method'> M Method Name: save(2)</div><div id='n_method'> N Method Name: save(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/python/txtai/graph/base.py</div><div id='n_file'> N File Name: src/python/txtai/graph/base.py</div><div id='m_start'> M Start Line: 320</div><div id='m_end'> M End Line: 338</div><div id='n_start'> N Start Line: 320</div><div id='n_end'> N End Line: 336</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Tar files
        else:
            <a id="change">with tarfile.open(</a><a id="change">path, f"w:{compression}") as tar:
                </a>tar.add(self.path(), arcname=".")

        &#47&#47 Save file to cloud storage, if necessary
        cloud = self.cloud(config)</code></pre><h3>After Change</h3><pre><code class='java'>
            os.makedirs(output, exist_ok=True)

        &#47&#47 Pack into compressed file
        compress<a id="change"> = </a><a id="change">CompressFactory().create(</a>path<a id="change">)</a>
        compress.pack(self.path(), path)

        &#47&#47 Save file to cloud storage, if necessary
        cloud = self.cloud(config)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0#diff-c7b5d494605657e2c026e8076a5ddaac4c6be25c973d805ad9e2b815b3d66fcdL105' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 13388439</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: de8b2ee5991bb513905ec7fe782b8f5ff2ed71c0</div><div id='time'> Time: 2022-11-01</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: src/python/txtai/embeddings/archive.py</div><div id='m_class'> M Class Name: Archive</div><div id='n_method'> N Class Name: Archive</div><div id='m_method'> M Method Name: save(3)</div><div id='n_method'> N Method Name: save(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/python/txtai/embeddings/archive.py</div><div id='n_file'> N File Name: src/python/txtai/embeddings/archive.py</div><div id='m_start'> M Start Line: 115</div><div id='m_end'> M End Line: 135</div><div id='n_start'> N Start Line: 111</div><div id='n_end'> N End Line: 112</div><BR>