<html><h3>Pattern ID :19670
</h3><img src='64019254.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if verbose:
            print(act)
        return act
    <a id="change">return </a>np.mean(player.play_one_episode(f))

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre><h3>After Change</h3><pre><code class='java'>

    ob = env.reset()
    sum_r = 0
    while <a id="change">True</a>:
        act = predict(ob)
        ob, r, isOver, info = env.step(act)
        <a id="change">if render</a>:
            <a id="change">env.render()</a>
        sum_r += r
        <a id="change">if </a>isOver:
            logger.info(&quotinfo distError {}&quot.format(info[&quotdistError&quot]))
            return sum_r, info[&quotdistError&quot]
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/2d903de1af7d2b239a1b5ccee77d05befee8db86#diff-9e75b6ab37db31b4f864bf6757547c800f820c0a4722148fa78e6ff735dc4be3L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019254</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 2d903de1af7d2b239a1b5ccee77d05befee8db86</div><div id='time'> Time: 2017-11-01</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: play_one_episode(3)</div><div id='n_method'> N Method Name: play_one_episode(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='n_file'> N File Name: examples/LandmarkDetection3D/DQN/common.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if verbose:
            print(act)
        return act
    <a id="change">return </a>np.mean(player.play_one_episode(f))

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
</code></pre><h3>After Change</h3><pre><code class='java'>
    while True:
        act = predict(ob)
        ob, r, isOver, info = env.step(act)
        <a id="change">if render</a>:
            <a id="change">env.render()</a>
        sum_r += r
        <a id="change">if </a>isOver:
            logger.info(&quotinfo distError {}&quot.format(info[&quotdistError&quot]))
            return sum_r, info[&quotdistError&quot]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/gml16/rl-medical/commit/249c649721c645c497311bacc239a3d6a448851e#diff-f837bfb74f16363c790f9607a284c91e63c956876ec5199b90a6d9c590ab672aL27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019256</div><div id='project'> Project Name: gml16/rl-medical</div><div id='commit'> Commit Name: 249c649721c645c497311bacc239a3d6a448851e</div><div id='time'> Time: 2018-01-09</div><div id='author'> Author: aa16914@wensum.doc.ic.ac.uk</div><div id='file'> File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: play_one_episode(3)</div><div id='n_method'> N Method Name: play_one_episode(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='n_file'> N File Name: examples/plane_detection/ultrasound_fetal_brain_detection/common.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 36</div><div id='n_start'> N Start Line: 39</div><div id='n_end'> N End Line: 52</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                     &quotcolors&quot: colors,
                     }
        )
        <a id="change">return </a>html


def to_html(thermostat_dataset: Dataset, out_html: str, gamma=1.0):</code></pre><h3>After Change</h3><pre><code class='java'>
         Uses the displaCy visualization tool to render a HTML from the heatmap 

        full_html = &quot&quot
        for field_name, <a id="change">text_field_heatmap</a>, in self.heatmap.items():
            ents = []
            colors = {}
            ii = 0
            for token_rgb in text_field_heatmap:
                token, rgb = token_rgb.values()
                att_rounded = str(rgb.score)

                ff = ii + len(token)

                &#47&#47 One entity in displaCy contains start and end markers (character index) and optionally a label
                &#47&#47 The label can be added by setting "attribution_labels" to True
                ent = {
                    &quotstart&quot: ii,
                    &quotend&quot: ff,
                    &quotlabel&quot: att_rounded,
                }

                ents.append(ent)
                &#47&#47 A "colors" dict takes care of the mapping between attribution labels and hex colors
                colors[att_rounded] = rgb.hex
                ii = ff

            to_render = {
                &quottext&quot: &quot&quot.join([t[&quottoken&quot] for t in text_field_heatmap]),
                &quotents&quot: ents,
            }

            <a id="change">if </a>attribution_labels:
                template = 
                &lt;mark class="entity" style="background: {bg}; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 2; 
                border-radius: 0.35em; box-decoration-break: clone; -webkit-box-decoration-break: clone"&gt;
                    {text}
                    &lt;span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: 
                    uppercase; vertical-align: middle; margin-left: 0.5rem"&gt;{label}&lt;/span&gt;
                &lt;/mark&gt;
                
            else:
                template = 
                &lt;mark class="entity" style="background: {bg}; padding: 0.15em 0.3em; margin: 0 0.2em; line-height: 2.2;
                border-radius: 0.25em; box-decoration-break: clone; -webkit-box-decoration-break: clone"&gt;
                    {text}
                &lt;/mark&gt;
                

            html = displacy.render(
                to_render,
                style=&quotent&quot,
                manual=True,
                jupyter=jupyter,
                options={&quottemplate&quot: template,
                         &quotcolors&quot: colors,
                         }
            )
            <a id="change">if jupyter</a>:
                html = <a id="change">displacy.render(
                    </a>to_render<a id="change">,
                    style=&quotent&quot,
                    manual=True,
                    jupyter=False,
                    options={&quottemplate&quot: template,
                             &quotcolors&quot: colors,
                             }
                )</a>
            full_html += html
        return full_html if not jupyter else None

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dfki-nlp/thermostat/commit/cd2eb73894221510fa989344527857d73589db6a#diff-6ab4c95f94b6241bd77621bf1fee4ada8e781074aeaca5d9c6e2a8f43e0b4e8bL226' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019260</div><div id='project'> Project Name: dfki-nlp/thermostat</div><div id='commit'> Commit Name: cd2eb73894221510fa989344527857d73589db6a</div><div id='time'> Time: 2021-06-18</div><div id='author'> Author: feldhusnlp@gmail.com</div><div id='file'> File Name: src/thermostat/data/dataset_utils.py</div><div id='m_class'> M Class Name: Thermounit</div><div id='n_method'> N Class Name: Thermounit</div><div id='m_method'> M Method Name: render(3)</div><div id='n_method'> N Method Name: render(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/thermostat/data/dataset_utils.py</div><div id='n_file'> N File Name: src/thermostat/data/dataset_utils.py</div><div id='m_start'> M Start Line: 229</div><div id='m_end'> M End Line: 282</div><div id='n_start'> N Start Line: 228</div><div id='n_end'> N End Line: 294</div><BR>