<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        scale = (encoding_max - encoding_min) / (2 ** bitwidth.data - 1)
        offset = torch.round(-encoding_min / scale)

        if <a id="change">len(scale) &gt; 1 and len(tensor.shape) &gt; 1</a>:
            scale = broadcast_to_tensor(tensor, scale, channel_axis)

        if len(offset) &gt; 1 and len(tensor.shape) &gt; 1:</code></pre><h3>After Change</h3><pre><code class='java'>
            dim.pop(channel_axis)

        intermediate_term1 = scale_grad.sum(dim=dim) / steps
        intermediate_term2 = steps / (encoding_max - encoding_min) ** 2 * <a id="change">offset_grad.sum(dim=dim)</a>

        tensor_encoding_min_grad<a id="change"> = </a>-intermediate_term1 + encoding_max<a id="change"> * </a>intermediate_term2
        tensor_encoding_max_grad = intermediate_term1 - encoding_min * intermediate_term2

        return tensor_grad, tensor_encoding_min_grad, tensor_encoding_max_grad, None</code></pre>