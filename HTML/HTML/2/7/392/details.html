<html><h3>Pattern ID :392
</h3><img src='2285109.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            t_zero = random.randrange(0, len_spectro - t)

            &#47&#47 avoids randrange error if values are equal and range is empty
            <a id="change">if t_zero == t_zero + t</a>:
                <a id="change">continue</a>

            mask_end += t_zero
            if replace_with_zero:
                cloned[t_zero:mask_end] = 0</code></pre><h3>After Change</h3><pre><code class='java'>
        
        cloned = x if self.inplace else x.copy()
        max_frames = cloned.shape[0]
        max_t = <a id="change">int(</a>max_frames<a id="change"> * </a>self.max_t_ratio<a id="change">)</a>
        for i in range(self.n_time_masks):
            start = random.randint(0, max_frames - 1)
            length = random.randint(1, max_t)
            end<a id="change"> = </a>min(max_frames, start + length)
            if replace_with_zero:
                cloned[start:end, :] = 0
            else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/yeyupiaoling/masr/commit/15d97fe0e0042abc1e6bfedadb35dc826ed4aed3#diff-b6703d7b62ea26baa7fb88ad312fe333fd8e1e41163a4e5541336f432b2af35eL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2285109</div><div id='project'> Project Name: yeyupiaoling/masr</div><div id='commit'> Commit Name: 15d97fe0e0042abc1e6bfedadb35dc826ed4aed3</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: yeyupiaoling@foxmail.com</div><div id='file'> File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_class'> M Class Name: SpecAugmentor</div><div id='n_method'> N Class Name: SpecAugmentor</div><div id='m_method'> M Method Name: mask_time(3)</div><div id='n_method'> N Method Name: mask_time(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='n_file'> N File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 152</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 125</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            cloned = x.copy()
        len_spectro = cloned.shape[0]
        ts = np.random.randint(0, self.T, size=(self.n_time_masks, 2))
        for t, <a id="change">mask_end</a> in ts:
            &#47&#47 avoid randint range error
            <a id="change">if len_spectro - t &lt;= 0</a>:
                continue
            t_zero = random.randrange(0, len_spectro - t)

            &#47&#47 avoids randrange error if values are equal and range is empty
            if t_zero == t_zero + t:
                <a id="change">continue</a>

            mask_end += t_zero
            if replace_with_zero:
                cloned[t_zero:mask_end] = 0</code></pre><h3>After Change</h3><pre><code class='java'>
        
        cloned = x if self.inplace else x.copy()
        max_frames = cloned.shape[0]
        max_t = <a id="change">int(</a>max_frames<a id="change"> * </a>self.max_t_ratio<a id="change">)</a>
        for i in range(self.n_time_masks):
            start = random.randint(0, max_frames - 1)
            length = random.randint(1, max_t)
            end<a id="change"> = </a>min(max_frames, start + length)
            if replace_with_zero:
                cloned[start:end, :] = 0
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yeyupiaoling/masr/commit/15d97fe0e0042abc1e6bfedadb35dc826ed4aed3#diff-b6703d7b62ea26baa7fb88ad312fe333fd8e1e41163a4e5541336f432b2af35eL122' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2285125</div><div id='project'> Project Name: yeyupiaoling/masr</div><div id='commit'> Commit Name: 15d97fe0e0042abc1e6bfedadb35dc826ed4aed3</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: yeyupiaoling@foxmail.com</div><div id='file'> File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_class'> M Class Name: SpecAugmentor</div><div id='n_method'> N Class Name: SpecAugmentor</div><div id='m_method'> M Method Name: mask_time(3)</div><div id='n_method'> N Method Name: mask_time(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='n_file'> N File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 152</div><div id='n_start'> N Start Line: 115</div><div id='n_end'> N End Line: 125</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    critic.train()

    tensorboard_step = 0
    for step, <a id="change">num_epochs</a> in enumerate(PROGRESSIVE_EPOCHS):
        alpha = 0.01
        <a id="change">if step &lt; 3</a>:
            <a id="change">continue</a>

        if step == 4:
            print(f"Img size is: {4*2**step}")
</code></pre><h3>After Change</h3><pre><code class='java'>

    tensorboard_step = 0
    &#47&#47 start at step that corresponds to img size that we set in config
    step<a id="change"> = </a><a id="change">int(</a>log2(config.START_TRAIN_AT_IMG_SIZE<a id="change"> / </a>4)<a id="change">)</a>
    for num_epochs in config.PROGRESSIVE_EPOCHS[step:]:
        alpha = 1e-5  &#47&#47 start with very low alpha
        loader, dataset = get_loader(4 * 2 ** step)  &#47&#47 4-&gt;0, 8-&gt;1, 16-&gt;2, 32-&gt;3, 64 -&gt; 4
        print(f"Current image size: {4 * 2 ** step}")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aladdinpersson/machine-learning-collection/commit/2c53205f12824a4b160fb6e727e960ed83faa563#diff-17eb1bc4ea9c70daec3fbd3f911a40e0b954c9b9e19cb9e1c8e0617a8a43902fL115' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2285114</div><div id='project'> Project Name: aladdinpersson/machine-learning-collection</div><div id='commit'> Commit Name: 2c53205f12824a4b160fb6e727e960ed83faa563</div><div id='time'> Time: 2021-03-11</div><div id='author'> Author: aladdin.persson@hotmail.com</div><div id='file'> File Name: ML/Pytorch/GANs/ProGAN/train.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ML/Pytorch/GANs/ProGAN/train.py</div><div id='n_file'> N File Name: ML/Pytorch/GANs/ProGAN/train.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 135</div><div id='n_end'> N End Line: 193</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        num_mel_channels = cloned.shape[1]
        fs = np.random.randint(0, self.F, size=(self.n_freq_masks, 2))

        for f, <a id="change">mask_end</a> in fs:
            f_zero = random.randrange(0, num_mel_channels - f)
            mask_end += f_zero

            &#47&#47 avoids randrange error if values are equal and range is empty
            <a id="change">if f_zero == f_zero + f</a>:
                <a id="change">continue</a>

            if replace_with_zero:
                cloned[:, f_zero:mask_end] = 0
            else:</code></pre><h3>After Change</h3><pre><code class='java'>
        
        cloned = x if self.inplace else x.copy()
        max_freq = cloned.shape[1]
        max_f = <a id="change">int(</a>max_freq<a id="change"> * </a>self.max_f_ratio<a id="change">)</a>
        for i in range(self.n_freq_masks):
            start = random.randint(0, max_freq - 1)
            length = random.randint(1, max_f)
            end<a id="change"> = </a>min(max_freq, start + length)
            if replace_with_zero:
                cloned[:, start:end] = 0
            else:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/yeyupiaoling/masr/commit/15d97fe0e0042abc1e6bfedadb35dc826ed4aed3#diff-b6703d7b62ea26baa7fb88ad312fe333fd8e1e41163a4e5541336f432b2af35eL90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2285130</div><div id='project'> Project Name: yeyupiaoling/masr</div><div id='commit'> Commit Name: 15d97fe0e0042abc1e6bfedadb35dc826ed4aed3</div><div id='time'> Time: 2022-09-28</div><div id='author'> Author: yeyupiaoling@foxmail.com</div><div id='file'> File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_class'> M Class Name: SpecAugmentor</div><div id='n_method'> N Class Name: SpecAugmentor</div><div id='m_method'> M Method Name: freq_mask(3)</div><div id='n_method'> N Method Name: freq_mask(3)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='n_file'> N File Name: masr/data_utils/augmentor/spec_augment.py</div><div id='m_start'> M Start Line: 100</div><div id='m_end'> M End Line: 116</div><div id='n_start'> N Start Line: 92</div><div id='n_end'> N End Line: 98</div><BR>