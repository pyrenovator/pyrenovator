<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

            &#47&#47 computing loss, metrics on test set
            loss = loss_fn(output, target)
            batch_size<a id="change"> = </a>data.shape[0]
            total_loss<a id="change"> += </a><a id="change">loss.item()</a> * batch_size
            for i, metric in enumerate(metric_fns):
                total_metrics[i]<a id="change"> += </a>metric(output, target)<a id="change"> * </a>batch_size


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47for i, metric in enumerate(metric_fns):
            &#47&#47    total_metrics[i] += metric(output, target) * batch_size

    df<a id="change"> = </a>pd.DataFrame(<a id="change">{</a>&quotimage_id&quot: image_id, &quotlabel&quot: label<a id="change">}</a>)
    out_csv = os.path.join(args.out_dir, &quottest_pred.csv&quot)
    df.to_csv(out_csv, index=False)
    logger.debug(&quotdone.&quot)</code></pre>