<html><h3>Pattern ID :14236
</h3><img src='47274817.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def attempt_download(weights):
    if not Path(weights).exists():
        &#47&#47 Attempt to download pretrained weights if not found locally
        weights = <a id="change">str(</a>weights<a id="change">)</a>.strip().replace("&quot", &quot&quot)
        file = Path(weights).name.lower()

        msg<a id="change"> = </a>weights<a id="change"> + &quot missing, try downloading from https://github.com/ultralytics/yolov5/releases/&quot</a>
        response = requests.get(&quothttps://api.github.com/repos/ultralytics/yolov5/releases/latest&quot).json()  &#47&#47 github api
        assets = [x[&quotname&quot] for x in response[&quotassets&quot]]  &#47&#47 release assets, i.e. [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, ...]
        redundant = False  &#47&#47 second download option
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Attempt file download if does not exist
    file = Path(str(file).strip().replace("&quot", &quot&quot).lower())

    <a id="change">if </a>not file.exists():
        try:
            response = requests.get(f&quothttps://api.github.com/repos/{repo}/releases/latest&quot).json()  &#47&#47 github api
            assets = [x[&quotname&quot] for x in response[&quotassets&quot]]  &#47&#47 release assets, i.e. [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, ...]
            tag = response[&quottag_name&quot]  &#47&#47 i.e. &quotv1.0&quot
        except:  &#47&#47 fallback plan
            assets = [&quotyolov5s.pt&quot, &quotyolov5m.pt&quot, &quotyolov5l.pt&quot, &quotyolov5x.pt&quot]
            tag = subprocess.check_output(&quotgit tag&quot, shell=True).decode().split()[-1]

        name = file.name
        if name in assets:
            msg = f&quot{file} missing, try downloading from https://github.com/{repo}/releases/&quot
            redundant = False  &#47&#47 second download option
            try:  &#47&#47 GitHub
                url = f&quothttps://github.com/{repo}/releases/download/{tag}/{name}&quot
                <a id="change">print(f&quotDownloading {url} to {file}...&quot</a><a id="change">)</a>
                torch.hub.download_url_to_file(url, file)
                assert file.exists() and file.stat().st_size &gt; 1E6  &#47&#47 check
            except Exception as e:  &#47&#47 GCP
                print(f&quotDownload error: {e}&quot)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/fcakyon/yolov5-pip/commit/97db72f1868649781b23837f9fe96d450f5f0610#diff-31e3c7f15ad28b1ff8c6b7d806c05261a1c6571b9df52c105000e6b88fc272afL19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47274817</div><div id='project'> Project Name: fcakyon/yolov5-pip</div><div id='commit'> Commit Name: 97db72f1868649781b23837f9fe96d450f5f0610</div><div id='time'> Time: 2021-04-14</div><div id='author'> Author: 34196005+fcakyon@users.noreply.github.com</div><div id='file'> File Name: yolov5/utils/google_utils.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: attempt_download(2)</div><div id='n_method'> N Method Name: attempt_download(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: yolov5/utils/google_utils.py</div><div id='n_file'> N File Name: yolov5/utils/google_utils.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 50</div><div id='n_start'> N Start Line: 19</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    for i, node in enumerate(col_map.keys()):
        emb = pd.DataFrame(df[col_map[node]].map(node_emb_dict).tolist()).add_prefix(
            <a id="change">"n"</a><a id="change"> + </a><a id="change">str(</a>i<a id="change">)</a> + "_e"
        )
        df<a id="change"> = </a>df.join([emb])
        df.drop(
            columns=[col_map[node]],
            axis=1,</code></pre><h3>After Change</h3><pre><code class='java'>


def _apply_embeddings(df, node_embeddings, col_map):
    <a id="change">if </a>isinstance(node_embeddings, dict):
        print("Apply heterogeneous embeddings.")
        _apply_heterogeneous_embeddings(
            df, node_embeddings, col_map)
    else:
        <a id="change">print("Apply homogeneous embeddings."</a><a id="change">)</a>
        _apply_homogeneous_embeddings(
            df, node_embeddings, col_map)

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/oap-project/cloudtik/commit/b1cb12787f1e43cfd7987400f6c178507cd30510#diff-4c21c2cb889aa41b903d5e243cb25c4af2f693f43e9451406cc665b97d594df9L29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47274816</div><div id='project'> Project Name: oap-project/cloudtik</div><div id='commit'> Commit Name: b1cb12787f1e43cfd7987400f6c178507cd30510</div><div id='time'> Time: 2023-06-25</div><div id='author'> Author: haifeng.chen@intel.com</div><div id='file'> File Name: python/cloudtik/runtime/ai/modeling/graph_modeling/graph_sage/modeling/embeddings.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _apply_embeddings(3)</div><div id='n_method'> N Method Name: _apply_embeddings(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: python/cloudtik/runtime/ai/modeling/graph_modeling/graph_sage/modeling/embeddings.py</div><div id='n_file'> N File Name: python/cloudtik/runtime/ai/modeling/graph_modeling/graph_sage/modeling/embeddings.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 44</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.label_to_idx = {l: i for i, l in enumerate(self.label_values)}
        self.ignored_labels = np.array([])

        self.val_split<a id="change"> = &quotArea_&quot</a><a id="change"> + </a><a id="change">str(</a>test_area_idx<a id="change">)</a>

        self.pc_path = Path(self.dataset_path) / &quotoriginal_ply&quot
        &#47&#47 if not exists(self.pc_path):
        self.create_ply_files(self.dataset_path, self.label_to_names)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.test_split = &quotArea_&quot + str(cfg.test_area_idx)

        self.pc_path = Path(self.dataset_path) / &quotoriginal_ply&quot
        <a id="change">if </a>not exists(self.pc_path):
            <a id="change">print("creating"</a><a id="change">)</a>
            exit(0)
            &#47&#47 self.create_ply_files(self.dataset_path, self.label_to_names)

        &#47&#47 TODO : if num of ply files &lt; 272, then create.</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/isl-org/open3d-ml/commit/a272cb4e4e46369a46118384a613a805ce25c7c4#diff-f4d1eae16668eb6bbaf0d832eca0640ccf17b0d77c0ff9f5d78c444cb15bf627L13' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 47274819</div><div id='project'> Project Name: isl-org/open3d-ml</div><div id='commit'> Commit Name: a272cb4e4e46369a46118384a613a805ce25c7c4</div><div id='time'> Time: 2020-07-29</div><div id='author'> Author: sanskaragrawal107@gmail.com</div><div id='file'> File Name: ml3d/torch/datasets/s3dis.py</div><div id='m_class'> M Class Name: S3DIS</div><div id='n_method'> N Class Name: S3DIS</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ml3d/torch/datasets/s3dis.py</div><div id='n_file'> N File Name: ml3d/torch/datasets/s3dis.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 10</div><div id='n_end'> N End Line: 42</div><BR>