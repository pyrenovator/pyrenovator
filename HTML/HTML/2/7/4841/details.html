<html><h3>Pattern ID :4841
</h3><img src='17057125.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    @classmethod
    def build_criterion(cls, args, task):
        return <a id="change">cls(</a>args, task<a id="change">)</a>

    def forward(self, model, sample, reduce=True):
        Compute the loss for the given sample.
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Criterions can override this, but for convenience we also try
        &#47&#47 to automatically map argparse.Namespace keys to corresponding
        &#47&#47 arguments in the __init__.
        <a id="change">init_args</a><a id="change"> = </a><a id="change">{}</a>
        for p in inspect.signature(cls).parameters.values():
            if (
                p.kind == p.POSITIONAL_ONLY
                or p.kind == p.VAR_POSITIONAL
                or p.kind == p.VAR_KEYWORD
            ):
                &#47&#47 we haven&quott implemented inference for these argument types,
                &#47&#47 but PRs welcome :)
                raise NotImplementedError(&quot{} not supported&quot.format(p.kind))

            assert p.kind in {p.POSITIONAL_OR_KEYWORD, p.KEYWORD_ONLY}

            if p.name == &quottask&quot:
                <a id="change">init_args[&quottask&quot] = </a>task
            elif hasattr(args, p.name):
                init_args[p.name] = getattr(args, p.name)
            elif p.default != p.empty:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mohammadkhalifa/fairseq-tagging/commit/46b773a393c423f653887c382e4d55e69627454d#diff-321acd4649c886429ee9f02cbcc8218435a4b600ef898e03ef76600db46e9ad4L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17057125</div><div id='project'> Project Name: mohammadkhalifa/fairseq-tagging</div><div id='commit'> Commit Name: 46b773a393c423f653887c382e4d55e69627454d</div><div id='time'> Time: 2020-03-04</div><div id='author'> Author: elijah.rippeth@gmail.com</div><div id='file'> File Name: fairseq/criterions/fairseq_criterion.py</div><div id='m_class'> M Class Name: FairseqCriterion</div><div id='n_method'> N Class Name: FairseqCriterion</div><div id='m_method'> M Method Name: build_criterion(3)</div><div id='n_method'> N Method Name: build_criterion(3)</div><div id='m_parent_class'> M Parent Class: _Loss</div><div id='n_parent_class'> N Parent Class: _Loss</div><div id='m_file'> M File Name: fairseq/criterions/fairseq_criterion.py</div><div id='n_file'> N File Name: fairseq/criterions/fairseq_criterion.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    @classmethod
    def build_criterion(cls, args, task):
        return <a id="change">cls(</a>args, task<a id="change">)</a>

    def forward(self, model, sample, reduce=True):
        Compute the loss for the given sample.
</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Criterions can override this, but for convenience we also try
        &#47&#47 to automatically map argparse.Namespace keys to corresponding
        &#47&#47 arguments in the __init__.
        <a id="change">init_args</a><a id="change"> = </a><a id="change">{}</a>
        for p in inspect.signature(cls).parameters.values():
            if (
                p.kind == p.POSITIONAL_ONLY
                or p.kind == p.VAR_POSITIONAL
                or p.kind == p.VAR_KEYWORD
            ):
                &#47&#47 we haven&quott implemented inference for these argument types,
                &#47&#47 but PRs welcome :)
                raise NotImplementedError(&quot{} not supported&quot.format(p.kind))

            assert p.kind in {p.POSITIONAL_OR_KEYWORD, p.KEYWORD_ONLY}

            if p.name == &quottask&quot:
                <a id="change">init_args[&quottask&quot] = </a>task
            elif hasattr(args, p.name):
                init_args[p.name] = getattr(args, p.name)
            elif p.default != p.empty:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/46b773a393c423f653887c382e4d55e69627454d#diff-321acd4649c886429ee9f02cbcc8218435a4b600ef898e03ef76600db46e9ad4L27' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17057126</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: 46b773a393c423f653887c382e4d55e69627454d</div><div id='time'> Time: 2020-03-04</div><div id='author'> Author: elijah.rippeth@gmail.com</div><div id='file'> File Name: fairseq/criterions/fairseq_criterion.py</div><div id='m_class'> M Class Name: FairseqCriterion</div><div id='n_method'> N Class Name: FairseqCriterion</div><div id='m_method'> M Method Name: build_criterion(3)</div><div id='n_method'> N Method Name: build_criterion(3)</div><div id='m_parent_class'> M Parent Class: _Loss</div><div id='n_parent_class'> N Parent Class: _Loss</div><div id='m_file'> M File Name: fairseq/criterions/fairseq_criterion.py</div><div id='n_file'> N File Name: fairseq/criterions/fairseq_criterion.py</div><div id='m_start'> M Start Line: 28</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            )
        tokenizer = AutoTokenizer.from_pretrained(model_name_or_path)
        model = cls.TRANSFORMERS_AUTO_CLASS.from_pretrained(model_name_or_path, **kwargs)
        quantizer = <a id="change">cls(</a>inc_config, model<a id="change">, tokenizer=tokenizer)</a>
        return quantizer


class IncQuantizerForQuestionAnswering(IncQuantizer):</code></pre><h3>After Change</h3><pre><code class='java'>
            ("revision", None)
        ]
        config_kwargs = {name: kwargs.get(name, default_value) for (name, default_value) in config_kwargs_default}
        quantizer_kwargs_names<a id="change"> = </a><a id="change">[</a>"eval_func", "train_func", "calib_dataloader"<a id="change"></a>]
        <a id="change">quantizer_kwargs</a> = {name: kwargs.pop(name, None) for name in quantizer_kwargs_names}

        if not isinstance(inc_config, IncConfig):
            config_path = inc_config if inc_config is not None else model_name_or_path
            inc_config = IncConfig.from_pretrained(
                config_path,
                config_file_name=config_name,
                **config_kwargs,
            )
        tokenizer = AutoTokenizer.from_pretrained(model_name_or_path)
        model = cls.TRANSFORMERS_AUTO_CLASS.from_pretrained(model_name_or_path, **kwargs)
        <a id="change">quantizer_kwargs["tokenizer"] = </a>tokenizer
        quantizer = cls(inc_config, model, **quantizer_kwargs)
        return quantizer
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/optimum/commit/16d0e20cee2c079fd6cd5420737285ebbf6210d5#diff-004cff006c7d140bea9341027903f566e3b3016fedba4f18a020e5b102a866bdL155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 17057121</div><div id='project'> Project Name: huggingface/optimum</div><div id='commit'> Commit Name: 16d0e20cee2c079fd6cd5420737285ebbf6210d5</div><div id='time'> Time: 2021-10-21</div><div id='author'> Author: 80481427+echarlaix@users.noreply.github.com</div><div id='file'> File Name: src/optimum/intel/neural_compressor/quantization.py</div><div id='m_class'> M Class Name: IncQuantizer</div><div id='n_method'> N Class Name: IncQuantizer</div><div id='m_method'> M Method Name: from_config(4)</div><div id='n_method'> N Method Name: from_config(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/optimum/intel/neural_compressor/quantization.py</div><div id='n_file'> N File Name: src/optimum/intel/neural_compressor/quantization.py</div><div id='m_start'> M Start Line: 204</div><div id='m_end'> M End Line: 211</div><div id='n_start'> N Start Line: 208</div><div id='n_end'> N End Line: 221</div><BR>