<html><h3>Pattern ID :27909
</h3><img src='82854064.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if i % 50 ==0: 
                print ("For iteration &#47&#47 " + str(i) + "\n")
                print ("Loss: \n" + str(np.mean(np.square(Y_train - self.feedforward())))) &#47&#47 mean sum squared loss
                <a id="change">print ("\n"</a><a id="change">)</a>
            self.output = self.feedforward()
            self.backprop()
    
    def feedforward(self):</code></pre><h3>After Change</h3><pre><code class='java'>
        for i in range(epochs): &#47&#47 trains the CNN in epochs
            loss = 0
            num_correct = 0
            <a id="change">for j</a>, (image, label) in <a id="change">enumerate(</a>zip(X_train, Y_train)<a id="change">):
                </a>if j % 100 == 99:
                    print(
                        &quot[Step %d] Past 100 steps: Average Loss %.3f | Accuracy: %d%%&quot %
                        (j + 1, loss / 100, num_correct))
                    loss = 0
                    num_correct = 0

                loss<a id="change">, acc = </a>self.train(image, label, lr=learning_rate)
                loss += loss
                num_correct<a id="change"> += </a>acc
    
    def forward(self, image, label):
        out = self.conv2d.forward((image/255)-0.5)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/skylark0924/machine-learning-is-all-you-need/commit/8bc9d709f482e2535d2f6411c8592c81e9868f23#diff-8e3717ea91418153c77560bb595488a6f8fb3b179a0109f17a930014848fcb2bL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82854064</div><div id='project'> Project Name: skylark0924/machine-learning-is-all-you-need</div><div id='commit'> Commit Name: 8bc9d709f482e2535d2f6411c8592c81e9868f23</div><div id='time'> Time: 2020-04-23</div><div id='author'> Author: l.syj@163.com</div><div id='file'> File Name: 10CNN/CNN_models.py</div><div id='m_class'> M Class Name: Skylark_CNN</div><div id='n_method'> N Class Name: Skylark_CNN</div><div id='m_method'> M Method Name: fit(6)</div><div id='n_method'> N Method Name: fit(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: 10CNN/CNN_models.py</div><div id='n_file'> N File Name: 10CNN/CNN_models.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 38</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 48</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            is provided, a single dataset corresponding to the subset value is returned.
        
        print_to_end("-")
        <a id="change">print("[*] Start loading dataset"</a><a id="change">)</a>
        &#47&#47 build initial dataset to read data.
        datasets = _build_dataset(dataset_cfg)

        &#47&#47 return every subset as a dictionary if `subset` is None</code></pre><h3>After Change</h3><pre><code class='java'>
            subset_types = [subset]

        datasets = {}
        <a id="change">for </a>idx, <a id="change">subset_key</a> in <a id="change">enumerate(</a>subset_types<a id="change">):
            </a>print(f"Loading `{subset_key}` dataset subset.")

            dataset_subset_cfg = dataset_cfg["dataset_subset_cfg"][subset_key]
            if dataset_subset_cfg is None:
                dataset_subset_cfg<a id="change"> = </a>{}
            assert isinstance(
                dataset_subset_cfg, dict
            ), "Expected a dict, got {}.".format(dataset_subset_cfg)
            dataset_subset_cfg = merge_config(
                dataset_cfg["dataset_base_cfg"], dataset_subset_cfg
            )
            &#47&#47 create dataset.
            datasets[subset_key]<a id="change"> = </a>catalog.dataset.build_dataset(
                dataset_type=dataset_subset_cfg["file"],
                name=dataset_subset_cfg.get("name", ""),
                **dataset_subset_cfg.get("args", {}),</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/krenerd/awesome-modular-pytorch-lightning/commit/c66de72dcdcd6b80aab9e063eaedf9ba3e6f3061#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L171' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82854081</div><div id='project'> Project Name: krenerd/awesome-modular-pytorch-lightning</div><div id='commit'> Commit Name: c66de72dcdcd6b80aab9e063eaedf9ba3e6f3061</div><div id='time'> Time: 2022-07-22</div><div id='author'> Author: 48239275+krenerd@users.noreply.github.com</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: Experiment</div><div id='n_method'> N Class Name: Experiment</div><div id='m_method'> M Method Name: get_base_dataset(3)</div><div id='n_method'> N Method Name: get_base_dataset(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 190</div><div id='m_end'> M End Line: 193</div><div id='n_start'> N Start Line: 205</div><div id='n_end'> N End Line: 231</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Case where only the dtype of the array is passed (``Array[int]``).
        if isinstance(item, type):
            cls.generic_type = item
            <a id="change">print(f"Setting generic type attribute to &quot{item}&quot."</a><a id="change">)</a>
        else:
            &#47&#47 Treat the case where dtype is not passed in, and there&quots one input.
            &#47&#47 i.e. ``Array[1]`` or ``Array[None]`` or ``Array[...]``.
            if not isinstance(item, tuple):</code></pre><h3>After Change</h3><pre><code class='java'>

            &#47&#47 Case where generic type is unspecified.
            else:
                <a id="change">for </a>i, <a id="change">dim</a> in <a id="change">enumerate(</a>item<a id="change">):
                    </a>if type(dim) not in cls._DIM_TYPES:
                        raise TypeError(err)
                cls.generic_type<a id="change"> = </a>None
                cls.shape<a id="change"> = </a>item

</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/brendanxwhitaker/asta/commit/f474ce78b4cdc059a0bed46644e68dbf4dc31ec8#diff-7daf0de49293f7afe06561173cb6639604abdf5a966442b6bb1605dfc168e40fL59' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82854067</div><div id='project'> Project Name: brendanxwhitaker/asta</div><div id='commit'> Commit Name: f474ce78b4cdc059a0bed46644e68dbf4dc31ec8</div><div id='time'> Time: 2020-02-12</div><div id='author'> Author: 35980963+langfield@users.noreply.github.com</div><div id='file'> File Name: asta/_array_meta.py</div><div id='m_class'> M Class Name: _Array</div><div id='n_method'> N Class Name: _Array</div><div id='m_method'> M Method Name: _after_subscription(2)</div><div id='n_method'> N Method Name: _after_subscription(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: asta/_array_meta.py</div><div id='n_file'> N File Name: asta/_array_meta.py</div><div id='m_start'> M Start Line: 59</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 98</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            batches=batches, module_name=module_name, flatten_acts=flatten_acts
        )

        <a id="change">print(
            f"...Features successfully extracted for all {len(features)} images in the database."</a><a id="change">
        )</a>
        print(f"...Features shape: {features.shape}")

        return features
</code></pre><h3>After Change</h3><pre><code class='java'>

        features = []
        image_ct, last_image_ct = 0, 0
        <a id="change">for </a>batch_i, <a id="change">batch</a> in tqdm(
            <a id="change">enumerate(</a>batches<a id="change">)</a>, desc="Batch", total=len(batches)
        )<a id="change">:
            </a>features.append(self._extract_features(batch, module_name, flatten_acts))

            image_ct += len(batch)

            if output_dir and (
                (batch_i % save_every == 0 and batch_i &gt; 0)
                or (batch_i == len(batches) - 1)
            ):
                features_fp<a id="change"> = </a>os.path.join(
                    output_dir,
                    f"features_{last_image_ct}-{image_ct}.npy",
                )
                np.save(features_fp, np.vstack(features))
                features<a id="change"> = </a>[]
                last_image_ct = image_ct

        print(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/vicco-group/thingsvision/commit/bd3205e3bd67d40f9e38f74cd704047138ccadf3#diff-0a468408989a3298007f4e6669244298b5512baf4dfa466c441ceedcdc5a7a8eL29' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 82854070</div><div id='project'> Project Name: vicco-group/thingsvision</div><div id='commit'> Commit Name: bd3205e3bd67d40f9e38f74cd704047138ccadf3</div><div id='time'> Time: 2022-11-01</div><div id='author'> Author: johannes@roth24.de</div><div id='file'> File Name: thingsvision/core/extraction/base.py</div><div id='m_class'> M Class Name: BaseExtractor</div><div id='n_method'> N Class Name: BaseExtractor</div><div id='m_method'> M Method Name: extract_features(6)</div><div id='n_method'> N Method Name: extract_features(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: thingsvision/core/extraction/base.py</div><div id='n_file'> N File Name: thingsvision/core/extraction/base.py</div><div id='m_start'> M Start Line: 56</div><div id='m_end'> M End Line: 63</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 111</div><BR>