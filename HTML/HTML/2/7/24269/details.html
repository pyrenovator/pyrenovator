<html><h3>Pattern ID :24269
</h3><img src='75318397.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    _config[&quotstate_dim&quot] = env.observation_space.shape[0]
    _config[&quotep_limit&quot] = env._max_episode_steps

    <a id="change">try:  &#47&#47 continuous action space
        </a>_config[&quotaction_dim&quot] = env.action_space.shape[0]
        _config[&quotmax_action&quot] = env.action_space.high
        _config[&quotmin_action&quot] = env.action_space.low

        unique_token = "{}__{}__alr={}__clr={}__{}".format(
            _config[&quotenv&quot],
            _config[&quotname&quot],
            _config[&quotlr&quot],
            _config[&quotcritic_lr&quot],
            _config[&quottime&quot])
        _config[&quotdiscrete&quot] = False

    <a id="change">except</a>:  &#47&#47 discreate action space
        _config[&quotaction_dim&quot] = env.action_space.n
        unique_token = "{}__{}__lr={}__{}".format(
            _config[&quotenv&quot],</code></pre><h3>After Change</h3><pre><code class='java'>
        values.append(&quotcritic_lr&quot)
        names.append(&quotclr=&quot)
    unique_token = _config[values[0]]
    <a id="change">for i</a> in <a id="change">range(1</a>, len(names)<a id="change">):
        </a>unique_token<a id="change"> = </a>unique_token + &quot__{}{}&quot.format(names[i], str(_config[values[i]]))
    unique_token += &quot__&quot + _config[&quottime&quot]

    _config[&quottb_path&quot] = os.path.join(dirname(abspath(__file__)), "results", _config[&quotenv&quot], unique_token)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/chaovven/pyrl/commit/ccf38a739c8b1ccbcf11b94cc2aa3e6333533143#diff-b10564ab7d2c520cdd0243874879fb0a782862c3c902ab535faabe57d5a505e1L24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 75318397</div><div id='project'> Project Name: chaovven/pyrl</div><div id='commit'> Commit Name: ccf38a739c8b1ccbcf11b94cc2aa3e6333533143</div><div id='time'> Time: 2020-03-05</div><div id='author'> Author: aaron.csie@gmail.com</div><div id='file'> File Name: main.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: my_main(3)</div><div id='n_method'> N Method Name: my_main(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: main.py</div><div id='n_file'> N File Name: main.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 24</div><div id='n_end'> N End Line: 51</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    algorithm = gradient_allreduce.GradientAllReduceAlgorithm()

    bagua_model = bagua_model.with_bagua([bagua_optimizer], algorithm)
    <a id="change">try:
        </a>bagua_model = bagua_model.with_bagua([bagua_optimizer], algorithm)
    <a id="change">except </a>Exception:
        time.sleep(0.1)

    model_params = [</code></pre><h3>After Change</h3><pre><code class='java'>

    for epoch in range(5):
        logging.debug("Training epoch {}".format(epoch))
        <a id="change">for _</a> in <a id="change">range(10</a><a id="change">):
            </a>data = torch.randn(4, 2).cuda()
            target = torch.randn(4, 4).cuda()

            bagua_optimizer.zero_grad()
            output<a id="change"> = </a>bagua_model(data)
            loss = nn.MSELoss()(output, target)

            loss.backward()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/baguasys/bagua/commit/88d374c2316a6a4a4a420fbc2bbb566d69869999#diff-a5d7ee32ab8d93a59290923aeb9597cae5becc8fb682daeac373c91bce6061f3L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 75318396</div><div id='project'> Project Name: baguasys/bagua</div><div id='commit'> Commit Name: 88d374c2316a6a4a4a420fbc2bbb566d69869999</div><div id='time'> Time: 2021-10-19</div><div id='author'> Author: 52795221+Tengxu-Sun@users.noreply.github.com</div><div id='file'> File Name: tests/torch_api/test_broadcast_state.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: run_bagua_broad(6)</div><div id='n_method'> N Method Name: run_bagua_broad(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/torch_api/test_broadcast_state.py</div><div id='n_file'> N File Name: tests/torch_api/test_broadcast_state.py</div><div id='m_start'> M Start Line: 77</div><div id='m_end'> M End Line: 85</div><div id='n_start'> N Start Line: 86</div><div id='n_end'> N End Line: 100</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
      winning_interventions.append(inter)

  for i in range(100):
    <a id="change">try:
      </a>test()
    <a id="change">except </a>Exception as e:
      traceback.print_exc()
      pass
</code></pre><h3>After Change</h3><pre><code class='java'>
  best_time = baseline = run_and_time(k)

  winning_interventions = []
  <a id="change">for i</a> in <a id="change">range(10</a><a id="change">):
    </a>print(winning_interventions)
    oo<a id="change"> = </a>search_one(ast, winning_interventions)
    print(oo)
    if oo[1] is None: break
    winning_interventions.append(oo[1])</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/geohot/tinygrad/commit/f6bbd43cb88a44e720838ec0713edb2d932a2543#diff-625c66d48a95a26ab39233eb54208672f28ed8cdf102ba61e1e2f071f56f6c62L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 75318395</div><div id='project'> Project Name: geohot/tinygrad</div><div id='commit'> Commit Name: f6bbd43cb88a44e720838ec0713edb2d932a2543</div><div id='time'> Time: 2023-01-29</div><div id='author'> Author: geohot@gmail.com</div><div id='file'> File Name: extra/kernel_search.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: search(1)</div><div id='n_method'> N Method Name: search(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: extra/kernel_search.py</div><div id='n_file'> N File Name: extra/kernel_search.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 79</div><div id='n_start'> N Start Line: 69</div><div id='n_end'> N End Line: 82</div><BR>