<html><h3>Pattern ID :40219
</h3><img src='114196196.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.optimizer_kwargs = optimizer_kwargs

        &#47&#47 In the future, features_extractor will be replaced with a CNN
        self.features_extractor = <a id="change">nn.Flatten()</a>
        self.features_dim = get_obs_dim(self.observation_space)

        self.net_arch = net_arch
        self.activation_fn = activation_fn</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Default network architecture, from the original paper
        if net_arch is None:
            <a id="change">if features_extractor_class == FlattenExtractor</a>:
                net_arch = [400, 300]
            else:
                net_arch<a id="change"> = </a><a id="change">[]</a>

        if optimizer_kwargs is None:
            optimizer_kwargs = {}

        if features_extractor_kwargs is None:
            features_extractor_kwargs = {}

        self.optimizer_class = optimizer
        self.optimizer_kwargs = optimizer_kwargs

        self.features_extractor_class<a id="change"> = features_extractor_class</a>
        self.features_extractor_kwargs = features_extractor_kwargs
        self.features_extractor = features_extractor_class(self.observation_space, **features_extractor_kwargs)
        self.features_dim = self.features_extractor.features_dim
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/73fb8d1c6303fa7e7bf53522e59ac91e1ea36fd7#diff-f84bbd6ec90ca0699c1e895bfb1c559ece8c89238f652c7aff79e7bb2ac970b2L313' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114196196</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 73fb8d1c6303fa7e7bf53522e59ac91e1ea36fd7</div><div id='time'> Time: 2020-04-22</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/td3/policies.py</div><div id='m_class'> M Class Name: TD3Policy</div><div id='n_method'> N Class Name: TD3Policy</div><div id='m_method'> M Method Name: __init__(18)</div><div id='n_method'> N Method Name: __init__(16)</div><div id='m_parent_class'> M Parent Class: BasePolicy</div><div id='n_parent_class'> N Parent Class: BasePolicy</div><div id='m_file'> M File Name: torchy_baselines/td3/policies.py</div><div id='n_file'> N File Name: torchy_baselines/td3/policies.py</div><div id='m_start'> M Start Line: 313</div><div id='m_end'> M End Line: 323</div><div id='n_start'> N Start Line: 314</div><div id='n_end'> N End Line: 340</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.optimizer_kwargs = optimizer_kwargs

        &#47&#47 In the future, features_extractor will be replaced with a CNN
        self.features_extractor = <a id="change">nn.Flatten()</a>
        self.features_dim = get_obs_dim(self.observation_space)

        self.net_arch = net_arch
        self.activation_fn = activation_fn</code></pre><h3>After Change</h3><pre><code class='java'>
        super(SACPolicy, self).__init__(observation_space, action_space, device, squash_output=True)

        if net_arch is None:
            <a id="change">if features_extractor_class == FlattenExtractor</a>:
                net_arch = [256, 256]
            else:
                net_arch<a id="change"> = </a><a id="change">[]</a>

        if optimizer_kwargs is None:
            optimizer_kwargs = {}

        self.optimizer_class = optimizer
        self.optimizer_kwargs = optimizer_kwargs

        self.features_extractor_class<a id="change"> = </a>features_extractor_class
        self.features_extractor = features_extractor_class(self.observation_space)
        self.features_dim = self.features_extractor.features_dim
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/93c2a01f919508342a9932a1576663bc4d0e36e8#diff-358c27dc03264bce04c4ade8ae7546eb55804c6eae7a6f2faee66acb5a9e83b6L249' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114196194</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 93c2a01f919508342a9932a1576663bc4d0e36e8</div><div id='time'> Time: 2020-04-21</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/sac/policies.py</div><div id='m_class'> M Class Name: SACPolicy</div><div id='n_method'> N Class Name: SACPolicy</div><div id='m_method'> M Method Name: __init__(16)</div><div id='n_method'> N Method Name: __init__(15)</div><div id='m_parent_class'> M Parent Class: BasePolicy</div><div id='n_parent_class'> N Parent Class: BasePolicy</div><div id='m_file'> M File Name: torchy_baselines/sac/policies.py</div><div id='n_file'> N File Name: torchy_baselines/sac/policies.py</div><div id='m_start'> M Start Line: 266</div><div id='m_end'> M End Line: 276</div><div id='n_start'> N Start Line: 264</div><div id='n_end'> N End Line: 284</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.optimizer_kwargs = optimizer_kwargs
        self.ortho_init = ortho_init
        &#47&#47 In the future, feature_extractor will be replaced with a CNN
        self.features_extractor = <a id="change">nn.Flatten()</a>
        self.features_dim = get_obs_dim(self.observation_space)
        self.normalize_images = normalize_images
        self.log_std_init = log_std_init
        dist_kwargs = None</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Default network architecture, from stable-baselines
        if net_arch is None:
            <a id="change">if features_extractor_class == FlattenExtractor</a>:
                net_arch = [dict(pi=[64, 64], vf=[64, 64])]
            else:
                net_arch<a id="change"> = </a><a id="change">[]</a>

        self.net_arch = net_arch
        self.activation_fn = activation_fn

        if optimizer_kwargs is None:
            optimizer_kwargs = {}
            &#47&#47 Small values to avoid NaN in ADAM optimizer
            if optimizer == th.optim.Adam:
                optimizer_kwargs[&quoteps&quot] = 1e-5

        self.optimizer_class = optimizer
        self.optimizer_kwargs = optimizer_kwargs
        self.ortho_init = ortho_init

        self.features_extractor_class<a id="change"> = </a>features_extractor_class
        self.features_extractor = features_extractor_class(self.observation_space)
        self.features_dim = self.features_extractor.features_dim
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/dlr-rm/stable-baselines3/commit/93c2a01f919508342a9932a1576663bc4d0e36e8#diff-c065fd039e0c56feb26ad2bedb0fd71f7e02a0859f13356d127340cf1ffa535bL47' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114196195</div><div id='project'> Project Name: dlr-rm/stable-baselines3</div><div id='commit'> Commit Name: 93c2a01f919508342a9932a1576663bc4d0e36e8</div><div id='time'> Time: 2020-04-21</div><div id='author'> Author: antonin.raffin@ensta.org</div><div id='file'> File Name: torchy_baselines/ppo/policies.py</div><div id='m_class'> M Class Name: PPOPolicy</div><div id='n_method'> N Class Name: PPOPolicy</div><div id='m_method'> M Method Name: __init__(18)</div><div id='n_method'> N Method Name: __init__(17)</div><div id='m_parent_class'> M Parent Class: BasePolicy</div><div id='n_parent_class'> N Parent Class: BasePolicy</div><div id='m_file'> M File Name: torchy_baselines/ppo/policies.py</div><div id='n_file'> N File Name: torchy_baselines/ppo/policies.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 90</div><BR>