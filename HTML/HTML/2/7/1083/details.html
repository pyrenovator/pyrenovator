<html><h3>Pattern ID :1083
</h3><img src='5529428.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        name_list[1] = name_list[1].upper()
        name_list[2] = name_list[2].upper()
        assert name_list[1] in [&quotS&quot, &quotM&quot, &quotL&quot] and name_list[2] == &quotR&quot, name
        pretrained_dataset<a id="change"> = name_list[1]</a>
        layer<a id="change"> = </a>int(name_list[3])
        full_name_list[0] = &quot-&quot.join(name_list)
        <a id="change">return </a>&quot&quot.join(full_name_list)<a id="change">, pretrained_dataset, layer</a>

    def get_official_weights(self, **kwargs) -&gt; OrderedDict[str, torch.Tensor]:
        &#47&#47 TODO: map_location argument
        &#47&#47 TODO: model save_dir defaults to torch.hub.get_dir()</code></pre><h3>After Change</h3><pre><code class='java'>
            for element in name_list[1:]:
                if element[0] == &quotr&quot:
                    sub_list = element[1:].split(&quotx&quot)
                    layer = int(<a id="change">sub_list[0]</a>)
                    if len(sub_list) == 2:
                        width_factor = int(sub_list[1])
                else:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ain-soph/trojanzoo/commit/d1791a5d2011850d8796399912be84c49dd5e788#diff-4c3e42eb0c5012429d8a52fae551eaa3029b50408e5b3f7c99b9e5a17a76698eL48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5529428</div><div id='project'> Project Name: ain-soph/trojanzoo</div><div id='commit'> Commit Name: d1791a5d2011850d8796399912be84c49dd5e788</div><div id='time'> Time: 2021-04-06</div><div id='author'> Author: ain-soph@live.com</div><div id='file'> File Name: trojanvision/models/bit.py</div><div id='m_class'> M Class Name: BiT</div><div id='n_method'> N Class Name: BiT</div><div id='m_method'> M Method Name: parse_name(4)</div><div id='n_method'> N Method Name: parse_name(3)</div><div id='m_parent_class'> M Parent Class: ImageModel</div><div id='n_parent_class'> N Parent Class: ImageModel</div><div id='m_file'> M File Name: trojanvision/models/bit.py</div><div id='n_file'> N File Name: trojanvision/models/bit.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 48</div><div id='n_end'> N End Line: 61</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return dense_to_sparse(adj)
    else:
        idxs = np.nonzero(adj)
        edge_index<a id="change"> = </a>np.stack(idxs)
        edge_weights<a id="change"> = adj[idxs]</a>
        <a id="change">return </a>edge_index<a id="change">, edge_weights</a>


def edge_index_to_adj(edge_index: TensArray,
                      edge_weights: OptTensArray = None,</code></pre><h3>After Change</h3><pre><code class='java'>
    edge_attr = adj[index]

    if len(index) == 3:
        batch = index[0] * <a id="change">adj.shape[-1]</a>
        index = (batch + index[1], batch + index[2])

    edge_index = backend.stack(index, 0)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/50089afdf23de12eb6d11e9d5e7e64d949d45611#diff-06bf001f44c985548f88f63f6218b0ffef4949bcba885086f99529d813e75099L92' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5529430</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: 50089afdf23de12eb6d11e9d5e7e64d949d45611</div><div id='time'> Time: 2022-08-18</div><div id='author'> Author: ivan.marisca@hotmail.it</div><div id='file'> File Name: tsl/ops/connectivity.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: adj_to_edge_index(2)</div><div id='n_method'> N Method Name: adj_to_edge_index(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tsl/ops/connectivity.py</div><div id='n_file'> N File Name: tsl/ops/connectivity.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 114</div><div id='n_start'> N Start Line: 106</div><div id='n_end'> N End Line: 145</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 ddx = torch.diff(torch.diff(x, dim=0), dim=0)[88:268]

        y = self.y_data[index]
        dy<a id="change"> = </a>torch.diff(y, dim=0)[89:269]
        ddy<a id="change"> = torch.diff(torch.diff(y, dim=0), dim=0)[88:268]</a>
        &quot&quot&quot
        size[index][0] = np.min(diastolic list) 
        size[index][1] = np.max(systolic list) 
        &quot&quot&quot
        d = self.size[index][0]
        s = self.size[index][1]
        &#47&#47 m = self.size[index][2].to(&quotcuda&quot)

        <a id="change">return </a>x<a id="change">, y, dy, ddy, d, s</a>

    def __len__(self):
        return self.len
</code></pre><h3>After Change</h3><pre><code class='java'>
        &quot&quot&quot
        d = self.size[index][0]
        s = self.size[index][1]
        m = <a id="change">self.size[index][2]</a>
        info = self.info[index]
        o = self.ohe[index]
        &#47&#47 m = self.size[index][2].to(&quotcuda&quot)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tvs-ai/pytorch_rppgs/commit/2f8ae9596d527f46726b01a17ad81e601913b3b3#diff-a4860f3ef856a8707dafb300bd408a5d43e536dc148f3942473ebf1fafc11e29L17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5529425</div><div id='project'> Project Name: tvs-ai/pytorch_rppgs</div><div id='commit'> Commit Name: 2f8ae9596d527f46726b01a17ad81e601913b3b3</div><div id='time'> Time: 2023-02-05</div><div id='author'> Author: forownsake@gmail.com</div><div id='file'> File Name: vid2bp/BPNetDataset.py</div><div id='m_class'> M Class Name: BPNetDataset</div><div id='n_method'> N Class Name: BPNetDataset</div><div id='m_method'> M Method Name: __getitem__(2)</div><div id='n_method'> N Method Name: __getitem__(2)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: vid2bp/BPNetDataset.py</div><div id='n_file'> N File Name: vid2bp/BPNetDataset.py</div><div id='m_start'> M Start Line: 18</div><div id='m_end'> M End Line: 34</div><div id='n_start'> N Start Line: 18</div><div id='n_end'> N End Line: 31</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return dense_to_sparse(adj)
    else:
        idxs = np.nonzero(adj)
        edge_index<a id="change"> = </a>np.stack(idxs)
        edge_weights<a id="change"> = adj[idxs]</a>
        <a id="change">return </a>edge_index<a id="change">, edge_weights</a>


def edge_index_to_adj(edge_index: TensArray,
                      edge_weights: OptTensArray = None,</code></pre><h3>After Change</h3><pre><code class='java'>

    if len(index) == 3:
        batch = index[0] * adj.shape[-1]
        index = (batch + <a id="change">index[1]</a>, batch + index[2])

    edge_index = backend.stack(index, 0)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/torchspatiotemporal/tsl/commit/f28e5a2fddc34eeb90a13c113512c8ab12b6138b#diff-06bf001f44c985548f88f63f6218b0ffef4949bcba885086f99529d813e75099L92' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 5529427</div><div id='project'> Project Name: torchspatiotemporal/tsl</div><div id='commit'> Commit Name: f28e5a2fddc34eeb90a13c113512c8ab12b6138b</div><div id='time'> Time: 2022-07-20</div><div id='author'> Author: ivan.marisca@hotmail.it</div><div id='file'> File Name: tsl/ops/connectivity.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: adj_to_edge_index(2)</div><div id='n_method'> N Method Name: adj_to_edge_index(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tsl/ops/connectivity.py</div><div id='n_file'> N File Name: tsl/ops/connectivity.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 114</div><div id='n_start'> N Start Line: 106</div><div id='n_end'> N End Line: 145</div><BR>