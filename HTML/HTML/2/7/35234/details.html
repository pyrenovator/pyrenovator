<html><h3>Pattern ID :35234
</h3><img src='100284578.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Create an index for the list of sections
        self.embeddings.index([(uid, text, None) for uid, text in enumerate(self.data)])

        <a id="change">with tempfile</a><a id="change">.NamedTemporaryFile(mode="wb") as output:
            </a>index<a id="change"> = </a>output.name

        self.embeddings.save(index)
        self.embeddings.load(index)</code></pre><h3>After Change</h3><pre><code class='java'>
        self.embeddings.index([(uid, text, None) for uid, text in enumerate(self.data)])

        &#47&#47 Generate temp file path
        index<a id="change"> = </a><a id="change">os.path.join(</a>tempfile.gettempdir(), <a id="change">"embeddings"</a><a id="change">)</a>

        self.embeddings.save(index)
        self.embeddings.load(index)
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/5a5247e1d0f0d2cf56ccc4b232eeec3b032ce868#diff-d9a1e0365bb2c234ab69fd411c1415afeb2cc120172db1196fb6475e54642b51L54' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100284578</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: 5a5247e1d0f0d2cf56ccc4b232eeec3b032ce868</div><div id='time'> Time: 2020-08-21</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: test/python/testembeddings.py</div><div id='m_class'> M Class Name: TestEmbeddings</div><div id='n_method'> N Class Name: TestEmbeddings</div><div id='m_method'> M Method Name: testSave(1)</div><div id='n_method'> N Method Name: testSave(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: test/python/testembeddings.py</div><div id='n_file'> N File Name: test/python/testembeddings.py</div><div id='m_start'> M Start Line: 54</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 56</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        Tests ANN save/load.
        

        <a id="change">with tempfile</a><a id="change">.NamedTemporaryFile(mode="wb") as output:
            </a>index<a id="change"> = </a>output.name

        model = self.backend("annoy")
        model.save(index)</code></pre><h3>After Change</h3><pre><code class='java'>
        

        &#47&#47 Generate temp file path
        index<a id="change"> = </a><a id="change">os.path.join(</a>tempfile.gettempdir(), <a id="change">"ann"</a><a id="change">)</a>

        model = self.backend("annoy")
        model.save(index)
        model.load(index)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/5a5247e1d0f0d2cf56ccc4b232eeec3b032ce868#diff-f8a27783933dd21bb064dd27e73d0359c0985ba2c4e0151208a78f24366fc09dL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100284579</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: 5a5247e1d0f0d2cf56ccc4b232eeec3b032ce868</div><div id='time'> Time: 2020-08-21</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: test/python/testann.py</div><div id='m_class'> M Class Name: TestANN</div><div id='n_method'> N Class Name: TestANN</div><div id='m_method'> M Method Name: testSave(1)</div><div id='n_method'> N Method Name: testSave(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: test/python/testann.py</div><div id='n_file'> N File Name: test/python/testann.py</div><div id='m_start'> M Start Line: 46</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 47</div><div id='n_end'> N End Line: 47</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.list_of_eligible_wave_paths = list(self.list_of_eligible_wave_paths)
        self.waves = list()
        for path in tqdm(self.list_of_eligible_wave_paths):
            <a id="change">with open</a><a id="change">(path, "rb") as audio_file:
                </a>wave_orig<a id="change">, _ = </a>sf.read(audio_file)
            self.waves.append(self.preprocess_ap.audio_to_wave_tensor(wave_orig, normalize=True, mulaw=False))
        print("{} eligible audios found".format(len(self.waves)))
</code></pre><h3>After Change</h3><pre><code class='java'>
                self.waves.append(torch.tensor(wave))
            torch.save(self.waves, os.path.join(cache_dir, "waves.pt"))
        else:
            self.waves<a id="change"> = </a>torch.load(<a id="change">os.path.join(</a>cache_dir, <a id="change">"waves.pt"</a><a id="change">)</a>, map_location=&quotcpu&quot)

        print("{} eligible audios found".format(len(self.waves)))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/digitalphonetics/ims-toucan/commit/c762d97e04a62c8f3d839cc12c1f3c2b375bde9e#diff-56f51c307d53159c7cba2dab62c76f72ee2ed8cc56a0bbf8408982c5401993e5L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100284576</div><div id='project'> Project Name: digitalphonetics/ims-toucan</div><div id='commit'> Commit Name: c762d97e04a62c8f3d839cc12c1f3c2b375bde9e</div><div id='time'> Time: 2021-10-28</div><div id='author'> Author: florian.lux@ims.uni-stuttgart.de</div><div id='file'> File Name: TrainingInterfaces/Spectrogram_to_Wave/HiFIGAN/HiFiGANDataset.py</div><div id='m_class'> M Class Name: HiFiGANDataset</div><div id='n_method'> N Class Name: HiFiGANDataset</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: Dataset</div><div id='n_parent_class'> N Parent Class: Dataset</div><div id='m_file'> M File Name: TrainingInterfaces/Spectrogram_to_Wave/HiFIGAN/HiFiGANDataset.py</div><div id='n_file'> N File Name: TrainingInterfaces/Spectrogram_to_Wave/HiFIGAN/HiFiGANDataset.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 49</div><div id='n_start'> N Start Line: 17</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    file_path = os.path.join(log_dir, camera_id, "objects_log", today + ".csv")
    now = datetime.today()
    violations = 0
    <a id="change">with open</a><a id="change">(file_path, &quotr&quot, newline=&quot&quot) as csvfile:
        </a>reader<a id="change"> = </a>csv.DictReader(csvfile)
        for row in reader:
            row_time = datetime.strptime(row[&quotTimestamp&quot], "%Y-%m-%d %H:%M:%S")
            if ((now - row_time).seconds / 60) &lt; interval:</code></pre><h3>After Change</h3><pre><code class='java'>

    violations = 0
    if entity_type == &quotCamera&quot:
        file_paths<a id="change"> = </a>[<a id="change">os.path.join(</a>log_dir, entity_info[&quotid&quot], <a id="change">"objects_log"</a>, today + ".csv"<a id="change">)</a>]
    else:
        &#47&#47 entity_type == &quotArea&quot
        camera_ids = entity_info[&quotcameras&quot]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuralet/smart-social-distancing/commit/cc83a5359249689566aff454deb74f361ee3c432#diff-61543c94b6b9e62dd360231676e1266517169b7ab96d3c16929c60e65ef5f869L11' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100284577</div><div id='project'> Project Name: neuralet/smart-social-distancing</div><div id='commit'> Commit Name: cc83a5359249689566aff454deb74f361ee3c432</div><div id='time'> Time: 2020-10-23</div><div id='author'> Author: 42361379+renzodgc@users.noreply.github.com</div><div id='file'> File Name: libs/utils/notifications.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: check_violations(7)</div><div id='n_method'> N Method Name: check_violations(7)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: libs/utils/notifications.py</div><div id='n_file'> N File Name: libs/utils/notifications.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 32</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 46</div><BR>