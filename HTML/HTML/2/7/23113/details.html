<html><h3>Pattern ID :23113
</h3><img src='73084795.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Preload all the elements you are going to need at inference.
        &#47&#47 For instance your model, processors, tokenizer that might be needed.
        &#47&#47 This function is only called once, so do all the heavy processing I/O here
        <a id="change">raise </a><a id="change">NotImplementedError(
            "Please implement SentenceSimilarityPipeline __init__ function"</a><a id="change">
        )</a>

    def __call__(self, inputs: Dict[str, Union[str, List[str]]]) -&gt; List[float]:
        
        Args:</code></pre><h3>After Change</h3><pre><code class='java'>
    ):
        &#47&#47 At the time, only public models from spaCy are allowed in the inference API.
        full_model_path = model_id.split("/")
        <a id="change">if </a><a id="change">len(full_model_path) != 2</a>:
            raise ValueError(
                f"Invalid model_id: {model_id}. It should have a namespace (:namespace:/:model_name:)"
            )
        namespace<a id="change">, model_name = </a>full_model_path
        package = f"https://huggingface.co/{namespace}/{model_name}/resolve/main/{model_name}-any-py3-none-any.whl"
        cache_dir = os.environ["PIP_CACHE"]
        subprocess.check_call(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/huggingface/huggingface_hub/commit/75e3d92b04b05c46924cfc334d12ae236a5d2a6a#diff-0c061c48ef67c2a2ae8be0ad302468e982fd1113ea028b44ce144e4668ff2d6eL15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73084795</div><div id='project'> Project Name: huggingface/huggingface_hub</div><div id='commit'> Commit Name: 75e3d92b04b05c46924cfc334d12ae236a5d2a6a</div><div id='time'> Time: 2021-10-15</div><div id='author'> Author: 60084015+devpramod@users.noreply.github.com</div><div id='file'> File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='m_class'> M Class Name: SentenceSimilarityPipeline</div><div id='n_method'> N Class Name: SentenceSimilarityPipeline</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: Pipeline</div><div id='n_parent_class'> N Parent Class: Pipeline</div><div id='m_file'> M File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='n_file'> N File Name: api-inference-community/docker_images/spacy/app/pipelines/sentence_similarity.py</div><div id='m_start'> M Start Line: 15</div><div id='m_end'> M End Line: 17</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 29</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                create_graph=False,
            )
        elif self.jacobian_mode == "single":
            <a id="change">raise </a><a id="change">NotImplementedError("single jacobian not avaialble yet"</a><a id="change">)</a>
        elif self.jacobian_mode == "chunk":
            raise NotImplementedError("chunk jacobian not avaialble yet")
        else:
            raise ValueError(</code></pre><h3>After Change</h3><pre><code class='java'>
                parameters_identity=parameters_identity,
            )
        else:
            <a id="change">if </a><a id="change">len(self.get_parameter_identity_vector(parameters_identity=parameters_identity)) &gt; self.jacobian_chunksize</a>:
                dochunk<a id="change"> = </a>True

        &#47&#47 If the parameter list is too large, apply the chunk jacobian analysis
        if dochunk:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/connorstoneastro/autoprof/commit/cfc5cffa5995a17b424bb6b94909a89c1dedf993#diff-f48e7e4f4617c56a91cecf87400e1b8c67ec5491c53dceae61328526ff99ebfeL328' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73084793</div><div id='project'> Project Name: connorstoneastro/autoprof</div><div id='commit'> Commit Name: cfc5cffa5995a17b424bb6b94909a89c1dedf993</div><div id='time'> Time: 2023-04-01</div><div id='author'> Author: connorstone628@gmail.com</div><div id='file'> File Name: autoprof/models/model_object.py</div><div id='m_class'> M Class Name: Component_Model</div><div id='n_method'> N Class Name: Component_Model</div><div id='m_method'> M Method Name: jacobian(5)</div><div id='n_method'> N Method Name: jacobian(5)</div><div id='m_parent_class'> M Parent Class: AutoProf_Model</div><div id='n_parent_class'> N Parent Class: AutoProf_Model</div><div id='m_file'> M File Name: autoprof/models/model_object.py</div><div id='n_file'> N File Name: autoprof/models/model_object.py</div><div id='m_start'> M Start Line: 368</div><div id='m_end'> M End Line: 394</div><div id='n_start'> N Start Line: 422</div><div id='n_end'> N End Line: 467</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        raise NotImplementedError(f"Please implement the `prepare_tasks` method.")

    def prepare_new_models(self, *args, **kwargs):
        <a id="change">raise </a><a id="change">NotImplementedError(f"Please implement the `prepare_new_models` method."</a><a id="change">)</a>

    def update_online_pred(self, *args, **kwargs):
        raise NotImplementedError(f"Please implement the `update_online_pred` method.")
</code></pre><h3>After Change</h3><pre><code class='java'>
        Args:
            tasks (list): a list of tasks.
        
        <a id="change">if </a>not (tasks is None or <a id="change">len(tasks) == 0</a>):
            if self._trainer is not None:
                new_models<a id="change"> = </a>self._trainer.train(tasks, *args, **kwargs)
                self.set_online_tag(self.NEXT_ONLINE_TAG, new_models)
                self.logger.info(
                    f"Finished prepare {len(new_models)} new models and set them to `{self.NEXT_ONLINE_TAG}`."</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/microsoft/qlib/commit/431a9c92c1654b132e00211361713b8edcbfd5eb#diff-594d79bb5840af0d90b1c2f96d93e48320caf6c17da2688ec37a489412877fb9L28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73084789</div><div id='project'> Project Name: microsoft/qlib</div><div id='commit'> Commit Name: 431a9c92c1654b132e00211361713b8edcbfd5eb</div><div id='time'> Time: 2021-04-02</div><div id='author'> Author: lzh222333@163.com</div><div id='file'> File Name: qlib/workflow/online/manager.py</div><div id='m_class'> M Class Name: OnlineManager</div><div id='n_method'> N Class Name: OnlineManager</div><div id='m_method'> M Method Name: prepare_new_models(2)</div><div id='n_method'> N Method Name: prepare_new_models(1)</div><div id='m_parent_class'> M Parent Class: Serializable</div><div id='n_parent_class'> N Parent Class: Serializable</div><div id='m_file'> M File Name: qlib/workflow/online/manager.py</div><div id='n_file'> N File Name: qlib/workflow/online/manager.py</div><div id='m_start'> M Start Line: 29</div><div id='m_end'> M End Line: 29</div><div id='n_start'> N Start Line: 34</div><div id='n_end'> N End Line: 50</div><BR>