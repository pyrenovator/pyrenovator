<html><h3>Pattern ID :19668
</h3><img src='64019096.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        dense_out_file_path = os.path.join(output_dir, f + "_dense.npy")
        sparse_out_file_path = os.path.join(output_dir, f + "_sparse.npy")
        labels_out_file_path = os.path.join(output_dir, f + "_labels.npy")
        <a id="change">print(
            f"Processing {in_file_path}. Outputs will be saved to {dense_out_file_path}"
            f", {sparse_out_file_path}, and {labels_out_file_path}..."</a><a id="change">
        )</a>
        BinaryCriteoUtils.tsv_to_npys(
            in_file_path,
            dense_out_file_path,
            sparse_out_file_path,</code></pre><h3>After Change</h3><pre><code class='java'>

    for i in range(24):
        in_file_path = os.path.join(input_dir, f"day_{i}")
        <a id="change">if not os.path.exists(in_file_path)</a>:
            continue
        dense_out_file_path = os.path.join(output_dir, f"day_{i}_dense.npy")
        sparse_out_file_path = os.path.join(output_dir, f"day_{i}_sparse.npy")
        labels_out_file_path = os.path.join(output_dir, f"day_{i}_labels.npy")
        <a id="change">print(
            f"Processing {in_file_path}.\nOutput will be saved to\n{dense_out_file_path}"
            f"\n{sparse_out_file_path}\n{labels_out_file_path}"</a><a id="change">
        )</a>
        BinaryCriteoUtils.tsv_to_npys(
            in_file_path,
            dense_out_file_path,
            sparse_out_file_path,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/facebookresearch/torchrec/commit/ad681b29713836ccb4403a66d6fe626ef752e745#diff-4df52fe0ee96e218fb0e628f3f9c2c2835d314b49efbca207c822944b37dfa64L51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019096</div><div id='project'> Project Name: facebookresearch/torchrec</div><div id='commit'> Commit Name: ad681b29713836ccb4403a66d6fe626ef752e745</div><div id='time'> Time: 2022-10-07</div><div id='author'> Author: samiw1@fb.com</div><div id='file'> File Name: torchrec/datasets/scripts/npy_preproc_criteo.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: torchrec/datasets/scripts/npy_preproc_criteo.py</div><div id='n_file'> N File Name: torchrec/datasets/scripts/npy_preproc_criteo.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 62</div><div id='n_start'> N Start Line: 54</div><div id='n_end'> N End Line: 64</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        unzip all the zipped files in a directory
        all_files = glob.glob(f"{self.ds_dir}/*.zip")
        for f in all_files:
            <a id="change">print(f"unziping {os.path.join(self.ds_dir, f)} to {os.path.join(self.ds_dir, f.split(&quot.zip&quot)[0])}"</a><a id="change">)</a>
            with zipfile.ZipFile(os.path.join(self.ds_dir, f), &quotr&quot) as zip_ref:
                zip_ref.extractall(os.path.join(self.ds_dir, f.split(&quot.zip&quot)[0]))
        return
</code></pre><h3>After Change</h3><pre><code class='java'>
        for f in all_files:
            src = os.path.join(self.ds_dir, f)
            trgt = os.path.join(self.ds_dir, f.split(&quot.zip&quot)[0])
            <a id="change">if not os.path.exists(trgt)</a>:
                <a id="change">print(f"unziping {src} to {trgt}"</a><a id="change">)</a>
                with zipfile.ZipFile(os.path.join(self.ds_dir, f), &quotr&quot) as zip_ref:
                    zip_ref.extractall(os.path.join(self.ds_dir, f.split(&quot.zip&quot)[0]))
        return
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/atrcheema/dl4seq/commit/5445cc5892161a9dd6913bfe95949a02bb3c6678#diff-196c00484d58b5ae075aa626ab6b3f7b09e5a0418dff2fa1e25d6508eef09babL90' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019097</div><div id='project'> Project Name: atrcheema/dl4seq</div><div id='commit'> Commit Name: 5445cc5892161a9dd6913bfe95949a02bb3c6678</div><div id='time'> Time: 2021-02-03</div><div id='author'> Author: ather_abbas786@yahoo.com</div><div id='file'> File Name: dl4seq/utils/datasets.py</div><div id='m_class'> M Class Name: Datasets</div><div id='n_method'> N Class Name: Datasets</div><div id='m_method'> M Method Name: _unzip(1)</div><div id='n_method'> N Method Name: _unzip(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: dl4seq/utils/datasets.py</div><div id='n_file'> N File Name: dl4seq/utils/datasets.py</div><div id='m_start'> M Start Line: 94</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 168</div><div id='n_end'> N End Line: 175</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        from urllib.request import urlretrieve
    tar_fname = "bair_robot_pushing_dataset_v0.tar"
    dst_path = str(d_path / tar_fname)
    <a id="change">print(f"Downloading {tar_fname}"</a><a id="change">)</a>
    URL = f"http://rail.eecs.berkeley.edu/datasets/{tar_fname}"
    urlretrieve(URL, dst_path)
    import tarfile
    tar = tarfile.open(dst_path)</code></pre><h3>After Change</h3><pre><code class='java'>
    from vp_suite.utils.utils import TqdmUpTo
    tar_fname = "bair_robot_pushing_dataset_v0.tar"
    tar_path = str(d_path / tar_fname)
    <a id="change">if not os.path.exists(tar_path)</a>:
        <a id="change">print(f"Downloading {tar_fname} (~30GB, might take a while)..."</a><a id="change">)</a>
        URL = f"http://rail.eecs.berkeley.edu/datasets/{tar_fname}"
        with TqdmUpTo(unit=&quotB&quot, unit_scale=True, unit_divisor=1024, miniters=1, desc=tar_fname) as t:
            urlretrieve(URL, tar_path, reporthook=t.update_to)
    print("Extracting data...")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ais-bonn/vp-suite/commit/9fb9037abaff25480e0cef7c99c75377b0908648#diff-0a51ff6a603c306c05121e2b4190922bf7fef08d7c9b90aea271e1635fe8b4ccL72' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 64019099</div><div id='project'> Project Name: ais-bonn/vp-suite</div><div id='commit'> Commit Name: 9fb9037abaff25480e0cef7c99c75377b0908648</div><div id='time'> Time: 2022-01-06</div><div id='author'> Author: boltres@ais.uni-bonn.de</div><div id='file'> File Name: vp_suite/dataset/bair.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: download_and_extract_bair(1)</div><div id='n_method'> N Method Name: download_and_extract_bair(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vp_suite/dataset/bair.py</div><div id='n_file'> N File Name: vp_suite/dataset/bair.py</div><div id='m_start'> M Start Line: 78</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 86</div><BR>