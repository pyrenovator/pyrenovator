<html><h3>Pattern ID :23154
</h3><img src='73116507.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                                         size: Union[int, None] = None):
        assert sort_filed is not None and sort_order is not None
        query = self.get_bool_must_constant_score_query(field_term_dict)
        <a id="change">if sort_order and sort_filed</a>:
            sort_query = self.get_sort_query(field_name=sort_filed, order=sort_order)
            sort<a id="change"> = </a><a id="change">[</a>sort_query<a id="change"></a>]
        else:
            sort<a id="change"> = </a><a id="change">[]</a>
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = results[&quothits&quot][&quothits&quot]
        if len(hits) == 0:
            return None</code></pre><h3>After Change</h3><pre><code class='java'>
        query = self.get_bool_must_constant_score_query(field_term_dict)
        sort = self.get_sort_query(field_name=sort_filed, order=sort_order)
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = <a id="change">ElasticsearchEngin.get_hits(</a>results<a id="change">)</a>
        return hits

    @staticmethod
    def get_match_query(field_name,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pooya-mohammadi/deep_utils/commit/cff617f84e1e3aaad7c3008a14bdb03186bf6283#diff-3c0624f811f35c8966d9059e1b5a26f1eeee7a01dfa97e3bc3aefe7626f79207L255' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73116507</div><div id='project'> Project Name: pooya-mohammadi/deep_utils</div><div id='commit'> Commit Name: cff617f84e1e3aaad7c3008a14bdb03186bf6283</div><div id='time'> Time: 2022-09-18</div><div id='author'> Author: pooyamohammadikazaj@gmail.com</div><div id='file'> File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_class'> M Class Name: ElasticsearchEngin</div><div id='n_method'> N Class Name: ElasticsearchEngin</div><div id='m_method'> M Method Name: search_bool_must_fuzzy_constant_score_range_sort(6)</div><div id='n_method'> N Method Name: search_bool_must_fuzzy_constant_score_range_sort(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='n_file'> N File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_start'> M Start Line: 255</div><div id='m_end'> M End Line: 264</div><div id='n_start'> N Start Line: 317</div><div id='n_end'> N End Line: 319</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                                    size: Union[int, None] = None):
        assert lat is not None and lon is not None
        query = self.get_bool_must_constant_score_query(field_term_dict)
        <a id="change">if lat and lon</a>:
            geo_sort = self.get_geo_sort(lat, lon)
            sort<a id="change"> = </a><a id="change">[</a>geo_sort<a id="change"></a>]
        else:
            sort<a id="change"> = </a><a id="change">[]</a>
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = results[&quothits&quot][&quothits&quot]
        if len(hits) == 0:
            return None</code></pre><h3>After Change</h3><pre><code class='java'>
        query = self.get_bool_must_constant_score_query(field_term_dict)
        sort = self.get_geo_sort(lat, lon)
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = <a id="change">self.get_hits(</a>results<a id="change">)</a>
        return hits

    def search_bool_must_fuzzy_query_sort(self,
                                          field_term_dict: dict,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pooya-mohammadi/deep_utils/commit/cff617f84e1e3aaad7c3008a14bdb03186bf6283#diff-3c0624f811f35c8966d9059e1b5a26f1eeee7a01dfa97e3bc3aefe7626f79207L212' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73116521</div><div id='project'> Project Name: pooya-mohammadi/deep_utils</div><div id='commit'> Commit Name: cff617f84e1e3aaad7c3008a14bdb03186bf6283</div><div id='time'> Time: 2022-09-18</div><div id='author'> Author: pooyamohammadikazaj@gmail.com</div><div id='file'> File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_class'> M Class Name: ElasticsearchEngin</div><div id='n_method'> N Class Name: ElasticsearchEngin</div><div id='m_method'> M Method Name: get_bool_must_constant_score_query_geo_sort(6)</div><div id='n_method'> N Method Name: get_bool_must_constant_score_query_geo_sort(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='n_file'> N File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_start'> M Start Line: 219</div><div id='m_end'> M End Line: 228</div><div id='n_start'> N Start Line: 252</div><div id='n_end'> N End Line: 254</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                                              size: Union[int, None] = None):
        assert lat is not None and lon is not None
        query = self.get_bool_must_fuzzy_query(field_term_dict)
        <a id="change">if lat and lon</a>:
            geo_sort = self.get_geo_sort(lat, lon)
            sort<a id="change"> = </a><a id="change">[</a>geo_sort<a id="change"></a>]
        else:
            sort<a id="change"> = </a><a id="change">[]</a>
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = results[&quothits&quot][&quothits&quot]
        if len(hits) == 0:
            return None</code></pre><h3>After Change</h3><pre><code class='java'>
        query = self.get_bool_must_fuzzy_query(field_term_dict)
        sort = self.get_geo_sort(lat, lon, field_name=geo_sort_field_name, order=geo_sort_order)
        results = self.es.search(index=index_name, query=query, sort=sort, size=size).body
        hits = <a id="change">self.get_hits(</a>results<a id="change">)</a>
        return hits

    def get_bool_must_constant_score_query_geo_sort(self,
                                                    field_term_dict: dict,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/pooya-mohammadi/deep_utils/commit/cff617f84e1e3aaad7c3008a14bdb03186bf6283#diff-3c0624f811f35c8966d9059e1b5a26f1eeee7a01dfa97e3bc3aefe7626f79207L194' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 73116510</div><div id='project'> Project Name: pooya-mohammadi/deep_utils</div><div id='commit'> Commit Name: cff617f84e1e3aaad7c3008a14bdb03186bf6283</div><div id='time'> Time: 2022-09-18</div><div id='author'> Author: pooyamohammadikazaj@gmail.com</div><div id='file'> File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_class'> M Class Name: ElasticsearchEngin</div><div id='n_method'> N Class Name: ElasticsearchEngin</div><div id='m_method'> M Method Name: search_bool_must_fuzzy_query_geo_sort(8)</div><div id='n_method'> N Method Name: search_bool_must_fuzzy_query_geo_sort(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='n_file'> N File Name: deep_utils/elasticsearch/search_engine/elasticsearch_search_engine.py</div><div id='m_start'> M Start Line: 201</div><div id='m_end'> M End Line: 210</div><div id='n_start'> N Start Line: 225</div><div id='n_end'> N End Line: 242</div><BR>