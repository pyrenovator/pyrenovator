<html><h3>Pattern ID :24454
</h3><img src='76007431.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

  def test_ood_metric(self):
    a = ood_utils.OODMetric("msp")
    scores = <a id="change">[0.6</a>, 0.1<a id="change"></a>]
    labels = [1, 0]
    a.update(scores, labels)
    self.assertEqual((scores, labels), a.get_scores_and_labels())</code></pre><h3>After Change</h3><pre><code class='java'>
    metric_name = "msp"
    ood_metric = ood_utils.OODMetric(metric_name)
    scores = [0.2, 0.4, 0.35, 0.1]
    labels<a id="change"> = </a><a id="change">[</a>0, 0, <a id="change">1</a>, <a id="change">1</a>]
    ood_metric.update(scores, labels)

    self.assertEqual(metric_name, ood_metric.get_metric_name())
    <a id="change">self.assertEqual(</a>(scores, labels), ood_metric.get_scores_and_labels()<a id="change">)</a>
    self.assertDictEqual(
        ood_metric.compute_metrics(),
        {
            "auc-roc": 0.25,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/google/uncertainty-baselines/commit/7d318b09c94f56b28ea3a60897a6e4b5143cc611#diff-bda3074ba8e7ac5d773dbeb82381fd02e1615ae27d87201ae34f10a560d0b89bL31' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76007431</div><div id='project'> Project Name: google/uncertainty-baselines</div><div id='commit'> Commit Name: 7d318b09c94f56b28ea3a60897a6e4b5143cc611</div><div id='time'> Time: 2021-09-08</div><div id='author'> Author: jjren@google.com</div><div id='file'> File Name: baselines/jft/ood_utils_test.py</div><div id='m_class'> M Class Name: OodUtilsTest</div><div id='n_method'> N Class Name: OodUtilsTest</div><div id='m_method'> M Method Name: test_ood_metric(1)</div><div id='n_method'> N Method Name: test_ood_metric(1)</div><div id='m_parent_class'> M Parent Class: tf.test.TestCase</div><div id='n_parent_class'> N Parent Class: tf.test.TestCase</div><div id='m_file'> M File Name: baselines/jft/ood_utils_test.py</div><div id='n_file'> N File Name: baselines/jft/ood_utils_test.py</div><div id='m_start'> M Start Line: 31</div><div id='m_end'> M End Line: 35</div><div id='n_start'> N Start Line: 31</div><div id='n_end'> N End Line: 46</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Test concat (values joined into single string) merge
        task.merge = "concat"
        workflow = Workflow([task])
        results = list(workflow(<a id="change">[2</a>]))
        self.assertEqual(results, ["4. 8"])

        &#47&#47 Test generated (id, data, tag) tuples are properly returned</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Test no merge
        task.merge = None
        results<a id="change"> = </a>list(workflow(<a id="change">[2</a>, 4, <a id="change">6</a>]))
        <a id="change">self.assertEqual(</a>results, [[4, 16, 36], [8, 64, 216]]<a id="change">)</a>

        &#47&#47 Test generated (id, data, tag) tuples are properly returned
        workflow = Workflow([Task(lambda x: [(0, y, None) for y in x])])
        results = list(workflow([(1, "text", "tags")]))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/neuml/txtai/commit/97f7976b82b8f259e5b774abbe4e8738b95cd1b4#diff-4bf7fce189b884296c8fa34dd116ec81cbf5fa896fd1bd2a1a28b94cbf9a6e17L104' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76007447</div><div id='project'> Project Name: neuml/txtai</div><div id='commit'> Commit Name: 97f7976b82b8f259e5b774abbe4e8738b95cd1b4</div><div id='time'> Time: 2021-11-26</div><div id='author'> Author: 561939+davidmezzetti@users.noreply.github.com</div><div id='file'> File Name: test/python/testworkflow.py</div><div id='m_class'> M Class Name: TestWorkflow</div><div id='n_method'> N Class Name: TestWorkflow</div><div id='m_method'> M Method Name: testMergeWorkflow(1)</div><div id='n_method'> N Method Name: testMergeWorkflow(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: test/python/testworkflow.py</div><div id='n_file'> N File Name: test/python/testworkflow.py</div><div id='m_start'> M Start Line: 109</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 123</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    with tfds.testing.mock_data(num_examples=100, data_dir=data_dir):
      ids, test_accs = active_learning.main(config, output_dir)

    self.assertAllClose(test_accs, <a id="change">[0.125</a>, 0.125<a id="change"></a>])
    self.assertAllEqual(ids, [1751673441, 543581031, 1701210465, 1701209956])

</code></pre><h3>After Change</h3><pre><code class='java'>
                                    acquisition_method)

    &#47&#47 Get the warmup batch
    gt_ids<a id="change"> = </a><a id="change">[934744266</a>, <a id="change">986104245</a>] + gt_ids
    <a id="change">self.assertEqual(</a>ids, set(gt_ids)<a id="change">)</a>


if __name__ == &quot__main__&quot:
  tf.test.main()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/google/uncertainty-baselines/commit/8860b03389544858acff3220a052b659cb0c071c#diff-05bca87d283041f69ead28b00cf33af8b8fc4d370827b9b3dffe83975dc82d65L44' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 76007430</div><div id='project'> Project Name: google/uncertainty-baselines</div><div id='commit'> Commit Name: 8860b03389544858acff3220a052b659cb0c071c</div><div id='time'> Time: 2021-12-18</div><div id='author'> Author: git@joo.st</div><div id='file'> File Name: baselines/jft/active_learning_test.py</div><div id='m_class'> M Class Name: ActiveLearningTest</div><div id='n_method'> N Class Name: ActiveLearningTest</div><div id='m_method'> M Method Name: test_active_learning_script(3)</div><div id='n_method'> N Method Name: test_active_learning_script(1)</div><div id='m_parent_class'> M Parent Class: parameterized.TestCase,tf.test.TestCase</div><div id='n_parent_class'> N Parent Class: tf.test.TestCase</div><div id='m_file'> M File Name: baselines/jft/active_learning_test.py</div><div id='n_file'> N File Name: baselines/jft/active_learning_test.py</div><div id='m_start'> M Start Line: 44</div><div id='m_end'> M End Line: 80</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 92</div><BR>