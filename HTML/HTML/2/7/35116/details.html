<html><h3>Pattern ID :35116
</h3><img src='100173544.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        print(&quotaveraging checkpoints: &quot, args.inputs)

    new_state = average_checkpoints(args.inputs)
    <a id="change">torch.save(</a>new_state, args.output<a id="change">)</a>
    print(&quotFinished writing averaged checkpoint to {}.&quot.format(args.output))


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
        print(&quotaveraging checkpoints: &quot, args.inputs)

    new_state = average_checkpoints(args.inputs)
    <a id="change">with </a><a id="change">PathManager.open(args.output, &quotwb&quot) as f:
        </a><a id="change">torch.save(</a>new_state, <a id="change">f</a><a id="change">)</a>
    print(&quotFinished writing averaged checkpoint to {}.&quot.format(args.output))


if __name__ == &quot__main__&quot:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/kssteven418/i-bert/commit/4d2efae84dc4eaf8c66625ab6af0fdc4aa794da0#diff-30e74700e6880f3a85e54b0ecf831208b68e903504ee8703a9b8616f609cc28cL137' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100173544</div><div id='project'> Project Name: kssteven418/i-bert</div><div id='commit'> Commit Name: 4d2efae84dc4eaf8c66625ab6af0fdc4aa794da0</div><div id='time'> Time: 2020-03-30</div><div id='author'> Author: wyz@fb.com</div><div id='file'> File Name: scripts/average_checkpoints.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/average_checkpoints.py</div><div id='n_file'> N File Name: scripts/average_checkpoints.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 138</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        print(&quotaveraging checkpoints: &quot, args.inputs)

    new_state = average_checkpoints(args.inputs)
    <a id="change">torch.save(</a>new_state, args.output<a id="change">)</a>
    print(&quotFinished writing averaged checkpoint to {}.&quot.format(args.output))


if __name__ == &quot__main__&quot:</code></pre><h3>After Change</h3><pre><code class='java'>
        print(&quotaveraging checkpoints: &quot, args.inputs)

    new_state = average_checkpoints(args.inputs)
    <a id="change">with </a><a id="change">PathManager.open(args.output, &quotwb&quot) as f:
        </a><a id="change">torch.save(</a>new_state, f<a id="change">)</a>
    print(&quotFinished writing averaged checkpoint to {}.&quot.format(args.output))


if __name__ == &quot__main__&quot:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/mohammadkhalifa/fairseq-tagging/commit/4d2efae84dc4eaf8c66625ab6af0fdc4aa794da0#diff-30e74700e6880f3a85e54b0ecf831208b68e903504ee8703a9b8616f609cc28cL91' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100173545</div><div id='project'> Project Name: mohammadkhalifa/fairseq-tagging</div><div id='commit'> Commit Name: 4d2efae84dc4eaf8c66625ab6af0fdc4aa794da0</div><div id='time'> Time: 2020-03-30</div><div id='author'> Author: wyz@fb.com</div><div id='file'> File Name: scripts/average_checkpoints.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(0)</div><div id='n_method'> N Method Name: main(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: scripts/average_checkpoints.py</div><div id='n_file'> N File Name: scripts/average_checkpoints.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 138</div><div id='n_start'> N Start Line: 140</div><div id='n_end'> N End Line: 143</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            model: A NeuralProphet model object.
        
        super().handle_return(model)
        <a id="change">torch.save(</a>model, os.path.join(self.artifact.uri, DEFAULT_FILENAME)<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
            model: A NeuralProphet model object.
        
        super().handle_return(model)
        <a id="change">with </a><a id="change">fileio.open(
            os.path.join(self.artifact.uri, DEFAULT_FILENAME), "wb"
        ) as f:
            </a><a id="change">torch.save(</a>model, f<a id="change">)</a>
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/1f5e8152bc8c4bcd70773d9b05f05c00099639a3#diff-aae0c21a2f68adc609470350f4b053a3e1d30ccb4b93a032bb2c4928e055e269L53' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100173546</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 1f5e8152bc8c4bcd70773d9b05f05c00099639a3</div><div id='time'> Time: 2022-11-29</div><div id='author'> Author: 34200873+safoinme@users.noreply.github.com</div><div id='file'> File Name: src/zenml/integrations/neural_prophet/materializers/neural_prophet_materializer.py</div><div id='m_class'> M Class Name: NeuralProphetMaterializer</div><div id='n_method'> N Class Name: NeuralProphetMaterializer</div><div id='m_method'> M Method Name: handle_return(2)</div><div id='n_method'> N Method Name: handle_return(2)</div><div id='m_parent_class'> M Parent Class: BaseMaterializer</div><div id='n_parent_class'> N Parent Class: BaseMaterializer</div><div id='m_file'> M File Name: src/zenml/integrations/neural_prophet/materializers/neural_prophet_materializer.py</div><div id='n_file'> N File Name: src/zenml/integrations/neural_prophet/materializers/neural_prophet_materializer.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 60</div><div id='n_start'> N Start Line: 62</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            model: A torch.nn.Module or a dict to pass into model.save
        
        super().handle_return(model)
        <a id="change">torch.save(</a>model, os.path.join(self.artifact.uri, DEFAULT_FILENAME)<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
        super().handle_return(model)

        &#47&#47 Save entire model to artifact directory, This is the default behavior for loading model in development phase (training, evaluation)
        <a id="change">with </a><a id="change">fileio.open(
            os.path.join(self.artifact.uri, DEFAULT_FILENAME), "wb"
        ) as f:
            </a><a id="change">torch.save(</a>model, f<a id="change">)</a>

        &#47&#47 Save model checkpoint to artifact directory, This is the default behavior for loading model in production phase (inference)
        if isinstance(model, Module):
            with fileio.open(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/maiot-io/zenml/commit/8055ebd9e5b05b2a690929688dae4c513b7526e0#diff-cd65fe73de22cf46009952edc04283bb09b83e03285e91aab9135ede1f1efb33L45' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 100173543</div><div id='project'> Project Name: maiot-io/zenml</div><div id='commit'> Commit Name: 8055ebd9e5b05b2a690929688dae4c513b7526e0</div><div id='time'> Time: 2022-04-21</div><div id='author'> Author: 34200873+safoinme@users.noreply.github.com</div><div id='file'> File Name: src/zenml/integrations/pytorch/materializers/pytorch_materializer.py</div><div id='m_class'> M Class Name: PyTorchMaterializer</div><div id='n_method'> N Class Name: PyTorchMaterializer</div><div id='m_method'> M Method Name: handle_return(2)</div><div id='n_method'> N Method Name: handle_return(2)</div><div id='m_parent_class'> M Parent Class: BaseMaterializer</div><div id='n_parent_class'> N Parent Class: BaseMaterializer</div><div id='m_file'> M File Name: src/zenml/integrations/pytorch/materializers/pytorch_materializer.py</div><div id='n_file'> N File Name: src/zenml/integrations/pytorch/materializers/pytorch_materializer.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 52</div><div id='n_start'> N Start Line: 57</div><div id='n_end'> N End Line: 67</div><BR>