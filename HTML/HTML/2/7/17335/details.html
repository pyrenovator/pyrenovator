<html><h3>Pattern ID :17335
</h3><img src='57529661.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if metafunc.config.getoption("--gpu"):
            metafunc.parametrize("gpu", [True, False])
        else:
            <a id="change">metafunc.parametrize(</a>"gpu", [False]<a id="change">)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    if "gpu" in metafunc.fixturenames:
        if metafunc.config.getoption("--gpu"):
            metafunc.parametrize("gpu", [True, False])
        elif <a id="change"></a>metafunc.config.getoption("--gpu-only"):
            <a id="change">metafunc.parametrize("gpu"</a>, <a id="change">[</a>True<a id="change"></a>]<a id="change">)</a>
        else:
            <a id="change">metafunc.parametrize(</a>"gpu", [False]<a id="change">)</a>
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/spcl/daceml/commit/e7950680d827fecb4d3b6c9a9de5f4fac90eebfb#diff-e52e4ddd58b7ef887ab03c04116e676f6280b824ab7469d5d3080e5cba4f2128L10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57529661</div><div id='project'> Project Name: spcl/daceml</div><div id='commit'> Commit Name: e7950680d827fecb4d3b6c9a9de5f4fac90eebfb</div><div id='time'> Time: 2020-12-01</div><div id='author'> Author: Oliverrausch99@gmail.com</div><div id='file'> File Name: tests/conftest.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: pytest_generate_tests(1)</div><div id='n_method'> N Method Name: pytest_generate_tests(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/conftest.py</div><div id='n_file'> N File Name: tests/conftest.py</div><div id='m_start'> M Start Line: 10</div><div id='m_end'> M End Line: 10</div><div id='n_start'> N Start Line: 12</div><div id='n_end'> N End Line: 15</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                        and "gpu_only" not in metafunc.fixturenames
                    ):
                        images_to_parametrize.append(image)
            <a id="change">metafunc.parametrize(</a>fixture, images_to_parametrize<a id="change">)</a>

    &#47&#47 Parametrize for framework agnostic tests, i.e. sanity
    if "image" in metafunc.fixturenames:
        metafunc.parametrize("image", images)</code></pre><h3>After Change</h3><pre><code class='java'>
                        images_to_parametrize.append(image)

            &#47&#47 Parametrize tests that spin up an ecs cluster with unique name
            <a id="change">if </a>images_to_parametrize and "ecs_container_instance" in metafunc.fixturenames:
                ecs_parametrization = <a id="change">[]</a>
                for index, image in enumerate(images_to_parametrize):
                    image_tag = image.split(":")[-1].replace(".", "-")
                    ecs_parametrization.append(
                        (
                            image,
                            f"{metafunc.function.__name__}-{image_tag}-"
                            f"{os.getenv(&quotCODEBUILD_RESOLVED_SOURCE_VERSION&quot)}-{index}",
                        )
                    )
                <a id="change">metafunc.parametrize(f"{fixture},ecs_cluster_name"</a>, ecs_parametrization<a id="change">)</a>
            else:
                <a id="change">metafunc.parametrize(</a>fixture, images_to_parametrize<a id="change">)</a>

    &#47&#47 Parametrize for framework agnostic tests, i.e. sanity
    if "image" in metafunc.fixturenames:
        metafunc.parametrize("image", images)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aws/deep-learning-containers/commit/2f9f63b2e56f0b682bd90710be57dba152623185#diff-c7a1c9feb86ba95d32acfcef82beb230ca23f1924e32364ae9fbf9f6724fb910L120' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57529660</div><div id='project'> Project Name: aws/deep-learning-containers</div><div id='commit'> Commit Name: 2f9f63b2e56f0b682bd90710be57dba152623185</div><div id='time'> Time: 2020-03-17</div><div id='author'> Author: 33526713+arjkesh@users.noreply.github.com</div><div id='file'> File Name: test/dlc_tests/conftest.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: pytest_generate_tests(1)</div><div id='n_method'> N Method Name: pytest_generate_tests(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: test/dlc_tests/conftest.py</div><div id='n_file'> N File Name: test/dlc_tests/conftest.py</div><div id='m_start'> M Start Line: 139</div><div id='m_end'> M End Line: 139</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 146</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if metafunc.config.getoption("--gpu"):
            metafunc.parametrize("gpu", [True, False])
        else:
            <a id="change">metafunc.parametrize(</a>"gpu", [False]<a id="change">)</a>
    if "default_implementation" in metafunc.fixturenames:
        metafunc.parametrize("default_implementation", [
            pytest.param("pure", marks=pytest.mark.pure),
            pytest.param("onnxruntime", marks=pytest.mark.pure)</code></pre><h3>After Change</h3><pre><code class='java'>
    if "gpu" in metafunc.fixturenames:
        if metafunc.config.getoption("--gpu"):
            metafunc.parametrize("gpu", [True, False])
        elif <a id="change"></a>metafunc.config.getoption("--gpu-only"):
            <a id="change">metafunc.parametrize("gpu"</a>, <a id="change">[</a>True<a id="change"></a>]<a id="change">)</a>
        else:
            <a id="change">metafunc.parametrize(</a>"gpu", [False]<a id="change">)</a>
    if "default_implementation" in metafunc.fixturenames:
        metafunc.parametrize("default_implementation", [
            pytest.param("pure", marks=pytest.mark.pure),
            pytest.param("onnxruntime", marks=pytest.mark.pure)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/spcl/daceml/commit/584f5202b50b6b62586642302939b4fbaf6fb0c5#diff-e52e4ddd58b7ef887ab03c04116e676f6280b824ab7469d5d3080e5cba4f2128L9' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57529659</div><div id='project'> Project Name: spcl/daceml</div><div id='commit'> Commit Name: 584f5202b50b6b62586642302939b4fbaf6fb0c5</div><div id='time'> Time: 2020-11-25</div><div id='author'> Author: Oliverrausch99@gmail.com</div><div id='file'> File Name: tests/conftest.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: pytest_generate_tests(1)</div><div id='n_method'> N Method Name: pytest_generate_tests(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tests/conftest.py</div><div id='n_file'> N File Name: tests/conftest.py</div><div id='m_start'> M Start Line: 14</div><div id='m_end'> M End Line: 14</div><div id='n_start'> N Start Line: 16</div><div id='n_end'> N End Line: 19</div><BR>