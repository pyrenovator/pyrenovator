<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            preprocessed_deprioritize_text = embedding_model.preprocess(deprioritize_text)
            embedding_deprioritize = embedding_model.embed(preprocessed_deprioritize_text)

    <a id="change">with timer</a><a id="change">(&quotsentences_conditioning&quot):
        </a>restricted_sentence_ids = filter_sentences(connection,
                                                   has_journal=has_journal,
                                                   date_range=date_range,
                                                   exclusion_text=exclusion_text)</code></pre><h3>After Change</h3><pre><code class='java'>
        &quotStronger&quot: (0.5, 0.7),
    }
    &#47&#47 now: maximize L = a1 * cos(x, query) - a2 * cos(x, exclusions)
    <a id="change">logger.info("Combining query and deprioritizations"</a><a id="change">)</a>
    alpha_1, alpha_2 = deprioritizations[deprioritize_strength]
    similarities = alpha_1 * similarities_query - alpha_2 * similarities_deprio

    with timer(&quotsorting&quot):
        <a id="change">logger.info(f"Sorting the similarities and getting the top {k} results"</a><a id="change">)</a>
        top_indices = np.argsort(-similarities)[:k]

    logger.info("run_search finished")
</code></pre>