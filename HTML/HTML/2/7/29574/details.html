<html><h3>Pattern ID :29574
</h3><img src='87714395.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            metric = metric_cls(device=self.device)
            if isinstance(self.calculated_metrics[metric.name], dict):
                metrics_summary[metric.name] = {}
                <a id="change">for </a>k, <a id="change">v</a> in <a id="change">self.calculated_metrics[metric.name].items():
                    metrics_summary[metric.name][k]</a><a id="change"> = </a>np.nanmean(
                        self.calculated_metrics[metric.name][k]
                    )
            else:</code></pre><h3>After Change</h3><pre><code class='java'>

    def get_scores(self, metrics):
        Returns the specified metrics
        result<a id="change"> = </a><a id="change">[]</a>
        for metric in metrics:
            result.append(getattr(self, metric)())
        return result
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/biasvariancelabs/aitlas/commit/c5d3452f6986bb725b1e32c029e1b7b065acf4ad#diff-c0d71207f64739512046cec6efdc4d6e7d3cbd93d90bb13154c3dfebe606609eL38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87714395</div><div id='project'> Project Name: biasvariancelabs/aitlas</div><div id='commit'> Commit Name: c5d3452f6986bb725b1e32c029e1b7b065acf4ad</div><div id='time'> Time: 2021-03-15</div><div id='author'> Author: ivan.kitanovski@gmail.com</div><div id='file'> File Name: aitlas/base/metrics.py</div><div id='m_class'> M Class Name: RunningScore</div><div id='n_method'> N Class Name: RunningScore</div><div id='m_method'> M Method Name: get_scores(2)</div><div id='n_method'> N Method Name: get_scores(1)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: aitlas/base/metrics.py</div><div id='n_file'> N File Name: aitlas/base/metrics.py</div><div id='m_start'> M Start Line: 38</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 81</div><div id='n_end'> N End Line: 86</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 Add prefix to match DVC&quots `repo.plos.show`.
        &#47&#47 See https://github.com/iterative/studio/issues/4981
        plots = {f"{live.dvc_file}::{name}": plot for name, plot in plots.items()}
    <a id="change">for </a>name, <a id="change">plot</a> in <a id="change">plots.items():
        </a>datapoints<a id="change"> = </a>_get_unsent_datapoints(plot, latest_step)
        <a id="change">plots[name]</a> = _cast_to_numbers(datapoints)

    metrics = {live.metrics_file: {"data": metrics}}
</code></pre><h3>After Change</h3><pre><code class='java'>
    metrics_file = live.metrics_file
    if live._dvc_repo is not None:
        metrics_file = _rel_path(metrics_file, live._dvc_repo.root_dir)
    metrics<a id="change"> = </a><a id="change">{</a>metrics_file: {"data": metrics}<a id="change">}</a>

    plots = {
        _adapt_plot_name(live, name): _adapt_plot_datapoints(live, plot)
        for name, plot in plots.items()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/iterative/dvclive/commit/2fd0660b0fa2ba61a18afbafcd0e9cf4067ae3ec#diff-8d6206cc6b509143f44fca31b1bed556e2a91236b9959decba2d4d5f20e19fd6L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87714398</div><div id='project'> Project Name: iterative/dvclive</div><div id='commit'> Commit Name: 2fd0660b0fa2ba61a18afbafcd0e9cf4067ae3ec</div><div id='time'> Time: 2023-03-17</div><div id='author'> Author: daviddelaiglesiacastro@gmail.com</div><div id='file'> File Name: src/dvclive/studio.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: get_studio_updates(1)</div><div id='n_method'> N Method Name: get_studio_updates(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: src/dvclive/studio.py</div><div id='n_file'> N File Name: src/dvclive/studio.py</div><div id='m_start'> M Start Line: 36</div><div id='m_end'> M End Line: 53</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 69</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        return self

    def __invert__(self):
        <a id="change">for </a>key, <a id="change">value</a> in <a id="change">self.res.items():
            self.preconditions[key]</a><a id="change"> = </a>~value
        return self

    def __and__(self, other):</code></pre><h3>After Change</h3><pre><code class='java'>
        return self

    def __invert__(self):
        res<a id="change"> = </a><a id="change">{
            </a>&quotdecoded&quot: ~self.decoded<a id="change">
        }</a>
        return FlowDict(res)

    def __and__(self, other):
        res = {</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/hristo-vrigazov/dnn.cool/commit/465855e3e63af0f83b2af97bcca4f18208f3ce95#diff-bf61e11101fe98d0edc816afe122f58ea69bbaa568ac1db38005920af931fb91L25' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87714382</div><div id='project'> Project Name: hristo-vrigazov/dnn.cool</div><div id='commit'> Commit Name: 465855e3e63af0f83b2af97bcca4f18208f3ce95</div><div id='time'> Time: 2020-06-28</div><div id='author'> Author: hvrigazov@gmail.com</div><div id='file'> File Name: dnn_cool/utilities.py</div><div id='m_class'> M Class Name: FlowDict</div><div id='n_method'> N Class Name: FlowDict</div><div id='m_method'> M Method Name: __invert__(1)</div><div id='n_method'> N Method Name: __invert__(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: dnn_cool/utilities.py</div><div id='n_file'> N File Name: dnn_cool/utilities.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 29</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        )
        graph.n_pulses = n_pulses

        <a id="change">for </a>key, <a id="change">value</a> in <a id="change">labels_dict.items():
            </a>try:
                <a id="change">graph[key]</a><a id="change"> = </a>torch.tensor(value)
            except TypeError:
                &#47&#47 Cannot convert `value` to Tensor due to its data type, e.g. `str`.
                pass</code></pre><h3>After Change</h3><pre><code class='java'>
        if len(features):
            data = np.asarray(features)[:,1:]
        else:
            data<a id="change"> = </a>np.array(<a id="change">[]</a>).reshape((0, len(self._features) - 1))
        
        &#47&#47 Construct graph data object
        x = torch.tensor(data, dtype=self._dtype) </code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/graphnet-team/graphnet/commit/eb45a08bdcff1415775b1279be15dedcadbccf05#diff-abb56473e2b8bd6f07a5127359fb83021cea64a2308541034378cc5b958df695L110' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 87714383</div><div id='project'> Project Name: graphnet-team/graphnet</div><div id='commit'> Commit Name: eb45a08bdcff1415775b1279be15dedcadbccf05</div><div id='time'> Time: 2021-11-11</div><div id='author'> Author: andreas.sogaard@gmail.com</div><div id='file'> File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='m_class'> M Class Name: SQLiteDataset</div><div id='n_method'> N Class Name: SQLiteDataset</div><div id='m_method'> M Method Name: _create_graph(3)</div><div id='n_method'> N Method Name: _create_graph(3)</div><div id='m_parent_class'> M Parent Class: torch.utils.data.Dataset</div><div id='n_parent_class'> N Parent Class: torch.utils.data.Dataset</div><div id='m_file'> M File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='n_file'> N File Name: src/gnn_reco/data/sqlite_dataset.py</div><div id='m_start'> M Start Line: 125</div><div id='m_end'> M End Line: 169</div><div id='n_start'> N Start Line: 116</div><div id='n_end'> N End Line: 161</div><BR>