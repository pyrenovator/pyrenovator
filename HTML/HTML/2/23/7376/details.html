<html><h3>Pattern ID :7376
</h3><img src='24573302.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    print(f"Time taken for validation step = {end_val_step - start_val_step} sec")
                    return metrics

        metrics = <a id="change">OrderedDict([</a>(<a id="change">"loss"</a><a id="change">, losses_m.avg</a>), (<a id="change">"top1"</a><a id="change">, top1_m.avg</a>), (<a id="change">"top5"</a><a id="change">, top5_m.avg</a>)<a id="change"></a>]<a id="change">)</a>
        print("Finished the validation epoch")

    end_val_step = time.time()
    print(f"Time taken for validation step = {end_val_step - start_val_step} sec")</code></pre><h3>After Change</h3><pre><code class='java'>
            if num_batches is not None:
                if cnt &gt;= num_batches:
                    end_val_step = time.time()
                    <a id="change">metrics["loss"] = </a>losses_m.avg
                    <a id="change">metrics["top1"] = </a>top1_m.avg
                    <a id="change">metrics["top5"] = </a>top5_m.avg
                    print(f"Done till {num_batches} validation batches")
                    print(f"Time taken for validation step = {end_val_step - start_val_step} sec")
                    return metrics

        metrics["loss"] = losses_m.avg
        <a id="change">metrics["top1"] = </a>top1_m.avg
        <a id="change">metrics["top5"] = </a>top5_m.avg
        print("Finished the validation epoch")

    end_val_step = time.time()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 15</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/quick-ai/quickvision/commit/fbf684e158cb1691a9e4e0184d35c68d0d3846cb#diff-fba1fe73d4b3af70fb3372ad32a884e8c16f40a4b80d3c83adce22b23e14e2aaL155' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24573302</div><div id='project'> Project Name: quick-ai/quickvision</div><div id='commit'> Commit Name: fbf684e158cb1691a9e4e0184d35c68d0d3846cb</div><div id='time'> Time: 2020-11-08</div><div id='author'> Author: 47158509+oke-aditya@users.noreply.github.com</div><div id='file'> File Name: vision/models/classification/cnn/engine.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: val_step(6)</div><div id='n_method'> N Method Name: val_step(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vision/models/classification/cnn/engine.py</div><div id='n_file'> N File Name: vision/models/classification/cnn/engine.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 208</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                print(f"Time taken for train step = {end_train_step - start_train_step} sec")
                return metrics

    metrics = <a id="change">OrderedDict([</a>(<a id="change">"loss"</a><a id="change">, losses_m.avg</a>), (<a id="change">"top1"</a><a id="change">, top1_m.avg</a>), (<a id="change">"top5"</a><a id="change">, top5_m.avg</a>)<a id="change"></a>]<a id="change">)</a>
    end_train_step = time.time()
    print(f"Time taken for train step = {end_train_step - start_train_step} sec")
    return metrics
</code></pre><h3>After Change</h3><pre><code class='java'>
        if num_batches is not None:
            if cnt &gt;= num_batches:
                end_train_step = time.time()
                <a id="change">metrics["loss"] = </a>losses_m.avg
                <a id="change">metrics["top1"] = </a>top1_m.avg
                <a id="change">metrics["top5"] = </a>top5_m.avg
                print(f"Done till {num_batches} train batches")
                print(f"Time taken for train step = {end_train_step - start_train_step} sec")
                return metrics

    metrics["loss"] = losses_m.avg
    <a id="change">metrics["top1"] = </a>top1_m.avg
    <a id="change">metrics["top5"] = </a>top5_m.avg
    end_train_step = time.time()
    print(f"Time taken for train step = {end_train_step - start_train_step} sec")
    return metrics</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quick-ai/quickvision/commit/fbf684e158cb1691a9e4e0184d35c68d0d3846cb#diff-fba1fe73d4b3af70fb3372ad32a884e8c16f40a4b80d3c83adce22b23e14e2aaL17' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24573430</div><div id='project'> Project Name: quick-ai/quickvision</div><div id='commit'> Commit Name: fbf684e158cb1691a9e4e0184d35c68d0d3846cb</div><div id='time'> Time: 2020-11-08</div><div id='author'> Author: 47158509+oke-aditya@users.noreply.github.com</div><div id='file'> File Name: vision/models/classification/cnn/engine.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: train_step(10)</div><div id='n_method'> N Method Name: train_step(10)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vision/models/classification/cnn/engine.py</div><div id='n_file'> N File Name: vision/models/classification/cnn/engine.py</div><div id='m_start'> M Start Line: 42</div><div id='m_end'> M End Line: 132</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 136</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        squeezed_channels = make_divisible(int(channels * ratio), 8)
        gating_fn = gating_fn if gating_fn else _SE_GATING_FN

        self.se = nn.Sequential(<a id="change">OrderedDict([
            </a>(&quotpooling&quot, nn.AdaptiveAvgPool2d((1, 1))),
            (<a id="change">&quotreduce&quot</a><a id="change">, Conv2d1x1(channels, squeezed_channels, bias=True)</a>),
            (&quotrelu&quot, inner_activation_fn(inplace=True)),
            (<a id="change">&quotexpand&quot</a><a id="change">, Conv2d1x1(squeezed_channels, channels, bias=True)</a>),
            (<a id="change">&quotsigmoid&quot</a><a id="change">, gating_fn()</a>)<a id="change"></a>,
        ]<a id="change">)</a>)

    def forward(self, x):
        return x * self.se(x)</code></pre><h3>After Change</h3><pre><code class='java'>

        layers = OrderedDict([])

        <a id="change">layers[&quotpooling&quot] = </a>nn.AdaptiveAvgPool2d((1, 1))
        <a id="change">layers[&quotreduce&quot] = </a>Conv2d1x1(channels, squeezed_channels, bias=True)
        if _SE_USE_NORM:
            <a id="change">layers[&quotnorm&quot] = </a>nn.BatchNorm2d(squeezed_channels)
        layers[&quotrelu&quot] = inner_activation_fn(inplace=True)
        <a id="change">layers[&quotexpand&quot] = </a>Conv2d1x1(squeezed_channels, channels, bias=True)
        <a id="change">layers[&quotsigmoid&quot] = </a>gating_fn()

        self.se = nn.Sequential(layers)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ffiirree/cv-models/commit/e622b26dcf62b8ec88e80183f5ba0cef941cb223#diff-355c882d2c8458802245dc4426f748876ba63251c0b0caec55649e8d4e95c965L438' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24573300</div><div id='project'> Project Name: ffiirree/cv-models</div><div id='commit'> Commit Name: e622b26dcf62b8ec88e80183f5ba0cef941cb223</div><div id='time'> Time: 2021-09-13</div><div id='author'> Author: ice_qi@163.com</div><div id='file'> File Name: models/core/blocks.py</div><div id='m_class'> M Class Name: SEBlock</div><div id='n_method'> N Class Name: SEBlock</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/core/blocks.py</div><div id='n_file'> N File Name: models/core/blocks.py</div><div id='m_start'> M Start Line: 447</div><div id='m_end'> M End Line: 456</div><div id='n_start'> N Start Line: 462</div><div id='n_end'> N End Line: 475</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if num_batches is not None:
                if cnt &gt;= num_batches:
                    end_val_step = time.time()
                    metrics = <a id="change">OrderedDict([</a>(<a id="change">"loss"</a><a id="change">, losses_m.avg</a>), (<a id="change">"top1"</a><a id="change">, top1_m.avg</a>),
                                           (<a id="change">"top5"</a><a id="change">, top5_m.avg</a>)<a id="change"></a>, ]<a id="change">)</a>
                    print(f"Done till {num_batches} validation batches")
                    print(f"Time taken for validation step = {end_val_step - start_val_step} sec")
                    return metrics
</code></pre><h3>After Change</h3><pre><code class='java'>
            if num_batches is not None:
                if cnt &gt;= num_batches:
                    end_val_step = time.time()
                    <a id="change">metrics["loss"] = </a>losses_m.avg
                    <a id="change">metrics["top1"] = </a>top1_m.avg
                    <a id="change">metrics["top5"] = </a>top5_m.avg
                    print(f"Done till {num_batches} validation batches")
                    print(f"Time taken for validation step = {end_val_step - start_val_step} sec")
                    return metrics

        metrics["loss"] = losses_m.avg
        <a id="change">metrics["top1"] = </a>top1_m.avg
        <a id="change">metrics["top5"] = </a>top5_m.avg
        print("Finished the validation epoch")

    end_val_step = time.time()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quick-ai/quickvision/commit/fbf684e158cb1691a9e4e0184d35c68d0d3846cb#diff-fba1fe73d4b3af70fb3372ad32a884e8c16f40a4b80d3c83adce22b23e14e2aaL138' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 24573284</div><div id='project'> Project Name: quick-ai/quickvision</div><div id='commit'> Commit Name: fbf684e158cb1691a9e4e0184d35c68d0d3846cb</div><div id='time'> Time: 2020-11-08</div><div id='author'> Author: 47158509+oke-aditya@users.noreply.github.com</div><div id='file'> File Name: vision/models/classification/cnn/engine.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: val_step(6)</div><div id='n_method'> N Method Name: val_step(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: vision/models/classification/cnn/engine.py</div><div id='n_file'> N File Name: vision/models/classification/cnn/engine.py</div><div id='m_start'> M Start Line: 155</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 159</div><div id='n_end'> N End Line: 208</div><BR>