<html><h3>Pattern ID :40604
</h3><img src='114865752.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


    def load_file(self, path):
        if <a id="change">self.train</a>:
            with open(os.path.join(path, &quottrain_img_to_path&quot), &quotrb&quot) as f:
                rawImg = pickle.load(f)
                rawPath = pickle.load(f)

            with open(os.path.join(path, &quottrain_img_to_target&quot), &quotrb&quot) as f:
                rawTags<a id="change"> = </a>pickle.load(f)
        else:
            <a id="change">with open</a><a id="change">(os.path.join(path, &quottest_img_to_path&quot), &quotrb&quot) as f:
                </a>rawImg<a id="change"> = pickle.load(f</a><a id="change">)</a>
                rawPath = pickle.load(f)

            with open(os.path.join(path, &quottest_img_to_target&quot), &quotrb&quot) as f:
                rawTags = pickle.load(f)</code></pre><h3>After Change</h3><pre><code class='java'>
    def load_file(self, path):

        &#47&#47 load meta file to get labels
        datas<a id="change">, labels</a> = self.load_meta_data(os.path.join(self.processed_folder, &quotclient_data_mapping&quot, self.data_file+&quot.csv&quot))

        return datas, labels
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/symbioticlab/fedscale/commit/53647ea678fcd29e0f150dd4554743ac370f36ec#diff-23f435c7de2dba8a0c11fa2d71db55c03d53f0c93cd004aba12f1f052745c5d8L108' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114865752</div><div id='project'> Project Name: symbioticlab/fedscale</div><div id='commit'> Commit Name: 53647ea678fcd29e0f150dd4554743ac370f36ec</div><div id='time'> Time: 2021-09-26</div><div id='author'> Author: dywsjtuji@gmail.com</div><div id='file'> File Name: core/utils/femnist.py</div><div id='m_class'> M Class Name: FEMNIST</div><div id='n_method'> N Class Name: FEMNIST</div><div id='m_method'> M Method Name: load_file(2)</div><div id='n_method'> N Method Name: load_file(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: core/utils/femnist.py</div><div id='n_file'> N File Name: core/utils/femnist.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 121</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


def test(net, test_loader, device, window_size, batch_size, plot=True):
	if <a id="change">plot</a>:
		with open(config.RESOURCES_DIR + &quot/loss.pkl&quot, &quotrb&quot) as f:
			loss<a id="change"> = </a>pickle.load(f)
			plot_learning_curve(loss, xlabel=&quotEpisode&quot, ylabel=&quotLoss&quot)

		<a id="change">with open</a><a id="change">(config.RESOURCES_DIR + &quot/accuracy.pkl&quot, &quotrb&quot) as f:
			</a>acc<a id="change"> = pickle.load(</a>f<a id="change">)</a>
			plot_learning_curve(acc, xlabel=&quotEpisode&quot, ylabel=&quotAccuracy&quot)

	with torch.no_grad():
		ecgs_list = []</code></pre><h3>After Change</h3><pre><code class='java'>

		print("{} ACC: {:.4f}".format(&quottesting&quot, right / total))

		return ecgs<a id="change">, labels_list, predicted_list</a>


def eval (ecgs, y_true, y_pred, labels, target_names, plot_acc=False, plot_loss=False, plot_conf_matrix=False, plot_ecg=False, plot_ecg_windows_size=None):
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jergusadamec/ecg-deep-segmentation/commit/0b7f33c6c37f70bfe920a0193a61f28d645e81af#diff-fefbb6143b320843cb9a79af99894fb971b17c28cd74dd104faab74aebb6f7a8L48' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114865768</div><div id='project'> Project Name: jergusadamec/ecg-deep-segmentation</div><div id='commit'> Commit Name: 0b7f33c6c37f70bfe920a0193a61f28d645e81af</div><div id='time'> Time: 2020-05-29</div><div id='author'> Author: jergus.adamec@gmail.com</div><div id='file'> File Name: engine/test.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test(6)</div><div id='n_method'> N Method Name: test(6)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: engine/test.py</div><div id='n_file'> N File Name: engine/test.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 94</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>


    def load_file(self, path):
        if <a id="change">self.train</a>:
            <a id="change">with open</a><a id="change">(os.path.join(path, &quottrain_img_to_path&quot), &quotrb&quot) as f:
                </a>rawImg = pickle.load(f)
                rawPath<a id="change"> = pickle.load(</a>f<a id="change">)</a>

            with open(os.path.join(path, &quottrain_img_to_target&quot), &quotrb&quot) as f:
                rawTags = pickle.load(f)
        else:
            with open(os.path.join(path, &quottest_img_to_path&quot), &quotrb&quot) as f:
                rawImg = pickle.load(f)
                rawPath<a id="change"> = </a>pickle.load(f)

            with open(os.path.join(path, &quottest_img_to_target&quot), &quotrb&quot) as f:
                rawTags = pickle.load(f)</code></pre><h3>After Change</h3><pre><code class='java'>
    def load_file(self, path):

        &#47&#47 load meta file to get labels
        datas<a id="change">, labels</a> = self.load_meta_data(os.path.join(self.processed_folder, &quotclient_data_mapping&quot, self.data_file+&quot.csv&quot))

        return datas, labels
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/symbioticlab/fedscale/commit/53647ea678fcd29e0f150dd4554743ac370f36ec#diff-23f435c7de2dba8a0c11fa2d71db55c03d53f0c93cd004aba12f1f052745c5d8L107' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114865754</div><div id='project'> Project Name: symbioticlab/fedscale</div><div id='commit'> Commit Name: 53647ea678fcd29e0f150dd4554743ac370f36ec</div><div id='time'> Time: 2021-09-26</div><div id='author'> Author: dywsjtuji@gmail.com</div><div id='file'> File Name: core/utils/femnist.py</div><div id='m_class'> M Class Name: FEMNIST</div><div id='n_method'> N Class Name: FEMNIST</div><div id='m_method'> M Method Name: load_file(2)</div><div id='n_method'> N Method Name: load_file(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: core/utils/femnist.py</div><div id='n_file'> N File Name: core/utils/femnist.py</div><div id='m_start'> M Start Line: 108</div><div id='m_end'> M End Line: 123</div><div id='n_start'> N Start Line: 119</div><div id='n_end'> N End Line: 121</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        save_path = join(test_path, test_scan_name, &quotpredictions&quot)
        make_dir(save_path)

        for <a id="change">j</a> in range(len(test_probs)):
            test_file_name = self.test_list[j]
            frame = test_file_name.split(&quot/&quot)[-1][:-4]
            proj_path = join(cfg.dataset_path, test_scan_name, &quotproj&quot)
            proj_file = join(proj_path, str(frame) + &quot_proj.pkl&quot)
            if isfile(proj_file):
                <a id="change">with open</a><a id="change">(proj_file, &quotrb&quot) as f:
                    </a>proj_inds<a id="change"> = pickle.load(</a>f<a id="change">)</a>
            probs = test_probs[j][proj_inds[0], :]
            pred = np.argmax(probs, 1)

            store_path<a id="change"> = </a>join(test_path, test_scan_name, &quotpredictions&quot,
                              str(frame) + &quot.label&quot)
            pred = pred + 1
            pred = remap_lut[pred].astype(np.uint32)</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 name = inputs[&quotattr&quot][&quotname&quot]
            name = inputs[&quotattr&quot][&quotname&quot]
            &#47&#47 print(name)
            name_seq<a id="change">, name_points</a> = name.split("_")

            test_path = join(cfg.test_result_folder, &quotsequences&quot)
            make_dir(test_path)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/isl-org/open3d-ml/commit/1ada80a42a187a3eefcb45d2f70078570d50872d#diff-452c913da0efde9bd2ceed2be4fc759f94a03e1f16d96a0804655bc04e21b409L106' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 114865763</div><div id='project'> Project Name: isl-org/open3d-ml</div><div id='commit'> Commit Name: 1ada80a42a187a3eefcb45d2f70078570d50872d</div><div id='time'> Time: 2020-08-22</div><div id='author'> Author: yilingq@umd.edu</div><div id='file'> File Name: ml3d/datasets/semantickitti.py</div><div id='m_class'> M Class Name: SemanticKITTI</div><div id='n_method'> N Class Name: SemanticKITTI</div><div id='m_method'> M Method Name: save_test_result(3)</div><div id='n_method'> N Method Name: save_test_result(3)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: ml3d/datasets/semantickitti.py</div><div id='n_file'> N File Name: ml3d/datasets/semantickitti.py</div><div id='m_start'> M Start Line: 107</div><div id='m_end'> M End Line: 126</div><div id='n_start'> N Start Line: 108</div><div id='n_end'> N End Line: 129</div><BR>