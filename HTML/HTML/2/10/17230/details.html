<html><h3>Pattern ID :17230
</h3><img src='57364843.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.assertEqual(logits_per_text.shape, (2, 1))

    def test_models(self):
        img = <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">224</a>, <a id="change">224</a><a id="change">)</a>
        text = ["test text"]

        model = clip.create_model(
            model_name="clip_vit_b16",</code></pre><h3>After Change</h3><pre><code class='java'>
        self.assertEqual(logits_per_text.shape, (2, 1))

    def test_models(self):
        img = <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">224</a>, <a id="change">224</a><a id="change">)</a>.to(self.device)
        text = ["test text"]

        model = clip.create_model(</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/b2c5fb5affbaa22dfbbf0e029a28680b3a4ee30e#diff-de7b6007aae2e96d905059a153528883af17814faeaba422246d264ad3ec576aL41' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57364843</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: b2c5fb5affbaa22dfbbf0e029a28680b3a4ee30e</div><div id='time'> Time: 2022-08-09</div><div id='author'> Author: chen.zhang@zilliz.com</div><div id='file'> File Name: tests/unittests/models/clip/test_clip.py</div><div id='m_class'> M Class Name: TestClip</div><div id='n_method'> N Class Name: TestClip</div><div id='m_method'> M Method Name: test_models(1)</div><div id='n_method'> N Method Name: test_models(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/unittests/models/clip/test_clip.py</div><div id='n_file'> N File Name: tests/unittests/models/clip/test_clip.py</div><div id='m_start'> M Start Line: 41</div><div id='m_end'> M End Line: 41</div><div id='n_start'> N Start Line: 42</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        model.eval()
        model = torch.nn.DataParallel(model)
        model.to(device=&quotcuda:0&quot)
        random_input = <a id="change">torch.rand(2</a>, <a id="change">10</a>, <a id="change">24</a>, <a id="change">24</a><a id="change">)</a>.to(device=&quotcuda:0&quot)
        output_before_scale = model(random_input)

        &#47&#47 BN fold</code></pre><h3>After Change</h3><pre><code class='java'>
        model.eval()

        model = torch.nn.DataParallel(model, device_ids=[0])
        random_input = <a id="change">torch.rand(2</a>, <a id="change">10</a>, <a id="change">24</a>, <a id="change">24</a><a id="change">)</a>
        output_before_scale = model(random_input)

        &#47&#47 BN fold
        fold_all_batch_norms(model, (2, 10, 24, 24))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/c745c0e12f14c745cbed861581a814eb298e9c98#diff-b26b37296edeb0b6f60e67cc9d16db2904b8a887d61b836eda57480efc588d2bL548' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57364859</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: c745c0e12f14c745cbed861581a814eb298e9c98</div><div id='time'> Time: 2022-09-29</div><div id='author'> Author: quic_haijunz@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='m_class'> M Class Name: TestTrainingExtensionsCrossLayerScaling</div><div id='n_method'> N Class Name: TestTrainingExtensionsCrossLayerScaling</div><div id='m_method'> M Method Name: test_auto_cls_custom_model_multi_gpu(1)</div><div id='n_method'> N Method Name: test_auto_cls_custom_model_multi_gpu(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='m_start'> M Start Line: 553</div><div id='m_end'> M End Line: 555</div><div id='n_start'> N Start Line: 579</div><div id='n_end'> N End Line: 585</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

def test_preprocess_functions():
    print("Starting testing preprocessing functions")
    input_tensor = <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">256</a>, <a id="change">256</a><a id="change">)</a>
    input_transformed = global_preprocessing_dict["normalize_imagenet"]()(input_tensor)
    input_transformed = global_preprocessing_dict["normalize_standardize"]()(
        input_tensor
    )</code></pre><h3>After Change</h3><pre><code class='java'>
def test_preprocess_functions():
    print("Starting testing preprocessing functions")
    &#47&#47 initialize an input which has values between [-1,1]
    input_tensor = 2 * <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">256</a>, <a id="change">256</a><a id="change">)</a> - 1
    input_transformed = global_preprocessing_dict["normalize_imagenet"]()(input_tensor)
    input_transformed = global_preprocessing_dict["normalize_standardize"]()(
        input_tensor</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/cbica/gandlf/commit/7b90ee1ec1328dc07900a425a84323d76c99114d#diff-1790893132ccdddd36112f1a63405ada4efff2cea018a952488282c906ccd7bfL831' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57364971</div><div id='project'> Project Name: cbica/gandlf</div><div id='commit'> Commit Name: 7b90ee1ec1328dc07900a425a84323d76c99114d</div><div id='time'> Time: 2021-09-02</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: testing/test_full.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: test_preprocess_functions(0)</div><div id='n_method'> N Method Name: test_preprocess_functions(0)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: testing/test_full.py</div><div id='n_file'> N File Name: testing/test_full.py</div><div id='m_start'> M Start Line: 833</div><div id='m_end'> M End Line: 833</div><div id='n_start'> N Start Line: 834</div><div id='n_end'> N End Line: 834</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    Test CLIP model
    
    def test_clip(self):
        img = <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">4</a>, <a id="change">4</a><a id="change">)</a>
        text = torch.randint(high=49408, size=(2, 77), dtype=torch.int32)
        model = clip.create_model(
            embed_dim=512, image_resolution=4, vision_layers=12, vision_width=768, vision_patch_size=2,
            context_length=77, vocab_size=49408, transformer_width=512, transformer_heads=8, transformer_layers=12</code></pre><h3>After Change</h3><pre><code class='java'>
    
    device = "cuda" if torch.cuda.is_available() else "cpu"
    def test_clip(self):
        img = <a id="change">torch.rand(1</a>, <a id="change">3</a>, <a id="change">4</a>, <a id="change">4</a><a id="change">)</a>.to(self.device)
        text = torch.randint(high=49408, size=(2, 77), dtype=torch.int32)
        model = clip.create_model(
            embed_dim=512, image_resolution=4, vision_layers=12, vision_width=768, vision_patch_size=2,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/b2c5fb5affbaa22dfbbf0e029a28680b3a4ee30e#diff-de7b6007aae2e96d905059a153528883af17814faeaba422246d264ad3ec576aL24' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57364842</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: b2c5fb5affbaa22dfbbf0e029a28680b3a4ee30e</div><div id='time'> Time: 2022-08-09</div><div id='author'> Author: chen.zhang@zilliz.com</div><div id='file'> File Name: tests/unittests/models/clip/test_clip.py</div><div id='m_class'> M Class Name: TestClip</div><div id='n_method'> N Class Name: TestClip</div><div id='m_method'> M Method Name: test_clip(1)</div><div id='n_method'> N Method Name: test_clip(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: tests/unittests/models/clip/test_clip.py</div><div id='n_file'> N File Name: tests/unittests/models/clip/test_clip.py</div><div id='m_start'> M Start Line: 25</div><div id='m_end'> M End Line: 25</div><div id='n_start'> N Start Line: 26</div><div id='n_end'> N End Line: 26</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        model = torch.nn.DataParallel(model)
        model.to(device=&quotcuda:0&quot)

        random_input = <a id="change">torch.rand(2</a>, <a id="change">10</a>, <a id="change">24</a>, <a id="change">24</a><a id="change">)</a>.to(device=&quotcuda:0&quot)
        output_before_equalize = model(random_input)

        equalize_model(model, (2, 10, 24, 24))</code></pre><h3>After Change</h3><pre><code class='java'>
        model = torch.nn.DataParallel(model, device_ids=[0])
        input_shapes = (2, 10, 24, 24)
        random_input = torch.rand(*input_shapes)
        random_input = <a id="change">torch.rand(2</a>, <a id="change">10</a>, <a id="change">24</a>, <a id="change">24</a><a id="change">)</a>
        output_before_equalize = model(random_input)

        equalize_model(model, input_shapes, dummy_input=random_input)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/quic/aimet/commit/c745c0e12f14c745cbed861581a814eb298e9c98#diff-b26b37296edeb0b6f60e67cc9d16db2904b8a887d61b836eda57480efc588d2bL580' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57364847</div><div id='project'> Project Name: quic/aimet</div><div id='commit'> Commit Name: c745c0e12f14c745cbed861581a814eb298e9c98</div><div id='time'> Time: 2022-09-29</div><div id='author'> Author: quic_haijunz@quicinc.com</div><div id='file'> File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='m_class'> M Class Name: TestTrainingExtensionsCrossLayerScaling</div><div id='n_method'> N Class Name: TestTrainingExtensionsCrossLayerScaling</div><div id='m_method'> M Method Name: test_auto_cle_custom_model_multi_gpu(1)</div><div id='n_method'> N Method Name: test_auto_cle_custom_model_multi_gpu(1)</div><div id='m_parent_class'> M Parent Class: unittest.TestCase</div><div id='n_parent_class'> N Parent Class: unittest.TestCase</div><div id='m_file'> M File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='n_file'> N File Name: TrainingExtensions/torch/test/python/test_cross_layer_scaling.py</div><div id='m_start'> M Start Line: 585</div><div id='m_end'> M End Line: 591</div><div id='n_start'> N Start Line: 609</div><div id='n_end'> N End Line: 615</div><BR>