<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if pred.shape[-3] != 3 or target.shape[-3] != 3:
            raise ValueError("LPIPS needs 3-channel images with the channels at dim -3")
        pred = pred.reshape(-1, *pred.shape[-3:])  &#47&#47 [..., 3, h, w]
        target<a id="change"> = target.reshape(-1</a>, *<a id="change">target.shape[-3:])</a>  &#47&#47 [..., 3, h, w]
        pred = ((pred + 1) / 2).clamp_(min=0.0, max=1.0) &#47&#47 range: [0., 1.]
        target<a id="change"> = </a><a id="change">((target + 1) / 2).clamp_(min=0.0, max=1.0)</a>  &#47&#47 range: [0., 1.]
        return 1.0 - self.criterion(pred, target)

    @classmethod</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, pred, target):
        if pred.shape[2] != 3 or target.shape[2] != 3:
            raise ValueError(f"{self.NAME} needs 3-channel images with the channels at dim 2")
        pred<a id="change">, target</a> = self.reshape_clamp(pred, target)
        return 1.0 - self.criterion(pred, target)

    @classmethod</code></pre>