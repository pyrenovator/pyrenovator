<html><h3>Pattern ID :41915
</h3><img src='117467744.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.num_cells = self.dense_points.shape[0]
        self.occupancy = torch.zeros(self.num_cells)

        <a id="change">if tree_type == &quotquad&quot</a>:
            if base_lod is None:
                raise ValueError("&quotbase_lod&quot must be specified with tree_type == &quotquad&quot")
            self._init_from_octree(base_lod)
        elif <a id="change">tree_type == &quotgeometric&quot</a>:
            if max_grid_res is None or min_grid_res is None:
                <a id="change">raise </a>ValueError("&quotmax_grid_res&quot must be specified with tree_type == &quotgeometric&quot")
            self._init_from_geometric(min_grid_res, max_grid_res)
        else:
            raise ValueError(f"tree_type == &quot{tree_type}&quot not supported")</code></pre><h3>After Change</h3><pre><code class='java'>
        self.codebook = nn.ParameterList([])
        for res in resolutions:
            num_pts = res ** 3
            fts<a id="change"> = </a>torch.zeros(<a id="change">min(</a>self.codebook_size, num_pts<a id="change">)</a>, self.feature_dim)
            fts += torch.randn_like(fts) * self.feature_std
            self.codebook.append(nn.Parameter(fts))
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nvidiagameworks/kaolin-wisp/commit/5d3173c9d2d4e2c8d8da3e809639515bf73a2225#diff-a476722950385e9295ad781611c6e19de8764c151954b39b37d45a6558faa2cfL30' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117467744</div><div id='project'> Project Name: nvidiagameworks/kaolin-wisp</div><div id='commit'> Commit Name: 5d3173c9d2d4e2c8d8da3e809639515bf73a2225</div><div id='time'> Time: 2023-01-05</div><div id='author'> Author: 9556101+orperel@users.noreply.github.com</div><div id='file'> File Name: wisp/models/grids/hash_grid.py</div><div id='m_class'> M Class Name: HashGrid</div><div id='n_method'> N Class Name: HashGrid</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(12)</div><div id='m_parent_class'> M Parent Class: BLASGrid</div><div id='n_parent_class'> N Parent Class: BLASGrid</div><div id='m_file'> M File Name: wisp/models/grids/hash_grid.py</div><div id='n_file'> N File Name: wisp/models/grids/hash_grid.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

class ImageClassificationPipeline(Pipeline):
    def __init__(self, model_id: str):
        <a id="change">if "resnet50d" in model_id</a>:
            self.model = timm.create_model("resnet50d", pretrained=True).eval()
        elif <a id="change">"dpn92" in model_id</a>:
            self.model = timm.create_model("dpn92", pretrained=True).eval()
        else:
            <a id="change">raise </a>EnvironmentError("Cannot detect the correct arch for this model")

    def __call__(self, inputs: Image.Image) -&gt; List[Dict[str, Any]]:
        </code></pre><h3>After Change</h3><pre><code class='java'>
        )
        self.model.eval()

        self.top_k<a id="change"> = </a><a id="change">min(</a>self.model.num_classes, 5<a id="change">)</a>

        self.labels = self.hf_cfg.get("labels", None)
        if self.labels is None:
            self.labels = [f"LABEL_{i}" for i in range(self.model.num_classes)]</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/huggingface/huggingface_hub/commit/c59cdc19b16299710616d1dcdfd6d84e0299e78f#diff-d54e5fc68429884cbaadc4536b4782856991f28b7ee6dab0bfc9d11a7c6d104eL10' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117467745</div><div id='project'> Project Name: huggingface/huggingface_hub</div><div id='commit'> Commit Name: c59cdc19b16299710616d1dcdfd6d84e0299e78f</div><div id='time'> Time: 2021-09-06</div><div id='author'> Author: nxr9266@g.rit.edu</div><div id='file'> File Name: api-inference-community/docker_images/timm/app/pipelines/image_classification.py</div><div id='m_class'> M Class Name: ImageClassificationPipeline</div><div id='n_method'> N Class Name: ImageClassificationPipeline</div><div id='m_method'> M Method Name: __init__(2)</div><div id='n_method'> N Method Name: __init__(2)</div><div id='m_parent_class'> M Parent Class: Pipeline</div><div id='n_parent_class'> N Parent Class: Pipeline</div><div id='m_file'> M File Name: api-inference-community/docker_images/timm/app/pipelines/image_classification.py</div><div id='n_file'> N File Name: api-inference-community/docker_images/timm/app/pipelines/image_classification.py</div><div id='m_start'> M Start Line: 11</div><div id='m_end'> M End Line: 18</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 28</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.num_cells = self.dense_points.shape[0]
        self.occupancy = torch.zeros(self.num_cells)

        <a id="change">if tree_type == &quotquad&quot</a>:
            if base_lod is None:
                raise ValueError("&quotbase_lod&quot must be specified with tree_type == &quotquad&quot")
            self._init_from_octree(base_lod)
        elif <a id="change">tree_type == &quotgeometric&quot</a>:
            if max_grid_res is None or min_grid_res is None:
                raise ValueError("&quotmax_grid_res&quot must be specified with tree_type == &quotgeometric&quot")
            self._init_from_geometric(min_grid_res, max_grid_res)
        else:
            <a id="change">raise </a>ValueError(f"tree_type == &quot{tree_type}&quot not supported")

    def _init_from_octree(self, base_lod):
        Builds the multiscale hash grid with an octree sampling pattern.</code></pre><h3>After Change</h3><pre><code class='java'>
        self.codebook = nn.ParameterList([])
        for res in resolutions:
            num_pts = res ** 3
            fts<a id="change"> = </a>torch.zeros(<a id="change">min(</a>self.codebook_size, num_pts<a id="change">)</a>, self.feature_dim)
            fts += torch.randn_like(fts) * self.feature_std
            self.codebook.append(nn.Parameter(fts))
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nvidiagameworks/kaolin-wisp/commit/5d3173c9d2d4e2c8d8da3e809639515bf73a2225#diff-a476722950385e9295ad781611c6e19de8764c151954b39b37d45a6558faa2cfL28' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117467747</div><div id='project'> Project Name: nvidiagameworks/kaolin-wisp</div><div id='commit'> Commit Name: 5d3173c9d2d4e2c8d8da3e809639515bf73a2225</div><div id='time'> Time: 2023-01-05</div><div id='author'> Author: 9556101+orperel@users.noreply.github.com</div><div id='file'> File Name: wisp/models/grids/hash_grid.py</div><div id='m_class'> M Class Name: HashGrid</div><div id='n_method'> N Class Name: HashGrid</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(12)</div><div id='m_parent_class'> M Parent Class: BLASGrid</div><div id='n_parent_class'> N Parent Class: BLASGrid</div><div id='m_file'> M File Name: wisp/models/grids/hash_grid.py</div><div id='n_file'> N File Name: wisp/models/grids/hash_grid.py</div><div id='m_start'> M Start Line: 30</div><div id='m_end'> M End Line: 92</div><div id='n_start'> N Start Line: 30</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.margin = config[&quotmargin&quot]
        self.negative_weight = config[&quotnegative_weight&quot]
        self.gamma = config[&quotgamma&quot]
        <a id="change">neg_num_dict</a> = config[&quotneg_sampling&quot]
        <a id="change">if &quotuniform&quot in neg_num_dict</a>:
            self.neg_seq_len = neg_num_dict[&quotuniform&quot]
        elif <a id="change">&quotpopularity&quot in neg_num_dict</a>:
            self.neg_seq_len = neg_num_dict[&quotpopularity&quot]
        else:
            <a id="change">raise </a>ValueError(&quotneg_sampling must be uniform or popularity&quot)
        self.reg_weight = config[&quotreg_weight&quot]

        &#47&#47 Get user transaction history</code></pre><h3>After Change</h3><pre><code class='java'>
        self.aggregator = config[&quotaggregator&quot]
        if self.aggregator not in [&quotmean&quot, &quotuser_attention&quot, &quotself_attention&quot]:
            raise ValueError(&quotaggregator must be mean, user_attention or self_attention&quot)
        self.history_len<a id="change">=</a><a id="change">min(</a>config[&quothistory_len&quot],self.history_item_len.shape[0]<a id="change">)</a>
        
        &#47&#47 user embedding matrix
        self.user_emb = nn.Embedding(self.n_users, self.embedding_size)
        &#47&#47 item embedding matrix</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/rucaibox/recbole/commit/283d4a486cc57cae7a4680e08c29c9302f307a0e#diff-1616debdea916026d29c3f84ac8cccd5371107ae8f554fc98b0313b2aa3c1023L39' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117467742</div><div id='project'> Project Name: rucaibox/recbole</div><div id='commit'> Commit Name: 283d4a486cc57cae7a4680e08c29c9302f307a0e</div><div id='time'> Time: 2022-05-07</div><div id='author'> Author: 18697951462@qq.com</div><div id='file'> File Name: recbole/model/general_recommender/simplex.py</div><div id='m_class'> M Class Name: SimpleX</div><div id='n_method'> N Class Name: SimpleX</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: GeneralRecommender</div><div id='n_parent_class'> N Parent Class: GeneralRecommender</div><div id='m_file'> M File Name: recbole/model/general_recommender/simplex.py</div><div id='n_file'> N File Name: recbole/model/general_recommender/simplex.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 57</div><div id='n_start'> N Start Line: 43</div><div id='n_end'> N End Line: 71</div><BR>