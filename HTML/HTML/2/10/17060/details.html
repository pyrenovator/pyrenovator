<html><h3>Pattern ID :17060
</h3><img src='57193996.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                related_preds = self.eval_related_pred(x, edge_index, masks, **kwargs)


        <a id="change">return </a>None<a id="change">, masks, related_preds</a></code></pre><h3>After Change</h3><pre><code class='java'>

        if not self.explain_graph:
            node_idx = kwargs.get(&quotnode_idx&quot)
            <a id="change">if not node_idx.dim()</a>:
                node_idx<a id="change"> = node_idx.reshape(-1</a><a id="change">)</a>
            <a id="change">node_idx.to(</a>self.device<a id="change">)</a>
            assert node_idx is not None
            _, _, _, self.hard_edge_mask = subgraph(
                node_idx, self.__num_hops__, self_loop_edge_index, relabel_nodes=True,</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/divelab/dig/commit/1094bb655b4d8f08e5342ea7f78a1dd25ea6a423#diff-c33bed3ffdc2fc14d6e9a92f810b53e73b16b407e146f03971570b0acd22652eL55' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57193996</div><div id='project'> Project Name: divelab/dig</div><div id='commit'> Commit Name: 1094bb655b4d8f08e5342ea7f78a1dd25ea6a423</div><div id='time'> Time: 2021-09-27</div><div id='author'> Author: 1161283769@qq.com</div><div id='file'> File Name: dig/xgraph/method/deeplift.py</div><div id='m_class'> M Class Name: DeepLIFT</div><div id='n_method'> N Class Name: DeepLIFT</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: WalkBase</div><div id='n_parent_class'> N Parent Class: WalkBase</div><div id='m_file'> M File Name: dig/xgraph/method/deeplift.py</div><div id='n_file'> N File Name: dig/xgraph/method/deeplift.py</div><div id='m_start'> M Start Line: 80</div><div id='m_end'> M End Line: 105</div><div id='n_start'> N Start Line: 55</div><div id='n_end'> N End Line: 108</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

        self.__clear_masks__()

        <a id="change">return </a>None<a id="change">, edge_masks, related_preds</a>


</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Only operate on a k-hop subgraph around `node_idx`.
        &#47&#47 Get subgraph and relabel the node, mapping is the relabeled given node_idx.
        if not self.explain_graph:
            <a id="change">node_idx</a> = kwargs.get(&quotnode_idx&quot)
            <a id="change">if not node_idx.dim()</a>:
                node_idx<a id="change"> = node_idx.reshape(-1</a><a id="change">)</a>
            node_idx = <a id="change">node_idx.to(</a>self.device<a id="change">)</a>
            self.node_idx = node_idx
            assert node_idx is not None
            _, _, _, self.hard_edge_mask = subgraph(</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/divelab/dig/commit/1094bb655b4d8f08e5342ea7f78a1dd25ea6a423#diff-d3d9447c09d70bfb5f023bed9a76a221588406aa2832795a93d16820af257a19L96' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57193997</div><div id='project'> Project Name: divelab/dig</div><div id='commit'> Commit Name: 1094bb655b4d8f08e5342ea7f78a1dd25ea6a423</div><div id='time'> Time: 2021-09-27</div><div id='author'> Author: 1161283769@qq.com</div><div id='file'> File Name: dig/xgraph/method/gnnexplainer.py</div><div id='m_class'> M Class Name: GNNExplainer</div><div id='n_method'> N Class Name: GNNExplainer</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: ExplainerBase</div><div id='n_parent_class'> N Parent Class: ExplainerBase</div><div id='m_file'> M File Name: dig/xgraph/method/gnnexplainer.py</div><div id='n_file'> N File Name: dig/xgraph/method/gnnexplainer.py</div><div id='m_start'> M Start Line: 137</div><div id='m_end'> M End Line: 155</div><div id='n_start'> N Start Line: 125</div><div id='n_end'> N End Line: 159</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>



        <a id="change">return </a>None<a id="change">, masks, related_preds</a>


class GraphLayerGradCam(ca.LayerGradCam):
</code></pre><h3>After Change</h3><pre><code class='java'>
        self_loop_edge_index, _ = add_self_loops(edge_index, num_nodes=self.num_nodes)

        if not self.explain_graph:
            <a id="change">node_idx</a> = kwargs.get(&quotnode_idx&quot)
            <a id="change">if not node_idx.dim()</a>:
                node_idx<a id="change"> = node_idx.reshape(-1</a><a id="change">)</a>
            node_idx = <a id="change">node_idx.to(</a>self.device<a id="change">)</a>
            assert node_idx is not None
            _, _, _, self.hard_edge_mask = subgraph(
                node_idx, self.__num_hops__, self_loop_edge_index, relabel_nodes=True,
                num_nodes=None, flow=self.__flow__())</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/divelab/dig/commit/1094bb655b4d8f08e5342ea7f78a1dd25ea6a423#diff-92b962762fac3f1105b8eb1a9c3fd0c5cfa470a4f880d80dc3f75477e258939aL46' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 57193998</div><div id='project'> Project Name: divelab/dig</div><div id='commit'> Commit Name: 1094bb655b4d8f08e5342ea7f78a1dd25ea6a423</div><div id='time'> Time: 2021-09-27</div><div id='author'> Author: 1161283769@qq.com</div><div id='file'> File Name: dig/xgraph/method/gradcam.py</div><div id='m_class'> M Class Name: GradCAM</div><div id='n_method'> N Class Name: GradCAM</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: WalkBase</div><div id='n_parent_class'> N Parent Class: WalkBase</div><div id='m_file'> M File Name: dig/xgraph/method/gradcam.py</div><div id='n_file'> N File Name: dig/xgraph/method/gradcam.py</div><div id='m_start'> M Start Line: 94</div><div id='m_end'> M End Line: 118</div><div id='n_start'> N Start Line: 80</div><div id='n_end'> N End Line: 125</div><BR>