<html><h3>Pattern ID :13740
</h3><img src='45948124.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            modes = attr.strings
            for mode in modes:
                if (not mode == b"BRANCH_LEQ") and (not mode == b"LEAF"):
                    <a id="change">raise </a>AssertionError("Modality {} not supported".format(mode))

    is_decision_tree = post_transform == "NONE"
</code></pre><h3>After Change</h3><pre><code class='java'>
                raise AssertionError("Post transform {} not supported".format(post_transform))
        elif attr.name == "nodes_modes":
            modes = attr.strings
            <a id="change">unique_modes</a><a id="change"> = </a>set(modes)
            unique_modes.discard(b"LEAF")
            <a id="change">if </a><a id="change">len(unique_modes) &gt; 1</a>:
                raise AssertionError("Mixed Comparison Modalities are not supported: {}".format(unique_modes))
            elif <a id="change">len(unique_modes) != 0</a>:
                decision_cond_map = {
                    b"BRANCH_LEQ": "&lt;=",
                    b"BRANCH_LT": "&lt;",
                    b"BRANCH_GTE": "&gt;=",
                    b"BRANCH_GT": "&gt;",
                    b"BRANCH_EQ": "=",
                    b"BRANCH_NEQ": "!=",
                }
                decision_cond = decision_cond_map[<a id="change">unique_modes.pop()</a>]

    is_decision_tree = post_transform == "NONE"
</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/hummingbird/commit/2b712a30de5470fb1c5973298af1bbf39f001b74#diff-688bbf32dc7fe8c23d4fb65cc38ba7c05df5a3bffe77542ed25582c8c1294660L23' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45948124</div><div id='project'> Project Name: microsoft/hummingbird</div><div id='commit'> Commit Name: 2b712a30de5470fb1c5973298af1bbf39f001b74</div><div id='time'> Time: 2022-09-11</div><div id='author'> Author: 47496212+grafail@users.noreply.github.com</div><div id='file'> File Name: hummingbird/ml/operator_converters/onnx/tree_ensemble.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: _get_tree_infos_from_onnx_ml_operator(1)</div><div id='n_method'> N Method Name: _get_tree_infos_from_onnx_ml_operator(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: hummingbird/ml/operator_converters/onnx/tree_ensemble.py</div><div id='n_file'> N File Name: hummingbird/ml/operator_converters/onnx/tree_ensemble.py</div><div id='m_start'> M Start Line: 23</div><div id='m_end'> M End Line: 168</div><div id='n_start'> N Start Line: 23</div><div id='n_end'> N End Line: 180</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        raise NotImplementedError

    def truncate_seq(self, first_seq, second_seq=None, maxlen=None):
        <a id="change">raise </a>NotImplementedError

    def token_to_id(self, token):
        raise NotImplementedError</code></pre><h3>After Change</h3><pre><code class='java'>
    def truncate_seq(self, first_seq, second_seq=None, maxlen=None, pop_index=-1):
        按 maxlen 截断两个序列，策略是优先从较长的一个中 pop.(pop_index)
        if second_seq is None:
            <a id="change">second_seq</a><a id="change"> = </a>[]
        while True:
            total_length = len(first_seq) + <a id="change">len(</a>second_seq<a id="change">)</a>
            <a id="change">if </a><a id="change">total_length &lt;= maxlen</a>:
                break
            elif <a id="change">len(first_seq) &gt; len(second_seq)</a>:
                first_seq.pop(pop_index)
            else:
                <a id="change">second_seq.pop(</a>pop_index<a id="change">)</a>

        return first_seq, second_seq

    def token_to_id(self, token):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xv44586/toolkit4nlp/commit/0bf79d28404d2804b16e8ed743858fb121d49f20#diff-2ccc30e47ed2daa8c67c53311ea7c476ec45d8ff779850b34fbb592a84a66cedL164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45948126</div><div id='project'> Project Name: xv44586/toolkit4nlp</div><div id='commit'> Commit Name: 0bf79d28404d2804b16e8ed743858fb121d49f20</div><div id='time'> Time: 2020-07-18</div><div id='author'> Author: xv44586@163.com</div><div id='file'> File Name: toolkit4nlp/tokenizers.py</div><div id='m_class'> M Class Name: BasicTokenizer</div><div id='n_method'> N Class Name: BasicTokenizer</div><div id='m_method'> M Method Name: truncate_seq(5)</div><div id='n_method'> N Method Name: truncate_seq(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: toolkit4nlp/tokenizers.py</div><div id='n_file'> N File Name: toolkit4nlp/tokenizers.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 165</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 225</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        raise NotImplementedError

    def truncate_seq(self, first_seq, second_seq=None, maxlen=None):
        <a id="change">raise </a>NotImplementedError

    def token_to_id(self, token):
        raise NotImplementedError</code></pre><h3>After Change</h3><pre><code class='java'>
    def truncate_seq(self, first_seq, second_seq=None, maxlen=None, pop_index=-1):
        按 maxlen 截断两个序列，策略是优先从较长的一个中 pop.(pop_index)
        if second_seq is None:
            <a id="change">second_seq</a><a id="change"> = </a>[]
        while True:
            total_length = len(first_seq) + <a id="change">len(</a>second_seq<a id="change">)</a>
            <a id="change">if </a><a id="change">total_length &lt;= maxlen</a>:
                break
            elif <a id="change">len(first_seq) &gt; len(second_seq)</a>:
                first_seq.pop(pop_index)
            else:
                <a id="change">second_seq.pop(</a>pop_index<a id="change">)</a>

        return first_seq, second_seq

    def token_to_id(self, token):</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/xv44586/toolkit4nlp/commit/be67410e44e5fa777976bec4d242af8411a31adf#diff-2ccc30e47ed2daa8c67c53311ea7c476ec45d8ff779850b34fbb592a84a66cedL164' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 45948121</div><div id='project'> Project Name: xv44586/toolkit4nlp</div><div id='commit'> Commit Name: be67410e44e5fa777976bec4d242af8411a31adf</div><div id='time'> Time: 2020-07-18</div><div id='author'> Author: xv44586@163.com</div><div id='file'> File Name: toolkit4nlp/tokenizers.py</div><div id='m_class'> M Class Name: BasicTokenizer</div><div id='n_method'> N Class Name: BasicTokenizer</div><div id='m_method'> M Method Name: truncate_seq(5)</div><div id='n_method'> N Method Name: truncate_seq(4)</div><div id='m_parent_class'> M Parent Class: object</div><div id='n_parent_class'> N Parent Class: object</div><div id='m_file'> M File Name: toolkit4nlp/tokenizers.py</div><div id='n_file'> N File Name: toolkit4nlp/tokenizers.py</div><div id='m_start'> M Start Line: 165</div><div id='m_end'> M End Line: 165</div><div id='n_start'> N Start Line: 212</div><div id='n_end'> N End Line: 225</div><BR>