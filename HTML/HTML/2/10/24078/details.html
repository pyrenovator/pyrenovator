<html><h3>Pattern ID :24078
</h3><img src='74761168.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                 logger=None):
        super().__init__(handler, server_addr, world_size, rank, dist_backend)

        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger

    def run(self):
        Main procedure of each client is defined here:</code></pre><h3>After Change</h3><pre><code class='java'>
                 logger=None):
        super().__init__(handler, server_addr, world_size, rank, dist_backend)

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = logging</a>
        else:
            self._LOGGER<a id="change"> = logger</a>

    def run(self):
        Main procedure of each client is defined here:
            1. client waits for data from server （PASSIVE）</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-955d50f7e9cf00fe3e751cbb53febb48aa64bfd0b2e70f8ab7afbd6a5cf92a46L81' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761168</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/client/topology.py</div><div id='m_class'> M Class Name: ClientPassiveTopology</div><div id='n_method'> N Class Name: ClientPassiveTopology</div><div id='m_method'> M Method Name: __init__(7)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: ClientBasicTopology</div><div id='n_parent_class'> N Parent Class: ClientBasicTopology</div><div id='m_file'> M File Name: fedlab_core/client/topology.py</div><div id='n_file'> N File Name: fedlab_core/client/topology.py</div><div id='m_start'> M Start Line: 81</div><div id='m_end'> M End Line: 81</div><div id='n_start'> N Start Line: 81</div><div id='n_end'> N End Line: 87</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def __init__(self, model, client_num_in_total, cuda=False, logger=None):
        super(AsyncParameterServerHandler, self).__init__(model, cuda)

        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger

        self.alpha = 0.5
        self.client_num_in_total = client_num_in_total</code></pre><h3>After Change</h3><pre><code class='java'>
    def __init__(self, model, client_num_in_total, cuda=False, logger=None):
        super(AsyncParameterServerHandler, self).__init__(model, cuda)

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger

        self.alpha = 0.5
        self.client_num_in_total = client_num_in_total</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-97e3982566422dfddf628d13c6e661cbece2e9ea3d31f29ac65c96c7e957b7e2L163' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761169</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/handler.py</div><div id='m_class'> M Class Name: AsyncParameterServerHandler</div><div id='n_method'> N Class Name: AsyncParameterServerHandler</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: ParameterServerBackendHandler</div><div id='n_parent_class'> N Parent Class: ParameterServerBackendHandler</div><div id='m_file'> M File Name: fedlab_core/server/handler.py</div><div id='n_file'> N File Name: fedlab_core/server/handler.py</div><div id='m_start'> M Start Line: 166</div><div id='m_end'> M End Line: 166</div><div id='n_start'> N Start Line: 170</div><div id='n_end'> N End Line: 176</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                             server_address=server_address,
                             dist_backend=dist_backend)

        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger
        self._LOGGER.info(
            "Server initializes with ip address {}:{} and distributed backend {}"
            .format(server_address[0], server_address[1], dist_backend))</code></pre><h3>After Change</h3><pre><code class='java'>
                             server_address=server_address,
                             dist_backend=dist_backend)

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger

        self._LOGGER.info(
            "Server initializes with ip address {}:{} and distributed backend {}"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-846e3803606bd9e9a353f0a104d34ee2313532f2995f68e6fb0ead96e958f3ddL73' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761170</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/topology.py</div><div id='m_class'> M Class Name: ServerSynchronousTopology</div><div id='n_method'> N Class Name: ServerSynchronousTopology</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: ServerBasicTopology</div><div id='n_parent_class'> N Parent Class: ServerBasicTopology</div><div id='m_file'> M File Name: fedlab_core/server/topology.py</div><div id='n_file'> N File Name: fedlab_core/server/topology.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 84</div><div id='n_start'> N Start Line: 84</div><div id='n_end'> N End Line: 90</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                 dist_backend=&quotgloo&quot,
                 logger=None):
        super().__init__(handler, server_addr, world_size, rank, dist_backend)
        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger
        &#47&#47 temp variables, can assign train epoch rather than initial epoch value in handler
        self.epochs = local_epochs
        self.model_gen_time = None  &#47&#47 record received model&quots generated update time</code></pre><h3>After Change</h3><pre><code class='java'>
        self.epochs = local_epochs
        self.model_gen_time = None  &#47&#47 record received model&quots generated update time

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger

    def run(self):
        Main procedure of each client is defined here:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-955d50f7e9cf00fe3e751cbb53febb48aa64bfd0b2e70f8ab7afbd6a5cf92a46L153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761171</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/client/topology.py</div><div id='m_class'> M Class Name: ClientActiveTopology</div><div id='n_method'> N Class Name: ClientActiveTopology</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: ClientBasicTopology</div><div id='n_parent_class'> N Parent Class: ClientBasicTopology</div><div id='m_file'> M File Name: fedlab_core/client/topology.py</div><div id='n_file'> N File Name: fedlab_core/client/topology.py</div><div id='m_start'> M Start Line: 162</div><div id='m_end'> M End Line: 162</div><div id='n_start'> N Start Line: 171</div><div id='n_end'> N End Line: 177</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                 logger=None):
        super(SyncParameterServerHandler, self).__init__(model, cuda)

        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger

        if select_ratio &lt; 0.0 or select_ratio &gt; 1.0:
            raise ValueError("Invalid select ratio: {}".format(select_ratio))</code></pre><h3>After Change</h3><pre><code class='java'>
                 logger=None):
        super(SyncParameterServerHandler, self).__init__(model, cuda)

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger

        if select_ratio &lt; 0.0 or select_ratio &gt; 1.0:
            raise ValueError("Invalid select ratio: {}".format(select_ratio))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-97e3982566422dfddf628d13c6e661cbece2e9ea3d31f29ac65c96c7e957b7e2L67' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761165</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/handler.py</div><div id='m_class'> M Class Name: SyncParameterServerHandler</div><div id='n_method'> N Class Name: SyncParameterServerHandler</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: ParameterServerBackendHandler</div><div id='n_parent_class'> N Parent Class: ParameterServerBackendHandler</div><div id='m_file'> M File Name: fedlab_core/server/handler.py</div><div id='n_file'> N File Name: fedlab_core/server/handler.py</div><div id='m_start'> M Start Line: 75</div><div id='m_end'> M End Line: 75</div><div id='n_start'> N Start Line: 75</div><div id='n_end'> N End Line: 81</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                             server_address=server_address,
                             dist_backend=dist_backend)

        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger
        self._LOGGER.info(
            "Server initializes with ip address {}:{} and distributed backend {}"
            .format(server_address[0], server_address[1], dist_backend))</code></pre><h3>After Change</h3><pre><code class='java'>
                             server_address=server_address,
                             dist_backend=dist_backend)

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger
        
        self._LOGGER.info(
            "Server initializes with ip address {}:{} and distributed backend {}"</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-846e3803606bd9e9a353f0a104d34ee2313532f2995f68e6fb0ead96e958f3ddL153' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761166</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/server/topology.py</div><div id='m_class'> M Class Name: ServerAsynchronousTopology</div><div id='n_method'> N Class Name: ServerAsynchronousTopology</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(5)</div><div id='m_parent_class'> M Parent Class: ServerBasicTopology</div><div id='n_parent_class'> N Parent Class: ServerBasicTopology</div><div id='m_file'> M File Name: fedlab_core/server/topology.py</div><div id='n_file'> N File Name: fedlab_core/server/topology.py</div><div id='m_start'> M Start Line: 164</div><div id='m_end'> M End Line: 164</div><div id='n_start'> N Start Line: 169</div><div id='n_end'> N End Line: 175</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        super(ClientSGDHandler, self).__init__(model, cuda)

        self._data_loader = data_loader
        self._LOGGER = logging<a id="change"> if logger is None</a><a id="change"> else </a>logger
        self.epoch = local_epoch

        if optimizer is None:</code></pre><h3>After Change</h3><pre><code class='java'>
        self._data_loader = data_loader
        self.epoch = local_epoch

        <a id="change">if logger is None</a>:
            <a id="change">logging.getLogger().setLevel(</a>logging.INFO<a id="change">)</a>
            self._LOGGER<a id="change"> = </a>logging
        else:
            self._LOGGER<a id="change"> = </a>logger
            
        if optimizer is None:
            self.optimizer = torch.optim.SGD(self._model.parameters(), lr=0.1, momentum=0.9)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/smilelab-fl/fedlab/commit/87c35e10f6093c4afbd8a2211a4545f8a436a737#diff-011240dfbaa7793da7c9f89f8e2b69ce5cc4a3c6a31847cecd5183d20cf9164fL68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 74761167</div><div id='project'> Project Name: smilelab-fl/fedlab</div><div id='commit'> Commit Name: 87c35e10f6093c4afbd8a2211a4545f8a436a737</div><div id='time'> Time: 2021-07-02</div><div id='author'> Author: 928255708@qq.com</div><div id='file'> File Name: fedlab_core/client/handler.py</div><div id='m_class'> M Class Name: ClientSGDHandler</div><div id='n_method'> N Class Name: ClientSGDHandler</div><div id='m_method'> M Method Name: __init__(8)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: ClientBackendHandler</div><div id='n_parent_class'> N Parent Class: ClientBackendHandler</div><div id='m_file'> M File Name: fedlab_core/client/handler.py</div><div id='n_file'> N File Name: fedlab_core/client/handler.py</div><div id='m_start'> M Start Line: 72</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 74</div><div id='n_end'> N End Line: 80</div><BR>