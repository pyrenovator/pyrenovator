<html><h3>Pattern ID :7919
</h3><img src='28170669.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = DomainAdversarialLoss(domain_discri).to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 10</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-ed330e84523c45d92c334b8583653282a43ee9200c2a2b3f1bb99f56c4d21bd0L52' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170669</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/open-set/dann.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/open-set/dann.py</div><div id='n_file'> N File Name: examples-da/open-set/dann.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 97</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 define optimizer
    optimizer = SGD(parameters, args.lr, momentum=args.momentum, weight_decay=args.wd, nesterov=True)
    lr_sheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.0003, decay_rate=0.75)</a>

    &#47&#47 start training
    best_acc1 = 0.
    for epoch in range(args.epochs):</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-17a45333dfedfa727338076b1e384bfc665fb97eb53d1d0a039ab1260e87ea6cL32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170685</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/unsupervised/jan.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/unsupervised/jan.py</div><div id='n_file'> N File Name: examples-da/unsupervised/jan.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 104</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 105</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr_scheduler
    &#47&#47 The learning rate of the classiÔ¨Åers are set 10 times to that of the feature extractor by default.
    optimizer = SGD(classifier.get_parameters(), args.lr, momentum=args.momentum, weight_decay=args.wd, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=args.lr_gamma, decay_rate=0.75)</a>

    &#47&#47 start training
    best_acc1 = 0.
    best_model = classifier.state_dict()</code></pre><h3>After Change</h3><pre><code class='java'>
        ])
    else:
        train_transform = transforms.Compose([
            <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
            transforms.RandomResizedCrop(224),
            transforms.RandomHorizontalFlip(),
            transforms.ToTensor(),
            normalize
        ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-cce4512dff629819382211e4ddcab86b1ac33b4cda541484181fadb824140a33L33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170637</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/unsupervised/mdd.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/unsupervised/mdd.py</div><div id='n_file'> N File Name: examples-da/unsupervised/mdd.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 100</div><div id='n_start'> N Start Line: 50</div><div id='n_end'> N End Line: 100</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = DomainAdversarialLoss(domain_discri).to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-cadf1a800c38732f33dffa6cdb5e59d3c7d2898c257ea65a5a67057f7932c51aL33' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170749</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/unsupervised/dann.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/unsupervised/dann.py</div><div id='n_file'> N File Name: examples-da/unsupervised/dann.py</div><div id='m_start'> M Start Line: 49</div><div id='m_end'> M End Line: 89</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters(), args.lr, momentum=args.momentum, weight_decay=args.wd, nesterov=True)
    lr_sheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.0003, decay_rate=0.75)</a>

    &#47&#47 define loss function
    mkmmd_loss = MultipleKernelMaximumMeanDiscrepancy(
        kernels=[GaussianKernel(alpha=2 ** k) for k in range(-3, 2)],</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-9b08df96e3d19957b033c9b2c101c44430ea3e64acc76f3862b032f7ea2ba0ecL32' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170701</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/unsupervised/dan.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/unsupervised/dan.py</div><div id='n_file'> N File Name: examples-da/unsupervised/dan.py</div><div id='m_start'> M Start Line: 48</div><div id='m_end'> M End Line: 87</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 88</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(all_parameters, args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_sheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = ConditionalDomainAdversarialLoss(
        domain_discri, entropy_conditioning=args.entropy,</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-7f9d349643435c0b27d70564c75d2c48d77ff87656c6cccd6d12340826473527L34' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170429</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/unsupervised/cdan.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/unsupervised/cdan.py</div><div id='n_file'> N File Name: examples-da/unsupervised/cdan.py</div><div id='m_start'> M Start Line: 50</div><div id='m_end'> M End Line: 107</div><div id='n_start'> N Start Line: 49</div><div id='n_end'> N End Line: 106</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = DomainAdversarialLoss(domain_discri).to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-ed330e84523c45d92c334b8583653282a43ee9200c2a2b3f1bb99f56c4d21bd0L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170668</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/open-set/dann.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/open-set/dann.py</div><div id='n_file'> N File Name: examples-da/open-set/dann.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 97</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = DomainAdversarialLoss(domain_discri).to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-fbd9683f4daac68e02970a19e46e88424dfa34a29e076bcfa3a5fdc8ec6edf46L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170681</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/tutorials/tutorials.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/tutorials/tutorials.py</div><div id='n_file'> N File Name: examples-da/tutorials/tutorials.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 86</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 88</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    domain_adv = DomainAdversarialLoss(domain_discri).to(device)
</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-41534dfd8dac29924afcdc4ac0ae155ef17c839f71543cbff7d15a610b91f1feL35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170569</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/partial/dann.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/partial/dann.py</div><div id='n_file'> N File Name: examples-da/partial/dann.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 97</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 97</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters(), args.lr, momentum=args.momentum, weight_decay=args.wd, nesterov=True)
    lr_sheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.0003, decay_rate=0.75)</a>

    &#47&#47 start training
    best_acc1 = 0.
    for epoch in range(args.epochs):</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 Data loading code
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    train_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.RandomResizedCrop(224),
        transforms.RandomHorizontalFlip(),
        transforms.ToTensor(),
        normalize
    ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-8b4c7c8db375f02a14c72f4186425594c20cd4ccdb0d65e279ceef1eb42b3f43L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170661</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/open-set/osbp.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/open-set/osbp.py</div><div id='n_file'> N File Name: examples-da/open-set/osbp.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 51</div><div id='n_end'> N End Line: 100</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 define optimizer and lr scheduler
    optimizer = SGD(classifier.get_parameters() + domain_discri.get_parameters(),
                    args.lr, momentum=args.momentum, weight_decay=args.weight_decay, nesterov=True)
    lr_scheduler = <a id="change">StepwiseLR(</a>optimizer<a id="change">, init_lr=args.lr, gamma=0.001, decay_rate=0.75)</a>

    &#47&#47 define loss function
    from dalib.modules.grl import WarmStartGradientReverseLayer
    grl = WarmStartGradientReverseLayer(lo=0.0, hi=args.hi, max_iters=args.warm_up_iters, auto_step=True)</code></pre><h3>After Change</h3><pre><code class='java'>
    normalize = transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    if args.center_crop:
        train_transform = transforms.Compose([
            <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
            transforms.CenterCrop(224),
            transforms.RandomHorizontalFlip(),
            transforms.ToTensor(),
            normalize
        ])
    else:
        train_transform = transforms.Compose([
            transforms.Resize((256, 256), Image.CUBIC),
            transforms.RandomResizedCrop(224),
            transforms.RandomHorizontalFlip(),
            transforms.ToTensor(),
            normalize
        ])
    val_transform = transforms.Compose([
        <a id="change">transforms.Resize(</a>(<a id="change">256</a><a id="change">, 256</a>), Image.CUBIC<a id="change">)</a>,
        transforms.CenterCrop(224),
        transforms.ToTensor(),
        normalize</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/thuml/transfer-learning-library/commit/261c8da899e1bea09f7552d175ca6b7d9fa6c4c2#diff-09c477d9e7999132b024e7dff61c7ba42b831f8e36af1b15eb3b8cd877ea7f88L36' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 28170625</div><div id='project'> Project Name: thuml/transfer-learning-library</div><div id='commit'> Commit Name: 261c8da899e1bea09f7552d175ca6b7d9fa6c4c2</div><div id='time'> Time: 2020-08-15</div><div id='author'> Author: 13126830206@163.com</div><div id='file'> File Name: examples-da/partial/pada.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: main(1)</div><div id='n_method'> N Method Name: main(1)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: examples-da/partial/pada.py</div><div id='n_file'> N File Name: examples-da/partial/pada.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 119</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 112</div><BR>