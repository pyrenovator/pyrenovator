<html><h3>Pattern ID :14735
</h3><img src='48495939.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                        if len(objects) == 9:
                            text = objects[8]
                            if text[0] == &quot\"&quot and text[-1] == &quot\"&quot:
                                text = <a id="change">text[1:-1]</a>
                            attributes[&quottext&quot] = text

                        annotations.append(
                            Polygon(points, attributes=attributes))</code></pre><h3>After Change</h3><pre><code class='java'>
                for line in f:
                    line = line.strip()
                    objects = line.split(&quot\"&quot)
                    <a id="change">if 1 &lt; len(objects)</a>:
                        if len(objects) == 3:
                            text<a id="change"> = </a>objects[1]
                        else:
                            <a id="change">raise </a>Exception("Line %s: unexpected number "
                                "of quotes in filename" % line)
                    else:
                        text<a id="change"> = </a>&quot&quot
                    objects = objects[0].split()
                    if len(objects) == 1:
                        objects = objects[0].split(&quot,&quot)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/7a66b5e9de8f0e2cdbdedc28f23b60172284ec27#diff-8dabf26e19c18cd14fd53c6edd8a4b1d2dda9ebff6029ef2786e570df53ac0daL103' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48495939</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: 7a66b5e9de8f0e2cdbdedc28f23b60172284ec27</div><div id='time'> Time: 2021-03-24</div><div id='author'> Author: anastasia.yasakova@intel.com</div><div id='file'> File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_class'> M Class Name: _IcdarExtractor</div><div id='n_method'> N Class Name: _IcdarExtractor</div><div id='m_method'> M Method Name: _load_localization_items(1)</div><div id='n_method'> N Method Name: _load_localization_items(1)</div><div id='m_parent_class'> M Parent Class: SourceExtractor</div><div id='n_parent_class'> N Parent Class: SourceExtractor</div><div id='m_file'> M File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='n_file'> N File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_start'> M Start Line: 103</div><div id='m_end'> M End Line: 133</div><div id='n_start'> N Start Line: 110</div><div id='n_end'> N End Line: 149</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 compute the new dcomp for the batch in batch_ind
    pi = tf.constant(np.pi, dtype=ktraj.dtype)
    dcomp = tf.maximum(
        tf.sqrt(tf.reduce_sum(<a id="change">ktraj[-2:, ...]</a> ** 2, axis=0)) / pi,
        threshold_level,
    )
</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 append 0s for batch, first coil
    im_size = interpob[&quotim_size&quot]
    <a id="change">if len(im_size) != 3</a>  and stacks:
        <a id="change">raise </a>ValueError(&quot`stacks` argument can only be used for 3d data&quot)
    image_loc<a id="change"> = </a>tf.concat([
        (0, 0,),
        im_size // 2,
    ], axis=0)


    &#47&#47 get the size of the test signal (add batch, coil)
    test_size = tf.concat([(1, 1,), im_size], axis=0)

    test_sig = tf.ones(test_size, dtype=tf.complex64)

    &#47&#47 get one dcomp for each batch
    &#47&#47 extract the signal amplitude increase from center of image
    query_point = tf.gather_nd(
        nufftob_back(
            nufftob_forw(
                test_sig,
                ktraj[None, :]
            ),
            ktraj[None, :]
        ),
        [image_loc],
    ) / norm_factor

    &#47&#47 use query point to get ramp intercept
    threshold_level = tf.cast(1 / query_point, ktraj.dtype)

    &#47&#47 compute the new dcomp for the batch in batch_ind
    pi = tf.constant(np.pi, dtype=ktraj.dtype)
    if stacks:
        ktraj_thresh = ktraj[0:2]
    else:
        ktraj_thresh<a id="change"> = </a>ktraj
    dcomp = tf.maximum(
        tf.sqrt(tf.reduce_sum(ktraj_thresh ** 2, axis=0)) / pi,
        threshold_level,</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/zaccharieramzi/tfkbnufft/commit/e082040fb76d89132c06a9f934dc5eccabde9f01#diff-5eab400f19924881a70608363f1f506afa3c23c185c63d088a4f0d274cd678a5L4' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48495943</div><div id='project'> Project Name: zaccharieramzi/tfkbnufft</div><div id='commit'> Commit Name: e082040fb76d89132c06a9f934dc5eccabde9f01</div><div id='time'> Time: 2020-10-14</div><div id='author'> Author: zaccharie.ramzi@gmail.com</div><div id='file'> File Name: tfkbnufft/mri/dcomp_calc.py</div><div id='m_class'> M Class Name: AnonimousClass</div><div id='n_method'> N Class Name: AnonimousClass</div><div id='m_method'> M Method Name: calculate_radial_dcomp_tf(5)</div><div id='n_method'> N Method Name: calculate_radial_dcomp_tf(4)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: tfkbnufft/mri/dcomp_calc.py</div><div id='n_file'> N File Name: tfkbnufft/mri/dcomp_calc.py</div><div id='m_start'> M Start Line: 39</div><div id='m_end'> M End Line: 68</div><div id='n_start'> N Start Line: 5</div><div id='n_end'> N End Line: 80</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
                annotations = items[item_id].annotations
                for caption in captions:
                    if caption[0] == &quot\"&quot and caption[-1] == &quot\"&quot:
                        caption = <a id="change">caption[1:-1]</a>
                    annotations.append(Caption(caption))

        return items
</code></pre><h3>After Change</h3><pre><code class='java'>
                if len(objects) == 2:
                    image = objects[0]
                    objects = objects[1].split(&quot\"&quot)
                    <a id="change">if 1 &lt; len(objects)</a>:
                        if len(objects) % 2:
                            captions<a id="change"> = </a>[objects[2 * i + 1]
                                for i in range(int(len(objects) / 2))]
                        else:
                            <a id="change">raise </a>Exception("Line %s: unexpected number "
                                "of quotes in filename" % line)
                    else:
                        captions<a id="change"> = </a>objects[0].split()
                else:
                    image = objects[0][:-1]
                    captions = []</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/openvinotoolkit/datumaro/commit/7a66b5e9de8f0e2cdbdedc28f23b60172284ec27#diff-8dabf26e19c18cd14fd53c6edd8a4b1d2dda9ebff6029ef2786e570df53ac0daL51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 48495950</div><div id='project'> Project Name: openvinotoolkit/datumaro</div><div id='commit'> Commit Name: 7a66b5e9de8f0e2cdbdedc28f23b60172284ec27</div><div id='time'> Time: 2021-03-24</div><div id='author'> Author: anastasia.yasakova@intel.com</div><div id='file'> File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_class'> M Class Name: _IcdarExtractor</div><div id='n_method'> N Class Name: _IcdarExtractor</div><div id='m_method'> M Method Name: _load_recognition_items(1)</div><div id='n_method'> N Method Name: _load_recognition_items(1)</div><div id='m_parent_class'> M Parent Class: SourceExtractor</div><div id='n_parent_class'> N Parent Class: SourceExtractor</div><div id='m_file'> M File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='n_file'> N File Name: datumaro/plugins/icdar_format/extractor.py</div><div id='m_start'> M Start Line: 60</div><div id='m_end'> M End Line: 76</div><div id='n_start'> N Start Line: 56</div><div id='n_end'> N End Line: 70</div><BR>