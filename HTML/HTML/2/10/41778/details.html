<html><h3>Pattern ID :41778
</h3><img src='117088795.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        master_map_file = self._base_dir / MASTER_MAP
        with master_map_file.open() as map_file:
            model_map, class_id_map = yaml.safe_load_all(map_file)
        <a id="change">print("** model_map"</a><a id="change">)</a>
        print(model_map)
        print("** class_id_map")
        print(class_id_map)
        return {}</code></pre><h3>After Change</h3><pre><code class='java'>
        model_map = model_map_dict[model]

        &#47&#47 construct class name-&gt;object ID map for the model
        <a id="change">class_id_map = </a><a id="change">{}</a>
        <a id="change">for </a>key, <a id="change">val</a> in <a id="change">class_id_map_dict.items():
            </a>class_id = val[model_map]
            <a id="change">class_id_map[key]</a><a id="change"> = </a>class_id
        return class_id_map

    def get(self, node_name: str) -&gt; Dict[str, Any]:</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/d63b8dbeff1d44a19c4177f583a170faf44756d8#diff-6312e497ddce9a39b865738b9c1de2e5e812fe530b39583b1f802ac64b7fac00L68' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117088795</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: d63b8dbeff1d44a19c4177f583a170faf44756d8</div><div id='time'> Time: 2021-12-14</div><div id='author'> Author: davidong@aisingapore.org</div><div id='file'> File Name: peekingduck/configloader.py</div><div id='m_class'> M Class Name: ConfigLoader</div><div id='n_method'> N Class Name: ConfigLoader</div><div id='m_method'> M Method Name: _load_mapping(2)</div><div id='n_method'> N Method Name: _load_mapping(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: peekingduck/configloader.py</div><div id='n_file'> N File Name: peekingduck/configloader.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            model_map, class_id_map = yaml.safe_load_all(map_file)
        print("** model_map")
        print(model_map)
        <a id="change">print("** class_id_map"</a><a id="change">)</a>
        print(class_id_map)
        return {}

    def get(self, node_name: str) -&gt; Dict[str, Any]:</code></pre><h3>After Change</h3><pre><code class='java'>
        model_map = model_map_dict[model]

        &#47&#47 construct class name-&gt;object ID map for the model
        <a id="change">class_id_map = </a><a id="change">{}</a>
        <a id="change">for </a>key, <a id="change">val</a> in <a id="change">class_id_map_dict.items():
            </a>class_id = val[model_map]
            <a id="change">class_id_map[key]</a><a id="change"> = </a>class_id
        return class_id_map

    def get(self, node_name: str) -&gt; Dict[str, Any]:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/aimakerspace/peekingduck/commit/d63b8dbeff1d44a19c4177f583a170faf44756d8#diff-6312e497ddce9a39b865738b9c1de2e5e812fe530b39583b1f802ac64b7fac00L49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117088798</div><div id='project'> Project Name: aimakerspace/peekingduck</div><div id='commit'> Commit Name: d63b8dbeff1d44a19c4177f583a170faf44756d8</div><div id='time'> Time: 2021-12-14</div><div id='author'> Author: davidong@aisingapore.org</div><div id='file'> File Name: peekingduck/configloader.py</div><div id='m_class'> M Class Name: ConfigLoader</div><div id='n_method'> N Class Name: ConfigLoader</div><div id='m_method'> M Method Name: _load_mapping(2)</div><div id='n_method'> N Method Name: _load_mapping(2)</div><div id='m_parent_class'> M Parent Class: </div><div id='n_parent_class'> N Parent Class: </div><div id='m_file'> M File Name: peekingduck/configloader.py</div><div id='n_file'> N File Name: peekingduck/configloader.py</div><div id='m_start'> M Start Line: 68</div><div id='m_end'> M End Line: 72</div><div id='n_start'> N Start Line: 76</div><div id='n_end'> N End Line: 84</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        write_table(self.train_dataset, &quottrain.parquet&quot)
        write_table(self.validation_dataset, &quotvalid.parquet&quot)
        write_table(self.test_dataset, &quottest.parquet&quot)
        <a id="change">print("Done with parquet!"</a><a id="change">)</a>
        train_df = pd.read_parquet(&quottrain.parquet&quot)
        valid_df = pd.read_parquet(&quotvalid.parquet&quot)
        test_df = pd.read_parquet(&quottest.parquet&quot)
        full_dataset = nvt.Dataset(pd.concat([train_df, valid_df, test_df]))</code></pre><h3>After Change</h3><pre><code class='java'>
        import nvtabular as nvt &#47&#47 pylint: disable=import-error
        from dataset_utils import upload_dataset_folders
        &#47&#47 read dataset into frames
        <a id="change">label_to_df = </a><a id="change">{}</a>
        <a id="change">for </a>label, <a id="change">dataset</a> in <a id="change">self.label_to_dataset.items():
            label_to_df[label]</a><a id="change"> = </a>read_to_dataframe(dataset, label)
        full_dataset = nvt.Dataset(pd.concat(list(label_to_df.values())))
        &#47&#47 get the workflow and fit the dataset
        workflow = get_nvt_workflow()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/jacopotagliabue/recs-at-resonable-scale/commit/3c599bc91a696c45c616604705cbfff7910a1011#diff-9b8fa700f21964aef76747038004e0ed38e07299e7c0adc81db033595dde7677L167' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 117088799</div><div id='project'> Project Name: jacopotagliabue/recs-at-resonable-scale</div><div id='commit'> Commit Name: 3c599bc91a696c45c616604705cbfff7910a1011</div><div id='time'> Time: 2022-07-18</div><div id='author'> Author: tagliabue.jacopo@gmail.com</div><div id='file'> File Name: src/my_merlin_flow.py</div><div id='m_class'> M Class Name: merlinFlow</div><div id='n_method'> N Class Name: merlinFlow</div><div id='m_method'> M Method Name: build_workflow(1)</div><div id='n_method'> N Method Name: build_workflow(1)</div><div id='m_parent_class'> M Parent Class: FlowSpec</div><div id='n_parent_class'> N Parent Class: FlowSpec</div><div id='m_file'> M File Name: src/my_merlin_flow.py</div><div id='n_file'> N File Name: src/my_merlin_flow.py</div><div id='m_start'> M Start Line: 176</div><div id='m_end'> M End Line: 200</div><div id='n_start'> N Start Line: 194</div><div id='n_end'> N End Line: 213</div><BR>